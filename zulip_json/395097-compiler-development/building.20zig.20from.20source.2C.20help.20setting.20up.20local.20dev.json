[
    {
        "content": "<p>Hello :) I tried building roc from source, and got a bunch of errors. Saw in ci that it uses zig 13. Why such an old version, if the compiler was recently rewritten in zig?</p>",
        "id": 565392600,
        "sender_full_name": "drathier",
        "timestamp": 1766699623
    },
    {
        "content": "<p>pretty sure it uses 0.15.2</p>",
        "id": 565392658,
        "sender_full_name": "nandi",
        "timestamp": 1766699707
    },
    {
        "content": "<p><a href=\"https://github.com/roc-lang/roc/blob/main/BUILDING_FROM_SOURCE.md\">https://github.com/roc-lang/roc/blob/main/BUILDING_FROM_SOURCE.md</a></p>",
        "id": 565392681,
        "sender_full_name": "nandi",
        "timestamp": 1766699755
    },
    {
        "content": "<p>I think maybe our old Rust compiler is still using zig 13 (the stdlib has always been in Zig, even back when the rest of the compiler was in Rust) because that was the latest version when we started the rewrite</p>",
        "id": 565392790,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1766699949
    },
    {
        "content": "<p><a href=\"https://github.com/roc-lang/roc/blob/main/.github/workflows/nightly_linux_x86_64.yml#L23\">https://github.com/roc-lang/roc/blob/main/.github/workflows/nightly_linux_x86_64.yml#L23</a> mentions 13, yes</p>",
        "id": 565392894,
        "sender_full_name": "drathier",
        "timestamp": 1766700006
    },
    {
        "content": "<p>I got a bunch of compilation errors with master and with 0.15.2, which is why I checked. Reinstalling zig now to make sure it's 0.15.2 and retrying</p>",
        "id": 565393001,
        "sender_full_name": "drathier",
        "timestamp": 1766700048
    },
    {
        "content": "<p>for reference, here's a recent zig master</p>\n<div class=\"codehilite\"><pre><span></span><code>~/drathier/roc$ /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/zig build\n/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: error: no field or member function named &#39;addCSourceFile&#39; in &#39;Build.Step.Compile&#39;\n    cffi_test.addCSourceFile(.{\n    ~~~~~~~~~^~~~~~~~~~~~~~~\n/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build/Step/Compile.zig:1:1: note: struct declared here\nconst builtin = @import(&quot;builtin&quot;);\n^~~~~\n/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: note: method invocation only supports up to one level of implicit pointer dereferencing\n/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: note: use &#39;.*&#39; to dereference pointer\nreferenced by:\n    runBuild__anon_91509: /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build.zig:2226:33\n    dependencyInner__anon_87981: /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build.zig:2207:29\n    8 reference(s) hidden; use &#39;-freference-trace=10&#39; to see all references\n/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: error: no field or member function named &#39;addCSourceFiles&#39; in &#39;Build.Step.Compile&#39;\n    if (compression) zstd.addCSourceFiles(.{ .root = upstream.path(&quot;lib&quot;), .files = compression_sources });\n                     ~~~~^~~~~~~~~~~~~~~~\n/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build/Step/Compile.zig:1:1: note: struct declared here\nconst builtin = @import(&quot;builtin&quot;);\n^~~~~\n/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: note: method invocation only supports up to one level of implicit pointer dereferencing\n/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: note: use &#39;.*&#39; to dereference pointer\nbuild.zig:1797:28: error: operator &gt; not allowed for type &#39;Io.Timestamp&#39;\n        if (roc_stat.mtime &gt; bin_stat.mtime) {\n            ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~\n/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Io.zig:875:23: note: struct declared here\npub const Timestamp = struct {\n</code></pre></div>",
        "id": 565393150,
        "sender_full_name": "drathier",
        "timestamp": 1766700284
    },
    {
        "content": "<p>you try <code>zig build roc</code>?</p>",
        "id": 565393171,
        "sender_full_name": "nandi",
        "timestamp": 1766700333
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>~/drathier/roc$ /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/zig build roc\n/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: error: no field or member function named &#39;addCSourceFile&#39; in &#39;Build.Step.Compile&#39;\n    cffi_test.addCSourceFile(.{\n    ~~~~~~~~~^~~~~~~~~~~~~~~\n/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build/Step/Compile.zig:1:1: note: struct declared here\nconst builtin = @import(&quot;builtin&quot;);\n^~~~~\n/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: note: method invocation only supports up to one level of implicit pointer dereferencing\n/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: note: use &#39;.*&#39; to dereference pointer\nreferenced by:\n    runBuild__anon_91509: /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build.zig:2226:33\n    dependencyInner__anon_87981: /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build.zig:2207:29\n    8 reference(s) hidden; use &#39;-freference-trace=10&#39; to see all references\n/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: error: no field or member function named &#39;addCSourceFiles&#39; in &#39;Build.Step.Compile&#39;\n    if (compression) zstd.addCSourceFiles(.{ .root = upstream.path(&quot;lib&quot;), .files = compression_sources });\n                     ~~~~^~~~~~~~~~~~~~~~\n/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build/Step/Compile.zig:1:1: note: struct declared here\nconst builtin = @import(&quot;builtin&quot;);\n^~~~~\n/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: note: method invocation only supports up to one level of implicit pointer dereferencing\n/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: note: use &#39;.*&#39; to dereference pointer\nbuild.zig:1797:28: error: operator &gt; not allowed for type &#39;Io.Timestamp&#39;\n        if (roc_stat.mtime &gt; bin_stat.mtime) {\n            ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~\n/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Io.zig:875:23: note: struct declared here\npub const Timestamp = struct {\n                      ^~~~~~\n</code></pre></div>",
        "id": 565393239,
        "sender_full_name": "drathier",
        "timestamp": 1766700457
    },
    {
        "content": "<p>got it building now, thanks for helping out!</p>",
        "id": 565394219,
        "sender_full_name": "drathier",
        "timestamp": 1766702362
    },
    {
        "content": "<p>what was the issue?</p>",
        "id": 565394272,
        "sender_full_name": "nandi",
        "timestamp": 1766702409
    },
    {
        "content": "<p>not sure, unfortunately. I reinstalled zig with brew</p>",
        "id": 565394330,
        "sender_full_name": "drathier",
        "timestamp": 1766702527
    }
]