[
    {
        "content": "<p>Do we always want to use musl for linux? Fine by me, it was just a bit surprising so I wanted to be sure.<br>\nThis is from current main branch:</p>\n<div class=\"codehilite\" data-code-language=\"Zig\"><pre><span></span><code><span class=\"kr\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"p\">(</span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">std</span><span class=\"p\">.</span><span class=\"n\">Build</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"c1\">// build steps</span>\n<span class=\"w\">    </span><span class=\"p\">...</span>\n\n<span class=\"w\">    </span><span class=\"c1\">// general configuration</span>\n<span class=\"w\">    </span><span class=\"kr\">const</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">blk</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"kr\">var</span><span class=\"w\"> </span><span class=\"n\">default_target_query</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">std</span><span class=\"p\">.</span><span class=\"n\">Target</span><span class=\"p\">.</span><span class=\"n\">Query</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">.{</span>\n<span class=\"w\">            </span><span class=\"p\">.</span><span class=\"n\">abi</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">builtin</span><span class=\"p\">.</span><span class=\"n\">target</span><span class=\"p\">.</span><span class=\"n\">os</span><span class=\"p\">.</span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"n\">linux</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"n\">musl</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"kc\">null</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"p\">};</span>\n</code></pre></div>",
        "id": 560823110,
        "sender_full_name": "Anton",
        "timestamp": 1764347567
    },
    {
        "content": "<p>I don't think there's much downside is there?</p>",
        "id": 560831007,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764350403
    },
    {
        "content": "<p>as I understand it the main downside is that musl's allocators are slow, but I assume we are (or will be) using zig allocators anyway</p>",
        "id": 560831172,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764350469
    },
    {
        "content": "<p>I remember I could not access file metadata with basic-cli built with musl: <a href=\"https://roc-lang.github.io/basic-cli/0.20.0/File/#time_accessed\">https://roc-lang.github.io/basic-cli/0.20.0/File/#time_accessed</a>!<br>\nBut yeah, musl simplifies things a lot for now, we can always change it later if we absolutely need to.</p>",
        "id": 560831482,
        "sender_full_name": "Anton",
        "timestamp": 1764350608
    },
    {
        "content": "<p>The goal was musl by default</p>",
        "id": 560836171,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1764352715
    },
    {
        "content": "<p>You can still explicitly build for glibc</p>",
        "id": 560836191,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1764352726
    },
    {
        "content": "<p>More static by default is nice</p>",
        "id": 560836233,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1764352744
    }
]