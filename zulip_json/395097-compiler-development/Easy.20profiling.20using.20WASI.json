[
    {
        "content": "<p>I stumbled across a super easy way to profile the compiler using WASI.</p>\n<div class=\"codehilite\"><pre><span></span><code>$ zig build roc -Dtarget=wasm32-wasi\nwarning: Cross compilation does not support fuzzing (Only building repro executables)\n\n$ wasmtime --dir=. --profile=guest zig-out/bin/roc.wasm check New-List-Cutoff_10MB.roc\npanic: index out of bounds: index 2863311530, len 54242\nUnable to dump stack trace: not implemented for Wasm\nUnable to dump stack trace: not implemented for Wasm\n\nProfile written to: wasmtime-guest-profile.json\nView this profile at https://profiler.firefox.com/.\nError: failed to run main module `zig-out/bin/roc.wasm`\n\nCaused by:\n    0: failed to invoke command default\n    1: error while executing at wasm backtrace:\n           0: 0x50f1 - roc.wasm!posix.abort\n           1: 0x40da - roc.wasm!debug.defaultPanic\n           2: 0x4661 - roc.wasm!debug.panicExtra__anon_2328\n          &lt;snipped&gt;\n</code></pre></div>\n<p>Then I just opened my browser to <code>https://profiler.firefox.com/</code> and loaded the generated profile <code>wasmtime-guest-profile.json</code></p>\n<p><a href=\"/user_uploads/22008/bkh988fD2fQt6fUvVaD2u3Ny/Screenshot-2025-07-10-at-15.04.47.png\">Screenshot 2025-07-10 at 15.04.47.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/22008/bkh988fD2fQt6fUvVaD2u3Ny/Screenshot-2025-07-10-at-15.04.47.png\" title=\"Screenshot 2025-07-10 at 15.04.47.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1720x1184\" src=\"/user_uploads/thumbnail/22008/bkh988fD2fQt6fUvVaD2u3Ny/Screenshot-2025-07-10-at-15.04.47.png/840x560.webp\"></a></div><p><span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 528002007,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1752123916
    }
]