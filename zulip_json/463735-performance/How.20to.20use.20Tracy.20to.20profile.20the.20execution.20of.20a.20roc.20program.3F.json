[
    {
        "content": "<p>I’ve managed to install tracy, build it from source, and have the tracy GUI up.<br>\nThen I’m compiling the roc binary with:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>zig<span class=\"w\"> </span>build<span class=\"w\"> </span>roc<span class=\"w\"> </span>-Dtracy<span class=\"o\">=</span>/Users/piz/git/wolfpld/tracy<span class=\"w\"> </span>-Dtracy-callstack<span class=\"o\">=</span><span class=\"nb\">true</span>\n</code></pre></div>\n<p>And then when I’m running the roc program, it seems to connect to the tracy server. And then I have the following catpure.</p>\n<p><a href=\"/user_uploads/22008/ZWmYWIGqjo2O1YtF2BMOVA-n/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/22008/ZWmYWIGqjo2O1YtF2BMOVA-n/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1129x1159\" src=\"/user_uploads/thumbnail/22008/ZWmYWIGqjo2O1YtF2BMOVA-n/image.png/840x560.webp\"></a></div><p>It basically says that all the time is spent inside <code>rocRun</code>. If I want to get more fine-grained insight, what should I do?</p>",
        "id": 563881323,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1765819216
    },
    {
        "content": "<p>Weird. I wonder why it didn't expand all the zones for you. (zooming out may fix?)</p>",
        "id": 563882303,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1765819487
    },
    {
        "content": "<p>Do you have any ability to drag down and expand the main thread zone to see more?</p>",
        "id": 563882386,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1765819507
    },
    {
        "content": "<p>Also, if you sort by self time in that zone info panel, you probably still would get a solid sense of where is best to look at. Though it is possible that we don't yet have tracing for whichever functions are slow in this case.</p>\n<p>Generally, I use roc build and then run the app separately so that compilation time and run time are separate traces</p>",
        "id": 563882740,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1765819604
    },
    {
        "content": "<p>I don’t think I have access to any more details. Though when I added manually the two lines at the top of rocRun to the top of runWithPosixFdInheritance, I see it in the details. <br>\n<a href=\"/user_uploads/22008/9oi7l1-QFRufGe80zSKb1UnJ/image.png\">image.png</a><br>\nBut you are probably right, I might need to split into build an executable then run that</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/22008/9oi7l1-QFRufGe80zSKb1UnJ/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"743x1156\" src=\"/user_uploads/thumbnail/22008/9oi7l1-QFRufGe80zSKb1UnJ/image.png/840x560.webp\"></a></div>",
        "id": 563883224,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1765819733
    },
    {
        "content": "<p>What really odd is that clearly it is recording more data</p>",
        "id": 563883747,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1765819867
    },
    {
        "content": "<p>Otherwise it wouldn't know all of those sell times below</p>",
        "id": 563883771,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1765819875
    },
    {
        "content": "<p>I'm guess we don't have coverage for whatever is eating all the time</p>",
        "id": 563883852,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1765819895
    },
    {
        "content": "<p>Is this from your append benchmark?</p>",
        "id": 563883984,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1765819932
    },
    {
        "content": "<p>Got more by running the binary directly :) <br>\n<a href=\"/user_uploads/22008/yRtxzwZGCi4xZ03BCiF_0NZ8/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/22008/yRtxzwZGCi4xZ03BCiF_0NZ8/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"880x1245\" src=\"/user_uploads/thumbnail/22008/yRtxzwZGCi4xZ03BCiF_0NZ8/image.png/840x560.webp\"></a></div>",
        "id": 563883990,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1765819934
    },
    {
        "content": "<p>Thx</p>",
        "id": 563884184,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1765819988
    },
    {
        "content": "<p>I wrote a bit about what I tried here. Might continue on it in the coming days, but feel free to steal anything interesting in there to incorporate in other perf PRs.<br>\n<a href=\"https://github.com/roc-lang/roc/pull/8687\">https://github.com/roc-lang/roc/pull/8687</a></p>",
        "id": 563909367,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1765827494
    }
]