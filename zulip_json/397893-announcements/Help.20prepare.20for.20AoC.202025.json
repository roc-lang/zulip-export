[
    {
        "content": "<p>As you know we are getting close to Advent of Code -- and should have the compiler in a state that we can use it (for those brave enough).</p>\n<p>If you have some time and would like to help, it would be great if you could try out the new compiler using a test platform and report any bugs or issues you find. </p>\n<p>We've just started adding the builtins - so many functions are just missing an implementation. Feel free to make a PR if you can.</p>\n<p>Here is a video I clipped showing how you can use the new compiler today.</p>\n<p><a href=\"https://youtu.be/XMWBx20QTgY\">https://youtu.be/XMWBx20QTgY</a></p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"XMWBx20QTgY\" href=\"https://youtu.be/XMWBx20QTgY\"><img src=\"https://uploads.zulipusercontent.net/8c570ec8bf3acc18c9b496ff2d5649fad8bda47d/68747470733a2f2f692e7974696d672e636f6d2f76692f584d5742783230515467592f6d7164656661756c742e6a7067\"></a></div><p>It's using the fx test platform, so only has Stdio effects available... and only works when built locally (not from a URL release) -- but that's all you need to get started solving AoC puzzles and trying out the new static dispatch and syntax.</p>\n<p>We're resolving bugs in a tight loop (think hours not days) right now, so if you find any issues I would suggest letting us know in zulip and remember to sync with main as PR's land.</p>\n<p>Looking forward to working with you all on Roc and preparing for AoC again this year <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 560034404,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764024671
    },
    {
        "content": "<p>Is there another step here to build libhost.a on a non-windows platform? I'm running into <a href=\"https://github.com/roc-lang/roc/blob/9e509c53cc6209f47166cfb0616ff757783b795f/src/cli/main.zig#L2058-L2060\">this failing-to-find-host-path error case</a> locally on linux.</p>",
        "id": 560174693,
        "sender_full_name": "Dan G Knutson",
        "timestamp": 1764082123
    },
    {
        "content": "<p>Hmm, did you run <code>zig build test</code>?</p>",
        "id": 560175551,
        "sender_full_name": "Anton",
        "timestamp": 1764082315
    },
    {
        "content": "<p>Yeah; maybe some test is being skipped? I got 1533 passed on roc version <code>debug-9e509c53</code>.</p>",
        "id": 560177429,
        "sender_full_name": "Dan G Knutson",
        "timestamp": 1764082712
    },
    {
        "content": "<p>I will try it on linux later today.</p>",
        "id": 560177699,
        "sender_full_name": "Anton",
        "timestamp": 1764082756
    },
    {
        "content": "<p>I noticed <code>fx_platform_test.zig</code> now. If I run <code>zig build test -- --test-filter 'fx platform'</code> no tests are run, so I think that's getting skipped for some reason.</p>",
        "id": 560181804,
        "sender_full_name": "Dan G Knutson",
        "timestamp": 1764083657
    },
    {
        "content": "<p>It needs to be 'fx_platform', that works for me, does it work for you?</p>",
        "id": 560183524,
        "sender_full_name": "Anton",
        "timestamp": 1764084066
    },
    {
        "content": "<p>I was able to reproduce the issue on linux</p>",
        "id": 560203212,
        "sender_full_name": "Anton",
        "timestamp": 1764088923
    },
    {
        "content": "<p>I hit that error as well on NixOs. Did <code>zig build</code> and <code>zig build test</code> before. Then with <code>zig-out/bin/roc test/fx/app.roc</code> I get:<br>\n<code>error: Failed to resolve platform spec './platform/main.roc': error.PlatformNotSupported</code></p>",
        "id": 560208858,
        "sender_full_name": "Norbert Hajagos",
        "timestamp": 1764090413
    },
    {
        "content": "<p>I also hit this issue on NixOS. <code>build.zig</code> has a check like <code>target.query.isNativeCpu() and target.query.isNativeOs() and target.query.isNativeAbi()</code> on line 816 and that'll be false on my machine since I'm using native CPU, native OS, but not native ABI (it's using <code>musl</code> not <code>glibc</code>). So I  switched that to <code>is_native</code> (an existing variable with exactly this distinction). However, the tests fail and I'll attach the output.</p>\n<p><a href=\"/user_uploads/22008/CBap2-kL3IIy1EdRs4T_WcW8/test-output.txt\">test-output.txt</a></p>",
        "id": 560440588,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764176809
    },
    {
        "content": "<p>I'll try to take care of this issue tomorrow.</p>",
        "id": 560453340,
        "sender_full_name": "Anton",
        "timestamp": 1764181835
    },
    {
        "content": "<p>I'm blown away by how fast <code>./zig-out/bin/roc test/fx/app.roc</code> is. It just goes BRRRT! Can't wait to use this compiler for everything... <em>everything</em>.</p>",
        "id": 560455325,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764182677
    },
    {
        "content": "<p>Are there any WIP docs I can use while trying this out, or should I just look at the source code to figure out what’s available and where I can help out? I just built the compiler on macOS, and that part went great. <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 560470444,
        "sender_full_name": "Kevin Hovsäter",
        "timestamp": 1764188609
    },
    {
        "content": "<p>I'm going to try to post some tonight</p>",
        "id": 560470732,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764188733
    },
    {
        "content": "<p>I tried to run a simple \"hello world\" program with the compiler using the following Roc file:</p>\n<div class=\"codehilite\" data-code-language=\"roc\"><pre><span></span><code>app [main!] { pf: platform \"/Users/kevin/src/roc/test/fx/platform/main.roc\" }\n\nimport pf.Stdout\n\nmain! = || {\n    Stdout.line!(\"Hello, World!\")\n}\n</code></pre></div>\n<p>But running <code>roc year2024day01.roc</code> produced the following error message:</p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">~/prj/advent-of-code $ roc year2024day01.roc</span>\n\n<span class=\"go\">Roc crashed: Error evaluating from shared memory: TypeMismatch</span>\n<span class=\"go\">error: Failed to run with POSIX fd inheritance: error.ProcessExitedWithError</span>\n</code></pre></div>\n<p>Am I doing something silly here? I'm running on the latest version of macOS and have the compiler running at <code>debug-c442c8a0</code>.</p>",
        "id": 560471682,
        "sender_full_name": "Kevin Hovsäter",
        "timestamp": 1764189155
    },
    {
        "content": "<p>if you have the repo checked out, what happens if you do (from the repo root) <code>roc test/fx/app.roc</code>?</p>",
        "id": 560472046,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764189317
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281383\">Richard Feldman</span> <a href=\"#narrow/channel/397893-announcements/topic/Help.20prepare.20for.20AoC.202025/near/560472046\">said</a>:</p>\n<blockquote>\n<p>if you have the repo checked out, what happens if you do (from the repo root) <code>roc test/fx/app.roc</code>?</p>\n</blockquote>\n<p>That seems to work fine. </p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">~/src/roc (main) $ zig-out/bin/roc test/fx/app.roc</span>\n<span class=\"go\">Hello from stdout!</span>\n<span class=\"go\">Line 1 to stdout</span>\n<span class=\"go\">Line 2 to stderr</span>\n<span class=\"go\">Line 3 to stdout</span>\n<span class=\"go\">Error from stderr!</span>\n</code></pre></div>",
        "id": 560472229,
        "sender_full_name": "Kevin Hovsäter",
        "timestamp": 1764189401
    },
    {
        "content": "<p>hm, maybe it's unhappy about the absolute path?</p>",
        "id": 560472261,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764189413
    },
    {
        "content": "<p>for the platform location</p>",
        "id": 560472270,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764189419
    },
    {
        "content": "<p>What if you rename the file to <code>app.roc</code> (rename the existing one)? I tried a few things and the filename seems to have an impact for me.</p>",
        "id": 560472579,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764189561
    },
    {
        "content": "<p>It doesn't seem like a relative path helped. I changed the platform path to <code>../../src/roc/test/fx/platform/main.roc</code> and got the same error. Renaming the file to <code>app.roc</code> did not work either.</p>\n<p>What did work was coping the platform into the root of the directory where the file is and then reference it using a relative path (<code>app [main!] { pf: platform \"./platform/main.roc\" }</code>).</p>\n<p>Perhaps I was mistaken in thinking I could reference a platform outside my project directory?</p>",
        "id": 560472913,
        "sender_full_name": "Kevin Hovsäter",
        "timestamp": 1764189707
    },
    {
        "content": "<p>To give context about the filename:</p>\n<div class=\"codehilite\"><pre><span></span><code>./zig-out/bin/roc test/fx/appc.roc\nerror: Child process /home/niclas/.cache/roc/43d450a451cacf424d42033893679acf/temp/roc-tmp-22donbk0q9xGfZH0fwb5a2jfUHqhJGXb/roc_run_349899816 killed by signal: 11\nerror: Child process crashed with segmentation fault (SIGSEGV)\nerror: Failed to run with POSIX fd inheritance: error.ProcessKilledBySignal\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>./zig-out/bin/roc test/fx/app.roc\nHello, World!\n</code></pre></div>\n<p>Same file contents</p>",
        "id": 560473137,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764189806
    },
    {
        "content": "<p>I'll take a look at the relative path thing</p>",
        "id": 560473169,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764189815
    },
    {
        "content": "<p>the name <code>appc.roc</code> works for me, but that is WILD</p>",
        "id": 560473316,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764189881
    },
    {
        "content": "<p>Yeah, my wife tells me I'm pretty crazy</p>",
        "id": 560473347,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764189899
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281383\">Richard Feldman</span> <a href=\"#narrow/channel/397893-announcements/topic/Help.20prepare.20for.20AoC.202025/near/560473169\">said</a>:</p>\n<blockquote>\n<p>I'll take a look at the relative path thing</p>\n</blockquote>\n<p>Worth noting is that it only seems to work when the platform starts with <code>./path/to/platform</code>. I tried moving the file from <code>&lt;PROJECT_ROOT&gt;/year2024day01.roc</code> into <code>&lt;PROJECT_ROOT&gt;/year2024/day01.roc</code> but then I got the same error because the platform path started with <code>../</code> now.</p>",
        "id": 560473593,
        "sender_full_name": "Kevin Hovsäter",
        "timestamp": 1764190023
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>➜  roc_zig git:(main) ✗ cp test/fx/appc.roc test/fx/app.roc\n➜  roc_zig git:(main) ✗ bat test/fx/app.roc\n─────┬─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\n     │ File: test/fx/app.roc\n─────┼─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\n   1 │ app [main!] { pf: platform &quot;./platform/main.roc&quot; }\n   2 │\n   3 │ import pf.Stdout\n   4 │ import pf.Stderr\n   5 │\n   6 │ main! = || {\n   7 │     Stdout.line!(&quot;Hello from stdout!&quot;)\n   8 │     Stdout.line!(&quot;Line 1 to stdout&quot;)\n   9 │     Stderr.line!(&quot;Line 2 to stderr&quot;)\n  10 │     Stdout.line!(&quot;Line 3 to stdout&quot;)\n  11 │     Stderr.line!(&quot;Error from stderr!&quot;)\n  12 │ }\n─────┴─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\n➜  roc_zig git:(main) ✗ bat test/fx/appc.roc\n─────┬─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\n     │ File: test/fx/appc.roc\n─────┼─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\n   1 │ app [main!] { pf: platform &quot;./platform/main.roc&quot; }\n   2 │\n   3 │ import pf.Stdout\n   4 │ import pf.Stderr\n   5 │\n   6 │ main! = || {\n   7 │     Stdout.line!(&quot;Hello from stdout!&quot;)\n   8 │     Stdout.line!(&quot;Line 1 to stdout&quot;)\n   9 │     Stderr.line!(&quot;Line 2 to stderr&quot;)\n  10 │     Stdout.line!(&quot;Line 3 to stdout&quot;)\n  11 │     Stderr.line!(&quot;Error from stderr!&quot;)\n  12 │ }\n─────┴─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\n➜  roc_zig git:(main) ✗ ./zig-out/bin/roc test/fx/app.roc\nHello from stdout!\nLine 1 to stdout\nLine 2 to stderr\nLine 3 to stdout\nError from stderr!\n➜  roc_zig git:(main) ✗ ./zig-out/bin/roc test/fx/appc.roc\nerror: Child process /home/niclas/.cache/roc/43d450a451cacf424d42033893679acf/temp/roc-tmp-MxVgzDoyVPsmTvDDcEvMe750Tm0mrDPP/roc_run_349899816 killed by signal: 11\nerror: Child process crashed with segmentation fault (SIGSEGV)\nerror: Failed to run with POSIX fd inheritance: error.ProcessKilledBySignal\n</code></pre></div>\n<p>idk man,  my computer is drunk <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 560473712,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764190087
    },
    {
        "content": "<p>is this on current  <code>main</code>? so, <code>587c53210286757876478579d2c17cd59f834198</code></p>",
        "id": 560474309,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764190342
    },
    {
        "content": "<p>I just tried what <span class=\"user-mention\" data-user-id=\"524503\">@Niclas Ahden</span> mentioned on my machine (M1 MBP on macOS 15.16.1)  and <code>./zig-out/bin/roc test/fx/appc.roc</code> ran without a problem on <code>587c53210286757876478579d2c17cd59f834198</code>.</p>",
        "id": 560475352,
        "sender_full_name": "Kevin Hovsäter",
        "timestamp": 1764190771
    },
    {
        "content": "<p>Nope, I was on <code>df66010948</code>. Pulled <code>587c532102</code>, <code>git clean -dfx</code>, re-added this diff:</p>\n<div class=\"codehilite\"><pre><span></span><code>diff --git i/build.zig w/build.zig\nindex 57fb74fa51..d9d0c6bd4d 100644\n--- i/build.zig\n+++ w/build.zig\n@@ -1044,7 +1044,7 @@ pub fn build(b: *std.Build) void {\n     const is_windows = target.result.os.tag == .windows;\n\n     // fx platform effectful functions test - only run when not cross-compiling\n-    if (target.query.isNativeCpu() and target.query.isNativeOs() and target.query.isNativeAbi()) {\n+    if (is_native) {\n         // Create fx test platform host static library\n         const test_platform_fx_host_lib = createTestPlatformHostLib(\n             b,\n</code></pre></div>\n<p>Rebuilt with <code>zig build</code>, then:</p>\n<div class=\"codehilite\"><pre><span></span><code>./zig-out/bin/roc test/fx/app.roc\nerror: Child process /home/niclas/.cache/roc/8a126c1a3b33ced3831765bc6d91e1bc/temp/roc-tmp-LPoA9CbVzOVdzCLySvGz5YtBiD4lWT8i/roc_run_792223834 killed by signal: 11\nerror: Child process crashed with segmentation fault (SIGSEGV)\nerror: Failed to run with POSIX fd inheritance: error.ProcessKilledBySignal\n</code></pre></div>\n<p>I'll try the same on my Mac.</p>",
        "id": 560475822,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764190966
    },
    {
        "content": "<p>Works perfectly on the Mac (ARM). Not on NixOS (x86) sadly.</p>",
        "id": 560476842,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764191418
    },
    {
        "content": "<p>ok see if it works on this branch: <a href=\"https://github.com/roc-lang/roc/pull/8461\">https://github.com/roc-lang/roc/pull/8461</a></p>",
        "id": 560479264,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764192607
    },
    {
        "content": "<p>(I'm guessing probably still doesn't work on NixOS but relative paths should work better!)</p>",
        "id": 560479294,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764192623
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281383\">Richard Feldman</span> <a href=\"#narrow/channel/397893-announcements/topic/Help.20prepare.20for.20AoC.202025/near/560479264\">said</a>:</p>\n<blockquote>\n<p>ok see if it works on this branch: <a href=\"https://github.com/roc-lang/roc/pull/8461\">https://github.com/roc-lang/roc/pull/8461</a></p>\n</blockquote>\n<p>I tried rebuilding the compiler but got:</p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">test</span>\n<span class=\"go\">└─ tests_summary</span>\n<span class=\"go\">   └─ run test fx_platform_test 12/13 passed, 1 failed</span>\n<span class=\"go\">error: 'fx_platform_test.test.fx platform with dotdot starting path' failed: Run failed with exit code 1</span>\n<span class=\"go\">STDOUT:</span>\n<span class=\"go\">STDERR:</span>\n<span class=\"go\">Roc crashed: Error evaluating from shared memory: TypeMismatch</span>\n<span class=\"go\">error: Failed to run with POSIX fd inheritance: error.ProcessExitedWithError</span>\n\n<span class=\"go\">/Users/kevin/src/roc/src/cli/test/fx_platform_test.zig:146:17: 0x1005c908b in test.fx platform with dotdot starting path (fx_platform_test)</span>\n<span class=\"go\">                return error.RunFailed;</span>\n<span class=\"go\">                ^</span>\n<span class=\"go\">error: while executing test 'fx_platform_test.test.fx platform checked directly finds sibling modules', the following test command failed:</span>\n<span class=\"go\">./.zig-cache/o/8b01e086a989ec45c18eb3c0c3b150b3/fx_platform_test --cache-dir=./.zig-cache --seed=0x73d04778 --listen=-</span>\n\n<span class=\"go\">Build Summary: 54/57 steps succeeded; 1 failed; 1590/1591 tests passed; 1 failed</span>\n<span class=\"go\">test transitive failure</span>\n<span class=\"go\">└─ tests_summary transitive failure</span>\n<span class=\"go\">   └─ run test fx_platform_test 12/13 passed, 1 failed</span>\n\n<span class=\"go\">error: the following build command failed with exit code 1:</span>\n<span class=\"go\">.zig-cache/o/cc6d41c01a0793b6188e07ef840af6b0/build /Users/kevin/.asdf/installs/zig/0.15.2/zig /Users/kevin/.asdf/installs/zig/0.15.2/lib /Users/kevin/src/roc .zig-cache /Users/kevin/.cache/zig --seed 0x73d04778 -Za49efdac55e7b81a test</span>\n</code></pre></div>",
        "id": 560479764,
        "sender_full_name": "Kevin Hovsäter",
        "timestamp": 1764192828
    },
    {
        "content": "<p>I could verify that the branch fixes the relative path issue. No build error unlike Kevin.</p>",
        "id": 560480013,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764192932
    },
    {
        "content": "<p>(and it still doesn't  work on NixOS as expected)</p>",
        "id": 560480083,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764192963
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"452574\">@Kevin Hovsäter</span> what OS are you running?</p>",
        "id": 560481104,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764193430
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281383\">Richard Feldman</span> <a href=\"#narrow/channel/397893-announcements/topic/Help.20prepare.20for.20AoC.202025/near/560481104\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"452574\">Kevin Hovsäter</span> what OS are you running?</p>\n</blockquote>\n<p>M1 MBP on macOS 15.16.1.</p>",
        "id": 560481388,
        "sender_full_name": "Kevin Hovsäter",
        "timestamp": 1764193552
    },
    {
        "content": "<p>M1 MBP on macOS 26.1 (25B78)</p>",
        "id": 560481601,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764193645
    },
    {
        "content": "<p>so weird! I don't know what the issue is</p>",
        "id": 560481959,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764193841
    },
    {
        "content": "<p>FYI here is the WIP tutorial I'm working on - just have the very basics so far <a href=\"https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4\">https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4</a></p>\n<p>we do actually have bundled platforms working, so in theory we could package up the <code>test/fx/</code> platform for all the different OSes and distribute it, but we should probably try to get NixOS working first</p>",
        "id": 560482087,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764193908
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"452574\">@Kevin Hovsäter</span> if you do <code>zig build</code> without running tests, and then run the compiled <code>roc</code> manually, does that work?</p>",
        "id": 560482163,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764193943
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281383\">Richard Feldman</span> <a href=\"#narrow/channel/397893-announcements/topic/Help.20prepare.20for.20AoC.202025/near/560481959\">said</a>:</p>\n<blockquote>\n<p>so weird! I don't know what the issue is</p>\n</blockquote>\n<p>I'm heading to bed, but I can try to investigate further tomorrow!</p>",
        "id": 560482250,
        "sender_full_name": "Kevin Hovsäter",
        "timestamp": 1764193984
    },
    {
        "content": "<p>Double-checking:</p>\n<div class=\"codehilite\"><pre><span></span><code>zig build test\n✅ All 1591 tests passed.\n</code></pre></div>",
        "id": 560482783,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764194276
    },
    {
        "content": "<p>I'm on x86_64-linux-gnu and experiencing the same issue.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"281383\">Richard Feldman</span> <a href=\"#narrow/channel/397893-announcements/topic/Help.20prepare.20for.20AoC.202025/near/560482087\">said</a>:</p>\n<blockquote>\n<p>FYI here is the WIP tutorial I'm working on - just have the very basics so far <a href=\"https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4\">https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4</a></p>\n</blockquote>\n<p>Whether grabbing the nightly like in this tutorial or building from source, I can't get the fx platform to work either. Initially, I get</p>\n<div class=\"codehilite\"><pre><span></span><code>$ roc version\nRoc compiler version release-fast-299268c2\n\n$ roc test/fx/app.roc\nerror: Failed to resolve platform spec &#39;./platform/main.roc&#39;: error.PlatformNotSupported\n</code></pre></div>\n<p>After adjusting build.zig to actually build <code>test/fx/platform/libhost.a</code>, the error becomes</p>\n<div class=\"codehilite\"><pre><span></span><code>$ roc test/fx/app.roc\nerror: Child process /home/timob/.cache/roc/387646676cd876895a972bc305e43fc4/temp/roc-tmp-KBw2ppRjjpmtiooxunMoZ47aR77MhrJ5/roc_run_792223834 killed by signal: 11\nerror: Child process crashed with segmentation fault (SIGSEGV)\nerror: Failed to run with POSIX fd inheritance: error.ProcessKilledBySignal\n</code></pre></div>\n<p>I can't seem to usefully attach a debugger to anything, so my investigation unfortunately has had to stop here so far.</p>",
        "id": 560484975,
        "sender_full_name": "isaactfa",
        "timestamp": 1764195416
    },
    {
        "content": "<p>I'll try to debug that tonight</p>",
        "id": 560485577,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764195763
    },
    {
        "content": "<p>I tried <a href=\"https://github.com/roc-lang/roc/pull/8457\">fix-segfault/ca81b2916</a> but that didn't affect this issue. Happy to test more tomorrow, good night!</p>",
        "id": 560485589,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764195770
    },
    {
        "content": "<p>8 messages were moved from this topic to <a class=\"stream-topic\" data-stream-id=\"316715\" href=\"/#narrow/channel/316715-contributing/topic/Help.20prepare.20for.20AoC.202025.20-.20Testing.20a.20platform.20from.20URL/with/560521034\">#contributing &gt; Help prepare for AoC 2025 - Testing a platform from URL</a> by <span class=\"user-mention silent\" data-user-id=\"515757\">Luke Boswell</span>.</p>",
        "id": 560521035,
        "sender_full_name": "Notification Bot",
        "timestamp": 1764223332
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"361169\">Anton</span> <a href=\"#narrow/channel/397893-announcements/topic/Help.20prepare.20for.20AoC.202025/near/560453340\">said</a>:</p>\n<blockquote>\n<p>I'll try to take care of this issue tomorrow.</p>\n</blockquote>\n<p>I have not looked into this yet, I'll prioritize it tomorrow.</p>",
        "id": 560661809,
        "sender_full_name": "Anton",
        "timestamp": 1764272004
    },
    {
        "content": "<p>The PlatformNotSupported error on linux should be fixed with <a href=\"https://github.com/roc-lang/roc/pull/8490\">PR#8490</a>. Please give latest main a try again.</p>",
        "id": 560855474,
        "sender_full_name": "Anton",
        "timestamp": 1764364716
    },
    {
        "content": "<p>On linux on latest main, I'm now getting the <code>ProcessKilledBySignal</code> Isaac describes above when running <code>zig build test</code> (which is good!).  I get what I assume is the same segfault when running <code>./zig-out/bin/roc test/fx/app.roc</code> directly. If I use gdb like:</p>\n<div class=\"codehilite\"><pre><span></span><code>gdb ./zig-out/bin/roc\n(gdb) run test/fx/app.roc\n(gdb) backtrace\n</code></pre></div>\n<p>I get <code>No stack.</code>, but I don't know if that's me doing something incorrect or not.</p>",
        "id": 560875546,
        "sender_full_name": "Dan G Knutson",
        "timestamp": 1764384069
    },
    {
        "content": "<p>I'll check it out</p>",
        "id": 560900753,
        "sender_full_name": "Anton",
        "timestamp": 1764409913
    },
    {
        "content": "<p><a href=\"https://github.com/roc-lang/roc/pull/8497\">PR#8497</a> is up to fix this</p>",
        "id": 560913187,
        "sender_full_name": "Anton",
        "timestamp": 1764420939
    },
    {
        "content": "<p>You may need to do <code>git clean -fdx</code> to delete old build artifacts.</p>",
        "id": 560913428,
        "sender_full_name": "Anton",
        "timestamp": 1764421152
    },
    {
        "content": "<p><code>zig build test</code> and <code>./zig-out/bin/roc test/fx/app.roc</code> now works on my ubuntu 24 machine on latest main :)</p>",
        "id": 560918207,
        "sender_full_name": "Anton",
        "timestamp": 1764426016
    },
    {
        "content": "<p>Can confirm on NixOS (x86). Sweet!</p>",
        "id": 560918773,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764426526
    },
    {
        "content": "<p>btw I'm expanding on this tutorial gist - I've now added some stuff on <code>for</code> loops, <code>var</code>, and block expressions: <a href=\"https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4\">https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4</a> (it's still WIP overall, but hoping to have it complete before Dec 1!)</p>",
        "id": 560919025,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764426772
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"524503\">Niclas Ahden</span> <a href=\"#narrow/channel/397893-announcements/topic/Help.20prepare.20for.20AoC.202025/near/560918773\">said</a>:</p>\n<blockquote>\n<p>Can confirm on NixOS (x86). Sweet!</p>\n</blockquote>\n<p>I tried getting the main branch to work on nix, but I don't know if I'm doing things the right way.</p>\n<div class=\"codehilite\" data-code-language=\"Nix\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"ss\">description</span> <span class=\"o\">=</span> <span class=\"s2\">\"A development environment for Roc projects\"</span><span class=\"p\">;</span>\n\n  <span class=\"ss\">inputs</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"c1\"># Define the roc input, pointing to the official GitHub repository</span>\n    roc<span class=\"o\">.</span><span class=\"ss\">url</span> <span class=\"o\">=</span> <span class=\"s2\">\"github:roc-lang/roc\"</span><span class=\"p\">;</span>\n    <span class=\"c1\"># Ensure nixpkgs follows the version used by the Roc repository for compatibility</span>\n    nixpkgs<span class=\"o\">.</span><span class=\"ss\">follows</span> <span class=\"o\">=</span> <span class=\"s2\">\"roc/nixpkgs\"</span><span class=\"p\">;</span>\n  <span class=\"p\">};</span>\n\n  <span class=\"ss\">outputs</span> <span class=\"o\">=</span> <span class=\"p\">{</span> self<span class=\"p\">,</span> nixpkgs<span class=\"p\">,</span> roc <span class=\"p\">}:</span>\n    <span class=\"k\">let</span>\n      <span class=\"c1\"># Define the systems your flake will support</span>\n      <span class=\"ss\">supportedSystems</span> <span class=\"o\">=</span> <span class=\"p\">[</span> <span class=\"s2\">\"x86_64-linux\"</span> <span class=\"s2\">\"aarch64-linux\"</span> <span class=\"s2\">\"x86_64-darwin\"</span> <span class=\"s2\">\"aarch64-darwin\"</span> <span class=\"p\">];</span>\n      <span class=\"c1\"># Helper function to generate outputs for each system</span>\n      <span class=\"ss\">forAllSystems</span> <span class=\"o\">=</span> nixpkgs<span class=\"o\">.</span>lib<span class=\"o\">.</span>genAttrs supportedSystems<span class=\"p\">;</span>\n    <span class=\"k\">in</span>\n    <span class=\"p\">{</span>\n      <span class=\"ss\">devShells</span> <span class=\"o\">=</span> forAllSystems <span class=\"p\">(</span>system<span class=\"p\">:</span>\n        <span class=\"k\">let</span>\n          <span class=\"ss\">pkgs</span> <span class=\"o\">=</span> <span class=\"nb\">import</span> nixpkgs <span class=\"p\">{</span> <span class=\"k\">inherit</span> system<span class=\"p\">;</span> <span class=\"p\">};</span>\n          <span class=\"ss\">rocPkgs</span> <span class=\"o\">=</span> roc<span class=\"o\">.</span>packages<span class=\"o\">.</span><span class=\"si\">${</span>system<span class=\"si\">}</span><span class=\"p\">;</span>\n        <span class=\"k\">in</span>\n        <span class=\"p\">{</span>\n          <span class=\"c1\"># Define the development shell</span>\n          <span class=\"ss\">default</span> <span class=\"o\">=</span> pkgs<span class=\"o\">.</span>mkShell <span class=\"p\">{</span>\n            <span class=\"ss\">buildInputs</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n              rocPkgs<span class=\"o\">.</span>cli <span class=\"c1\"># Add the Roc CLI to the environment</span>\n            <span class=\"p\">];</span>\n\n            <span class=\"c1\"># Optional: Add a shell hook for convenience, e.g., setting an environment variable</span>\n            <span class=\"ss\">shellHook</span> <span class=\"o\">=</span> <span class=\"s s-Multiline\">''</span>\n<span class=\"s s-Multiline\">              export ROC=roc</span>\n<span class=\"s s-Multiline\">              echo \"Roc development environment loaded. Use the 'roc' command to get started.\"</span>\n<span class=\"s s-Multiline\">            ''</span><span class=\"p\">;</span>\n          <span class=\"p\">};</span>\n        <span class=\"p\">});</span>\n    <span class=\"p\">};</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>I get this error when running the <code>main.roc</code> from the gist for AOC:</p>\n<div class=\"codehilite\" data-code-language=\"Ruby\"><pre><span></span><code><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">main!</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"ss\">pf</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">platform</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.1-test/7iDKk44no3gF9Nrh2VyF8Y5yvy1jUBhrbhHURN1WQptB.tar.zst\"</span><span class=\"w\"> </span><span class=\"p\">}</span>\n\n<span class=\"n\">import</span><span class=\"w\"> </span><span class=\"n\">pf</span><span class=\"o\">.</span><span class=\"n\">Stdout</span>\n\n<span class=\"n\">main!</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"n\">_args</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"no\">Stdout</span><span class=\"o\">.</span><span class=\"n\">line!</span><span class=\"p\">(</span><span class=\"s2\">\"Hello, World!\"</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"no\">Ok</span><span class=\"p\">({})</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Gives this when run:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ roc main.roc\n── INVALID EXTENSION SUFFIX in main.roc ────────────────────────────────────────\n\nI tried to download from this URL:\n\n    https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.1-test/7iDKk44no3gF9Nrh2VyF8Y5yvy1jUBhrbhHURN1WQptB.tar.zst\n\nHowever, this file&#39;s extension (.zst) is not a supported extension.\n\nThe supported extensions are .tar, .tar.gz and .tar.br\n\nTip: Check that you have the correct URL for this package/platform.\n</code></pre></div>",
        "id": 561068038,
        "sender_full_name": "Jamie Neubert Pedersen",
        "timestamp": 1764567308
    },
    {
        "content": "<p>I think you may be using the old rust compiler. I'm not sure if we have a flake for the new zig compiler setup</p>",
        "id": 561068113,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764567361
    },
    {
        "content": "<blockquote>\n<p>I'm not sure if we have a flake for the new zig compiler</p>\n</blockquote>\n<p>I'm working on it! <a href=\"https://github.com/roc-lang/roc/pull/8351\">https://github.com/roc-lang/roc/pull/8351</a></p>",
        "id": 561068985,
        "sender_full_name": "Hannes",
        "timestamp": 1764567914
    },
    {
        "content": "<p>When creating a new folder somewhere on my disk for AoC, and adding the <code>app.roc</code> there. And changing the platform path to an absolute one, it seems roc doesn’t find the platform:</p>\n<div class=\"codehilite\"><pre><span></span><code>❯ roc app.roc\nerror: No platform found. Every Roc app requires a platform.\nerror: Failed to set up shared memory with ModuleEnv: error.NoPlatformFound\n</code></pre></div>\n<p>What am I missing?</p>",
        "id": 561097233,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764578907
    },
    {
        "content": "<p>I think this is a security feature</p>",
        "id": 561097356,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764578940
    },
    {
        "content": "<p>I would recommend you use a platform from a URL -- of which there is only one right now</p>",
        "id": 561097445,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764578967
    },
    {
        "content": "<p><a href=\"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases\">https://github.com/lukewilliamboswell/roc-platform-template-zig/releases</a></p>",
        "id": 561097489,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764578977
    },
    {
        "content": "<p>Can you try using the example from here <a href=\"https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4\">https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4</a></p>",
        "id": 561097761,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764579047
    },
    {
        "content": "<p>I’m getting this with the url one:</p>\n<div class=\"codehilite\"><pre><span></span><code>❯ roc app.roc\n-- TYPE MISMATCH ---------------------------------\n\nThis expression is used in an unexpected way:\n  ┌─ app.roc:9:1\n  │\n9 │ main! = || {\n  │ ^^^^^\n\nIt has the type:\n    ({}) =&gt; {  }\n\nBut the type annotation says it should have the type:\n    List(Str) =&gt; Try([Exit(I32)])\n\nFound 1 error(s) and 0 warning(s) for app.roc.\nthread 9141557 panic: reached unreachable code\n???:?:?: 0x102a681cb in ??? (roc_run_1662736024)\n???:?:?: 0x102a7362f in ??? (roc_run_1662736024)\n???:?:?: 0x102a624e3 in ??? (roc_run_1662736024)\n???:?:?: 0x102a6027f in ??? (roc_run_1662736024)\n???:?:?: 0x102a5fce3 in ??? (roc_run_1662736024)\n???:?:?: 0x1029c87eb in ??? (roc_run_1662736024)\n???:?:?: 0x1029c96ef in ??? (roc_run_1662736024)\n???:?:?: 0x18332ab97 in ??? (???)\n???:?:?: 0x0 in ??? (???)\nerror: Child process /Users/piz/Library/Caches/roc/072c932d3be8db1509821ec0a451d264/temp/roc-tmp-INcgCagWvk2ArLrvuFFrTiOIL1N8raew/roc_run_1662736024 killed by signal: 6\nerror: Child process aborted (SIGABRT)\n</code></pre></div>\n<p>Is it because I’m using my roc build from main instead of the roc build from that same release?</p>",
        "id": 561098353,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764579209
    },
    {
        "content": "<p>The platform API is different, it passes args</p>",
        "id": 561098505,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764579254
    },
    {
        "content": "<p>ok I’ll read Richard post more</p>",
        "id": 561098636,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764579292
    },
    {
        "content": "<p>Try this</p>\n<div class=\"codehilite\"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.1-test/7iDKk44no3gF9Nrh2VyF8Y5yvy1jUBhrbhHURN1WQptB.tar.zst&quot; }\n\nimport pf.Stdout\n\nmain! : List(Str) =&gt; Try({}, [Exit(I32)])\nmain! = |_args| {\n    Stdout.line!(&quot;Hello Roc!&quot;)\n\n    Ok({})\n}\n</code></pre></div>",
        "id": 561098822,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764579341
    },
    {
        "content": "<p>Oh, richard's notes around the <code>main!</code> part aren't right -- missing the <code>|_args|</code></p>",
        "id": 561099020,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764579395
    },
    {
        "content": "<p>The first code block is correct. And notes incorrect indeed. Got it working by adding the <code>_args</code> and the <code>Ok({})</code>. Thanks</p>",
        "id": 561099473,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764579520
    },
    {
        "content": "<p>If I don’t add the <code>Ok({})</code>. The behavior is a little weird. It tells me the code doesn’t type check. Yet it runs anyway, print stuff, and crashes at the end.</p>",
        "id": 561099928,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764579626
    },
    {
        "content": "<p>Yep -- we run anyway even if there are type errors at compile time, they become runtime crashes</p>",
        "id": 561100708,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764579832
    },
    {
        "content": "<p>I just made this PR for modulus on integer types, since it might be very useful for AoC day 1. <a href=\"https://github.com/roc-lang/roc/pull/8528\">https://github.com/roc-lang/roc/pull/8528</a></p>",
        "id": 561126559,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764586731
    },
    {
        "content": "<p>Seems <code>from_str</code> will also be needed for numeric types, or at least for integer types to be able to solve day 1. And I think this one might be a bit too complicated to implement for me? I don’t know. Is someone looking into <code>from_str</code> functions already?</p>",
        "id": 561143078,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764591602
    },
    {
        "content": "<blockquote>\n<p>Seems <code>from_str</code> will also be needed for numeric types, or at least for integer types to be able to solve day 1.</p>\n</blockquote>\n<p>Yes that makes sense</p>\n<blockquote>\n<p>I don’t know. Is someone looking into <code>from_str</code> functions already?</p>\n</blockquote>\n<p>Not that I know of</p>\n<blockquote>\n<p>I think this one might be a bit too complicated to implement for me?</p>\n</blockquote>\n<p>Possibly, feel free to give it a try and let us know if/when it starts to get complicated.</p>",
        "id": 561156966,
        "sender_full_name": "Anton",
        "timestamp": 1764595243
    },
    {
        "content": "<p>PR for <code>from_str</code>: <a href=\"https://github.com/roc-lang/roc/pull/8529\">https://github.com/roc-lang/roc/pull/8529</a></p>",
        "id": 561193362,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764602925
    },
    {
        "content": "<p>I almost have a working AoC day1, but now having issues with a use after free ^^. Will try to simplify the example.</p>",
        "id": 561219243,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764608055
    },
    {
        "content": "<p>Hey everyone, i wanted to give roc a try and followed Richards tutorial above. I downloaded the windows nightly build (x86_64-2025-11-30) and added a main.roc file with the provided Hello World sample. I am running into a problem about a missing windows sdk, do i need to install anything else?</p>\n<div class=\"codehilite\"><pre><span></span><code>&gt; .\\roc.exe --version\nRoc compiler version release-fast-77e8bbc1\n\n&gt; .\\roc.exe main.roc\nerror: Failed to link executable: error.WindowsSDKNotFound\n</code></pre></div>\n<p>I am running this on a fairly standard Windows (11 Pro 25H2) installation. Let me know, how i can help debug the issue or if i should open an issue somewhere. I am very excited to give roc a try.</p>",
        "id": 561229793,
        "sender_full_name": "stephdin",
        "timestamp": 1764610233
    },
    {
        "content": "<p>thanks! I wonder if we could reproduce this on CI somehow <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 561243837,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764613073
    },
    {
        "content": "<p>Likely not, github CI will be preconfigured with the right stuff</p>",
        "id": 561247596,
        "sender_full_name": "Anton",
        "timestamp": 1764614179
    },
    {
        "content": "<p>New nightlies already test on windows</p>",
        "id": 561247688,
        "sender_full_name": "Anton",
        "timestamp": 1764614211
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"361169\">Anton</span> <a href=\"#narrow/channel/397893-announcements/topic/Help.20prepare.20for.20AoC.202025/near/561247596\">said</a>:</p>\n<blockquote>\n<p>Likely not, github CI will be preconfigured with the right stuff</p>\n</blockquote>\n<p>We could set up our own server for this but I think once we solve the issues with new windows machines it will stay solved</p>",
        "id": 561249381,
        "sender_full_name": "Anton",
        "timestamp": 1764614740
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"680553\">@stephdin</span> are you using the default powershell terminal?</p>",
        "id": 561266964,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764620621
    },
    {
        "content": "<p>For anyone interested... here is the relevant part of the code for this issue <a href=\"https://github.com/roc-lang/roc/blob/949102f53db7908d214925ae74af333aee1d95fc/src/cli/linker.zig#L264-L267\">https://github.com/roc-lang/roc/blob/949102f53db7908d214925ae74af333aee1d95fc/src/cli/linker.zig#L264-L267</a></p>",
        "id": 561267594,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764620845
    },
    {
        "content": "<p>Yes, i am using Windows Terminal with PowerShell 7.5.4</p>",
        "id": 561269351,
        "sender_full_name": "stephdin",
        "timestamp": 1764621541
    },
    {
        "content": "<p>This kind of issue is hard for us to debug because it requires a fresh Windows install. I think if you have developer tools installed or things already set up it can be hard to reproduce.</p>",
        "id": 561269834,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764621721
    },
    {
        "content": "<p>I think the issue is Windows can't find those libraries by default for some reason, even though I'm pretty sure they are on your system</p>",
        "id": 561269935,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764621763
    },
    {
        "content": "<p>Thank you for your answer, i will investigate why these libraries cannot be found. I have indeed some developer tools installed, maybe they mess with my setup</p>",
        "id": 561270676,
        "sender_full_name": "stephdin",
        "timestamp": 1764622032
    },
    {
        "content": "<p>Can you try running the roc executable from within another shell? if you have Visual Studio for example from within there</p>",
        "id": 561270864,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764622114
    },
    {
        "content": "<p>On macOS (M1), I’m trying to get the current workaround to run using:</p>\n<p><code>zig build roc</code><br>\nfrom the root of the freshly cloned (latest) Roc repository.</p>\n<p>However, I’m getting the following error:<br>\n<code>roc/build.zig.zon:2:14: error: expected string literal\n.name = .roc,\n^~~</code></p>\n<p>Could anyone point out what I’m doing wrong?</p>",
        "id": 561272674,
        "sender_full_name": "Johannes Rubenz",
        "timestamp": 1764622851
    },
    {
        "content": "<p>What version of zig are you using? you need to be on <code>0.15.2</code></p>\n<div class=\"codehilite\"><pre><span></span><code>$ zig version\n0.15.2\n</code></pre></div>",
        "id": 561273273,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764623058
    },
    {
        "content": "<p>ah, I see – I'm currently on 0.11.0 <br>\nthanks a lot, Luke!</p>",
        "id": 561273713,
        "sender_full_name": "Johannes Rubenz",
        "timestamp": 1764623187
    },
    {
        "content": "<p>Is there a function in your platform <span class=\"user-mention\" data-user-id=\"515757\">@Luke Boswell</span> to read from a file? I think that’s my last missing piece</p>",
        "id": 561290538,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764629348
    },
    {
        "content": "<p>Otherwise, I will copy paste the whole input.</p>",
        "id": 561290596,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764629378
    },
    {
        "content": "<p>No effect to read from a file</p>",
        "id": 561290726,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764629442
    },
    {
        "content": "<p>It would be pretty easy to add one if you wanted though</p>",
        "id": 561290749,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764629452
    },
    {
        "content": "<p>I was just planning on keeping the template minimal(ish) to focus on the key parts -- with the timing of everything it was the only platform usable in time for AoC</p>",
        "id": 561290848,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764629501
    },
    {
        "content": "<p>Is importing strings from files implemented?</p>",
        "id": 561291871,
        "sender_full_name": "Dan G Knutson",
        "timestamp": 1764629988
    },
    {
        "content": "<p>I'm not sure -- I don't think so</p>",
        "id": 561292023,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764630058
    },
    {
        "content": "<p>Folks we have a valid Roc solution <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> </p>\n<div class=\"codehilite\"><pre><span></span><code>❯ roc day01.roc\nPart 1 (demo): 3\nPart 1: 1135\nPart 2 (demo): 6\nPart 2: 6558\nerror(gpa): memory address 0x101200040 leaked:\nUnable to print stack trace: Unable to open debug info: MissingDebugInfo\n\nerror(gpa): memory address 0x101260000 leaked:\nUnable to print stack trace: Unable to open debug info: MissingDebugInfo\n</code></pre></div>",
        "id": 561292116,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764630113
    },
    {
        "content": "<p>Still a few issues as you can see ahah. And also quite slow to compute ^^. But it’s correct!</p>",
        "id": 561292193,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764630151
    },
    {
        "content": "<p>yeah the interpreter is not at all optimized for speed right now <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span></p>",
        "id": 561292243,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764630180
    },
    {
        "content": "<p>I'm sure we can make it a lot faster, and we're all set up to JIT if desired</p>",
        "id": 561292291,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764630206
    },
    {
        "content": "<p>Here for those interested in looking at it (spoiler!)</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>AoC day 01 solution in Roc</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Ruby\"><pre><span></span><code><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">main!</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"ss\">pf</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">platform</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.1-test/7iDKk44no3gF9Nrh2VyF8Y5yvy1jUBhrbhHURN1WQptB.tar.zst\"</span><span class=\"w\"> </span><span class=\"p\">}</span>\n\n<span class=\"n\">import</span><span class=\"w\"> </span><span class=\"n\">pf</span><span class=\"o\">.</span><span class=\"n\">Stdout</span>\n<span class=\"n\">import</span><span class=\"w\"> </span><span class=\"n\">pf</span><span class=\"o\">.</span><span class=\"n\">Stderr</span>\n\n<span class=\"n\">demo_input</span><span class=\"w\"> </span><span class=\"o\">=</span>\n<span class=\"w\">    </span><span class=\"p\">\\\\</span><span class=\"no\">L68</span>\n<span class=\"w\">    </span><span class=\"p\">\\\\</span><span class=\"no\">L30</span>\n<span class=\"w\">    </span><span class=\"p\">\\\\</span><span class=\"no\">R48</span>\n<span class=\"w\">    </span><span class=\"p\">\\\\</span><span class=\"no\">L5</span>\n<span class=\"w\">    </span><span class=\"p\">\\\\</span><span class=\"no\">R60</span>\n<span class=\"w\">    </span><span class=\"p\">\\\\</span><span class=\"no\">L55</span>\n<span class=\"w\">    </span><span class=\"p\">\\\\</span><span class=\"no\">L1</span>\n<span class=\"w\">    </span><span class=\"p\">\\\\</span><span class=\"no\">L99</span>\n<span class=\"w\">    </span><span class=\"p\">\\\\</span><span class=\"no\">R14</span>\n<span class=\"w\">    </span><span class=\"p\">\\\\</span><span class=\"no\">L82</span>\n\n<span class=\"n\">day_input</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">demo_input</span><span class=\"w\"> </span><span class=\"c1\"># TODO: copy actual input here</span>\n\n\n<span class=\"nb\">print</span><span class=\"o\">!</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"n\">msg</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">msg</span><span class=\"o\">.</span><span class=\"n\">split_on</span><span class=\"p\">(</span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"no\">Stdout</span><span class=\"o\">.</span><span class=\"n\">line!</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">abs</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"n\">x</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">part1!</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">Str</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"no\">I64</span>\n<span class=\"n\">part1!</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"n\">input</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">var</span><span class=\"w\"> </span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">50</span>\n<span class=\"w\">    </span><span class=\"n\">var</span><span class=\"w\"> </span><span class=\"vg\">$zero_count</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"o\">.</span><span class=\"n\">split_on</span><span class=\"p\">(</span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"n\">motion</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">match</span><span class=\"w\"> </span><span class=\"no\">I64</span><span class=\"o\">.</span><span class=\"n\">from_str</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">.</span><span class=\"n\">drop_prefix</span><span class=\"p\">(</span><span class=\"s2\">\"L\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">drop_prefix</span><span class=\"p\">(</span><span class=\"s2\">\"R\"</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"no\">Ok</span><span class=\"p\">(</span><span class=\"n\">m</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">m</span>\n<span class=\"w\">            </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">        </span><span class=\"p\">}</span>\n<span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"o\">.</span><span class=\"n\">starts_with</span><span class=\"p\">(</span><span class=\"s2\">\"L\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">motion</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">mod_by</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n<span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"o\">.</span><span class=\"n\">starts_with</span><span class=\"p\">(</span><span class=\"s2\">\"R\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">motion</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">mod_by</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n<span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"no\">Stderr</span><span class=\"o\">.</span><span class=\"n\">line!</span><span class=\"p\">(</span><span class=\"s2\">\"Invalid instruction: ${line}\"</span><span class=\"p\">)</span>\n<span class=\"w\">            </span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"vg\">$pos</span>\n<span class=\"w\">        </span><span class=\"p\">}</span>\n<span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"vg\">$zero_count</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"vg\">$zero_count</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">        </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"vg\">$zero_count</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">part2!</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">Str</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"no\">I64</span>\n<span class=\"n\">part2!</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"n\">input</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span>\n\n<span class=\"w\">    </span><span class=\"n\">var</span><span class=\"w\"> </span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">50</span>\n<span class=\"w\">    </span><span class=\"n\">var</span><span class=\"w\"> </span><span class=\"vg\">$zero_count</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"o\">.</span><span class=\"n\">split_on</span><span class=\"p\">(</span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"n\">motion</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">match</span><span class=\"w\"> </span><span class=\"no\">I64</span><span class=\"o\">.</span><span class=\"n\">from_str</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">.</span><span class=\"n\">drop_prefix</span><span class=\"p\">(</span><span class=\"s2\">\"L\"</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">drop_prefix</span><span class=\"p\">(</span><span class=\"s2\">\"R\"</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"no\">Ok</span><span class=\"p\">(</span><span class=\"n\">m</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">m</span>\n<span class=\"w\">            </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">        </span><span class=\"p\">}</span>\n<span class=\"w\">        </span><span class=\"n\">new_pos</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"o\">.</span><span class=\"n\">starts_with</span><span class=\"p\">(</span><span class=\"s2\">\"L\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">motion</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">motion</span><span class=\"w\"> </span><span class=\"p\">}</span>\n<span class=\"w\">        </span><span class=\"n\">old_pos</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"vg\">$pos</span>\n\n<span class=\"w\">        </span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">new_pos</span><span class=\"o\">.</span><span class=\"n\">mod_by</span><span class=\"p\">(</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n<span class=\"w\">        </span><span class=\"n\">turns</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">new_pos</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"vg\">$pos</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"w\"> </span><span class=\"mi\">100</span>\n<span class=\"w\">        </span><span class=\"c1\"># print!(\"old_pos: ${old_pos.to_str()}, new_pos: ${new_pos.to_str()}, pos: ${$pos.to_str()}, turns: ${turns.to_str()}\")</span>\n\n<span class=\"w\">        </span><span class=\"vg\">$zero_count</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"vg\">$zero_count</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">abs</span><span class=\"p\">(</span><span class=\"n\">turns</span><span class=\"p\">)</span>\n<span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">new_pos</span><span class=\"w\"> </span><span class=\"o\">&lt;=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"c1\"># Adjustments depending on starting and ending positions</span>\n<span class=\"w\">            </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">old_pos</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">                </span><span class=\"vg\">$zero_count</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"vg\">$zero_count</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">            </span><span class=\"p\">}</span>\n<span class=\"w\">            </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"vg\">$pos</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">                </span><span class=\"vg\">$zero_count</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"vg\">$zero_count</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">            </span><span class=\"p\">}</span>\n<span class=\"w\">        </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"vg\">$zero_count</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">main!</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"n\">_args</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"nb\">print</span><span class=\"o\">!</span><span class=\"p\">(</span><span class=\"s2\">\"Part 1 (demo): ${part1!(demo_input.trim()).to_str()}\"</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"nb\">print</span><span class=\"o\">!</span><span class=\"p\">(</span><span class=\"s2\">\"Part 1: ${part1!(day_input.trim()).to_str()}\"</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"nb\">print</span><span class=\"o\">!</span><span class=\"p\">(</span><span class=\"s2\">\"Part 2 (demo): ${part2!(demo_input.trim()).to_str()}\"</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"nb\">print</span><span class=\"o\">!</span><span class=\"p\">(</span><span class=\"s2\">\"Part 2: ${part2!(day_input.trim()).to_str()}\"</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"no\">Ok</span><span class=\"p\">({})</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n</div></div>",
        "id": 561292663,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764630410
    },
    {
        "content": "<p>Roc is looking so good, thank you for sharing <span class=\"user-mention\" data-user-id=\"479073\">@Matthieu Pizenberg</span></p>",
        "id": 561292835,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764630516
    },
    {
        "content": "<p>Thanks for working on the language! Excited to see it mature this year!</p>",
        "id": 561293162,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764630718
    },
    {
        "content": "<p>thanks for helping it mature - there's no substitute for battle testing like this to find bugs! <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 561294422,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764631544
    },
    {
        "content": "<p>There are a few things that did not work so I worked around by rewriting another way. I don’t remember all. Here is those that I remember:</p>\n<p>Writing <code>print!</code> like this does not compile with the rest of the program (haven’t checked alone)</p>\n<div class=\"codehilite\"><pre><span></span><code>print! = |msg| msg.split_on(&quot;\\n&quot;).for_each!(Stdout.line!)\n</code></pre></div>\n<p>I would have loved to be able to use <code>?</code> directly in the for loop, but then propagating it in main! would still have needed another wrapper function like <code>run!</code> to unwrap and convert the various tags into the I32 error that the main expects. If possible, would be nice to have the main accept whatever tag in the error.</p>\n<p><code>abs</code> for integers. An easy one missing. Maybe a good first issue?</p>\n<p>I think I hit some issues with the <code>var</code> at some point but I’m not 100% positive on that one. It seems there a few memory issues left. Good luck chasing those!</p>",
        "id": 561294779,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764631801
    },
    {
        "content": "<p>I'll jump on all of these tonight - I'm not really trying to save Advent of Code bugfixes for first contributions; I just want to unblock ASAP <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 561295324,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764632130
    },
    {
        "content": "<p>btw we optimized the type of <code>main!</code> in <code>basic_cli</code> for being able to have <code>?</code> inside <code>main!</code> Just Work - probably too late for Advent of Code to be changing the type signature of <code>main!</code> again, but it's good feedback to know that you independently ran into wanting this!</p>",
        "id": 561295567,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764632280
    },
    {
        "content": "<p>This is the signature for the template platform from your notes <code>main! : List(Str) =&gt; Try({}, [Exit(I32)])</code> I thought that was good for that reason? or are we missing the open union in the tag?</p>",
        "id": 561297301,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764633248
    },
    {
        "content": "<p>I couldn't get an open union working there... but I think I just couldn't remember the syntax we landed on</p>",
        "id": 561297351,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764633274
    },
    {
        "content": "<p>yeah the open union is the key</p>",
        "id": 561297438,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764633332
    },
    {
        "content": "<p>in basic_cli it's something like <code>[Exit(I32), .._others]</code> in the new syntax (I'm not sure if that new syntax actually works though!)</p>",
        "id": 561297485,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764633361
    },
    {
        "content": "<p>If I comment my Ok in the run! function it gives me this error with the syntax for the open union:</p>\n<div class=\"codehilite\"><pre><span></span><code>run! = || {\n    print!(&quot;Part 1 (demo): ${part1!(demo_input.trim())?.to_str()}&quot;)\n    print!(&quot;Part 1: ${part1!(day_input.trim())?.to_str()}&quot;)\n    print!(&quot;Part 2 (demo): ${part2!(demo_input.trim())?.to_str()}&quot;)\n    print!(&quot;Part 2: ${part2!(day_input.trim())?.to_str()}&quot;)\n    #Ok({})\n}\n\nmain! = |_args| {\n    match run!() {\n        Ok(_) =&gt; Ok({})\n        Err(_) =&gt; Err(1)\n    }\n}\n</code></pre></div>\n<p>error:</p>\n<div class=\"codehilite\"><pre><span></span><code>❯ roc day01.roc\n-- TYPE MISMATCH ---------------------------------\n\nThis expression is used in an unexpected way:\n   ┌─ day01.roc:85:5\n   │\n85 │     print!(&quot;Part 2: ${part2!(day_input.trim())?.to_str()}&quot;)\n   │     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nIt has the type:\n    {}\n\nBut I expected it to be:\n    [BadNumStr, Err([BadNumStr])][BadNumStr, BadNumStr]_others\n\nFound 1 error(s) and 0 warning(s) for day01.roc.\nPart 1 (demo): 3\nPart 1: 3\nPart 2 (demo): 6\nPart 2: 6\n\nRoc crashed: non-exhaustive match\n</code></pre></div>",
        "id": 561297512,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764633378
    },
    {
        "content": "<p>we should also really allow <code>[Exit(I32), ..]</code> instead of <code>[Exit(I32), .._others]</code> because the former reads way better <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span></p>",
        "id": 561297524,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764633390
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"479073\">@Matthieu Pizenberg</span> you would need to change the API in the platform/main.roc -- if you're running the zig template locally you could try it out</p>",
        "id": 561297579,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764633426
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"479073\">@Matthieu Pizenberg</span> that's the old syntax, I think that error message is just out of date and printing the wrong thing</p>",
        "id": 561297601,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764633441
    },
    {
        "content": "<p>I thought about having a look. But I think I’ve already spent a bit too much time for now ^^</p>",
        "id": 561297653,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764633478
    },
    {
        "content": "<p><a class=\"message-link\" href=\"/#narrow/channel/397893-announcements/topic/Help.20prepare.20for.20AoC.202025/near/560034404\">#announcements &gt; Help prepare for AoC 2025 @ 💬</a> </p>\n<p>Is this still an actual way to get a new compiler? (build from the source code using Zig 0.15.2)<br>\nI found a message that there is a nightly build, but I did not find it.</p>",
        "id": 562177571,
        "sender_full_name": "Ryzh",
        "timestamp": 1764966385
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281383\">Richard Feldman</span> <a href=\"#narrow/channel/397893-announcements/topic/Help.20prepare.20for.20AoC.202025/near/560919025\">said</a>:</p>\n<blockquote>\n<p>btw I'm expanding on this tutorial gist - I've now added some stuff on <code>for</code> loops, <code>var</code>, and block expressions: <a href=\"https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4\">https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4</a> (it's still WIP overall, but hoping to have it complete before Dec 1!)</p>\n</blockquote>\n<p>This guide is probably what you are looking for. It is still mostly up to date (I think?), only thing you need to do to get it working is to update the platform url to the newest release.</p>",
        "id": 562180389,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764967551
    }
]