[
    {
        "content": "<p>I've been struggling longer than I'd like to admit writing a function to search a starting folder for any nested folders named 'foo'. Specifically, nested Tasks are tripping me up. If anyone's up for writing a quick implementation I'd love to study it</p>",
        "id": 473209442,
        "sender_full_name": "Stuart Hinson",
        "timestamp": 1727470047
    },
    {
        "content": "<p>I’d be happy to write one up when I get home here. I think you should be able to adapt this function which recursively prints a directory tree to do what you’re trying to. Just change the accumulator.</p>\n<p><a href=\"https://github.com/imclerran/roc-openrouter/blob/main/package/Toolkit/FileSystem.roc#L89-L109\">https://github.com/imclerran/roc-openrouter/blob/main/package/Toolkit/FileSystem.roc#L89-L109</a></p>",
        "id": 473212919,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1727471256
    },
    {
        "content": "<p>This should do the trick:</p>\n<div class=\"codehilite\" data-code-language=\"Ruby\"><pre><span></span><code><span class=\"n\">findDirs</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">Str</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"no\">Path</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span><span class=\"w\"> </span><span class=\"no\">Task</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"no\">List</span><span class=\"w\"> </span><span class=\"no\">Path</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">_</span>\n<span class=\"n\">findDirs</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">\\</span><span class=\"n\">query</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">searchPath</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">findDirsHelper</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"no\">Path</span><span class=\"o\">.</span><span class=\"n\">listDir!</span><span class=\"w\"> </span><span class=\"n\">searchPath</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">query</span>\n\n<span class=\"n\">findDirsHelper</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">List</span><span class=\"w\"> </span><span class=\"no\">Path</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"no\">List</span><span class=\"w\"> </span><span class=\"no\">Path</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"no\">Str</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span><span class=\"w\"> </span><span class=\"no\">Task</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"no\">List</span><span class=\"w\"> </span><span class=\"no\">Path</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">_</span>\n<span class=\"n\">findDirsHelper</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">\\</span><span class=\"n\">found</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">dirContents</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">query</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">appendMatch</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">\\</span><span class=\"n\">acc</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span>\n<span class=\"w\">        </span><span class=\"k\">when</span><span class=\"w\"> </span><span class=\"no\">Path</span><span class=\"o\">.</span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"o\">|&gt;</span><span class=\"w\"> </span><span class=\"no\">Str</span><span class=\"o\">.</span><span class=\"n\">splitLast</span><span class=\"w\"> </span><span class=\"s2\">\"/\"</span><span class=\"w\"> </span><span class=\"n\">is</span>\n<span class=\"w\">            </span><span class=\"no\">Ok</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"ss\">after</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">dirname</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">dirname</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"n\">query</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span><span class=\"w\"> </span><span class=\"no\">List</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"w\"> </span><span class=\"n\">acc</span><span class=\"w\"> </span><span class=\"n\">path</span>\n<span class=\"w\">            </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">acc</span>\n\n<span class=\"w\">    </span><span class=\"k\">when</span><span class=\"w\"> </span><span class=\"n\">dirContents</span><span class=\"w\"> </span><span class=\"n\">is</span>\n<span class=\"w\">        </span><span class=\"o\">[</span><span class=\"n\">path</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">..</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">remainder</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span>\n<span class=\"w\">            </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"no\">Path</span><span class=\"o\">.</span><span class=\"n\">isDir!</span><span class=\"w\"> </span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">                </span><span class=\"n\">appendMatch</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"n\">path</span>\n<span class=\"w\">                </span><span class=\"o\">|&gt;</span><span class=\"w\"> </span><span class=\"n\">findDirsHelper!</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"no\">Path</span><span class=\"o\">.</span><span class=\"n\">listDir!</span><span class=\"w\"> </span><span class=\"n\">path</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">query</span>\n<span class=\"w\">                </span><span class=\"o\">|&gt;</span><span class=\"w\"> </span><span class=\"n\">findDirsHelper</span><span class=\"w\"> </span><span class=\"n\">remainder</span><span class=\"w\"> </span><span class=\"n\">query</span>\n<span class=\"w\">            </span><span class=\"k\">else</span>\n<span class=\"w\">                </span><span class=\"n\">findDirsHelper</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"n\">remainder</span><span class=\"w\"> </span><span class=\"n\">query</span>\n\n<span class=\"w\">        </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span><span class=\"w\"> </span><span class=\"no\">Task</span><span class=\"o\">.</span><span class=\"n\">ok</span><span class=\"w\"> </span><span class=\"n\">found</span>\n</code></pre></div>",
        "id": 473219487,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1727474096
    },
    {
        "content": "<p>Thank you! That's very clear and exactly what I needed</p>",
        "id": 473248997,
        "sender_full_name": "Stuart Hinson",
        "timestamp": 1727478325
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"668626\">Stuart Hinson</span> has marked this topic as resolved.</p>",
        "id": 473249003,
        "sender_full_name": "Notification Bot",
        "timestamp": 1727478328
    }
]