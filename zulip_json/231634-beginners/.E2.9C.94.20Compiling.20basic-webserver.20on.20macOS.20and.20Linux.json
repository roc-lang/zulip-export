[
    {
        "content": "<p>I want to compile <code>basic-webserver</code> targeting Ubuntu 24.04.</p>\n<p>If I try it on my Mac (M1), I get:</p>\n<p>roc build examples/hello-web.roc --target=linux-x64 --linker=legacy<br>\nCouldn't find libgcc_s.so.1!<br>\nYou may need to install libgcc</p>\n<p>Couldn't find the libc development files!<br>\nWe need the files crti.o, crtn.o, and Scrt1.o</p>\n<p>On Ubuntu/Debian execute:<br>\n        sudo apt install libc-dev</p>\n<p>On ArchLinux/Manjaro execute:<br>\n        sudo pacman -S glibc</p>\n<p>On Fedora execute:<br>\n        sudo dnf install glibc-devel</p>\n<p>We looked in the following directories:<br>\n/usr/lib/x86_64-linux-gnu<br>\n/lib/x86_64-linux-gnu<br>\n/usr/lib64<br>\n/usr/lib</p>\n<p>If I try it directly on my Ubuntu server, I get:</p>\n<p>roc build basic-webserver/examples/hello-web.roc --linker=legacy<br>\nLegacy linking failed: Failed to find any legacy linking files; I need one of these three paths to exist:<br>\n    basic-webserver/examples/../platform/linux-x64.a<br>\n    basic-webserver/examples/../platform/linux-x64.o<br>\n    basic-webserver/examples/../platform/libhost.a</p>\n<div class=\"codehilite\"><pre><span></span><code>TIP: Maybe try surgical linking with the flag --linker=surgical\n</code></pre></div>\n\n<p>How can I make this work? I’d be grateful for any help! <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>\n<p>My Roc version is <strong>Roc nightly pre-release</strong>, built from commit <code>d73ea109cc2</code> on Tue Sep 9 10:23:53 UTC 2025.</p>",
        "id": 546069798,
        "sender_full_name": "Johannes Rubenz",
        "timestamp": 1760986816
    },
    {
        "content": "<p>Are you using basic-webserver from a URL or using a relative path in your app header? </p>\n<p>Those paths where its looking look to me like its a relative path. If you aren't using a release of the platform you will need to compile the host first. </p>\n<p>I can't remember exactly how we do that, just on my phone and can't look rn.</p>",
        "id": 546076870,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1760988959
    },
    {
        "content": "<p>On the Ubuntu server itself, using the URL fixed the issue — it compiled perfectly.</p>\n<p>On macOS – targeting Linux – the error message is still the same:<br>\nCouldn't find libgcc_s.so.1!<br>\nYou may need to install libgcc</p>\n<p>Couldn't find the libc development files!<br>\nWe need the files crti.o, crtn.o, and Scrt1.o</p>\n<p>On Ubuntu/Debian execute:<br>\n        sudo apt install libc-dev</p>\n<p>On ArchLinux/Manjaro execute:<br>\n        sudo pacman -S glibc</p>\n<p>On Fedora execute:<br>\n        sudo dnf install glibc-devel</p>\n<p>We looked in the following directories:<br>\n/usr/lib/x86_64-linux-gnu<br>\n/lib/x86_64-linux-gnu<br>\n/usr/lib64<br>\n/usr/lib</p>",
        "id": 546078822,
        "sender_full_name": "Johannes Rubenz",
        "timestamp": 1760989610
    },
    {
        "content": "<p>Yeah the way we do linking with the current rust design isn't great... this is an example of why we changed the platform hosts to be more explicit I think so the cross compilation will just work reliably. </p>\n<p>Are you unblocked with this now?</p>",
        "id": 546101293,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1760996650
    },
    {
        "content": "<p>Specially the new zig compiler has a different approach for platform authors which is more explicit and avoids all the sneaky linker headaches.</p>",
        "id": 546101483,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1760996736
    },
    {
        "content": "<p>The platform authors are responsible for providing all of the dependencies like c runtime objects for each platform they support.</p>",
        "id": 546101605,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1760996788
    },
    {
        "content": "<p>Thanks for your help and the background info, Luke — and yes, all unblocked now! <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 546145093,
        "sender_full_name": "Johannes Rubenz",
        "timestamp": 1761023833
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"581711\">Johannes Rubenz</span> has marked this topic as resolved.</p>",
        "id": 546145107,
        "sender_full_name": "Notification Bot",
        "timestamp": 1761023849
    }
]