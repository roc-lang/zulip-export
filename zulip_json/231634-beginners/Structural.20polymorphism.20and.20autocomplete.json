[
    {
        "content": "<p>I'm coming from this video <a href=\"https://youtube.com/watch?v=VnPw9rk8FI8\">https://youtube.com/watch?v=VnPw9rk8FI8</a> where Richard talk about structural polymorphism and compares it to rust/Haskel style \"classification based polymorphism\". From what I understood, you just write Roc functions and the type system figures out the correct set of constraints to put on the arguments of the function. Without knowing the types / interfaces beforehand, how does an LSP figure out the type of something before you write the function? If I ask for a list of methods available on some variable, where do they come from?</p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"VnPw9rk8FI8\" href=\"https://youtube.com/watch?v=VnPw9rk8FI8\"><img src=\"https://uploads.zulipusercontent.net/b305b8fa1331e238847a835f84d039c115660383/68747470733a2f2f692e7974696d672e636f6d2f76692f566e507739726b384649382f6d7164656661756c742e6a7067\"></a></div>",
        "id": 560025240,
        "sender_full_name": "Alex Ott",
        "timestamp": 1764021848
    },
    {
        "content": "<p>ah, so the type checker does know what they all are! So let's say I define a new custom collection type and I give it associated functions of <code>.len()</code> and <code>.concat(other)</code></p>",
        "id": 560029230,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764023380
    },
    {
        "content": "<p>as soon as LSP asks \"what methods are available after this dot?\" the type checker can tell the LSP of the type of the thing before the dot by looking it up in scope, and once you know the type you can just ask directly what methods were explicitly defined on that type</p>",
        "id": 560029441,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764023482
    },
    {
        "content": "<p>so that part of it is no different from, say, defining a method on a class and the LSP looking up the class of the thing in front of the dot</p>",
        "id": 560029546,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764023526
    },
    {
        "content": "<p>now if I'm doing this on a type that's not concrete, then it all depends on what constraints I've specified for it</p>",
        "id": 560029640,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764023569
    },
    {
        "content": "<p>for example if I'm writing a function and I put a type annotation on it that says the function's your is <code>val -&gt; U64 where [val.len : val -&gt; U64, val.reverse : val -&gt; val]</code> then the LSP would autocomplete a dot after its argument to have the two methods of <code>len</code> and <code>reverse</code> because those are the 2 methods I said in the annotation it was required to have</p>",
        "id": 560030121,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764023770
    },
    {
        "content": "<p>So do you make those new custom collection types ad-hoc? or in the function signature themselves?</p>",
        "id": 560031038,
        "sender_full_name": "Alex Ott",
        "timestamp": 1764023798
    },
    {
        "content": "<p>You need to know, before writing the function, that <code>val</code> needs to have the <code>len</code> and <code>reverse</code> methods, right?</p>",
        "id": 560032403,
        "sender_full_name": "Alex Ott",
        "timestamp": 1764023844
    },
    {
        "content": "<p>either in the function signature or if you like you can make a named thing to reuse (like a type alias) if there are common ones you don't want to write over and over</p>",
        "id": 560032409,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764023847
    },
    {
        "content": "<p>no, not necessarily</p>",
        "id": 560032445,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764023862
    },
    {
        "content": "<p>for example if you'd already written <code>arg.len()</code> somewhere else in the function then the type checker would infer the len constraint for you, based on how you used that len method call</p>",
        "id": 560032579,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764023928
    },
    {
        "content": "<p>obviously it can't read your mind, so if you're writing the function completely from scratch it won't infer any constraints <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 560032667,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764023969
    },
    {
        "content": "<p>I guess my underlying question is how do you plan on users of libraries to do \"function / api surface discovery\" I often find myself looking through the autocomplete methods looking for something that I want.</p>",
        "id": 560032810,
        "sender_full_name": "Alex Ott",
        "timestamp": 1764024025
    },
    {
        "content": "<p>I think it will feel exactly like a normal language when it comes to autocomplete haha</p>",
        "id": 560032873,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764024052
    },
    {
        "content": "<p>Ok.</p>",
        "id": 560032920,
        "sender_full_name": "Alex Ott",
        "timestamp": 1764024070
    },
    {
        "content": "<p>Also, a bit off topic from this question, but what other syntax did you explore before landing on the <code>-&gt;</code> operator?</p>",
        "id": 560033197,
        "sender_full_name": "Alex Ott",
        "timestamp": 1764024193
    },
    {
        "content": "<p>Why not just use <code>.</code>?</p>",
        "id": 560034226,
        "sender_full_name": "Alex Ott",
        "timestamp": 1764024584
    },
    {
        "content": "<p><code>.</code> is already used for chaining methods (functions associated with the type), the <code>-&gt;</code> operator is to call a function defined locally</p>",
        "id": 560034687,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764024800
    },
    {
        "content": "<p>we talked about many different operators in zulip -- over various different threads. I feel like we threw around every possible symbol</p>",
        "id": 560034771,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764024847
    },
    {
        "content": "<p>Bringing up the autocomplete example again, do you plan on separating the lists of available functions/methods if I do <code>x.</code> vs <code>x-&gt;</code>? Or will the lists be combined and then the lsp replaces the <code>.</code> with a <code>-&gt;</code> (or vice versa) if I selected a function when I had <code>x.</code></p>",
        "id": 560035208,
        "sender_full_name": "Alex Ott",
        "timestamp": 1764025049
    },
    {
        "content": "<p>I think this is the thread (it's very long) <a class=\"message-link\" href=\"/#narrow/channel/304641-ideas/topic/static.20dispatch.20-.20pass_to.20alternative/near/490730736\">#ideas &gt; static dispatch - pass_to alternative @ ðŸ’¬</a></p>",
        "id": 560035266,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764025075
    },
    {
        "content": "<p>Sorry, I wasn't able to find the threads. I'm new to zulip and searched for \"-&gt;\" but nothing came up</p>",
        "id": 560035330,
        "sender_full_name": "Alex Ott",
        "timestamp": 1764025101
    },
    {
        "content": "<p>I'll look harder!</p>",
        "id": 560035335,
        "sender_full_name": "Alex Ott",
        "timestamp": 1764025104
    },
    {
        "content": "<p>by default I assume we'll start with just <code>.</code> autocomplete and then see if in practice there's demand for <code>-&gt;</code></p>",
        "id": 560035396,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1764025136
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"515757\">Luke Boswell</span> <a href=\"#narrow/channel/231634-beginners/topic/Structural.20polymorphism.20and.20autocomplete/near/560035266\">said</a>:</p>\n<blockquote>\n<p>I think this is the thread (it's very long) <a class=\"message-link\" href=\"/#narrow/channel/304641-ideas/topic/static.20dispatch.20-.20pass_to.20alternative/near/490730736\">#ideas &gt; static dispatch - pass_to alternative @ ðŸ’¬</a></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"1000751\">@Alex Ott</span> can you see this thread?</p>",
        "id": 560035446,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764025161
    },
    {
        "content": "<p>I'm not sure if zulip let's you go back in time to older threads</p>",
        "id": 560035483,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764025181
    },
    {
        "content": "<p>Yes I can</p>",
        "id": 560035986,
        "sender_full_name": "Alex Ott",
        "timestamp": 1764025401
    },
    {
        "content": "<p>Writing just <code>.</code> for accessing local function in addition to associated functions was thrown out pretty quickly, as you could not trust your code anymore. You add a function to your code and it might break your other function that calls a fn that happens to have the same name. I think yes the idea to offer -&gt; completions after a . was thrown around as well.</p>",
        "id": 560773415,
        "sender_full_name": "Norbert Hajagos",
        "timestamp": 1764332536
    },
    {
        "content": "<p>Yeah, I think the goal is just autocomplete. This already happens with C++. If you have autocomplete setup properly in C++, you can type <code>mything.</code> select <code>property</code> (which must be referenced by pointer dereference) and it will output <code>mything-&gt;property</code></p>",
        "id": 560853660,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1764363430
    },
    {
        "content": "<p>The exact same can be done with roc for local functions</p>",
        "id": 560853693,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1764363453
    }
]