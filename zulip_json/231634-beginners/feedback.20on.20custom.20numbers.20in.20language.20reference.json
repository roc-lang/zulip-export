[
    {
        "content": "<p>I wrote up a draft explanation of how custom numbers work in the new compiler: <a href=\"https://gist.github.com/rtfeldman/f4f1ee9b0c8194e2e3d7309059bef7a4\">https://gist.github.com/rtfeldman/f4f1ee9b0c8194e2e3d7309059bef7a4</a></p>\n<p>the idea is for this to end up in the language reference.</p>\n<p>any feedback welcome!</p>",
        "id": 571723814,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1770140248
    },
    {
        "content": "<p>Reads well :)</p>",
        "id": 571732722,
        "sender_full_name": "Anton",
        "timestamp": 1770143009
    },
    {
        "content": "<p>I assume going with Ratio over Fraction was a deliberate choice?</p>",
        "id": 571732766,
        "sender_full_name": "Anton",
        "timestamp": 1770143023
    },
    {
        "content": "<p>In my opinion you can cut \" which would be the requirement if div assumed both arguments had the same type (like they happen to in number types like Ratio and Dec, but not in number types like Duration).\"</p>",
        "id": 571732865,
        "sender_full_name": "Anton",
        "timestamp": 1770143052
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"361169\">Anton</span> <a href=\"#narrow/channel/231634-beginners/topic/feedback.20on.20custom.20numbers.20in.20language.20reference/near/571732766\">said</a>:</p>\n<blockquote>\n<p>I assume going with Ratio over Fraction was a deliberate choice?</p>\n</blockquote>\n<p>yeah that's <a href=\"https://clojure.org/reference/data_structures#_ratio\">what Clojure calls it</a></p>",
        "id": 571737349,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1770144560
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"361169\">Anton</span> <a href=\"#narrow/channel/231634-beginners/topic/feedback.20on.20custom.20numbers.20in.20language.20reference/near/571732865\">said</a>:</p>\n<blockquote>\n<p>In my opinion you can cut \" which would be the requirement if div assumed both arguments had the same type (like they happen to in number types like Ratio and Dec, but not in number types like Duration).\"</p>\n</blockquote>\n<p>fair, although I wanted to call that out because it's how all the builtin number types happen to be shaped, so I wanted to be clear that it's an intentional decision not to be that restrictive</p>",
        "id": 571737640,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1770144656
    },
    {
        "content": "<p>I'm hyped for custom numbers! One of the first things I want to try out is making a 2D Projective Geometric Algebra number type for making really fast and precise physics calculations. I've got this idea that it would be cool if the graphics platform and associated packages for making games just used a nicer mathematical primitive rather than forcing game devs to think in terms of the lower level abstractions like how they efficiently represents vectors.</p>",
        "id": 571740587,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1770145577
    },
    {
        "content": "<p>This idea may not go anywhere... but from the YT rabbit holes I've been down I'm feeling hopeful it will be nicer to work  with.</p>",
        "id": 571740900,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1770145662
    },
    {
        "content": "<p>This looks really neat by the way:</p>\n<div class=\"codehilite\"><pre><span></span><code>duration : Duration\nduration = 5.Min + 30.Sec\n</code></pre></div>\n<p>Maybe that should be higher up as a hook for the reader :p</p>",
        "id": 571741655,
        "sender_full_name": "Anton",
        "timestamp": 1770145883
    },
    {
        "content": "<p>yeah maybe could note some things up top that you can do with it</p>",
        "id": 571746735,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1770147462
    },
    {
        "content": "<p>and then explain how they all work</p>",
        "id": 571746759,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1770147469
    },
    {
        "content": "<p>I love a good TLDR or Exec Summary <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 571753682,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1770149617
    },
    {
        "content": "<p>Very exciting to read! Have you thought about using Tags for telling the negativeness? The is_negative associated functions is very clear, just that looking at this line, I need the line above it to know what the first parameter should be: <code>Numeral.init(False, [], numeral.digits_after_pt())</code>. Maybe <code>init</code> could accept the <code>[NonNegative, Negative]</code> tag union? <br>\nI know my comment's mostly about looks. The semantics are awesome and powerful!</p>",
        "id": 571977270,
        "sender_full_name": "Norbert Hajagos",
        "timestamp": 1770228373
    },
    {
        "content": "<p>I gotta question: can this be used for \"tagging units\" like metric stuff in a physics sim?  I've never found an ergonomic solution; does Roc have something else that already works well?  maybe tagged unions somehow?</p>",
        "id": 572022647,
        "sender_full_name": "Rick Hull",
        "timestamp": 1770244133
    },
    {
        "content": "<p>Yeah the metric stuff is one of the main motivations that led to this design, like <code>12.Meters</code> or <code>43.Psi</code></p>",
        "id": 572022799,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1770244178
    },
    {
        "content": "<p>new question: does octopus mean roughly \"awesome!\" because that's what it means to me</p>",
        "id": 572022904,
        "sender_full_name": "Rick Hull",
        "timestamp": 1770244218
    },
    {
        "content": "<p>what's the 2nd best way to do units (e.g. metric) in roc, using old features?</p>",
        "id": 572023026,
        "sender_full_name": "Rick Hull",
        "timestamp": 1770244272
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"780900\">Rick Hull</span> <a href=\"#narrow/channel/231634-beginners/topic/feedback.20on.20custom.20numbers.20in.20language.20reference/near/572023026\">said</a>:</p>\n<blockquote>\n<p>what's the 2nd best way to do units (e.g. metric) in roc, using old features?</p>\n</blockquote>\n<p>I made a port of elm-units a while ago: <a href=\"https://github.com/Hasnep/roc-units\">roc-units</a></p>",
        "id": 572129147,
        "sender_full_name": "Hannes",
        "timestamp": 1770292878
    },
    {
        "content": "<p>I'm excited to port it to use custom numbers when the new compiler is ready <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 572131927,
        "sender_full_name": "Hannes",
        "timestamp": 1770293680
    },
    {
        "content": "<p>Looks great!  I love this style of implementation, mostly declarative and definitional, and <em>obviously correct</em>, with really nice things falling out of it.  I'm not a license nerd, nor do I want to be, but I'd be tempted to reword \"partly based on\" to \"inspired by\". <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 572216904,
        "sender_full_name": "Rick Hull",
        "timestamp": 1770314513
    },
    {
        "content": "<p>To give some outside perspective on the 5.Sec + 3.Min API: in the latest C# version (14, released last year) this is also possible using extension members, where one can write <code>5d.Sec</code>. Of course, this is evaluated at runtime, so not quite as cool :)<br>\nThere is even a quite popular package which does this: <a href=\"https://github.com/angularsen/UnitsNet?tab=readme-ov-file#extension-packages\">https://github.com/angularsen/UnitsNet?tab=readme-ov-file#extension-packages</a></p>\n<p>To me, it is cool to see how similar ideas for ergonomic APIs emerge in different contexts.</p>",
        "id": 572323849,
        "sender_full_name": "Lukas Juhrich",
        "timestamp": 1770368439
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"780900\">Rick Hull</span> <a href=\"#narrow/channel/231634-beginners/topic/feedback.20on.20custom.20numbers.20in.20language.20reference/near/572216904\">said</a>:</p>\n<blockquote>\n<p>I'm not a license nerd, nor do I want to be, but I'd be tempted to reword \"partly based on\" to \"inspired by\". <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>\n</blockquote>\n<p>I believe the BSD 3 clause licence is one of the most permissive licences, if you make a derivative work then it only requires you to include a copy of the original licence with your derivative and to not imply that the original project endorses your derivative. I included a copy of the original licence and I think the names are different enough to not confuse anyone.</p>\n<p>If thousands of companies are allowed to include BSD licenced code verbatim in their proprietary projects then I think I'll be okay translating a BSD licenced codebase and re-licencing it <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 572520725,
        "sender_full_name": "Hannes",
        "timestamp": 1770463094
    }
]