[
    {
        "content": "<p>Hi, I'm trying the nightly compiler on Linux (Ubuntu) with Luke's basic-cli platform v 0.6, and I'm getting this error:</p>\n<div class=\"codehilite\"><pre><span></span><code>The platform at /home/albx/.cache/roc/packages/2BfGn4M9uWJNhDVeMghGeXNVDFijMfPsmmVeo6M4QjKX/main.roc\ndoes not support the x64glibc target for exe builds.\n\nSupported targets for exe:\n  - x64mac\n  - arm64mac\n  - x64musl\n  - arm64musl\n  - x64win\n  - arm64win\n</code></pre></div>\n<p>however, I do have musl and musl-dev installed, so I would expect to be able to compile and run musl-based binaries anyway. Or have I completely misunderstood the way glibc and musl coexist?</p>\n<p>thanks!</p>",
        "id": 565986721,
        "sender_full_name": "albx",
        "timestamp": 1767283288
    },
    {
        "content": "<p>Hi @albx,<br>\nCan you share your compiler version?</p>",
        "id": 565987436,
        "sender_full_name": "Anton",
        "timestamp": 1767284322
    },
    {
        "content": "<p><code>roc yourfile.roc --no-cache</code> may permanently fix the issue.</p>",
        "id": 565987596,
        "sender_full_name": "Anton",
        "timestamp": 1767284564
    },
    {
        "content": "<p>Yeah. I think that platform only every made a static musl release</p>",
        "id": 565990371,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1767288330
    },
    {
        "content": "<p>Avoids dependencies</p>",
        "id": 565990378,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1767288337
    },
    {
        "content": "<p>That said, it should be the default on Linux and just work</p>",
        "id": 565990389,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1767288353
    },
    {
        "content": "<p>Did you explicitly request glibc?</p>",
        "id": 565990402,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1767288372
    },
    {
        "content": "<p>I'm using <code>roc_nightly-linux_x86_64-2026-01-01-21f3731</code>, and I've tried compiling with</p>\n<div class=\"codehilite\"><pre><span></span><code>roc --target=x64musl main.roc --no-cache\n</code></pre></div>\n<p>(plus all combinations with and w/o --target and --no-cache). Somehow I'm always getting the <code>does not support the x64glibc target for exe builds</code> error.</p>",
        "id": 566031350,
        "sender_full_name": "albx",
        "timestamp": 1767341906
    },
    {
        "content": "<p>I can try to reproduce, can you share your main.roc file <span class=\"user-mention\" data-user-id=\"877623\">@albx</span>?</p>",
        "id": 566313080,
        "sender_full_name": "Anton",
        "timestamp": 1767606918
    },
    {
        "content": "<p>Hi Anton, I've put it here: <a href=\"https://github.com/albx79/roc-tutorial\">https://github.com/albx79/roc-tutorial</a></p>\n<p>but it's just a main with a couple of <code>Stdout.line!</code>, nothing fancy. Perhaps the real test is trying to compile it under Ubuntu 24.04.3</p>",
        "id": 566504733,
        "sender_full_name": "albx",
        "timestamp": 1767690907
    },
    {
        "content": "<p>We do test in CI with Ubuntu 24 but I will check it out soon.</p>",
        "id": 566513196,
        "sender_full_name": "Anton",
        "timestamp": 1767694102
    },
    {
        "content": "<p>I was able to reproduce the issue</p>",
        "id": 566534800,
        "sender_full_name": "Anton",
        "timestamp": 1767702547
    },
    {
        "content": "<p>Building roc from source did work for me, so in the roc repo:</p>\n<div class=\"codehilite\"><pre><span></span><code>git clean -fdx\nzig build roc\n./zig-out/bin/roc main.roc\n</code></pre></div>",
        "id": 566535475,
        "sender_full_name": "Anton",
        "timestamp": 1767702849
    },
    {
        "content": "<p>You will also need to add Ok({}) after your last Stdout when using Luke's zig template platform.</p>",
        "id": 566535666,
        "sender_full_name": "Anton",
        "timestamp": 1767702925
    },
    {
        "content": "<p>yes I can confirm that it works if I compile zig from sources! thanks!</p>",
        "id": 566540171,
        "sender_full_name": "albx",
        "timestamp": 1767704821
    },
    {
        "content": "<p>I found the issue with the nightly too, it should be fixed with tomorrow's nightly</p>",
        "id": 566540834,
        "sender_full_name": "Anton",
        "timestamp": 1767705086
    }
]