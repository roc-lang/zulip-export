[
    {
        "content": "<p>I am trying to do some work with phantom types and am struggling to really understand how to think. Given I have something like:</p>\n<div class=\"codehilite\"><pre><span></span><code>Session state := [Session {stream: Str}]\nOffline :  [Offline]\nOnline : [Online]\nnew_session : Username, Password -&gt; Session Offline\nnew_session = |_, _| Session({stream: &quot;test&quot;})\nconnect!: Session Offline =&gt; Session Online\n</code></pre></div>\n<p>Now new_session will not type check, I need to also include the Offline but there is no way to do this. I must be missing some fundamental mental model about this. How would you impl new_session and connect! here to make it type check?</p>",
        "id": 505640841,
        "sender_full_name": "Henrik Larsson",
        "timestamp": 1741949074
    },
    {
        "content": "<p>This works :)</p>\n<div class=\"codehilite\" data-code-language=\"Elm\"><pre><span></span><code><span class=\"kt\">Session</span><span class=\"w\"> </span><span class=\"nv\">line</span><span class=\"w\"> </span><span class=\"nf\">:=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nv\">stream</span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"kt\">Str</span><span class=\"p\">}</span>\n\n<span class=\"kt\">Offline</span><span class=\"w\"> </span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"kt\">Offline</span><span class=\"p\">]</span>\n<span class=\"kt\">Online</span><span class=\"w\"> </span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"kt\">Online</span><span class=\"p\">]</span>\n\n<span class=\"nv\">new_session</span><span class=\"w\"> </span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"kt\">Username</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kt\">Password</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Session</span><span class=\"w\"> </span><span class=\"kt\">Offline</span>\n<span class=\"nv\">new_session</span><span class=\"w\"> </span><span class=\"nf\">=</span><span class=\"w\"> </span><span class=\"nf\">|</span><span class=\"nv\">_</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nv\">_</span><span class=\"nf\">|</span><span class=\"w\"> </span><span class=\"err\">@</span><span class=\"kt\">Session</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nv\">stream</span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"s\">\"test\"</span><span class=\"p\">}</span>\n\n<span class=\"nv\">connect</span><span class=\"err\">!</span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"kt\">Session</span><span class=\"w\"> </span><span class=\"kt\">Offline</span><span class=\"w\"> </span><span class=\"nf\">=&gt;</span><span class=\"w\"> </span><span class=\"kt\">Session</span><span class=\"w\"> </span><span class=\"kt\">Online</span>\n\n<span class=\"kt\">Username</span><span class=\"w\"> </span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"kt\">Str</span>\n<span class=\"kt\">Password</span><span class=\"w\"> </span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"kt\">Str</span>\n</code></pre></div>",
        "id": 505670131,
        "sender_full_name": "Anton",
        "timestamp": 1741957596
    }
]