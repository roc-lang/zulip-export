[
    {
        "content": "<p>A few weeks ago this code would build successfully with the zig compiler. However I just build the latest main, and now I get an error message when building the following code. Not sure if My type annotation is incorrect, or if this is a compiler bug, so posting it up here.</p>",
        "id": 568012875,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1768404109
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"CoffeeScript\"><pre><span></span><code><span class=\"nv\">keep_oks</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"nx\">List</span><span class=\"p\">(</span><span class=\"nx\">a</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">a</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span><span class=\"w\"> </span><span class=\"nx\">Try</span><span class=\"p\">(</span><span class=\"nx\">b</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">e</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span><span class=\"w\"> </span><span class=\"nx\">List</span><span class=\"p\">(</span><span class=\"nx\">b</span><span class=\"p\">)</span>\n<span class=\"nv\">keep_oks</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"nx\">vs</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">f</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"nx\">vs</span><span class=\"p\">.</span><span class=\"nx\">fold</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"p\">[],</span>\n<span class=\"w\">        </span><span class=\"o\">|</span><span class=\"nx\">acc</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">v</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"nx\">match</span><span class=\"w\"> </span><span class=\"nx\">f</span><span class=\"p\">(</span><span class=\"nx\">v</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">                </span><span class=\"nx\">Ok</span><span class=\"nf\">(u) =&gt;</span><span class=\"w\"> </span><span class=\"nx\">acc</span><span class=\"p\">.</span><span class=\"nx\">append</span><span class=\"p\">(</span><span class=\"nx\">u</span><span class=\"p\">)</span>\n<span class=\"w\">                </span><span class=\"nx\">Err</span><span class=\"nf\">(_) =&gt;</span><span class=\"w\"> </span><span class=\"nx\">acc</span>\n<span class=\"w\">            </span><span class=\"p\">}</span>\n<span class=\"w\">        </span><span class=\"p\">},</span>\n<span class=\"w\">    </span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Produces the following error:</p>\n<div class=\"codehilite\"><pre><span></span><code>The first argument being passed to this function has the wrong type:\n   ┌─ main.roc:29:2\n   │\n29 │    s.split_on(&quot;\\n&quot;)\n30 │    .map(extract_digits)\n\nThis argument has the type:\n\n    List(List(U64))\n\nBut keep_oks needs the first argument to be:\n\n    List(a)\n\nFound 1 error(s) and 0 warning(s) for main.roc.\n</code></pre></div>",
        "id": 568012896,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1768404117
    },
    {
        "content": "<p>However, if I comment out the type annotation for keep_oks, it builds just fine.</p>",
        "id": 568013034,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1768404153
    },
    {
        "content": "<p>Full code here: <a href=\"https://pastebin.com/Qn4xnhUY\">https://pastebin.com/Qn4xnhUY</a></p>",
        "id": 568013524,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1768404283
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"518883\">@Ian McLerran</span> would you mind opening a GH issue for this?</p>",
        "id": 568015934,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1768404906
    },
    {
        "content": "<p>Sure thing!</p>",
        "id": 568016408,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1768405006
    },
    {
        "content": "<p>Issue at <a href=\"https://github.com/roc-lang/roc/issues/9018\">#9018</a></p>",
        "id": 568027934,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1768407915
    }
]