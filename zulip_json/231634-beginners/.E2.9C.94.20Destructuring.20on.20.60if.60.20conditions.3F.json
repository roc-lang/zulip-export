[
    {
        "content": "<p>Is it possible to de-structure tagged values on if conditions, like in pattern matching? Something like:</p>\n<div class=\"codehilite\" data-code-language=\"Elm\"><pre><span></span><code><span class=\"kr\">if</span><span class=\"w\"> </span><span class=\"nv\">foo</span><span class=\"w\"> </span><span class=\"nf\">==</span><span class=\"w\"> </span><span class=\"kt\">Ok</span><span class=\"w\"> </span><span class=\"nv\">x</span><span class=\"w\"> </span><span class=\"kr\">then</span>\n<span class=\"w\">    </span><span class=\"nv\">dbg</span><span class=\"w\"> </span><span class=\"nv\">x</span>\n<span class=\"kr\">else</span><span class=\"w\"> </span><span class=\"kr\">if</span><span class=\"w\"> </span><span class=\"nv\">foo</span><span class=\"w\"> </span><span class=\"nf\">==</span><span class=\"w\"> </span><span class=\"kt\">Err</span><span class=\"w\"> </span><span class=\"nv\">y</span><span class=\"w\"> </span><span class=\"kr\">then</span>\n<span class=\"w\">    </span><span class=\"nv\">dbg</span><span class=\"w\"> </span><span class=\"nv\">y</span>\n</code></pre></div>",
        "id": 406354044,
        "sender_full_name": "Ian Liu Rodrigues",
        "timestamp": 1701884118
    },
    {
        "content": "<p>If I understand correctly, no. To do pattern matching, you'd have to use a <code>when ... is</code> expression</p>",
        "id": 406355772,
        "sender_full_name": "Sven van Caem",
        "timestamp": 1701884823
    },
    {
        "content": "<p>I was thinking about the following use case of nested when blocks, which could be flattened if the <code>if</code> expression could also destructure:</p>\n<div class=\"codehilite\" data-code-language=\"Elm\"><pre><span></span><code><span class=\"nv\">when</span><span class=\"w\"> </span><span class=\"nv\">cond1</span><span class=\"w\"> </span><span class=\"nv\">is</span>\n<span class=\"w\">    </span><span class=\"kt\">Foo</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">Ok</span><span class=\"w\"> </span><span class=\"nv\">a</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span><span class=\"w\"> </span><span class=\"nf\">...</span>\n<span class=\"w\">    </span><span class=\"kt\">Foo</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">Err</span><span class=\"w\"> </span><span class=\"nv\">_</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span><span class=\"w\"> </span><span class=\"nf\">...</span>\n<span class=\"w\">    </span><span class=\"nv\">x</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span><span class=\"w\"> </span><span class=\"nv\">when</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">x</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nv\">cond2</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nv\">is</span>\n<span class=\"w\">        </span><span class=\"p\">(</span><span class=\"kt\">Bar</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kt\">Baz</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span><span class=\"w\"> </span><span class=\"nf\">...</span>\n<span class=\"w\">        </span><span class=\"nv\">_</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span><span class=\"w\"> </span><span class=\"nf\">...</span>\n</code></pre></div>\n<p>Flattened if's</p>\n<div class=\"codehilite\" data-code-language=\"Elm\"><pre><span></span><code><span class=\"kr\">if</span><span class=\"w\"> </span><span class=\"nv\">cond1</span><span class=\"w\"> </span><span class=\"nf\">==</span><span class=\"w\"> </span><span class=\"kt\">Foo</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">Ok</span><span class=\"w\"> </span><span class=\"nv\">a</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"kr\">then</span>\n<span class=\"w\">    </span><span class=\"nf\">...</span>\n<span class=\"kr\">else</span><span class=\"w\"> </span><span class=\"kr\">if</span><span class=\"w\"> </span><span class=\"nv\">cond1</span><span class=\"w\"> </span><span class=\"nf\">==</span><span class=\"w\"> </span><span class=\"kt\">Foo</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">Err</span><span class=\"w\"> </span><span class=\"nv\">_</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"kr\">then</span>\n<span class=\"w\">    </span><span class=\"nf\">...</span>\n<span class=\"kr\">else</span><span class=\"w\"> </span><span class=\"kr\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">cond1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nv\">cond2</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nf\">==</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">Bar</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kt\">Baz</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"kr\">then</span>\n<span class=\"w\">    </span><span class=\"nf\">...</span>\n<span class=\"kr\">else</span>\n<span class=\"w\">    </span><span class=\"nf\">...</span>\n</code></pre></div>",
        "id": 406357732,
        "sender_full_name": "Ian Liu Rodrigues",
        "timestamp": 1701885532
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"671495\">Ian Liu Rodrigues</span> has marked this topic as resolved.</p>",
        "id": 406359653,
        "sender_full_name": "Notification Bot",
        "timestamp": 1701886214
    },
    {
        "content": "<p>if flattening is what you're looking for, maybe pattern matching on (cond1, cond2) fits your use case?</p>",
        "id": 406361072,
        "sender_full_name": "Sven van Caem",
        "timestamp": 1701886776
    },
    {
        "content": "<p>Yeah exactly, like this:</p>\n<div class=\"codehilite\" data-code-language=\"Elm\"><pre><span></span><code><span class=\"nv\">when</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">cond1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nv\">cond2</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nv\">is</span>\n<span class=\"w\">   </span><span class=\"p\">(</span><span class=\"kt\">Foo</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">Ok</span><span class=\"w\"> </span><span class=\"nv\">a</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"nv\">_</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span><span class=\"w\"> </span><span class=\"nf\">...</span>\n<span class=\"w\">   </span><span class=\"p\">(</span><span class=\"kt\">Foo</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">Err</span><span class=\"w\"> </span><span class=\"nv\">_</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"nv\">_</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span><span class=\"w\"> </span><span class=\"nf\">...</span>\n<span class=\"w\">   </span><span class=\"p\">(</span><span class=\"kt\">Bar</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kt\">Baz</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span><span class=\"w\"> </span><span class=\"nf\">...</span>\n</code></pre></div>",
        "id": 406394224,
        "sender_full_name": "Brian Carroll",
        "timestamp": 1701899185
    }
]