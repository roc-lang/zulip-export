[
    {
        "content": "<p>I try to decode <code>Str.toUtf8 \"null\"</code> using json. But I don't know in which roc type I can put the decoded value. I though, I could use <code>{}</code> since this means kind of nothing in roc. But it does not seem to fit:</p>\n<div class=\"codehilite\" data-code-language=\"CoffeeScript\"><pre><span></span><code><span class=\"c1\"># This fails</span>\n<span class=\"nx\">expect</span>\n<span class=\"w\">    </span><span class=\"kc\">null</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">Str</span><span class=\"p\">.</span><span class=\"nx\">toUtf8</span><span class=\"w\"> </span><span class=\"s\">\"null\"</span>\n<span class=\"w\">    </span><span class=\"nv\">decoded</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">fromBytesPartial</span><span class=\"w\"> </span><span class=\"kc\">null</span><span class=\"w\"> </span><span class=\"nx\">json</span>\n<span class=\"w\">    </span><span class=\"nx\">decoded</span><span class=\"p\">.</span><span class=\"nx\">result</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"nx\">Ok</span><span class=\"w\"> </span><span class=\"p\">{}</span>\n</code></pre></div>\n<p>I don't have to use json <code>null</code>. I could use another json value to represent \"nothing\".  It seems that the roc value <code>{}</code> will be decoded to the json value <code>{}</code></p>\n<div class=\"codehilite\" data-code-language=\"CoffeeScript\"><pre><span></span><code><span class=\"c1\"># This passes</span>\n<span class=\"nx\">expect</span>\n<span class=\"w\">    </span><span class=\"nv\">v</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{}</span>\n<span class=\"w\">    </span><span class=\"nv\">got</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">toBytes</span><span class=\"w\"> </span><span class=\"nx\">v</span><span class=\"w\"> </span><span class=\"nx\">json</span>\n<span class=\"w\">    </span><span class=\"nv\">expectV</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">Str</span><span class=\"p\">.</span><span class=\"nx\">toUtf8</span><span class=\"w\"> </span><span class=\"s\">\"{}\"</span>\n<span class=\"w\">    </span><span class=\"nx\">got</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"nx\">expectV</span>\n</code></pre></div>\n<p>But if I decode it again, it fails:</p>\n<div class=\"codehilite\" data-code-language=\"CoffeeScript\"><pre><span></span><code><span class=\"c1\"># This fails</span>\n<span class=\"nx\">expect</span>\n<span class=\"w\">    </span><span class=\"kc\">null</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">Str</span><span class=\"p\">.</span><span class=\"nx\">toUtf8</span><span class=\"w\"> </span><span class=\"s\">\"{}\"</span>\n<span class=\"w\">    </span><span class=\"nv\">decoded</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">fromBytesPartial</span><span class=\"w\"> </span><span class=\"kc\">null</span><span class=\"w\"> </span><span class=\"nx\">json</span>\n<span class=\"w\">    </span><span class=\"nx\">decoded</span><span class=\"p\">.</span><span class=\"nx\">result</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"nx\">Ok</span><span class=\"w\"> </span><span class=\"p\">{}</span>\n</code></pre></div>\n<p>I use this json-lib: \"<a href=\"https://github.com/lukewilliamboswell/roc-json/releases/download/0.1.0/xbO9bXdHi7E9ja6upN5EJXpDoYm7lwmJ8VzL7a5zhYE.tar.br\">https://github.com/lukewilliamboswell/roc-json/releases/download/0.1.0/xbO9bXdHi7E9ja6upN5EJXpDoYm7lwmJ8VzL7a5zhYE.tar.br</a>\"</p>\n<p>Is this a bug or am I doing something wrong?</p>",
        "id": 374078701,
        "sender_full_name": "Oskar Hahn",
        "timestamp": 1689021315
    },
    {
        "content": "<p>I think for now that package just decodes a json null into a Roc Str, and there is no way to encode a null from Roc atm. Open to any suggestions or PRs to change it, I just did the first thing to get it working as a first pass.</p>",
        "id": 374088377,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1689024845
    },
    {
        "content": "<p>how about <code>[Null, NonNull a]</code>?</p>",
        "id": 374092252,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1689026319
    },
    {
        "content": "<p>7 messages were moved from this topic to <a class=\"stream-topic\" data-stream-id=\"387892\" href=\"/#narrow/stream/387892-introductions/topic/introductions\">#introductions &gt; introductions</a> by <span class=\"user-mention silent\" data-user-id=\"361169\">Anton</span>.</p>",
        "id": 374190107,
        "sender_full_name": "Notification Bot",
        "timestamp": 1689066946
    }
]