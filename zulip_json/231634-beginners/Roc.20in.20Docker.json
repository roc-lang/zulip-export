[
    {
        "content": "<p>Hey, I'm brand new here, and I typically work on my Windows machine. I don't usually use the unix subsystem, as I usually just build docker images for these kinds of things. I have been trying to get Roc working in a docker image, but I seem to be unable to do so.</p>\n<p>I have a Dockerfile like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>FROM ubuntu\nWORKDIR /root\n\n# download dependencies\nRUN apt-get update &amp;&amp; apt-get install -y wget curl libasound2 libxcb-xinput0 libx11-6 libxcursor1 libxrandr2 libxi6 libx11-xcb1\n\n# install roc\nCOPY roc.tar.gz roc.tar.gz\nRUN mkdir roc &amp;&amp; tar -xf roc.tar.gz -C roc\n\n# install rust\nRUN curl --proto &#39;=https&#39; --tlsv1.2 -sSf --output rustup https://sh.rustup.rs &amp;&amp; sh rustup -y\n\n# cleanup\nRUN rm -rf roc.tar.gz rustup\n</code></pre></div>\n<p>and I'll build/run it with </p>\n<div class=\"codehilite\"><pre><span></span><code>docker build -t roc .\ndocker run -it roc\n</code></pre></div>\n<p>I can open the repl, but when I type any expression, such as <code>\"Hello, World!\"</code> from the tutorial, I get the following error:</p>\n<div class=\"codehilite\"><pre><span></span><code>root@a54d527d66f8:~/roc# RUST_BACKTRACE=full ./roc repl\n\n  The rockin’ roc repl\n────────────────────────\n\nEnter an expression, or :help, or :exit/:q.\n\n» &quot;Hello, World!&quot;\nthread &#39;main&#39; panicked at &#39;called `Result::unwrap()` on an `Err` value: Os { code: 2, kind: NotFound, message: &quot;No such file or directory&quot; }&#39;, compiler/build/src/link.rs:1001:6\nstack backtrace:\n   0:     0x55a1f5307abc - std::backtrace_rs::backtrace::libunwind::trace::hf6a6dfd7da937cb0\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/../../backtrace/src/backtrace/libunwind.rs:90:5\n   1:     0x55a1f5307abc - std::backtrace_rs::backtrace::trace_unsynchronized::hc596a19e4891f7f3\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\n   2:     0x55a1f5307abc - std::sys_common::backtrace::_print_fmt::hb16700db31584325\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/sys_common/backtrace.rs:67:5\n   3:     0x55a1f5307abc - &lt;std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display&gt;::fmt::h231c4190cfa75162\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/sys_common/backtrace.rs:46:22\n   4:     0x55a1f494520c - core::fmt::write::h2a1462b5f8eea807\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/core/src/fmt/mod.rs:1163:17\n   5:     0x55a1f53033c5 - std::io::Write::write_fmt::h71ddfebc68685972\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/io/mod.rs:1696:15\n   6:     0x55a1f5309340 - std::sys_common::backtrace::_print::hcc197d4bebf2b369\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/sys_common/backtrace.rs:49:5\n   7:     0x55a1f5309340 - std::sys_common::backtrace::print::h335a66af06738c7c\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/sys_common/backtrace.rs:36:9\n   8:     0x55a1f5309340 - std::panicking::default_hook::{{closure}}::h6fac9ac9c8b79e52\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/panicking.rs:210:50\n   9:     0x55a1f5309c23 - std::panicking::default_hook::h341c1030c6a1161b\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/panicking.rs:227:9\n  10:     0x55a1f5309c23 - std::panicking::rust_panic_with_hook::h50680ff4b44510c6\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/panicking.rs:624:17\n  11:     0x55a1f530948a - std::panicking::begin_panic_handler::{{closure}}::h9371c0fbb1e8465a\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/panicking.rs:521:13\n  12:     0x55a1f53081c4 - std::sys_common::backtrace::__rust_end_short_backtrace::h9b3efa22a5768c0f\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/sys_common/backtrace.rs:139:18\n  13:     0x55a1f530940d - rust_begin_unwind\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/panicking.rs:517:5\n  14:     0x55a1f47aad51 - core::panicking::panic_fmt::h23b9203e89cc61cf\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/core/src/panicking.rs:100:14\n  15:     0x55a1f47aae43 - core::result::unwrap_failed::h32ef6b3156e8fc57\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/core/src/result.rs:1616:5\n  16:     0x55a1f4bccd0e - roc_build::link::module_to_dylib::h7f6dd50547d352ac\n  17:     0x55a1f5120049 - roc_repl_cli::eval_and_format::h3824981905110238\n  18:     0x55a1f5123f33 - roc_repl_cli::main::hbb6bb9cb1eb62d8c\n  19:     0x55a1f4b34ae3 - roc::main::h7bc17e2a57cc1a87\n  20:     0x55a1f4b32523 - std::sys_common::backtrace::__rust_begin_short_backtrace::h2e85261f9ed1f08d\n  21:     0x55a1f4b3253f - std::rt::lang_start::{{closure}}::h6cfbd391927023bd\n  22:     0x55a1f530776b - core::ops::function::impls::&lt;impl core::ops::function::FnOnce&lt;A&gt; for &amp;F&gt;::call_once::hc56adab7a77ec6e3\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/core/src/ops/function.rs:259:13\n  23:     0x55a1f530776b - std::panicking::try::do_call::h29f013120c5abc65\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/panicking.rs:403:40\n  24:     0x55a1f530776b - std::panicking::try::h86d5b2b66caec4cf\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/panicking.rs:367:19\n  25:     0x55a1f530776b - std::panic::catch_unwind::h7dd136d787f51397\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/panic.rs:133:14\n  26:     0x55a1f530776b - std::rt::lang_start_internal::{{closure}}::h4a199351e630a8a5\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/rt.rs:128:48\n  27:     0x55a1f530776b - std::panicking::try::do_call::h20ceb9e5dff838c6\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/panicking.rs:403:40\n  28:     0x55a1f530776b - std::panicking::try::hc2abb46a5e41bd43\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/panicking.rs:367:19\n  29:     0x55a1f530776b - std::panic::catch_unwind::h52c3eb4408ad6dfb\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/panic.rs:133:14\n  30:     0x55a1f530776b - std::rt::lang_start_internal::hd15a47be08101c28\n                               at /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c/library/std/src/rt.rs:128:20\n  31:     0x55a1f4b36d82 - main\n  32:     0x7fcbeb95a0b3 - __libc_start_main\n  33:     0x55a1f48a761a - _start\n  34:                0x0 - &lt;unknown&gt;\n</code></pre></div>\n<p>Any ideas? I'm assuming I'm missing some dependencies, since I'm starting with a docker image, but it's not clear which ones.</p>",
        "id": 273067619,
        "sender_full_name": "Tyler Brockmeyer",
        "timestamp": 1645696402
    },
    {
        "content": "<p>You are missing zig, I don't know what else.</p>",
        "id": 273100100,
        "sender_full_name": "Tim Whiting",
        "timestamp": 1645714817
    },
    {
        "content": "<p>once the compiler is built you should not need zig</p>",
        "id": 273100805,
        "sender_full_name": "Folkert de Vries",
        "timestamp": 1645715135
    },
    {
        "content": "<p>well, just for platforms written in zig, but not for the repl at least</p>",
        "id": 273100834,
        "sender_full_name": "Folkert de Vries",
        "timestamp": 1645715153
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"481347\">@Tyler Brockmeyer</span>, can you check if ld is installed, by executing <code>ld --version</code>?</p>",
        "id": 273199443,
        "sender_full_name": "Anton",
        "timestamp": 1645776952
    },
    {
        "content": "<p>As the Roc project is working correctly using Nix, I would maybe suggest using this Nix Docker image, and then let Nix install the dependencies instead of converting everything to Dockerfile steps</p>\n<p><a href=\"https://hub.docker.com/r/nixos/nix\">https://hub.docker.com/r/nixos/nix</a></p>",
        "id": 273465658,
        "sender_full_name": "Loric Brevet",
        "timestamp": 1646041675
    }
]