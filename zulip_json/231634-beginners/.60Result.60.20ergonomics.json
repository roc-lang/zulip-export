[
    {
        "content": "<p>Hi! I'm wondering if there's a better way to write code like this:</p>\n<div class=\"codehilite\" data-code-language=\"roc\"><pre><span></span><code>my_func : Result Whatever ErrType\nmy_func =\n     val = (func_returning_a_different_result_type\n        |&gt; Result.map_err |_| ErrType)?\n</code></pre></div>\n<p>In other words, I want to avoid deeply nesting my code just for the sake of error handling, so I'm using the postfix '?' operator. The function I'm calling, however, returns a Result with a different error type than the function I'm calling it from, so I have to map that error if I don't want the error type of my function to be transparent like that.</p>\n<p>It just feels a bit clunky / verbose to me.</p>",
        "id": 567055070,
        "sender_full_name": "947R3K",
        "timestamp": 1767919069
    },
    {
        "content": "<p>Is this specifically asking for the old compiler and syntax, or the new compiler?</p>\n<p>In the old compiler I think you can do:</p>\n<div class=\"codehilite\" data-code-language=\"Ruby\"><pre><span></span><code><span class=\"n\">my_func</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">Result</span><span class=\"w\"> </span><span class=\"no\">Whatever</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"no\">ErrType</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"p\">)</span>\n<span class=\"n\">my_func</span><span class=\"w\"> </span><span class=\"o\">=</span>\n<span class=\"w\">     </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">func_returning_a_different_result_type</span><span class=\"w\"> </span><span class=\"p\">?</span><span class=\"w\"> </span><span class=\"no\">ErrType</span>\n</code></pre></div>\n<p>In the new compiler you might do:</p>\n<div class=\"codehilite\" data-code-language=\"Ruby\"><pre><span></span><code><span class=\"n\">my_func</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">Try</span><span class=\"p\">(</span><span class=\"no\">Whatever</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"no\">ErrType</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"p\">)</span>\n<span class=\"n\">my_func</span><span class=\"w\"> </span><span class=\"o\">=</span>\n<span class=\"w\">     </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">func_returning_a_different_result_type</span><span class=\"o\">.</span><span class=\"n\">map_err</span><span class=\"p\">(</span><span class=\"no\">ErrType</span><span class=\"p\">)?</span>\n</code></pre></div>\n<p>I'm not sure if we have a shorter syntax there in the new compiler currently.</p>\n<p>Note, normally, we just nest err types instead of removing the inner error. If you want to remove the innor error, just replaec <code>ErrType</code> with <code>|_| ErrType</code></p>",
        "id": 567263194,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1767993218
    },
    {
        "content": "<p>Maybe there is a more updated way, but that is what I think works currently.</p>",
        "id": 567263240,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1767993240
    },
    {
        "content": "<p>I'm using the latest release, so new compiler I guess?</p>",
        "id": 567275672,
        "sender_full_name": "947R3K",
        "timestamp": 1768000507
    },
    {
        "content": "<p>There are no releases yet for the new compiler. You’ll find some info here: <a href=\"https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4\">https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4</a></p>",
        "id": 567276317,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1768001119
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479073\">Matthieu Pizenberg</span> <a href=\"#narrow/channel/231634-beginners/topic/.60Result.60.20ergonomics/near/567276317\">said</a>:</p>\n<blockquote>\n<p>There are no releases yet for the new compiler. You’ll find some info here: <a href=\"https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4\">https://gist.github.com/rtfeldman/f46bcbfe5132d62c4095dfa687bb9aa4</a></p>\n</blockquote>\n<p>There are nightly releases for the new compiler to be clear: <a href=\"https://github.com/roc-lang/nightlies/releases\">https://github.com/roc-lang/nightlies/releases</a></p>",
        "id": 567524713,
        "sender_full_name": "Anton",
        "timestamp": 1768222560
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"1012671\">947R3K</span> <a href=\"#narrow/channel/231634-beginners/topic/.60Result.60.20ergonomics/near/567275672\">said</a>:</p>\n<blockquote>\n<p>I'm using the latest release, so new compiler I guess?</p>\n</blockquote>\n<p>alpha4 was made using the old compiler, it is still more reliable and feature complete compared to the new compiler nightlies.</p>",
        "id": 567525450,
        "sender_full_name": "Anton",
        "timestamp": 1768222741
    }
]