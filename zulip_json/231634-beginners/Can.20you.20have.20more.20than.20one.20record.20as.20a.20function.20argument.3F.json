[
    {
        "content": "<p>How to properly destructure a function with two record types that both have optional arguments?</p>\n<div class=\"codehilite\" data-code-language=\"roc\"><pre><span></span><code>Point : { x: Frac a, y: Frac a, z? Frac a }\n\ndistanceBetweenPoints : Point, Point -&gt; Frac a\ndistanceBetweenPoints = \\point1, point2 -&gt;\n   # How / where to default point1.z and point2.z since they have to defaulted when they are destructured?\n   { x, y, z? 0.0 } = point1 #destructure point1\n   { x1, y1, z1 } = { x, y, z }\n   { x, y, z? 0.0 } = point2 #destructure point2 requires shadowing\n   { x2, y2, z2 } = { x, y, z }\n   Num.sqrt (Num.pow (x2 - x1) 2.0 + Num.pow (y2 - y1) 2.0 + Num.pow (z2 - z1) 2.0)\n</code></pre></div>",
        "id": 422709405,
        "sender_full_name": "Brian Teague",
        "timestamp": 1708551739
    },
    {
        "content": "<p>Should the ROC compiler automatically have default values based on type?  Should the default value be specified at the type definition, so destructuring is not required?</p>\n<p>bool -&gt; Bool.false<br>\nint -&gt; 0<br>\nFrac -&gt; 0.0<br>\nStr -&gt; \"\"</p>\n<div class=\"codehilite\"><pre><span></span><code>Point : { x: Fac a, y: Frac a, z? 1.0 Frac a } # 0.0 if no default is specificed\n</code></pre></div>",
        "id": 422710833,
        "sender_full_name": "Brian Teague",
        "timestamp": 1708552447
    },
    {
        "content": "<p>I think this might be an unhandled edge case rn. I don't think the parser currently supports both renaming a variable and assigning a default value.</p>\n<p>I would expect it to look something like this</p>\n<div class=\"codehilite\" data-code-language=\"Ruby\"><pre><span></span><code><span class=\"n\">distanceBetweenPoints</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">Point</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"no\">Point</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span><span class=\"w\"> </span><span class=\"no\">Frac</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"n\">distanceBetweenPoints</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">\\{</span><span class=\"ss\">x</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">y</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">y1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">z</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">z1</span><span class=\"w\"> </span><span class=\"p\">?</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"ss\">x</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">y</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">y2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">z</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">z2</span><span class=\"w\"> </span><span class=\"p\">?</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span>\n<span class=\"w\">    </span><span class=\"no\">Num</span><span class=\"o\">.</span><span class=\"n\">sqrt</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"no\">Num</span><span class=\"o\">.</span><span class=\"n\">pow</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">.</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"no\">Num</span><span class=\"o\">.</span><span class=\"n\">pow</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">y2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">y1</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">.</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"no\">Num</span><span class=\"o\">.</span><span class=\"n\">pow</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">z2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">z1</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">.</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n</code></pre></div>",
        "id": 422710916,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1708552490
    },
    {
        "content": "<p>This is the error I get</p>\n<div class=\"codehilite\"><pre><span></span><code>── UNFINISHED RECORD PATTERN in Test.roc ───────────────────────────────────────\n\nI am partway through parsing a record pattern, but I got stuck here:\n\n8│  distanceBetweenPoints = \\{x: x1, y: y1, z: z1 ? 2 }, {x: x2, y: y2, z: z2 ? 3 } -&gt;\n                                                  ^\n</code></pre></div>",
        "id": 422710985,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1708552526
    },
    {
        "content": "<p>Would this be a new requirement where we need a way to rename variables and specify defaults for records?</p>\n<p>Here is how Javascript renames variables when they are being destructured.</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"kd\">const</span><span class=\"w\"> </span><span class=\"nx\">obj</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nx\">foo</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">bar</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">2</span><span class=\"p\">};</span>\n\n<span class=\"kd\">const</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"nx\">foo</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"nx\">renamedFoo</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">bar</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"nx\">renamedBar</span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">obj</span><span class=\"p\">;</span>\n</code></pre></div>",
        "id": 422711178,
        "sender_full_name": "Brian Teague",
        "timestamp": 1708552613
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Ruby\"><pre><span></span><code><span class=\"no\">Point</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"ss\">x</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">Frac</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">y</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">Frac</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"p\">?</span><span class=\"w\"> </span><span class=\"no\">Frac</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"p\">}</span>\n\n<span class=\"n\">distanceBetweenPoints</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">Point</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"no\">Point</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span><span class=\"w\"> </span><span class=\"no\">Frac</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"n\">distanceBetweenPoints</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">\\</span><span class=\"n\">point1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">point2</span><span class=\"w\"> </span><span class=\"o\">-&gt;</span>\n<span class=\"w\">    </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"ss\">x</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">y</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">y1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">z</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">z1</span><span class=\"w\"> </span><span class=\"p\">?</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">.</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">point1</span>\n<span class=\"w\">    </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"ss\">x</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">y</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">y2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"ss\">z</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">z2</span><span class=\"w\"> </span><span class=\"p\">?</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">.</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">point2</span>\n<span class=\"w\">    </span><span class=\"no\">Num</span><span class=\"o\">.</span><span class=\"n\">sqrt</span><span class=\"w\"> </span><span class=\"p\">(</span>\n<span class=\"w\">            </span><span class=\"no\">Num</span><span class=\"o\">.</span><span class=\"n\">pow</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">.</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">+</span>\n<span class=\"w\">            </span><span class=\"no\">Num</span><span class=\"o\">.</span><span class=\"n\">pow</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">y2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">y1</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">.</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">+</span>\n<span class=\"w\">            </span><span class=\"no\">Num</span><span class=\"o\">.</span><span class=\"n\">pow</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">z2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">z1</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">.</span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"p\">)</span>\n</code></pre></div>",
        "id": 422711903,
        "sender_full_name": "Brian Teague",
        "timestamp": 1708552955
    }
]