[
    {
        "content": "<p>Hi all, I am trying to get the new compiler set up for the Advent of Code, but I am running into a segfault. I started with the AoC snippet on the gist, and tried with the latest compiled version of git as well as the latest version of the platform, but I keep getting segfaults. Any ideas on how I can fix that?</p>\n<p><code>roc --no-cache day1.roc</code> results in:</p>\n<div class=\"codehilite\"><pre><span></span><code>error: Child process /home/personal/.cache/roc/e59c636351ad64c25ba81dca340f7248/temp/roc-tmp-bFsSwh08ITK6jzGnh60qSlf2SM6zBcHO/roc_run_2372458751 killed by signal: 11\nerror: Child process crashed with segmentation fault (SIGSEGV)\n</code></pre></div>\n<p>I did notice I got errors for the build tests:</p>\n<p><code> ~/.zig/zig build test</code> results in</p>\n<div class=\"codehilite\"><pre><span></span><code>Build Summary: 54/57 steps succeeded; 1 failed; 1797/1845 tests passed; 1 skipped; 47 failed\ntest transitive failure\n└─ tests_summary transitive failure\n   └─ run test fx_platform_test 0/47 passed, 47 failed\n\nerror: the following build command failed with exit code 1:\n.zig-cache/o/d9d16c1099fe679e867f0f1a0b415354/build /home/personal/.zig/zig /home/personal/.zig/lib /home/personal/Documents/Dev/roc .zig-cache /home/personal/.cache/zig --seed 0x4a32e7f3 -Z7d6ff281091d6793 test\n</code></pre></div>",
        "id": 561734870,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764789496
    },
    {
        "content": "<p>By \"latest compiled version of git\" do you mean you compiled it from the git repo, or you used a published pre-compiled one?</p>",
        "id": 561735489,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764789713
    },
    {
        "content": "<p>With that I mean compiled from the git repo. I tried the recommended nightly as well but neither seemed to work (could be that I used the wrong combination of compiler + platform version)</p>",
        "id": 561735681,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764789786
    },
    {
        "content": "<p>Currently if you want to make sure you have the latest version from the main branch. The simplest way is to clone fresh, or if you cloned already, you pull main again, then <code>git clean -fdx</code> to remove everything not supposed to be in the folder. Then <code>zig build rebuild-builtins &amp;&amp; zig build</code> and if that’s ok, <code>zig build test</code>. (That’s my paranoid way of making sure I’m good, but maybe some steps aren’t needed ^^)</p>",
        "id": 561735926,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764789860
    },
    {
        "content": "<p>Zig compiler must be version 0.15.2 I believe.</p>",
        "id": 561736082,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1764789927
    },
    {
        "content": "<p>I just cloned, but I followed your steps (for your sanity as well as mine :)), but I still got the same issue.<br>\nAlso checked the zig version, it is indeed 15.2</p>",
        "id": 561736500,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764790078
    },
    {
        "content": "<p>I just set up the roc repo and zig</p>",
        "id": 561736636,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764790122
    },
    {
        "content": "<p>I pulled latest <code>main</code> (<code>b578eea38f443c1de8e4f3b3f606b17214014e70</code>) and followed the same instructions above and the tests pass. NixOS x86, using the dev shell of<code>./src/flake.nix</code>.</p>\n<p>What OS/arch are you on?</p>",
        "id": 561736753,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764790167
    },
    {
        "content": "<p>Fedora 42, Kernel 6.17.9</p>",
        "id": 561736977,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764790252
    },
    {
        "content": "<p>Any other useful info I can provide?</p>",
        "id": 561737040,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764790271
    },
    {
        "content": "<p>Could you share what <code>zig build test --summary all</code> shows please?</p>",
        "id": 561737234,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764790344
    },
    {
        "content": "<p>Just reconfirmed the git commit hash</p>",
        "id": 561737239,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764790347
    },
    {
        "content": "<p>We haven't tested on fedora yet asfaik</p>",
        "id": 561737281,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764790364
    },
    {
        "content": "<p><a href=\"/user_uploads/22008/yVZbkmjih8Ga_aiFTUJ0csQX/PastedText.txt\">PastedText.txt</a></p>",
        "id": 561737486,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764790442
    },
    {
        "content": "<p>There you go</p>",
        "id": 561737517,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764790448
    },
    {
        "content": "<p>I wonder what tier support fedora has with Zig, that fx platform is using zig std lib calls so it's surprising.</p>",
        "id": 561737590,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764790470
    },
    {
        "content": "<p>I am using this exact command as I haven't loaded the path if that's relevant <code> ~/.zig/zig build test --summary all</code></p>",
        "id": 561737688,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764790498
    },
    {
        "content": "<p>What does <code>zig build roc</code> give you?</p>",
        "id": 561738206,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764790692
    },
    {
        "content": "<p><code>Roc cache not found (nothing to clear)</code>, with zig_out/bin containing the roc binary</p>",
        "id": 561738898,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764790905
    },
    {
        "content": "<p>It seems those test are all failing at the same point <code>ensureRocBinary</code></p>",
        "id": 561738905,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764790907
    },
    {
        "content": "<p>Ohk, so roc builds... can you run <code>./zig-out/bin/roc version</code></p>",
        "id": 561739066,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764790965
    },
    {
        "content": "<p>/home/personal/.roc/latest/roc: /lib64/libtinfo.so.6: no version information available (required by /ho<br>\nme/personal/.roc/latest/roc)<br>\nroc nightly pre-release, built from commit d73ea109 on Tue 09 Sep 2025 09:02:08 AM UTC</p>\n<p>The no version information available error was also present in the old compiler, but everything still worked</p>",
        "id": 561739183,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764791012
    },
    {
        "content": "<p>wait, that was the one in path, not the compiled one</p>",
        "id": 561739283,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764791046
    },
    {
        "content": "<p>Roc compiler version debug-b578eea3</p>",
        "id": 561739334,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764791063
    },
    {
        "content": "<p><code>const roc_binary_path = if (builtin.os.tag == .windows) \".\\\\zig-out\\\\bin\\\\roc.exe\" else \"./zig-out/bin/roc\"</code></p>\n<p>Maybe this goes wrong because I am using ~/.zig/zig?</p>",
        "id": 561739586,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764791148
    },
    {
        "content": "<p>yeah that'd probably be it</p>",
        "id": 561739696,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764791183
    },
    {
        "content": "<p>possibly*</p>",
        "id": 561739872,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764791241
    },
    {
        "content": "<p>I have gotten the path working (Nushell shenanigans, now falling back to bash) and now the tests succeed</p>",
        "id": 561740389,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764791428
    },
    {
        "content": "<p>I was racing to get a Fedora 42 VM running - dropping that! :P</p>",
        "id": 561740780,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764791559
    },
    {
        "content": "<p>Okay, so I put the new roc binary in my path and ran the example as on the Gist, but still no dice:</p>\n<p><code>roc version</code>: Roc compiler version debug-b578eea3<br>\n<code>roc --no-cache day1.roc</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code>error: Child process /home/personal/.cache/roc/e59c636351ad64c25ba81dca340f7248/temp/roc-tmp-wCL3AsLNHM1fkMNPe8Wf3IMsSYtHSzdg/roc_run_2372458751 killed by signal: 11\nerror: Child process crashed with segmentation fault (SIGSEGV)\n</code></pre></div>",
        "id": 561741029,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764791648
    },
    {
        "content": "<p>Does it work if you put the Roc code into <code>test/fx/app.roc</code> of the Roc compiler project and run that from the project root?</p>",
        "id": 561741267,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764791731
    },
    {
        "content": "<p>If no, could you paste the exact Roc code you're running?</p>",
        "id": 561741415,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764791769
    },
    {
        "content": "<p>It could be that the URL from the snippet is an older release of the platform with a known bug it it. I haven't been taking down older links for the zig template platform</p>",
        "id": 561741784,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764791910
    },
    {
        "content": "<p>If the zig tests are passing the most logical thing I can think of is the platform</p>",
        "id": 561741961,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764791976
    },
    {
        "content": "<p>If your on the latest release of the platfrom and it still fails... I'd be interested to know if <code>zig build</code> succeeds, and then if you can run an fx test app manually.. like <code>.\\zig-out\\bin\\roc test\\fx\\app.roc</code> etc</p>",
        "id": 561742288,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764792078
    },
    {
        "content": "<p>I'm on it, was still faffing about with getting it all running</p>",
        "id": 561743020,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764792387
    },
    {
        "content": "<p>I compiled roc and ran <code>./zig-out/bin/roc test/fx/app.roc</code> from the root of the roc compiler repo, still the same error</p>",
        "id": 561743228,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764792471
    },
    {
        "content": "<p>Can you paste your full Roc source?</p>",
        "id": 561743303,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764792500
    },
    {
        "content": "<p>Yes, forgot about that:</p>\n<div class=\"codehilite\"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst&quot; }\n\nimport pf.Stdout\n\nmain! = |_args| {\n    Stdout.line!(&quot;Hello, World!&quot;)\n    Ok({})\n}\n</code></pre></div>",
        "id": 561743367,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764792527
    },
    {
        "content": "<p><code>zig build test --summary all</code> returns</p>\n<p><a href=\"/user_uploads/22008/LHsU9hXVaQNiJzbQ9yiZuCx9/PastedText.txt\">PastedText.txt</a></p>",
        "id": 561743507,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764792590
    },
    {
        "content": "<p>Using that source I'm segfaulting too:</p>\n<div class=\"codehilite\"><pre><span></span><code>./zig-out/bin/roc test/fx/app.roc\nerror: Child process /home/niclas/.cache/roc/e59c636351ad64c25ba81dca340f7248/temp/roc-tmp-peyESAxE4KSKWkmYBrByTDx2QmyibQwP/roc_run_792223834 killed by signal: 11\nerror: Child process crashed with segmentation fault (SIGSEGV)\n</code></pre></div>\n<p>Can run the built-in example (with the built-in platform) fine:</p>\n<div class=\"codehilite\"><pre><span></span><code>./zig-out/bin/roc test/fx/app.roc\nHello from stdout!\nLine 1 to stdout\nLine 2 to stderr\nLine 3 to stdout\nError from stderr!\n</code></pre></div>\n<p>And the segfaulting example is using the latest platform version and compiler version is latest (<code>b578eea38f443c1de8e4f3b3f606b17214014e70</code>).</p>",
        "id": 561743753,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764792698
    },
    {
        "content": "<p>All platform versions seem to give the segfault</p>",
        "id": 561743754,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764792699
    },
    {
        "content": "<p>Nice! That's one step closer</p>",
        "id": 561743857,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764792736
    },
    {
        "content": "<p>Can confirm that the built-in example runs fine:</p>\n<div class=\"codehilite\"><pre><span></span><code>Hello from stdout!\nLine 1 to stdout\nLine 2 to stderr\nLine 3 to stdout\nError from stderr!\n</code></pre></div>",
        "id": 561744049,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764792803
    },
    {
        "content": "<p>Some more interesting findings (all running <code>./zig-out/bin/roc test/fx/app.roc</code>) :</p>\n<p>Just importing the platform:</p>\n<div class=\"codehilite\"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst&quot; }\n\nimport pf.Stdout\nimport pf.Stderr\n\nstr : Str -&gt; Str\nstr = |s| s\n\nmain! = || {\n    Stdout.line!(str(&quot;Hello from stdout!&quot;))\n    Stdout.line!(str(&quot;Line 1 to stdout&quot;))\n    Stderr.line!(str(&quot;Line 2 to stderr&quot;))\n    Stdout.line!(str(&quot;Line 3 to stdout&quot;))\n    Stderr.line!(str(&quot;Error from stderr!&quot;))\n}\n</code></pre></div>\n<p>gives</p>\n<div class=\"codehilite\"><pre><span></span><code>-- TYPE MISMATCH ---------------------------------\n\nThis expression is used in an unexpected way:\n  ┌─ test/fx/app.roc:9:1\n  │\n9 │ main! = || {\n  │ ^^^^^\n\nIt has the type:\n    ({}) =&gt; {  }\n\nBut the type annotation says it should have the type:\n    List(Str) =&gt; Try({  }, [Exit(I32)])\n\nFound 1 error(s) and 0 warning(s) for test/fx/app.roc.\n</code></pre></div>\n<p>Adding <code>|_args</code> and <code>Ok({})</code></p>\n<div class=\"codehilite\"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst&quot; }\n\nimport pf.Stdout\nimport pf.Stderr\n\nstr : Str -&gt; Str\nstr = |s| s\n\nmain! = |_args| {\n    Stdout.line!(str(&quot;Hello from stdout!&quot;))\n    Stdout.line!(str(&quot;Line 1 to stdout&quot;))\n    Stderr.line!(str(&quot;Line 2 to stderr&quot;))\n    Stdout.line!(str(&quot;Line 3 to stdout&quot;))\n    Stderr.line!(str(&quot;Error from stderr!&quot;))\n    Ok({})\n}\n</code></pre></div>\n<p>gives</p>\n<div class=\"codehilite\"><pre><span></span><code>thread 68341 panic: incorrect alignment\n/home/personal/Documents/Dev/roc/src/eval/StackValue.zig:894:39: 0x43b436 in storeListElementCount (mod.zig)\n            const ptr = @as([*]usize, @ptrCast(@alignCast(source))) - 2;\n                                      ^\n/home/personal/Documents/Dev/roc/src/eval/StackValue.zig:190:30: 0x3c6cad in copyToPtr (mod.zig)\n        storeListElementCount(dest_list, elements_refcounted);\n                             ^\n/home/personal/Documents/Dev/roc/src/eval/interpreter.zig:782:30: 0x3cab0b in pushCopy (mod.zig)\n            try src.copyToPtr(&amp;self.runtime_layout_store, ptr.?, roc_ops);\n                             ^\n/home/personal/Documents/Dev/roc/src/eval/interpreter.zig:6434:49: 0x3d3b7d in patternMatchesBind (mod.zig)\n                const copied = try self.pushCopy(value, roc_ops);\n                                                ^\n/home/personal/Documents/Dev/roc/src/eval/interpreter.zig:589:64: 0x3de83e in evaluateExpression (mod.zig)\n                    const matched = try self.patternMatchesBind(params[j], arg_value, param_rt_vars[j], roc_ops, &amp;temp_binds, @enumFromInt(0));\n                                                               ^\n/home/personal/Documents/Dev/roc/src/interpreter_shim/main.zig:174:39: 0x3b9b77 in evaluateFromSharedMemory (main.zig)\n    try interpreter.evaluateExpression(expr_idx, ret_ptr, roc_ops, arg_ptr);\n                                      ^\n/home/personal/Documents/Dev/roc/src/interpreter_shim/main.zig:71:29: 0x3b8f0e in roc_entrypoint (main.zig)\n    evaluateFromSharedMemory(entry_idx, ops, ret_ptr, arg_ptr) catch |err| {\n                            ^\n/home/personal/Documents/Dev/roc/test/fx/platform/host.zig:300:14: 0x282543 in platform_main (host.zig)\n    roc__main(&amp;roc_ops, @as(*anyopaque, @ptrCast(&amp;ret)), @as(*anyopaque, @ptrCast(&amp;args)));\n             ^\n/home/personal/Documents/Dev/roc/test/fx/platform/host.zig:168:18: 0x282668 in main (host.zig)\n    platform_main() catch |err| {\n                 ^\nsrc/env/__libc_start_main.c:95:2: 0xaca54c in libc_start_main_stage2 (src/env/__libc_start_main.c)\nUnwind error at address `exe:0xaca54c` (error.MissingFDE), trace may be incomplete\n\n???:?:?: 0x0 in ??? (???)\nerror: Child process /home/personal/.cache/roc/e59c636351ad64c25ba81dca340f7248/temp/roc-tmp-QrCVuZwQCTugoE4UXr9kfu6No9KsEwgj/roc_run_792223834 killed by signal: 6\nerror: Child process aborted (SIGABRT)\n</code></pre></div>",
        "id": 561744807,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764793118
    },
    {
        "content": "<p>Try deleting the Roc cache (<code>rm -rf ~/.cache/roc</code> or such) and re-running. You'll probably be back at the segfault.</p>",
        "id": 561745286,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764793350
    },
    {
        "content": "<p>Yup, that's right</p>",
        "id": 561745426,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764793404
    },
    {
        "content": "<p>This is probably a problem for a Wizard. Perhaps use the built-in platform for now or play a delightful session of Diablo II and I'm sure it'll be in order when you return!</p>",
        "id": 561745826,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764793582
    },
    {
        "content": "<p>More of a Cities Skylines guy myself, so I guess I'll get to building some suburbs <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span></p>",
        "id": 561746459,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764793823
    },
    {
        "content": "<p>There's a guy who does Cities Skylines videos in YoutTube that loves drinking tea. I think Biffa is his name... that you? <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 561747694,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1764794286
    },
    {
        "content": "<p>No that's a different guy, I just also happen to drink tea and enjoy Cities Skylines  <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 561747984,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764794389
    },
    {
        "content": "<p>If anyone wants to/can help me further and needs some more info, just ping me, I'll be keeping an eye on this channel</p>",
        "id": 561754335,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764797140
    },
    {
        "content": "<p>I’m with you, <span class=\"user-mention\" data-user-id=\"758860\">@TeaDrinkingProgrammer</span> . I was excited to try the new Roc compiler for AoC, but I’m running into the same segfault. I’m on the latest MacOS Silicon binary.</p>",
        "id": 561770747,
        "sender_full_name": "Ghislain",
        "timestamp": 1764805836
    },
    {
        "content": "<p>I'll check this out</p>",
        "id": 562078611,
        "sender_full_name": "Anton",
        "timestamp": 1764934161
    },
    {
        "content": "<p>This works for me on the latest roc commit 04bb3f9270bda4306828aa2c0194d10755ecdf74 (built from source), on apple silicon. Source code:</p>\n<div class=\"codehilite\" data-code-language=\"CoffeeScript\"><pre><span></span><code><span class=\"nx\">app</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"nx\">main</span><span class=\"o\">!</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nv\">pf</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"nx\">platform</span><span class=\"w\"> </span><span class=\"s\">\"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst\"</span><span class=\"w\"> </span><span class=\"p\">}</span>\n\n<span class=\"nx\">import</span><span class=\"w\"> </span><span class=\"nx\">pf</span><span class=\"p\">.</span><span class=\"nx\">Stdout</span>\n\n<span class=\"nx\">main</span><span class=\"o\">!</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"nx\">_args</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"nx\">Stdout</span><span class=\"p\">.</span><span class=\"nx\">line</span><span class=\"o\">!</span><span class=\"p\">(</span><span class=\"s\">\"Hello, World!\"</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"nx\">Ok</span><span class=\"p\">({})</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 562082229,
        "sender_full_name": "Anton",
        "timestamp": 1764935403
    },
    {
        "content": "<p>Can confirm on macOS Apple Silicon. Sadly not on NixOS x86:</p>\n<div class=\"codehilite\"><pre><span></span><code>./zig-out/bin/roc appc.roc\nerror: Child process /home/niclas/.cache/roc/5931167c7313ef73dbb36e68e48b39cf/temp/roc-tmp-pkhvoyUrxhdo7z21VPuLALspQGB5rbo2/roc_run_1644006530 killed by signal: 11\nerror: Child process crashed with segmentation fault (SIGSEGV)\n</code></pre></div>\n<p>Same source and  Roc built from source (<code>04bb3f9270bda4306828aa2c0194d10755ecdf74</code>).  <code>git clean -fdx</code>, <code>rm -rf ~/.cache/roc</code>, and <code>zig build test</code> passing before testing.</p>",
        "id": 562084653,
        "sender_full_name": "Niclas Ahden",
        "timestamp": 1764936172
    },
    {
        "content": "<p>Any commands/logs I can supply to make it easier for you to find the cause?</p>",
        "id": 562091786,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764938588
    },
    {
        "content": "<p>No, it's fine, I will probably be able to reproduce on linux too</p>",
        "id": 562097271,
        "sender_full_name": "Anton",
        "timestamp": 1764940315
    },
    {
        "content": "<p>It does not happen when building roc-platform-template-zig from source, make sure to use <code>roc --no-cache myfile.roc</code> if you just switched out the platform line though.</p>",
        "id": 562105368,
        "sender_full_name": "Anton",
        "timestamp": 1764942807
    },
    {
        "content": "<p>Looks like it was a linking issue, I will automate releases and add more testing too.</p>",
        "id": 562106221,
        "sender_full_name": "Anton",
        "timestamp": 1764943061
    },
    {
        "content": "<p>I know what's wrong, fix is underway</p>",
        "id": 562147669,
        "sender_full_name": "Anton",
        "timestamp": 1764954297
    },
    {
        "content": "<p>Thanks for the update, works for me! I hadn’t seen the latest version with the GitHub’s odd sorting.</p>",
        "id": 562163362,
        "sender_full_name": "Ghislain",
        "timestamp": 1764960158
    },
    {
        "content": "<p>Is there a new version of something already? I can't find anything</p>",
        "id": 562168836,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764962331
    },
    {
        "content": "<p>Never mind, found it. Like it says in the nightlies channel, the 5 december release is shown as being 5 days old.</p>",
        "id": 562169061,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764962438
    },
    {
        "content": "<p>Just out of curiosity, what was the problem in the end?</p>",
        "id": 562169869,
        "sender_full_name": "TeaDrinkingProgrammer",
        "timestamp": 1764962805
    },
    {
        "content": "<blockquote>\n<p>the 5 december release is shown as being 5 days old</p>\n</blockquote>\n<p>Weird, it's shown as 10 hours old for me</p>",
        "id": 562172805,
        "sender_full_name": "Anton",
        "timestamp": 1764964010
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"758860\">TeaDrinkingProgrammer</span> <a href=\"#narrow/channel/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example/near/562169869\">said</a>:</p>\n<blockquote>\n<p>Just out of curiosity, what was the problem in the end?</p>\n</blockquote>\n<p>.o files were not included in the .tar.zst, a specific .o file is necessary for (musl) linux.</p>",
        "id": 562172902,
        "sender_full_name": "Anton",
        "timestamp": 1764964070
    },
    {
        "content": "<p>Fixed :)<br>\nThis is the header for the latest release:</p>\n<div class=\"codehilite\" data-code-language=\"CoffeeScript\"><pre><span></span><code><span class=\"nx\">app</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"nx\">main</span><span class=\"o\">!</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nv\">pf</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"nx\">platform</span><span class=\"w\"> </span><span class=\"s\">\"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.4/6XA8JLWhmG1FSgb8GxPjBs9cGrtRqopohR3KAHYo722z.tar.zst\"</span><span class=\"w\"> </span><span class=\"p\">}</span>\n</code></pre></div>",
        "id": 562174363,
        "sender_full_name": "Anton",
        "timestamp": 1764964778
    }
]