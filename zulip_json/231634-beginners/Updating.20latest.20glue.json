[
    {
        "content": "<p>After this morning's discussion, I've thought I would have another go at updating roc-tui to use the latest glue. I managed to get much further than previously <a href=\"https://github.com/lukewilliamboswell/roc-tui/tree/update-glue\">here is the working branch</a>. </p>\n<p>Just had a question about what might be causing the below errors? I haven't changed my <code>roc.rs</code> which is where all of the extern C functions were defined. </p>\n<div class=\"codehilite\"><pre><span></span><code>% roc run examples/hello.roc\nUndefined symbols for architecture arm64:\n  &quot;_roc__programForHost_1__Init_caller&quot;, referenced from:\n      __ZN4host3roc15init_and_render17h36fb0f8a51b4df54E in macos-arm64.o\n  &quot;_roc__programForHost_1__Init_result_size&quot;, referenced from:\n      __ZN4host3roc15init_and_render17h36fb0f8a51b4df54E in macos-arm64.o\n  &quot;_roc__programForHost_1__Init_size&quot;, referenced from:\n      __ZN4host3roc15init_and_render17h36fb0f8a51b4df54E in macos-arm64.o\n  &quot;_roc__programForHost_1__Render_caller&quot;, referenced from:\n      __ZN4host3roc15init_and_render17h36fb0f8a51b4df54E in macos-arm64.o\n      __ZN4host3roc17update_and_render17h5f70680c13fdb020E in macos-arm64.o\n  &quot;_roc__programForHost_1__Render_size&quot;, referenced from:\n      __ZN4host3roc15init_and_render17h36fb0f8a51b4df54E in macos-arm64.o\n      __ZN4host3roc17update_and_render17h5f70680c13fdb020E in macos-arm64.o\n  &quot;_roc__programForHost_1__Update_caller&quot;, referenced from:\n      __ZN4host3roc6update17h5ffdde404467b89aE in macos-arm64.o\n      __ZN4host3roc17update_and_render17h5f70680c13fdb020E in macos-arm64.o\n  &quot;_roc__programForHost_1__Update_result_size&quot;, referenced from:\n      __ZN4host3roc6update17h5ffdde404467b89aE in macos-arm64.o\n      __ZN4host3roc17update_and_render17h5f70680c13fdb020E in macos-arm64.o\n  &quot;_roc__programForHost_1__Update_size&quot;, referenced from:\n      __ZN4host3roc6update17h5ffdde404467b89aE in macos-arm64.o\n      __ZN4host3roc17update_and_render17h5f70680c13fdb020E in macos-arm64.o\nld: symbol(s) not found for architecture arm64\nexamples/example-app: is already signed\nthread &#39;main&#39; panicked at &#39;not yet implemented: gracefully handle `ld` (or `zig` in the case of wasm with --optimize) returning exit code Some(1)&#39;, crates/compiler/build/src/program.rs:1014:17\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\n</code></pre></div>",
        "id": 361662335,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1685233028
    },
    {
        "content": "<p>I'm not super confident with my Rust here; if this line of effort is useful for glue development I'm happy to support with experimenting with <code>roc-tui</code> here as an example platform. I'm just not sure if this is an issue with glue or I'm doing something silly with Rust.</p>",
        "id": 361662679,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1685233333
    },
    {
        "content": "<p>Oh, I think the name of all those functions slightly change with one of folkerts prs</p>",
        "id": 361666381,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1685236647
    },
    {
        "content": "<p>Maybe the <code>_1</code> was removed.</p>",
        "id": 361666401,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1685236678
    },
    {
        "content": "<p>Don't exactly remember.</p>",
        "id": 361666449,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1685236686
    },
    {
        "content": "<p>If you can look at the symbols exposed by the roc object file generated by <code>--no-link</code>, that should show you the correct names.</p>",
        "id": 361666702,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1685236909
    },
    {
        "content": "<p><a href=\"https://github.com/roc-lang/basic-cli/commit/944660c2130cc469ec6291385a4a6988983f23bc\">These changes</a> may also be helpful</p>",
        "id": 361906155,
        "sender_full_name": "Anton",
        "timestamp": 1685355130
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"361169\">@Anton</span> and <span class=\"user-mention\" data-user-id=\"343810\">@Brendan Hansknecht</span>, I'm not confident I can make this change. Do you know if the plan is to have glue generate these functions also?</p>\n<p>For reference these are the symbols I am seeing, but not sure how to match them up to the Init, Update, and Render parts of my programForHost.</p>\n<div class=\"codehilite\"><pre><span></span><code>0000000000000e18 T _roc__programForHost_0_caller\n0000000000000e5c T _roc__programForHost_0_result_size\n0000000000000e6c T _roc__programForHost_0_size\n0000000000000dc4 T _roc__programForHost_1_caller\n00000000000002c4 T _roc__programForHost_1_exposed\n00000000000002b4 T _roc__programForHost_1_exposed_generic\n00000000000002d4 T _roc__programForHost_1_exposed_size\n0000000000000e00 T _roc__programForHost_1_result_size\n0000000000000e10 T _roc__programForHost_1_size\n0000000000000e74 T _roc__programForHost_2_caller\n0000000000000eb8 T _roc__programForHost_2_result_size\n0000000000000ec8 T _roc__programForHost_2_size\n</code></pre></div>",
        "id": 361915725,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1685357413
    },
    {
        "content": "<p>Oh, interesting. Looks like we totally Lost the names</p>",
        "id": 361980486,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1685374168
    },
    {
        "content": "<p>Yeah, that is not great</p>",
        "id": 361980553,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1685374189
    },
    {
        "content": "<p>And yeah, long term glue should generate these.</p>",
        "id": 361980676,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1685374212
    },
    {
        "content": "<p>Probably should be able now, but maybe just isn't enabled</p>",
        "id": 361980754,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1685374235
    }
]