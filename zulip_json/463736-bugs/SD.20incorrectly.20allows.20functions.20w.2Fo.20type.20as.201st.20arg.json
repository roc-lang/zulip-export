[
    {
        "content": "<p>Static dispatch incorrectly allows functions (build succeeds) without dispatched type as first parameter:</p>\n<div class=\"codehilite\" data-code-language=\"Ruby\"><pre><span></span><code><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">main!</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"ss\">pf</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">platform</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.6/2BfGn4M9uWJNhDVeMghGeXNVDFijMfPsmmVeo6M4QjKX.tar.zst\"</span><span class=\"w\"> </span><span class=\"p\">}</span>\n\n<span class=\"n\">main!</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"n\">_args</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">lst</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">.</span><span class=\"n\">until</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">)</span>\n\n<span class=\"w\">    </span><span class=\"c1\"># `lst` is a List, thus static dispatch finds `.repeat`, but `.repeat` takes</span>\n<span class=\"w\">    </span><span class=\"c1\"># type `a`, not type `List(a)` as its first arg.</span>\n<span class=\"w\">    </span><span class=\"c1\"># This should not build, but it does. Instead it crashes at run time.</span>\n<span class=\"w\">    </span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">lst</span><span class=\"o\">.</span><span class=\"n\">repeat</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n\n<span class=\"w\">    </span><span class=\"c1\"># Here to avoid warnings for unused values.</span>\n<span class=\"w\">    </span><span class=\"n\">match</span><span class=\"w\"> </span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"no\">Ok</span><span class=\"p\">({})</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Building this will succeed, but instead will crash with run time exception:</p>\n<div class=\"codehilite\"><pre><span></span><code>Roc crashed: e_call: func is neither closure nor lambda\n</code></pre></div>",
        "id": 568028833,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1768408118
    },
    {
        "content": "<p>Issue at <a href=\"https://github.com/roc-lang/roc/issues/9019\">#9019</a></p>",
        "id": 568028900,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1768408131
    },
    {
        "content": "<p>Whoops! Meant to post this in bugs! <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 568029607,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1768408302
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"231634\" href=\"/#narrow/channel/231634-beginners/topic/SD.20incorrectly.20allows.20functions.20w.2Fo.20type.20as.201st.20arg\">#beginners &gt; SD incorrectly allows functions w/o type as 1st arg</a> by <span class=\"user-mention silent\" data-user-id=\"281383\">Richard Feldman</span>.</p>",
        "id": 568032509,
        "sender_full_name": "Notification Bot",
        "timestamp": 1768408985
    },
    {
        "content": "<p>moved!</p>",
        "id": 568032532,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1768408991
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 568032600,
        "sender_full_name": "Ian McLerran",
        "timestamp": 1768409015
    },
    {
        "content": "<p>Hmm, this is an interesting case. The inferred types here would be as follows (warning it's kinda confusing)</p>\n<p>Recall that any number literal is inferred a flexible variable with the constraint <code>from_numeral</code>.</p>\n<p><code>main</code>'s type would be: <code>_args -&gt; Try({}, _error)</code></p>\n<p>And in the body, the bound variables types' would be:</p>\n<div class=\"codehilite\"><pre><span></span><code>lst : c where [ a.until : a, b -&gt; c, a.from_numeral, b.from_numeral ]\nlist : e where [ c.repeat : c, d -&gt; e, d.from_numeral ]\n</code></pre></div>\n<p>From a types perspective, this is valid</p>\n<p>But since these are all unconstrained when type checking is done and therefor are unknown, maybe the interpreter is using some default value? Kinda like how <code>x.from_numeral</code> defaults to <code>Dec</code>?</p>",
        "id": 568090687,
        "sender_full_name": "Jared Ramirez",
        "timestamp": 1768429238
    }
]