[
    {
        "content": "<p>edit: GH issue: <a href=\"https://github.com/roc-lang/roc/issues/8555\">https://github.com/roc-lang/roc/issues/8555</a></p>\n<p>Hi !</p>\n<p>Here's a repro for a bug when extracting an ok value and it's a u8.<br>\nPrinting the entire Ok works, extracting a u64 value works, extracting a u8 value fails :</p>\n<div class=\"codehilite\" data-code-language=\"Ruby\"><pre><span></span><code><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">main!</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"ss\">pf</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"n\">platform</span><span class=\"w\"> </span><span class=\"s2\">\"./platform/main.roc\"</span><span class=\"w\"> </span><span class=\"p\">}</span>\n\n<span class=\"n\">import</span><span class=\"w\"> </span><span class=\"n\">pf</span><span class=\"o\">.</span><span class=\"n\">Stdout</span>\n<span class=\"n\">import</span><span class=\"w\"> </span><span class=\"n\">pf</span><span class=\"o\">.</span><span class=\"n\">Stderr</span>\n\n<span class=\"c1\"># -&gt; 8</span>\n<span class=\"n\">extract_ok_u64_works</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">U64</span>\n<span class=\"n\">extract_ok_u64_works</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"ss\">list</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">List</span><span class=\"p\">(</span><span class=\"no\">U64</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">]</span>\n\n<span class=\"w\">  </span><span class=\"n\">match</span><span class=\"p\">(</span><span class=\"n\">list</span><span class=\"o\">.</span><span class=\"n\">first</span><span class=\"p\">())</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"no\">Err</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"no\">Ok</span><span class=\"p\">(</span><span class=\"n\">first</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">first</span>\n<span class=\"w\">  </span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\"># -&gt; Ok(8)</span>\n<span class=\"n\">print_ok_u8_works</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">Try</span><span class=\"p\">(</span><span class=\"no\">U8</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"no\">ListWasEmpty</span><span class=\"o\">]</span><span class=\"p\">)</span>\n<span class=\"n\">print_ok_u8_works</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"ss\">list</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">List</span><span class=\"p\">(</span><span class=\"no\">U8</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">]</span>\n\n<span class=\"w\">  </span><span class=\"n\">list</span><span class=\"o\">.</span><span class=\"n\">first</span><span class=\"p\">()</span>\n<span class=\"p\">}</span>\n\n<span class=\"c1\"># -&gt; &lt;unsupported&gt;</span>\n<span class=\"n\">extract_ok_u8_fails</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">U8</span>\n<span class=\"n\">extract_ok_u8_fails</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"ss\">list</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"no\">List</span><span class=\"p\">(</span><span class=\"no\">U8</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">8</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">]</span>\n\n<span class=\"w\">  </span><span class=\"n\">match</span><span class=\"p\">(</span><span class=\"n\">list</span><span class=\"o\">.</span><span class=\"n\">first</span><span class=\"p\">())</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"no\">Err</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"no\">Ok</span><span class=\"p\">(</span><span class=\"n\">first</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">first</span>\n<span class=\"w\">  </span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">main!</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"n\">dbg</span><span class=\"w\"> </span><span class=\"n\">extract_ok_u64_works</span>\n<span class=\"w\">  </span><span class=\"n\">dbg</span><span class=\"w\"> </span><span class=\"n\">print_ok_u8_works</span>\n<span class=\"w\">  </span><span class=\"n\">dbg</span><span class=\"w\"> </span><span class=\"n\">extract_ok_u8_fails</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 561648576,
        "sender_full_name": "Astating",
        "timestamp": 1764767800
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"763724\">@Astating</span>,<br>\nCan you make a github issue for this so we don't lose track of it?</p>",
        "id": 561649047,
        "sender_full_name": "Anton",
        "timestamp": 1764767921
    }
]