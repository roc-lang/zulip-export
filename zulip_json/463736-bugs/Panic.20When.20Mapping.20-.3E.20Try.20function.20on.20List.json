[
    {
        "content": "<p>Hi again <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> </p>\n<p>When trying to run the below:</p>\n<div class=\"codehilite\"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.4/6XA8JLWhmG1FSgb8GxPjBs9cGrtRqopohR3KAHYo722z.tar.zst&quot; }\n\n\nimport pf.Stdout\n\nmain! = |_args| {\n    list_flats = [&quot;2022&quot;, &quot;22&quot;, &quot;11&quot;, &quot;ots&quot;]\n    _list_try = List.map(list_flats, U64.from_str)\n    Ok({})\n}\n</code></pre></div>\n<p>I'm getting the stack trace:</p>\n<p>thread 2065897 panic: reached unreachable code<br>\n???:?:?: 0x1041cc0f3 in ??? (list_test.roc)<br>\n???:?:?: 0x1042be157 in ??? (list_test.roc)<br>\n???:?:?: 0x10437bce3 in ??? (list_test.roc)<br>\n???:?:?: 0x10423ed2f in ??? (list_test.roc)<br>\n???:?:?: 0x1041f0a7f in ??? (list_test.roc)<br>\n???:?:?: 0x1041c5fcf in ??? (list_test.roc)<br>\n???:?:?: 0x1041c37cf in ??? (list_test.roc)<br>\n???:?:?: 0x1041c3237 in ??? (list_test.roc)<br>\n???:?:?: 0x1041c319b in ??? (list_test.roc)<br>\n???:?:?: 0x181a1c273 in ??? (???)<br>\n???:?:?: 0x0 in ??? (???)</p>\n<p>Roc check passes on this file without issue. The following code which applies the fallible function without creating a List does succeed:</p>\n<div class=\"codehilite\"><pre><span></span><code>main! = |_args| {\n    list_flats = [&quot;2022&quot;, &quot;22&quot;, &quot;11&quot;, &quot;ots&quot;]\n    for elt in list_flats {\n        int_elt = match U64.from_str(elt) {\n            Ok(i) =&gt; U64.to_str(i)\n            Err(_) =&gt; &quot;Was not an int string&quot;\n        }\n        Stdout.line!(&quot;Val ${int_elt}&quot;)\n    }\n    Ok({})\n}\n</code></pre></div>\n<p>Let me know if I should create a GH issue for this.</p>",
        "id": 563094904,
        "sender_full_name": "Edwin Santos",
        "timestamp": 1765420548
    },
    {
        "content": "<p>Can you try with the latest platform release <a href=\"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/tag/0.5\">https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/tag/0.5</a></p>",
        "id": 563095189,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1765420705
    },
    {
        "content": "<p>Also are you using roc built from source? </p>\n<p>Would you mind sharing the result of <code>roc version</code></p>",
        "id": 563095216,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1765420733
    },
    {
        "content": "<p>On a potentially related note, the following code:</p>\n<div class=\"codehilite\"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst&quot; }\n\ninput_multi =\n    \\\\R41\n    \\\\R17\n    \\\\L15\n    \\\\L2\n    \\\\L41\n    \\\\L47\n    \\\\L42\n\nimport pf.Stdout\n\n\nmain! = |_args| {\n    input_list : List(Str)\n    input_list = input_multi.split_on(&quot;\\n&quot;)\n    _a = input_list.take_first(10).for_each!(|elt| Stdout.line!(&quot;Row value ${elt}&quot;))\n    run_sample = input_list.take_first(10).map(parse_direction)\n    _b = run_sample.take_first(10).for_each!(|r_elt| match r_elt {\n        Ok(s) =&gt; Stdout.line!(&quot;Successful parse as ${s}&quot;)\n        Err(e) =&gt; Stdout.line!(&quot;Parse failure: ${e}&quot;)\n    })\n}\n\nparse_direction : Str -&gt; Try(I64, _)\nparse_direction = |string| {\n    if string.starts_with(&quot;L&quot;) {\n        parse_attempt = string.drop_prefix(&quot;L&quot;) -&gt; I64.from_str\n        parse = parse_attempt?\n        Ok(parse *-1)\n    } else if string.starts_with(&quot;R&quot;) {\n        string.drop_prefix(&quot;R&quot;) -&gt; I64.from_str\n    } else {\n        Err(RotationIsNotLR)\n    }\n}\n</code></pre></div>\n<p>Also fails on applying a fallible function to a List. This one gives a distinct stack trace:</p>\n<div class=\"codehilite\"><pre><span></span><code>thread 2072461 panic: trying to add var at rank 1, but current rank is 0\n???:?:?: 0x10673d07b in _generalize.VarPool.addVarToRank (???)\n???:?:?: 0x106747907 in _Check.unifyWithCtx (???)\n???:?:?: 0x1065d476b in _Check.unifyFromAnno (???)\n???:?:?: 0x1063c1e77 in _Check.checkPlatformRequirements (???)\n???:?:?: 0x1063bf037 in _main.setupSharedMemoryWithModuleEnv (???)\n???:?:?: 0x1063c51bb in _main.rocRun (???)\n???:?:?: 0x10652bcc3 in _main.mainArgs (???)\n???:?:?: 0x10652d1eb in _main.main (???)\n???:?:?: 0x10652d723 in _main (???)\n???:?:?: 0x181a1c273 in ??? (???)\n???:?:?: 0x0 in ??? (???)\nzsh: abort      roc run aoc_2025_01.roc\n</code></pre></div>",
        "id": 563095224,
        "sender_full_name": "Edwin Santos",
        "timestamp": 1765420741
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"515757\">Luke Boswell</span> <a href=\"#narrow/channel/463736-bugs/topic/Panic.20When.20Mapping.20-.3E.20Try.20function.20on.20List/near/563095216\">said</a>:</p>\n<blockquote>\n<p>Also are you using roc built from source? </p>\n<p>Would you mind sharing the result of <code>roc version</code></p>\n</blockquote>\n<p>Yeah I just pulled from upstream main a second ago, this is the roc version</p>\n<p>Roc compiler version debug-b1fd9424</p>",
        "id": 563095270,
        "sender_full_name": "Edwin Santos",
        "timestamp": 1765420779
    },
    {
        "content": "<p>I'll take a look!</p>",
        "id": 563095338,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1765420812
    },
    {
        "content": "<p>We've had some breaking changes since those older releases... I might delete them</p>",
        "id": 563095339,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1765420814
    },
    {
        "content": "<p>I wish there was a way to \"archive\" a release in GH</p>",
        "id": 563095354,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1765420847
    },
    {
        "content": "<p>Or maybe I should just leave them..</p>",
        "id": 563095378,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1765420874
    },
    {
        "content": "<p>you can just delete them</p>",
        "id": 563095506,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1765421003
    },
    {
        "content": "<p>I just reran the both examples  with the following:</p>\n<p>app [main!] { pf: platform \"<a href=\"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.5/BJBzo2SR2o5w3StmubGWvnPHq6hfePMaNWy5MwkPuZUs.tar.zst\">https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.5/BJBzo2SR2o5w3StmubGWvnPHq6hfePMaNWy5MwkPuZUs.tar.zst</a>\" }</p>\n<p>from the platform release yesterday, each had their same panics as before.</p>",
        "id": 563095511,
        "sender_full_name": "Edwin Santos",
        "timestamp": 1765421007
    },
    {
        "content": "<p>anyone who was using them will have them cached locally anyway</p>",
        "id": 563095519,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1765421013
    }
]