[
    {
        "content": "<p>Here's a first draft of a blog post announcing purity inference:</p>\n<p><a href=\"https://gist.github.com/rtfeldman/ac6e3a6da7714b9f8d03e50865403637\">https://gist.github.com/rtfeldman/ac6e3a6da7714b9f8d03e50865403637</a></p>\n<p>I don't plan to post this yet, since the transition is still in progress, but I did want to write up a draft to get feedback for when we're ready to announce it.</p>",
        "id": 492033218,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736139742
    },
    {
        "content": "<p>any feedback welcome!</p>",
        "id": 492033223,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736139746
    },
    {
        "content": "<p>Who is your intended audience with this post? Or rather, where do you plan on posting it?</p>",
        "id": 492034666,
        "sender_full_name": "Sam Mohr",
        "timestamp": 1736140610
    },
    {
        "content": "<p>the goal is for it to end up on the front page of Hacker News</p>",
        "id": 492034912,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736140755
    },
    {
        "content": "<p>I plan to post it on <a href=\"http://rtfeldman.com\">rtfeldman.com</a> just like the others (if I remember right, I think <a href=\"https://news.ycombinator.com/item?id=40196115\">the previous one made it to the front page</a> whereas <a href=\"https://news.ycombinator.com/item?id=40499531\">the one before</a> did not)</p>",
        "id": 492035095,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736140874
    },
    {
        "content": "<p>the main reason for posting it on <a href=\"http://rtfeldman.com\">rtfeldman.com</a> is that I wanted to avoid having an \"official blog\" because that creates an obligation to post on it regularly, or else people misread the lack of posting as a signal that something is wrong (e.g. that development is slowing down, or people have lost interest in the language, etc.)</p>",
        "id": 492035242,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736140958
    },
    {
        "content": "<p>whereas I figure that if there is no \"official Roc blog\" then that downside doesn't happen, and if I personally (or others) haven't posted in awhile, people won't read the same things into it (e.g. \"oh maybe he's just got other demands on his time right now\" etc.)</p>",
        "id": 492035341,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736141035
    },
    {
        "content": "<p>Love it. Really enjoyed reading the draft. <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 492042739,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1736145007
    },
    {
        "content": "<p>Great post! Found one small typo: \"... the LLVM <strong>perfomrance</strong> optimizations ...\"</p>",
        "id": 492047267,
        "sender_full_name": "Jasper Woudenberg",
        "timestamp": 1736147287
    },
    {
        "content": "<p>I'm loving the read so far. On the topic of typos, I found <code>...one of of pure...</code>, <code>...previous snytax used...</code>, <code>... a result so delighftful!</code></p>",
        "id": 492073311,
        "sender_full_name": "Fábio Beirão",
        "timestamp": 1736157952
    },
    {
        "content": "<p>As part of the function syntax explanation I think it's worth mentioning <code>||</code> doesn't interfere with tuple syntax. </p>\n<p>The \"few more breaking changes\" link is not a public zulip conversation.</p>",
        "id": 492082980,
        "sender_full_name": "Karl",
        "timestamp": 1736161674
    },
    {
        "content": "<p>Thank you for mentioning the kingfisher platform. Reading this forced me to create a new release, before you publish the post <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>\n<p>Will the new function syntax with <code>||</code> be merged in main before you publish the post?</p>",
        "id": 492086960,
        "sender_full_name": "Oskar Hahn",
        "timestamp": 1736163225
    },
    {
        "content": "<p>I'm assuming so, yeah!</p>",
        "id": 492105235,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736170284
    },
    {
        "content": "<p>Great post! One possible improvement could be to use collapsible sections for \"What we consider observable\" and \"Algebraic Effects\". A shorter looking post could mean the difference between \"It's not so long, I can read this now.\" and \"This is interesting but it's a little long, I'll save this for later.\" (And possibly forget about it).</p>",
        "id": 492106995,
        "sender_full_name": "Anton",
        "timestamp": 1736170923
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"496321\">@Oskar Hahn</span> I'll try to get that going.  Doing a bit of a PNC refactor to quiet the last of the fuzzer issues.  I'll be doing that next</p>",
        "id": 492112091,
        "sender_full_name": "Anthony Bullard",
        "timestamp": 1736172684
    },
    {
        "content": "<p>And I'm very humbled to be mentioned in the post Richard, it's gratifying to see basically every contribution I've made (outside of bugs - some of which I created <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span>) being called out.</p>",
        "id": 492114724,
        "sender_full_name": "Anthony Bullard",
        "timestamp": 1736173586
    },
    {
        "content": "<p>I think this is a great post, and I'm sure the Orange Site chatter will be fun to read</p>",
        "id": 492114801,
        "sender_full_name": "Anthony Bullard",
        "timestamp": 1736173615
    },
    {
        "content": "<p>thanks for making the contributions, they've been great! <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 492116200,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736174063
    },
    {
        "content": "<p>This looks great overall! I wonder if it'd be worth mentioning how we let you run effects from functions annotated to be pure while debugging. I've had really positive reactions to that fact.</p>",
        "id": 492510333,
        "sender_full_name": "Agus Zubiaga",
        "timestamp": 1736344755
    },
    {
        "content": "<p>Also, does my name intentionally link to <code>roc-pg</code>'s repo? <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 492510572,
        "sender_full_name": "Agus Zubiaga",
        "timestamp": 1736344816
    },
    {
        "content": "<p>oops, I'll fix that!</p>",
        "id": 492512544,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736345421
    },
    {
        "content": "<p>and good call on the running effectful functions anywhere while debugging!</p>",
        "id": 492512600,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736345443
    },
    {
        "content": "<p>Wow. I did not know that this is possible. I am excited to read about it in the post.</p>",
        "id": 492514727,
        "sender_full_name": "Oskar Hahn",
        "timestamp": 1736346133
    },
    {
        "content": "<p>yeah it's just a warning</p>",
        "id": 492514922,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736346210
    },
    {
        "content": "<p>we might need to be careful with <code>--optimize</code> and not annotating things as pure in llvm if they're not actually pure <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 492515192,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736346281
    },
    {
        "content": "<p><code>dbg</code> is stripped with <code>--optimize</code> right?</p>",
        "id": 492532611,
        "sender_full_name": "Anthony Bullard",
        "timestamp": 1736351458
    },
    {
        "content": "<p>I forget if it currently is, but the idea is not to</p>",
        "id": 492533526,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736351750
    },
    {
        "content": "<p><code>--optimize</code> should strip inline <code>expect</code> and that's it</p>",
        "id": 492533719,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736351805
    },
    {
        "content": "<p>No. It's not. And it was really useful for AoC to have optimize with dbg.</p>",
        "id": 492536676,
        "sender_full_name": "Oskar Hahn",
        "timestamp": 1736352703
    },
    {
        "content": "<p>That's troubling to me.</p>",
        "id": 492537847,
        "sender_full_name": "Anthony Bullard",
        "timestamp": 1736353098
    },
    {
        "content": "<p>I would expect a production release to maintain the contract of the effectuality of all functions</p>",
        "id": 492537953,
        "sender_full_name": "Anthony Bullard",
        "timestamp": 1736353137
    },
    {
        "content": "<p>Unless we are going to have a <code>--optimize-prod</code> flag <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 492538057,
        "sender_full_name": "Anthony Bullard",
        "timestamp": 1736353172
    },
    {
        "content": "<p>we've talked about having like a <code>--release</code> flag or something like that</p>",
        "id": 492545093,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736355101
    },
    {
        "content": "<p>which could fail if there are any warnings or dbgs</p>",
        "id": 492545146,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736355122
    },
    {
        "content": "<p>But why fail is there are debugs, and not just strip them?</p>",
        "id": 492545449,
        "sender_full_name": "Anthony Bullard",
        "timestamp": 1736355204
    },
    {
        "content": "<p>Because people will add dbg to their code and spend time wondering why it's not printing anything, potentially a lot of time</p>",
        "id": 492547213,
        "sender_full_name": "Anton",
        "timestamp": 1736355581
    },
    {
        "content": "<p>I’d at least like a —strip-dbg flag</p>",
        "id": 492575475,
        "sender_full_name": "Anthony Bullard",
        "timestamp": 1736366424
    },
    {
        "content": "<p>Maybe we can make an actual thread about this? We have yet to finalize this design. I can make an <a class=\"stream\" data-stream-id=\"304641\" href=\"/#narrow/channel/304641-ideas\">#ideas</a> thread in about an hour unless someone else wants to do it</p>",
        "id": 492575664,
        "sender_full_name": "Sam Mohr",
        "timestamp": 1736366497
    },
    {
        "content": "<p>I think the only remaining syntax for this, once we land the staged breaking changes are;</p>\n<ol>\n<li><code>|args|</code> </li>\n<li><code>\"string ${interpolation}\"</code></li>\n</ol>",
        "id": 492613097,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1736386541
    },
    {
        "content": "<p>(removed)</p>",
        "id": 492613210,
        "sender_full_name": "Sam Mohr",
        "timestamp": 1736386601
    },
    {
        "content": "<p>The link isn't a publicly visible topic... should we update the <a href=\"https://www.roc-lang.org/plans\">Plans page</a> maybe?</p>\n<blockquote>\n<p>To date, Roc has never had a numbered release. We aim to change that by releasing version 0.1.0 sometime in 2025, after landing <a href=\"#narrow/channel/304641-ideas/topic/v0.2E1.2E0\">a few more breaking changes</a>.</p>\n</blockquote>",
        "id": 492613510,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1736386824
    },
    {
        "content": "<p>I like the link being to a topic that isn't public</p>",
        "id": 492614225,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736387216
    },
    {
        "content": "<p>if someone is curious enough what the breaking changes are, that's a good reason for them to join Zulip! <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 492614261,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736387242
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"781658\">Anthony Bullard</span> <a href=\"#narrow/channel/304902-show-and-tell/topic/draft.20blog.20post.20about.20purity.20inference/near/492575475\">said</a>:</p>\n<blockquote>\n<p>I’d at least like a —strip-dbg flag</p>\n</blockquote>\n<p>hm, what would you use it for? <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 492619780,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736390866
    },
    {
        "content": "<p>it seems like the use case would be \"I want to keep <code>dbg</code>s in my code base but have them be no-ops\"</p>",
        "id": 492619848,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736390887
    },
    {
        "content": "<p>I always think of <code>dbg</code> as essentially a temporary debugging tool for just the thing I'm currently working on, and I actively don't want it to be persisted in the code base long-term</p>",
        "id": 492619898,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736390943
    },
    {
        "content": "<p>so I can appreciate a tool that helps me identify <code>dbg</code>s that I might have forgotten to take out after I was done debugging</p>",
        "id": 492619927,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736390967
    },
    {
        "content": "<p>but I can't think of a situation where I want to keep them in the code base but have them be no-ops</p>",
        "id": 492619945,
        "sender_full_name": "Richard Feldman",
        "timestamp": 1736390982
    }
]