[
    {
        "content": "<p>Thought I might share something which I've found really useful. </p>\n<p>If I define a helper like this... (I'm using the ANSI package to print with colors, but could be simpler) </p>\n<div class=\"codehilite\" data-code-language=\"Haskell\"><pre><span></span><code><span class=\"nf\">dbgHelp</span><span class=\"w\"> </span><span class=\"kt\">:</span><span class=\"w\"> </span><span class=\"kt\">Task</span><span class=\"w\"> </span><span class=\"n\">ok</span><span class=\"w\"> </span><span class=\"n\">err</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kt\">Bool</span><span class=\"w\"> </span><span class=\"ow\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Task</span><span class=\"w\"> </span><span class=\"n\">ok</span><span class=\"w\"> </span><span class=\"n\">err</span><span class=\"w\"> </span><span class=\"kr\">where</span><span class=\"w\"> </span><span class=\"n\">ok</span><span class=\"w\"> </span><span class=\"n\">implements</span><span class=\"w\"> </span><span class=\"kt\">Inspect</span>\n<span class=\"nf\">dbgHelp</span><span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"nf\">\\</span><span class=\"n\">task</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">shouldDbgPrint</span><span class=\"w\"> </span><span class=\"ow\">-&gt;</span>\n<span class=\"w\">    </span><span class=\"kr\">if</span><span class=\"w\"> </span><span class=\"n\">shouldDbgPrint</span><span class=\"w\"> </span><span class=\"kr\">then</span>\n<span class=\"w\">        </span><span class=\"kt\">Task</span><span class=\"o\">.</span><span class=\"n\">await</span><span class=\"w\"> </span><span class=\"n\">task</span><span class=\"w\"> </span><span class=\"nf\">\\</span><span class=\"n\">answer</span><span class=\"w\"> </span><span class=\"ow\">-&gt;</span>\n<span class=\"w\">            </span><span class=\"kt\">Str</span><span class=\"o\">.</span><span class=\"n\">joinWith</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s\">\"DEBUG:\"</span><span class=\"w\"> </span><span class=\"o\">|&gt;</span><span class=\"w\"> </span><span class=\"kt\">Color</span><span class=\"o\">.</span><span class=\"n\">fg</span><span class=\"w\"> </span><span class=\"kt\">Blue</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kt\">Inspect</span><span class=\"o\">.</span><span class=\"n\">toStr</span><span class=\"w\"> </span><span class=\"n\">answer</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"s\">\" \"</span><span class=\"w\"> </span><span class=\"o\">|&gt;</span><span class=\"w\"> </span><span class=\"kt\">Stderr</span><span class=\"o\">.</span><span class=\"n\">line</span><span class=\"o\">!</span>\n<span class=\"w\">            </span><span class=\"kt\">Task</span><span class=\"o\">.</span><span class=\"n\">ok</span><span class=\"w\"> </span><span class=\"n\">answer</span>\n<span class=\"w\">    </span><span class=\"kr\">else</span>\n<span class=\"w\">        </span><span class=\"n\">task</span>\n</code></pre></div>\n<p>I can use it like this.</p>\n<div class=\"codehilite\" data-code-language=\"Haskell\"><pre><span></span><code><span class=\"nf\">user</span><span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"kt\">Sql</span><span class=\"o\">.</span><span class=\"n\">getUser</span><span class=\"w\"> </span><span class=\"n\">args</span><span class=\"w\"> </span><span class=\"o\">|&gt;</span><span class=\"w\"> </span><span class=\"n\">dbgHelp</span><span class=\"o\">!</span><span class=\"w\"> </span><span class=\"n\">devMode</span>\n</code></pre></div>\n<p>Basically, just a nice way to log the output of a task inline without adding too much additional ceremony.</p>",
        "id": 441873842,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1717229637
    },
    {
        "content": "<p>Now just need a task to load <code>shouldDbgPrint</code> so you don't have to thread it through the app</p>",
        "id": 443615452,
        "sender_full_name": "Brendan Hansknecht",
        "timestamp": 1717953010
    }
]