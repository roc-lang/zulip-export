[
    {
        "content": "<p>Can the style here be improved/more idiomatic?</p>\n<div class=\"codehilite\" data-code-language=\"Elm\"><pre><span></span><code><span class=\"nv\">app</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"nv\">main</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nv\">pf</span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"nv\">platform</span><span class=\"w\"> </span><span class=\"s\">\"https://github.com/roc-lang/basic-cli/releases/download/0.11.0/SY4WWMhWQ9NvQgvIthcv15AUeA7rAIJHAHgiaSHGhdY.tar.br\"</span><span class=\"w\"> </span><span class=\"p\">}</span>\n\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nc\">pf.Http</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nc\">pf.Task</span><span class=\"w\"> </span><span class=\"nv\">exposing</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"kt\">Task</span><span class=\"p\">]</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nc\">pf.Stdout</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nc\">pf.Stderr</span>\n\n<span class=\"kr\">main </span><span class=\"nf\">=</span>\n<span class=\"w\">    </span><span class=\"nv\">request</span><span class=\"w\"> </span><span class=\"nf\">=</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"nv\">method</span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"kt\">Get</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nv\">headers</span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"p\">[],</span>\n<span class=\"w\">        </span><span class=\"nv\">url</span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"s\">\"http://localhost:8080\"</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nv\">mimeType</span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"s\">\"\"</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nv\">body</span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"p\">[],</span>\n<span class=\"w\">        </span><span class=\"nv\">timeout</span><span class=\"nf\">:</span><span class=\"w\"> </span><span class=\"kt\">TimeoutMilliseconds</span><span class=\"w\"> </span><span class=\"mi\">5000</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n\n<span class=\"w\">    </span><span class=\"nv\">sendResult</span><span class=\"w\"> </span><span class=\"nf\">=</span>\n<span class=\"w\">        </span><span class=\"kt\">Http</span><span class=\"nf\">.</span><span class=\"nv\">send</span><span class=\"w\"> </span><span class=\"nv\">request</span>\n<span class=\"w\">            </span><span class=\"nf\">|&gt;</span><span class=\"w\"> </span><span class=\"kt\">Task</span><span class=\"nf\">.</span><span class=\"nv\">result</span><span class=\"err\">!</span>\n\n<span class=\"w\">    </span><span class=\"nv\">processedSendResult</span><span class=\"w\"> </span><span class=\"nf\">=</span>\n<span class=\"w\">        </span><span class=\"kt\">Result</span><span class=\"nf\">.</span><span class=\"nv\">try</span><span class=\"w\"> </span><span class=\"nv\">sendResult</span><span class=\"w\"> </span><span class=\"kt\">Http</span><span class=\"nf\">.</span><span class=\"nv\">handleStringResponse</span>\n\n<span class=\"w\">    </span><span class=\"nv\">when</span><span class=\"w\"> </span><span class=\"nv\">processedSendResult</span><span class=\"w\"> </span><span class=\"nv\">is</span>\n<span class=\"w\">        </span><span class=\"kt\">Ok</span><span class=\"w\"> </span><span class=\"nv\">body</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span>\n<span class=\"w\">            </span><span class=\"kt\">Stdout</span><span class=\"nf\">.</span><span class=\"nv\">line</span><span class=\"w\"> </span><span class=\"s\">\"Response body: $(body).\"</span>\n\n<span class=\"w\">        </span><span class=\"kt\">Err</span><span class=\"w\"> </span><span class=\"nv\">err</span><span class=\"w\"> </span><span class=\"nf\">-&gt;</span>\n<span class=\"w\">            </span><span class=\"kt\">Stderr</span><span class=\"nf\">.</span><span class=\"nv\">line</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">Inspect</span><span class=\"nf\">.</span><span class=\"nv\">toStr</span><span class=\"w\"> </span><span class=\"nv\">err</span><span class=\"p\">)</span>\n</code></pre></div>",
        "id": 437709217,
        "sender_full_name": "Anton",
        "timestamp": 1715193674
    },
    {
        "content": "<p>I think I would use something like<br>\n<code>when Http.send request |&gt; Task.result |&gt; Task.map! Http.handleStringResponse is</code>, though I'll caveat that by saying that I'm on my phone and havent tested it or checked the types work.</p>",
        "id": 437715322,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1715196250
    },
    {
        "content": "<p>Thanks Luke, I'll give that a try :)</p>",
        "id": 437950619,
        "sender_full_name": "Anton",
        "timestamp": 1715332348
    }
]