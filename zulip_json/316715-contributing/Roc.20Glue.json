[
    {
        "content": "<p>What's the state of <code>roc glue</code>? I know that it's not implemented in the new toolchain, but is there a plan or design doc kind of thing? Is this something that would be reasonable for me to work on, or should I wait / hack it without?</p>",
        "id": 569877672,
        "sender_full_name": "Dan G Knutson",
        "timestamp": 1769269547
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"515757\">@Luke Boswell</span></p>",
        "id": 569877820,
        "sender_full_name": "Anton",
        "timestamp": 1769269653
    },
    {
        "content": "<p>It's not implemented yet.</p>",
        "id": 569897456,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1769282863
    },
    {
        "content": "<p>I have a thing I made which is similar, I intended it to be a halfway thing or stepping stone. </p>\n<p>I rebased and made a draft PR so I could share it <a href=\"https://github.com/roc-lang/roc/pull/9082\">https://github.com/roc-lang/roc/pull/9082</a></p>\n<p>This give you a flag <code>--dump-platform-abi=&lt;path&gt;</code> to generate a C header file from a platform ABI</p>\n<div class=\"codehilite\"><pre><span></span><code>$ roc build --help\nBuild a binary from the given .roc file, but don&#39;t run it\n\nUsage: roc build [OPTIONS] [ROC_FILE]\n\nArguments:\n  [ROC_FILE] The .roc file to build [default: main.roc]\n\nOptions:\n      --output=&lt;output&gt;              The full path to the output binary, including filename. To specify directory only, specify a path that ends in a directory separator (e.g. a slash)\n      &lt;snipped&gt;\n      --dump-platform-abi=&lt;path&gt;     Generate C header file with platform ABI\n</code></pre></div>\n<p>AFAIK there isn't a design doc for <code>roc glue</code> -- but we are copying the functionality from the old rust compiler so we could glean from that.</p>",
        "id": 569897724,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1769283099
    },
    {
        "content": "<p>I asked claude to summarise how it worked in the rust compiler <a href=\"https://gist.github.com/lukewilliamboswell/c75da540018770e0a960fa158cc9bec4\">https://gist.github.com/lukewilliamboswell/c75da540018770e0a960fa158cc9bec4</a></p>\n<p>sharing here to save anyone the tokens if they wanted to do the same</p>",
        "id": 569900832,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1769285813
    },
    {
        "content": "<p>I was wondering A, how do roc types work in host-lang and B, wtf is roc glue.  I am just using List(U8) in my host API, and then parse-don't-validate into nominal tag union with methods.  Not sure i want glue in this specific context.   Though i guess have my own glue for List(U8), not sure</p>",
        "id": 569902746,
        "sender_full_name": "Rick Hull",
        "timestamp": 1769287804
    },
    {
        "content": "<p>It mostly helps when you want to use custom type like a record  or a list containing other types like <code>List(MyOtherThing)</code> then you don't have to hand roll the source code for <code>MyOtherThing</code> and get that right (field ordering, alignment, padding, etc) for different architectures. When you have more complex types like nested tag unions with payloads etc it gets really difficult very quickly if these aren't generated for you. If you make a change to the Roc type, it can be much easier to just regenerate the source that matches that then trying to keep them in sync manually.</p>",
        "id": 569902980,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1769288089
    },
    {
        "content": "<p>I'd like host this doc in roc-init, at least temporarily.  Roc-init is completely application-focused, right now, but I have a few plat-dev docs off in a dusty corner</p>",
        "id": 569903230,
        "sender_full_name": "Rick Hull",
        "timestamp": 1769288402
    },
    {
        "content": "<p>That gist is for the old rust compiler... I wouldn't confuse it with anything for the new compiler</p>",
        "id": 569903276,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1769288442
    },
    {
        "content": "<p>Doh right.  Good background info.</p>",
        "id": 569903706,
        "sender_full_name": "Rick Hull",
        "timestamp": 1769288939
    },
    {
        "content": "<p>I got started on adding a <code>roc glue</code> command for the Zig toolchain. I don't know how built-out it should be before opening a PR, but I can at least throw a draft up tomorrow.</p>",
        "id": 569920658,
        "sender_full_name": "Dan G Knutson",
        "timestamp": 1769309945
    },
    {
        "content": "<p>Sounds good</p>",
        "id": 569920683,
        "sender_full_name": "Luke Boswell",
        "timestamp": 1769309982
    }
]