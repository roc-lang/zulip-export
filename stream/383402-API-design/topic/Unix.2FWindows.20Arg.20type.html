<html>
<head><meta charset="utf-8"><title>Unix/Windows Arg type Â· API design Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/index.html">API design</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html">Unix/Windows Arg type</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="490068871"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490068871" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490068871">(Dec 19 2024 at 23:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461444">Sam Mohr</span> <a href="#narrow/channel/383402-API-design/topic/Lossy.20unicode.20conversion.20builtins/near/489896475">said</a>:</p>
<blockquote>
<p>Which means creating an <code>Arg := [Unix (List U8), Windows (List U16)]</code> type and just crashing on <code>Windows</code> for now. Once these are implemented, it should be a simple change to properly support 16-bit encoded strings in <code>basic-cli</code> and Weaver</p>
</blockquote>
<p>Just wanting to clarify here <span class="user-mention" data-user-id="281383">@Richard Feldman</span> <span class="user-mention" data-user-id="461444">@Sam Mohr</span>  -- I think we want an alias, not an opaque type right?</p>



<a name="490068903"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490068903" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490068903">(Dec 19 2024 at 23:58)</a>:</h4>
<p>Is another way to say that "structural"? like non-opaque</p>



<a name="490068931"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490068931" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490068931">(Dec 19 2024 at 23:58)</a>:</h4>
<p>I was thinking opaque because I want it to eventually be compatible with static dispatch</p>



<a name="490068936"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490068936" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490068936">(Dec 19 2024 at 23:59)</a>:</h4>
<p>Which only works for custom types</p>



<a name="490069038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490069038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490069038">(Dec 20 2024 at 00:00)</a>:</h4>
<p>That was the whole <code>Thing.to_raw_os_str()</code> thing right?</p>



<a name="490069080"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490069080" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490069080">(Dec 20 2024 at 00:00)</a>:</h4>
<p>Yep</p>



<a name="490069115"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490069115" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490069115">(Dec 20 2024 at 00:00)</a>:</h4>
<p>Or the <code>arg.display() : Str</code> thing</p>



<a name="490069249"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490069249" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490069249">(Dec 20 2024 at 00:01)</a>:</h4>
<p>7 messages were moved here from <a class="stream-topic" data-stream-id="383402" href="/#narrow/channel/383402-API-design/topic/Lossy.20unicode.20conversion.20builtins">#API design &gt; Lossy unicode conversion builtins</a> by <span class="user-mention silent" data-user-id="515757">Luke Boswell</span>.</p>



<a name="490069388"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490069388" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490069388">(Dec 20 2024 at 00:02)</a>:</h4>
<p>yeah I think this should be opaque</p>



<a name="490070932"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490070932" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490070932">(Dec 20 2024 at 00:16)</a>:</h4>
<p>Link to beginning of original discussion in basic-cli <a class="message-link" href="/#narrow/channel/316715-contributing/topic/basic-cli.20purity.20inference/near/489552963">#contributing &gt; basic-cli purity inference @ ðŸ’¬</a></p>



<a name="490070970"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490070970" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490070970">(Dec 20 2024 at 00:17)</a>:</h4>
<p>Did we decide on replacement for <code>display : Arg -&gt; Str</code> or crash?</p>



<a name="490071111"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490071111" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490071111">(Dec 20 2024 at 00:18)</a>:</h4>
<p>replacement</p>



<a name="490072896"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490072896" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490072896">(Dec 20 2024 at 00:36)</a>:</h4>
<p>Ofc... hence the whole <code>Str.from_utf8_lossy : List U8 -&gt; Str</code> functions <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="490072956"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490072956" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490072956">(Dec 20 2024 at 00:37)</a>:</h4>
<p>I think the plan is for Weaver just to <code>crash</code> in the meantime until we got those</p>



<a name="490072968"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490072968" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490072968">(Dec 20 2024 at 00:37)</a>:</h4>
<p>Yep</p>



<a name="490073007"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490073007" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490073007">(Dec 20 2024 at 00:37)</a>:</h4>
<p>And basic-cli with <code>Arg.display</code> too</p>



<a name="490073623"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490073623" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490073623">(Dec 20 2024 at 00:44)</a>:</h4>
<p>Ok, I think we've got a draft</p>
<div class="codehilite" data-code-language="Perl"><pre><span></span><code><span class="n">module</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="n">Arg</span><span class="p">,</span>
<span class="w">    </span><span class="n">to_os_raw</span><span class="p">,</span>
<span class="w">    </span><span class="n">display</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># os_str's are not necessarily valid utf-8 or utf-16</span>
<span class="c1"># so we store as raw bytes internally to avoid</span>
<span class="c1"># common mistakes</span>
<span class="n">Arg</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="n">Unix</span><span class="w"> </span><span class="p">(</span><span class="n">List</span><span class="w"> </span><span class="n">U8</span><span class="p">),</span>
<span class="w">    </span><span class="n">Windows</span><span class="w"> </span><span class="p">(</span><span class="n">List</span><span class="w"> </span><span class="n">U16</span><span class="p">),</span>
<span class="p">]</span>

<span class="c1">## Unwrap the raw bytes for decoding, typically this will be</span>
<span class="c1">## consumed by a package and not an end user</span>
<span class="n">to_os_raw</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nn">Arg</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">Unix</span><span class="w"> </span><span class="p">(</span><span class="n">List</span><span class="w"> </span><span class="n">U8</span><span class="p">),</span><span class="w"> </span><span class="n">Windows</span><span class="w"> </span><span class="p">(</span><span class="n">List</span><span class="w"> </span><span class="n">U16</span><span class="p">)]</span>
<span class="n">to_os_raw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">\</span><span class="nv">@Arg</span><span class="w"> </span><span class="nn">inner</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">inner</span>

<span class="c1">## Convert an Arg to a Utf8 string for display purposes</span>
<span class="c1">##</span>
<span class="n">display</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nn">Arg</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Str</span>
<span class="n">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">\</span><span class="nv">@Arg</span><span class="w"> </span><span class="nn">arg</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="n">arg</span><span class="w"> </span><span class="n">is</span>
<span class="w">        </span><span class="n">Unix</span><span class="w"> </span><span class="nn">maybe_utf8</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="c1"># TODO replace with Str.from_utf8_lossy : List U8 -&gt; Str</span>
<span class="w">            </span><span class="c1"># see https://github.com/roc-lang/roc/issues/7390</span>
<span class="w">            </span><span class="n">when</span><span class="w"> </span><span class="n">Str</span><span class="o">.</span><span class="n">fromUtf8</span><span class="w"> </span><span class="n">maybe_utf8</span><span class="w"> </span><span class="n">is</span>
<span class="w">                </span><span class="n">Ok</span><span class="w"> </span><span class="nn">str</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">str</span>
<span class="w">                </span><span class="n">Err</span><span class="w"> </span><span class="nn">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">crash</span><span class="w"> </span><span class="s">"tried to display invalid utf-8"</span>

<span class="w">        </span><span class="n">Windows</span><span class="w"> </span><span class="nn">_maybe_utf16</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">            </span><span class="c1"># TODO replace with Str.from_utf16_lossy : List U16 -&gt; Str</span>
<span class="w">            </span><span class="c1"># see https://github.com/roc-lang/roc/issues/7390</span>
<span class="w">            </span><span class="n">crash</span><span class="w"> </span><span class="s">"display for utf-16 not yet supported"</span>
</code></pre></div>



<a name="490073700"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490073700" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490073700">(Dec 20 2024 at 00:45)</a>:</h4>
<p>Looks good to me! I think the suggestion for naming on <code>to_os_raw</code> was just <code>to_raw</code>, but either works for me</p>



<a name="490073822"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490073822" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490073822">(Dec 20 2024 at 00:46)</a>:</h4>
<p>It's a nod to <a href="https://doc.rust-lang.org/std/ffi/struct.OsStr.html">OsStr</a></p>



<a name="490073842"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490073842" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490073842">(Dec 20 2024 at 00:46)</a>:</h4>
<p>Yep</p>



<a name="490074101"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490074101" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490074101">(Dec 20 2024 at 00:49)</a>:</h4>
<p>Call me crazy... but I'm going to try and make this a package and see if that works. I'm assuming we can have the platform re-export the type so app authors don't need to import the package also just to work with it. But it could mean that Weaver could also use the same opaque type.</p>



<a name="490074200"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490074200" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490074200">(Dec 20 2024 at 00:50)</a>:</h4>
<p>I'll experiment for a little to see if it works</p>



<a name="490074657"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490074657" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490074657">(Dec 20 2024 at 00:55)</a>:</h4>
<p>That would probably be a better way to go about this, we would just need to get used to managing an upstream library from <code>basic-cli</code></p>



<a name="490074692"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490074692" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490074692">(Dec 20 2024 at 00:55)</a>:</h4>
<p>Aka we don't have semver yet, so I don't know how this interaction will work</p>



<a name="490074782"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490074782" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490074782">(Dec 20 2024 at 00:56)</a>:</h4>
<p>Yeah, it doesn't work I think. Looks like something hangs with <code>roc check</code> and I'm not keen to dig too much rn.. I'd rather get this into basic-cli</p>



<a name="490081938"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490081938" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490081938">(Dec 20 2024 at 02:15)</a>:</h4>
<p>This ArgOs / OsStr / OsStrExt thing is a deep rabbit hole. Just digging through the rust API's for this in <code>std::env</code> and <code>std::os::windows</code> etc and there's a lot here to get it right</p>



<a name="490081970"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490081970" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490081970">(Dec 20 2024 at 02:15)</a>:</h4>
<p>Really validates for me this is the right direction we're heading in... but slowing down an intial implementation</p>



<a name="490083808"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490083808" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490083808">(Dec 20 2024 at 02:38)</a>:</h4>
<p>Found the answers I'm looking for in <a href="https://docs.rs/widestring/latest/widestring/">https://docs.rs/widestring/latest/widestring/</a></p>



<a name="490086396"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490086396" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490086396">(Dec 20 2024 at 03:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/383402-API-design/topic/Unix.2FWindows.20Arg.20type/near/490081938">said</a>:</p>
<blockquote>
<p>This ArgOs / OsStr / OsStrExt thing is a deep rabbit hole. Just digging through the rust API's for this in <code>std::env</code> and <code>std::os::windows</code> etc and there's a lot here to get it right</p>
</blockquote>
<p>Don't forget CowStr</p>



<a name="490086439"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490086439" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490086439">(Dec 20 2024 at 03:14)</a>:</h4>
<p>Which I was just reminded of, looking at our html rendering code</p>



<a name="490087887"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Unix/Windows%20Arg%20type/near/490087887" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Unix.2FWindows.20Arg.20type.html#490087887">(Dec 20 2024 at 03:31)</a>:</h4>
<p>I've got something drafted... <a href="https://github.com/roc-lang/basic-cli/pull/293">https://github.com/roc-lang/basic-cli/pull/293</a></p>
<p>It's working on macos, but not linux for some reason. Just investigating</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>