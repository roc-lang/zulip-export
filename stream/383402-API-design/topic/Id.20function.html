<html>
<head><meta charset="utf-8"><title>Id function · API design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/index.html">API design</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html">Id function</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="411098866"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411098866" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411098866">(Jan 03 2024 at 23:44)</a>:</h4>
<p>I think roc should consider including an "id" function within the builtins set. it's just something that comes up now and again and I've liked having it as a builtin in other languages<br>
it's often useful when some operation is optional, eg:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">list</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="p">(</span><span class="kr">if</span><span class="w"> </span><span class="nv">fwd</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="nf">\</span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">reverse</span><span class="p">)</span>
<span class="err">#</span><span class="nv">becomes</span>
<span class="nv">list</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="p">(</span><span class="kr">if</span><span class="w"> </span><span class="nv">fwd</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="nv">id</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">reverse</span><span class="p">)</span>
</code></pre></div>



<a name="411099543"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411099543" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411099543">(Jan 03 2024 at 23:53)</a>:</h4>
<p>this was an intentional omission actually <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="411099564"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411099564" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411099564">(Jan 03 2024 at 23:53)</a>:</h4>
<p>I've found that in general if an identity function is desirable, it's usually a sign that an API is missing a function</p>



<a name="411099638"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411099638" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411099638">(Jan 03 2024 at 23:54)</a>:</h4>
<p>if that exact code example is from real-world code, I'd be curious what the larger example looks like!</p>



<a name="411100035"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411100035" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411100035">(Jan 03 2024 at 23:59)</a>:</h4>
<p>Okay, interesting.<br>
It is from real code, I'm writing a function that searches through a string (a bit of AOC catchup), but it needs to be able to operate forwards and backwards. There are a few places i need to reverse something or not depending on which way we are searching</p>
<p>I've replaced the id function uses with this odd little utility</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">ifF</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="kt">Bool</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">a</span><span class="p">)</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">a</span>
<span class="nv">ifF</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">input</span><span class="p">,</span><span class="w"> </span><span class="nv">cond</span><span class="p">,</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">cond</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="nv">input</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="nv">input</span>
</code></pre></div>



<a name="411103592"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411103592" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411103592">(Jan 04 2024 at 00:30)</a>:</h4>
<p>if you're up for sharing the whole code, I'd love to check it out!</p>



<a name="411103684"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411103684" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411103684">(Jan 04 2024 at 00:31)</a>:</h4>
<p>Here is a big chunk of the code. I'm well aware it's messy and not pretty, but I was trying to solve it with the least iteration possible and make use of breaking out of walks to return early</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="w"> </span><span class="nv">numberNames</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s">"zero"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"one"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"two"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"three"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"four"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"five"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"six"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"seven"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"eight"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"nine"</span><span class="p">,</span>
<span class="p">]</span>
<span class="nv">nameToNum</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">str</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">when</span><span class="w"> </span><span class="nv">str</span><span class="w"> </span><span class="nv">is</span>
<span class="w">        </span><span class="s">"zero"</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="s">"one"</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="s">"two"</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">2</span>
<span class="w">        </span><span class="s">"three"</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">3</span>
<span class="w">        </span><span class="s">"four"</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">4</span>
<span class="w">        </span><span class="s">"five"</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">5</span>
<span class="w">        </span><span class="s">"six"</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">6</span>
<span class="w">        </span><span class="s">"seven"</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">7</span>
<span class="w">        </span><span class="s">"eight"</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">8</span>
<span class="w">        </span><span class="s">"nine"</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">9</span>
<span class="w">        </span><span class="nv">_</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">crash</span><span class="w"> </span><span class="s">"bad"</span>

<span class="nv">ifF</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="kt">Bool</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">a</span><span class="p">)</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">a</span>
<span class="nv">ifF</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">inp</span><span class="p">,</span><span class="w"> </span><span class="nv">cond</span><span class="p">,</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">cond</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="nv">inp</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="nv">inp</span>

<span class="nv">findFirstNum</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="kt">U8</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="kt">Forward</span><span class="p">,</span><span class="w"> </span><span class="kt">Backward</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">U32</span>
<span class="nv">findFirstNum</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">str</span><span class="p">,</span><span class="w"> </span><span class="nv">forward</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">rev</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">forward</span><span class="w"> </span><span class="err">!</span><span class="nf">=</span><span class="w"> </span><span class="kt">Forward</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="nv">reverse</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">needed</span>
<span class="w">    </span><span class="nv">names</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="kt">U8</span>
<span class="w">    </span><span class="nv">names</span><span class="w"> </span><span class="nf">=</span>
<span class="w">        </span><span class="nv">numberNames</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="nf">\</span><span class="nv">name</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="nv">name</span>
<span class="w">            </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">toUtf8</span>
<span class="w">            </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">ifF</span><span class="w"> </span><span class="nv">rev</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">reverse</span>
<span class="w">    </span><span class="nv">walker</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">rev</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">walkBackwardsUntil</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">walkUntil</span>
<span class="w">    </span><span class="nv">finders</span><span class="w"> </span><span class="nf">=</span>
<span class="w">        </span><span class="nv">names</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="nf">\</span><span class="nv">name</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="nv">name</span>
<span class="w">            </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">WordFinder</span><span class="nf">.</span><span class="nv">fromList</span>
<span class="w">            </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">WordFinder</span><span class="nf">.</span><span class="nv">startSearch</span><span class="w"> </span><span class="nv">str</span>
<span class="w">    </span><span class="nv">num</span><span class="w"> </span><span class="nf">=</span>
<span class="w">        </span><span class="nv">str</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">walker</span>
<span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="nv">finders</span><span class="p">,</span><span class="w"> </span><span class="nv">idx</span><span class="nf">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nv">num</span><span class="nf">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">}</span>
<span class="w">            </span><span class="nf">\</span><span class="nv">state</span><span class="p">,</span><span class="w"> </span><span class="nv">char</span><span class="w"> </span><span class="nf">-&gt;</span>

<span class="w">                </span><span class="err">#</span><span class="w"> </span><span class="kt">BookKepping</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">index</span>
<span class="w">                </span><span class="nv">idx</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">state</span><span class="nf">.</span><span class="nv">idx</span>
<span class="w">                </span><span class="nv">nextState</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">state</span><span class="w"> </span><span class="err">&amp;</span><span class="w"> </span><span class="nv">idx</span><span class="nf">:</span><span class="w"> </span><span class="nv">idx</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span>

<span class="w">                </span><span class="kr">if</span><span class="w"> </span><span class="nv">char</span><span class="w"> </span><span class="nf">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="nv">x30</span><span class="w"> </span><span class="nf">&amp;&amp;</span><span class="w"> </span><span class="nv">char</span><span class="w"> </span><span class="nf">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="nv">x39</span><span class="w"> </span><span class="kr">then</span>
<span class="w">                    </span><span class="kt">Break</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">state</span><span class="w"> </span><span class="err">&amp;</span><span class="w"> </span><span class="nv">num</span><span class="nf">:</span><span class="w"> </span><span class="p">(</span><span class="nv">char</span><span class="w"> </span><span class="nf">-</span><span class="w"> </span><span class="mi">0</span><span class="nv">x30</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">                </span><span class="kr">else</span>
<span class="w">                    </span><span class="err">#</span><span class="w"> </span><span class="nv">step</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">our</span><span class="w"> </span><span class="nv">finders</span><span class="w"> </span><span class="nv">forward</span><span class="w"> </span><span class="nv">one</span>
<span class="w">                    </span><span class="nv">nextFinders</span><span class="w"> </span><span class="nf">=</span>
<span class="w">                        </span><span class="nv">state</span><span class="nf">.</span><span class="nv">finders</span>
<span class="w">                        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="nf">\</span><span class="nv">finder</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">                            </span><span class="kt">WordFinder</span><span class="nf">.</span><span class="nv">nextStep</span><span class="w"> </span><span class="nv">finder</span><span class="w"> </span><span class="nv">char</span><span class="w"> </span><span class="nv">idx</span>

<span class="w">                    </span><span class="err">#</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">matched</span>
<span class="w">                    </span><span class="nv">matched</span><span class="w"> </span><span class="nf">=</span>
<span class="w">                        </span><span class="nv">nextFinders</span>
<span class="w">                        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">walkUntil</span><span class="w"> </span><span class="p">(</span><span class="kt">Err</span><span class="w"> </span><span class="kt">NotFound</span><span class="p">)</span><span class="w"> </span><span class="nf">\</span><span class="nv">state2</span><span class="p">,</span><span class="w"> </span><span class="nv">finder</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">                            </span><span class="nv">when</span><span class="w"> </span><span class="kt">WordFinder</span><span class="nf">.</span><span class="nv">firstMatch</span><span class="w"> </span><span class="nv">finder</span><span class="w"> </span><span class="nv">is</span>
<span class="w">                                </span><span class="kt">Ok</span><span class="w"> </span><span class="nv">_start</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Break</span><span class="w"> </span><span class="p">(</span><span class="kt">Ok</span><span class="w"> </span><span class="p">(</span><span class="nv">finder</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">WordFinder</span><span class="nf">.</span><span class="nv">searchingFor</span><span class="p">))</span>
<span class="w">                                </span><span class="nv">_</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Continue</span><span class="w"> </span><span class="nv">state2</span>
<span class="w">                    </span><span class="err">#</span><span class="w"> </span><span class="kt">If</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">got</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">return</span><span class="w"> </span><span class="nv">early</span>
<span class="w">                    </span><span class="nv">when</span><span class="w"> </span><span class="nv">matched</span><span class="w"> </span><span class="nv">is</span>
<span class="w">                        </span><span class="kt">Ok</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">                            </span><span class="nv">matchNum</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">ifF</span><span class="w"> </span><span class="nv">rev</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">reverse</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">fromUtf8</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="nf">.</span><span class="nv">withDefault</span><span class="w"> </span><span class="p">(</span><span class="s">""</span><span class="p">)</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">nameToNum</span>

<span class="w">                            </span><span class="kt">Break</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nv">state</span><span class="w"> </span><span class="err">&amp;</span><span class="w"> </span><span class="nv">num</span><span class="nf">:</span><span class="w"> </span><span class="nv">matchNum</span><span class="w"> </span><span class="p">})</span>

<span class="w">                        </span><span class="nv">_</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Continue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">nextState</span><span class="w"> </span><span class="err">&amp;</span><span class="w"> </span><span class="nv">finders</span><span class="nf">:</span><span class="w"> </span><span class="nv">nextFinders</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nf">.</span><span class="nv">num</span>
<span class="w">    </span><span class="nv">num</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">toU32</span>

<span class="nv">getPair</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">inp</span><span class="w"> </span><span class="nf">-&gt;</span>

<span class="w">    </span><span class="nv">inp</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="nf">\</span><span class="nv">str</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">        </span><span class="nv">strList</span><span class="w"> </span><span class="nf">=</span>
<span class="w">            </span><span class="nv">str</span>
<span class="w">            </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">toUtf8</span>
<span class="w">        </span><span class="p">(</span><span class="nv">strList</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">findFirstNum</span><span class="w"> </span><span class="kt">Forward</span><span class="p">,</span><span class="w"> </span><span class="nv">strList</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">findFirstNum</span><span class="w"> </span><span class="kt">Backward</span><span class="p">)</span>

<span class="nv">pairToNum</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nf">*</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span>

<span class="nv">parse</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">str</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">str</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">split</span><span class="w"> </span><span class="s">"</span><span class="se">\n</span><span class="s">"</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">getPair</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="nv">pairToNum</span>
</code></pre></div>



<a name="411104484"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411104484" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411104484">(Jan 04 2024 at 00:38)</a>:</h4>
<p>I have a whole other chunk of code that implements a simple "wordfinder" that just steps along looking for matches for a specific string and keeps track of any partial matches as it goes.<br>
but i need to iterate through both forward and backwards, so the words I'm matching and the the output needs to be reversed</p>



<a name="411109765"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411109765" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411109765">(Jan 04 2024 at 01:36)</a>:</h4>
<p>ah! So considering <code>ifF</code> is always passed <code>List.reverse</code>, personally I'd write this function:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">reverseIf</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="kt">Bool</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nv">a</span>
<span class="nv">reverseIf</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">list</span><span class="p">,</span><span class="w"> </span><span class="nv">shouldReverse</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">shouldReverse</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="nv">list</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">reverse</span><span class="w"> </span><span class="nv">list</span>
</code></pre></div>



<a name="411109854"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411109854" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411109854">(Jan 04 2024 at 01:37)</a>:</h4>
<p>then the two call sites would look like this:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">name</span>
<span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">toUtf8</span>
<span class="nf">|&gt;</span><span class="w"> </span><span class="nv">reverseIf</span><span class="w"> </span><span class="nv">rev</span>
</code></pre></div>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">matchNum</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">reverseIf</span><span class="w"> </span><span class="nv">rev</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">fromUtf8</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="nf">.</span><span class="nv">withDefault</span><span class="w"> </span><span class="p">(</span><span class="s">""</span><span class="p">)</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">nameToNum</span>
</code></pre></div>



<a name="411109963"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411109963" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411109963">(Jan 04 2024 at 01:39)</a>:</h4>
<p>I like how self-descriptive <code>|&gt; reverseIf rev</code> is <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="411110531"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411110531" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411110531">(Jan 04 2024 at 01:47)</a>:</h4>
<p>That's fair, I suppose in almost any case you would want an Id function you could probably make a more descriptive wrapper. </p>
<p>I will take a look through some of my other functional code and see where I've used the "Id" function to see if there are any other use cases that would warrant it more. </p>
<p>I do think mostly it would be cases where you are returning one of a few different transformation functions and you sometimes want to just do nothing</p>



<a name="411111775"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411111775" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elias Mulhall <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411111775">(Jan 04 2024 at 02:02)</a>:</h4>
<p>I've used <code>Result.keepOks \a -&gt; a</code> pretty frequently</p>



<a name="411112821"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411112821" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411112821">(Jan 04 2024 at 02:11)</a>:</h4>
<p>That feels like a case of maybe bad naming on our part. Cause it really should be <code>List.mapAndKeepOks</code> with a separate <code>List.keepOks</code></p>



<a name="411113286"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411113286" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411113286">(Jan 04 2024 at 02:17)</a>:</h4>
<p>As a note on that, I'm a big fan of using the name List.choose for that functionality</p>



<a name="411113561"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411113561" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411113561">(Jan 04 2024 at 02:21)</a>:</h4>
<p>I guess I certainly think that mapAndKeep crosses a line of verbosity</p>



<a name="411113705"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411113705" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411113705">(Jan 04 2024 at 02:23)</a>:</h4>
<p>Yeah, I don't think <code>mapAndKeep</code> is a good name it is just being honest about functionality. I think a more common name is <code>filterMap</code>, right?</p>



<a name="411113846"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411113846" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411113846">(Jan 04 2024 at 02:25)</a>:</h4>
<p>yeah it's basically filterMap except it seemed weird to have one for <code>Ok</code> but not <code>Err</code></p>



<a name="411113887"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411113887" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411113887">(Jan 04 2024 at 02:25)</a>:</h4>
<p>since we have <code>keepIf</code> and <code>dropIf</code></p>



<a name="411113967"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411113967" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411113967">(Jan 04 2024 at 02:26)</a>:</h4>
<p>also for autocomplete discoverability there's an argument for having it start with <code>List.map____</code></p>



<a name="411113978"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411113978" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411113978">(Jan 04 2024 at 02:26)</a>:</h4>
<p>so if you start typing that it comes up in autocomplete</p>



<a name="411113990"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411113990" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411113990">(Jan 04 2024 at 02:26)</a>:</h4>
<p>a lot of Roc function names are designed with autocomplete discoverability in mind</p>



<a name="411114110"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411114110" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411114110">(Jan 04 2024 at 02:28)</a>:</h4>
<p>Is performance the only reason not to have it as a separate <code>List.map |&gt; List.keepOks</code> with <code>keepOks</code> being literal and essentially defaulting to the identity version?</p>
<p>Long term if we had automatic under the hood iterators would that fix the perf as well</p>



<a name="411114120"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411114120" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411114120">(Jan 04 2024 at 02:28)</a>:</h4>
<p>That's pretty compelling tbh.<br>
Maybe just "mapKeep"</p>



<a name="411114464"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411114464" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411114464">(Jan 04 2024 at 02:32)</a>:</h4>
<p>Would it be possible to go fully generic and make a function like <code>List.keep Ok mylist</code> ?</p>



<a name="411114488"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411114488" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411114488">(Jan 04 2024 at 02:32)</a>:</h4>
<p>That only keeps items with that tag and returns the tag's content?</p>



<a name="411114950"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411114950" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411114950">(Jan 04 2024 at 02:37)</a>:</h4>
<p>See a pattern that's come up a few times for me is</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">mylist</span><span class="nf">=</span><span class="w"> </span><span class="p">[</span><span class="kt">TagA</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="kt">TagB</span><span class="w"> </span><span class="s">"hi"</span><span class="p">,</span><span class="w"> </span><span class="nf">..</span><span class="nv">etc</span><span class="p">]</span>
<span class="nv">mylist</span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="kt">KeepOks</span><span class="w"> </span><span class="nf">\</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">  </span><span class="nv">when</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">is</span>
<span class="w">     </span><span class="kt">TagA</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Ok</span><span class="w"> </span><span class="nv">a</span>
<span class="w">      </span><span class="nv">_</span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Err</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div>
<p>And that fuction would make it way easier<br>
(Wrote this on mobile sorry if it's not quite right <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>)</p>



<a name="411118048"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411118048" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411118048">(Jan 04 2024 at 03:10)</a>:</h4>
<p>Something like that should work, but only if that tag contains only a single field</p>



<a name="411118093"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411118093" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411118093">(Jan 04 2024 at 03:11)</a>:</h4>
<p>Hmm....though you can't pattern match on variables, so nvm</p>



<a name="411118305"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411118305" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411118305">(Jan 04 2024 at 03:13)</a>:</h4>
<p>Yeah that was my thought, you guys don't have some "magic compiler functions" that would let you check if a variable is a specific tag and then dump out the contents of that tag?</p>



<a name="411118474"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411118474" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411118474">(Jan 04 2024 at 03:14)</a>:</h4>
<p>This is probably a place where you either need reflection, some kind of inbuilt trickery, or macros</p>



<a name="411118618"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411118618" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411118618">(Jan 04 2024 at 03:15)</a>:</h4>
<p>might not feel ergonomic, but one idea would be:</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="kt">List</span><span class="o">.</span><span class="n">keepMap</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">isOk</span><span class="w"> </span><span class="nf">\</span><span class="n">elem</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="o">...</span>
</code></pre></div>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="kt">List</span><span class="o">.</span><span class="n">dropMap</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">isOk</span><span class="w"> </span><span class="nf">\</span><span class="n">elem</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="o">...</span>
</code></pre></div>



<a name="411118721"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411118721" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411118721">(Jan 04 2024 at 03:16)</a>:</h4>
<p>eh, but then you end up with all the <code>Ok</code> wrappers still there</p>



<a name="411118778"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411118778" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411118778">(Jan 04 2024 at 03:17)</a>:</h4>
<p>Or you have to write custom ismytag functions for other tags</p>



<a name="411118880"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411118880" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411118880">(Jan 04 2024 at 03:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/383402-API-Design/topic/Id.20function/near/411114110">said</a>:</p>
<blockquote>
<p>Is performance the only reason not to have it as a separate <code>List.map |&gt; List.keepOks</code> with <code>keepOks</code> being literal and essentially defaulting to the identity version?<br>
Long term if we had automatic under the hood iterators would that fix the perf as well</p>
</blockquote>
<p>perf is one reason, but also it can be convenient when doing things like</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="kt">List</span><span class="nf">.</span><span class="nv">filterMap</span><span class="w"> </span><span class="nv">strings</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">fromStr</span>
</code></pre></div>



<a name="411121573"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411121573" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411121573">(Jan 04 2024 at 03:43)</a>:</h4>
<p>Ah, for sure</p>



<a name="411216288"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411216288" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411216288">(Jan 04 2024 at 16:00)</a>:</h4>
<p>Though if we had the working automatic iterators (again thinking long term) that would be equivalent to:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="nv">strings</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">fromStr</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">keepOks</span>
</code></pre></div>
<p>Not much more verbose and theoretically would be same perf.</p>



<a name="411224963"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/383402-API%20design/topic/Id%20function/near/411224963" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/383402-API-design/topic/Id.20function.html#411224963">(Jan 04 2024 at 16:49)</a>:</h4>
<p>true!</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>