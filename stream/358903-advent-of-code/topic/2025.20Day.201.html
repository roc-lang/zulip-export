<html>
<head><meta charset="utf-8"><title>2025 Day 1 · advent of code · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/index.html">advent of code</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html">2025 Day 1</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="561910719"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/561910719" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#561910719">(Dec 04 2025 at 15:37)</a>:</h4>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="n">app</span><span class="w"> </span><span class="o">[</span><span class="n">main!</span><span class="o">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="ss">pf</span><span class="p">:</span><span class="w"> </span><span class="n">platform</span><span class="w"> </span><span class="s2">"../test/fx/platform/main.roc"</span><span class="w"> </span><span class="p">}</span>

<span class="n">import</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Stdout</span>

<span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">\\</span><span class="no">L68</span>
<span class="w">        </span><span class="p">\\</span><span class="no">L30</span>
<span class="w">        </span><span class="p">\\</span><span class="no">R48</span>
<span class="w">        </span><span class="p">\\</span><span class="no">L5</span>
<span class="w">        </span><span class="p">\\</span><span class="no">R60</span>
<span class="w">        </span><span class="p">\\</span><span class="no">L55</span>
<span class="w">        </span><span class="p">\\</span><span class="no">L1</span>
<span class="w">        </span><span class="p">\\</span><span class="no">L99</span>
<span class="w">        </span><span class="p">\\</span><span class="no">R14</span>
<span class="w">        </span><span class="p">\\</span><span class="no">L82</span>

<span class="n">main!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="o">.</span><span class="n">split_on</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="w">    </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">part1</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

<span class="w">    </span><span class="no">Stdout</span><span class="o">.</span><span class="n">line!</span><span class="p">(</span><span class="n">count</span><span class="o">.</span><span class="n">to_str</span><span class="p">())</span>
<span class="p">}</span>

<span class="c1"># not sure why =&gt; is required</span>
<span class="n">part1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="no">Str</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">U64</span>
<span class="n">part1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">lines</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="vg">$pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="vg">$count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">u8_line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">line</span><span class="o">.</span><span class="n">to_utf8</span><span class="p">()</span>
<span class="w">        </span><span class="n">match</span><span class="w"> </span><span class="n">u8_line</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="o">[</span><span class="s1">'L'</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="n">a</span><span class="o">]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i64_from_ascii_digits</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="w">                </span><span class="vg">$pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="vg">$pos</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="o">.</span><span class="n">mod_by</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="vg">$pos</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="vg">$count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="o">[</span><span class="s1">'R'</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="n">a</span><span class="o">]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i64_from_ascii_digits</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="w">                </span><span class="vg">$pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="vg">$pos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="o">.</span><span class="n">mod_by</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="vg">$pos</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="vg">$count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">dbg</span><span class="w"> </span><span class="s2">"Error"</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="vg">$count</span>
<span class="p">}</span>

<span class="n">i64_from_ascii_digits</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="no">U8</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">I64</span>
<span class="n">i64_from_ascii_digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">ascii</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ascii</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">b</span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="s1">'0'</span><span class="p">)</span><span class="o">.</span><span class="n">to_i64</span><span class="p">())</span><span class="o">.</span><span class="n">fold</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">|</span><span class="n">n</span><span class="p">,</span><span class="n">b</span><span class="o">|</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>This runs with the example input <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span>.<br>
But for the actual puzzle input I get a <code>Roc crashed: Error evaluating from shared memory: StackOverflow</code> after about 15 seconds (current main, compiled with -Doptimize=ReleaseFast)</p>



<a name="561911253"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/561911253" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#561911253">(Dec 04 2025 at 15:39)</a>:</h4>
<p>I'll try bumping the default stack size <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="561911959"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/561911959" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#561911959">(Dec 04 2025 at 15:41)</a>:</h4>
<p>Small optimization, and now it runs with the puzzle input, I will have a look at part 2 now </p>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="n">i64_from_ascii_digits</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="no">U8</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">I64</span>
<span class="n">i64_from_ascii_digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">ascii</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ascii</span><span class="o">.</span><span class="n">fold</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">|</span><span class="n">n</span><span class="p">,</span><span class="n">b</span><span class="o">|</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">((</span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="s1">'0'</span><span class="p">)</span><span class="o">.</span><span class="n">to_i64</span><span class="p">()))</span>
<span class="p">}</span>
</code></pre></div>



<a name="561912213"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/561912213" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#561912213">(Dec 04 2025 at 15:42)</a>:</h4>
<p>I saw that map is currently doing a fold an creating a new list, so just one fold is much better :-)</p>



<a name="561914983"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/561914983" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#561914983">(Dec 04 2025 at 15:54)</a>:</h4>
<p>nice! I have a PR which (among other things) bumps default stack size from 8MB to 64MB. We can certainly go higher than that if necessary.</p>



<a name="561921694"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/561921694" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michał Kowieski <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#561921694">(Dec 04 2025 at 16:20)</a>:</h4>
<p>Does Roc have while loop? I wonder if I can read lines from Stdin until the line is empty without using recursion?</p>



<a name="561922480"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/561922480" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#561922480">(Dec 04 2025 at 16:23)</a>:</h4>
<p>Yes you can do <code>while (True)</code>. But there is a bug in the <code>Stdin.line!</code>that discards the rest of it's internal buffer after the first newline if you pipe in a file, that I wanted to report but forgot.</p>



<a name="562620038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/562620038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#562620038">(Dec 09 2025 at 08:14)</a>:</h4>
<p>I'm starting a list of things that I'm missing so we can check whether they are accidentally broken, known issues or not yet implemented:</p>
<ul>
<li>(being fixed) <a href="#narrow/channel/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F/with/562616789"><code>dbg</code> not working</a> [It's a platform bug.]</li>
<li>(solved) <code>Str.to_u32()</code> is not found. (<code>Str.to_u32 does not exist. Str is in scope, but it has no associated to_u32.</code>) [It's U32.from_str() instead.]</li>
<li>(?) <code>List.keep_oks()</code> or <code>List.filter_map()</code> missing in new compiler.</li>
</ul>



<a name="562620398"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/562620398" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#562620398">(Dec 09 2025 at 08:16)</a>:</h4>
<p>I guess <code>Str.to_u32()</code> missing means it does not really make sense for me to proceed right now, but I can already see the language and like it very much!</p>



<a name="562620617"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/562620617" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#562620617">(Dec 09 2025 at 08:18)</a>:</h4>
<p>You have <code>U32.from_str</code>. The list of available builtins are in that file <a href="https://github.com/roc-lang/roc/blob/main/src/build/roc/Builtin.roc">https://github.com/roc-lang/roc/blob/main/src/build/roc/Builtin.roc</a></p>



<a name="562635153"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/562635153" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#562635153">(Dec 09 2025 at 09:32)</a>:</h4>
<p>I made <a href="https://github.com/roc-lang/roc/issues/8596">#8596</a> to provide a useful tip when using <code>Str.to_u32()</code>.</p>



<a name="562636093"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/562636093" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#562636093">(Dec 09 2025 at 09:37)</a>:</h4>
<p>Oh, thanks! So I'm probably looking at the old docs on the website when I thought those were the new. I'll look for where to find the new docs.</p>



<a name="562636439"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/562636439" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#562636439">(Dec 09 2025 at 09:39)</a>:</h4>
<p>We don't have new docs yet <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> but you can check this file for now: <a href="https://github.com/roc-lang/roc/blob/main/src/build/roc/Builtin.roc">https://github.com/roc-lang/roc/blob/main/src/build/roc/Builtin.roc</a></p>



<a name="562636922"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/562636922" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#562636922">(Dec 09 2025 at 09:41)</a>:</h4>
<p>That's fine and what I would have looked for, thanks!</p>



<a name="562650211"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/562650211" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#562650211">(Dec 09 2025 at 10:43)</a>:</h4>
<p>Ok, it's rough, just as I was warned. Hopefully this helps somehow:</p>
<div class="codehilite"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.4/6XA8JLWhmG1FSgb8GxPjBs9cGrtRqopohR3KAHYo722z.tar.zst&quot; }

import pf.Stdout
import pf.Stdin

main! = |_args| {
    parsed = parse_input(puzzle_input)
    output_n = parsed
        #.map(|instruction| instruction.ok_or(0).to_str())
        #.map(|n| n.to_str())
    #Stdout.line!(output)

    # The first `map` above fails with `Roc crashed: Builtin.Str does not implement ok_or`, but the following works, proving that the elements are actually Try, not Str.
    for n in output_n {
        Stdout.line!(n.ok_or(0).to_str())
    }


    Stdout.line!(&quot;stdout&quot;)
    Ok({})
}

parse_input = |input| {
    input
        .split_on(&quot;\n&quot;)
        .drop_if(|line| line.is_empty())
        .map(|line| {
            if line.starts_with(&quot;R&quot;) {
                U32.from_str(line.drop_prefix(&quot;R&quot;))
            } else if line.starts_with(&quot;L&quot;) {
                U32.from_str(line.drop_prefix(&quot;L&quot;))
            } else {
                Err(InvalidLine(line))
            }
        })
        # If I uncomment the following line, I get a `Roc crashed: Error evaluating from shared memory: InvalidMethodReceiver`.
        #.keep_if(|result| result.is_ok())
        #.map(|result| result.ok_or(0)
}

puzzle_input = &quot;R21\nR37\nL39\nL11&quot;
</code></pre></div>
<p>There are two places where I've added comments indicating the errors I'm running into. Hopefully, it makes sense. Otherwise, please ask. :)</p>



<a name="562668283"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%201/near/562668283" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.201.html#562668283">(Dec 09 2025 at 12:13)</a>:</h4>
<p>A message was moved from this topic to <a class="stream-topic" data-stream-id="304641" href="/#narrow/channel/304641-ideas/topic/streams.20API/with/562668281">#ideas &gt; streams API</a> by <span class="user-mention silent" data-user-id="361169">Anton</span>.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>