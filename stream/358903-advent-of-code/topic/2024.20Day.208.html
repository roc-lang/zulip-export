<html>
<head><meta charset="utf-8"><title>2024 Day 8 · advent of code · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/index.html">advent of code</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html">2024 Day 8</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="486746757"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/486746757" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oskar Hahn <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#486746757">(Dec 08 2024 at 07:59)</a>:</h4>
<p>Here is mine:  <a href="https://github.com/ostcar/aoc2024/blob/main/day08.roc">https://github.com/ostcar/aoc2024/blob/main/day08.roc</a></p>
<p>part1 in 1.747ms<br>
part2 in 4.987ms</p>
<p>It took me some time, because I did all the bugs that are even possible.</p>
<p>One of them was this</p>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="roc"><pre><span></span><code>input
        |&gt; Str.splitOn "\n"
        |&gt; List.walkWithIndex (Dict.empty {}) \acc, line, row -&gt;
            line
            |&gt; Str.toUtf8
            |&gt; List.walkWithIndex acc \acc2, char, col -&gt;
                if char == '.' then
                    acc
                    else

                acc2
                |&gt; Dict.update char \value -&gt;
                    value
                    |&gt; Result.withDefault []
                    |&gt; List.append { row: row |&gt; Num.toI64, col: col |&gt; Num.toI64 }
                    |&gt; Ok
</code></pre></div>
</div></div>
<p>Can you see it? It took me around have of an hour. Hint: This bug will not happen anymore, when shadowing is allowed.</p>



<a name="486747423"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/486747423" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#486747423">(Dec 08 2024 at 08:09)</a>:</h4>
<p>The fun of number suffixes</p>



<a name="486747521"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/486747521" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#486747521">(Dec 08 2024 at 08:10)</a>:</h4>
<p>I occasionally pulled certain lambdas into separate top level functions to avoid naming issues like that.</p>



<a name="486755959"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/486755959" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Camarasa <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#486755959">(Dec 08 2024 at 10:14)</a>:</h4>
<p>Today went smoothly, getting more and more confortable with the standard library :) <br>
<a href="https://github.com/RobinCamarasa/Advent-of-code/blob/master/2024/day08/RobinCamarasa/main.roc">https://github.com/RobinCamarasa/Advent-of-code/blob/master/2024/day08/RobinCamarasa/main.roc</a></p>



<a name="486756595"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/486756595" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#486756595">(Dec 08 2024 at 10:22)</a>:</h4>
<p>Here's my solution... only made it as far as part 1 so far.</p>
<p><a href="https://github.com/lukewilliamboswell/aoc/blob/main/2024/08.roc">https://github.com/lukewilliamboswell/aoc/blob/main/2024/08.roc</a></p>
<div class="codehilite"><pre><span></span><code>TIMING:
READING INPUT:  &lt;1ms
SOLVING PART 1: 2ms
</code></pre></div>



<a name="486757785"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/486757785" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nicola Peduzzi <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#486757785">(Dec 08 2024 at 10:37)</a>:</h4>
<p>Done for me too <a href="https://github.com/thenikso/advent-of-code-2024-roc/blob/main/08.roc">https://github.com/thenikso/advent-of-code-2024-roc/blob/main/08.roc</a></p>
<div class="codehilite"><pre><span></span><code>Day 08 part 1: (Ok ...) [1ms]
Day 08 part 2: (Ok ...) [1ms]
</code></pre></div>
<p>Using again the excellent  <a href="https://github.com/mulias/roc-array2d">Array2D</a></p>



<a name="486798327"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/486798327" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#486798327">(Dec 08 2024 at 19:55)</a>:</h4>
<p>Just about to start on this.  Can someone explain this sentence from Part 1?</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>In particular, an antinode occurs at any point that is perfectly in line with two antennas of the same frequency - but only when one of the antennas is twice as far away as the other
</code></pre></div>
<p>Specifically that last clause</p>



<a name="486798382"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/486798382" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#486798382">(Dec 08 2024 at 19:55)</a>:</h4>
<p>Looking at the examples, it doesn't seem to really mean anything?</p>



<a name="486798837"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/486798837" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Stanley <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#486798837">(Dec 08 2024 at 20:02)</a>:</h4>
<p>I think it means: an antinode exists at a point directly in line with two antennas and as far from the nearest antenna as they are from each other. So if two antennas are due north/south and 2 rows apart, an antinode will occur at the point due north and 2 rows above the northern one, and due south and 2 rows below the southern one.</p>



<a name="486801228"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/486801228" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#486801228">(Dec 08 2024 at 20:34)</a>:</h4>
<p>Thanks. That’s what I deduced from the example, but I still can’t parse that sentence to mean that <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="486801273"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/486801273" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Stanley <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#486801273">(Dec 08 2024 at 20:35)</a>:</h4>
<p>I don't disagree! It's a very confused way of explaining.</p>



<a name="487022180"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487022180" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487022180">(Dec 09 2024 at 15:18)</a>:</h4>
<p>Sometimes you add debugger statements, and they lead you down an hour long rabbit hole before you figure out that the output is not what you think <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="487022425"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487022425" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487022425">(Dec 09 2024 at 15:19)</a>:</h4>
<p><a href="https://github.com/gamebox/aoc-2024/tree/main/day8">https://github.com/gamebox/aoc-2024/tree/main/day8</a></p>



<a name="487023975"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487023975" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487023975">(Dec 09 2024 at 15:25)</a>:</h4>
<p>This instrumentation tells me both parts take less than 1ns, which does not seem right...</p>
<div class="codehilite" data-code-language="roc"><pre><span></span><code>main =
    now = Utc.now! {}
    p1Start = Utc.toNanosSinceEpoch now
    total = getTotal realInput
    p1End =
        Utc.now! {}
        |&gt; Utc.toNanosSinceEpoch
    part2 = getPart2Total realInput
    p2End =
        Utc.now! {}
        |&gt; Utc.toNanosSinceEpoch
    Stdout.line! "There are $(Num.toStr total) obstacles, and $(Num.toStr part2) with harmonics."
    Stdout.line! "Part 1: $(Num.toStr (p1End - p1Start))ns"
    Stdout.line! "Part 2: $(Num.toStr (p2End - p1End))ns"
</code></pre></div>



<a name="487024009"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487024009" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487024009">(Dec 09 2024 at 15:25)</a>:</h4>
<p>Is that expected?</p>



<a name="487036753"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487036753" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487036753">(Dec 09 2024 at 16:08)</a>:</h4>
<p>I don't see anything wrong with the calculation, you can paste your solution in <a href="https://github.com/lukewilliamboswell/aoc-template">Luke's aoc tempplate</a> to compare measurements</p>



<a name="487070332"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487070332" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487070332">(Dec 09 2024 at 18:36)</a>:</h4>
<p><span class="user-mention" data-user-id="781658">@Anthony Bullard</span> this is testing with the input.txt in the repo?</p>



<a name="487071539"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487071539" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487071539">(Dec 09 2024 at 18:43)</a>:</h4>
<p>Yeah with optimized build</p>



<a name="487071592"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487071592" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487071592">(Dec 09 2024 at 18:43)</a>:</h4>
<p>I definitely did NOT build my solution with perf in mind</p>



<a name="487072109"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487072109" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487072109">(Dec 09 2024 at 18:46)</a>:</h4>
<blockquote>
<p><code>Utc.toNanosSinceEpoch</code></p>
</blockquote>
<p>At least for me on mac, the timer we are based off of is only timing in microseconds. I either see:</p>
<div class="codehilite"><pre><span></span><code>There are 305 obstacles, and 1150 with harmonics.
Part 1: 0ns
Part 2: 0ns
</code></pre></div>
<p>or:</p>
<div class="codehilite"><pre><span></span><code>There are 305 obstacles, and 1150 with harmonics.
Part 1: 1000ns
Part 2: 0ns
</code></pre></div>



<a name="487072203"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487072203" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487072203">(Dec 09 2024 at 18:46)</a>:</h4>
<p>Last 3 digits of printing out the nanoseconds is always zero</p>



<a name="487072227"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487072227" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487072227">(Dec 09 2024 at 18:46)</a>:</h4>
<p>That's what I was thinking</p>



<a name="487072257"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487072257" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487072257">(Dec 09 2024 at 18:46)</a>:</h4>
<p>So no greater precision than ms</p>



<a name="487072333"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487072333" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487072333">(Dec 09 2024 at 18:47)</a>:</h4>
<p>I'm also on Mac</p>



<a name="487072390"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487072390" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487072390">(Dec 09 2024 at 18:47)</a>:</h4>
<p>us, not ms, but yeah</p>



<a name="487072393"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487072393" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487072393">(Dec 09 2024 at 18:47)</a>:</h4>
<p>Makes sense, thanks for verifying that</p>



<a name="487072488"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487072488" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487072488">(Dec 09 2024 at 18:48)</a>:</h4>
<p>still runs within a microsecond which is quite fast for aoc in general</p>



<a name="487072556"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487072556" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487072556">(Dec 09 2024 at 18:48)</a>:</h4>
<p>Yeah, duh us</p>



<a name="487072673"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487072673" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487072673">(Dec 09 2024 at 18:49)</a>:</h4>
<p>Fast is nice for AOC, but never my first goal.  Especially in a language I'm still learning</p>



<a name="487075084"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487075084" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487075084">(Dec 09 2024 at 19:00)</a>:</h4>
<p>Ah yeah, utc.time is based on <a href="https://doc.rust-lang.org/std/time/struct.SystemTime.html">SystemTime</a>, which is not meant for measuring time elapsed. It is meant getting the current real world time. We should be basing time measurements on <a href="https://doc.rust-lang.org/std/time/struct.Instant.html">Instant</a>.</p>
<p>With instant (I think wired correctly, but it is adhoc to send it through the utc.time api), I see:</p>
<div class="codehilite"><pre><span></span><code>Part 1: 2625ns
Part 2: 84ns
</code></pre></div>



<a name="487075194"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487075194" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487075194">(Dec 09 2024 at 19:01)</a>:</h4>
<p>So we may want a different timer tool in basic cli for differential time measurements.</p>



<a name="487075259"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487075259" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487075259">(Dec 09 2024 at 19:01)</a>:</h4>
<p>System time isn't even guaranteed to be monotonic (it can go backwards)</p>



<a name="487075844"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487075844" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487075844">(Dec 09 2024 at 19:04)</a>:</h4>
<p>Actually, sorry, this is correct timing. The early one had init issues (first one was measuring locking and initializing an OnceLock in rust):</p>
<div class="codehilite"><pre><span></span><code>Part 1: 84ns
Part 2: 83ns
</code></pre></div>



<a name="487080622"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487080622" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487080622">(Dec 09 2024 at 19:27)</a>:</h4>
<p>Thanks, seems like that should definitely be in the basic-cli platform</p>



<a name="487080892"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487080892" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487080892">(Dec 09 2024 at 19:28)</a>:</h4>
<p>WHich reminds me ... every been any talk of working out a common interface for common types across platforms - like a POSIX for Roc platforms ?  Not mandatory, but most non-client oriented platforms would strive to implement it (same interface in Roc that is)</p>



<a name="487080980"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487080980" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487080980">(Dec 09 2024 at 19:29)</a>:</h4>
<p>That way if I use File in basic-cli, I could expect to find the same API available in basic-webserver?</p>



<a name="487082092"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487082092" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487082092">(Dec 09 2024 at 19:34)</a>:</h4>
<p>It has been discussed a little. I have pushed for the idea of interfaces a few times. I think with static dispatch, we will get a solution (though not sure if it will be enough)</p>



<a name="487095448"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487095448" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487095448">(Dec 09 2024 at 20:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="781658">Anthony Bullard</span> <a href="#narrow/channel/358903-advent-of-code/topic/2024.20Day.208/near/487080892">said</a>:</p>
<blockquote>
<p>WHich reminds me ... every been any talk of working out a common interface for common types across platforms - like a POSIX for Roc platforms ?  Not mandatory, but most non-client oriented platforms would strive to implement it (same interface in Roc that is)</p>
</blockquote>
<p>Richard has done a lot of design work on the path package, just needs implementation  </p>
<p><a href="https://github.com/roc-lang/path">https://github.com/roc-lang/path</a></p>



<a name="487095660"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487095660" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487095660">(Dec 09 2024 at 20:49)</a>:</h4>
<p>He gave a presentation on it in this meetup <a href="#narrow/channel/303057-gatherings/topic/Roc.20Online.20Meetup.20Aug.202024/near/464907794">https://roc.zulipchat.com/#narrow/channel/303057-gatherings/topic/Roc.20Online.20Meetup.20Aug.202024/near/464907794</a></p>



<a name="487183716"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487183716" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487183716">(Dec 10 2024 at 08:03)</a>:</h4>
<p>So we definitely have a lowering bug with Task <code>!</code> and <code>|&gt;</code></p>
<div class="codehilite"><pre><span></span><code>main =
    now = Utc.now! {}
    p1Start = Utc.toNanosSinceEpoch now
    total = getTotal realInput
    p1End =
        Utc.now! {}
        |&gt; Utc.toNanosSinceEpoch
    part2 = getPart2Total realInput
    p2End =
        Utc.now! {}
        |&gt; Utc.toNanosSinceEpoch
    Stdout.line! &quot;There are $(Num.toStr total) obstacles, and $(Num.toStr part2) with harmonics.&quot;
    Stdout.line! &quot;Part 1: $(Num.toStr (p1End - p1Start))ns&quot;
    Stdout.line! &quot;Part 2: $(Num.toStr (p2End - p1End))ns&quot;
</code></pre></div>
<p>This gives garbage times as if all of the <code>Utc.now!</code> are called back to back.<br>
If you remove the <code>|&gt;</code> and makes separate variables, the timings become reasonable.</p>



<a name="487183991"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487183991" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487183991">(Dec 10 2024 at 08:05)</a>:</h4>
<p>This should work:</p>
<div class="codehilite"><pre><span></span><code>main =
    now = Utc.now! {}
    p1Start = Utc.toNanosSinceEpoch now
    total = getTotal realInput
    p1EndTime = Utc.now! {}
    p1End = Utc.toNanosSinceEpoch p1EndTime
    part2 = getPart2Total realInput
    p2EndTime = Utc.now! {}
    p2End = Utc.toNanosSinceEpoch p2EndTime
    Stdout.line! &quot;There are $(Num.toStr total) obstacles, and $(Num.toStr part2) with harmonics.&quot;
    Stdout.line! &quot;Part 1: $(Num.toStr (p1End - p1Start))ns&quot;
    Stdout.line! &quot;Part 2: $(Num.toStr (p2End - p1End))ns&quot;
</code></pre></div>



<a name="487184084"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/487184084" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#487184084">(Dec 10 2024 at 08:06)</a>:</h4>
<p>Not sure if this is a bug worth fixing cause it may go away with <code>Task</code>, but we should double check it isn't broken with purity inference.</p>



<a name="488157444"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/488157444" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#488157444">(Dec 11 2024 at 18:08)</a>:</h4>
<p>CC: <span class="user-mention" data-user-id="781658">@Anthony Bullard</span> roc bug breaking timing and a workaround</p>



<a name="488157634"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%208/near/488157634" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.208.html#488157634">(Dec 11 2024 at 18:09)</a>:</h4>
<p>Thanks for looking into that <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span></p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>