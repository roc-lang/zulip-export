<html>
<head><meta charset="utf-8"><title>2025 Day 2 · advent of code · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/index.html">advent of code</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html">2025 Day 2</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="561987350"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/561987350" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#561987350">(Dec 04 2025 at 22:42)</a>:</h4>
<p>With the recent fixes, and the incoming one in <a href="https://github.com/roc-lang/roc/pull/8573">https://github.com/roc-lang/roc/pull/8573</a>, I now have a correct AoC day 2!<br>
Well almost ^^. Actually it’s correct with the demo short inputs, but I’m getting a stack overflow with the real inputs. But I’m pretty confident that it would be correct without the stack overflow because I’m getting the correct results for the demo values and the code is essentially the same as my valid Julia solution.</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>❯<span class="w"> </span>roc<span class="w"> </span>day02.roc
Part<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>demo<span class="o">)</span>:<span class="w"> </span><span class="m">1227775554</span>
Part<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">(</span>demo<span class="o">)</span>:<span class="w"> </span><span class="m">4174379265</span>
</code></pre></div>
<p>The code is here for those interested:</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>AoC 2025 day 2</p>
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="n">app</span><span class="w"> </span><span class="o">[</span><span class="n">main!</span><span class="o">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="ss">pf</span><span class="p">:</span><span class="w"> </span><span class="n">platform</span><span class="w"> </span><span class="s2">"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.1-test/7iDKk44no3gF9Nrh2VyF8Y5yvy1jUBhrbhHURN1WQptB.tar.zst"</span><span class="w"> </span><span class="p">}</span>

<span class="n">import</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Stdout</span>
<span class="n">import</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Stderr</span>

<span class="n">demo_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"11-22,95-115,998-1012,1188511880-1188511890,222220-222224,1698522-1698528,446443-446449,38593856-38593862,565653-565659,824824821-824824827,2121212118-2121212124"</span>

<span class="n">day_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">demo_input</span><span class="w"> </span><span class="c1"># TODO: copy actual input here</span>

<span class="nb">print</span><span class="o">!</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">Str</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{}</span>
<span class="nb">print</span><span class="o">!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">msg</span><span class="o">|</span><span class="w"> </span><span class="n">msg</span><span class="o">.</span><span class="n">split_on</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span><span class="o">.</span><span class="n">for_each!</span><span class="p">(</span><span class="no">Stdout</span><span class="o">.</span><span class="n">line!</span><span class="p">)</span>


<span class="n">parse_range</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">Str</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">((</span><span class="no">I64</span><span class="p">,</span><span class="w"> </span><span class="no">I64</span><span class="p">),</span><span class="w"> </span><span class="n">_</span><span class="p">)</span>
<span class="n">parse_range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">range_str</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">match</span><span class="w"> </span><span class="n">range_str</span><span class="o">.</span><span class="n">split_on</span><span class="p">(</span><span class="s2">"-"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">[</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="o">]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Ok</span><span class="p">((</span><span class="no">I64</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="sc">?,</span><span class="w"> </span><span class="no">I64</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="sc">?)</span><span class="p">)</span>
<span class="w">        </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Err</span><span class="p">(</span><span class="no">InvalidRangeFormat</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>


<span class="n">is_invalid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">I64</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">Bool</span>
<span class="n">is_invalid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">x</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">.</span><span class="n">to_str</span><span class="p">()</span><span class="o">.</span><span class="n">to_utf8</span><span class="p">()</span>
<span class="w">    </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>
<span class="w">    </span><span class="n">mid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="sr">//</span><span class="w"> </span><span class="mi">2</span>

<span class="w">    </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="n">sublist</span><span class="p">({</span><span class="w"> </span><span class="ss">start</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">len</span><span class="p">:</span><span class="w"> </span><span class="n">mid</span><span class="w"> </span><span class="p">})</span>
<span class="w">    </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="n">sublist</span><span class="p">({</span><span class="w"> </span><span class="ss">start</span><span class="p">:</span><span class="w"> </span><span class="n">mid</span><span class="p">,</span><span class="w"> </span><span class="ss">len</span><span class="p">:</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">mid</span><span class="w"> </span><span class="p">})</span>

<span class="w">    </span><span class="n">left</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">right</span>
<span class="p">}</span>


<span class="n">part1!</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">Str</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">(</span><span class="no">I64</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span>
<span class="n">part1!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">input</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="vg">$sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">range_str</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">input</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span><span class="o">.</span><span class="n">split_on</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">end</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse_range</span><span class="p">(</span><span class="n">range_str</span><span class="p">)?</span>

<span class="w">        </span><span class="n">var</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">is_invalid</span><span class="p">(</span><span class="vg">$x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="vg">$sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$sum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">$x</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="vg">$x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="no">Ok</span><span class="p">(</span><span class="vg">$sum</span><span class="p">)</span>
<span class="p">}</span>


<span class="n">repeat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">|</span><span class="w"> </span><span class="n">repeat_helper</span><span class="p">(</span><span class="o">[]</span><span class="p">,</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>

<span class="n">repeat_helper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">acc</span><span class="p">,</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">|</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">acc</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">repeat_helper</span><span class="p">(</span><span class="n">acc</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">list</span><span class="p">),</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">has_repeating_pattern</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">I64</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Bool</span>
<span class="n">has_repeating_pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">x</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">.</span><span class="n">to_str</span><span class="p">()</span><span class="o">.</span><span class="n">to_utf8</span><span class="p">()</span>
<span class="w">    </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>

<span class="w">    </span><span class="c1"># Check all divisors of n</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="vg">$d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="vg">$d</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="sr">//</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="vg">$d</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1"># Check if repeating the first d characters n/d times equals s</span>
<span class="w">            </span><span class="n">slice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="n">sublist</span><span class="p">({</span><span class="w"> </span><span class="ss">start</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">len</span><span class="p">:</span><span class="w"> </span><span class="vg">$d</span><span class="w"> </span><span class="p">})</span>
<span class="w">            </span><span class="n">repeated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">slice</span><span class="o">-&gt;</span><span class="n">repeat</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="sr">//</span><span class="w"> </span><span class="vg">$d</span><span class="p">)</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">repeated</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="no">True</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="vg">$d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$d</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="no">False</span>
<span class="p">}</span>


<span class="n">part2!</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">Str</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">(</span><span class="no">I64</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span>
<span class="n">part2!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">input</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="vg">$sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">range_str</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">input</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span><span class="o">.</span><span class="n">split_on</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">end</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse_range</span><span class="p">(</span><span class="n">range_str</span><span class="p">)?</span>

<span class="w">        </span><span class="n">var</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">has_repeating_pattern</span><span class="p">(</span><span class="vg">$x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="vg">$sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$sum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">$x</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="vg">$x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="no">Ok</span><span class="p">(</span><span class="vg">$sum</span><span class="p">)</span>
<span class="p">}</span>


<span class="n">run!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">print</span><span class="o">!</span><span class="p">(</span><span class="s2">"Part 1 (demo): ${part1!(demo_input.trim())?.to_str()}"</span><span class="p">)</span>
<span class="w">    </span><span class="c1">#print!("Part 1: ${part1!(day_input.trim())?.to_str()}")</span>
<span class="w">    </span><span class="nb">print</span><span class="o">!</span><span class="p">(</span><span class="s2">"Part 2 (demo): ${part2!(demo_input.trim())?.to_str()}"</span><span class="p">)</span>
<span class="w">    </span><span class="c1">#print!("Part 2: ${part2!(day_input.trim())?.to_str()}")</span>
<span class="w">    </span><span class="no">Ok</span><span class="p">({})</span>
<span class="p">}</span>


<span class="n">main!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">_args</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">match</span><span class="w"> </span><span class="n">run!</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="no">Ok</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Ok</span><span class="p">({})</span>
<span class="w">        </span><span class="no">Err</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Err</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div></div>



<a name="561989410"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/561989410" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#561989410">(Dec 04 2025 at 23:01)</a>:</h4>
<p>yeah I'm bumping the default stack size in a PR that should be landing soon</p>



<a name="562802942"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562802942" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562802942">(Dec 09 2025 at 21:30)</a>:</h4>
<p>aaaaaaaah<br>
It was so close. Now that all the bugs I’ve encountered were fixed on main and day01 was running smoothly with no memory leak, I was praying to the insect gods and ...  it wasn’t enough XD</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>❯<span class="w"> </span>roc<span class="w"> </span>--no-cache<span class="w"> </span>day02.roc
thread<span class="w"> </span><span class="m">586390</span><span class="w"> </span>panic:<span class="w"> </span>index<span class="w"> </span>out<span class="w"> </span>of<span class="w"> </span>bounds:<span class="w"> </span>index<span class="w"> </span><span class="m">2863311530</span>,<span class="w"> </span>len<span class="w"> </span><span class="m">1049</span>
???:?:?:<span class="w"> </span>0x104a7476f<span class="w"> </span><span class="k">in</span><span class="w"> </span>_instantiate.Instantiator.instantiateTagUnion<span class="w"> </span><span class="o">(</span>???<span class="o">)</span>
???:?:?:<span class="w"> </span>0x104a02f4f<span class="w"> </span><span class="k">in</span><span class="w"> </span>_instantiate.Instantiator.instantiateFlatType<span class="w"> </span><span class="o">(</span>???<span class="o">)</span>
???:?:?:<span class="w"> </span>0x10495c1d3<span class="w"> </span><span class="k">in</span><span class="w"> </span>_instantiate.Instantiator.instantiateContent<span class="w"> </span><span class="o">(</span>???<span class="o">)</span>
...
</code></pre></div>
<p>Tomorrow I’ll try to minimize it.</p>



<a name="562811139"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562811139" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562811139">(Dec 09 2025 at 22:16)</a>:</h4>
<p>if you want to just paste the non minimized version I can take care of it!</p>



<a name="562812319"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562812319" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562812319">(Dec 09 2025 at 22:23)</a>:</h4>
<p>Here is the file in full. It’s using Luke’s latest platform version 0.5</p>
<p><a href="/user_uploads/22008/DXl5Xf48w0Fo1kl7CGNxftGf/day02.roc">day02.roc</a></p>



<a name="562895393"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562895393" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562895393">(Dec 10 2025 at 08:31)</a>:</h4>
<p>It’s a weird one again. If I change almost anything, the panic goes away. Even removing dead code.</p>



<a name="562899116"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562899116" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562899116">(Dec 10 2025 at 08:48)</a>:</h4>
<p>So in a way, the good news is that for example just using <code>Stdout.line!</code> instead of my <code>print!</code> makes the program run. The bad news is that even in <code>ReleaseFast</code>, interpreter seems way to slow to be able to compute day02 with the naive implementation I came up with while trying to solve it in Julia.</p>



<a name="562974408"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562974408" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562974408">(Dec 10 2025 at 14:54)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/8617">https://github.com/roc-lang/roc/pull/8617</a> should fix this!</p>



<a name="562974739"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562974739" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562974739">(Dec 10 2025 at 14:56)</a>:</h4>
<blockquote>
<p>even in <code>ReleaseFast</code>, interpreter seems way to slow to be able to compute day02 with the naive implementation I came up with while trying to solve it in Julia.</p>
</blockquote>
<p>this is a good data point to have! one of the open questions with the interpreter is "will it be fast enough compared to our previous compiler's strategy of doing monomorphization and then direct-to-machine-code code gen?" and it sounds like in this case the answer is that it wasn't fast enough</p>



<a name="562974816"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562974816" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562974816">(Dec 10 2025 at 14:56)</a>:</h4>
<p>if Julia is fast enough, then our direct-to-machine-code backend should definitely be fast enough</p>



<a name="562975072"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562975072" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562975072">(Dec 10 2025 at 14:57)</a>:</h4>
<p>Julia takes roughly 2s, and the roc interpreter I’ve stopped after 1h not finishing for the same puzzle range.</p>



<a name="562975233"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562975233" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562975233">(Dec 10 2025 at 14:58)</a>:</h4>
<p>of note, even trying out a direct-to-machine-code backend is blocked on monomorphization and lambda set specialization being implemented (one of the other benefits of trying out an interpreter approach is that it has fewer prerequisites) so it'll be awhile before we can even consider trying that as an alternative</p>



<a name="562975371"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562975371" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562975371">(Dec 10 2025 at 14:58)</a>:</h4>
<p>although since we've already done it once in Rust, I bet a LLM can port a bunch of that over to Zig for us; it wouldn't be like we'd have to start over from scratch</p>



<a name="562975733"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562975733" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562975733">(Dec 10 2025 at 15:00)</a>:</h4>
<p>but I think for now we should continue with the interpreter and reconsider the direct-to-machine-code backend option once we have the LLVM backend in place, since at that point we'll have all the prerequisites for both - as well as more data points on how long the interpreter takes to run</p>



<a name="562975943"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562975943" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562975943">(Dec 10 2025 at 15:00)</a>:</h4>
<p>Yeah, for that puzzle I’ll just have to write a less trivial solution.</p>



<a name="562976029"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562976029" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562976029">(Dec 10 2025 at 15:01)</a>:</h4>
<p>can you post the one that reproduces the slowness somewhere?</p>



<a name="562976107"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562976107" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562976107">(Dec 10 2025 at 15:01)</a>:</h4>
<p>ideally that and the julia one - would be great to have both of those for future comparison when revisiting this question</p>



<a name="562976196"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/562976196" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#562976196">(Dec 10 2025 at 15:01)</a>:</h4>
<p>I’ll do a little bit of cleanup tonight and post both ok</p>



<a name="563016422"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563016422" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563016422">(Dec 10 2025 at 17:53)</a>:</h4>
<p>awesome, thanks!</p>



<a name="563021494"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563021494" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563021494">(Dec 10 2025 at 18:21)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> <br>
Here: <a href="https://github.com/roc-lang/roc/issues/8621">https://github.com/roc-lang/roc/issues/8621</a></p>



<a name="563084243"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563084243" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563084243">(Dec 11 2025 at 00:22)</a>:</h4>
<p>I’ve rewritten day 2 in a completely different approach which is less trivial but also much more efficient, and now I got a valid response in Roc for both part 1 and part 2, in a not-too-long amount of time :)</p>
<p>Here is the implementation for those interested. <br>
<a href="/user_uploads/22008/4MYBgoibNf2K7XP5hkZ26khK/day02_gen.roc">day02_gen.roc</a></p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>❯<span class="w"> </span>roc<span class="w"> </span>day02_gen.roc
error<span class="o">(</span>gpa<span class="o">)</span>:<span class="w"> </span>Allocation<span class="w"> </span>alignment<span class="w"> </span><span class="m">8</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>match<span class="w"> </span>free<span class="w"> </span>alignment<span class="w"> </span><span class="m">1</span>.<span class="w"> </span>Allocation:
Unable<span class="w"> </span>to<span class="w"> </span>print<span class="w"> </span>stack<span class="w"> </span>trace:<span class="w"> </span>Unable<span class="w"> </span>to<span class="w"> </span>open<span class="w"> </span>debug<span class="w"> </span>info:<span class="w"> </span>MissingDebugInfo
<span class="w"> </span>Free:
Unable<span class="w"> </span>to<span class="w"> </span>print<span class="w"> </span>stack<span class="w"> </span>trace:<span class="w"> </span>Unable<span class="w"> </span>to<span class="w"> </span>open<span class="w"> </span>debug<span class="w"> </span>info:<span class="w"> </span>MissingDebugInfo
...
...<span class="w"> </span>tons<span class="w"> </span>more<span class="w"> </span>error<span class="o">(</span>gpa<span class="o">)</span><span class="w"> </span>alignment<span class="w"> </span>issues
...
-----------
Part<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>demo<span class="o">)</span>:<span class="w"> </span><span class="m">1227775554</span>
Part<span class="w"> </span><span class="m">1</span>:<span class="w"> </span><span class="m">54641809925</span>
Part<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">(</span>demo<span class="o">)</span>:<span class="w"> </span><span class="m">4174379265</span>
Part<span class="w"> </span><span class="m">2</span>:<span class="w"> </span><span class="m">73694270688</span>
</code></pre></div>
<p>As you can see, there are still memory alignment issues, meaning sometimes I have to add a stdout line here and there to prevent a crash (no idea why). But when it goes to the end, it gives the correct answer!</p>



<a name="563085453"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563085453" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563085453">(Dec 11 2025 at 00:37)</a>:</h4>
<p>PS this solution is now panicking on the latest main b60aa9a3</p>



<a name="563086456"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563086456" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563086456">(Dec 11 2025 at 00:46)</a>:</h4>
<p>I'll look into that tonight!</p>



<a name="563128433"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563128433" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563128433">(Dec 11 2025 at 08:35)</a>:</h4>
<p>Thanks for the fix!</p>
<blockquote>
<p>There's a separate memory leak issue but that happens on the host side, not in the compiler!</p>
</blockquote>
<p>By "memory leak", do you mean the lines I see with "Allocation alignment 8 ..."?<br>
By "on the host side", do you mean it’s in the v0.5 platform template?</p>



<a name="563136002"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563136002" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563136002">(Dec 11 2025 at 09:18)</a>:</h4>
<p>Should be fixed in <a href="https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/tag/0.6">https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/tag/0.6</a></p>



<a name="563136243"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563136243" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563136243">(Dec 11 2025 at 09:19)</a>:</h4>
<p>The host memory leak that is</p>



<a name="563139830"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563139830" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563139830">(Dec 11 2025 at 09:37)</a>:</h4>
<p>I can confirm. Day 2 is now officially cleanly returning the correct result</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">❯ roc day02.roc</span>
<span class="go">Part 1 (demo): 1227775554</span>
<span class="go">Part 1: 54641809925</span>
<span class="go">Part 2 (demo): 4174379265</span>
<span class="go">Part 2: 73694270688</span>
</code></pre></div>



<a name="563140827"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563140827" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563140827">(Dec 11 2025 at 09:41)</a>:</h4>
<p>tonight is for day 3 :)</p>



<a name="563141685"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563141685" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563141685">(Dec 11 2025 at 09:45)</a>:</h4>
<p>Awesome, looking forward to smashing any more bugs we find <span aria-label="bug" class="emoji emoji-1f41b" role="img" title="bug">:bug:</span> <span aria-label="hammer" class="emoji emoji-1f528" role="img" title="hammer">:hammer:</span></p>



<a name="563193073"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2025%20Day%202/near/563193073" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2025.20Day.202.html#563193073">(Dec 11 2025 at 13:59)</a>:</h4>
<p>yeah this has been <em>extremely</em> helpful - thank you so much for all the bug reports <span class="user-mention" data-user-id="479073">@Matthieu Pizenberg</span>!</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>