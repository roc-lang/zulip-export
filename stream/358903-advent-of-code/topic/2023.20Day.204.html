<html>
<head><meta charset="utf-8"><title>2023 Day 4 · advent of code · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/index.html">advent of code</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html">2023 Day 4</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="405754608"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405754608" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> timotree <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405754608">(Dec 04 2023 at 06:28)</a>:</h4>
<p><a href="https://github.com/timotree3/aoc2023/blob/main/roc/day4.roc">My day 4 solution</a>. I love how everything turns into a pipeline after I factor out helper functions</p>



<a name="405764210"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405764210" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Lindskogen <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405764210">(Dec 04 2023 at 07:39)</a>:</h4>
<p>I am back on track with day 4!  <a href="https://github.com/lindskogen/advent-of-code-2023/blob/main/day04/main.roc">https://github.com/lindskogen/advent-of-code-2023/blob/main/day04/main.roc</a> - Takes 11 seconds with <code>--optimize</code> so a lot of work still remains to make it fast</p>



<a name="405769361"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405769361" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405769361">(Dec 04 2023 at 08:17)</a>:</h4>
<p>This is <a href="https://github.com/lukewilliamboswell/aoc/blob/main/src/S2023/D04.roc">my solution for Day 4</a></p>
<p>Also timing comparison, It seems to hang or take a really long time to run with <code>--optimize</code></p>
<div class="codehilite"><pre><span></span><code>$ roc dev src/cli.roc -- 2023 4
2023 Day 4: Scratchcards completed in 326 ms
Part 1 took 161 ms
Part 2 took 165 ms
$ roc run --optimize src/cli.roc -- 2023 4 &lt;--- takes a long time or hangs???
$ roc build --optimize src/cli.roc &lt;--- takes 2810 ms to build
2023 Day 4: Scratchcards completed in 4 ms
Part 1 took 2 ms
Part 2 took 1 ms
</code></pre></div>



<a name="405770090"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405770090" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405770090">(Dec 04 2023 at 08:22)</a>:</h4>
<p>I'm wondering if there is something fishy going on with these optimized build times, is it possible that LLVM is calculating the function at compile time somehow??</p>



<a name="405778735"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405778735" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405778735">(Dec 04 2023 at 09:06)</a>:</h4>
<p><span class="user-mention" data-user-id="636541">@timotree</span> that looks so simple. Nice use of <code>Set</code></p>



<a name="405784216"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405784216" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405784216">(Dec 04 2023 at 09:37)</a>:</h4>
<p><a href="https://gist.github.com/FabHof/8fa0cd01d8321ff905df5a619a8ef9b7">Here is my solution</a><br>
I think this was easier than yesterday. Using <code>dbg</code> is so nice now. I remember last year the output of <code>dbg</code> was just wrong sometimes.</p>



<a name="405788390"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405788390" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> joshi <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405788390">(Dec 04 2023 at 09:59)</a>:</h4>
<p>That was short and sweet, and for once, I needed to make things actually go fast  <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
<p><a href="https://gitlab.com/arkandos/aoc/-/blob/2023/solutions/day4.roc">https://gitlab.com/arkandos/aoc/-/blob/2023/solutions/day4.roc</a></p>
<p>I still think "dynamic programming" is such a dumb name</p>



<a name="405807648"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405807648" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oskar Hahn <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405807648">(Dec 04 2023 at 11:51)</a>:</h4>
<p>Here is mine: <a href="https://github.com/ostcar/aoc2023/blob/main/days/day04.roc">https://github.com/ostcar/aoc2023/blob/main/days/day04.roc</a></p>
<p>I did not have the time yet to look at your solutions (which is always informative), but I did not have a performance problem. Without optimization, I get:</p>
<div class="codehilite" data-code-language="roc"><pre><span></span><code>Part1 in 1.234s:
XXX

Part2 in 1.341s:
XXX
</code></pre></div>
<p>With <code>--optimize</code>, it does not compile</p>
<div class="codehilite"><pre><span></span><code>An internal compiler expectation was broken.
This is definitely a compiler bug.
Please file an issue here: https://github.com/roc-lang/roc/issues/new/choose
thread &#39;main&#39; panicked at &#39;Undefined Symbol in relocation, (+9f90, Relocation { kind: PltRelative, encoding: Generic, size: +20, target: Symbol(SymbolIndex(+78)), addend: +fffffffffffffffc, implicit_addend: false }): Ok(Symbol { name: &quot;memmove&quot;, address: +0, size: +0, kind: Label, section: Undefined, scope: Unknown, weak: false, flags: Elf { st_info: +10, st_other: +0 } })&#39;, crates/linker/src/elf.rs:1486:25
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="405808565"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405808565" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405808565">(Dec 04 2023 at 11:57)</a>:</h4>
<p>ahh that bug looks like LLVM generating <code>memmove</code> instructions</p>



<a name="405808626"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405808626" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405808626">(Dec 04 2023 at 11:58)</a>:</h4>
<p>(in the optimized build)</p>



<a name="405808672"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405808672" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405808672">(Dec 04 2023 at 11:58)</a>:</h4>
<p>TIL it can generate not only <code>memcpy</code> but also <code>memmove</code> instructions!</p>



<a name="405848301"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405848301" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405848301">(Dec 04 2023 at 15:24)</a>:</h4>
<p>Doing advent of code during work hours? Me?<br>
I would never... <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> </p>
<p><a href="https://gitlab.com/AsbjornOlling/aoc2023/-/blob/main/04/main.roc">https://gitlab.com/AsbjornOlling/aoc2023/-/blob/main/04/main.roc</a></p>
<p>Today was pretty harmless. No real struggles algorithmically or otherwise.<br>
I have a suspicion that aoc puzzles are harder on weekend days. Today really confirms that theory.</p>
<p>I do have one pretty dumb <code>|&gt; Result.withDefault 9999</code> on a <code>Dict.get</code> lookup that I <em>know</em> always succeeds.<br>
I want to have a look at getting rid of that later. I have a feeling I can do something smart if I use <code>Dict.walk</code> instead; or maybe I need to do my own recusion. Haven't really thought it through... Suggestions welcome.</p>



<a name="405856118"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405856118" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Lindskogen <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405856118">(Dec 04 2023 at 15:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="669074">Asbjørn Olling</span> <a href="#narrow/stream/358903-Advent-of-Code/topic/2023.20Day.204/near/405848301">said</a>:</p>
<blockquote>
<p>Doing advent of code during work hours? Me?<br>
I would never... <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> </p>
<p><a href="https://gitlab.com/AsbjornOlling/aoc2023/-/blob/main/04/main.roc">https://gitlab.com/AsbjornOlling/aoc2023/-/blob/main/04/main.roc</a></p>
<p>Today was pretty harmless. No real struggles algorithmically or otherwise.<br>
I have a suspicion that aoc puzzles are harder on weekend days. Today really confirms that theory.</p>
<p>I do have one pretty dumb <code>|&gt; Result.withDefault 9999</code> on a <code>Dict.get</code> lookup that I <em>know</em> always succeeds.<br>
I want to have a look at getting rid of that later. I have a feeling I can do something smart if I use <code>Dict.walk</code> instead; or maybe I need to do my own recusion. Haven't really thought it through... Suggestions welcome.</p>
</blockquote>
<p><span class="user-mention" data-user-id="636541">@timotree</span> here <a href="#narrow/stream/358903-Advent-of-Code/topic/2023.20Day.204/near/405754608">https://roc.zulipchat.com/#narrow/stream/358903-Advent-of-Code/topic/2023.20Day.204/near/405754608</a> made a <code>orCrash</code> helper <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="405856608"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405856608" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405856608">(Dec 04 2023 at 15:58)</a>:</h4>
<p>hmm I don't <em>love</em> crashing.<br>
Like, I can promise that it's always in there, but I think it'd be so much neater if I could convince the typechecker of it too.<br>
rn it <em>feels</em> possible to do.</p>



<a name="405858873"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405858873" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> timotree <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405858873">(Dec 04 2023 at 16:06)</a>:</h4>
<p>I only used <code>orCrash</code> for the parsing code. My data structure-manipulating code uses <code>List.update</code> which just does nothing silently if the indices are out of bounds</p>



<a name="405858897"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405858897" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> joshi <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405858897">(Dec 04 2023 at 16:06)</a>:</h4>
<p>An idea I have that somewhat tries to keep the spirit of your solution:</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>be warned if you haven't solved it yourself</p>
</div><div class="spoiler-content" aria-hidden="true">
<ul>
<li>Instead of having a list of cards and a dict, store a single <code>List (Card, Nat)</code></li>
<li>Have a custom recursive function, if you have an item in the list you are guaranteed to know the <code>wins</code> and the <code>count</code></li>
<li>Replace the next <code>wins</code> elements of the list with their incremented versions, and then recurse</li>
</ul>
</div></div>
<p>But I also think a default of 0 is fine, from a mathematical standpoint. If a card that you never had wins, increment all copies of the next N card by 0. Makes sense to me! <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="405863604"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405863604" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oskar Hahn <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405863604">(Dec 04 2023 at 16:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/358903-Advent-of-Code/topic/2023.20Day.204/near/405769361">said</a>:</p>
<blockquote>
<p>This is <a href="https://github.com/lukewilliamboswell/aoc/blob/main/src/S2023/D04.roc">my solution for Day 4</a></p>
<p>Also timing comparison, It seems to hang or take a really long time to run with <code>--optimize</code></p>
<p><div class="codehilite"><pre><span></span><code>$ roc dev src/cli.roc -- 2023 4
2023 Day 4: Scratchcards completed in 326 ms
Part 1 took 161 ms
Part 2 took 165 ms
$ roc run --optimize src/cli.roc -- 2023 4 &lt;--- takes a long time or hangs???
$ roc build --optimize src/cli.roc &lt;--- takes 2810 ms to build
2023 Day 4: Scratchcards completed in 4 ms
Part 1 took 2 ms
Part 2 took 1 ms
</code></pre></div><br>
</p>
</blockquote>
<p>Every time I read your solutions, I learn something new. It's like the follow-up of the tutorial <span aria-label="smiling face" class="emoji emoji-263a" role="img" title="smiling face">:smiling_face:</span></p>
<p>This time, it was the <code>[_ ,..as rest]</code> pattern when pattern matching.</p>



<a name="405878345"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405878345" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405878345">(Dec 04 2023 at 17:28)</a>:</h4>
<p>Day 4 felt smooth and quite easy:<br>
<a href="https://github.com/bhansconnect/roc-aoc-2023/blob/main/day4.roc">https://github.com/bhansconnect/roc-aoc-2023/blob/main/day4.roc</a></p>



<a name="405878354"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405878354" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405878354">(Dec 04 2023 at 17:28)</a>:</h4>
<p>Thats what I enjoy most about AoC, is reading other people's solutions and learning new tricks. I try to make my next one a little better to challenge myself.</p>



<a name="405879233"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405879233" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405879233">(Dec 04 2023 at 17:32)</a>:</h4>
<p>Also, I think my least favorite part of pipeline heavy solutions (which most AOC is for me) is that I prefer backpassing. They don't mix well though.</p>



<a name="405882435"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405882435" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> timotree <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405882435">(Dec 04 2023 at 17:50)</a>:</h4>
<p><span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> wow our code is almost the exact same modulo function boundaries and integer sizes!</p>



<a name="405883323"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405883323" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405883323">(Dec 04 2023 at 17:56)</a>:</h4>
<p>Oh wow, yeah, really close</p>



<a name="405883338"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405883338" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405883338">(Dec 04 2023 at 17:57)</a>:</h4>
<p>I guess it is a very direct solution</p>



<a name="405892009"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405892009" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405892009">(Dec 04 2023 at 18:51)</a>:</h4>
<p><a href="https://github.com/keeslinp/AoC2023/blob/main/day4.roc">https://github.com/keeslinp/AoC2023/blob/main/day4.roc</a><br>
Ended up going the dynamic programming route for Part 2, but I feel like there has to be a way to work backwards to make it a lot cleaner <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> .  Under a second is plenty fast for me though.</p>
<p>Big thanks for pointing out formatting + highlighting yesterday, it made it a lot easier to parse for my brain.</p>
<p>Would it be possible to make <code>crash</code> behave like <code>expect</code> where it dumps out the variables in scope? I ended up just adding dbg in the crash branches to simulate that, but it would be super cool to have in debug builds.</p>



<a name="405899984"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405899984" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405899984">(Dec 04 2023 at 19:43)</a>:</h4>
<p>whoa, I love that idea! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="405901247"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405901247" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405901247">(Dec 04 2023 at 19:52)</a>:</h4>
<p>Makes me think that the real wanted feature is gradual typing with <code>expect</code> essentially.</p>
<p>So you could just write an expect of the <code>Ok</code> case and then if the expect fails it would dump everything. If the expect passes, suddenly, we  would be safe to just unwrap without ever calling crash.</p>
<p>Of course, we don't have gradual typing, but it is a really nice use case.</p>



<a name="405908827"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405908827" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Hobbs <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405908827">(Dec 04 2023 at 20:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/358903-Advent-of-Code/topic/2023.20Day.204/near/405878345">said</a>:</p>
<blockquote>
<p>Day 4 felt smooth and quite easy:<br>
<a href="https://github.com/bhansconnect/roc-aoc-2023/blob/main/day4.roc">https://github.com/bhansconnect/roc-aoc-2023/blob/main/day4.roc</a></p>
</blockquote>
<p>Wow, that does look simple. Nice to learn <code>Set.intersection</code> exists too!</p>
<p>Here's my novice take on it with Roc:</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>Day 4 solved</p>
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">app</span><span class="w"> </span><span class="s">"hello"</span>
<span class="w">    </span><span class="nv">packages</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nv">pf</span><span class="nf">:</span><span class="w"> </span><span class="s">"https://github.com/roc-lang/basic-cli/releases/download/0.7.0/bkGby8jb0tmZYsy2hg1E_B2QrCgcSTxdUlHtETwm5m4.tar.br"</span><span class="p">,</span>
<span class="w">        </span><span class="nv">parser</span><span class="nf">:</span><span class="w"> </span><span class="s">"https://github.com/lukewilliamboswell/roc-parser/releases/download/0.3.0/-e3ebWWmlFPfe9fYrr2z1urfslzygbtQQsl69iH1qzQ.tar.br"</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nv">imports</span>
<span class="w">    </span><span class="p">[</span>
<span class="w">        </span><span class="nv">pf</span><span class="nf">.</span><span class="kt">Stdout</span><span class="p">,</span>
<span class="w">        </span><span class="nv">pf</span><span class="nf">.</span><span class="kt">Task</span><span class="p">,</span>
<span class="w">        </span><span class="s">"./day4-input.txt"</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nv">input</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Str</span><span class="p">,</span>
<span class="w">        </span><span class="nv">parser</span><span class="nf">.</span><span class="kt">Core</span><span class="nf">.</span><span class="p">{</span><span class="w"> </span><span class="kt">Parser</span><span class="p">,</span><span class="w"> </span><span class="nv">const</span><span class="p">,</span><span class="w"> </span><span class="nv">keep</span><span class="p">,</span><span class="w"> </span><span class="nv">map</span><span class="p">,</span><span class="w"> </span><span class="nv">oneOrMore</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nv">parser</span><span class="nf">.</span><span class="kt">String</span><span class="nf">.</span><span class="p">{</span><span class="w"> </span><span class="nv">anyCodeunit</span><span class="p">,</span><span class="w"> </span><span class="nv">digits</span><span class="p">,</span><span class="w"> </span><span class="nv">oneOf</span><span class="p">,</span><span class="w"> </span><span class="nv">parseStr</span><span class="p">,</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">    </span><span class="nv">provides</span><span class="w"> </span><span class="p">[</span><span class="nv">main</span><span class="p">]</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">pf</span>

<span class="kr">main </span><span class="nf">=</span>
<span class="w">    </span><span class="p">{}</span><span class="w"> </span><span class="nf">&lt;-</span><span class="w"> </span><span class="kt">Stdout</span><span class="nf">.</span><span class="nv">line</span><span class="w"> </span><span class="s">"The total sum is \(part1 input)"</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="nf">.</span><span class="nv">await</span>
<span class="w">    </span><span class="p">{}</span><span class="w"> </span><span class="nf">&lt;-</span><span class="w"> </span><span class="kt">Stdout</span><span class="nf">.</span><span class="nv">line</span><span class="w"> </span><span class="s">"The number of cards is \(part2 input)"</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="nf">.</span><span class="nv">await</span>
<span class="w">    </span><span class="kt">Task</span><span class="nf">.</span><span class="nv">ok</span><span class="w"> </span><span class="p">{}</span>

<span class="nv">part1</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">gamelist</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">split</span><span class="w"> </span><span class="nv">gamelist</span><span class="w"> </span><span class="s">"</span><span class="se">\n</span><span class="s">"</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="nv">correctPicksInGame</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">mapScore</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">sum</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">toStr</span>

<span class="nv">part2</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">gamelist</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">correctPicksByGame</span><span class="w"> </span><span class="nf">=</span>
<span class="w">        </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">split</span><span class="w"> </span><span class="nv">gamelist</span><span class="w"> </span><span class="s">"</span><span class="se">\n</span><span class="s">"</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="nv">correctPicksInGame</span>

<span class="w">    </span><span class="nv">emptyDict</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Dict</span><span class="w"> </span><span class="kt">U32</span><span class="w"> </span><span class="kt">U32</span>
<span class="w">    </span><span class="nv">emptyDict</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">Dict</span><span class="nf">.</span><span class="nv">empty</span><span class="w"> </span><span class="p">{}</span>

<span class="w">    </span><span class="nv">numBonusCardsByGame</span><span class="w"> </span><span class="nf">=</span>
<span class="w">        </span><span class="kt">List</span><span class="nf">.</span><span class="nv">walkWithIndex</span>
<span class="w">            </span><span class="nv">correctPicksByGame</span>
<span class="w">            </span><span class="nv">emptyDict</span>
<span class="w">            </span><span class="nf">\</span><span class="nv">numCardsByGame</span><span class="p">,</span><span class="w"> </span><span class="nv">item</span><span class="p">,</span><span class="w"> </span><span class="nv">index</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">                </span><span class="nv">copies</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Nat</span>
<span class="w">                </span><span class="nv">copies</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">Dict</span><span class="nf">.</span><span class="nv">get</span><span class="w"> </span><span class="nv">numCardsByGame</span><span class="w"> </span><span class="p">(</span><span class="kt">Num</span><span class="nf">.</span><span class="nv">toU32</span><span class="w"> </span><span class="nv">index</span><span class="p">)</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="nf">.</span><span class="nv">withDefault</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">toNat</span>
<span class="w">                </span><span class="err">#</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">debug</span><span class="w"> </span><span class="nv">index</span><span class="w"> </span><span class="s">"index"</span>
<span class="w">                </span><span class="err">#</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">debug</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="s">"item"</span>
<span class="w">                </span><span class="err">#</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">debug</span><span class="w"> </span><span class="nv">copies</span><span class="w"> </span><span class="s">"copies"</span>

<span class="w">                </span><span class="kr">if</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">len</span><span class="w"> </span><span class="nv">item</span><span class="w"> </span><span class="nf">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
<span class="w">                    </span><span class="err">#</span><span class="w"> </span><span class="kt">Process</span><span class="w"> </span><span class="nv">normal</span><span class="w"> </span><span class="nv">cards</span>
<span class="w">                    </span><span class="kt">List</span><span class="nf">.</span><span class="nv">range</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">start</span><span class="nf">:</span><span class="w"> </span><span class="kt">At</span><span class="w"> </span><span class="p">(</span><span class="nv">index</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="nv">end</span><span class="nf">:</span><span class="w"> </span><span class="kt">At</span><span class="w"> </span><span class="p">(</span><span class="nv">index</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="nf">.</span><span class="nv">len</span><span class="w"> </span><span class="nv">item</span><span class="p">))</span><span class="w"> </span><span class="p">}</span>
<span class="w">                    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">repeat</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="nv">copies</span><span class="p">)</span>
<span class="w">                    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">join</span>
<span class="w">                    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">toU32</span>
<span class="w">                    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">incrementCards</span><span class="w"> </span><span class="nv">numCardsByGame</span>
<span class="w">                </span><span class="kr">else</span>
<span class="w">                    </span><span class="nv">numCardsByGame</span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="nv">dbg</span><span class="w"> </span><span class="nv">correctPicksByGame</span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="nv">dbg</span><span class="w"> </span><span class="nv">numBonusCardsByGame</span>

<span class="w">    </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">add</span>
<span class="w">        </span><span class="p">(</span><span class="kt">List</span><span class="nf">.</span><span class="nv">len</span><span class="w"> </span><span class="nv">correctPicksByGame</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">toU32</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="kt">Dict</span><span class="nf">.</span><span class="nv">values</span><span class="w"> </span><span class="nv">numBonusCardsByGame</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">sum</span><span class="p">)</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">toStr</span>

<span class="nv">incrementCards</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="kt">U32</span><span class="p">,</span><span class="w"> </span><span class="kt">Dict</span><span class="w"> </span><span class="kt">U32</span><span class="w"> </span><span class="kt">U32</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Dict</span><span class="w"> </span><span class="kt">U32</span><span class="w"> </span><span class="kt">U32</span>
<span class="nv">incrementCards</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">range</span><span class="p">,</span><span class="w"> </span><span class="nv">numCardsByGame</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">isEmpty</span><span class="w"> </span><span class="nv">range</span><span class="w"> </span><span class="kr">then</span>
<span class="w">        </span><span class="nv">numCardsByGame</span>
<span class="w">    </span><span class="kr">else</span>
<span class="w">        </span><span class="nv">key</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">first</span><span class="w"> </span><span class="nv">range</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="nf">.</span><span class="nv">withDefault</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="nv">updatedDict</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">Dict</span><span class="nf">.</span><span class="nv">update</span><span class="w"> </span><span class="nv">numCardsByGame</span><span class="w"> </span><span class="nv">key</span><span class="w"> </span><span class="nv">incrementDict</span>
<span class="w">        </span><span class="nv">incrementCards</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="nf">.</span><span class="nv">dropFirst</span><span class="w"> </span><span class="nv">range</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="nv">updatedDict</span>

<span class="nv">incrementDict</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">[</span><span class="kt">Missing</span><span class="p">,</span><span class="w"> </span><span class="kt">Present</span><span class="w"> </span><span class="kt">U32</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="kt">Present</span><span class="w"> </span><span class="kt">U32</span><span class="p">]</span>
<span class="nv">incrementDict</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">possibleValue</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">when</span><span class="w"> </span><span class="nv">possibleValue</span><span class="w"> </span><span class="nv">is</span>
<span class="w">        </span><span class="kt">Missing</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Present</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">Present</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Present</span><span class="w"> </span><span class="p">(</span><span class="nv">value</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="nv">mapScore</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">numCorrectByGame</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">numCorrectByGame</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">len</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="nf">\</span><span class="nv">numCorrect</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">        </span><span class="nv">when</span><span class="w"> </span><span class="nv">numCorrect</span><span class="w"> </span><span class="nv">is</span>
<span class="w">            </span><span class="mi">0</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="nv">_</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">powInt</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="nv">numCorrect</span><span class="w"> </span><span class="nf">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="nv">correctPicksInGame</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">game</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">numbers</span><span class="w"> </span><span class="nf">=</span>
<span class="w">        </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">split</span><span class="w"> </span><span class="nv">game</span><span class="w"> </span><span class="s">":"</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="nf">.</span><span class="nv">withDefault</span><span class="w"> </span><span class="s">""</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">split</span><span class="w"> </span><span class="s">"|"</span>

<span class="w">    </span><span class="nv">winningNumbers</span><span class="w"> </span><span class="nf">=</span>
<span class="w">        </span><span class="nv">numbers</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="nf">.</span><span class="nv">withDefault</span><span class="w"> </span><span class="s">""</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">split</span><span class="w"> </span><span class="s">" "</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">trim</span>

<span class="w">    </span><span class="nv">myPicks</span><span class="w"> </span><span class="nf">=</span>
<span class="w">        </span><span class="nv">numbers</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="nf">.</span><span class="nv">withDefault</span><span class="w"> </span><span class="s">""</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">split</span><span class="w"> </span><span class="s">" "</span>
<span class="w">        </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">trim</span>

<span class="w">    </span><span class="kt">List</span><span class="nf">.</span><span class="nv">keepIf</span><span class="w"> </span><span class="nv">myPicks</span><span class="w"> </span><span class="nf">\</span><span class="nv">pick</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">contains</span><span class="w"> </span><span class="nv">winningNumbers</span><span class="w"> </span><span class="nv">pick</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">keepOks</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">toI16</span>

<span class="nv">exampleInput</span><span class="w"> </span><span class="nf">=</span>
<span class="w">    </span><span class="s">"""</span>
<span class="s">    Card 1: 41 48 83 86 17 | 83 86  6 31 17  9 48 53</span>
<span class="s">    Card 2: 13 32 20 16 61 | 61 30 68 82 17 32 24 19</span>
<span class="s">    Card 3:  1 21 53 59 44 | 69 82 63 72 16 21 14  1</span>
<span class="s">    Card 4: 41 92 73 84 69 | 59 84 76 51 58  5 54 83</span>
<span class="s">    Card 5: 87 83 26 28 32 | 88 30 70 12 93 22 82 36</span>
<span class="s">    Card 6: 31 18 13 56 72 | 74 77 10 23 35 67 36 11</span>
<span class="s">    """</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">trim</span>

<span class="nv">debug</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">v</span><span class="p">,</span><span class="w"> </span><span class="nv">ctx</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">dbg</span>
<span class="w">        </span><span class="nv">ctx</span>

<span class="w">    </span><span class="nv">dbg</span>
<span class="w">        </span><span class="nv">v</span>

<span class="w">    </span><span class="nv">v</span>
</code></pre></div>
</div></div>



<a name="405917495"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405917495" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Axel <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405917495">(Dec 04 2023 at 21:52)</a>:</h4>
<p>No surprises in <a href="https://github.com/axelerator/aoc23/blob/main/04/main.roc">my solution either</a>. <br>
Biggest take away: Using the <a href="https://github.com/ayazhafiz/roc/tree/lang-srv/crates/lang_srv">language server</a> is shortens feedback significantly <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span><br>
Biggest <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span> : When something is off with the types all tests get reported as well. Which is quite cumbersome when you have all the tests at the bottom, because you have to scroll waaaay up after running <code>roc check</code> to get to the actual error.<br>
<a href="/user_uploads/22008/liFJGPvdzHOXB9IbUfTu-L7J/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/liFJGPvdzHOXB9IbUfTu-L7J/image.png" title="image.png"><img src="/user_uploads/22008/liFJGPvdzHOXB9IbUfTu-L7J/image.png"></a></div>



<a name="405919795"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405919795" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405919795">(Dec 04 2023 at 22:09)</a>:</h4>
<p>Personally, I use this <code>ls *.roc | entr -cc roc /_</code></p>
<p>automatically runs the <code>day*.roc</code> file whenever I save it.</p>



<a name="405919814"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405919814" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405919814">(Dec 04 2023 at 22:09)</a>:</h4>
<p>Also a nice a short feedback loop</p>



<a name="405955440"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405955440" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Murray <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405955440">(Dec 05 2023 at 02:26)</a>:</h4>
<p>Heres my day 4 <a href="https://github.com/JRMurr/AdventOfCode2023/blob/main/roc/D04/Day.roc">https://github.com/JRMurr/AdventOfCode2023/blob/main/roc/D04/Day.roc</a></p>
<p>Started using more <code>expect</code>s as i write each helper which was a nice flow</p>



<a name="405955485"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405955485" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Murray <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405955485">(Dec 05 2023 at 02:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/358903-Advent-of-Code/topic/2023.20Day.204/near/405919795">said</a>:</p>
<blockquote>
<p>Personally, I use this <code>ls *.roc | entr -cc roc /_</code></p>
<p>automatically runs the <code>day*.roc</code> file whenever I save it.</p>
</blockquote>
<p>I wonder how hard it would be to have something like <a href="https://github.com/Canop/bacon">https://github.com/Canop/bacon</a> for roc. Would be a nice flow to have a tab open with the most up to date checks/tests</p>



<a name="405972914"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405972914" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405972914">(Dec 05 2023 at 04:47)</a>:</h4>
<p>My day 4 <a href="https://gist.github.com/ayazhafiz/d4eea34a9c4830dfb0307a512abbee80">https://gist.github.com/ayazhafiz/d4eea34a9c4830dfb0307a512abbee80</a></p>



<a name="405972940"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405972940" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405972940">(Dec 05 2023 at 04:47)</a>:</h4>
<p>Roc is so nice especially with dbg and the LS now. I can't get over it</p>



<a name="405972953"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405972953" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405972953">(Dec 05 2023 at 04:47)</a>:</h4>
<p>So much progress over the last year. Congrats everybody!</p>



<a name="405978486"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/405978486" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#405978486">(Dec 05 2023 at 05:40)</a>:</h4>
<p>This one was very pleasant <a href="https://github.com/isaacvando/aoc/blob/main/2023/day4.roc">https://github.com/isaacvando/aoc/blob/main/2023/day4.roc</a></p>



<a name="406005714"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/406005714" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Bates <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#406005714">(Dec 05 2023 at 08:53)</a>:</h4>
<p>Here's my solution for day 4. Fun one!<br>
<a href="https://github.com/ryanb/advent-2023-roc/blob/main/day04/main.roc">https://github.com/ryanb/advent-2023-roc/blob/main/day04/main.roc</a></p>



<a name="406025249"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/406025249" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ahmad Sattar <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#406025249">(Dec 05 2023 at 10:28)</a>:</h4>
<p>Here's my day 4 :)<br>
<a href="https://gist.github.com/thehabbos007/dd053edca578454c4418c0ee6eee6618">https://gist.github.com/thehabbos007/dd053edca578454c4418c0ee6eee6618</a></p>



<a name="406627308"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/406627308" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikolaus Wettstein <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#406627308">(Dec 07 2023 at 21:56)</a>:</h4>
<p>just used <a href="https://lukewilliamboswell.github.io/roc-parser/">https://lukewilliamboswell.github.io/roc-parser/</a> for the first time to solve day 4 (<a href="https://github.com/ni-ko-o-kin/advent-of-code/blob/main/2023/04-solution-part1-v1.roc">https://github.com/ni-ko-o-kin/advent-of-code/blob/main/2023/04-solution-part1-v1.roc</a>)  instead of Str.split/List.drop*/aso. It is so nice to use. Thank you a lot for this great library <span class="user-mention" data-user-id="515757">@Luke Boswell</span> Have I used it correctly?</p>



<a name="406628868"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/406628868" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#406628868">(Dec 07 2023 at 22:06)</a>:</h4>
<p>Looks good <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> Glad it's helpful, I really enjoy using it too</p>



<a name="418739726"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/418739726" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#418739726">(Jan 29 2024 at 23:30)</a>:</h4>
<p>My day 4 solutions: <a href="https://github.com/Ocupe/advent-of-code-2023/tree/main/day_04">https://github.com/Ocupe/advent-of-code-2023/tree/main/day_04</a><br>
My implementation for part 2 was so slow that I thought I had an infinite loop, but it finished after 172 seconds :D<br>
Lots of room for improvement, but I am starting to like the expect workflow. It makes a test-driven way of writing a programme super easy. It would be cool if it would return the actual and expected value though.<br>
I also really like the <code>dbg (&lt;call your solve function&gt;)</code> setup that <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> <a href="#narrow/stream/358903-Advent-of-Code/topic/2023.20Day.203/near/405673752">posted</a></p>



<a name="418740475"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2023%20Day%204/near/418740475" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2023.20Day.204.html#418740475">(Jan 29 2024 at 23:36)</a>:</h4>
<p>Nevermind, I just learned how to print the actual value in an expect.  :)</p>
<div class="codehilite" data-code-language="roc"><pre><span></span><code>expect
    actual = matchesCount { id: "1", winningNumbers: [41, 48, 83, 86, 17], numbers: [83, 86, 6, 31, 17, 9, 48, 53] }
    actual == 5
</code></pre></div>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>