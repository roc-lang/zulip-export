<html>
<head><meta charset="utf-8"><title>2024 Day 3 · advent of code · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/index.html">advent of code</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html">2024 Day 3</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="485758586"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485758586" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485758586">(Dec 03 2024 at 05:24)</a>:</h4>
<p><span aria-label="partying face" class="emoji emoji-1f973" role="img" title="partying face">:partying_face:</span> <a href="https://gitlab.com/JanCVanB/aoc-2024/-/blob/main/day-03/part-1/main.roc">https://gitlab.com/JanCVanB/aoc-2024/-/blob/main/day-03/part-1/main.roc</a></p>



<a name="485758909"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485758909" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Barth <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485758909">(Dec 03 2024 at 05:27)</a>:</h4>
<p>Oh how i long for a <code>Str.walkUntil</code></p>



<a name="485760614"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485760614" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485760614">(Dec 03 2024 at 05:43)</a>:</h4>
<p><span aria-label="partying face" class="emoji emoji-1f973" role="img" title="partying face">:partying_face:</span> <a href="https://gitlab.com/JanCVanB/aoc-2024/-/blob/main/day-03/part-2/main.roc">https://gitlab.com/JanCVanB/aoc-2024/-/blob/main/day-03/part-2/main.roc</a></p>



<a name="485762588"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485762588" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485762588">(Dec 03 2024 at 06:00)</a>:</h4>
<p>I've got a nice solution... but I'm getting a fun one of these if I use my template <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span> </p>
<div class="codehilite"><pre><span></span><code>thread &#39;&lt;unnamed&gt;&#39; panicked at crates/compiler/mono/src/ir.rs:6166:56:
called `Option::unwrap()` on a `None` value
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="485763228"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485763228" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485763228">(Dec 03 2024 at 06:05)</a>:</h4>
<p>Oh found it... </p>
<h2>broken</h2>
<div class="codehilite"><pre><span></span><code>part1 : Str -&gt; Result Str _
</code></pre></div>
<h2>works</h2>
<div class="codehilite"><pre><span></span><code>part1 : Str -&gt; Result Str []
</code></pre></div>



<a name="485763384"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485763384" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oskar Hahn <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485763384">(Dec 03 2024 at 06:06)</a>:</h4>
<p>Here is mine <a href="https://github.com/ostcar/aoc2024/blob/main/day03.roc">https://github.com/ostcar/aoc2024/blob/main/day03.roc</a></p>



<a name="485763555"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485763555" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485763555">(Dec 03 2024 at 06:07)</a>:</h4>
<p>Ok, so here's my solution</p>
<p><a href="https://github.com/lukewilliamboswell/aoc/blob/main/2024/03.roc">https://github.com/lukewilliamboswell/aoc/blob/main/2024/03.roc</a></p>
<div class="codehilite"><pre><span></span><code>TIMING:
READING INPUT:  &lt;1ms
SOLVING PART 1: 1ms
SOLVING PART 2: 1ms
</code></pre></div>



<a name="485763560"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485763560" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oskar Hahn <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485763560">(Dec 03 2024 at 06:07)</a>:</h4>
<p><span class="user-mention" data-user-id="515757">@Luke Boswell</span> have a look at <a class="stream-topic" data-stream-id="463736" href="/#narrow/channel/463736-bugs/topic/Compiler.20crash.20when.20it.20can.20not.20find.20out.20the.20Err.20type">#bugs &gt; Compiler crash when it can not find out the Err type</a> </p>
<p>Another workaround the error is, if you append a <code>|&gt; Result.mapErr \_ -&gt; PleaseFixMe</code> to your function</p>



<a name="485763877"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485763877" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485763877">(Dec 03 2024 at 06:10)</a>:</h4>
<p>Ah nice, I'll fix the template so others wont run into that. Just tested and it fixes the problem. Just made it this instead</p>
<div class="codehilite"><pre><span></span><code>Solution err : {
    year : U64,
    day : U64,
    title : Str,
    part1 : Str -&gt; Result Str [Err]err,
    part2 : Str -&gt; Result Str [Err]err,
} where err implements Inspect
</code></pre></div>



<a name="485763912"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485763912" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485763912">(Dec 03 2024 at 06:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/358903-advent-of-code/topic/2024.20Day.203/near/485763555">said</a>:</p>
<blockquote>
<p>Ok, so here's my solution</p>
</blockquote>
<div class="spoiler-block"><div class="spoiler-header">
<p>Ooh...</p>
</div><div class="spoiler-content" aria-hidden="true">
<p>a parser! Nice.</p>
</div></div>



<a name="485764131"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485764131" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485764131">(Dec 03 2024 at 06:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="496321">Oskar Hahn</span> <a href="#narrow/channel/358903-advent-of-code/topic/2024.20Day.203/near/485763384">said</a>:</p>
<blockquote>
<p>Here is mine</p>
</blockquote>
<div class="spoiler-block"><div class="spoiler-header">
<p>Ooh...</p>
</div><div class="spoiler-content" aria-hidden="true">
<p>I like that you chose <code>do()</code> as the top split - I chose <code>don't()</code>. I wonder if that correlates to mapping vs recursion.</p>
</div></div>



<a name="485764564"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485764564" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485764564">(Dec 03 2024 at 06:16)</a>:</h4>
<p><span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> I forgot <code>List.sum</code> exists - no regrets on <code>List.walk 0 Num.add</code> <span aria-label="sunglasses" class="emoji emoji-1f60e" role="img" title="sunglasses">:sunglasses:</span></p>



<a name="485765145"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485765145" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485765145">(Dec 03 2024 at 06:21)</a>:</h4>
<p>I couldn't resist - <span class="user-mention" data-user-id="496321">@Oskar Hahn</span> I inverted my split like yours, to drop 8 lines of code <span aria-label="partying face" class="emoji emoji-1f973" role="img" title="partying face">:partying_face:</span></p>



<a name="485765398"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485765398" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485765398">(Dec 03 2024 at 06:23)</a>:</h4>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<p>When I saw <code>each 1-3 digit numbers</code> I definitely assumed there would be like 4 or more digit numbers in the input so I made a custom parser for this. Overkill it would seem. <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span> </p>
</div></div>



<a name="485766108"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485766108" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485766108">(Dec 03 2024 at 06:29)</a>:</h4>
<div class="spoiler-block"><div class="spoiler-header">
<p>RE: Spoiler</p>
</div><div class="spoiler-content" aria-hidden="true">
<p>If they had done that and my submission had failed, I wonder if I would've identified that requirement. If so, I <del>probably</del> certainly would've gone Mod Squad with <code>% 1000</code> <span aria-label="stuck out tongue closed eyes" class="emoji emoji-1f61d" role="img" title="stuck out tongue closed eyes">:stuck_out_tongue_closed_eyes:</span> </p>
</div></div>



<a name="485774051"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485774051" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oskar Hahn <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485774051">(Dec 03 2024 at 07:28)</a>:</h4>
<p>By the way: I don't think that splitting is a good solution. But if the solution works in a handful of milliseconds, there is no need to optimize it <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="485777640"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485777640" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485777640">(Dec 03 2024 at 07:51)</a>:</h4>
<p>There are so many metrics of goodness, and performance is only one!</p>



<a name="485778174"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485778174" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485778174">(Dec 03 2024 at 07:54)</a>:</h4>
<p>IMO, in most projects, the simplest solution furthers your high-level goals more than a high-performance one could.</p>



<a name="485778625"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485778625" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485778625">(Dec 03 2024 at 07:57)</a>:</h4>
<p>However, beauty/satisfaction is another metric, and that's always subjective (and sometimes aligned with high performance).</p>



<a name="485788712"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485788712" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485788712">(Dec 03 2024 at 08:47)</a>:</h4>
<p>Another day another solution: <a href="https://github.com/faldor20/aoc-template/blob/c398af5fde1169b8609ef4bd6b9465de0f380ab3/examples/2024/03.roc">https://github.com/faldor20/aoc-template/blob/c398af5fde1169b8609ef4bd6b9465de0f380ab3/examples/2024/03.roc</a><br>
I was keen to try out <span class="user-mention" data-user-id="515757">@Luke Boswell</span>'s parser. It took me a few iterations to get the right format. But I'm happy with the result.<br>
The performance on the other hand.....well look.... performance isn't everything right <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
<div class="codehilite"><pre><span></span><code>reading took: 0.039441ms
part1 took: 167.797391ms
part2 took: 168.628369ms
</code></pre></div>



<a name="485788946"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485788946" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485788946">(Dec 03 2024 at 08:48)</a>:</h4>
<p>I kind of want to try hand rolling a parser to find out why it's so crazily slow</p>



<a name="485791162"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485791162" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485791162">(Dec 03 2024 at 09:00)</a>:</h4>
<p>well.... a run of perf wasn't exactly revealing <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> <br>
<a href="/user_uploads/22008/7tZAS3bFTYAKG0jhtjbOLb_3/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/7tZAS3bFTYAKG0jhtjbOLb_3/image.png" title="image.png"><img data-original-dimensions="891x385" src="/user_uploads/thumbnail/22008/7tZAS3bFTYAKG0jhtjbOLb_3/image.png/840x560.webp"></a></div><p><span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> is the advice for perf still to run something like this?:</p>
<div class="codehilite"><pre><span></span><code>roc build --optimize --profiling examples/2024/03.roc
perf record -F999 --call-graph dwarf -- ./examples/2024/03
</code></pre></div>



<a name="485795872"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485795872" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485795872">(Dec 03 2024 at 09:20)</a>:</h4>
<p>Give samply a try maybe?</p>



<a name="485797413"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485797413" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Barth <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485797413">(Dec 03 2024 at 09:26)</a>:</h4>
<p>Splitting strings took me longer than everything else combined:<br>
<a href="https://github.com/r-bar/advent24/blob/master/day03/p2.roc">https://github.com/r-bar/advent24/blob/master/day03/p2.roc</a></p>
<p>Now to go see how everyone else got done so fast.</p>



<a name="485802760"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485802760" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Barth <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485802760">(Dec 03 2024 at 09:48)</a>:</h4>
<p>I am running my own simpler template, so I don't get fancy performance numbers out of the box.</p>
<div class="codehilite"><pre><span></span><code>❯ roc build --optimize p2.roc
0 errors and 0 warnings found in 800 ms
 while successfully building:

    p2
❯ poop &#39;./p2 input.txt&#39;
Benchmark 1 (898 runs): ./p2 input.txt
  measurement          mean ± σ            min … max           outliers
  wall_time          5.50ms ±  339us    5.11ms … 6.56ms          0 ( 0%)
  peak_rss            839KB ± 14.3KB     627KB …  856KB          6 ( 1%)
  cpu_cycles         22.0M  ±  291K     21.8M  … 25.5M          84 ( 9%)
  instructions       99.3M  ± 76.5      99.3M  … 99.3M          20 ( 2%)
  cache_references   39.0K  ± 62.8K     23.0K  …  980K         133 (15%)
  cache_misses       3.37K  ±  603      2.56K  … 6.39K          24 ( 3%)
  branch_misses      36.8K  ± 1.26K     35.7K  … 45.4K          59 ( 7%)
</code></pre></div>



<a name="485804242"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485804242" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485804242">(Dec 03 2024 at 09:54)</a>:</h4>
<p>sorry wtf is the poop command ?? <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="485804381"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485804381" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485804381">(Dec 03 2024 at 09:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/358903-advent-of-code/topic/2024.20Day.203/near/485795872">said</a>:</p>
<blockquote>
<p>Give samply a try maybe?</p>
</blockquote>
<p>I've not seen samply, that's cool! <br>
I realized I needed to disable the surgical linker! it's working with both perf and samply now.</p>



<a name="485804394"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485804394" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Barth <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485804394">(Dec 03 2024 at 09:55)</a>:</h4>
<p><a href="https://github.com/andrewrk/poop">https://github.com/andrewrk/poop</a></p>



<a name="485805038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485805038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485805038">(Dec 03 2024 at 09:58)</a>:</h4>
<p>Nothing particularly interersting really. but it's clearly spending its time inside  the parser.<br>
<a href="/user_uploads/22008/G7hxvsXn72u7v9CCEdN91ZRA/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/G7hxvsXn72u7v9CCEdN91ZRA/image.png" title="image.png"><img data-original-dimensions="1210x489" src="/user_uploads/thumbnail/22008/G7hxvsXn72u7v9CCEdN91ZRA/image.png/840x560.webp"></a></div>



<a name="485806117"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485806117" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485806117">(Dec 03 2024 at 10:03)</a>:</h4>
<p>okay, so basically all it's doing is concatenating strings:<br>
<a href="/user_uploads/22008/ToFEmko5LPEEj85Ty3jM5gKG/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/ToFEmko5LPEEj85Ty3jM5gKG/image.png" title="image.png"><img data-original-dimensions="485x109" src="/user_uploads/thumbnail/22008/ToFEmko5LPEEj85Ty3jM5gKG/image.png/840x560.webp"></a></div>



<a name="485813828"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485813828" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485813828">(Dec 03 2024 at 10:37)</a>:</h4>
<p>AHA! I understand what's happening!  <span class="user-mention" data-user-id="515757">@Luke Boswell</span> <br>
 you report your fancy errors when a parser fails, but my parser is failing almost  3 times for every single input <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span><br>
Because It's trying inputs sequentially.</p>
<p>It'd be interesting to explore a version of the parser library that handles failure quickly. We could potentially thread a config object through the parser that enables verbose error logging or fast error logging. <br>
That's what rust's <code>nom</code> seems to do and I understand it to be very very fast</p>



<a name="485813858"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485813858" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485813858">(Dec 03 2024 at 10:37)</a>:</h4>
<p>okay <span class="user-mention" data-user-id="515757">@Luke Boswell</span>  I removed every instance of string interpolation in your passing lib: </p>
<div class="codehilite"><pre><span></span><code>reading took: 0.032032ms
part1 took: 1.232324ms
part2 took: 1.291891ms⏎
</code></pre></div>
<p>Not a bad 120x speed up <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="485814530"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485814530" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485814530">(Dec 03 2024 at 10:40)</a>:</h4>
<p><a href="https://www.google.com/search?client=firefox-b-d&amp;q=nom+error+handling">https://www.google.com/search?client=firefox-b-d&amp;q=nom+error+handling</a> Is an interesting read on this</p>



<a name="485827301"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485827301" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nicola Peduzzi <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485827301">(Dec 03 2024 at 11:40)</a>:</h4>
<p>Leaned to use parser in Roc with this one! loved it</p>
<p><a href="https://github.com/thenikso/advent-of-code-2024-roc/blob/main/03.roc">https://github.com/thenikso/advent-of-code-2024-roc/blob/main/03.roc</a></p>



<a name="485837388"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485837388" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Stanley <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485837388">(Dec 03 2024 at 12:26)</a>:</h4>
<p>I also leaned heavily on <span class="user-mention" data-user-id="515757">@Luke Boswell</span> and his excellent parser. Congratulations on the documentation, whose copious use of examples <em>really</em> suits my horrible way of learning things. For Part 2 I just split on <code>do()</code> and <code>don't()</code>, crossing my fingers that they would follow in a regular pattern ... and found that they did. I felt a bit guilty not doing Part 2 from first to last as a parser -- but the splitting strategy actually gets things done faster, no doubt because my parser is not efficiently constructed and part 2 is therefore dealing with a much shorter string to parse.</p>



<a name="485867962"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485867962" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485867962">(Dec 03 2024 at 14:32)</a>:</h4>
<p>I just implemented a simple parser, walking the chars through a state machine.  Easy peasy:</p>
<p><a href="https://github.com/gamebox/aoc-2024/blob/main/day3/puzzle2/main.roc">https://github.com/gamebox/aoc-2024/blob/main/day3/puzzle2/main.roc</a></p>



<a name="485868330"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485868330" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485868330">(Dec 03 2024 at 14:34)</a>:</h4>
<p>I could probably get it faster if I removed all of the string work and added a case for each piece of each op</p>



<a name="485873799"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485873799" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485873799">(Dec 03 2024 at 14:55)</a>:</h4>
<p>Interesting, while doing that I got a very strange compiler crash:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>thread '&lt;unnamed&gt;' panicked at crates/compiler/mono/src/ir/decision_tree.rs:777:17:
IntLiteral([44, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], U8)
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="485874523"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485874523" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485874523">(Dec 03 2024 at 14:58)</a>:</h4>
<p>During mono?</p>



<a name="485876467"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485876467" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485876467">(Dec 03 2024 at 15:06)</a>:</h4>
<p>Updated the above with the current code.  Have to head out for work...let me know if anyone has any ideas</p>



<a name="485876635"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485876635" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485876635">(Dec 03 2024 at 15:06)</a>:</h4>
<p>Looks like the compiler is looking for an Identifier or a an Underscore pattern, but it's getting an IntLiteral</p>



<a name="485877012"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485877012" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485877012">(Dec 03 2024 at 15:07)</a>:</h4>
<p>This is the relevant code:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">                </span><span class="fm">debug_assert!</span><span class="p">(</span>
<span class="w">                    </span><span class="fm">matches!</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span><span class="w"> </span><span class="n">Pattern</span><span class="p">::</span><span class="n">Identifier</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Pattern</span><span class="p">::</span><span class="n">Underscore</span><span class="p">,),</span>
<span class="w">                    </span><span class="s">"{pattern:?}"</span><span class="p">,</span>
<span class="w">                </span><span class="p">);</span>
</code></pre></div>



<a name="485877438"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485877438" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485877438">(Dec 03 2024 at 15:09)</a>:</h4>
<blockquote>
<p><div class="codehilite"><pre><span></span><code>thread &#39;&lt;unnamed&gt;&#39; panicked at crates/compiler/mono/src/ir/decision_tree.rs:777:17:
IntLiteral([44, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], U8)
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div><br>
</p>
</blockquote>
<p>I could not find any existing issue about this, can you file a new one?</p>



<a name="485877904"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485877904" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485877904">(Dec 03 2024 at 15:11)</a>:</h4>
<p>I'll have to figure out a minimal repro</p>



<a name="485877930"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485877930" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485877930">(Dec 03 2024 at 15:11)</a>:</h4>
<p>I can try to do that tonight</p>



<a name="485877975"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485877975" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485877975">(Dec 03 2024 at 15:11)</a>:</h4>
<p>Damn AOC really bites into my limited contribution time</p>



<a name="485878775"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485878775" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485878775">(Dec 03 2024 at 15:14)</a>:</h4>
<blockquote>
<p>I'll have to figure out a minimal repro</p>
</blockquote>
<p>Feel free to toss in the entire thing if you're short on time :)</p>



<a name="485880464"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485880464" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485880464">(Dec 03 2024 at 15:21)</a>:</h4>
<p>Ok</p>



<a name="485883965"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485883965" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485883965">(Dec 03 2024 at 15:35)</a>:</h4>
<p>Created: <a href="https://github.com/roc-lang/roc/issues/7302">https://github.com/roc-lang/roc/issues/7302</a></p>



<a name="485956726"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485956726" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485956726">(Dec 03 2024 at 21:27)</a>:</h4>
<p>Updated this with a lot of debugging findings</p>



<a name="485966363"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485966363" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485966363">(Dec 03 2024 at 22:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="651372">Eli Dowling</span> <a href="#narrow/channel/358903-advent-of-code/topic/2024.20Day.203/near/485813858">said</a>:</p>
<blockquote>
<p>okay <span class="user-mention silent" data-user-id="515757">Luke Boswell</span>  I removed every instance of string interpolation in your passing lib: </p>
<div class="codehilite"><pre><span></span><code>reading took: 0.032032ms
part1 took: 1.232324ms
part2 took: 1.291891ms⏎
</code></pre></div>
<p>Not a bad 120x speed up <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
</blockquote>
<p><span class="user-mention" data-user-id="651372">@Eli Dowling</span> do you have anything more on this I could see? I'm interested to know if there is anything here we can roll into the parser for others to benefit from</p>



<a name="485967104"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485967104" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485967104">(Dec 03 2024 at 22:33)</a>:</h4>
<p>Haven't seen Eli's solution, but that's the exact thing I was trying to do when my compilation blew up.  Hoping to see similar improvements :-)</p>



<a name="485970098"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485970098" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485970098">(Dec 03 2024 at 22:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="651372">Eli Dowling</span> <a href="#narrow/stream/358903-advent-of-code/topic/2024.20Day.203/near/485791162">said</a>:</p>
<blockquote>
<p>well.... a run of perf wasn't exactly revealing <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> <br>
<a href="/user_uploads/22008/7tZAS3bFTYAKG0jhtjbOLb_3/image.png">image.png</a></p>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> is the advice for perf still to run something like this?:</p>
<p><div class="codehilite"><pre><span></span><code>roc build --optimize --profiling examples/2024/03.roc
perf record -F999 --call-graph dwarf -- ./examples/2024/03
</code></pre></div><br>
</p>
</blockquote>
<p>I'm late to the party. Yes with the caveat that on Linux you want <code>--linker=legacy</code> and it works best of the platform is built with debug info.</p>



<a name="485984666"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485984666" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485984666">(Dec 04 2024 at 00:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/358903-advent-of-code/topic/2024.20Day.203/near/485966363">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="651372">Eli Dowling</span> <a href="#narrow/channel/358903-advent-of-code/topic/2024.20Day.203/near/485813858">said</a>:</p>
<blockquote>
<p>okay <span class="user-mention silent" data-user-id="515757">Luke Boswell</span>  I removed every instance of string interpolation in your passing lib: </p>
<div class="codehilite"><pre><span></span><code>reading took: 0.032032ms
part1 took: 1.232324ms
part2 took: 1.291891ms⏎
</code></pre></div>
<p>Not a bad 120x speed up <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
</blockquote>
<p><span class="user-mention silent" data-user-id="651372">Eli Dowling</span> do you have anything more on this I could see? I'm interested to know if there is anything here we can roll into the parser for others to benefit from</p>
</blockquote>
<p>I'll look into it, but currently I made it faster by basically removing all error logging... Not something you want. </p>
<p>I'd say we need to thread a parser config through, and make the logs a tag union, either just a tag indicating the current node that failed which is what you do normally, it's full string log if we have the debug config setting. </p>
<p>Definitely take a look at the link to nom I shared where they talk about efficient error handling :) </p>
<p>Another thing we could do is have a parser function that specifically allows attaching errors to the parser.  So if it gets an error it adds in a message, that wya the user can give their own parser errors! Angstrom in ocaml does this, and I like it :)</p>



<a name="485988752"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485988752" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485988752">(Dec 04 2024 at 01:20)</a>:</h4>
<p>Here's my solution, I thought this one was fun <a href="https://github.com/isaacvando/aoc/blob/main/2024/3.roc">https://github.com/isaacvando/aoc/blob/main/2024/3.roc</a></p>



<a name="485990750"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/485990750" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#485990750">(Dec 04 2024 at 01:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="651372">Eli Dowling</span> <a href="#narrow/stream/358903-advent-of-code/topic/2024.20Day.203/near/485984666">said</a>:</p>
<blockquote>
<p>Another thing we could do is have a parser function that specifically allows attaching errors to the parser.  So if it gets an error it adds in a message, that wya the user can give their own parser errors! Angstrom in ocaml does this, and I like it :)</p>
</blockquote>
<p>This is also what’s done in FParsec which is what I used for the parser for my language.  I was about to explore it more once I started to rewrite the parser - but that’s on hold for now, maybe indefinitely.</p>



<a name="486003501"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/486003501" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#486003501">(Dec 04 2024 at 03:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="781658">Anthony Bullard</span> <a href="#narrow/channel/358903-advent-of-code/topic/2024.20Day.203/near/485883965">said</a>:</p>
<blockquote>
<p>Created: <a href="https://github.com/roc-lang/roc/issues/7302">https://github.com/roc-lang/roc/issues/7302</a></p>
</blockquote>
<p>I finally fixed this through some convoluted means of moving all literal matching out into the guards.  I don't know if that's why, but the solution is about the same as the old one.  So a terrific <del>waste of time</del> learning moment. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="486009692"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/486009692" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesse Nutt <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#486009692">(Dec 04 2024 at 04:14)</a>:</h4>
<p>It's a little under the wire, but here's my stab at it: <a href="https://github.com/Saalico/aoc_2024/blob/main/day3/main.roc">https://github.com/Saalico/aoc_2024/blob/main/day3/main.roc</a></p>
<p>I'm very much a newb at coding, especially roc, so open to suggestions/call outs if any of you are so inclined. Happy coding!</p>



<a name="486036141"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/486036141" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Camarasa <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#486036141">(Dec 04 2024 at 08:29)</a>:</h4>
<p>Already one day late in the advent of code <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> <a href="https://github.com/RobinCamarasa/Advent-of-code/blob/master/2024/day03/RobinCamarasa/main.roc">https://github.com/RobinCamarasa/Advent-of-code/blob/master/2024/day03/RobinCamarasa/main.roc</a></p>



<a name="486163455"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/486163455" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#486163455">(Dec 04 2024 at 19:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="688206">Jesse Nutt</span> <a href="#narrow/channel/358903-advent-of-code/topic/2024.20Day.203/near/486009692">said</a>:</p>
<blockquote>
<p>It's a little under the wire, but here's my stab at it: <a href="https://github.com/Saalico/aoc_2024/blob/main/day3/main.roc">https://github.com/Saalico/aoc_2024/blob/main/day3/main.roc</a></p>
<p>I'm very much a newb at coding, especially roc, so open to suggestions/call outs if any of you are so inclined. Happy coding!</p>
</blockquote>
<p>I like your solution witch looks very concise but you're lucky that the input didn't test your failures <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> (I've seen the same issue in several other solutions)</p>
<p>Your response to <code>mul(2,4)3,5)</code> might be <code>23</code> but the good one is <code>8</code>.</p>



<a name="486215202"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/486215202" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jesse Nutt <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#486215202">(Dec 05 2024 at 02:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="528453">Ghislain</span> <a href="#narrow/channel/358903-advent-of-code/topic/2024.20Day.203/near/486163455">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="688206">Jesse Nutt</span> <a href="#narrow/channel/358903-advent-of-code/topic/2024.20Day.203/near/486009692">said</a>:</p>
<blockquote>
<p>It's a little under the wire, but here's my stab at it: <a href="https://github.com/Saalico/aoc_2024/blob/main/day3/main.roc">https://github.com/Saalico/aoc_2024/blob/main/day3/main.roc</a></p>
<p>I'm very much a newb at coding, especially roc, so open to suggestions/call outs if any of you are so inclined. Happy coding!</p>
</blockquote>
<p>I like your solution witch looks very concise but you're lucky that the input didn't test your failures <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> (I've seen the same issue in several other solutions)</p>
<p>Your response to <code>mul(2,4)3,5)</code> might be <code>23</code> but the good one is <code>8</code>.</p>
</blockquote>
<p>Ack! That's embarrassing!  Is there really such a case that other puzzle inputs would have thrown that edge case? </p>
<p>Either way, let's take another swing:</p>
<div class="codehilite"><pre><span></span><code>part1 = \in -&gt;
    Str.splitOn in &quot;)&quot;
    |&gt; List.joinMap \x -&gt;
        if Str.contains x &quot;mul(&quot; then
            Str.splitOn x &quot;mul(&quot;
        else
            [&quot;&quot;]
    |&gt; List.keepIf \chunk -&gt; (List.all (Str.toUtf8 chunk) \c -&gt; List.contains closeToken c) &amp;&amp; !(Str.isEmpty chunk)
    |&gt; List.keepOks \x -&gt; mulString x
    |&gt; List.sum
</code></pre></div>



<a name="486581802"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/486581802" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#486581802">(Dec 06 2024 at 19:31)</a>:</h4>
<p>Hmm, why don't we use a regex here? (Because roc does not yet support it properly?)</p>



<a name="486967352"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/486967352" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#486967352">(Dec 09 2024 at 11:11)</a>:</h4>
<p>Yes, we don't have a regex package yet</p>



<a name="487081573"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/487081573" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#487081573">(Dec 09 2024 at 19:32)</a>:</h4>
<p>The first one solved by the Roc Claude agent:<br>
<a href="/user_uploads/22008/aRNoYF5_jSYeebs778v7gN33/main_claude.roc">main_claude.roc</a><br>
<a href="/user_uploads/22008/fwyR18D9tjStAMnkaeKovl4s/prompt-aoc-3-part1.txt">prompt-aoc-3-part1.txt</a><br>
<a href="/user_uploads/22008/T2mKGMLpC8c21td4-UUfSbKr/prompt-aoc-3-part2.txt">prompt-aoc-3-part2.txt</a></p>
<p>I did have to fiddle with the prompt a bit; it was using some old Roc syntax, I told it to use intermediary variables with <code>expect</code> and had to show it how to properly use <code>dbg</code>.</p>



<a name="487083058"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/487083058" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#487083058">(Dec 09 2024 at 19:39)</a>:</h4>
<p>Hey, one thing that would be cool is actually recording you doing one of these end-to-end.</p>



<a name="487205075"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/487205075" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#487205075">(Dec 10 2024 at 09:56)</a>:</h4>
<p>uhu, I might do a simple screen recording later :)</p>



<a name="490131185"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/490131185" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eelco Hoekema <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#490131185">(Dec 20 2024 at 10:15)</a>:</h4>
<p>I am a bit slow, christmas holidays only started now, so i hope to have a little more time to spend on these puzzles. </p>
<p>I try to solve <a href="https://github.com/roc-lang/roc/issues/3">#3</a> with a parser, because, i like to understand parsers. I am not yet grasping the two type </p>
<div class="codehilite"><pre><span></span><code>mulParser : Parser String.Utf8 Mul
mulParser =
    const (\first -&gt; \second -&gt; { first: first, second: second })
    |&gt; skip (string &quot;mul(&quot;)
    |&gt; keep digits
    |&gt; skip (string &quot;,&quot;)
    |&gt; keep digits
    |&gt; skip (string &quot;)&quot;)

mParser : Parser String.Utf8 Mul
mParser =
    const identity
    |&gt; skip (chompUntil &quot;mul(&quot;)
    |&gt; keep mulParser
</code></pre></div>
<p>So now i get a compiler issue stating:</p>
<div class="codehilite"><pre><span></span><code>── TYPE MISMATCH in src/S2024/D03.roc ──────────────────────────────────────────

Something is off with the body of the mParser definition:

64│   mParser : Parser String.Utf8 Mul
65│   mParser =
66│&gt;      const identity #
67│&gt;      |&gt; skip (chompUntil &quot;mul(&quot;)
68│&gt;      |&gt; keep mulParser

This Parser.keep call produces:

    Parser (List Str) Mul

But the type annotation on mParser says it should be:

    Parser (List U8) Mul
</code></pre></div>
<p>Which leaves the question, how do i map a <code>Parser (List Str) Mul</code> to a <code>Parser (List U8) Mul</code>, or more general, a how to map a <code>Parser a x</code> to a <code> Parser b x</code>?</p>



<a name="490176240"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/490176240" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#490176240">(Dec 20 2024 at 14:52)</a>:</h4>
<p><span class="user-mention" data-user-id="515757">@Luke Boswell</span></p>



<a name="490200337"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/490200337" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#490200337">(Dec 20 2024 at 17:08)</a>:</h4>
<p>I'm not very good at parser, but I think the fundamental issue is that <code>chompUntil</code> is meant to work on single characters, not full strings.</p>
<p>By saying <code>chompUntil "mul("</code>, you are requesting that the input be a <code>List Str</code> like <code>["test", "mul()", "other", "something", "mul(", "last"]</code>. Then it would consume strings looking for exact matches until it ends up only having the list <code>["mul(", "last"]</code>. I don't think this is the behaviour you want.</p>



<a name="490201038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/490201038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#490201038">(Dec 20 2024 at 17:13)</a>:</h4>
<p>My gut feeling is that you use something like <code>alt</code> to attempt to parse a <code>mulParser</code>. If that fails, you would fall back on a parser that just consumes a single character.</p>



<a name="490201052"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/490201052" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#490201052">(Dec 20 2024 at 17:13)</a>:</h4>
<p>Then loop that</p>



<a name="490201131"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/2024%20Day%203/near/490201131" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/2024.20Day.203.html#490201131">(Dec 20 2024 at 17:13)</a>:</h4>
<p>but there is probably a smarter way. I'm really not a fan of parser combinators most of the time so I don't really know how to use them well.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>