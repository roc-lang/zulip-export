<html>
<head><meta charset="utf-8"><title>{unknown: _field} · advent of code · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/index.html">advent of code</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/.7Bunknown.3A.20_field.7D.html">{unknown: _field}</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="561573266"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/%7Bunknown%3A%20_field%7D/near/561573266" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aurélien Geron <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/.7Bunknown.3A.20_field.7D.html#561573266">(Dec 03 2025 at 06:53)</a>:</h4>
<p>Hi!<br>
I'm trying to do day 1 of AoC 2025. I'm getting a compiler error that I really don't understand:</p>
<div class="codehilite"><pre><span></span><code>-- TYPE MISMATCH ---------------------------------

This expression is used in an unexpected way:
   ┌─ day01.roc:10:19
   │
10 │             num = num_str.to_i32()?
   │                   ^^^^^^^

It has the type:
    Str

But I expected it to be:
    { unknown: _field }

Found 1 error(s) and 0 warning(s) for day01.roc.

Roc crashed: non-exhaustive match
</code></pre></div>
<p>Here's my program:</p>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="n">app</span><span class="w"> </span><span class="o">[</span><span class="n">main!</span><span class="o">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="ss">pf</span><span class="p">:</span><span class="w"> </span><span class="n">platform</span><span class="w"> </span><span class="s2">"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst"</span><span class="w"> </span><span class="p">}</span>

<span class="n">import</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Stdout</span>

<span class="n">parse_instruction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">chars</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">match</span><span class="w"> </span><span class="n">chars</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">[]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Err</span><span class="p">(</span><span class="no">ParsingError</span><span class="p">)</span>
<span class="w">        </span><span class="o">[</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="n">rest</span><span class="o">]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">num_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">Str</span><span class="o">.</span><span class="n">from_utf8</span><span class="p">(</span><span class="n">rest</span><span class="p">)?</span>
<span class="w">            </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">num_str</span><span class="o">.</span><span class="n">to_i32</span><span class="p">()?</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'L'</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="no">Ok</span><span class="p">(</span><span class="o">-</span><span class="n">num</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="no">Ok</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>


<span class="n">main!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">_args</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse_instruction</span><span class="p">(</span><span class="s2">"L12"</span><span class="o">.</span><span class="n">to_utf8</span><span class="p">())</span>
<span class="w">    </span><span class="n">match</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="no">Ok</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="no">Stdout</span><span class="o">.</span><span class="n">line!</span><span class="p">(</span><span class="n">num</span><span class="o">.</span><span class="n">to_str</span><span class="p">())</span>
<span class="w">            </span><span class="no">Ok</span><span class="p">({})</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Err</span><span class="p">(</span><span class="no">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<a name="561606533"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/%7Bunknown%3A%20_field%7D/near/561606533" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/.7Bunknown.3A.20_field.7D.html#561606533">(Dec 03 2025 at 10:12)</a>:</h4>
<p>I'll take a look</p>



<a name="561694227"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/%7Bunknown%3A%20_field%7D/near/561694227" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/.7Bunknown.3A.20_field.7D.html#561694227">(Dec 03 2025 at 16:07)</a>:</h4>
<p>I got sidetracked by adding missing tests, I'm almost done though</p>



<a name="561727323"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/%7Bunknown%3A%20_field%7D/near/561727323" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/.7Bunknown.3A.20_field.7D.html#561727323">(Dec 03 2025 at 18:36)</a>:</h4>
<p>Instead of <code>num_str.to_i32()</code> it needs to be <code>I32.from_str(num_str)</code>.</p>



<a name="561727373"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/%7Bunknown%3A%20_field%7D/near/561727373" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/.7Bunknown.3A.20_field.7D.html#561727373">(Dec 03 2025 at 18:37)</a>:</h4>
<p>I will make an issue for the bad error message</p>



<a name="561994910"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/358903-advent%20of%20code/topic/%7Bunknown%3A%20_field%7D/near/561994910" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aurélien Geron <a href="https://roc-lang.github.io/zulip-export/stream/358903-advent-of-code/topic/.7Bunknown.3A.20_field.7D.html#561994910">(Dec 04 2025 at 23:59)</a>:</h4>
<p>I've solved both parts of AoC 2025 Day 01 using the old compiler, then I ported the code as best I could to the new compiler, and <code>roc check day01.roc</code> says there are no errors, but I get a segfault at runtime. I tried to activate the ref counting logs as instructed by <span class="user-mention" data-user-id="515757">@Luke Boswell</span> , but I'm not sure I did it correctly because I don't understand how I can use this output. Here's the full program:</p>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="n">app</span><span class="w"> </span><span class="o">[</span><span class="n">main!</span><span class="o">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="ss">pf</span><span class="p">:</span><span class="w"> </span><span class="n">platform</span><span class="w"> </span><span class="s2">"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst"</span><span class="w"> </span><span class="p">}</span>

<span class="n">import</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Stdout</span>

<span class="n">data</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="p">\\</span><span class="no">L50</span>
<span class="w">    </span><span class="p">\\</span><span class="no">L12</span>
<span class="w">    </span><span class="p">\\</span><span class="no">R13</span>
<span class="w">    </span><span class="p">\\</span><span class="no">L1</span>
<span class="w">    </span><span class="p">\\</span><span class="no">L5</span>
<span class="w">    </span><span class="p">\\</span><span class="no">R5</span>


<span class="ss">parse_instruction</span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="no">U8</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">(</span><span class="no">I32</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span>
<span class="n">parse_instruction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">chars</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">match</span><span class="w"> </span><span class="n">chars</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">[]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Err</span><span class="p">(</span><span class="no">ParsingError</span><span class="p">)</span>
<span class="w">        </span><span class="o">[</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">rest</span><span class="o">]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">num_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">Str</span><span class="o">.</span><span class="n">from_utf8</span><span class="p">(</span><span class="n">rest</span><span class="p">)?</span>
<span class="w">            </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">I32</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="n">num_str</span><span class="p">)?</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">'L'</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="no">Ok</span><span class="p">(</span><span class="o">-</span><span class="n">num</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="no">Ok</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="ss">count_zeroes_with_clicks</span><span class="p">:</span><span class="w"> </span><span class="no">I32</span><span class="p">,</span><span class="w"> </span><span class="no">I32</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">I32</span>
<span class="n">count_zeroes_with_clicks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">new_pos</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">div_floor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">i</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="sr">//</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="sr">//</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">incr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">div_floor</span><span class="p">(</span><span class="n">new_pos</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">div_floor</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">new_pos</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">incr</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="n">new_pos</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">})</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">incr</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="ss">compute_password</span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="no">I32</span><span class="p">),</span><span class="w"> </span><span class="no">I32</span><span class="p">,</span><span class="w"> </span><span class="no">I32</span><span class="p">,</span><span class="w"> </span><span class="no">Bool</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">I32</span>
<span class="n">compute_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">instructions</span><span class="p">,</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="n">with_clicks</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">match</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">[]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">count</span>
<span class="w">        </span><span class="o">[</span><span class="n">inst</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">rest</span><span class="o">]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">new_pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">inst</span>
<span class="w">            </span><span class="n">new_count</span><span class="w"> </span><span class="o">=</span>
<span class="w">                </span><span class="n">count</span>
<span class="w">                </span><span class="o">+</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">with_clicks</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">count_zeroes_with_clicks</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">new_pos</span><span class="p">)</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">new_pos</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="mi">1</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="mi">0</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="n">rest</span><span class="o">-&gt;</span><span class="n">compute_password</span><span class="p">(</span><span class="n">new_pos</span><span class="p">,</span><span class="w"> </span><span class="n">new_count</span><span class="p">,</span><span class="w"> </span><span class="n">with_clicks</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="ss">map_try</span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">))</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">(</span><span class="no">List</span><span class="p">(</span><span class="n">b</span><span class="p">),</span><span class="w"> </span><span class="n">c</span><span class="p">)</span>
<span class="n">map_try</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">to_result_fun</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">list</span><span class="o">-&gt;</span><span class="n">walk_try</span><span class="p">(</span>
<span class="w">        </span><span class="o">[]</span><span class="p">,</span>
<span class="w">        </span><span class="o">|</span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">elem</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">match</span><span class="w"> </span><span class="n">to_result_fun</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="no">Ok</span><span class="p">(</span><span class="n">ok</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Ok</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ok</span><span class="p">))</span>
<span class="w">                </span><span class="no">Err</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Err</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>

<span class="ss">walk_try</span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">))</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">)</span>
<span class="n">walk_try</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">init</span><span class="p">,</span><span class="w"> </span><span class="n">func</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">match</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">[]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="no">Ok</span><span class="p">(</span><span class="n">init</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="o">[</span><span class="n">val</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">rest</span><span class="o">]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">maybe_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">init</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">)</span>
<span class="w">            </span><span class="n">match</span><span class="w"> </span><span class="n">maybe_state</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="no">Ok</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">walk_try</span><span class="p">(</span><span class="n">rest</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">func</span><span class="p">)</span>
<span class="w">                </span><span class="no">Err</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Err</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">main!</span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="no">Str</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">({</span><span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="o">[</span><span class="no">Exit</span><span class="p">(</span><span class="no">I32</span><span class="p">)</span><span class="o">]</span><span class="p">)</span>
<span class="n">main!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">_args</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">lines_utf8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">.</span><span class="n">split_on</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">s</span><span class="o">|</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="n">to_utf8</span><span class="p">())</span>
<span class="w">    </span><span class="n">maybe_instructions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lines_utf8</span><span class="o">-&gt;</span><span class="n">map_try</span><span class="p">(</span><span class="n">parse_instruction</span><span class="p">)</span>
<span class="w">    </span><span class="n">match</span><span class="w"> </span><span class="n">maybe_instructions</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="no">Ok</span><span class="p">(</span><span class="n">instructions</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">result1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">instructions</span><span class="o">-&gt;</span><span class="n">compute_password</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">False</span><span class="p">)</span>
<span class="w">            </span><span class="no">Stdout</span><span class="o">.</span><span class="n">line!</span><span class="p">(</span><span class="n">result1</span><span class="o">.</span><span class="n">to_str</span><span class="p">())</span>

<span class="w">            </span><span class="n">result2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">instructions</span><span class="o">-&gt;</span><span class="n">compute_password</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">True</span><span class="p">)</span>
<span class="w">            </span><span class="no">Stdout</span><span class="o">.</span><span class="n">line!</span><span class="p">(</span><span class="n">result2</span><span class="o">.</span><span class="n">to_str</span><span class="p">())</span>

<span class="w">            </span><span class="no">Ok</span><span class="p">({})</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="no">Stdout</span><span class="o">.</span><span class="n">line!</span><span class="p">(</span><span class="s2">"Error"</span><span class="p">)</span>
<span class="w">            </span><span class="no">Err</span><span class="p">(</span><span class="no">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Here's the output:</p>
<div class="codehilite"><pre><span></span><code>debug: [HOST] Building args...
debug: [ALLOC] ptr=0x1034c0008 size=40 align=8
debug: [ALLOC] ptr=0x1034e0008 size=137 align=8
debug: [HOST] args_list ptr=0x1034c0018 len=1
debug: [HOST] Calling roc__main_for_host...
error: Child process /Users/ageron/Library/Caches/roc/5931167c7313ef73dbb36e68e48b39cf/temp/roc-tmp-ZtoLGEfLd8V5hXupRG23Usp7b6PNT2Iz/roc_run_994723065 killed by signal: 11
error: Child process crashed with segmentation fault (SIGSEGV)
</code></pre></div>
<p>Thanks for your help.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>