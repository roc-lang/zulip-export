<html>
<head><meta charset="utf-8"><title>Remove wildcard type vars from Roc · compiler development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/index.html">compiler development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html">Remove wildcard type vars from Roc</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="491533324"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533324" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533324">(Jan 01 2025 at 22:26)</a>:</h4>
<blockquote>
<p>I think we should just remove wildcards and make this whole class of edge cases disappear</p>
</blockquote>
<p>Yeah, it only has very limited correct use and most people do not understand those use cases.</p>



<a name="491533354"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533354" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533354">(Jan 01 2025 at 22:26)</a>:</h4>
<p>Really the main correct use case is function inputs that are not cared abot.</p>



<a name="491533377"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533377" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533377">(Jan 01 2025 at 22:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/channel/395097-compiler-development/topic/Wildcard.20in.20opaque.20types/near/491533354">said</a>:</p>
<blockquote>
<p>Really the main correct use case is function inputs that are not cared abot.</p>
</blockquote>
<p>That's what <code>_</code> is for though...</p>



<a name="491533389"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533389" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533389">(Jan 01 2025 at 22:27)</a>:</h4>
<p>no</p>



<a name="491533452"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533452" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533452">(Jan 01 2025 at 22:28)</a>:</h4>
<p><code>_</code> constrains to a specific type</p>



<a name="491533455"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533455" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533455">(Jan 01 2025 at 22:28)</a>:</h4>
<p><code>*</code> represents "any type"</p>



<a name="491533476"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533476" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533476">(Jan 01 2025 at 22:29)</a>:</h4>
<p><code>_</code> you can still use the underlying type cause underscore means the compiler will fill it in for you:</p>
<p><code>List _ -&gt; U64</code> is a valid singnature for List.get on a list of <code>U64</code>.<br>
<code>List * -&gt; U64</code> can only return the length or capacity and can never access an element.</p>



<a name="491533480"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533480" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533480">(Jan 01 2025 at 22:29)</a>:</h4>
<p>Oh ... that's interesting. so <code>*</code> is polymorphic and <code>_</code> isn't?</p>



<a name="491533492"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533492" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533492">(Jan 01 2025 at 22:29)</a>:</h4>
<p>Which is why a function that accepts <code>[Red, Blue]_</code> called with <code>[Red, Blue, Green]</code> and <code>[Red, Blue, Yellow]</code> will only resolve correctly for one of them</p>



<a name="491533493"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533493" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533493">(Jan 01 2025 at 22:29)</a>:</h4>
<p><code>_</code> is more flexible. Technically <code>_</code> could resolve to <code>*</code></p>



<a name="491533498"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533498" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533498">(Jan 01 2025 at 22:29)</a>:</h4>
<p><code>*</code> isn't quite polymorphic, I think</p>



<a name="491533595"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533595" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533595">(Jan 01 2025 at 22:31)</a>:</h4>
<p>It means "this variable must work for any type replaced", so it can only work for, say, empty lists</p>



<a name="491533648"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533648" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533648">(Jan 01 2025 at 22:32)</a>:</h4>
<p>Since no matter what type [] is, you can't get a value out of it, so the elem type doesn't matter</p>



<a name="491533656"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533656" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533656">(Jan 01 2025 at 22:32)</a>:</h4>
<blockquote>
<p>so it can only work for, say, empty lists</p>
</blockquote>
<p>If talking about a concrete value. Means something different for a function input.</p>



<a name="491533668"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533668" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533668">(Jan 01 2025 at 22:32)</a>:</h4>
<p>Yeah...</p>



<a name="491533671"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533671" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533671">(Jan 01 2025 at 22:32)</a>:</h4>
<p>^ Another reason</p>



<a name="491533755"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533755" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533755">(Jan 01 2025 at 22:34)</a>:</h4>
<p>Anyway, <code>_</code> is just a request for the compiler to fill in the blank, it is super flexible.</p>
<div class="codehilite"><pre><span></span><code>» x : List _ -&gt; _
… x = \l -&gt; List.get l 0 ?? 24

&lt;function&gt; : List (Num a) -&gt; Num a
» y : List _ -&gt; _
… y = \l -&gt; List.map l \i -&gt; i - 1

&lt;function&gt; : List (Num a) -&gt; List (Num a)
» z : List _ -&gt; _
… z = \l -&gt; List.get l 1

&lt;function&gt; : List a -&gt; Result a [OutOfBounds]
</code></pre></div>



<a name="491533764"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533764" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533764">(Jan 01 2025 at 22:34)</a>:</h4>
<p>None of those functions are valid if <code>*</code> was used for the first blank instead of <code>_</code></p>



<a name="491533880"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533880" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533880">(Jan 01 2025 at 22:36)</a>:</h4>
<p>Anyway, I personally would prefer to restrict <code>*</code> to only be allowed in function inputs. I think that is the main valid use case for it. Ban it in all other locations.</p>
<p>But I understand just using an arbitrary letter instead of <code>*</code></p>



<a name="491533911"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533911" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533911">(Jan 01 2025 at 22:37)</a>:</h4>
<p>Seems simpler to just get rid of it</p>



<a name="491533963"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533963" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533963">(Jan 01 2025 at 22:38)</a>:</h4>
<p>And then beginners don't say "oh, what's this" followed by "why can't I use it elsewhere"</p>



<a name="491533970"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533970" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533970">(Jan 01 2025 at 22:38)</a>:</h4>
<p>That definitely wasn't what I came here for... but it has come up before</p>



<a name="491533976"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533976" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533976">(Jan 01 2025 at 22:38)</a>:</h4>
<p>I'm ON a MISSION</p>



<a name="491533981"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533981" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533981">(Jan 01 2025 at 22:38)</a>:</h4>
<p>You are a convenient vehicle</p>



<a name="491533997"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491533997" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491533997">(Jan 01 2025 at 22:38)</a>:</h4>
<p>I just really hate the arbitrary letters gunking up my type signatures.</p>



<a name="491534017"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534017" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534017">(Jan 01 2025 at 22:39)</a>:</h4>
<p>Me too</p>



<a name="491534029"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534029" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534029">(Jan 01 2025 at 22:39)</a>:</h4>
<p>Okay, separate thread incoming</p>



<a name="491534036"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534036" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534036">(Jan 01 2025 at 22:39)</a>:</h4>
<p>(unless I can find an old one to necro)</p>



<a name="491534117"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534117" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534117">(Jan 01 2025 at 22:40)</a>:</h4>
<p>i'm pretty sure <code>*</code> and <code>a</code> like variables have already been banned from all non-generalizable positions and only functions are generalizable</p>



<a name="491534149"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534149" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534149">(Jan 01 2025 at 22:41)</a>:</h4>
<p>You can still do stuff like this:</p>
<div class="codehilite"><pre><span></span><code>» x : List *
… x = []
</code></pre></div>



<a name="491534208"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534208" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534208">(Jan 01 2025 at 22:42)</a>:</h4>
<p>And this:</p>
<div class="codehilite"><pre><span></span><code>» y : {} -&gt; List *
… y = \{} -&gt; []
</code></pre></div>



<a name="491534211"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534211" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534211">(Jan 01 2025 at 22:42)</a>:</h4>
<p>Yep, this typechecks</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="kn">module</span><span class="w"> </span><span class="err">[</span><span class="nc">num</span><span class="p">,</span><span class="w"> </span><span class="nv">func</span><span class="p">,</span><span class="w"> </span><span class="nv">func2</span><span class="p">]</span>

<span class="nv">num</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Num</span><span class="w"> </span><span class="nf">*</span>
<span class="nv">num</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="mi">123</span>

<span class="nv">func</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nf">*</span>
<span class="nv">func</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="p">{}</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">[]</span>

<span class="nv">func2</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nf">*</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">U64</span>
<span class="nv">func2</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">_list</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">123</span>
</code></pre></div>



<a name="491534234"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534234" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534234">(Jan 01 2025 at 22:43)</a>:</h4>
<blockquote>
<p><div class="codehilite"><pre><span></span><code>num : Num *
num = 123
</code></pre></div><br>
</p>
</blockquote>
<p>This surprises me. I think that is just a bug</p>



<a name="491534256"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534256" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534256">(Jan 01 2025 at 22:43)</a>:</h4>
<p>Oh, that's probably part of the one I got assigned</p>



<a name="491534273"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534273" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534273">(Jan 01 2025 at 22:43)</a>:</h4>
<p>Nope, it's different</p>



<a name="491534343"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534343" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534343">(Jan 01 2025 at 22:44)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/7357">https://github.com/roc-lang/roc/issues/7357</a> shows that types implemented in Zig like <code>List</code> don't have their type args checked properly, since we only check aliases for type args</p>



<a name="491534347"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534347" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534347">(Jan 01 2025 at 22:44)</a>:</h4>
<p>And <code>List</code> isn't registered as a normal type alias</p>



<a name="491534365"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534365" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534365">(Jan 01 2025 at 22:45)</a>:</h4>
<p>But this is different, since Num is defined as <code>Num range := range</code></p>



<a name="491534385"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534385" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534385">(Jan 01 2025 at 22:45)</a>:</h4>
<p>It might be that numbers are special cased</p>



<a name="491534458"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534458" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534458">(Jan 01 2025 at 22:46)</a>:</h4>
<p>well, even though I can't define a concrete value, I can still type def one without a problem</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="kn">module</span><span class="w"> </span><span class="err">[</span><span class="nc">my_abc</span><span class="p">]</span>

<span class="kt">Abc</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">field</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="p">}</span>

<span class="nv">my_abc</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Abc</span><span class="w"> </span><span class="nf">*</span>
</code></pre></div>



<a name="491534472"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534472" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534472">(Jan 01 2025 at 22:47)</a>:</h4>
<p>51 messages were moved here from <a class="stream-topic" data-stream-id="395097" href="/#narrow/channel/395097-compiler-development/topic/Wildcard.20in.20opaque.20types">#compiler development &gt; Wildcard in opaque types</a> by <span class="user-mention silent" data-user-id="461444">Sam Mohr</span>.</p>



<a name="491534499"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534499" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534499">(Jan 01 2025 at 22:47)</a>:</h4>
<p>52 messages were moved here from <a class="stream-topic" data-stream-id="395097" href="/#narrow/channel/395097-compiler-development/topic/Remove.20wildcards.20from.20Roc">#compiler development &gt; Remove wildcards from Roc</a> by <span class="user-mention silent" data-user-id="461444">Sam Mohr</span>.</p>



<a name="491534541"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534541" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534541">(Jan 01 2025 at 22:48)</a>:</h4>
<p>Try again</p>



<a name="491534560"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534560" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534560">(Jan 01 2025 at 22:48)</a>:</h4>
<p>43 messages were moved here from <a class="stream-topic" data-stream-id="395097" href="/#narrow/channel/395097-compiler-development/topic/Wildcard.20in.20opaque.20types">#compiler development &gt; Wildcard in opaque types</a> by <span class="user-mention silent" data-user-id="461444">Sam Mohr</span>.</p>



<a name="491534566"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491534566" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491534566">(Jan 01 2025 at 22:48)</a>:</h4>
<p>That's a better range</p>



<a name="491535343"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535343" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535343">(Jan 01 2025 at 23:02)</a>:</h4>
<p><code>x : List *</code><br>
This is definitely a bug</p>
<p><code>y : {} -&gt; List *</code><br>
This seems fine and should be allowed, <code>\{} -&gt; []</code> is a generalizable function</p>
<p><code>num : Num *</code><br>
This is a special case today but i think it's worth removing</p>
<p><code>func2 : List * -&gt; U64</code><br>
This also seems fine because the function can take in a list of any type</p>



<a name="491535497"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535497" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535497">(Jan 01 2025 at 23:05)</a>:</h4>
<blockquote>
<p><code>\{} -&gt; []</code> is a generalizable function</p>
</blockquote>
<p>Is this a valid <code>List.empty</code>? I wasn't sure if <code>*</code> in an output location generalized.</p>



<a name="491535512"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535512" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535512">(Jan 01 2025 at 23:06)</a>:</h4>
<p>yeah it's generalized</p>



<a name="491535565"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535565" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535565">(Jan 01 2025 at 23:06)</a>:</h4>
<p>the intuition is that because the entry point of the program is concrete, by the transitive property, all used values must eventually be concrete as well</p>



<a name="491535587"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535587" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535587">(Jan 01 2025 at 23:07)</a>:</h4>
<p>Ah yeah, just realized we do this for <code>Dict.empty</code> so that makes sense.</p>



<a name="491535595"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535595" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535595">(Jan 01 2025 at 23:07)</a>:</h4>
<p>if a value's type is not concrete after you propagate all the types through, then the value must never be used. in that case it's sufficient to generate the void type</p>



<a name="491535598"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535598" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535598">(Jan 01 2025 at 23:07)</a>:</h4>
<p>I would be quite happy if <code>*</code> was restricted to only function inputs and outputs.</p>



<a name="491535615"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535615" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535615">(Jan 01 2025 at 23:07)</a>:</h4>
<p>agreed</p>



<a name="491535660"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535660" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535660">(Jan 01 2025 at 23:08)</a>:</h4>
<p>and any named type variables too</p>



<a name="491535679"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535679" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535679">(Jan 01 2025 at 23:08)</a>:</h4>
<p>So it seems like we have two positions that move us in the direction of minimizing wildcard <code>*</code> type variables in Roc:</p>
<ol>
<li>Remove <code>*</code> entirely, and replace all usages with named variables. There are <a href="https://github.com/search?q=repo%3Aroc-lang%2Froc%20%22*%22%20path%3Acrates%2Fcompiler%2Fbuiltins%2Froc%2F*.roc&amp;type=code">quite a few usages in our builtins</a>, but there doesn't seem to be anything that uses more than one or two at a time, meaning we aren't introducing a whole soup of variables. This avoids the <a href="#narrow/search/wildcard">multiple times beginners have been confused by wildcards</a>, and should improve comprehensibility for newcomers. The cost here is that beginners need to consider that any variables they see on the left-hand side of a function but not the right, or vice versa, are ignorable. This is more mental overhead when reading Roc, but not much IMO.</li>
<li>Only allow <code>*</code> in function input types. That allows us to communicate that a value is not important (in that it isn't used), but doesn't lead to confusion about its usage in variable types. We'd need to figure out how we should write <code>empty_list : List *</code>, but it shouldn't require a massive conversion. We still need to now think "if a variable exists in the return type but not the args, ignore it", but we still get a simpler Roc.</li>
</ol>
<p>It seems like this comes down to:</p>
<ol>
<li>Would beginners get a significant learning improvement from removing <code>*</code> entirely?</li>
<li>How much do we care about consistency: does having <code>*</code> only in function args and nowhere else bother us?</li>
</ol>



<a name="491535694"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535694" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535694">(Jan 01 2025 at 23:08)</a>:</h4>
<p>Oh, we'd want function outputs as well</p>



<a name="491535717"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535717" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535717">(Jan 01 2025 at 23:09)</a>:</h4>
<p>empty list should be <code>\{} -&gt; []</code> if you want a generic list. Otherwise write <code>empty_list : List _</code> and the compiler will figure out what type to use for you.</p>



<a name="491535776"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535776" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535776">(Jan 01 2025 at 23:10)</a>:</h4>
<blockquote>
<p>How much do we care about consistency: does having <code>*</code> only in function args and nowhere else bother us?</p>
</blockquote>
<p>No. Cause it doesn't really make sense anywhere else.</p>



<a name="491535815"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535815" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535815">(Jan 01 2025 at 23:11)</a>:</h4>
<ol start="3">
<li>Only allow <code>*</code> in function input and output types. That allows us to communicate that a value is not important (in that it isn't used), but doesn't lead to confusion about its usage in variable types. We'd need to figure out how we should write <code>empty_list : List *</code>, but it shouldn't require a massive conversion. This would probably be the smallest change. Beginners still need to learn what <code>*</code> is, but can think of it as a "function cleanup tool" and not need to understand the implications in values.</li>
</ol>



<a name="491535908"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491535908" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491535908">(Jan 01 2025 at 23:12)</a>:</h4>
<p>i would prefer removing <code>*</code> only very slightly due to the specific case of <code>* -&gt; *</code> I think being confusing because the input and output types are not related whereas they are in <code>a -&gt; a</code>, but I would strongly suggest not having a world where <code>*</code> can be used on one side of a function and not the other. I think that will be more confusing than having both wildcards and named variables or only having named variables, because it would make the type system seem more complicated than it is.</p>



<a name="491536022"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536022" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536022">(Jan 01 2025 at 23:13)</a>:</h4>
<p>Yes, I agree that 2 seems like the worst option because it feels like an arbitrary and confusing restriction</p>



<a name="491536025"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536025" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536025">(Jan 01 2025 at 23:13)</a>:</h4>
<p>I don't quite follow <code>*-&gt; *</code> is just <code>a -&gt; b</code></p>



<a name="491536026"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536026" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536026">(Jan 01 2025 at 23:13)</a>:</h4>
<p>I think we should remove wildcards</p>



<a name="491536068"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536068" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536068">(Jan 01 2025 at 23:14)</a>:</h4>
<p>I think it was an experiment that didn't work out</p>



<a name="491536093"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536093" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536093">(Jan 01 2025 at 23:14)</a>:</h4>
<p>the upside is that it's "kinda nice" when you understand it, but the downside is that it's actively confusing, and the downside comes up a lot in practice</p>



<a name="491536100"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536100" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536100">(Jan 01 2025 at 23:14)</a>:</h4>
<p>just doesn't seem like it has been worth it overall</p>



<a name="491536105"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536105" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536105">(Jan 01 2025 at 23:14)</a>:</h4>
<p>I think Roc is totally fine without them, and fewer features is always better unless said features add a significant benefit</p>



<a name="491536116"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536116" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536116">(Jan 01 2025 at 23:15)</a>:</h4>
<p>I will miss this:<br>
<code>List.len: List * -&gt; U64</code></p>



<a name="491536122"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536122" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536122">(Jan 01 2025 at 23:15)</a>:</h4>
<p>But yeah, seems fine to remove</p>



<a name="491536140"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536140" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536140">(Jan 01 2025 at 23:15)</a>:</h4>
<p>I'll wait for more voices, and then make a GH issue later</p>



<a name="491536144"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536144" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536144">(Jan 01 2025 at 23:15)</a>:</h4>
<p>yeah, there are things I'll miss about it, but overall I think the language is better off without it</p>



<a name="491536210"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536210" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536210">(Jan 01 2025 at 23:16)</a>:</h4>
<p>Yeah, I definitely believe that. I mean <span class="user-mention" data-user-id="515757">@Luke Boswell</span> is definitely not a beginner and still hits issues with <code>*</code>. That is a pretty clear sign that is should probably be removed.</p>



<a name="491536332"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536332" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536332">(Jan 01 2025 at 23:18)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span></p>



<a name="491536394"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536394" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536394">(Jan 01 2025 at 23:19)</a>:</h4>
<p>I would say I'm comfortable working around the <code>*</code>'s... but I will admit I still don't fully understand them. I usually just mentally replace them with <code>a</code>, <code>b</code>, <code>c</code>... etc</p>



<a name="491536474"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491536474" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491536474">(Jan 01 2025 at 23:20)</a>:</h4>
<p>I also do the mental replacement, meaning I'd rather have the vars anyway</p>



<a name="491539486"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491539486" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491539486">(Jan 02 2025 at 00:11)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/7451">https://github.com/roc-lang/roc/issues/7451</a></p>



<a name="491550589"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491550589" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491550589">(Jan 02 2025 at 03:14)</a>:</h4>
<p>I think <code>*</code> was an interesting idea to not have to get deep into type vars early in the learning journey but I think type vars are so omnipresent in languages with generics for good reason.</p>



<a name="491550939"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491550939" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491550939">(Jan 02 2025 at 03:20)</a>:</h4>
<p>yeah that was part of the hope, and the other part was just to have a better way to talk about it</p>



<a name="491550946"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491550946" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491550946">(Jan 02 2025 at 03:20)</a>:</h4>
<p>like if you say "suppose it just accepts num a"</p>



<a name="491550950"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491550950" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491550950">(Jan 02 2025 at 03:20)</a>:</h4>
<p>out loud</p>



<a name="491550955"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491550955" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491550955">(Jan 02 2025 at 03:20)</a>:</h4>
<p>the listener has to understand that "a" means lowercase A</p>



<a name="491550961"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491550961" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491550961">(Jan 02 2025 at 03:20)</a>:</h4>
<p>so sometimes I'd say like "suppose it just accepts num lowercase a"</p>



<a name="491551001"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491551001" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491551001">(Jan 02 2025 at 03:21)</a>:</h4>
<p>which always felt awkward, and I was hoping to improve on that by being able to say out loud "suppose it just accepts num star" and then everyone immediately understands the implications of what you're saying</p>



<a name="491551068"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491551068" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491551068">(Jan 02 2025 at 03:22)</a>:</h4>
<p>but of course if star is confusing, then that makes it harder to talk about everything with everyone understand what's being said <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="491551147"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491551147" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491551147">(Jan 02 2025 at 03:24)</a>:</h4>
<p>I think another downside is that even for some functional programmers it ate up some strangeness budget</p>



<a name="491551240"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491551240" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491551240">(Jan 02 2025 at 03:25)</a>:</h4>
<p>The way that OCaml does with "backwards types" like <code>int option</code></p>



<a name="491670164"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/491670164" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#491670164">(Jan 02 2025 at 21:48)</a>:</h4>
<p>bugfix for the issue of wildcards where they dont make sense</p>
<p><a href="https://github.com/roc-lang/roc/pull/7454">https://github.com/roc-lang/roc/pull/7454</a></p>



<a name="526901707"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526901707" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526901707">(Jul 03 2025 at 01:26)</a>:</h4>
<p>ugh, implementing the replacement for <code>*</code> in error messages and there's a really annoying edge case:</p>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="n">my_fn</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="no">Str</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">my_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">str</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">inner_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">other_list</span><span class="o">|</span><span class="w"> </span><span class="n">other_list</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>
<span class="w">    </span><span class="c1"># ...</span>
<span class="p">}</span>
</code></pre></div>
<p>let's say there's a type mismatch involving <code>inner_fn</code> and the error message needs to print the inferred type of <code>inner_fn</code></p>



<a name="526901766"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526901766" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526901766">(Jul 03 2025 at 01:27)</a>:</h4>
<p>if the compiler looks at that <code>inner_fn</code> type in isolation, with wildcards we'd infer the type being <code>List(*) -&gt; U64</code></p>



<a name="526901780"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526901780" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526901780">(Jul 03 2025 at 01:27)</a>:</h4>
<p>but if we don't have that, we have to generate a type variable name to use instead of <code>*</code></p>



<a name="526901818"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526901818" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526901818">(Jul 03 2025 at 01:28)</a>:</h4>
<p>however, in this case if we generate <code>List(a) -&gt; U64</code>, that would not actually be an unbound type, because the type variable <code>a</code> is in scope (and has a different meaning) because of the outer annotation</p>



<a name="526901828"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526901828" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526901828">(Jul 03 2025 at 01:28)</a>:</h4>
<p>so we need to instead generate <code>List(b) -&gt; U64</code></p>



<a name="526901852"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526901852" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526901852">(Jul 03 2025 at 01:28)</a>:</h4>
<p>this is very annoying, because it means you can no longer print types using only the type as the input</p>



<a name="526901856"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526901856" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526901856">(Jul 03 2025 at 01:28)</a>:</h4>
<p>you also need to know what other type variables are in scope</p>



<a name="526901891"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526901891" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526901891">(Jul 03 2025 at 01:29)</a>:</h4>
<p>however, that's not something that we persist all the way through to error message generation because it's not ordinarily something that matters</p>



<a name="526901940"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526901940" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526901940">(Jul 03 2025 at 01:29)</a>:</h4>
<p>in fact there's not ordinarily any way to go from a type mismatch error to figure out what the parent nodes are to re-walk the canonical node tree to figure out what type variables are in scope</p>



<a name="526902016"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902016" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902016">(Jul 03 2025 at 01:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/channel/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc/near/526901766">said</a>:</p>
<blockquote>
<p>-&gt; U64</p>
</blockquote>
<p>In isolation we don't know anything about the types other than a static dispatch call?</p>
<div class="codehilite"><pre><span></span><code>inner_fn : a -&gt; b where a.len() -&gt; b
</code></pre></div>



<a name="526902046"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902046" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902046">(Jul 03 2025 at 01:31)</a>:</h4>
<p>sure, whatever - maybe not the perfect example</p>



<a name="526902066"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902066" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902066">(Jul 03 2025 at 01:31)</a>:</h4>
<p>the point is just that if you have an inner function with an unbound type var</p>



<a name="526902095"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902095" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902095">(Jul 03 2025 at 01:31)</a>:</h4>
<p>and there is an outer type in scope which has a type var named like <code>a</code> or something that the auto-generator would collide with</p>



<a name="526902149"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902149" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902149">(Jul 03 2025 at 01:32)</a>:</h4>
<p>it causes this problem, and this problem seems to require a ton of complexity to fix <span aria-label="disappointed" class="emoji emoji-1f61e" role="img" title="disappointed">:disappointed:</span></p>



<a name="526902222"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902222" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902222">(Jul 03 2025 at 01:33)</a>:</h4>
<p>I think I understand the problem now... <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="526902332"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902332" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902332">(Jul 03 2025 at 01:35)</a>:</h4>
<p>shouldn't the type var for inner fn need to be calculated at some point later on?  And shouldn't it either be concretized or bound to a var from the outer fn?</p>



<a name="526902337"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902337" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902337">(Jul 03 2025 at 01:35)</a>:</h4>
<p>the best solution I've come up with so far is that we keep the scope around long enough so that we still have it when we generate the <code>Problem</code></p>



<a name="526902363"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902363" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902363">(Jul 03 2025 at 01:35)</a>:</h4>
<p>and then right when we're taking a snapshot of the type for the <code>Problem</code>, that's when we auto-generate the names for the variables (instead of doing it later in reporting like we would otherwise)</p>



<a name="526902436"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902436" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902436">(Jul 03 2025 at 01:36)</a>:</h4>
<p>I'm not quite sure how easy it will be to know what's in scope for the mismatched thing, because that might happen during unification, and I'm not sure if the scope will still make sense then, but it's the best idea I have so far <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="526902453"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902453" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902453">(Jul 03 2025 at 01:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="781658">Anthony Bullard</span> <a href="#narrow/channel/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc/near/526902332">said</a>:</p>
<blockquote>
<p>shouldn't the type var for inner fn need to be calculated at some point later on?  And shouldn't it either be concretized or bound to a var from the outer fn?</p>
</blockquote>
<p>the point is that it doesn't have a name in memory</p>



<a name="526902464"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902464" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902464">(Jul 03 2025 at 01:37)</a>:</h4>
<p>it's just like "type var number 2439" or whatever</p>



<a name="526902508"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902508" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902508">(Jul 03 2025 at 01:37)</a>:</h4>
<p>it's easy to render unnamed type vars as <code>*</code> but if we want to give them a name, we need some algorithm to generate a name that's not already taken</p>



<a name="526902554"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902554" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902554">(Jul 03 2025 at 01:38)</a>:</h4>
<p>unless we want to generate <code>_</code> which definitely seems worse because then it's like "I'm not even telling you what's here; maybe it's an unbound type variable, but who knows? It could be anything!" <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="526902768"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902768" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902768">(Jul 03 2025 at 01:41)</a>:</h4>
<p>Hm i'm trying to think what you'd get in other functional languages</p>



<a name="526902836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902836">(Jul 03 2025 at 01:42)</a>:</h4>
<p>i'd also need to see the actual full code snippet</p>



<a name="526902871"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902871" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902871">(Jul 03 2025 at 01:43)</a>:</h4>
<p>because i can't see a way where there's a type mismatch in inner_fn here that you wouldn't have a way to fill that type var</p>



<a name="526902945"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902945" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902945">(Jul 03 2025 at 01:44)</a>:</h4>
<p>it's the same problem in Elm and Haskell (if you have the language extension turned on for variables in outer scopes being accessible from inner scopes)</p>



<a name="526902948"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902948" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902948">(Jul 03 2025 at 01:44)</a>:</h4>
<p>Because this seems like something solved by every HM type system</p>



<a name="526902966"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902966" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902966">(Jul 03 2025 at 01:44)</a>:</h4>
<p>I mean I don't know how they solve it in particular, but either they have a solution or they have a bug <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="526902987"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526902987" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526902987">(Jul 03 2025 at 01:45)</a>:</h4>
<p>makes me want to open up ellie again</p>



<a name="526903008"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903008" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903008">(Jul 03 2025 at 01:45)</a>:</h4>
<p>does that still exist?  i'm on my phone</p>



<a name="526903027"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903027" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903027">(Jul 03 2025 at 01:45)</a>:</h4>
<p>yeah you should be able to repro it in Elm <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="526903033"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903033" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903033">(Jul 03 2025 at 01:45)</a>:</h4>
<p>yep!</p>



<a name="526903067"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903067" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903067">(Jul 03 2025 at 01:45)</a>:</h4>
<p>nothing like running elm compiler in haskell compiled to wasm on my iphone</p>



<a name="526903218"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903218" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903218">(Jul 03 2025 at 01:48)</a>:</h4>
<p>it's a bug in Elm</p>
<p><a href="/user_uploads/22008/_vIyYcJ4PoBzP7HajDLEicFY/Screenshot-2025-07-02-at-9.48.01PM.png">Screenshot 2025-07-02 at 9.48.01 PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/_vIyYcJ4PoBzP7HajDLEicFY/Screenshot-2025-07-02-at-9.48.01PM.png" title="Screenshot 2025-07-02 at 9.48.01 PM.png"><img data-original-content-type="image/png" data-original-dimensions="1782x662" src="/user_uploads/thumbnail/22008/_vIyYcJ4PoBzP7HajDLEicFY/Screenshot-2025-07-02-at-9.48.01PM.png/840x560.webp"></a></div>



<a name="526903235"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903235" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903235">(Jul 03 2025 at 01:48)</a>:</h4>
<p>it should say <code>List b</code> or something</p>



<a name="526903613"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903613" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903613">(Jul 03 2025 at 01:54)</a>:</h4>
<p>i don't know if that a bug</p>



<a name="526903633"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903633" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903633">(Jul 03 2025 at 01:54)</a>:</h4>
<p>sure it is haha</p>



<a name="526903663"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903663" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903663">(Jul 03 2025 at 01:55)</a>:</h4>
<p>if the outer fn had a regular argument <code>a</code> and the inner one did too (assuming shadowing is allowed), there is no conflict</p>



<a name="526903704"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903704" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903704">(Jul 03 2025 at 01:55)</a>:</h4>
<p>so why is there here with type vars?</p>



<a name="526903725"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903725" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903725">(Jul 03 2025 at 01:55)</a>:</h4>
<p>the type of <code>innerFn</code> is not connected in any way to the type of the outer function</p>



<a name="526903752"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903752" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903752">(Jul 03 2025 at 01:56)</a>:</h4>
<p>but if its argument type contains <code>a</code>, that is saying - in Elm's type system - that they <em>are</em> connected</p>



<a name="526903772"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903772" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903772">(Jul 03 2025 at 01:56)</a>:</h4>
<p>the bug is that it's reporting that there is a more restrictive type on <code>innerFn</code>'s first argument than reality</p>



<a name="526903795"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903795" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903795">(Jul 03 2025 at 01:56)</a>:</h4>
<p>in other words, this error message is saying "you can only give <code>innerFn</code> a list that's of the same type that you gave the outer function"</p>



<a name="526903800"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903800" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903800">(Jul 03 2025 at 01:56)</a>:</h4>
<p>which is not true; you can give it any list you like!</p>



<a name="526903827"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903827" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903827">(Jul 03 2025 at 01:57)</a>:</h4>
<p>if it said <code>List b</code> then it would be accurate</p>



<a name="526903837"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903837" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903837">(Jul 03 2025 at 01:57)</a>:</h4>
<p>or really any other name besides exactly <code>a</code></p>



<a name="526903876"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903876" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903876">(Jul 03 2025 at 01:58)</a>:</h4>
<p>but of course that's what it auto-generated, presumably because the auto-generator code was written before Elm added the feature of inner types being able to reference type variables in outer scopes, which if memory serves was around Elm 0.14 or so</p>



<a name="526903908"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526903908" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526903908">(Jul 03 2025 at 01:58)</a>:</h4>
<p>because I never knew that type system feature existed until I heard about Evan talking about adding it <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="526904248"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904248" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904248">(Jul 03 2025 at 02:02)</a>:</h4>
<p>example of this distinction being relevant:</p>
<p><a href="/user_uploads/22008/20SYbgeQv7kkDBL-sSsaRwUA/Screenshot-2025-07-02-at-10.02.19PM.png">Screenshot 2025-07-02 at 10.02.19 PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/20SYbgeQv7kkDBL-sSsaRwUA/Screenshot-2025-07-02-at-10.02.19PM.png" title="Screenshot 2025-07-02 at 10.02.19 PM.png"><img data-original-content-type="image/png" data-original-dimensions="2554x866" src="/user_uploads/thumbnail/22008/20SYbgeQv7kkDBL-sSsaRwUA/Screenshot-2025-07-02-at-10.02.19PM.png/840x560.webp"></a></div>



<a name="526904258"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904258" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904258">(Jul 03 2025 at 02:02)</a>:</h4>
<p>but if I change it to <code>innerFn listA</code> it compiles just fine</p>



<a name="526904296"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904296" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904296">(Jul 03 2025 at 02:03)</a>:</h4>
<p>because <code>innerFn : List a -&gt; ...</code> is saying that <code>innerFn</code> only accepts lists with the same type of element as the <code>listA</code> argument</p>



<a name="526904338"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904338" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904338">(Jul 03 2025 at 02:04)</a>:</h4>
<p>just to be super clear, this is the edge case to end all edge cases and approximately nobody will notice if it's broken in Roc's compiler, but I still want to do it correctly if we're going to do it <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="526904342"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904342" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904342">(Jul 03 2025 at 02:04)</a>:</h4>
<p><a href="/user_uploads/22008/fgZ-ZPhC5z5V_In5S6pmsA9B/image_067A4BBE-A99A-40FD-ABE9-C5DC74A8E5EB_1751508252.jpeg">image_067A4BBE-A99A-40FD-ABE9-C5DC74A8E5EB_1751508252.jpeg</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/fgZ-ZPhC5z5V_In5S6pmsA9B/image_067A4BBE-A99A-40FD-ABE9-C5DC74A8E5EB_1751508252.jpeg" title="image_067A4BBE-A99A-40FD-ABE9-C5DC74A8E5EB_1751508252.jpeg"><img data-original-content-type="image/jpeg" data-original-dimensions="1290x1229" src="/user_uploads/thumbnail/22008/fgZ-ZPhC5z5V_In5S6pmsA9B/image_067A4BBE-A99A-40FD-ABE9-C5DC74A8E5EB_1751508252.jpeg/840x560.webp"></a></div>



<a name="526904415"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904415" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904415">(Jul 03 2025 at 02:05)</a>:</h4>
<p>I don't know if OCaml has the feature where inner type annotations can be connected to outer type annotations by using the same variable names though</p>



<a name="526904478"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904478" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904478">(Jul 03 2025 at 02:05)</a>:</h4>
<p>you'd have to try to reproduce that last Ellie screenshot I posted above</p>



<a name="526904513"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904513" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904513">(Jul 03 2025 at 02:05)</a>:</h4>
<p>see if it gives an error; if not, OCaml's type annotations are disconnected (which I <em>think</em> they are?) and that error is not a bug in OCaml</p>



<a name="526904665"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904665" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904665">(Jul 03 2025 at 02:07)</a>:</h4>
<p>i get it now. we are saying List a because it would be List a if that function , unannotated, was on the top level</p>



<a name="526904693"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904693" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904693">(Jul 03 2025 at 02:08)</a>:</h4>
<p>but since it's inside of a scope List(a) MUST mean the a of the outer function if it appears there</p>



<a name="526904745"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904745" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904745">(Jul 03 2025 at 02:09)</a>:</h4>
<p>So the best you could do is capture the next possible type var in that scope and put it in the problem when we create it</p>



<a name="526904817"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904817" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904817">(Jul 03 2025 at 02:10)</a>:</h4>
<p>I now want to see what this scenario looks like in every type system with generics</p>



<a name="526904848"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904848" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904848">(Jul 03 2025 at 02:11)</a>:</h4>
<p>Silly idea ... maybe when we produce error reports and have generated type vars, we use the reverse alphabet, <code>z</code> <code>y</code> <code>x</code> ...</p>



<a name="526904885"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904885" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904885">(Jul 03 2025 at 02:11)</a>:</h4>
<p>Or, prefix it with the name of the function</p>



<a name="526904889"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904889" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904889">(Jul 03 2025 at 02:11)</a>:</h4>
<p>Or use a sigil maybe?</p>



<a name="526904901"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904901" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904901">(Jul 03 2025 at 02:11)</a>:</h4>
<p>it could be <code>inner_a</code></p>



<a name="526904929"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904929" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904929">(Jul 03 2025 at 02:12)</a>:</h4>
<p>Seems reasonable to me</p>



<a name="526904981"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526904981" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526904981">(Jul 03 2025 at 02:13)</a>:</h4>
<p>we could even note the conflict in the prob and have a note that says "this is NOT the a from &lt;outer function name&gt;"</p>



<a name="526905122"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526905122" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526905122">(Jul 03 2025 at 02:15)</a>:</h4>
<p>I like this solution.</p>
<p>Only potential issue I can think of is maybe the name it super long and that's kind of annoying. But probably not an issue in practice.</p>



<a name="526942975"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526942975" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526942975">(Jul 03 2025 at 08:28)</a>:</h4>
<p>I don't think a sigil is a good idea. it would mean you can't copy generated type and paste it to your program with no errors. prefix is better but introduces implicit naming convention. which is not bad, hardly it would be a problem for anyone</p>



<a name="526999966"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/526999966" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#526999966">(Jul 03 2025 at 13:42)</a>:</h4>
<p>I thought of a very simple solution:</p>
<ul>
<li>when we're canonicalizing a module, we write down every unique type var name used anywhere in that module in any scope</li>
<li>when generating unique names, we just make sure to avoid all of those</li>
</ul>



<a name="527000086"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527000086" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527000086">(Jul 03 2025 at 13:43)</a>:</h4>
<p>this might lead to the auto-generated variable name being like <code>List(d)</code> when it could have been <code>List(b)</code> but it'll be accurate, and I don't think anyone cares <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="527000390"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527000390" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527000390">(Jul 03 2025 at 13:44)</a>:</h4>
<p>had we come up with generated names before?<br>
I assume generated names could be confusing because one couldn't find them in their code. prefix makes it more explicit</p>



<a name="527000448"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527000448" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527000448">(Jul 03 2025 at 13:44)</a>:</h4>
<p>we never needed to come up with generated names before, because we had <code>*</code></p>



<a name="527000478"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527000478" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527000478">(Jul 03 2025 at 13:44)</a>:</h4>
<p>removing <code>*</code> requires generating names</p>



<a name="527000524"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527000524" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527000524">(Jul 03 2025 at 13:45)</a>:</h4>
<p>then we never had this kind of confusion</p>



<a name="527000534"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527000534" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527000534">(Jul 03 2025 at 13:45)</a>:</h4>
<p>correct</p>



<a name="527000607"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527000607" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527000607">(Jul 03 2025 at 13:45)</a>:</h4>
<p>a downside of removing <code>*</code> is that it introduces this problem, and this is one of the problems I was hoping to avoid by having <code>*</code> in the language <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="527000666"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527000666" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527000666">(Jul 03 2025 at 13:45)</a>:</h4>
<p>however, my conclusion is that overall the downsides of <code>*</code> outweigh the upsides and we should generate names instead (like every other language)</p>



<a name="527000676"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527000676" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527000676">(Jul 03 2025 at 13:45)</a>:</h4>
<p>prefix does not solve the problem btw</p>



<a name="527000774"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527000774" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527000774">(Jul 03 2025 at 13:46)</a>:</h4>
<p>if you choose <code>my_fn_a</code> as the name, then that still collides if someone happens to choose <code>my_fn_a</code> as their type variable name</p>



<a name="527000913"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527000913" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527000913">(Jul 03 2025 at 13:46)</a>:</h4>
<p>and if you're ok with collisions being unlikely, but still possible, then it's definitely best to just have the bug like Elm does, because in practice nobody is going to notice either way <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="527001034"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001034" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001034">(Jul 03 2025 at 13:47)</a>:</h4>
<p>I agree. I just mean need to communicate generated names somehow. otherwise I anticipate questions like "what this means? I haven't this name in my code"</p>



<a name="527001035"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001035" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001035">(Jul 03 2025 at 13:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/channel/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc/near/526999966">said</a>:</p>
<blockquote>
<p>I thought of a very simple solution:</p>
<ul>
<li>when we're canonicalizing a module, we write down every unique type var name used anywhere in that module in any scope</li>
<li>when generating unique names, we just make sure to avoid all of those</li>
</ul>
</blockquote>
<p>I'm fine with this very simple solution though <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span></p>



<a name="527001128"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001128" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001128">(Jul 03 2025 at 13:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="584248">Kiryl Dziamura</span> <a href="#narrow/channel/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc/near/527001034">said</a>:</p>
<blockquote>
<p>I agree. I just mean need to communicate generated names somehow. otherwise I anticipate questions about "what this means? I haven't this name in my code"</p>
</blockquote>
<p>I haven't seen this in other languages which do this</p>



<a name="527001178"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001178" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001178">(Jul 03 2025 at 13:47)</a>:</h4>
<p>lifetimes in rust?</p>



<a name="527001268"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001268" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001268">(Jul 03 2025 at 13:48)</a>:</h4>
<p>yeah I haven't seen people be confused about that particular aspect of lifetimes <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="527001340"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001340" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001340">(Jul 03 2025 at 13:48)</a>:</h4>
<p>or like in Elm I haven't seen people say "hey why is it called <code>a</code> in <code>List a</code> when I don't have an <code>a</code> anywhere in my code?"</p>



<a name="527001432"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001432" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001432">(Jul 03 2025 at 13:48)</a>:</h4>
<p>or rather, people generally seem to wonder about the semantics</p>



<a name="527001471"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001471" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001471">(Jul 03 2025 at 13:49)</a>:</h4>
<blockquote>
<p>yeah I haven't seen people be confused about that particular aspect of lifetimes</p>
</blockquote>
<p>you're taking with one of them right now :D</p>



<a name="527001508"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001508" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001508">(Jul 03 2025 at 13:49)</a>:</h4>
<p>I think the SML style of using a, b is an unfortunate thing to propagate</p>



<a name="527001541"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001541" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001541">(Jul 03 2025 at 13:49)</a>:</h4>
<p>what would be a better style?</p>



<a name="527001576"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001576" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001576">(Jul 03 2025 at 13:49)</a>:</h4>
<p>names that mean something <span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span></p>



<a name="527001611"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001611" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001611">(Jul 03 2025 at 13:49)</a>:</h4>
<p>like List(item)</p>



<a name="527001685"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001685" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001685">(Jul 03 2025 at 13:50)</a>:</h4>
<p>Map(key,value)</p>



<a name="527001851"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001851" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001851">(Jul 03 2025 at 13:50)</a>:</h4>
<p>we could do that in some cases</p>



<a name="527001868"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001868" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001868">(Jul 03 2025 at 13:50)</a>:</h4>
<p>but that would make this problem harder <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="527001945"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001945" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001945">(Jul 03 2025 at 13:51)</a>:</h4>
<p>like for example, if I define <code>List</code> as <code>List(elem) := ...</code> then we could choose <code>elem</code> as the default unbound var name</p>



<a name="527001948"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527001948" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527001948">(Jul 03 2025 at 13:51)</a>:</h4>
<p>it doesn't solve this problem, but maybe makes the appearance of a random names from unannotated code easier to deal with</p>



<a name="527002011"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527002011" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527002011">(Jul 03 2025 at 13:51)</a>:</h4>
<p>actually, we could do like<code>List(elem2)</code> or something</p>



<a name="527002034"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527002034" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527002034">(Jul 03 2025 at 13:51)</a>:</h4>
<p>might be confusing though? not sure</p>



<a name="527002035"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527002035" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527002035">(Jul 03 2025 at 13:51)</a>:</h4>
<p>I have a crazy idea</p>



<a name="527002092"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527002092" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527002092">(Jul 03 2025 at 13:51)</a>:</h4>
<blockquote>
<p>actually, we could do like<code>List(elem2)</code> or something</p>
</blockquote>
<p>damn, that was my crazy idea</p>



<a name="527002207"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527002207" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527002207">(Jul 03 2025 at 13:52)</a>:</h4>
<p>so we extend what type already has in its default name</p>



<a name="527002284"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527002284" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527002284">(Jul 03 2025 at 13:52)</a>:</h4>
<p>yeah I'm not sure how it would look in practice, might be weird? I'm not sure</p>



<a name="527002454"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527002454" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527002454">(Jul 03 2025 at 13:53)</a>:</h4>
<p>I wonder how common this case is</p>



<a name="527002841"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527002841" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527002841">(Jul 03 2025 at 13:55)</a>:</h4>
<p>is there a world where * could only exist in problems, with appropriate context when it appears?</p>



<a name="527003054"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527003054" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527003054">(Jul 03 2025 at 13:56)</a>:</h4>
<p>"something_else" lol</p>



<a name="527004246"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527004246" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527004246">(Jul 03 2025 at 14:00)</a>:</h4>
<p>or as a sigil after the default type var?</p>
<p>like:</p>
<div class="codehilite"><pre><span></span><code>TYPE MISMATCH
in foo.roc 5:14
5:   inner_fn(str)
              ^--
This is a
    `Str`
but I was expecting a
    `List(item*)`
Where `item*` is a type variable that has not
been given a name and should not be confused
with a type variable `item` in scope
</code></pre></div>



<a name="527004608"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527004608" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527004608">(Jul 03 2025 at 14:02)</a>:</h4>
<p>My point is if it expects this type, and I copypaste it in my code - parser won't like it</p>
<div class="codehilite"><pre><span></span><code>but I was expecting a
    `List(item*)`
</code></pre></div>



<a name="527004841"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527004841" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527004841">(Jul 03 2025 at 14:02)</a>:</h4>
<p>Do people do that?  And if so do they expect it to work without the understanding that it's not valid syntax?</p>



<a name="527005053"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527005053" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527005053">(Jul 03 2025 at 14:03)</a>:</h4>
<p>can't say for people, but for me, it's confusing to see invalid syntax even in such reports</p>



<a name="527005261"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527005261" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527005261">(Jul 03 2025 at 14:04)</a>:</h4>
<p>I think Richard's approach of just taking the first open type var in the alphabetic sequence is fine</p>



<a name="527005399"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527005399" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527005399">(Jul 03 2025 at 14:05)</a>:</h4>
<p>Though i still maintain that in the actual definition of types, we should promote the use of meaningful type vars</p>



<a name="527005663"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527005663" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527005663">(Jul 03 2025 at 14:06)</a>:</h4>
<p>And then the appearance of these single letter type vars (probably starting at a, or close to it) are at least a sign that we just don't know the type for it</p>



<a name="527005835"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527005835" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527005835">(Jul 03 2025 at 14:06)</a>:</h4>
<p>With a similar note to that above</p>



<a name="527006249"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527006249" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527006249">(Jul 03 2025 at 14:08)</a>:</h4>
<p>"Here <code>a</code> is not a named type var, but a valid one to introduce in this scope."</p>
<p>And <code>a</code> could be replaced with any letter</p>
<p>We could also suggest ways to improve the report</p>



<a name="527006984"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527006984" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527006984">(Jul 03 2025 at 14:10)</a>:</h4>
<p>do you mind starting a thread for unbound var naming in <a class="stream" data-stream-id="304641" href="/#narrow/channel/304641-ideas">#ideas</a>  ? these single letters are really confusing for beginners (I remember how they confused me previously in other languages)</p>



<a name="527007211"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527007211" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527007211">(Jul 03 2025 at 14:11)</a>:</h4>
<p>Start at the beginning of the sequence and look up if it's a type var in this scope, if not, use it.</p>



<a name="527007671"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527007671" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527007671">(Jul 03 2025 at 14:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="781658">Anthony Bullard</span> <a href="#narrow/channel/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc/near/527007211">said</a>:</p>
<blockquote>
<p>Start at the beginning of the sequence and look up if it's a type var in this scope, if not, use it.</p>
</blockquote>
<p>this is super complicated</p>



<a name="527007701"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527007701" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527007701">(Jul 03 2025 at 14:13)</a>:</h4>
<p>it's very easy to say and adds an insane amount of complexity to the compiler <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="527007744"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527007744" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527007744">(Jul 03 2025 at 14:13)</a>:</h4>
<p>because the scope is gone at the point where we discover the type mismatch</p>



<a name="527007832"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527007832" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527007832">(Jul 03 2025 at 14:14)</a>:</h4>
<p>and also the type knows which CIR node it came from, but nodes only know their children, not their parents, so it's also hard to walk back up the tree to recreate the scope</p>



<a name="527007963"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527007963" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527007963">(Jul 03 2025 at 14:14)</a>:</h4>
<p>the straightforward way to do "look up if it's a type var in this scope" is "literally redo all of canonicalization on the file every time we want to generate a type variable"</p>



<a name="527008002"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527008002" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527008002">(Jul 03 2025 at 14:14)</a>:</h4>
<p>which would be...suboptimal for compile times <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="527008264"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527008264" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527008264">(Jul 03 2025 at 14:15)</a>:</h4>
<p>that's why it's appealing to just build up a list of "here are all the type variable names we use anywhere in any scope in this module" as we're doing canonicalization</p>



<a name="527008310"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527008310" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527008310">(Jul 03 2025 at 14:16)</a>:</h4>
<p>and when we're generating type var names, just make sure they aren't in that list and we're all set</p>



<a name="527008357"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527008357" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527008357">(Jul 03 2025 at 14:16)</a>:</h4>
<p>no conflicts, guaranteed, minimal complexity, and minimal performance cost</p>



<a name="527008595"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527008595" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527008595">(Jul 03 2025 at 14:17)</a>:</h4>
<p>as an aside, regarding meaningful type var names - for years I did this in Elm and I honestly have mixed feelings about it in retrospect</p>



<a name="527008734"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527008734" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527008734">(Jul 03 2025 at 14:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc/near/527008264">said</a>:</p>
<blockquote>
<p>that's why it's appealing to just build up a list of "here are all the type variable names we use anywhere in any scope in this module" as we're doing canonicalization</p>
</blockquote>
<p>sorry this is exactly what i meant</p>



<a name="527008799"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527008799" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527008799">(Jul 03 2025 at 14:18)</a>:</h4>
<p>in Elm I would write things this all the time:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">cancelButton</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Html</span><span class="w"> </span><span class="nv">msg</span>
<span class="nv">cancelButton</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">button</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nv">text</span><span class="w"> </span><span class="s">"Ok"</span><span class="w">  </span><span class="p">]</span>
</code></pre></div>



<a name="527008830"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527008830" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527008830">(Jul 03 2025 at 14:18)</a>:</h4>
<p>send the list with the problem, and do the above at time of rendering the report</p>



<a name="527008836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527008836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527008836">(Jul 03 2025 at 14:18)</a>:</h4>
<p>instead of this:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">cancelButton</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Html</span><span class="w"> </span><span class="nv">a</span>
<span class="nv">cancelButton</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">button</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nv">text</span><span class="w"> </span><span class="s">"Ok"</span><span class="w">  </span><span class="p">]</span>
</code></pre></div>



<a name="527008868"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527008868" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527008868">(Jul 03 2025 at 14:18)</a>:</h4>
<p>Here's my topic <a href="#narrow/stream/304641-ideas/topic/Unbound.20type.20variable.20naming.20conventions/near/527008506">https://roc.zulipchat.com/#narrow/stream/304641-ideas/topic/Unbound.20type.20variable.20naming.20conventions/near/527008506</a></p>



<a name="527008968"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527008968" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527008968">(Jul 03 2025 at 14:18)</a>:</h4>
<p>oh ok I'll re-post there! <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="527205971"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527205971" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pit Capitain <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527205971">(Jul 04 2025 at 16:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/channel/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc/near/526903218">said</a>:</p>
<blockquote>
<p>it's a bug in Elm</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/channel/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc/near/526903772">said</a>:</p>
<blockquote>
<p>the bug is that it's reporting that there is a more restrictive type on <code>innerFn</code>'s first argument than reality</p>
</blockquote>
<p>Sorry to come late to the party, but this is not what's happening in Elm. The "a" in the error message is <strong>not</strong> connected to the "a" from the type signature. If you change the type signature to use the type variable "z", the error message still says that the first argument of <code>innerFn</code> needs be <code>List a</code>.</p>
<p>So the "bug" is that the Elm compiler doesn't check whether the general type variable "a" used in the error message is already defined in the outer scope.</p>



<a name="527211383"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527211383" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527211383">(Jul 04 2025 at 16:45)</a>:</h4>
<p>yep, that's the bug! <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="527211478"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527211478" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527211478">(Jul 04 2025 at 16:45)</a>:</h4>
<p>it's very niche</p>



<a name="527211650"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527211650" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527211650">(Jul 04 2025 at 16:46)</a>:</h4>
<p>the reason it's a bug is that what it's saying is not true. It is not true that that value's type is <code>List a</code>, because if that were true, then adding a type annotation of <code>List a</code> to that value would be a no-op because that's already its type</p>



<a name="527211741"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527211741" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527211741">(Jul 04 2025 at 16:47)</a>:</h4>
<p>but adding that annotation would not be a no-op! It would change the value's type to a more restrictive type.</p>



<a name="527211873"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527211873" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527211873">(Jul 04 2025 at 16:48)</a>:</h4>
<p>that's why it's inaccurate to claim that <code>List a</code> is that value's type. In the context of that particular value, the type variable <code>a</code> is in scope and has meaning.</p>



<a name="527330028"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527330028" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Norbert Hajagos <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527330028">(Jul 06 2025 at 07:43)</a>:</h4>
<p>If the problem comes from not having * and the problem with that is just seeing * is confusing, we could have a keyword "unbound" that has the same meaning as *. That would be it's only use.</p>



<a name="527347688"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527347688" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527347688">(Jul 06 2025 at 13:38)</a>:</h4>
<p>I don't think the character <code>*</code> is the problem</p>



<a name="527347697"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527347697" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527347697">(Jul 06 2025 at 13:39)</a>:</h4>
<p>I think the problem is the concept</p>



<a name="527347714"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527347714" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527347714">(Jul 06 2025 at 13:39)</a>:</h4>
<p>like I don't think this will help:</p>
<div class="codehilite"><pre><span></span><code>&gt;&gt; 1 + 1
2 : Num(unbound)
</code></pre></div>



<a name="527352922"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527352922" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527352922">(Jul 06 2025 at 15:12)</a>:</h4>
<p>Instead of avoiding (just) type variables, what about avoiding _any lowercase_ ident in the module?That's something that's very easy+fast to compute by looking at the tokens (or ast), without any extra work during <code>can</code>.</p>



<a name="527353133"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527353133" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527353133">(Jul 06 2025 at 15:15)</a>:</h4>
<p>That also has the advantage of avoiding any confusions a user might possibly have between what's a type variable vs a normal ident.</p>



<a name="527353306"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527353306" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527353306">(Jul 06 2025 at 15:18)</a>:</h4>
<p>ah so we just look up whether it's been interned?</p>



<a name="527353312"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527353312" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527353312">(Jul 06 2025 at 15:18)</a>:</h4>
<p>yeah we could do that!</p>



<a name="527441131"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Remove%20wildcard%20type%20vars%20from%20Roc/near/527441131" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Norbert Hajagos <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc.html#527441131">(Jul 07 2025 at 09:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/channel/395097-compiler-development/topic/Remove.20wildcard.20type.20vars.20from.20Roc/near/527347714">said</a>:</p>
<blockquote>
<p>like I don't think this will help:</p>
<p><div class="codehilite"><pre><span></span><code>&gt;&gt; 1 + 1
2 : Num(unbound)
</code></pre></div><br>
</p>
</blockquote>
<p>You're right, it's even a worse first-time experience, because my impression is "cool, 2 is a bigint"</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>