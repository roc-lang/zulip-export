<html>
<head><meta charset="utf-8"><title>Rust dependencies · compiler development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/index.html">compiler development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html">Rust dependencies</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="388752361"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/388752361" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#388752361">(Sep 03 2023 at 00:35)</a>:</h4>
<p>I've been working on a caching-friendly parser, and I recently realized it was using almost none of std and only a couple of dependencies as conveniences. So I tried making it no_std and removing those dependencies, and WOW - instant compile times!</p>



<a name="388752464"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/388752464" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#388752464">(Sep 03 2023 at 00:36)</a>:</h4>
<p>I instantly understood why Rik Arends so aggressively minimizes Makepad's dependencies</p>



<a name="388752866"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/388752866" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#388752866">(Sep 03 2023 at 00:39)</a>:</h4>
<p>imagine if our only dependency was Inkwell <span aria-label="drooling" class="emoji emoji-1f924" role="img" title="drooling">:drooling:</span></p>



<a name="388753125"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/388753125" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#388753125">(Sep 03 2023 at 00:41)</a>:</h4>
<p>(and probably like <code>blake3</code> and <code>indoc!</code> and one or two others I'm not thinking of)</p>



<a name="388753152"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/388753152" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#388753152">(Sep 03 2023 at 00:41)</a>:</h4>
<p>but Inkwell is the only one where I'm like "yeah LOL at the idea of ever dropping that dependency"</p>



<a name="388753249"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/388753249" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#388753249">(Sep 03 2023 at 00:42)</a>:</h4>
<p>the editor will always need more too, but not every build needs to include editor stuff</p>



<a name="388939040"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/388939040" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#388939040">(Sep 04 2023 at 08:52)</a>:</h4>
<blockquote>
<p>I instantly understood why Rik Arends so aggressively minimizes Makepad's dependencies</p>
</blockquote>
<p>I've also seen him mention that a few times, do you know of a blogpost or video where he explains his process in detail?</p>



<a name="388951923"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/388951923" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#388951923">(Sep 04 2023 at 10:01)</a>:</h4>
<p>I vaguely remember it being discussed in the podcast episode with him</p>



<a name="388952078"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/388952078" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#388952078">(Sep 04 2023 at 10:02)</a>:</h4>
<p>I think the process is pretty simple: just don't add any dependencies</p>



<a name="484061724"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/484061724" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#484061724">(Nov 23 2024 at 12:41)</a>:</h4>
<p>I was coming here to ask this specific question:  What is the project's philosophy on dependencies? </p>
<p>For instance, when I go to implement the formatting portion of <a href="https://github.com/roc-lang/roc/issues/7214">https://github.com/roc-lang/roc/issues/7214</a> would we rather me write an implementation of camel-&gt;snake_case conversion myself (with tests of course), or use convert_case?  I personally am happy to do the former, but I wanted whatever I do be aligned with the rest of the project.</p>



<a name="484062401"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/484062401" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#484062401">(Nov 23 2024 at 12:51)</a>:</h4>
<p>The move I'm generally seeing is to eventually bring our dependencies outside of Rust, Zig, and LLVM down to zero if possible. So I'd vote for the homebrew, but it's temporary so it doesn't matter much</p>



<a name="484066867"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/484066867" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#484066867">(Nov 23 2024 at 13:55)</a>:</h4>
<p>yeah I'd eventually like all of our compiler crates to be <code>no_std</code> and use no third-party dependencies except:</p>
<ul>
<li>multithreading in the loading crate should use <code>std</code> (alternative being pthreads which doesn't sound great) and possibly a third-party concurrency crate on top of that</li>
<li>BLAKE3 hashing</li>
<li>http and TLS for downloading from URLs</li>
<li>LLVM, presumably with a Rust wrapper around it (e.g. Inkwell)</li>
</ul>



<a name="484066913"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/484066913" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#484066913">(Nov 23 2024 at 13:55)</a>:</h4>
<p>there may be a couple of other exceptions I'm not thinking of, but the point is that the goal is to have a default of doing things ourselves, and then justify a few specific exceptions rather than defaulting to reaching for third-party deps</p>



<a name="484068143"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/484068143" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#484068143">(Nov 23 2024 at 14:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461444">Sam Mohr</span> <a href="#narrow/channel/395097-compiler-development/topic/Rust.20dependencies/near/484062401">said</a>:</p>
<blockquote>
<p>So I'd vote for the homebrew, but it's temporary so it doesn't matter much</p>
</blockquote>
<p>Can you clarify what you mean here by "it's temporary"?  Do you mean the need to convert camelCase to snake_case?</p>



<a name="484068680"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/484068680" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#484068680">(Nov 23 2024 at 14:20)</a>:</h4>
<p>Yes, I don't expect we'll maintain camelCase -&gt; snake_case conversion long-term since we'll have finished converting at some point (or gotten enough user code converted to consider it finished).</p>



<a name="484075845"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Rust%20dependencies/near/484075845" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Rust.20dependencies.html#484075845">(Nov 23 2024 at 16:06)</a>:</h4>
<p>Yeah, we have a ton of dependencies. It would be great to minimize them more.</p>
<p>Also would be great to clean up the build dependency graph... It is spaghetti</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>