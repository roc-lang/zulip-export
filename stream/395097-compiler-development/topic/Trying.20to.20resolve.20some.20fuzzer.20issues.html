<html>
<head><meta charset="utf-8"><title>Trying to resolve some fuzzer issues · compiler development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/index.html">compiler development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html">Trying to resolve some fuzzer issues</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="491915259"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491915259" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491915259">(Jan 04 2025 at 22:49)</a>:</h4>
<p>Is there any reason someone can think of why this line inside of the <code>expr_to_pattern_help</code> function in parse/src/expr.rs <em>could not</em> or <em>should not</em> be implemented?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">        </span><span class="n">Expr</span><span class="p">::</span><span class="n">SpaceBefore</span><span class="p">(</span><span class="o">..</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Expr</span><span class="p">::</span><span class="n">SpaceAfter</span><span class="p">(</span><span class="o">..</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Expr</span><span class="p">::</span><span class="n">ParensAround</span><span class="p">(</span><span class="o">..</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">unreachable!</span><span class="p">(),</span>
</code></pre></div>



<a name="491915274"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491915274" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491915274">(Jan 04 2025 at 22:49)</a>:</h4>
<p>Seems easy enough to translate into a pattern, but I want to make sure there isn't an invariant that I'm missing</p>



<a name="491915286"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491915286" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491915286">(Jan 04 2025 at 22:49)</a>:</h4>
<p>I ask because this is often hit in the fuzzer and it causes a panic</p>



<a name="491920456"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491920456" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491920456">(Jan 05 2025 at 00:16)</a>:</h4>
<p>I see why now.</p>



<a name="491920477"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491920477" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491920477">(Jan 05 2025 at 00:17)</a>:</h4>
<p>For now, I'm going to wrap the fuzz_module function in a std::panic::catch_unwind so that it doesn't blow up on parse errors</p>



<a name="491923643"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491923643" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491923643">(Jan 05 2025 at 01:14)</a>:</h4>
<p>Ok, that doesn't seem to be helping.  But it seems like, as Joshua warned me, the problem is trying to extract spaces when there is a SpacesBefore inside a SpacesBefore or a SpacesAfter inside a SpacesAfter....</p>



<a name="491923749"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491923749" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491923749">(Jan 05 2025 at 01:16)</a>:</h4>
<p>It seems to me that to do that would require the ExtractSpaces trait's <code>extract_spaces</code> method to also take an arena as an arg.</p>



<a name="491923753"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491923753" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491923753">(Jan 05 2025 at 01:16)</a>:</h4>
<p>So that they can be merged</p>



<a name="491979527"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491979527" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491979527">(Jan 05 2025 at 16:26)</a>:</h4>
<p>Alright, I have this compiling.  This is either my best idea, or the worst idea.  Got rid of several <code>todo!()</code>s though</p>



<a name="491979535"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491979535" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491979535">(Jan 05 2025 at 16:26)</a>:</h4>
<p>Running the fuzzer</p>



<a name="491980590"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491980590" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491980590">(Jan 05 2025 at 16:43)</a>:</h4>
<p>Does this make sense to anyone:</p>
<div class="codehilite"><pre><span></span><code>
</code></pre></div>



<a name="491980604"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491980604" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491980604">(Jan 05 2025 at 16:43)</a>:</h4>
<div class="codehilite"><pre><span></span><code>* * * Source code before formatting:
dbg(2ii/fi&amp;fh
)

i


* * * Source code after formatting:
dbg 2ii / fi &amp;fh

i

* * * AST before formatting:
Expr(
    @0-15 SpaceAfter(
        DbgStmt {
            first: @4-13 SpaceAfter(
                BinOps(
                    [
                        (
                            @4-7 Num(
                                &quot;2ii&quot;,
                            ),
                            @7-8 Slash,
                        ),
                    ],
                    @8-13 Apply(
                        @8-10 Var {
                            module_name: &quot;&quot;,
                            ident: &quot;fi&quot;,
                        },
                        [
                            @10-13 RecordUpdater(
                                &quot;fh&quot;,
                            ),
                        ],
                        Space,
                    ),
                ),
                [
                    Newline,
                ],
            ),
            extra_args: [],
            continuation: @17-18 SpaceBefore(
                Var {
                    module_name: &quot;&quot;,
                    ident: &quot;i&quot;,
                },
                [
                    Newline,
                    Newline,
                ],
            ),
        },
        [
            Newline,
        ],
    ),
)

* * * AST after formatting:
Expr(
    @0-19 Defs(
        Defs {
            tags: [
                EitherIndex(2147483648),
            ],
            regions: [
                @0-16,
            ],
            space_before: [
                Slice&lt;roc_parse::ast::CommentOrNewline&gt; { start: 0, length: 0 },
            ],
            space_after: [
                Slice&lt;roc_parse::ast::CommentOrNewline&gt; { start: 0, length: 0 },
            ],
            spaces: [],
            type_defs: [],
            value_defs: [
                Stmt(
                    @0-16 BinOps(
                        [
                            (
                                @0-7 Apply(
                                    @0-3 Dbg,
                                    [
                                        @4-7 Num(
                                            &quot;2ii&quot;,
                                        ),
                                    ],
                                    Space,
                                ),
                                @8-9 Slash,
                            ),
                        ],
                        @10-16 Apply(
                            @10-12 Var {
                                module_name: &quot;&quot;,
                                ident: &quot;fi&quot;,
                            },
                            [
                                @13-16 RecordUpdater(
                                    &quot;fh&quot;,
                                ),
                            ],
                            Space,
                        ),
                    ),
                ),
            ],
        },
        @18-19 SpaceBefore(
            Var {
                module_name: &quot;&quot;,
                ident: &quot;i&quot;,
            },
            [
                Newline,
                Newline,
            ],
        ),
    ),
)
</code></pre></div>



<a name="491980663"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491980663" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491980663">(Jan 05 2025 at 16:44)</a>:</h4>
<p>I don't think I understand what a dbg statement continuation is</p>



<a name="491980758"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491980758" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491980758">(Jan 05 2025 at 16:45)</a>:</h4>
<p>it's the rest of the program after the <code>dbg</code>. for example</p>
<div class="codehilite"><pre><span></span><code>dbg(x)
1 + 2
</code></pre></div>
<p><code>1 + 2</code> is the continuation</p>



<a name="491980797"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491980797" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491980797">(Jan 05 2025 at 16:46)</a>:</h4>
<p>Sure....why is that not just a separate expression?</p>



<a name="491980893"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491980893" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491980893">(Jan 05 2025 at 16:47)</a>:</h4>
<p>is the AST not structured as nested expressions</p>



<a name="491980903"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491980903" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491980903">(Jan 05 2025 at 16:47)</a>:</h4>
<p>it used to be, at least</p>



<a name="491980981"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491980981" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491980981">(Jan 05 2025 at 16:48)</a>:</h4>
<p>It is, but I don't understand why a debug would contain a continuation....</p>



<a name="491981003"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491981003" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491981003">(Jan 05 2025 at 16:48)</a>:</h4>
<p>I would think the grammar for a Dbg expression would be <code>"dbg" &lt;Expr&gt;</code></p>



<a name="491981143"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491981143" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491981143">(Jan 05 2025 at 16:50)</a>:</h4>
<p>I get it</p>



<a name="491981155"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491981155" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491981155">(Jan 05 2025 at 16:50)</a>:</h4>
<p>because you need something to indicate what the rest of the expression after the debug is. So it's like <code>dbg &lt;Expr&gt; &lt;Expr&gt;</code>. otherwise you would need a list as you mention but a nice property of nesting the next expression is that you can get the type of the whole expression just by looking at one node.</p>



<a name="491981170"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491981170" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491981170">(Jan 05 2025 at 16:51)</a>:</h4>
<p>We don't have a separate Statement type.  So something that is a statement needs to have a continuation that has the rest of the function</p>



<a name="491981271"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491981271" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491981271">(Jan 05 2025 at 16:52)</a>:</h4>
<p>The problem here is we didn't print the parens around the binop when we formatted</p>



<a name="491981306"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491981306" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491981306">(Jan 05 2025 at 16:53)</a>:</h4>
<p>So now it thinks we are applying <code>dbg</code> to the number <code>2ii</code> and then that is the left-hand side of the binop</p>



<a name="491981328"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491981328" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491981328">(Jan 05 2025 at 16:53)</a>:</h4>
<p>And that's because the original parse didn't capture the ParensAround</p>



<a name="491981405"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491981405" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491981405">(Jan 05 2025 at 16:54)</a>:</h4>
<p>Let me know if that sounds correct to you <span class="user-mention" data-user-id="454654">@Ayaz Hafiz</span> and thanks for talking sense into me</p>



<a name="491983364"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491983364" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491983364">(Jan 05 2025 at 17:23)</a>:</h4>
<p>FIgured it out</p>



<a name="491983373"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491983373" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491983373">(Jan 05 2025 at 17:23)</a>:</h4>
<p>One last issue and this should fix the last major fuzzer issue with PNC</p>



<a name="491991173"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991173" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991173">(Jan 05 2025 at 19:18)</a>:</h4>
<p>I've made a few fixes for PNC issues locally (didn't notice this thread until after I them!)</p>



<a name="491991272"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991272" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991272">(Jan 05 2025 at 19:19)</a>:</h4>
<p>Pushed a few of those here: <a href="https://github.com/roc-lang/roc/pull/7468">https://github.com/roc-lang/roc/pull/7468</a></p>



<a name="491991539"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991539" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991539">(Jan 05 2025 at 19:23)</a>:</h4>
<p>Anyway, one thing that I think can't be preserved in the current AST is comments in an empty PNC apply, e.g.:</p>
<div class="codehilite"><pre><span></span><code>foo(
    #comment
)
</code></pre></div>
<p>I think this will require using a different variant for PncApply in the AST, something like:</p>
<div class="codehilite"><pre><span></span><code>PncApply(&amp;&#39;a Expr&lt;&#39;a&gt;, Collection&lt;&#39;a, &amp;&#39;a Expr&lt;&#39;a&gt;&gt;),
</code></pre></div>



<a name="491991613"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991613" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991613">(Jan 05 2025 at 19:24)</a>:</h4>
<p>Well the args use the collection helper so wouldn’t this apply to empty collections too?</p>



<a name="491991632"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991632" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991632">(Jan 05 2025 at 19:25)</a>:</h4>
<p>Oh use the collection type instead of a slice?</p>



<a name="491991636"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991636" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991636">(Jan 05 2025 at 19:25)</a>:</h4>
<p>That would be helpful</p>



<a name="491991646"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991646" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991646">(Jan 05 2025 at 19:25)</a>:</h4>
<p>Yeah, collections explicitly keep trailing comments</p>



<a name="491991650"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991650" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991650">(Jan 05 2025 at 19:25)</a>:</h4>
<p>Couldn’t we just move apply to use collection</p>



<a name="491991663"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991663" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991663">(Jan 05 2025 at 19:25)</a>:</h4>
<p>Since WS apply is going away?</p>



<a name="491991669"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991669" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991669">(Jan 05 2025 at 19:25)</a>:</h4>
<p>That adds a bunch of complexity to the ws apply case</p>



<a name="491991674"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991674" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991674">(Jan 05 2025 at 19:26)</a>:</h4>
<p>That’s the exact issue I was trying to fix later</p>



<a name="491991722"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991722" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991722">(Jan 05 2025 at 19:26)</a>:</h4>
<p>I would rather just have a new Expr variant for Pnc, and eventually delete the old WS one</p>



<a name="491991737"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991737" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991737">(Jan 05 2025 at 19:26)</a>:</h4>
<p>Ok. That’s a bigger refactor than I’m willing to do for this PR</p>



<a name="491991744"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991744" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991744">(Jan 05 2025 at 19:26)</a>:</h4>
<p>Especially after my extract spaces refactor</p>



<a name="491991764"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991764" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991764">(Jan 05 2025 at 19:27)</a>:</h4>
<p>Which PR are you talking about?</p>



<a name="491991801"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991801" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991801">(Jan 05 2025 at 19:27)</a>:</h4>
<p>The one I’m working on</p>



<a name="491991810"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991810" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991810">(Jan 05 2025 at 19:27)</a>:</h4>
<p>Ah got it, not submitted yet</p>



<a name="491991872"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491991872" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491991872">(Jan 05 2025 at 19:28)</a>:</h4>
<p>Not yet. I’m at the museum with my kids, but I’ll be able to push up what I got in a couple of hours</p>



<a name="491992069"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491992069" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491992069">(Jan 05 2025 at 19:31)</a>:</h4>
<p>You’ll either love me or hate me for it</p>



<a name="491992148"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491992148" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491992148">(Jan 05 2025 at 19:32)</a>:</h4>
<p>Nah no hating here :)</p>



<a name="491992201"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491992201" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491992201">(Jan 05 2025 at 19:33)</a>:</h4>
<p>Read the above for context. Just made extract spaces take an arena so I could merge spaces recursively from SpacesBefore/SpacesAfter nodes</p>



<a name="491992344"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491992344" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491992344">(Jan 05 2025 at 19:35)</a>:</h4>
<p>And get rid of six todos in source. Probably 16 after macro expansion</p>



<a name="491992363"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491992363" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491992363">(Jan 05 2025 at 19:35)</a>:</h4>
<p>Great!</p>



<a name="491992427"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491992427" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491992427">(Jan 05 2025 at 19:36)</a>:</h4>
<p>I think that probably resolves one of the panics I was looking at</p>



<a name="491992439"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491992439" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491992439">(Jan 05 2025 at 19:36)</a>:</h4>
<p>I'm going to pull back the PNC-related fuzzing fixes I had in the PR I linked, to avoid conflicting with you</p>



<a name="491992573"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/491992573" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#491992573">(Jan 05 2025 at 19:38)</a>:</h4>
<p>Thank you!</p>



<a name="492006991"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492006991" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492006991">(Jan 05 2025 at 23:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="453336">Joshua Warner</span> <a href="#narrow/channel/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues/near/491991539">said</a>:</p>
<blockquote>
<p>Anyway, one thing that I think can't be preserved in the current AST is comments in an empty PNC apply, e.g.:</p>
<div class="codehilite"><pre><span></span><code>foo(
    #comment
)
</code></pre></div>
<p>I think this will require using a different variant for PncApply in the AST, something like:</p>
<p><div class="codehilite"><pre><span></span><code>PncApply(&amp;&#39;a Expr&lt;&#39;a&gt;, Collection&lt;&#39;a, &amp;&#39;a Expr&lt;&#39;a&gt;&gt;),
</code></pre></div><br>
</p>
</blockquote>
<p>I'm going to start on this tonight if you haven't</p>



<a name="492011811"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492011811" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492011811">(Jan 06 2025 at 00:35)</a>:</h4>
<p>Go for it!</p>



<a name="492384617"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492384617" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492384617">(Jan 07 2025 at 20:48)</a>:</h4>
<p>I am in a horrible back and forth where I have all of the tests passing, and then exceptions gone, but the fuzzer still fails relatively quickly</p>



<a name="492384667"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492384667" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492384667">(Jan 07 2025 at 20:48)</a>:</h4>
<p>The latest thing is <code>dbg</code> followed immediately by parens</p>



<a name="492384943"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492384943" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492384943">(Jan 07 2025 at 20:50)</a>:</h4>
<p>Suggestion: the fuzzer is really useful for making sure we have coherent coverage for our syntax when it's stable, but is blocking us from progressing when we're making tons of syntax changes</p>



<a name="492384987"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492384987" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492384987">(Jan 07 2025 at 20:50)</a>:</h4>
<p>Can we disable it until after PNC + <code>||</code> args and all are merged?</p>



<a name="492384988"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492384988" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492384988">(Jan 07 2025 at 20:50)</a>:</h4>
<p>That's true</p>



<a name="492385041"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492385041" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492385041">(Jan 07 2025 at 20:51)</a>:</h4>
<p>Not remove it, just comment it out in the CI</p>



<a name="492385057"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492385057" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492385057">(Jan 07 2025 at 20:51)</a>:</h4>
<p>Here's an example that fails:</p>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="p">(</span><span class="no">L5</span><span class="p">(</span><span class="no">L5</span>
<span class="mi">0</span><span class="p">)</span>
<span class="p">(</span>
<span class="mi">5</span><span class="p">)</span>
<span class="p">(</span><span class="no">L5</span>
<span class="mi">0</span><span class="p">)</span>
<span class="n">e</span>
<span class="mi">0</span><span class="p">)</span>
<span class="n">dbg</span><span class="p">(</span><span class="no">L22</span>
<span class="mi">0</span><span class="p">)</span>
</code></pre></div>



<a name="492385134"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492385134" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492385134">(Jan 07 2025 at 20:51)</a>:</h4>
<p>Because we now have two separate nodes for Whitespace Apply and PNC apply</p>



<a name="492385648"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492385648" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492385648">(Jan 07 2025 at 20:55)</a>:</h4>
<p>Up to you guys, but often I find it a mistake to disable fuzzers temporarily. Turning them back on is a huge pain and often never happens.</p>



<a name="492385701"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492385701" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492385701">(Jan 07 2025 at 20:55)</a>:</h4>
<p>The fuzzer is catching real bugs in the new syntax. Even if they are ridiculous bugs.</p>



<a name="492385944"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492385944" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492385944">(Jan 07 2025 at 20:57)</a>:</h4>
<p>As long as there is a definite plan of when work will be put in to re-enable it, I think it could be reasonable to disable temporarily. Especially if after removing old syntax it will be easier to fix.</p>



<a name="492386045"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492386045" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492386045">(Jan 07 2025 at 20:58)</a>:</h4>
<p>I just don't want Anthony Bullard to put his computer in the garbage disposal one piece at a time</p>



<a name="492386147"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492386147" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492386147">(Jan 07 2025 at 20:58)</a>:</h4>
<p>I'm avoiding touching parsing right now because it's no fun at the moment</p>



<a name="492386877"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492386877" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492386877">(Jan 07 2025 at 21:02)</a>:</h4>
<p>Here's another beaut:</p>
<div class="codehilite" data-code-language="roc"><pre><span></span><code>(L5(L5
0)
(
0)
(L5
0)
e
0)
dbg(L(
L5
0)
+
0asebg,L(
5is
if1)
e
0)
(21
0)
</code></pre></div>



<a name="492386882"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492386882" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492386882">(Jan 07 2025 at 21:02)</a>:</h4>
<p><span class="user-mention" data-user-id="453336">@Joshua Warner</span></p>



<a name="492386945"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492386945" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492386945">(Jan 07 2025 at 21:03)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> already disabled it I thought?</p>



<a name="492386955"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492386955" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492386955">(Jan 07 2025 at 21:03)</a>:</h4>
<p>I thought Josh was standing by with some fuzzer fixes until Anthony lands his change</p>



<a name="492387035"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387035" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387035">(Jan 07 2025 at 21:03)</a>:</h4>
<p>I think we just ignore the fuzzer for now... if <span class="user-mention" data-user-id="453336">@Joshua Warner</span> is ok with that. We can follow up with fixes in a separate PR</p>



<a name="492387186"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387186" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387186">(Jan 07 2025 at 21:04)</a>:</h4>
<p>And by <em>we</em> I am thinking Josh... he seems to fix these bugs faster than I can find them (and I'm just running an automated tool)</p>



<a name="492387275"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387275" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387275">(Jan 07 2025 at 21:05)</a>:</h4>
<p>As Brendan said, if we have a concrete plan to disable the fuzzer and how we can improve the parsing impl such that re-enabling the fuzzer puts us in a better spot, I think disabling it is good</p>



<a name="492387297"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387297" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387297">(Jan 07 2025 at 21:05)</a>:</h4>
<p>If we have folks actively working on this (and we do!), I think temporarily disabling in CI is fine</p>



<a name="492387301"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387301" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387301">(Jan 07 2025 at 21:05)</a>:</h4>
<p>But yes, if we just disable in indefinitely, that's a recipe for dead code</p>



<a name="492387323"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387323" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387323">(Jan 07 2025 at 21:05)</a>:</h4>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="p">(</span><span class="no">L5</span><span class="p">(</span><span class="no">L5</span><span class="w"> </span><span class="mi">0</span><span class="p">)(</span><span class="mi">0</span><span class="p">)(</span><span class="no">L5</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="n">e</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="n">dbg</span><span class="w"> </span><span class="p">(</span><span class="n">L</span><span class="p">(</span><span class="no">L5</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">0</span><span class="n">asebg</span><span class="p">,</span><span class="w"> </span><span class="n">L</span><span class="p">(</span><span class="mi">5</span><span class="n">is</span><span class="w"> </span><span class="n">ifl</span><span class="p">)</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="mi">21</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>



<a name="492387358"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387358" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387358">(Jan 07 2025 at 21:06)</a>:</h4>
<p>We should minimize these examples</p>



<a name="492387448"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387448" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387448">(Jan 07 2025 at 21:06)</a>:</h4>
<p>I do</p>



<a name="492387492"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387492" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387492">(Jan 07 2025 at 21:06)</a>:</h4>
<p>Hmm they don’t look very minimal?</p>



<a name="492387522"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387522" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387522">(Jan 07 2025 at 21:06)</a>:</h4>
<p>What tool are you using to minimize?</p>



<a name="492387656"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387656" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387656">(Jan 07 2025 at 21:07)</a>:</h4>
<p>I just ran <code>cargo run --bin minimize expr</code> on the above and concur with Anthony... this is "minimal" according to our tool</p>



<a name="492387733"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387733" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387733">(Jan 07 2025 at 21:08)</a>:</h4>
<p>Interesting</p>



<a name="492387746"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387746" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387746">(Jan 07 2025 at 21:08)</a>:</h4>
<p>Here's this minimization</p>
<div class="codehilite"><pre><span></span><code>dbg()
</code></pre></div>
<p><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="492387775"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387775" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387775">(Jan 07 2025 at 21:08)</a>:</h4>
<p>Oh yeah that looks more minimal!</p>



<a name="492387787"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387787" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387787">(Jan 07 2025 at 21:08)</a>:</h4>
<p>I have a fix for that one locally</p>



<a name="492387810"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387810" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387810">(Jan 07 2025 at 21:08)</a>:</h4>
<p>Care to share?</p>



<a name="492387836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387836">(Jan 07 2025 at 21:09)</a>:</h4>
<p>So i can get past this?</p>



<a name="492387952"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492387952" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492387952">(Jan 07 2025 at 21:09)</a>:</h4>
<p>I was thinking of returning a Malformed if the args were empty</p>



<a name="492388341"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492388341" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492388341">(Jan 07 2025 at 21:12)</a>:</h4>
<p>I think this commit has the fix I made for that: <a href="https://github.com/roc-lang/roc/commit/8f48ced87974ff4b6b4a9fd703b437ac27ef8943">https://github.com/roc-lang/roc/commit/8f48ced87974ff4b6b4a9fd703b437ac27ef8943</a></p>



<a name="492388488"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492388488" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492388488">(Jan 07 2025 at 21:13)</a>:</h4>
<p>Ok, this isn't really compatible with the changes I've made</p>



<a name="492388490"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492388490" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492388490">(Jan 07 2025 at 21:13)</a>:</h4>
<p>FWIW I eventually want to get rid of DbgStmt as a separate node (i.e. so this is just an apply in the syntax tree), so I would rather not go down the road of making a special Malformed node for this</p>



<a name="492388554"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492388554" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492388554">(Jan 07 2025 at 21:14)</a>:</h4>
<p>Interesting; what incompatibilities are there?</p>



<a name="492388587"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492388587" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492388587">(Jan 07 2025 at 21:14)</a>:</h4>
<p>I got rid of the ParensAndCommas CalledVia variant</p>



<a name="492388799"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492388799" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492388799">(Jan 07 2025 at 21:16)</a>:</h4>
<p>I really dislike DbgStmt</p>



<a name="492388860"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492388860" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492388860">(Jan 07 2025 at 21:16)</a>:</h4>
<p>Ayaz seemed to disagree with me about it</p>



<a name="492388989"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492388989" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492388989">(Jan 07 2025 at 21:17)</a>:</h4>
<p>Yeah it's caused a bunch of trouble with making the formatter consistent</p>



<a name="492389064"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389064" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389064">(Jan 07 2025 at 21:17)</a>:</h4>
<p>I just wish it was just collapsed into the Dbg Expr node</p>



<a name="492389136"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389136" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389136">(Jan 07 2025 at 21:18)</a>:</h4>
<p>And have that just be a tuple variant that takes the Expr to be inspected</p>



<a name="492389294"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389294" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389294">(Jan 07 2025 at 21:19)</a>:</h4>
<p>Anyway, I agree this commit will have conflicts with your PncApply refactor, but I think it should be possible to adapt</p>



<a name="492389356"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389356" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389356">(Jan 07 2025 at 21:19)</a>:</h4>
<p>So should I just push it up with all the tests passing and go from there</p>



<a name="492389432"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389432" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389432">(Jan 07 2025 at 21:20)</a>:</h4>
<p>This has been the most harrrowing PR I've done on this project</p>



<a name="492389434"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389434" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389434">(Jan 07 2025 at 21:20)</a>:</h4>
<p>I don't quite follow?</p>



<a name="492389454"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389454" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389454">(Jan 07 2025 at 21:20)</a>:</h4>
<p>Should I push my current PR?</p>



<a name="492389503"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389503" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389503">(Jan 07 2025 at 21:20)</a>:</h4>
<p>Get it merged, and then get yours in after revving</p>



<a name="492389508"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389508" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389508">(Jan 07 2025 at 21:20)</a>:</h4>
<p>Oh yeah sharing early+often sounds valuable</p>



<a name="492389524"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389524" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389524">(Jan 07 2025 at 21:20)</a>:</h4>
<p>Don't have to fix everything all at once</p>



<a name="492389596"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389596" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389596">(Jan 07 2025 at 21:21)</a>:</h4>
<p>Yeah, I was just trying to see if this approach was going to solve any problems</p>



<a name="492389616"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389616" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389616">(Jan 07 2025 at 21:21)</a>:</h4>
<p>And it did fix the "final comments" issue with PNC</p>



<a name="492389685"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389685" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389685">(Jan 07 2025 at 21:22)</a>:</h4>
<p>I think that's the primary and possibly only thing this fixes</p>



<a name="492389740"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389740" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389740">(Jan 07 2025 at 21:22)</a>:</h4>
<p>One thing that will make you happy is that I did split a fmt_pnc_apply from fmt_apply</p>



<a name="492389790"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389790" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389790">(Jan 07 2025 at 21:23)</a>:</h4>
<p>It was so much simpler since I could use the format_expr_collection</p>



<a name="492389802"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389802" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389802">(Jan 07 2025 at 21:23)</a>:</h4>
<p>Oh thanks for that</p>



<a name="492389816"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389816" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389816">(Jan 07 2025 at 21:23)</a>:</h4>
<p>Nice!</p>



<a name="492389833"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389833" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389833">(Jan 07 2025 at 21:23)</a>:</h4>
<p>Yeah fmt_apply goes back to the way it was before PNC</p>



<a name="492389842"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389842" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389842">(Jan 07 2025 at 21:23)</a>:</h4>
<p>I was running into issues formatting abilities that such a change would have solved</p>



<a name="492389887"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389887" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389887">(Jan 07 2025 at 21:23)</a>:</h4>
<p>Sorry for all the dust</p>



<a name="492389908"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389908" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389908">(Jan 07 2025 at 21:23)</a>:</h4>
<p>NP!</p>



<a name="492389911"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389911" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389911">(Jan 07 2025 at 21:23)</a>:</h4>
<p>Thanks for helping out here!</p>



<a name="492389920"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389920" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389920">(Jan 07 2025 at 21:23)</a>:</h4>
<p>I don't give a hoot, you're doing the hard work</p>



<a name="492389932"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389932" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389932">(Jan 07 2025 at 21:24)</a>:</h4>
<p>Glad to see PNC live!</p>



<a name="492389934"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492389934" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492389934">(Jan 07 2025 at 21:24)</a>:</h4>
<p>Collection and all the utilities around it are very nice</p>



<a name="492390077"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492390077" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492390077">(Jan 07 2025 at 21:25)</a>:</h4>
<p>Threading the last arg <code>after</code> and the final_comments together consistently made me so mad - solved problem with collection</p>



<a name="492405770"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492405770" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492405770">(Jan 07 2025 at 23:23)</a>:</h4>
<p><span class="user-mention" data-user-id="453336">@Joshua Warner</span> <a href="https://github.com/roc-lang/roc/pull/7480">https://github.com/roc-lang/roc/pull/7480</a></p>



<a name="492426545"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492426545" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492426545">(Jan 08 2025 at 03:07)</a>:</h4>
<p>Nice; left a few review comments. Most (maybe all?) are things that can be fixed up in follow-up PRs.</p>



<a name="492426610"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492426610" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492426610">(Jan 08 2025 at 03:08)</a>:</h4>
<p>I'm not too worried about this stuff going stale / not being actioned, so I'm generally fine either way.</p>



<a name="492426710"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492426710" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492426710">(Jan 08 2025 at 03:09)</a>:</h4>
<p>There are a bunch of different changes we have out-standing right now and keeping the momentum feels important - so maybe bias towards action now?</p>



<a name="492426787"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492426787" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492426787">(Jan 08 2025 at 03:10)</a>:</h4>
<p>You will have to fix those conflicts tho :/</p>



<a name="492426793"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492426793" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492426793">(Jan 08 2025 at 03:10)</a>:</h4>
<p>(LMK if I can help with that!)</p>



<a name="492468709"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492468709" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492468709">(Jan 08 2025 at 09:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="781658">Anthony Bullard</span> <a href="#narrow/channel/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues/near/492386945">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="361169">Anton</span> already disabled it I thought?</p>
</blockquote>
<p>Yeah, to give some context; it was failing the ubuntu_x86_64.yml workflow very often, but you can never be sure that nothing else failed so you need to check every time. Also, the ubuntu_x86_64.yml is a required workflow so basically all PRs needed to be force merged. I think the fuzzer should be moved to a new standalone workflow that is not required to pass. So it can inform us but does not require a force merge by an admin.</p>



<a name="492469095"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492469095" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492469095">(Jan 08 2025 at 09:52)</a>:</h4>
<p>I saw that and thought it was a good idea.. but wasn't sure how to implement it.</p>



<a name="492469336"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492469336" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492469336">(Jan 08 2025 at 09:53)</a>:</h4>
<p><a href="https://github.com/actions/runner/issues/2347">https://github.com/actions/runner/issues/2347</a></p>



<a name="492469446"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492469446" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492469446">(Jan 08 2025 at 09:54)</a>:</h4>
<p>There's an issue to allow CI actions to fail and not block merging, but GH doesn't want to implement it, apparently</p>



<a name="492469502"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492469502" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492469502">(Jan 08 2025 at 09:54)</a>:</h4>
<p>So we can probably just do <code>run_fuzzer || true</code> in the shell command in the GH action definition</p>



<a name="492469509"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492469509" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492469509">(Jan 08 2025 at 09:54)</a>:</h4>
<p>I'll take care of it, there's a way around it, you still get the red x but it's fine to merge</p>



<a name="492469523"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492469523" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492469523">(Jan 08 2025 at 09:54)</a>:</h4>
<p>Awesome!</p>



<a name="492469530"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492469530" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492469530">(Jan 08 2025 at 09:54)</a>:</h4>
<p>That's perfect</p>



<a name="492526178"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Trying%20to%20resolve%20some%20fuzzer%20issues/near/492526178" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues.html#492526178">(Jan 08 2025 at 15:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="361169">Anton</span> <a href="#narrow/channel/395097-compiler-development/topic/Trying.20to.20resolve.20some.20fuzzer.20issues/near/492469509">said</a>:</p>
<blockquote>
<p>I'll take care of it, there's a way around it, you still get the red x but it's fine to merge</p>
</blockquote>
<p><a href="https://github.com/roc-lang/roc/pull/7484">PR#7484</a></p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>