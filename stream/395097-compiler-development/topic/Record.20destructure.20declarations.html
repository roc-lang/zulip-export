<html>
<head><meta charset="utf-8"><title>Record destructure declarations · compiler development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/index.html">compiler development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Record.20destructure.20declarations.html">Record destructure declarations</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="529166257"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Record%20destructure%20declarations/near/529166257" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JRI98 <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Record.20destructure.20declarations.html#529166257">(Jul 16 2025 at 20:59)</a>:</h4>
<p>Hello. I'm working on implementing the parsing of record destructure declarations.</p>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nb">name</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">person</span>
</code></pre></div>
<p>Am I missing something or can I assume that in case of an open curly at the beginning of a statement, the only possibility is for it to be a record destructure declaration? Could it in any way be a block?</p>



<a name="529166405"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Record%20destructure%20declarations/near/529166405" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Record.20destructure.20declarations.html#529166405">(Jul 16 2025 at 21:00)</a>:</h4>
<p>Yes this is fraught and i am currently addressing this in my open PR. i've been on vacation but plan to finish it up starting tomorrow</p>



<a name="529166458"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Record%20destructure%20declarations/near/529166458" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Record.20destructure.20declarations.html#529166458">(Jul 16 2025 at 21:00)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/7897">https://github.com/roc-lang/roc/issues/7897</a></p>



<a name="529166633"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Record%20destructure%20declarations/near/529166633" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JRI98 <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Record.20destructure.20declarations.html#529166633">(Jul 16 2025 at 21:01)</a>:</h4>
<p>I am just experimenting with it. I can drop it if it interferes with what you are doing. But it got me thinking about this</p>



<a name="529166670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Record%20destructure%20declarations/near/529166670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Record.20destructure.20declarations.html#529166670">(Jul 16 2025 at 21:02)</a>:</h4>
<p>tldr we need to have an untyped node type and be able to parse these ambiguous tokens and be able to recover seamlessly without backtracking or reparsing</p>



<a name="529166750"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Record%20destructure%20declarations/near/529166750" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Record.20destructure.20declarations.html#529166750">(Jul 16 2025 at 21:03)</a>:</h4>
<p>You can feel free to look at my PR or propose a different approach. This should have been done already but my vacation ended up being more busy than my normal working days</p>



<a name="529166805"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Record%20destructure%20declarations/near/529166805" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Record.20destructure.20declarations.html#529166805">(Jul 16 2025 at 21:03)</a>:</h4>
<p>Speaking of which, my flight is about to take off. I'll check in tomorrow morning!</p>



<a name="529166873"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Record%20destructure%20declarations/near/529166873" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JRI98 <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Record.20destructure.20declarations.html#529166873">(Jul 16 2025 at 21:03)</a>:</h4>
<p>Thank you. Have a safe flight <span aria-label="airplane departure" class="emoji emoji-1f6eb" role="img" title="airplane departure">:airplane_departure:</span></p>



<a name="529167326"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Record%20destructure%20declarations/near/529167326" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JRI98 <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Record.20destructure.20declarations.html#529167326">(Jul 16 2025 at 21:07)</a>:</h4>
<p>In the meantime I will publish my proposal as a draft. I don't really like it because it has to look ahead (ugh) but it kinda works</p>



<a name="529175355"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Record%20destructure%20declarations/near/529175355" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JRI98 <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Record.20destructure.20declarations.html#529175355">(Jul 16 2025 at 22:23)</a>:</h4>
<p>After a bit of tinkering, here it is <a href="https://github.com/roc-lang/roc/pull/8061">https://github.com/roc-lang/roc/pull/8061</a></p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>