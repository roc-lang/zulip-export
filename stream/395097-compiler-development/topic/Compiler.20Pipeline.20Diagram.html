<html>
<head><meta charset="utf-8"><title>Compiler Pipeline Diagram · compiler development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/index.html">compiler development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Compiler.20Pipeline.20Diagram.html">Compiler Pipeline Diagram</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="574200452"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Compiler%20Pipeline%20Diagram/near/574200452" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Compiler.20Pipeline.20Diagram.html#574200452">(Feb 17 2026 at 00:27)</a>:</h4>
<p>I've been reading the commits from <span class="user-mention" data-user-id="281383">@Richard Feldman</span> roll in with the new MIR and LIR stages... and thought I'd put together an updated diagram for the Roc pipeline. I like having high level diagrams to help me understand how it works, and why etc. </p>
<p>I haven't included much here, it's just the high level flow -- but maybe it helps anyone interested in following along.</p>
<p><a href="/user_uploads/22008/Eh8Pw8s6xOr_dtg05GRcT1wK/Roc-Compiler-Pipeline-2026-02-16-225823.png">Roc Compiler Pipeline-2026-02-16-225823.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/Eh8Pw8s6xOr_dtg05GRcT1wK/Roc-Compiler-Pipeline-2026-02-16-225823.png" title="Roc Compiler Pipeline-2026-02-16-225823.png"><img data-original-content-type="image/png" data-original-dimensions="3609x4852" src="/user_uploads/thumbnail/22008/Eh8Pw8s6xOr_dtg05GRcT1wK/Roc-Compiler-Pipeline-2026-02-16-225823.png/840x560.webp"></a></div><div class="codehilite"><pre><span></span><code># Roc Compiler Pipeline

The Coordinator drives the compilation pipeline         @src/compile/coordinator.zig

## Input

0. Roc Source Code

## Intermediate Representations

1. Abstract Syntax Tree (AST)                           @src/parse/AST.zig
2. Canonical Intermediate Representation (CIR)          @src/canonicalize/CIR.zig
3. Monomorphic Intermediate Representation (MIR)        @src/mir/MIR.zig
4. Layout Intermediate Representation (LIR)             @src/lir/LIR.zig

## Output

5.1. LLVM bitcode
5.2. x86-64 machine code
5.3. aarch64 machine code
5.4. WASM bytecode

## Transformations

6.1. Syntax Analysis (Source -&gt; AST)
6.1.1. Tokenize                                         @src/parse/tokenize.zig
6.1.2. Parse                                            @src/parse/Parser.zig
6.2. Semantic Analysis (AST -&gt; CIR)                     @src/canonicalize/Can.zig
6.3. Type Checking (CIR -&gt; CIR)                         @src/check/Check.zig
6.4. Monomorphization (CIR -&gt; MIR)                      @src/mir/Lower.zig
6.5. Lowering (MIR -&gt; LIR)                              @src/lir/MirToLir.zig
6.6. Code Generation (LIR -&gt; Output)                    @src/backend/mod.zig
</code></pre></div>



<a name="574215218"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Compiler%20Pipeline%20Diagram/near/574215218" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Compiler.20Pipeline.20Diagram.html#574215218">(Feb 17 2026 at 04:09)</a>:</h4>
<p>personally I'd draw Type Checking as producing a separate box to the side of CIR, something like "Types" maybe, and then similarly there would be a box called Monotypes next to MIR.</p>
<p>then an arrow from Types to Monotypes next to the arrow from CIR to MIR, and then finally an arrow from Monotypes to LIR - because LIR is created using a combination of MIR and Monotypes</p>



<a name="574215236"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Compiler%20Pipeline%20Diagram/near/574215236" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Compiler.20Pipeline.20Diagram.html#574215236">(Feb 17 2026 at 04:09)</a>:</h4>
<p>this is also missing the lambda set steps, which I personally think would be good to include!</p>



<a name="574215297"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Compiler%20Pipeline%20Diagram/near/574215297" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Compiler.20Pipeline.20Diagram.html#574215297">(Feb 17 2026 at 04:10)</a>:</h4>
<p>Excellent ... I'll look into it</p>



<a name="574228789"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/Compiler%20Pipeline%20Diagram/near/574228789" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Romain Lepert <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/Compiler.20Pipeline.20Diagram.html#574228789">(Feb 17 2026 at 07:16)</a>:</h4>
<p>It might be easier to use the convention where boxes are actions/functions and arrows are data. Then functions can naturally accept have multiple inputs/outputs.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>