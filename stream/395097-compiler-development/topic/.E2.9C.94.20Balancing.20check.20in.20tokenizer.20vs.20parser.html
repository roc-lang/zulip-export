<html>
<head><meta charset="utf-8"><title>✔ Balancing check in tokenizer vs parser · compiler development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/index.html">compiler development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/.E2.9C.94.20Balancing.20check.20in.20tokenizer.20vs.20parser.html">✔ Balancing check in tokenizer vs parser</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="508788761"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/%E2%9C%94%20Balancing%20check%20in%20tokenizer%20vs%20parser/near/508788761" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henrik Larsson <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/.E2.9C.94.20Balancing.20check.20in.20tokenizer.20vs.20parser.html#508788761">(Mar 28 2025 at 15:52)</a>:</h4>
<p>I have been looking around in the new Zig code and just wanted to hear the reasoning for why some syntax checks like balancing of " ( [ { are done in the tokenizer? (I ask just to learn and understand). It is my understanding that its common to keep the tokenizer free from syntax checks and have the parser handle that?</p>



<a name="508789633"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/%E2%9C%94%20Balancing%20check%20in%20tokenizer%20vs%20parser/near/508789633" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/.E2.9C.94.20Balancing.20check.20in.20tokenizer.20vs.20parser.html#508789633">(Mar 28 2025 at 15:55)</a>:</h4>
<p><span class="user-mention" data-user-id="453336">@Joshua Warner</span> <span class="user-mention" data-user-id="781658">@Anthony Bullard</span></p>



<a name="508790466"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/%E2%9C%94%20Balancing%20check%20in%20tokenizer%20vs%20parser/near/508790466" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/.E2.9C.94.20Balancing.20check.20in.20tokenizer.20vs.20parser.html#508790466">(Mar 28 2025 at 15:59)</a>:</h4>
<p>Because the tokenizer needs to deal with <code>${}</code>-delimited string interpolations, it must track balancing of braces inside those. It doesn't strictly need to track balancing outside of string interpolations, but the code works fine there so <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span>. I haven't evaluated whether it'd be better to not do brace-balancing outside of string interpolations. I could be convinced.</p>



<a name="508790914"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/%E2%9C%94%20Balancing%20check%20in%20tokenizer%20vs%20parser/near/508790914" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/.E2.9C.94.20Balancing.20check.20in.20tokenizer.20vs.20parser.html#508790914">(Mar 28 2025 at 16:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="736800">Henrik Larsson</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>