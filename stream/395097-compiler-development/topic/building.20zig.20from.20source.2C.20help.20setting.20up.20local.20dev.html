<html>
<head><meta charset="utf-8"><title>building zig from source, help setting up local dev · compiler development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/index.html">compiler development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html">building zig from source, help setting up local dev</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="565392600"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565392600" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drathier <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565392600">(Dec 25 2025 at 21:53)</a>:</h4>
<p>Hello :) I tried building roc from source, and got a bunch of errors. Saw in ci that it uses zig 13. Why such an old version, if the compiler was recently rewritten in zig?</p>



<a name="565392658"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565392658" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565392658">(Dec 25 2025 at 21:55)</a>:</h4>
<p>pretty sure it uses 0.15.2</p>



<a name="565392681"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565392681" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565392681">(Dec 25 2025 at 21:55)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/blob/main/BUILDING_FROM_SOURCE.md">https://github.com/roc-lang/roc/blob/main/BUILDING_FROM_SOURCE.md</a></p>



<a name="565392790"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565392790" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565392790">(Dec 25 2025 at 21:59)</a>:</h4>
<p>I think maybe our old Rust compiler is still using zig 13 (the stdlib has always been in Zig, even back when the rest of the compiler was in Rust) because that was the latest version when we started the rewrite</p>



<a name="565392894"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565392894" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drathier <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565392894">(Dec 25 2025 at 22:00)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/blob/main/.github/workflows/nightly_linux_x86_64.yml#L23">https://github.com/roc-lang/roc/blob/main/.github/workflows/nightly_linux_x86_64.yml#L23</a> mentions 13, yes</p>



<a name="565393001"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565393001" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drathier <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565393001">(Dec 25 2025 at 22:00)</a>:</h4>
<p>I got a bunch of compilation errors with master and with 0.15.2, which is why I checked. Reinstalling zig now to make sure it's 0.15.2 and retrying</p>



<a name="565393150"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565393150" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drathier <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565393150">(Dec 25 2025 at 22:04)</a>:</h4>
<p>for reference, here's a recent zig master</p>
<div class="codehilite"><pre><span></span><code>~/drathier/roc$ /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/zig build
/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: error: no field or member function named &#39;addCSourceFile&#39; in &#39;Build.Step.Compile&#39;
    cffi_test.addCSourceFile(.{
    ~~~~~~~~~^~~~~~~~~~~~~~~
/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build/Step/Compile.zig:1:1: note: struct declared here
const builtin = @import(&quot;builtin&quot;);
^~~~~
/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: note: method invocation only supports up to one level of implicit pointer dereferencing
/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: note: use &#39;.*&#39; to dereference pointer
referenced by:
    runBuild__anon_91509: /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build.zig:2226:33
    dependencyInner__anon_87981: /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build.zig:2207:29
    8 reference(s) hidden; use &#39;-freference-trace=10&#39; to see all references
/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: error: no field or member function named &#39;addCSourceFiles&#39; in &#39;Build.Step.Compile&#39;
    if (compression) zstd.addCSourceFiles(.{ .root = upstream.path(&quot;lib&quot;), .files = compression_sources });
                     ~~~~^~~~~~~~~~~~~~~~
/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build/Step/Compile.zig:1:1: note: struct declared here
const builtin = @import(&quot;builtin&quot;);
^~~~~
/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: note: method invocation only supports up to one level of implicit pointer dereferencing
/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: note: use &#39;.*&#39; to dereference pointer
build.zig:1797:28: error: operator &gt; not allowed for type &#39;Io.Timestamp&#39;
        if (roc_stat.mtime &gt; bin_stat.mtime) {
            ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~
/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Io.zig:875:23: note: struct declared here
pub const Timestamp = struct {
</code></pre></div>



<a name="565393171"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565393171" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565393171">(Dec 25 2025 at 22:05)</a>:</h4>
<p>you try <code>zig build roc</code>?</p>



<a name="565393239"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565393239" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drathier <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565393239">(Dec 25 2025 at 22:07)</a>:</h4>
<div class="codehilite"><pre><span></span><code>~/drathier/roc$ /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/zig build roc
/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: error: no field or member function named &#39;addCSourceFile&#39; in &#39;Build.Step.Compile&#39;
    cffi_test.addCSourceFile(.{
    ~~~~~~~~~^~~~~~~~~~~~~~~
/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build/Step/Compile.zig:1:1: note: struct declared here
const builtin = @import(&quot;builtin&quot;);
^~~~~
/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: note: method invocation only supports up to one level of implicit pointer dereferencing
/Users/drathier/.cache/zig/p/bytebox-0.0.1-SXc2seA2DwAUHbrqTMz_mAQQGqO0EVPYmZ89YZn4KsTi/build.zig:181:14: note: use &#39;.*&#39; to dereference pointer
referenced by:
    runBuild__anon_91509: /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build.zig:2226:33
    dependencyInner__anon_87981: /Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build.zig:2207:29
    8 reference(s) hidden; use &#39;-freference-trace=10&#39; to see all references
/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: error: no field or member function named &#39;addCSourceFiles&#39; in &#39;Build.Step.Compile&#39;
    if (compression) zstd.addCSourceFiles(.{ .root = upstream.path(&quot;lib&quot;), .files = compression_sources });
                     ~~~~^~~~~~~~~~~~~~~~
/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Build/Step/Compile.zig:1:1: note: struct declared here
const builtin = @import(&quot;builtin&quot;);
^~~~~
/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: note: method invocation only supports up to one level of implicit pointer dereferencing
/Users/drathier/.cache/zig/p/zstd-1.5.7-KEItkJ8vAAC5_rRlKmLflYQ-eKXbAIQBWZNmmJtS18q0/build.zig:51:26: note: use &#39;.*&#39; to dereference pointer
build.zig:1797:28: error: operator &gt; not allowed for type &#39;Io.Timestamp&#39;
        if (roc_stat.mtime &gt; bin_stat.mtime) {
            ~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~
/Users/drathier/Downloads/zig-aarch64-macos-0.16.0-dev.1634+b27bdd5af/lib/std/Io.zig:875:23: note: struct declared here
pub const Timestamp = struct {
                      ^~~~~~
</code></pre></div>



<a name="565394219"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565394219" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drathier <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565394219">(Dec 25 2025 at 22:39)</a>:</h4>
<p>got it building now, thanks for helping out!</p>



<a name="565394272"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565394272" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565394272">(Dec 25 2025 at 22:40)</a>:</h4>
<p>what was the issue?</p>



<a name="565394330"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/building%20zig%20from%20source%2C%20help%20setting%20up%20local%20dev/near/565394330" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drathier <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/building.20zig.20from.20source.2C.20help.20setting.20up.20local.20dev.html#565394330">(Dec 25 2025 at 22:42)</a>:</h4>
<p>not sure, unfortunately. I reinstalled zig with brew</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>