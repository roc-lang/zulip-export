<html>
<head><meta charset="utf-8"><title>roc dev expect failed exit code · compiler development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/index.html">compiler development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/roc.20dev.20expect.20failed.20exit.20code.html">roc dev expect failed exit code</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="514876152"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/roc%20dev%20expect%20failed%20exit%20code/near/514876152" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/roc.20dev.20expect.20failed.20exit.20code.html#514876152">(Apr 28 2025 at 18:12)</a>:</h4>
<p><code>roc dev main.roc</code> (same as just <code>roc main.roc</code>) currently exits with code 0 if an expect failed <a href="https://github.com/roc-lang/roc/issues/7767">#7767</a>. This is easy to fix but now the program exits as soon as one expect fails, with the old behavior we ran all expects and printed all failures. Is this early return fine or not?</p>



<a name="514905182"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/roc%20dev%20expect%20failed%20exit%20code/near/514905182" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/roc.20dev.20expect.20failed.20exit.20code.html#514905182">(Apr 28 2025 at 21:15)</a>:</h4>
<p>Once the first expect fails, the program is in a broken state.</p>



<a name="514905197"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/roc%20dev%20expect%20failed%20exit%20code/near/514905197" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/roc.20dev.20expect.20failed.20exit.20code.html#514905197">(Apr 28 2025 at 21:15)</a>:</h4>
<p>As such, early failure makes sense</p>



<a name="514905215"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/roc%20dev%20expect%20failed%20exit%20code/near/514905215" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/roc.20dev.20expect.20failed.20exit.20code.html#514905215">(Apr 28 2025 at 21:15)</a>:</h4>
<p>Long term, this will be up to the platform</p>



<a name="514905264"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/roc%20dev%20expect%20failed%20exit%20code/near/514905264" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/roc.20dev.20expect.20failed.20exit.20code.html#514905264">(Apr 28 2025 at 21:15)</a>:</h4>
<p>Like basic webserver probably will log and fail just a single request in the long term</p>



<a name="515079585"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/roc%20dev%20expect%20failed%20exit%20code/near/515079585" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/roc.20dev.20expect.20failed.20exit.20code.html#515079585">(Apr 29 2025 at 14:28)</a>:</h4>
<p>Just linking to the PR for future searches: <a href="https://github.com/roc-lang/roc/pull/7768">https://github.com/roc-lang/roc/pull/7768</a></p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>