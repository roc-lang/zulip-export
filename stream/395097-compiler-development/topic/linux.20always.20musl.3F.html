<html>
<head><meta charset="utf-8"><title>linux always musl? · compiler development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/index.html">compiler development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/linux.20always.20musl.3F.html">linux always musl?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="560823110"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/linux%20always%20musl%3F/near/560823110" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/linux.20always.20musl.3F.html#560823110">(Nov 28 2025 at 16:32)</a>:</h4>
<p>Do we always want to use musl for linux? Fine by me, it was just a bit surprising so I wanted to be sure.<br>
This is from current main branch:</p>
<div class="codehilite" data-code-language="Zig"><pre><span></span><code><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// build steps</span>
<span class="w">    </span><span class="p">...</span>

<span class="w">    </span><span class="c1">// general configuration</span>
<span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">blk</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kr">var</span><span class="w"> </span><span class="n">default_target_query</span><span class="o">:</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="n">Target</span><span class="p">.</span><span class="n">Query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.{</span>
<span class="w">            </span><span class="p">.</span><span class="n">abi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">builtin</span><span class="p">.</span><span class="n">target</span><span class="p">.</span><span class="n">os</span><span class="p">.</span><span class="n">tag</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">.</span><span class="n">linux</span><span class="p">)</span><span class="w"> </span><span class="p">.</span><span class="n">musl</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="p">};</span>
</code></pre></div>



<a name="560831007"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/linux%20always%20musl%3F/near/560831007" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/linux.20always.20musl.3F.html#560831007">(Nov 28 2025 at 17:20)</a>:</h4>
<p>I don't think there's much downside is there?</p>



<a name="560831172"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/linux%20always%20musl%3F/near/560831172" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/linux.20always.20musl.3F.html#560831172">(Nov 28 2025 at 17:21)</a>:</h4>
<p>as I understand it the main downside is that musl's allocators are slow, but I assume we are (or will be) using zig allocators anyway</p>



<a name="560831482"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/linux%20always%20musl%3F/near/560831482" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/linux.20always.20musl.3F.html#560831482">(Nov 28 2025 at 17:23)</a>:</h4>
<p>I remember I could not access file metadata with basic-cli built with musl: <a href="https://roc-lang.github.io/basic-cli/0.20.0/File/#time_accessed">https://roc-lang.github.io/basic-cli/0.20.0/File/#time_accessed</a>!<br>
But yeah, musl simplifies things a lot for now, we can always change it later if we absolutely need to.</p>



<a name="560836171"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/linux%20always%20musl%3F/near/560836171" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/linux.20always.20musl.3F.html#560836171">(Nov 28 2025 at 17:58)</a>:</h4>
<p>The goal was musl by default</p>



<a name="560836191"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/linux%20always%20musl%3F/near/560836191" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/linux.20always.20musl.3F.html#560836191">(Nov 28 2025 at 17:58)</a>:</h4>
<p>You can still explicitly build for glibc</p>



<a name="560836233"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/395097-compiler%20development/topic/linux%20always%20musl%3F/near/560836233" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/395097-compiler-development/topic/linux.20always.20musl.3F.html#560836233">(Nov 28 2025 at 17:59)</a>:</h4>
<p>More static by default is nice</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>