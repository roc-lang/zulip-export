<html>
<head><meta charset="utf-8"><title>Initial Chaining Syntax · show and tell · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/index.html">show and tell</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html">Initial Chaining Syntax</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="433435321"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433435321" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433435321">(Apr 16 2024 at 03:38)</a>:</h4>
<p>So I wanted to share a quick update now that <a href="https://github.com/roc-lang/roc/pull/6634">#6634</a> is merged. </p>
<p>It's still early and there are definitely bugs we need to find and fix. But I wanted to give an example of how you can now use the proposed <a href="https://docs.google.com/document/d/1mTEZlOKqtMonmVsIGEC1A9ufs1TQHhVgZ52Vn-13GeU/edit?usp=sharing">Chaining Syntax</a> features in a script.</p>
<p>If you use the <code>!</code> syntax and find any issues, I would really love it if you could make an issue and let me know. <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span> </p>
<p>Here is an example; this is our bash script from <code>www/build-dev-local.sh</code> that builds and serves the roc website for local development. Let's re-write it in roc! <span aria-label="rock on" class="emoji emoji-1f918" role="img" title="rock on">:rock_on:</span> </p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="ch">#!/usr/bin/env bash</span>

<span class="c1"># https://vaneyckt.io/posts/safer_bash_scripts_with_set_euxo_pipefail/</span>
<span class="nb">set</span><span class="w"> </span>-euxo<span class="w"> </span>pipefail

<span class="c1"># Use this script to for testing the WIP site locally without downloading assets every time.</span>

<span class="c1"># NOTE run `bash www/build.sh` to cache local copy of fonts, and repl assets etc</span>

<span class="c1">## Get the directory of the currently executing script</span>
<span class="nv">DIR</span><span class="o">=</span><span class="s2">"</span><span class="k">$(</span>dirname<span class="w"> </span><span class="s2">"</span><span class="nv">$0</span><span class="s2">"</span><span class="k">)</span><span class="s2">"</span>

<span class="c1"># Change to that directory</span>
<span class="nb">cd</span><span class="w"> </span><span class="s2">"</span><span class="nv">$DIR</span><span class="s2">"</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span>

rm<span class="w"> </span>-rf<span class="w"> </span>dist/
cp<span class="w"> </span>-r<span class="w"> </span>build<span class="w"> </span>dist/
cp<span class="w"> </span>-r<span class="w"> </span>public/*<span class="w"> </span>dist/
roc<span class="w"> </span>run<span class="w"> </span>main.roc<span class="w"> </span>--<span class="w"> </span>content/<span class="w"> </span>dist/

simple-http-server<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span><span class="w"> </span>--nocache<span class="w"> </span>--cors<span class="w"> </span>--index<span class="w"> </span>--<span class="w"> </span>dist/
</code></pre></div>
<p>Using the new syntax sugar for <code>!</code>, we can now write it like so. </p>
<div class="codehilite" data-code-language="Perl"><pre><span></span><code><span class="n">app</span><span class="w"> </span><span class="s">"roc-website-dev"</span>
<span class="w">    </span><span class="n">packages</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">pf:</span><span class="w"> </span><span class="s">"https://github.com/roc-lang/basic-cli/releases/download/0.9.0/oKWkaruh2zXxin_xfsYsCJobH1tO8_JvNkFzDwwzNUQ.tar.br"</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">imports</span><span class="w"> </span><span class="p">[</span><span class="n">pf</span><span class="o">.</span><span class="n">Stdout</span><span class="o">.</span><span class="p">{</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Stderr</span><span class="p">,</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Cmd</span><span class="p">,</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Task</span><span class="o">.</span><span class="p">{</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="p">}]</span>
<span class="w">    </span><span class="n">provides</span><span class="w"> </span><span class="p">[</span><span class="n">main</span><span class="p">]</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">pf</span>

<span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Task</span><span class="o">.</span><span class="n">onErr</span><span class="w"> </span><span class="n">handlErr</span>

<span class="n">handlErr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">\</span><span class="nn">err</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">Stderr</span><span class="o">.</span><span class="n">line</span><span class="o">!</span><span class="w"> </span><span class="s">"SCRIPT ERROR $(Inspect.toStr err)"</span>
<span class="w">    </span><span class="n">Task</span><span class="o">.</span><span class="n">err</span><span class="w"> </span><span class="mi">1</span>

<span class="n">run</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">removeDir</span><span class="o">!</span><span class="w"> </span><span class="s">"www/dist/"</span>
<span class="w">    </span><span class="n">copyFiles</span><span class="o">!</span><span class="w"> </span><span class="s">"www/build/"</span><span class="w"> </span><span class="s">"www/dist/"</span>
<span class="w">    </span><span class="n">copyFiles</span><span class="o">!</span><span class="w"> </span><span class="s">"www/public/"</span><span class="w"> </span><span class="s">"www/dist/"</span>
<span class="w">    </span><span class="n">generateSiteContent</span><span class="o">!</span><span class="w"> </span><span class="s">"www/content/"</span>
<span class="w">    </span><span class="n">serveFiles</span><span class="o">!</span>

<span class="n">verifyDirExists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">\</span><span class="nn">path</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">path</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Path</span><span class="o">.</span><span class="n">fromStr</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Path</span><span class="o">.</span><span class="n">isDir</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Task</span><span class="o">.</span><span class="nb">map</span><span class="w"> </span><span class="o">\</span><span class="nn">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Task</span><span class="o">.</span><span class="n">onErr</span><span class="w"> </span><span class="o">\</span><span class="nn">err</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Task</span><span class="o">.</span><span class="n">err</span><span class="w"> </span><span class="p">(</span><span class="n">DirDoesntExist</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="n">path</span><span class="p">)</span>

<span class="n">removeDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">\</span><span class="nn">path</span><span class="w"> </span><span class="o">-&gt;</span>

<span class="w">    </span><span class="n">verifyDirExists</span><span class="o">!</span><span class="w"> </span><span class="n">path</span>

<span class="w">    </span><span class="n">line</span><span class="o">!</span><span class="w"> </span><span class="s">"Removing files from $(path)..."</span>

<span class="w">    </span><span class="n">Cmd</span><span class="o">.</span><span class="k">new</span><span class="w"> </span><span class="s">"rm"</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Cmd</span><span class="o">.</span><span class="n">arg</span><span class="w"> </span><span class="s">"-rf"</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Cmd</span><span class="o">.</span><span class="n">arg</span><span class="w"> </span><span class="n">path</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Cmd</span><span class="o">.</span><span class="n">status</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Task</span><span class="o">.</span><span class="n">mapErr</span><span class="w"> </span><span class="n">ErrRemovingDir</span>

<span class="n">copyFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">\</span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="nn">to</span><span class="w"> </span><span class="o">-&gt;</span>

<span class="w">    </span><span class="n">verifyDirExists</span><span class="o">!</span><span class="w"> </span><span class="n">from</span>

<span class="w">    </span><span class="n">line</span><span class="o">!</span><span class="w"> </span><span class="s">"Copying files from $(from) to $(to)..."</span>

<span class="w">    </span><span class="n">Cmd</span><span class="o">.</span><span class="k">new</span><span class="w"> </span><span class="s">"cp"</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Cmd</span><span class="o">.</span><span class="n">args</span><span class="w"> </span><span class="p">[</span><span class="s">"-r"</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="p">]</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Cmd</span><span class="o">.</span><span class="n">status</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Task</span><span class="o">.</span><span class="n">mapErr</span><span class="w"> </span><span class="n">ErrCopyingFiles</span>

<span class="n">generateSiteContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">\</span><span class="nn">path</span><span class="w"> </span><span class="o">-&gt;</span>

<span class="w">    </span><span class="n">verifyDirExists</span><span class="o">!</span><span class="w"> </span><span class="n">path</span>

<span class="w">    </span><span class="n">line</span><span class="o">!</span><span class="w"> </span><span class="s">"Generating static site..."</span>

<span class="w">    </span><span class="n">Cmd</span><span class="o">.</span><span class="k">new</span><span class="w"> </span><span class="s">"roc"</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Cmd</span><span class="o">.</span><span class="n">args</span><span class="w"> </span><span class="p">[</span><span class="s">"www/main.roc"</span><span class="p">,</span><span class="w"> </span><span class="s">"--"</span><span class="p">,</span><span class="w"> </span><span class="s">"www/content/"</span><span class="p">,</span><span class="w"> </span><span class="s">"www/dist/"</span><span class="p">]</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Cmd</span><span class="o">.</span><span class="n">status</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Task</span><span class="o">.</span><span class="n">mapErr</span><span class="w"> </span><span class="n">ErrBuildingSite</span>

<span class="n">serveFiles</span><span class="w"> </span><span class="o">=</span>

<span class="w">    </span><span class="n">line</span><span class="o">!</span><span class="w"> </span><span class="s">"Serving static site..."</span>

<span class="w">    </span><span class="n">Cmd</span><span class="o">.</span><span class="k">new</span><span class="w"> </span><span class="s">"simple-http-server"</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Cmd</span><span class="o">.</span><span class="n">args</span><span class="w"> </span><span class="p">[</span><span class="s">"-p"</span><span class="p">,</span><span class="w"> </span><span class="s">"8080"</span><span class="p">,</span><span class="w"> </span><span class="s">"--nocache"</span><span class="p">,</span><span class="w"> </span><span class="s">"--cors"</span><span class="p">,</span><span class="w"> </span><span class="s">"--index"</span><span class="p">,</span><span class="w"> </span><span class="s">"--"</span><span class="p">,</span><span class="w"> </span><span class="s">"www/dist/"</span><span class="p">]</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Cmd</span><span class="o">.</span><span class="n">status</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Task</span><span class="o">.</span><span class="n">mapErr</span><span class="w"> </span><span class="n">ErrServingFiles</span>
</code></pre></div>
<p>Although the roc version is a little longer, I find it much easier to follow what is happening. </p>
<p>I think using helpers like this is much easier to compose, and gives nice error messages.</p>
<p>Let me know what you think?</p>



<a name="433440844"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433440844" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433440844">(Apr 16 2024 at 04:38)</a>:</h4>
<p>Sweet! The new syntax looks very clean</p>



<a name="433475922"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433475922" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433475922">(Apr 16 2024 at 09:08)</a>:</h4>
<p>Looks good! It could be nice to create a function like this to remove some boilerplate:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">cmd</span>
<span class="w">    </span><span class="s">"roc"</span>
<span class="w">    </span><span class="p">[</span><span class="s">"www/main.roc"</span><span class="p">,</span><span class="w"> </span><span class="s">"--"</span><span class="p">,</span><span class="w"> </span><span class="s">"www/content/"</span><span class="p">,</span><span class="w"> </span><span class="s">"www/dist/"</span><span class="p">]</span>
<span class="w">    </span><span class="kt">ErrBuildingSite</span>
</code></pre></div>



<a name="433496441"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433496441" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> witoldsz <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433496441">(Apr 16 2024 at 11:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="361169">Anton</span> <a href="#narrow/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax/near/433475922">said</a>:</p>
<blockquote>
<p>It could be nice to create a function like this to remove some boilerplate:</p>
</blockquote>
<p>see:  <a href="#narrow/stream/304641-ideas/topic/basic-cli.20Cmd.20api">this topic: basic-cli Cmd api</a></p>



<a name="433497501"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433497501" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> witoldsz <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433497501">(Apr 16 2024 at 11:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax/near/433435321">said</a>:</p>
<blockquote>
<p><div class="codehilite"><pre><span></span><code>verifyDirExists = \path -&gt;
    path
    |&gt; Path.fromStr
    |&gt; Path.isDir
    |&gt; Task.map \_ -&gt; {}
    |&gt; Task.onErr \err -&gt; Task.err (DirDoesntExist err path)
</code></pre></div><br>
</p>
</blockquote>
<p>Does it mean you ignore the result of <code>Path.isDir</code>? Should the function return <code>Task.err</code> if is not a directory?</p>



<a name="433533366"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433533366" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> witoldsz <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433533366">(Apr 16 2024 at 14:18)</a>:</h4>
<p>I was playing with this new syntax, trying to modify the <code>verifyDirExists</code>, but I am not sure if this is correct:</p>
<div class="codehilite"><pre><span></span><code>verifyDirExists = \path -&gt;
    isDir =
        Path.fromStr path
        |&gt; Path.isDir
        |&gt; Task.attempt! # &lt;------ &quot;!&quot; goes here?

    when isDir is
        Ok true -&gt; Task.succeed {}
        Ok false -&gt; Task.err (DirProblem path &quot;not a directory&quot;)
        Err err -&gt; Task.err (DirProblem path err
</code></pre></div>
<p>or</p>
<div class="codehilite"><pre><span></span><code>verifyDirExists = \path -&gt;
    isDir =
        Path.fromStr path
        |&gt; Path.isDir! # &lt;------ or &quot;!&quot; goes  here?
        |&gt; Task.attempt

    when isDir is
        Ok true -&gt; Task.succeed {}
        Ok false -&gt; Task.err (DirProblem path &quot;not a directory&quot;)
        Err err -&gt; Task.err (DirProblem path err
</code></pre></div>
<p>or maybe this is correct?</p>
<div class="codehilite"><pre><span></span><code>verifyDirExists = \path -&gt;
    isDir =
        Path.fromStr path
        |&gt; Path.isDir
        |&gt; Task.attempt

    when isDir! is # &lt;------ &quot;!&quot; goes  here?
        Ok true -&gt; Task.succeed {}
        Ok false -&gt; Task.err (DirProblem path &quot;not a directory&quot;)
        Err err -&gt; Task.err (DirProblem path err
</code></pre></div>
<p>My question is where are the proper places for the <code>!</code>?</p>



<a name="433558842"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433558842" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433558842">(Apr 16 2024 at 16:08)</a>:</h4>
<p>Should be after the <code>Task.attempt</code></p>



<a name="433558990"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433558990" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433558990">(Apr 16 2024 at 16:09)</a>:</h4>
<p>Though. Technically should also be valid in the <code>when isDir! is</code></p>



<a name="433559071"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433559071" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433559071">(Apr 16 2024 at 16:09)</a>:</h4>
<p>Oh sorry, one edit</p>



<a name="433559391"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433559391" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433559391">(Apr 16 2024 at 16:11)</a>:</h4>
<p>It can't be used with <code>Task.attempt</code> at all. You need something like:<br>
<code>Task.toResult : Task ok err -&gt; Task (Result ok err) []</code></p>



<a name="433559466"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433559466" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433559466">(Apr 16 2024 at 16:11)</a>:</h4>
<p>Not sure if that exists yet. Probably needs to be added to basic cli</p>



<a name="433559655"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433559655" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433559655">(Apr 16 2024 at 16:12)</a>:</h4>
<p>That would replace <code>Task.attempt</code> and the bang would go after it</p>



<a name="433560034"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433560034" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433560034">(Apr 16 2024 at 16:14)</a>:</h4>
<p>oh yeah we should add that!</p>



<a name="433566011"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433566011" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433566011">(Apr 16 2024 at 16:44)</a>:</h4>
<p>If we are going all in on <code>!</code>, should we actually steal <code>Task.attempt</code>. Wondering if <code>|&gt; Task.attempt!</code> reads better than <code>|&gt; Task.toResult!</code>. Or maybe there is a better third name</p>



<a name="433593789"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433593789" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> witoldsz <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433593789">(Apr 16 2024 at 19:48)</a>:</h4>
<p>You are so right, Task.attempt won't work with <code>!</code> unless it returns a Task, the attempt was meant to work with regular callback/backpassing. <code>Task.toResult</code>is not bad, but it can mislead, because, after all, it still returns a Task.</p>



<a name="433593884"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433593884" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433593884">(Apr 16 2024 at 19:49)</a>:</h4>
<p>yeah, naming is hard.</p>



<a name="433594718"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433594718" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> witoldsz <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433594718">(Apr 16 2024 at 19:54)</a>:</h4>
<p><code>Task.asResult</code> <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="433595768"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433595768" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> witoldsz <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433595768">(Apr 16 2024 at 20:01)</a>:</h4>
<p>Silly/naive name or going after math/category theory to resolve the problem <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> </p>
<p>I can't remember reading about "moniods, functors, monads" in here, so probably first option...</p>



<a name="433596580"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433596580" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433596580">(Apr 16 2024 at 20:06)</a>:</h4>
<p>Personally, if we are planning to remove backpassing long term, <code>Task.attempt</code> is no longer useful. So stealling <code>Task.attempt</code> makes most sense to me.  That said, these are all readable enough:<br>
1)</p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">isDir</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="nc">Path</span><span class="o">.</span><span class="n">fromStr</span><span class="w"> </span><span class="n">path</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Path</span><span class="o">.</span><span class="n">isDir</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">attempt!</span>
</code></pre></div>
<p>2)</p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">isDir</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="nc">Path</span><span class="o">.</span><span class="n">fromStr</span><span class="w"> </span><span class="n">path</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Path</span><span class="o">.</span><span class="n">isDir</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">asResult!</span>
</code></pre></div>
<p>3)</p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">isDir</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="nc">Path</span><span class="o">.</span><span class="n">fromStr</span><span class="w"> </span><span class="n">path</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Path</span><span class="o">.</span><span class="n">isDir</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">toResult!</span>
</code></pre></div>



<a name="433645855"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433645855" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433645855">(Apr 17 2024 at 04:13)</a>:</h4>
<p>I like (1) the most.</p>



<a name="433646860"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433646860" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433646860">(Apr 17 2024 at 04:25)</a>:</h4>
<p>I'll make a PR for basic-cli and basic-webserver</p>



<a name="433648975"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433648975" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433648975">(Apr 17 2024 at 04:51)</a>:</h4>
<p><span aria-label="thank you" class="emoji emoji-1f64f" role="img" title="thank you">:thank_you:</span></p>



<a name="433700670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433700670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> witoldsz <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433700670">(Apr 17 2024 at 08:25)</a>:</h4>
<p>I find the <code>Task.attempt</code>can be somewhat confusing, especially for those not used to always check the type signatures first. </p>
<p>The problem with this word is that it implies that it is the thing that actually puts a task in motion. Like if you won't "attempt" nothing will ever happen.</p>
<p>The <code>Task.asResult</code> or <code>.toResult</code> are a little bit better, but they are not accurate, because they still return a <code>Task</code>.</p>
<p>So, the question I am asking myself is what do we need that function for in the first place? <code>Result</code> entanglement  is just a mean to an end.</p>
<p>In my case (the <code>verifyDirExists</code> function) I had to use it to be able to… <a href="https://www.thesaurus.com/browse/inspect">inspect</a> the result, so maybe this is the direction for a good, self describing name.</p>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax/near/433593884">said</a>:</p>
<blockquote>
<p>yeah, naming is hard.</p>
</blockquote>
<p>It is! <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="433711608"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433711608" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jasper Woudenberg <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433711608">(Apr 17 2024 at 09:26)</a>:</h4>
<p>Putting another naming idea in the hat: how about <code>Task.awaitResult</code>?</p>



<a name="433723698"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433723698" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433723698">(Apr 17 2024 at 10:35)</a>:</h4>
<p><code>Task.resultify</code> <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="433728007"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433728007" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433728007">(Apr 17 2024 at 11:02)</a>:</h4>
<p><code>Task.toResultTask</code> actually says what it does, but I'd still rather <code>Task.toResult</code> for brevity. I agree that <code>Task.attempt</code> is really confusing. Coming from other languages I would think that runs the task, waits for it to finish, and then returns it's result.</p>



<a name="433733836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433733836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433733836">(Apr 17 2024 at 11:36)</a>:</h4>
<p>How does this look?</p>
<p><a href="/user_uploads/22008/u5T45ZtyLJyti_n9Y_UKvrhK/Screenshot-2024-04-17-at-21.36.32.png">Screenshot-2024-04-17-at-21.36.32.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/u5T45ZtyLJyti_n9Y_UKvrhK/Screenshot-2024-04-17-at-21.36.32.png" title="Screenshot-2024-04-17-at-21.36.32.png"><img src="/user_uploads/22008/u5T45ZtyLJyti_n9Y_UKvrhK/Screenshot-2024-04-17-at-21.36.32.png"></a></div>



<a name="433735780"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433735780" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433735780">(Apr 17 2024 at 11:47)</a>:</h4>
<p>I don’t love <code>toResult</code> because it implies it would return a <code>Result</code> instead of a <code>Task (Result …) …</code></p>



<a name="433735789"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433735789" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433735789">(Apr 17 2024 at 11:47)</a>:</h4>
<p>I've added this <a href="https://github.com/roc-lang/basic-cli/pull/182">PR basic-cli#182</a></p>



<a name="433735818"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433735818" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433735818">(Apr 17 2024 at 11:47)</a>:</h4>
<p>What about <code>withResult</code>?</p>



<a name="433736194"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433736194" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433736194">(Apr 17 2024 at 11:49)</a>:</h4>
<p>What about just <code>Task.result</code></p>



<a name="433736553"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433736553" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433736553">(Apr 17 2024 at 11:51)</a>:</h4>
<p>My inspiration for the shorter <code>result</code> is just that it's shorter, though unfortunately just as vague. I think there is no way around the fact that users will have to get familiar with Tasks.</p>



<a name="433736846"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433736846" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433736846">(Apr 17 2024 at 11:53)</a>:</h4>
<p>And another feature of the Chaining Syntax (that's not yet implemented) will enable us to do this</p>
<div class="codehilite" data-code-language="Perl"><pre><span></span><code><span class="n">main</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="n">checkFile</span><span class="w"> </span><span class="s">"bad"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">result</span><span class="o">!</span><span class="w"> </span><span class="n">is</span>
<span class="w">        </span><span class="n">Ok</span><span class="w"> </span><span class="nn">Good</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Stdout</span><span class="o">.</span><span class="n">line</span><span class="w"> </span><span class="s">"GOOD"</span>
<span class="w">        </span><span class="n">Ok</span><span class="w"> </span><span class="nn">Bad</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Stdout</span><span class="o">.</span><span class="n">line</span><span class="w"> </span><span class="s">"BAD"</span>
<span class="w">        </span><span class="n">Err</span><span class="w"> </span><span class="nn">IOError</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Stdout</span><span class="o">.</span><span class="n">line</span><span class="w"> </span><span class="s">"IOError"</span>
</code></pre></div>



<a name="433737097"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433737097" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433737097">(Apr 17 2024 at 11:54)</a>:</h4>
<p>Instead of </p>
<div class="codehilite" data-code-language="Perl"><pre><span></span><code><span class="n">main</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">checkFile</span><span class="w"> </span><span class="s">"bad"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">Task</span><span class="o">.</span><span class="n">toResult</span><span class="o">!</span>

<span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">is</span>
<span class="w">        </span><span class="n">Ok</span><span class="w"> </span><span class="nn">Good</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Stdout</span><span class="o">.</span><span class="n">line</span><span class="w"> </span><span class="s">"GOOD"</span>
<span class="w">        </span><span class="n">Ok</span><span class="w"> </span><span class="nn">Bad</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Stdout</span><span class="o">.</span><span class="n">line</span><span class="w"> </span><span class="s">"BAD"</span>
<span class="w">        </span><span class="n">Err</span><span class="w"> </span><span class="nn">IOError</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Stdout</span><span class="o">.</span><span class="n">line</span><span class="w"> </span><span class="s">"IOError"</span>
</code></pre></div>



<a name="433737487"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433737487" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433737487">(Apr 17 2024 at 11:56)</a>:</h4>
<p>If I'm naming the intermediate variable here, I'll reach for <code>result</code>, so maybe that's an indicator for a decent name?</p>



<a name="433738741"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433738741" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433738741">(Apr 17 2024 at 12:02)</a>:</h4>
<p>Yeah, I like <code>Task.result</code></p>



<a name="433748720"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/433748720" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#433748720">(Apr 17 2024 at 12:52)</a>:</h4>
<p>I like <code>Task.result</code> the best of the ones we've discussed too! <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="434464820"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/434464820" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#434464820">(Apr 20 2024 at 03:21)</a>:</h4>
<p><span class="user-mention" data-user-id="453336">@Joshua Warner</span> </p>
<p>Are you familiar with what changes we made to the formatter regarding the below? Is it just a switch to undo the indenting thing?</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span>  said: I forget where we discussed this, but I think in the world of <code>!</code> we want to go back to indenting <code>|&gt;</code> (and other operators like <code>+</code> for consistency) because otherwise they look weird in statements, e.g.</p>
</blockquote>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="nf">foo</span><span class="w"> </span><span class="ow">=</span>
<span class="w">    </span><span class="kt">File</span><span class="o">.</span><span class="n">writeUtf8</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">onErr</span><span class="o">!</span><span class="w"> </span><span class="kt">Blah</span>

<span class="w">    </span><span class="kt">File</span><span class="o">.</span><span class="n">writeUtf8</span><span class="w"> </span><span class="n">baz</span><span class="w"> </span><span class="n">etc</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">onErr</span><span class="o">!</span><span class="w"> </span><span class="kt">Baz</span>
</code></pre></div>
<p>vs.</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="nf">foo</span><span class="w"> </span><span class="ow">=</span>
<span class="w">    </span><span class="kt">File</span><span class="o">.</span><span class="n">writeUtf8</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">onErr</span><span class="o">!</span><span class="w"> </span><span class="kt">Blah</span>

<span class="w">    </span><span class="kt">File</span><span class="o">.</span><span class="n">writeUtf8</span><span class="w"> </span><span class="n">baz</span><span class="w"> </span><span class="n">etc</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">onErr</span><span class="o">!</span><span class="w"> </span><span class="kt">Baz</span>
</code></pre></div>



<a name="434465015"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/434465015" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#434465015">(Apr 20 2024 at 03:25)</a>:</h4>
<p>I guess I don't feel strongly on the formatting; I just remember Richard expressing the opposite opinion about how pizza operators should be formatted before.</p>



<a name="434465306"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/434465306" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#434465306">(Apr 20 2024 at 03:31)</a>:</h4>
<p>I think I prefer the way it currently is. I've thought it might be nice to have the formatter auto add new lines between statements like is displayed here. But I don't feel strongly about it either.</p>



<a name="434467468"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/434467468" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#434467468">(Apr 20 2024 at 04:08)</a>:</h4>
<p>I prefer the way it currently is too</p>



<a name="434491300"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/434491300" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#434491300">(Apr 20 2024 at 10:58)</a>:</h4>
<p>interesting - you prefer it even in the "statement" case in the example above?</p>



<a name="434506293"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/434506293" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#434506293">(Apr 20 2024 at 14:38)</a>:</h4>
<p>I definitely have grown to like consistent pipeline with no indentation. I even move things to new lines to avoid indenting pipeline</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>example</p>
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="c1"># I prefer this</span>
<span class="n">myVar</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">someFile</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">File</span><span class="o">.</span><span class="n">readBytes</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">sum</span>

<span class="c1"># over these</span>
<span class="n">myVar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">someFile</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">File</span><span class="o">.</span><span class="n">readBytes</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">sum</span>

<span class="n">myVar</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">someFile</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">File</span><span class="o">.</span><span class="n">readBytes</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">sum</span>
</code></pre></div>
</div></div>
<p>I would really dislike if we force indenting all pipeline even those that are unrelated to tasks.</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>example</p>
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="c1"># definitely prefer this</span>
<span class="n">someFn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">\</span><span class="n">buf</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">buf</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Str</span><span class="o">.</span><span class="n">concat</span><span class="w"> </span><span class="s2">"abc"</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Str</span><span class="o">.</span><span class="n">len</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="err">\</span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span>

<span class="c1"># to this</span>
<span class="n">someFn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">\</span><span class="n">buf</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">buf</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Str</span><span class="o">.</span><span class="n">concat</span><span class="w"> </span><span class="s2">"abc"</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Str</span><span class="o">.</span><span class="n">len</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="err">\</span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span>
</code></pre></div>
</div></div>
<p>As for the specific example given above. I honestly think that the <code>|&gt; </code> might be enough visual indentation for the reader. So I am inclined to say that we should leave it alone. I generally prefer flat over indentation, so clearly have a bias. As long as it is has a <code>|&gt; </code> on each following line and an empty line between each task, my gut feeling is that it will read fine.</p>



<a name="434509402"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Initial%20Chaining%20Syntax/near/434509402" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Initial.20Chaining.20Syntax.html#434509402">(Apr 20 2024 at 15:18)</a>:</h4>
<p>cool, I'm game to try leaving it as-is and see how it feels! <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>