<html>
<head><meta charset="utf-8"><title>article about looping in Roc · show and tell · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/index.html">show and tell</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html">article about looping in Roc</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="409826149"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409826149" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409826149">(Dec 24 2023 at 16:15)</a>:</h4>
<p>I wrote a first draft of an <a href="https://docs.google.com/document/d/1jhWVc5Cha7Rj3fKWY1f8ggBiBaneXelJDXJ8RS5cMzM/edit?usp=sharing">article about looping in Roc</a> - any feedback welcome!</p>



<a name="409826903"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409826903" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409826903">(Dec 24 2023 at 16:28)</a>:</h4>
<blockquote>
<p>is a tail-recursive function because no code path ends in a call to another function. (They all end in either a recursive call to runLogic itself, or else they return a value instead of calling any function at all, such as the [] -&gt; state branch.)</p>
</blockquote>
<p>I think we need a better definition here. Cause it makes it sound like this should be tail recursive (at least if someone is new to tail recursion): </p>
<div class="codehilite"><pre><span></span><code>fib = \x -&gt;
    if x &lt;= 1 then
         x
    else
         (fib (x - 1)) + (fib (x - 2))
</code></pre></div>
<p>Also, you can end a tail recursive function by calling another function that returns a value.</p>



<a name="409826974"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409826974" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409826974">(Dec 24 2023 at 16:29)</a>:</h4>
<p>yeah I originally had a more comprehensive definition but I tried changing it to something that explained why the current example in question was tail-recursive</p>



<a name="409826982"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409826982" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409826982">(Dec 24 2023 at 16:29)</a>:</h4>
<p>maybe it's worth a longer explanation though</p>



<a name="409827044"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409827044" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409827044">(Dec 24 2023 at 16:30)</a>:</h4>
<p>the <code>fib</code> example might be too much of a digression, but maybe not</p>



<a name="409827951"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409827951" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409827951">(Dec 24 2023 at 16:48)</a>:</h4>
<p>Yeah, probably too much of a digression</p>



<a name="409827959"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409827959" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409827959">(Dec 24 2023 at 16:49)</a>:</h4>
<p>Maybe some different wording could help....</p>



<a name="409828158"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409828158" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409828158">(Dec 24 2023 at 16:52)</a>:</h4>
<p>or maybe link to a separate article about recursion, which could get into both tail recursion and also modulo cons <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="409828267"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409828267" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409828267">(Dec 24 2023 at 16:54)</a>:</h4>
<p>That seems reasonable</p>



<a name="409834035"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409834035" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409834035">(Dec 24 2023 at 18:37)</a>:</h4>
<p>For the first example, maybe explicitly state that it's C? Does everyone still know it, or do lots of people go straight to higher level stuff these days? I don't know!</p>



<a name="409834678"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409834678" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409834678">(Dec 24 2023 at 18:52)</a>:</h4>
<p>When we first get to the list walk code, we start seeing arrows pointing both ways. Syntax for lambda, back passing, and pipe. We often get beginner questions about all the arrows! This might be a good place for some links to explain them.</p>



<a name="409835063"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409835063" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409835063">(Dec 24 2023 at 19:00)</a>:</h4>
<p>could be, although I'm already concerned it's too long <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="409835071"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409835071" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409835071">(Dec 24 2023 at 19:00)</a>:</h4>
<p>I'm not sure if it's worth bothering with List.forEach. Feels like thar section is pulling me in two directions at once. I think it would be better to just teach it the more "traditional FP" way and commit to the new concept. Take away the crutch of foreach</p>



<a name="409835147"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409835147" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409835147">(Dec 24 2023 at 19:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc/near/409835063">said</a>:</p>
<blockquote>
<p>could be, although I'm already concerned it's too long <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
</blockquote>
<p>Links don't make it longer though!</p>



<a name="409836227"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409836227" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Pyattaev <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409836227">(Dec 24 2023 at 19:18)</a>:</h4>
<p>Good work, I was missing that in the tutorial! Some improvement ideas below:</p>
<p>Can you change the walk example to walkUntil? Or write out the version with walkUntil? Right now it reads like switching to walkUntil will suddenly make everything worse, since you mention "tagging", and tagging may be unfamiliar to people from C/C++/Python lands.</p>
<p>Missed opportunities for concurrency section reads kind of "meh", as you are not showing how to actually achieve concurrent sendEmail in roc.</p>



<a name="409844279"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409844279" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409844279">(Dec 24 2023 at 21:38)</a>:</h4>
<p>I came to comment basically exactly what <span class="user-mention" data-user-id="674610">@Alexander Pyattaev</span> said about the concurrency bit. It feels out of place because it doesn't actually express a solution, just that this issue potentially exists.</p>
<p>Also I'd like to see a link to some more reading. <br>
A link to the list of List.* Functions when it's first brought up that there are lots. </p>
<p>A link to more reading about tail recursion. You don't really explain the ins and outs of how to recognise if a function is tail recursive or not and that's not something people intuitively understand. So a link to a good explainer post elsewhere would be great I think.</p>
<p>Otherwise it's a good little read and I think it'll definitely help answer some of the questions people have on that topic</p>



<a name="409879506"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409879506" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes Nevalainen <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409879506">(Dec 25 2023 at 06:22)</a>:</h4>
<p>I think it is worth to mention that walk also goes by the name reduce or fold in many other languages. :)</p>



<a name="409900515"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409900515" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409900515">(Dec 25 2023 at 10:54)</a>:</h4>
<p>Similar to earlier comments, I also think it would be good to split this up a bit and use links for the different parts.</p>



<a name="409900518"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409900518" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409900518">(Dec 25 2023 at 10:54)</a>:</h4>
<p>This is no fault of the article, but List.walk really is a lot more complicated than the for loop. It makes me want to have an editor plugin that displays them as for loops. I'm not sure how often List.walk would actually come up in real Roc code though. It's a pain point worth thinking about sometime.</p>



<a name="409900646"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409900646" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409900646">(Dec 25 2023 at 10:56)</a>:</h4>
<p>I think the article would work well with some small exercises for the reader in between but that's also something for the future.</p>



<a name="409904905"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409904905" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409904905">(Dec 25 2023 at 11:53)</a>:</h4>
<blockquote>
<p>I'm not sure how often List.walk would actually come up in real Roc code though</p>
</blockquote>
<p>Probably about as often as <code>List.foldl</code> in Elm.<br>
We have 329k lines of Elm code at work and I just searched for occurrences of the common List iteration functions<br>
<code>List.map</code> 2266<br>
<code>List.filter</code> 403<br>
<code>List.filterMap</code> 420<br>
<code>List.foldl</code> 222</p>
<p>EDIT: reduced all the numbers because I was double-counting due to symlinks</p>



<a name="409904946"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/409904946" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#409904946">(Dec 25 2023 at 11:53)</a>:</h4>
<p>Interesting, thanks <span class="user-mention" data-user-id="431893">@Brian Carroll</span>!</p>



<a name="410843592"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/410843592" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#410843592">(Jan 02 2024 at 13:09)</a>:</h4>
<p>The tail recursive function <code>runLogic</code> contains the pattern <code>[user, ..rest]</code>. Is there an <code>as</code> missing like <code>[user, .. as rest]</code> or does this pattern work in newer versions of Roc?</p>



<a name="410843637"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/410843637" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#410843637">(Jan 02 2024 at 13:09)</a>:</h4>
<p>oh yeah that's a mistake, thanks!</p>



<a name="412610723"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412610723" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Osazuwa Oyegun <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412610723">(Jan 12 2024 at 19:52)</a>:</h4>
<p>If I have a list of employee records - {name, salary, position, gender} - will List.walk enable one to iterate over the list and pass each record to another function that returns a string description of the employee?</p>



<a name="412611361"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412611361" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412611361">(Jan 12 2024 at 19:56)</a>:</h4>
<p>Yes, although <a href="http://List.map">List.map</a> will be a lot easier if you only want to do what you described</p>



<a name="412628628"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412628628" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Osazuwa Oyegun <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412628628">(Jan 12 2024 at 22:18)</a>:</h4>
<p>Apologies for this newbie dump but I'm stumped and would appreciate any help to get this working. This is my Day3 on Roc so I'm sure it's probably something simple that I'm missing, but I'm tired of going around in circles. Thanks in advance.</p>
<div class="codehilite"><pre><span></span><code>app &quot;learn&quot;
    packages {
        pf: &quot;https://github.com/roc-lang/basic-cli/releases/download/0.7.1/Icc3xJoIixF3hCcfXrDwLCu4wQHtNdPyoJkEbkgIElA.tar.br&quot;,
    }
    imports [
        pf.Stdout,
    ]
    provides [main] to pf

Person: {name: Str, age: U8}

joe: Person
joe = {name: &quot;Joseph First&quot;, age: 19}

mary: Person
mary = {name: &quot;Mary McPherson&quot;, age: 23}

folks: List Person
folks = [joe, mary]

# describe: Person -&gt; Str
describe =
    \p -&gt;
        Stdout.line &quot;\(p.name) is \(Num.toStr p.age) years old.&quot;

main =
    List.map folks describe
</code></pre></div>



<a name="412629477"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412629477" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412629477">(Jan 12 2024 at 22:24)</a>:</h4>
<p>The type of Stdout is <code>Task {} *</code>, so the type for describe is <code>describe: Person -&gt; Task {} *</code></p>



<a name="412629775"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412629775" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412629775">(Jan 12 2024 at 22:27)</a>:</h4>
<p>Also see <a href="#narrow/stream/231634-beginners/topic/.E2.9C.94.20task.20of.20list.20.2E.2E.2E.20of.20tasks.3F/near/411877058">this thread</a> for how you might loop over the person list to prints them out</p>



<a name="412629924"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412629924" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412629924">(Jan 12 2024 at 22:28)</a>:</h4>
<p>Also, no need to apologise, it took me a while to understand how to use Tasks properly <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="412638345"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412638345" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412638345">(Jan 12 2024 at 23:48)</a>:</h4>
<p>I think we should consider adding some helpers to <code>Task</code> for common scenarios like this, and then moving them into <code>List</code> once Task is a builtin</p>



<a name="412638773"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412638773" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412638773">(Jan 12 2024 at 23:52)</a>:</h4>
<p>Something like <code>Task.list : List a, (a -&gt; Task c d) -&gt; Task (List c) d</code> maybe?</p>



<a name="412638868"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412638868" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412638868">(Jan 12 2024 at 23:53)</a>:</h4>
<p>The above would then be</p>
<div class="codehilite"><pre><span></span><code>main = folks |&gt; Task.list describe
</code></pre></div>



<a name="412643462"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412643462" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412643462">(Jan 13 2024 at 00:28)</a>:</h4>
<p>Probably want two forms. The version you listed is equvalent to <code>map</code> we also want a <code>forEach</code> equivalent that just runs and returns nothing.</p>



<a name="412644091"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412644091" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412644091">(Jan 13 2024 at 00:32)</a>:</h4>
<p>So <code>Task.forEach : List a, (a -&gt; Task {} b) -&gt; Task {} b</code>?</p>



<a name="412644149"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412644149" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412644149">(Jan 13 2024 at 00:32)</a>:</h4>
<p>I can add this to basic-cli, just not sure what API we actually want</p>



<a name="412644570"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412644570" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412644570">(Jan 13 2024 at 00:35)</a>:</h4>
<p>Yeah</p>



<a name="412644621"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412644621" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412644621">(Jan 13 2024 at 00:35)</a>:</h4>
<p>Not sure best names, but those two would be the functions, both built on <code>Task.loop</code></p>



<a name="412644649"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/412644649" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#412644649">(Jan 13 2024 at 00:35)</a>:</h4>
<p>Or, <code>List.walk</code> I guess</p>



<a name="419323962"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/419323962" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anne Archibald <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#419323962">(Feb 01 2024 at 20:05)</a>:</h4>
<p>Thank you, I was just trying to figure out how to print lines in a loop! I suppose one could make a concurrent version by accumulating a list of Tasks and handing them to some concurrency primitive that combined the lot into a single Task that fired them all off and waited for them all to finish?</p>
<p>I find your explanation of tail recursion a little confusing. Your example runLogic calls itself and then returns immediately (has a tail call to itself). But it has another exit. In this case it just returns its state argument, but if it called another function to transform the state before returning it (sorted the list, say), then runLogic would be no less tail-recursive.</p>
<p>If a recursive function is one that calls itself, then I would say that a tail-recursive function is one in which all the calls to itself are the last action, immediately returning the result of the inner call.</p>



<a name="419325789"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/419325789" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#419325789">(Feb 01 2024 at 20:17)</a>:</h4>
<p>You might want Task.loop<br>
<a href="https://www.roc-lang.org/packages/basic-cli/Task#loop">https://www.roc-lang.org/packages/basic-cli/Task#loop</a></p>



<a name="419328161"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/419328161" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#419328161">(Feb 01 2024 at 20:33)</a>:</h4>
<p>You make a good point about tail recursion. I'll quote the original article because this thread is quite old and long.</p>
<blockquote>
<p>runLogic is a tail-recursive function because no code path ends in a call to another function.</p>
</blockquote>
<p>I think the intention was probably to distinguish mutual recursion from self recursion. But it never actually says that to be tail recursive the function should call itself! You could have a non-recursive function where no code path ends in a call to another function! <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="419347614"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/419347614" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Norbert Hajagos <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#419347614">(Feb 01 2024 at 22:52)</a>:</h4>
<p>Maybe for the tail recursive "definition", it could be something like: "runLogic is a tail-recursive function because the code paths containing recursive calls only have those as the very final expression that gets returned."</p>
<p>Was also waiting for a solution for the concurrency problem.</p>
<p>I know the language is in this form right now, but this is a beginner article in which backpassing seems quite out of place. "What's that?!"- I imagine my C# -budy already asking. Looking forward for the <code>!</code> operator! Would help so much with simplifying the examples.</p>
<p>Great that you aspire to teach FP with Roc. It is my first FP language and it was much smoother than I imagined (was scared off by the reputation of Haskell).</p>



<a name="419602240"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/article%20about%20looping%20in%20Roc/near/419602240" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anne Archibald <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/article.20about.20looping.20in.20Roc.html#419602240">(Feb 03 2024 at 11:49)</a>:</h4>
<p>The concurrency thing is probably a ways down the road.</p>
<p>I think you'd need to build a platform primitive (for each platform) that took a list of Tasks and fed them to a thread pool, producing some kind of combined result. You would also need (for example) roc's reference counting (on those platforms) to be thread-safe. </p>
<p>Or you could ensure that all (some of) the primitives the platform provided were async-enabled and then use an async spawner/collector. (This wouldn't get you parallel processing, though, only I/O concurrency, which seems a waste of the possibilities enabled by roc's purity guarantees.)</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>