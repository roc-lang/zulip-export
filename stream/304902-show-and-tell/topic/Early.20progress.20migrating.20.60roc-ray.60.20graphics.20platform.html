<html>
<head><meta charset="utf-8"><title>Early progress migrating `roc-ray` graphics platform · show and tell · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/index.html">show and tell</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html">Early progress migrating `roc-ray` graphics platform</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="567382821"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567382821" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567382821">(Jan 11 2026 at 10:47)</a>:</h4>
<p>Thought I'd share some cool progress on <code>roc-ray</code> -- I've been using this to help fix bugs in the platform/host side of things and validate the platform packages and linking designs. I got it to a pretty cool point today and wanted to share with everyone here. </p>
<p><a href="/user_uploads/22008/elS9u5ZTTp_eNLkYxqSXCVDO/roc-ray-alpha-1.gif">roc-ray-alpha-1.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/elS9u5ZTTp_eNLkYxqSXCVDO/roc-ray-alpha-1.gif" title="roc-ray-alpha-1.gif"><img data-animated="true" data-original-content-type="image/gif" data-original-dimensions="1136x782" src="/user_uploads/thumbnail/22008/elS9u5ZTTp_eNLkYxqSXCVDO/roc-ray-alpha-1.gif/840x560-anim.webp"></a></div><div class="codehilite"><pre><span></span><code>app [Model, program] { rr: platform "https://github.com/lukewilliamboswell/roc-ray/releases/download/alpha-0-test/HB6qgLwjKqjmVXTxJEzFqnC72SJEfif98CnJ8ZVN86UE.tar.zst" }

import rr.Draw
import rr.Color
import rr.PlatformState

Model : {
    message: Str,
}
program = { init!, render! }

init! : () =&gt; Try(Model, [Exit(I64), ..])
init! = || Ok({
    message: "Roc :heart: Raylib!",
})

render! : Model, PlatformState =&gt; Try(Model, [Exit(I64), ..])
render! = |model, state| {

    # Circle follows the mouse, changes color when clicked
    circle_color = if state.mouse.left { Color.Red } else { Color.Green }

    Draw.draw!(RayWhite, || {
        Draw.text!({ pos: { x: 10, y: 10 }, text: model.message, size: 30, color: Color.DarkGray })
        Draw.rectangle!({ x: 100, y: 200, width: 100, height: 80, color: Color.Red })
        Draw.line!({ start: { x: 100, y: 500 }, end: { x: 600, y: 550 }, color: Color.Blue })

        # Draw circle last so it is drawn over the top of other shapes
        Draw.circle!({ center: { x: state.mouse.x, y: state.mouse.y }, radius: 50, color: circle_color })
    })

    Ok(model)
}
</code></pre></div>
<p>This is using a <em>very</em> alpha release that only has macos pre-built host binaries included, and definitely requires roc built from source. I'd like to get Linux and Windows hosts supported next I think before adding too many more features and making a real branch in the roc-ray repository. </p>
<div class="codehilite"><pre><span></span><code>$ roc build examples/hello_world.roc
</code></pre></div>
<p>Note* that we have a bug that prevents using the run subcommand, so you just have to build it first then run the executable.</p>



<a name="567657918"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567657918" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567657918">(Jan 12 2026 at 23:02)</a>:</h4>
<p>Yay linux seems to be working now also <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span> </p>
<p><a href="/user_uploads/22008/twKtDtRafJd_qzxCamGBFVUJ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/twKtDtRafJd_qzxCamGBFVUJ/image.png" title="image.png"><img data-original-content-type="image/png" data-original-dimensions="1756x792" src="/user_uploads/thumbnail/22008/twKtDtRafJd_qzxCamGBFVUJ/image.png/840x560.webp"></a></div>



<a name="567658023"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567658023" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567658023">(Jan 12 2026 at 23:03)</a>:</h4>
<div class="codehilite"><pre><span></span><code>lbw@lbw-B850-GAMING-X-WIFI6E:~/Documents/Github/roc-platform-template-zig$ file hello_world
hello_world: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib/x86_64-linux-gnu/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, with debug_info, not stripped
</code></pre></div>
<p>It's not a fully static binary though, I couldn't find a way to make it work with musl</p>



<a name="567658776"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567658776" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567658776">(Jan 12 2026 at 23:11)</a>:</h4>
<p>I've found an issue with linking math symbols <code>libm</code> I'm digging into</p>



<a name="567658981"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567658981" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567658981">(Jan 12 2026 at 23:13)</a>:</h4>
<p>Already this is way cooler than the original roc-ray implementation... no need to have a complete dev toolchain installed like cargo for application authors, just <code>roc</code> and your good to go!! (needs further testing to confirm this works for everyone)</p>



<a name="567659904"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567659904" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567659904">(Jan 12 2026 at 23:23)</a>:</h4>
<p>Ok cool, fixed my maths symbols I think. </p>
<p>Anyone running linux... can you help me test this?</p>
<div class="codehilite"><pre><span></span><code>app [Model, program] { rr: platform &quot;https://github.com/lukewilliamboswell/roc-ray/releases/download/alpha-0-test/EydNNTemUX6GMbTE4sY9JWqvLpPxvp2ZcwKDSn3WaDmB.tar.zst&quot; }

import rr.Draw
import rr.Color
import rr.PlatformState

Model : {
    message: Str,
}
program = { init!, render! }

init! : () =&gt; Try(Model, [Exit(I64), ..])
init! = || Ok({
    message: &quot;Roc :heart: Raylib!&quot;,
})

render! : Model, PlatformState =&gt; Try(Model, [Exit(I64), ..])
render! = |model, state| {

    # Circle follows the mouse, changes color when clicked
    circle_color = if state.mouse.left { Color.Red } else { Color.Green }

    Draw.draw!(RayWhite, || {
        Draw.text!({ pos: { x: 10, y: 10 }, text: model.message, size: 30, color: Color.DarkGray })
        Draw.rectangle!({ x: 100, y: 200, width: 100, height: 80, color: Color.Red })
        Draw.line!({ start: { x: 100, y: 500 }, end: { x: 600, y: 550 }, color: Color.Blue })

        # Draw circle last so it is drawn over the top of other shapes
        Draw.circle!({ center: { x: state.mouse.x, y: state.mouse.y }, radius: 50, color: circle_color })
    })

    Ok(model)
}
</code></pre></div>



<a name="567660013"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567660013" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567660013">(Jan 12 2026 at 23:24)</a>:</h4>
<p><span class="user-mention" data-user-id="430894">@Dan G Knutson</span> you might be interested</p>



<a name="567660264"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567660264" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567660264">(Jan 12 2026 at 23:27)</a>:</h4>
<p>Next up is Windows... though it might be worthwhile revisiting this issue first <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span> <a href="https://github.com/roc-lang/roc/issues/8779">https://github.com/roc-lang/roc/issues/8779</a></p>



<a name="567660951"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567660951" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567660951">(Jan 12 2026 at 23:33)</a>:</h4>
<p><a href="/user_uploads/22008/cUKc-yfkbSS0fwgGWSrIqvy5/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/cUKc-yfkbSS0fwgGWSrIqvy5/image.png" title="image.png"><img data-original-content-type="image/png" data-original-dimensions="884x692" src="/user_uploads/thumbnail/22008/cUKc-yfkbSS0fwgGWSrIqvy5/image.png/840x560.webp"></a></div><p>on linux</p>



<a name="567661055"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567661055" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567661055">(Jan 12 2026 at 23:35)</a>:</h4>
<p>single file gui app lets goooo</p>



<a name="567661113"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567661113" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567661113">(Jan 12 2026 at 23:35)</a>:</h4>
<p>Which distro are you running? what OS/Arch too?</p>



<a name="567661200"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567661200" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567661200">(Jan 12 2026 at 23:36)</a>:</h4>
<p>ubuntu 24.04 x64, musl failed but glibc worked</p>



<a name="567662776"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567662776" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan G Knutson <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567662776">(Jan 12 2026 at 23:55)</a>:</h4>
<p>Same over here! (on PopOS, which is basically ubuntu) I'm stoked for this</p>



<a name="567662883"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567662883" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567662883">(Jan 12 2026 at 23:56)</a>:</h4>
<p>Sounds like I need to move this into a branch in roc-ray so we can start adding more features</p>



<a name="567675297"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567675297" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567675297">(Jan 13 2026 at 02:40)</a>:</h4>
<p>The problem here is different: libraylib.a is a static library (.a), not a compiled binary. It contains object files with<br>
   unresolved symbols that expect to be linked against glibc at build time.</p>
<p>When raylib was compiled on an older system with _FORTIFY_SOURCE, the compiler generated calls to __sprintf_chk etc. Those symbols<br>
   existed in old glibc but have different signatures or are gone in glibc 2.42.</p>
<p>Backwards compat only works for:</p>
<div class="codehilite"><pre><span></span><code> - Fully linked executables/shared libraries (.so)
 - They embed symbol versions like printf@GLIBC_2.2.5
</code></pre></div>

<p>Doesn't work for:</p>
<div class="codehilite"><pre><span></span><code> - Static .a files that still need to be linked
 - They just have raw symbol references
</code></pre></div>

<p>So this is a build-time incompatibility, not a runtime one. The solution is rebuilding raylib on your system.</p>



<a name="567675313"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567675313" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567675313">(Jan 13 2026 at 02:40)</a>:</h4>
<p>When I try to run with arch linux</p>



<a name="567675403"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567675403" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567675403">(Jan 13 2026 at 02:42)</a>:</h4>
<p>Ok I had a similar issue with the Rust version... I think the solution here is to bundle the published raylib libraries and then write our own C wrapper instead of using zigraylib</p>



<a name="567675486"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567675486" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567675486">(Jan 13 2026 at 02:43)</a>:</h4>
<p>They're published here <a href="https://github.com/raysan5/raylib/releases/tag/5.5">https://github.com/raysan5/raylib/releases/tag/5.5</a></p>



<a name="567859016"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567859016" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Alexander <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567859016">(Jan 13 2026 at 21:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform/near/567662883">said</a>:</p>
<blockquote>
<p>Sounds like I need to move this into a branch in roc-ray so we can start adding more features</p>
</blockquote>
<p>Yes please.</p>



<a name="567955173"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Early%20progress%20migrating%20%60roc-ray%60%20graphics%20platform/near/567955173" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Early.20progress.20migrating.20.60roc-ray.60.20graphics.20platform.html#567955173">(Jan 14 2026 at 10:56)</a>:</h4>
<p>It's been a busy day with work and I didn't achieve what I hoped to. </p>
<p>My goals at the start of the day:</p>
<ul>
<li>switch to using the raylib release instead of building our own <code>libraylib.a</code></li>
<li>migrate the branch to <code>roc-ray</code> repository</li>
</ul>
<p>What I ended up doing instead</p>
<ul>
<li>switch to using the raylib release instead of building our own <code>libraylib.a</code> <span aria-label="check" class="emoji emoji-2705" role="img" title="check">:check:</span> </li>
<li>implement roc-ray support for web / canvas </li>
<li>take a random detour and fix a memory leak in roc </li>
</ul>
<p>I'll try and finish cleaning up and migrate to a repo tomorrow. I'd love to add Windows support and cut an alpha release sometime this week. </p>
<p>I'll be travelling for work all next week and it would be nice to know the harder integration issues (like linking hosts and dependencies) are resolved, and I can focus on adding features leading up to the online meetup.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>