<html>
<head><meta charset="utf-8"><title>Article: 0.1 + 0.2 · show and tell · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/index.html">show and tell</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html">Article: 0.1 + 0.2</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="436794597"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436794597" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436794597">(May 02 2024 at 23:55)</a>:</h4>
<p>I wrote an article about how 0.1 + 0.2 works in Roc - any feedback welcome!</p>
<p><a href="https://docs.google.com/document/d/11JzH-Xjc2WpRT0yp8w4PXwUtq9KJcL_EQ4-PG9f_JI8/edit?usp=sharing">https://docs.google.com/document/d/11JzH-Xjc2WpRT0yp8w4PXwUtq9KJcL_EQ4-PG9f_JI8/edit?usp=sharing</a></p>



<a name="436795457"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436795457" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436795457">(May 03 2024 at 00:03)</a>:</h4>
<p>not specifically in response to <a href="https://twitter.com/oznova_/status/1784841631143006367">https://twitter.com/oznova_/status/1784841631143006367</a> but timely <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="436797664"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436797664" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436797664">(May 03 2024 at 00:29)</a>:</h4>
<p>Not critical but the article doesn't show how to get F32/F64 numbers in Roc. There's an implication for doing it it via top level function annotations and the type names are provided but I think having it written out somewhere would be nice.</p>



<a name="436799628"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436799628" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436799628">(May 03 2024 at 00:56)</a>:</h4>
<blockquote>
<p>20 before decimal point,<br>
17 after decimal point</p>
</blockquote>
<p>Should say 18 after the decimal point</p>



<a name="436799657"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436799657" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436799657">(May 03 2024 at 00:57)</a>:</h4>
<p>And I guess we can technically store some numbers with 21 before, but that is quite limited.</p>



<a name="436800147"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436800147" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436800147">(May 03 2024 at 01:02)</a>:</h4>
<p>I think it would also be good to mention precision loss due to multiplication. It hits fixed point decimals significantly more than floating point decimals.</p>



<a name="436800185"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436800185" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436800185">(May 03 2024 at 01:03)</a>:</h4>
<p>E.G. <code>0.000000001*0.0000000001</code> is <code>0</code> with roc's fixed point dec, but should lose no precision in the C# floating point dec. It should just update the exponent.</p>



<a name="436800315"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436800315" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436800315">(May 03 2024 at 01:04)</a>:</h4>
<p>And this generally isn't an issue, but with repeated multiplication of decimals, it is essentially guaranteed that some values will fall of the end. I don't think we currently have any sort of rounding for this. So values over time will trend smaller cause this is a form of truncation.</p>



<a name="436800694"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436800694" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436800694">(May 03 2024 at 01:08)</a>:</h4>
<p>This may be a clearer example of the error I am talking about: <code>0.123456789 * 0.00000000001 * 100000000000</code></p>
<p>Results in <code>0.1234567</code></p>



<a name="436804648"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436804648" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436804648">(May 03 2024 at 02:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2/near/436799628">said</a>:</p>
<blockquote>
<blockquote>
<p>20 before decimal point,<br>
17 after decimal point</p>
</blockquote>
<p>Should say 18 after the decimal point</p>
</blockquote>
<p>oh yeah I guess we get all 18 as long as we only have 20 before <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="436804754"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436804754" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436804754">(May 03 2024 at 02:02)</a>:</h4>
<p>thanks, those are good points to clarify!</p>



<a name="436804797"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/436804797" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#436804797">(May 03 2024 at 02:03)</a>:</h4>
<p>after writing this I got curious about how our <code>Dec</code> performance compares to C#'s <code>System.Decimal</code> but I really need to switch to preparing for this live-coding demo on May 7 and not start another project <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="440682038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440682038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440682038">(May 26 2024 at 03:26)</a>:</h4>
<p>here's a prettier draft with the previous round of feedback incorporated: <a href="https://rtfeldman.com/0.1-plus-0.2">https://rtfeldman.com/0.1-plus-0.2</a> - I'm looking to share it around Tuesday, so any feedback welcome between now and then!</p>



<a name="440686763"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440686763" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440686763">(May 26 2024 at 05:08)</a>:</h4>
<p>Nice! It was interesting to hear that Go evaluates constants differently</p>



<a name="440694527"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440694527" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jasper Woudenberg <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440694527">(May 26 2024 at 07:43)</a>:</h4>
<p>Loved the article! I liked the introduction to the <code>Dec</code> type, but it also works quite well as documentation for base-2 floating point behavior, I think! Got two feedbacky thoughts:</p>
<p>The article mentions calculations with money as a usecase for <code>Dec</code>, but I'm curious if we'd recommend that outside of the context of this blogpost demonstrating <code>Dec</code>? I think I might still prefer to represent money as the amount of cents, stored in an <code>Int</code>, to make amounts with partial cents unrepresentable.</p>



<a name="440694913"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440694913" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jasper Woudenberg <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440694913">(May 26 2024 at 07:50)</a>:</h4>
<p>Second thought: Given the performance benefits, do we expect base-2 floating points to be the default in most production code? If so, is it going to trip people up that the default decimal type used in the REPL will be different to the default decimal type in most production code?</p>
<p>Concrete scenario: Someone new to the intricacies of base-2 float points sees a test failure that, when reduced, comes down to <code>0.1 + 0.2 != 0.3</code>. When they try in the REPL, that works. Back in the test, it doesn't. Do we have a path for folks to resolve that confusion by themselves?</p>



<a name="440703157"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440703157" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sven van Caem <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440703157">(May 26 2024 at 10:25)</a>:</h4>
<p>I would guess that since floating point numbers are explicitly opt-in, the only way for a codebase to end up using them is if said hypothetical person opted into them themselves, or someone on their team did. In the former case, it would mean that somewhere in their program is a type annotation or number literal suffix that might be discovered when looking for differences between the broken code and the working code in the REPL. In the latter case, it would just be a matter of asking one's coworkers.</p>



<a name="440707777"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440707777" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440707777">(May 26 2024 at 11:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="477725">Jasper Woudenberg</span> <a href="#narrow/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2/near/440694913">said</a>:</p>
<blockquote>
<p>Given the performance benefits, do we expect base-2 floating points to be the default in most production code?</p>
</blockquote>
<p>I expect it to vary by use case. For graphical things, I expect lots of <code>F32</code>s because that's what GPUs prefer. For money things, I expect <code>Dec</code> - I don't know why anyone would opt into floats for that! <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="440707829"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440707829" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440707829">(May 26 2024 at 11:46)</a>:</h4>
<p>so I guess I don't think there will be one uniform answer to that <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="440707875"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440707875" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440707875">(May 26 2024 at 11:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="477725">Jasper Woudenberg</span> <a href="#narrow/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2/near/440694527">said</a>:</p>
<blockquote>
<p>I think I might still prefer to represent money as the amount of cents, stored in an <code>Int</code>, to make amounts with partial cents unrepresentable.</p>
</blockquote>
<p>so I based this on looking into how people represent money in other languages - I thought <a href="https://stackoverflow.com/questions/582797/should-you-choose-the-money-or-decimalx-y-datatypes-in-sql-server">this</a> was a good discussion (not any one answer, necessarily, but the discussion itself)</p>



<a name="440707931"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440707931" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440707931">(May 26 2024 at 11:48)</a>:</h4>
<p>it seems like people tend to view more digits after the decimal point as a benefit when dealing with money, and then truncate only when printing</p>



<a name="440707945"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440707945" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440707945">(May 26 2024 at 11:48)</a>:</h4>
<p>for example, one person in that discussion said "storing accounting values as integer multiples of 1/10000th of unit is very common"</p>



<a name="440712097"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440712097" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jasper Woudenberg <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440712097">(May 26 2024 at 13:02)</a>:</h4>
<p>Interesting stuff! I've been working with a payment system for the past year or two and the need for fractional cents hasn't shown up there and that influenced me a bit, but I can totally imagine that someone writing, say, software for a stock market would have different needs. Thanks for the link!</p>



<a name="440715213"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440715213" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440715213">(May 26 2024 at 13:57)</a>:</h4>
<p>I would honestly expect Dec to be more common in most production systems for a few reasons:</p>
<ol>
<li>It is the language default so many will use it without thinking about it.</li>
<li>It has a number of nice accuracy related benefits that people will get used to</li>
<li>Most production code is business logic where correctness is more important than perf</li>
<li>Assuming you are mostly adding/subtracting, Dec is faster than floats.</li>
</ol>



<a name="440726357"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440726357" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440726357">(May 26 2024 at 17:01)</a>:</h4>
<p>Really good read! I have a few remarks. Coming from the scientific world, I think I’m missing one major argument for when to use floating point representations. When you deal with multiplication and division of multiple values, you can easily reach the limits of fixed points representations. Basically you have no choice when doing math. But if most of your use cases only involve addition / substraction, and very few multiplications/divisions then no need for floating point. In that sense it’s nice that Decimal is even faster at addition/substraction for when it’s the actual preferred use case.</p>



<a name="440726440"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440726440" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440726440">(May 26 2024 at 17:02)</a>:</h4>
<p>In a sense you showed this when doing the 0.00...1 square multiplication example.</p>



<a name="440727455"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440727455" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440727455">(May 26 2024 at 17:21)</a>:</h4>
<p>ahh interesting! Do you happen to have a nice concrete example of that I could mention?</p>



<a name="440727465"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440727465" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440727465">(May 26 2024 at 17:21)</a>:</h4>
<p>like a particular type of scientific calculation that runs into this</p>



<a name="440727777"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440727777" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440727777">(May 26 2024 at 17:27)</a>:</h4>
<p>Anything that involves optimization problem means you want to solve a function that tends to 0 so you need "almost arbitrary" precision close to 0<br>
Anything that involves iterative algorithms with matrix multiplications. Matrix decompositions etc. There is even a concept called the "condition number" <a href="https://en.wikipedia.org/wiki/Condition_number">https://en.wikipedia.org/wiki/Condition_number</a> that is usually a measure of how "usefull for computation precision" is a matrix.</p>



<a name="440728341"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440728341" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440728341">(May 26 2024 at 17:38)</a>:</h4>
<p>Maybe one concrete use case for potential newcomers would be students trying to solve their physics tasks.<br>
In physics, there are a lot of constants that have very big/small exponents. For example:</p>
<ul>
<li>gravity : G=6.67430 * 10^(−11)</li>
<li>charge of an electron : e=1.602176634 * 10^(−19)</li>
<li>etc.<br>
-</li>
</ul>



<a name="440728361"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440728361" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440728361">(May 26 2024 at 17:39)</a>:</h4>
<p>And you typically multiply / divide them a lot to compute the answer you are looking for.</p>



<a name="440733909"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440733909" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440733909">(May 26 2024 at 19:20)</a>:</h4>
<p>that makes sense!</p>



<a name="440733927"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440733927" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440733927">(May 26 2024 at 19:21)</a>:</h4>
<p>and I assume you wouldn't care about base-2 vs base-10 in those use cases</p>



<a name="440790785"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440790785" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440790785">(May 27 2024 at 07:19)</a>:</h4>
<p>I don’t think I would, except if there is a huge performance tradeoff and I’m doing something that may be long to compute.</p>



<a name="440941679"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/440941679" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zeljko Nesic <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#440941679">(May 28 2024 at 00:40)</a>:</h4>
<p>I have just put down an intro to chaos theory that was pioneered by meteorologist who had a slight rounding error that have lead to wildly different results. </p>
<p>I feel that you could have a bit of Pop-Sci bit where you show the importance of the concept of exact numbers.</p>



<a name="441015720"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441015720" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441015720">(May 28 2024 at 11:11)</a>:</h4>
<p>this is now published at <a href="https://rtfeldman.com/0.1-plus-0.2">https://rtfeldman.com/0.1-plus-0.2</a> - thanks everyone for commenting!</p>



<a name="441025563"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441025563" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441025563">(May 28 2024 at 12:09)</a>:</h4>
<p>I submitted it to HN; it's under "new" if anyone wants to upvote it (they penalize upvotes that come from direct links)</p>



<a name="441025796"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441025796" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441025796">(May 28 2024 at 12:10)</a>:</h4>
<p>also feel free to share it around anywhere else you like!</p>



<a name="441189674"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441189674" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441189674">(May 29 2024 at 08:18)</a>:</h4>
<p>someone commented that</p>
<blockquote>
<p>It's possible to have a fixed-point, base-2 representation, but we won't discuss that combination because it's so rarely used in practice.</p>
</blockquote>
<p>is not actually true if you are lowlevel enough. Apparently it comes up all the time in media codecs and such</p>
<p><a href="https://hachyderm.io/@harold@mastodon.gamedev.place/112522962115617393">https://hachyderm.io/@harold@mastodon.gamedev.place/112522962115617393</a></p>



<a name="441192481"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441192481" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441192481">(May 29 2024 at 08:34)</a>:</h4>
<p>whoa, TIL!</p>



<a name="441304357"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441304357" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441304357">(May 29 2024 at 19:41)</a>:</h4>
<p>Hmmm.... I guess that makes sense. Any quantized float would become a fixed point base 2 representation.</p>



<a name="441304417"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441304417" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441304417">(May 29 2024 at 19:41)</a>:</h4>
<p>So by that definition, also used all the time in ML when trying to get more perf on cpu.</p>



<a name="441304543"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441304543" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441304543">(May 29 2024 at 19:42)</a>:</h4>
<p>Basically, you have to know the the offset and multiplier, but otherwise, you do U8 math (so the float is represented as 0 to 255).</p>



<a name="441304675"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441304675" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441304675">(May 29 2024 at 19:43)</a>:</h4>
<p>Personally, at least from what I have seen in ML, people wouldn't label quantization as using a fixed point binary format. Instead, they would say they are mapping a range of floats to the integer space and doing integer math</p>



<a name="441304699"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441304699" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441304699">(May 29 2024 at 19:43)</a>:</h4>
<p>Though I guess those both could be seen as different words for the same thing. Just perspective</p>



<a name="441353350"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441353350" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> timotree <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441353350">(May 30 2024 at 01:10)</a>:</h4>
<blockquote>
<p>Of course, "arbitrary-size" numbers can't actually represent <em>arbitrary</em> numbers because all but a hilariously small proportion of numbers in mathematics are too big to fit in any computer's memory. Even 1 divided by 3 can't be represented without precision loss in base-10 or base-2 format, no matter how much memory you use in the attempt.</p>
</blockquote>
<p>What about "exact rational numbers" where you represent rational numbers using bigint numerator and denominator? I think those warrant discussion as a safe default numeric type</p>



<a name="441353786"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441353786" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> timotree <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441353786">(May 30 2024 at 01:15)</a>:</h4>
<p>Pyret, a language which like Roc aims to be very beginner friendly <a href="https://dcic-world.org/2023-02-21/part_appendix.html#%28part._pyret-vs-python%29">uses rational numbers by default</a></p>



<a name="441782075"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441782075" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Plotke <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441782075">(May 31 2024 at 19:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="636541">timotree</span> <a href="#narrow/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2/near/441353350">said</a>:</p>
<blockquote>
<p>What about "exact rational numbers" where you represent rational numbers using bigint numerator and denominator? I think those warrant discussion as a safe default numeric type</p>
</blockquote>
<p>I was wondering the same thing. But looking into it, it looks like there's a lot of performance tradeoffs, such as:</p>
<ul>
<li>Multiplying involves two multiplies instead of one, then possibly a reduction step</li>
<li>Adding or subtracting involves finding a least common denominator, two multiplies, before finally the add</li>
<li>Denominators getting large can either be solved by rounding, meaning our representation is no longer exact, or arbitrary length ints, which would result in the performance hit of losing cache locality.</li>
</ul>
<p>IEEE floats have some really rough edges, so I really like that Dec can provide nicer (though still imperfect) properties for only a small performance hit.</p>



<a name="441786330"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441786330" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441786330">(May 31 2024 at 19:23)</a>:</h4>
<p>Yeah, I think the only big issue with Dec is that it is fixed point instead of floating. For most real world numbers it is fine, but math done in the wrong order could lose a lot of precision off the end.</p>



<a name="441786401"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Article%3A%200.1%20%2B%200.2/near/441786401" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Article.3A.200.2E1.20.2B.200.2E2.html#441786401">(May 31 2024 at 19:23)</a>:</h4>
<p>That said, I think fixed makes a lot of sense in terms of perf and simplicity</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>