<html>
<head><meta charset="utf-8"><title>Roc platform builder · show and tell · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/index.html">show and tell</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html">Roc platform builder</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="570420523"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570420523" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lozzy <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570420523">(Jan 27 2026 at 20:55)</a>:</h4>
<p>I have been doing some experiments on how to make building roc platforms in rust easier: <a href="https://github.com/johanneshorner/roc-platform-builder">https://github.com/johanneshorner/roc-platform-builder</a><br>
There are no docs, likely a lot of bugs and I'm not sure if the abstractions I have so far are actually useful, so caution is advised <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span> .<br>
So far it tries to shield the user from writing unsafe code and automatically sorts the hosted functions by name.</p>
<p><a href="https://github.com/johanneshorner/basic-cli-roc-platform-builder">Here</a> I used the crate to port <a href="https://github.com/roc-lang/basic-cli/tree/migrate-zig-compiler">basic-cli</a>.</p>



<a name="570420892"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570420892" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570420892">(Jan 27 2026 at 20:57)</a>:</h4>
<p><span class="user-mention" data-user-id="1001498">@lozzy</span> have you heard about <code>roc glue</code> and the design for that? <span class="user-mention" data-user-id="430894">@Dan G Knutson</span> has just started implementing that in <a href="https://github.com/roc-lang/roc/pull/9083">#9083</a> - but the general idea is you give the roc cli a plugin (a <code>RustGlue.roc</code> script) which it uses to codegen all the Roc types (e.g. in Rust).</p>



<a name="570421095"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570421095" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570421095">(Jan 27 2026 at 20:58)</a>:</h4>
<p>Also there is a PR to migrate basic-cli if you are interested in contributing to that <a href="https://github.com/roc-lang/basic-cli/pull/413">https://github.com/roc-lang/basic-cli/pull/413</a></p>



<a name="570421818"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570421818" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570421818">(Jan 27 2026 at 21:01)</a>:</h4>
<p>roc-platform-builder looks really useful <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="570422045"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570422045" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lozzy <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570422045">(Jan 27 2026 at 21:02)</a>:</h4>
<p>I haven't seen the <code>roc glue</code> PR. I'll check that out, thanks.</p>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/304902-show-and-tell/topic/Roc.20platform.20builder/near/570421095">said</a>:</p>
<blockquote>
<p>Also there is a PR to migrate basic-cli if you are interested in contributing to that <a href="https://github.com/roc-lang/basic-cli/pull/413">https://github.com/roc-lang/basic-cli/pull/413</a></p>
</blockquote>
<p>I was about to start on migrating the <code>Http</code> module yesterday but I got distracted <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span> . I'll start a PR in the coming days if no one beats me to it.</p>



<a name="570422071"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570422071" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570422071">(Jan 27 2026 at 21:02)</a>:</h4>
<p>I'm trying to understand what the port is, as compared to that <code>migrate-zig-compiler</code> branch</p>



<a name="570422240"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570422240" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570422240">(Jan 27 2026 at 21:03)</a>:</h4>
<p>Yeah if your happy to contribute, that'd be awesome. I'd recommend making another branch that merges into <code>migrate-zig-compiler</code> -- and then CI can do it's thing.</p>



<a name="570422653"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570422653" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lozzy <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570422653">(Jan 27 2026 at 21:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/304902-show-and-tell/topic/Roc.20platform.20builder/near/570422071">said</a>:</p>
<blockquote>
<p>I'm trying to understand what the port is, as compared to that <code>migrate-zig-compiler</code> branch</p>
</blockquote>
<p>I pretty much just replaced all of the manual unsafe ptr shenanigans with proc macro magic. So there isn't a lot of difference there.</p>



<a name="570423050"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570423050" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570423050">(Jan 27 2026 at 21:08)</a>:</h4>
<p>I think there's some R&amp;D or re-design work on that API that we probably need to think about. I've got an idea cooking this morning to post in an ideas thread on something I was exploring with roc-ray, but basically the current API worked with our older syntax but it may not be idiomatic Roc in a static dispatch world.</p>



<a name="570423395"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570423395" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lozzy <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570423395">(Jan 27 2026 at 21:09)</a>:</h4>
<p>Yeah I already got the feeling that there might be some things to iterate on. Looking forward to reading your post.</p>



<a name="570423443"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570423443" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570423443">(Jan 27 2026 at 21:09)</a>:</h4>
<p>I don't know if we can really explore it though until we have a working platform and start porting all the examples over.</p>



<a name="570486300"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570486300" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570486300">(Jan 28 2026 at 07:38)</a>:</h4>
<p>I ran out of steam and never got around to posting about the API idea I had... but you can see the latest design in this roc-ray example <a href="https://github.com/lukewilliamboswell/roc-ray/blob/new-compiler/examples/read_env.roc">https://github.com/lukewilliamboswell/roc-ray/blob/new-compiler/examples/read_env.roc</a></p>
<p>The idea is to pass in a "host" which has effectful methods on it</p>



<a name="570635480"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570635480" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lozzy <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570635480">(Jan 28 2026 at 18:44)</a>:</h4>
<p>! Very limited knowledge of old and new compiler ahead !<br>
Wouldn't that break the pattern that roc packages used in the past to get access to effectful functions? For example in <a href="https://github.com/imclerran/roc-ai/blob/main/package/Toolkit/FileSystem.roc">https://github.com/imclerran/roc-ai/blob/main/package/Toolkit/FileSystem.roc</a> the module takes some effectful functions as input and then provide something new wrapping these functions.<br>
If the effectful functions are now methods on an object you lose this paradigm as you cannot pass the <code>host</code> object at "import time"?!</p>



<a name="570746106"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570746106" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570746106">(Jan 29 2026 at 09:40)</a>:</h4>
<p>Ah the module params thing... we decided that that wasn't the right design for Roc. Instead the preference is to feed things through arguments. Like a <code>Ctx</code> object or similar</p>



<a name="570746184"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570746184" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570746184">(Jan 29 2026 at 09:41)</a>:</h4>
<p>I guess a better example is similar to how Zig is now doing the Io thing and passing that in.</p>



<a name="570748231"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570748231" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lozzy <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570748231">(Jan 29 2026 at 09:51)</a>:</h4>
<p>I see. So for a example a function exposed by a package could take some type (which represents the host and its effectful functions) as an argument and require it to implement <code>read_env</code> and <code>stdout_write</code> using a <code>where</code> clause?</p>



<a name="570748815"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570748815" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570748815">(Jan 29 2026 at 09:53)</a>:</h4>
<p>yes exactly!</p>



<a name="570748999"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570748999" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570748999">(Jan 29 2026 at 09:54)</a>:</h4>
<p>It's all still so new I don't have any examples to point you to</p>



<a name="570749113"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570749113" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570749113">(Jan 29 2026 at 09:54)</a>:</h4>
<p>But it's been on my todo list to make a package that does something as a demo with effectful functions</p>



<a name="570749224"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570749224" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570749224">(Jan 29 2026 at 09:55)</a>:</h4>
<p>Like a cross-platform package that does S3 uploads or something like that.</p>



<a name="570749286"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Roc%20platform%20builder/near/570749286" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Roc.20platform.20builder.html#570749286">(Jan 29 2026 at 09:55)</a>:</h4>
<p>I haven't thought very hard about what a good simple example might be</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>