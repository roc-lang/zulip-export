<html>
<head><meta charset="utf-8"><title>Writing AWS Lambda functions with Roc · show and tell · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/index.html">show and tell</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Writing.20AWS.20Lambda.20functions.20with.20Roc.html">Writing AWS Lambda functions with Roc</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="425738071"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Writing%20AWS%20Lambda%20functions%20with%20Roc/near/425738071" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Writing.20AWS.20Lambda.20functions.20with.20Roc.html#425738071">(Mar 10 2024 at 03:01)</a>:</h4>
<p>Hello, <br>
I wrote a platform that enables writing AWS Lambda functions with Roc: <a href="https://github.com/isaacvando/roc-aws-lambda">roc-aws-lambda</a>. It should work pretty well although I have not tested it rigorously. Right now Lambdas can only be compiled on Linux, but I hope to expand that to MacOS also. I had a lot of fun writing the platform and I hope some folks can enjoy using it too. Please open an issue if you run into any! The platform is written in Rust and uses the <a href="https://github.com/awslabs/aws-lambda-rust-runtime">aws-lambda-rust-runtime</a> under the hood. It is very cool to be able to write lambdas in a language like Roc and still get the excellent startup/runtime performance of the Rust runtime <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="425741581"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Writing%20AWS%20Lambda%20functions%20with%20Roc/near/425741581" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Writing.20AWS.20Lambda.20functions.20with.20Roc.html#425741581">(Mar 10 2024 at 04:08)</a>:</h4>
<p>I may write a GitHub actions workflow to build and deploy a lambda. That way non-Linux users could still write them and use roc check locally but not need to compile locally.</p>



<a name="425742156"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Writing%20AWS%20Lambda%20functions%20with%20Roc/near/425742156" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Writing.20AWS.20Lambda.20functions.20with.20Roc.html#425742156">(Mar 10 2024 at 04:20)</a>:</h4>
<p>That sounds like a great idea. I also wondered if you could have a dockerfile that runs it locally?</p>



<a name="425742180"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Writing%20AWS%20Lambda%20functions%20with%20Roc/near/425742180" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Writing.20AWS.20Lambda.20functions.20with.20Roc.html#425742180">(Mar 10 2024 at 04:21)</a>:</h4>
<p>Yes that’s a great idea</p>



<a name="425862353"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Writing%20AWS%20Lambda%20functions%20with%20Roc/near/425862353" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Norbert Hajagos <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Writing.20AWS.20Lambda.20functions.20with.20Roc.html#425862353">(Mar 11 2024 at 08:54)</a>:</h4>
<p>That is awesome! Nicely done.</p>



<a name="426830029"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Writing%20AWS%20Lambda%20functions%20with%20Roc/near/426830029" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Writing.20AWS.20Lambda.20functions.20with.20Roc.html#426830029">(Mar 15 2024 at 22:10)</a>:</h4>
<p>I created another repo with a Lambda runtime written in Roc that only uses basic-cli here: <a href="https://github.com/isaacvando/roc-aws-lambda-runtime">roc-aws-lambda-runtime</a>. </p>
<p>I didn't realize this was possible at first and it is better than the platform in many ways: no direct dependency on Rust is necessary, Lambdas can be compiled from non-linux systems easily, it is easy to test your lambda locally, and there is no need to use a different platform than normal. The downside is that right now it is very slow. I'm not sure why it is so slow, and I'm sure it can be sped up, but I have not yet taken the time to look into what is going on.</p>
<p>The runtime depends on some unreleased changes in basic-cli so I've included the platform directly, but it can be moved to a url once a new release of basic-cli is out.</p>



<a name="491917416"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Writing%20AWS%20Lambda%20functions%20with%20Roc/near/491917416" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Writing.20AWS.20Lambda.20functions.20with.20Roc.html#491917416">(Jan 04 2025 at 23:28)</a>:</h4>
<p>I updated the custom Lambda runtime to basic-cli 18 and the slowness I had seen in the past is now gone <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span>. I'm very pleasantly surprised that AWS supports writing Lambda functions in Roc in such a lightweight way.</p>
<p>New repo url for the runtime: <a href="https://github.com/isaacvando/roc-aws-lambda">https://github.com/isaacvando/roc-aws-lambda</a></p>



<a name="491917726"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Writing%20AWS%20Lambda%20functions%20with%20Roc/near/491917726" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Writing.20AWS.20Lambda.20functions.20with.20Roc.html#491917726">(Jan 04 2025 at 23:32)</a>:</h4>
<p>I did some very simple benchmarking comparing a hello world lambda in Roc and one in Rust using function urls:</p>
<div class="codehilite"><pre><span></span><code>$ artillery quick --count 10 -n 10 &lt;FUNCTION_URL&gt;
</code></pre></div>
<p>I haven't dug into why the tail latency is worse for the Roc function, but there is probably a way to improve it. Regardless, this is very usable.</p>
<p>Roc<br>
http.response_time:<br>
  min: 86<br>
  max:  182<br>
  mean: 111.4<br>
  median:  106.7<br>
  p95:  156<br>
  p99: 179.5</p>
<p>Rust<br>
http.response_time:<br>
  min:  83<br>
  max:  99<br>
  mean: 88.7<br>
  median:  87.4<br>
  p95: 94.6<br>
  p99: 98.5</p>



<a name="491927492"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/Writing%20AWS%20Lambda%20functions%20with%20Roc/near/491927492" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/Writing.20AWS.20Lambda.20functions.20with.20Roc.html#491927492">(Jan 05 2025 at 02:20)</a>:</h4>
<p>Wow, awesome</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>