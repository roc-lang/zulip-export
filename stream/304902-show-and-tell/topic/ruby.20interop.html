<html>
<head><meta charset="utf-8"><title>ruby interop · show and tell · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/index.html">show and tell</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/ruby.20interop.html">ruby interop</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="307875125"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/ruby%20interop/near/307875125" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/ruby.20interop.html#307875125">(Nov 04 2022 at 02:52)</a>:</h4>
<p>this is really cool: the Ruby interop example now uses JSON as a quick-and-dirty way to send arbitrary values between Roc and Ruby:</p>
<ul>
<li>the <a href="https://github.com/roc-lang/roc/blob/a06ba9ad23080290cc2bd945729d8a78e7bc47db/examples/ruby-interop/platform/main.roc#L2">platform's API says</a> "give me a <code>main</code> that takes a type that can be decoded, and returns a type that can be encoded, and I'll take care of the rest</li>
<li>the app's <code>main</code> argument and return value can be pretty much any Roc type that doesn't contain a function (since those can't be serialized as JSON) - like <a href="https://github.com/roc-lang/roc/blob/a06ba9ad23080290cc2bd945729d8a78e7bc47db/examples/ruby-interop/main.roc">in this example</a> where I arbitrarily decided on <code>U64 -&gt; Str</code></li>
<li>the Roc platform and the Ruby glue take care of the JSON intermediary part; the Roc application doesn't even mention it</li>
</ul>



<a name="307875138"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/ruby%20interop/near/307875138" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/ruby.20interop.html#307875138">(Nov 04 2022 at 02:52)</a>:</h4>
<p>shoutout to <span class="user-mention" data-user-id="454654">@Ayaz Hafiz</span> for getting the "automatic JSON encoding and decoding" working that facilitates this!</p>



<a name="307875187"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/ruby%20interop/near/307875187" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/ruby.20interop.html#307875187">(Nov 04 2022 at 02:53)</a>:</h4>
<p>we can make a fancier platform in the future which supports going directly to Ruby types without the JSON intermediary, and which can support sending functions to Ruby and so on...but this gets a ton of the way there, and it only took me a few minutes to change from sending strings to Ruby to sending automatically serialized near-arbitrary Roc types via JSON!</p>



<a name="307875452"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/ruby%20interop/near/307875452" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/ruby.20interop.html#307875452">(Nov 04 2022 at 02:57)</a>:</h4>
<p>So for the extra cost of encoding and decoding you get a super flexible API<br>
..that's really cool</p>



<a name="307875855"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/ruby%20interop/near/307875855" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/ruby.20interop.html#307875855">(Nov 04 2022 at 03:03)</a>:</h4>
<p>wow, and this works without any compiler panics??</p>



<a name="307880588"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/ruby%20interop/near/307880588" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/ruby.20interop.html#307880588">(Nov 04 2022 at 04:08)</a>:</h4>
<p>yup!</p>



<a name="307880694"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/ruby%20interop/near/307880694" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/ruby.20interop.html#307880694">(Nov 04 2022 at 04:09)</a>:</h4>
<p>we're getting really good at this programming language thing</p>



<a name="307880731"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/304902-show%20and%20tell/topic/ruby%20interop/near/307880731" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/304902-show-and-tell/topic/ruby.20interop.html#307880731">(Nov 04 2022 at 04:09)</a>:</h4>
<p>granted, a proper glue implementation would be faster, and more flexible...and probably take more like a week of work <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>