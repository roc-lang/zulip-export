<html>
<head><meta charset="utf-8"><title>How to write a platform · platform development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/index.html">platform development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html">How to write a platform</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="421044747"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/421044747" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#421044747">(Feb 12 2024 at 14:22)</a>:</h4>
<p>Hello everyone, great to be here. Trying to understand how Roc works with platforms and I'm pretty excited about the possibility of writing my own platform specifically with Zig.</p>
<p>Is there any documentation on how to do this?</p>
<p>Reading through some existing platforms, I see that there's some boilerplate around malloc and free, but I'm most confused about </p>
<ol>
<li>How the glue works</li>
<li>How to export functions from the platform for use in the application</li>
<li>What can the Roc program provide to the host platform (mainForHost?)</li>
</ol>



<a name="421050829"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/421050829" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#421050829">(Feb 12 2024 at 14:48)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="691032">@Stephen</span> :)</p>
<blockquote>
<p>Is there any documentation on how to do this?</p>
</blockquote>
<p>No, we're making big changes in how platforms work so we delayed writing docs for it.<br>
<a href="https://github.com/lukewilliamboswell/roc-ray">This</a> is a recent example of how you can set up a zig platform so I recommended looking at that for guidance.</p>
<blockquote>
<ol>
<li>How the glue works</li>
</ol>
</blockquote>
<p>Glue code allows the Roc program to talk with the platform written in Rust, Zig...<br>
Automatic generation of Glue code (WIP) is currently only available for Rust.</p>
<blockquote>
<ol start="2">
<li>How to export functions from the platform for use in the application</li>
</ol>
</blockquote>
<p><a href="https://github.com/lukewilliamboswell/roc-ray/blob/89e3ecb628e13de0c4d0bfa3e480e332f42153d8/platform/host.zig#L166">Example of the Zig part</a>.<br>
<a href="https://github.com/lukewilliamboswell/roc-ray/blob/89e3ecb628e13de0c4d0bfa3e480e332f42153d8/platform/Effect.roc#L27">Corresponding Roc part</a></p>
<blockquote>
<ol start="3">
<li>What can the Roc program provide to the host platform (mainForHost?)</li>
</ol>
</blockquote>
<p>Anything your heart desires :)</p>



<a name="421115619"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/421115619" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#421115619">(Feb 12 2024 at 19:51)</a>:</h4>
<p>I wrote this article <a href="https://lukewilliamboswell.github.io/roc-ray-experiment/">https://lukewilliamboswell.github.io/roc-ray-experiment/</a> to capture some of the lessons I've learnt about platform development. Writing platforms in Zig is super fun, let me know if you have any questions.</p>



<a name="421119331"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/421119331" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#421119331">(Feb 12 2024 at 20:12)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="361169">@Anton</span> and <span class="user-mention" data-user-id="515757">@Luke Boswell</span> <br>
I'll take a look at these <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span></p>



<a name="442299281"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/442299281" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#442299281">(Jun 03 2024 at 16:08)</a>:</h4>
<p>If I want to implement a Rust platform, how do I get started?</p>



<a name="442335772"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/442335772" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#442335772">(Jun 03 2024 at 18:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="669503">Albert</span> <a href="#narrow/stream/302903-Writing-a-platform/topic/How.20to.20write.20a.20platform/near/442299281">said</a>:</p>
<blockquote>
<p>If I want to implement a Rust platform, how do I get started?</p>
</blockquote>
<p>All messages from this thread so far do apply to Rust as well.<br>
Additionally, you might be interested in the second talk by <span class="user-mention" data-user-id="515757">@Luke Boswell</span> from last month's <a href="#narrow/stream/303057-gatherings/topic/Roc.20Online.20Meetup.20May.202024/near/440594885">meetup</a>.</p>



<a name="442376871"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/442376871" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#442376871">(Jun 03 2024 at 21:28)</a>:</h4>
<p>I also have a template repository for rust which has most of the parts ready to go </p>
<p><a href="https://github.com/lukewilliamboswell/roc-platform-template-rust">https://github.com/lukewilliamboswell/roc-platform-template-rust</a></p>



<a name="444529660"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444529660" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444529660">(Jun 13 2024 at 18:15)</a>:</h4>
<p>Just watched the vid. So now I understand that Roc cli/compiler has 2 jobs.</p>



<a name="444529936"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444529936" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444529936">(Jun 13 2024 at 18:16)</a>:</h4>
<ol>
<li>compile the roc app code to a shared object</li>
<li>link the precompiled host binary to the shared object</li>
</ol>



<a name="444530211"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444530211" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444530211">(Jun 13 2024 at 18:16)</a>:</h4>
<p>which is exactly the opposite of Deno/Browser that takes JavaScript as data and run it in memory.</p>



<a name="444530327"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444530327" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444530327">(Jun 13 2024 at 18:17)</a>:</h4>
<p>when the host code interacts with roc app code, the source is long gone</p>



<a name="444530357"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444530357" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444530357">(Jun 13 2024 at 18:17)</a>:</h4>
<p>It's more like a FFI</p>



<a name="444636914"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444636914" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444636914">(Jun 14 2024 at 07:25)</a>:</h4>
<p>so I am writing a new kind of communication software (chat + social media) that is decentralized (meaning local-first, client-first, not blockchain)</p>



<a name="444637096"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444637096" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444637096">(Jun 14 2024 at 07:26)</a>:</h4>
<p>the protocol is <a href="https://nostr.com/">https://nostr.com/</a></p>



<a name="444637145"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444637145" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444637145">(Jun 14 2024 at 07:26)</a>:</h4>
<p>my software is <a href="https://blowater.app/">https://blowater.app/</a></p>



<a name="444637260"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444637260" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444637260">(Jun 14 2024 at 07:27)</a>:</h4>
<p>However, after 1.5 years of work, I have realized that the Browser platform is fundementally not friendly to local-first software</p>



<a name="444637344"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444637344" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444637344">(Jun 14 2024 at 07:27)</a>:</h4>
<ol>
<li>The network API is so old and bad. WebSocket implementation in Web API is just very bad for robust networking.</li>
<li>The storage API (IndexedDB) is also bad and slow as hell</li>
<li>Browser is not that safe once you have lots of extensions. But a decentralized app needs to handle private keys. Therefore, I want to build cryptogrphic APIs and key storage into the platform itself.</li>
</ol>



<a name="444637521"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444637521" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444637521">(Jun 14 2024 at 07:28)</a>:</h4>
<p>The JavaScript language is also just not a good language to implement super robust software (the client needs to handle 2GB+ data locally)</p>



<a name="444637788"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444637788" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444637788">(Jun 14 2024 at 07:29)</a>:</h4>
<p>Roc looks like a super good fit for my project because</p>
<ol>
<li>It has the separation of platform and app at the top level of design</li>
<li>The language itself is safer and more robust to handle data (pattern matching)</li>
</ol>



<a name="444637958"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444637958" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444637958">(Jun 14 2024 at 07:30)</a>:</h4>
<p>So, I want to implement a platform that's basically like a Browser, but using Roc for scripting, providing modern network &amp; storage APIs</p>



<a name="444637988"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444637988" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444637988">(Jun 14 2024 at 07:30)</a>:</h4>
<p>along with a GUI layer</p>



<a name="444638350"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444638350" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444638350">(Jun 14 2024 at 07:31)</a>:</h4>
<p>It's not a hobbyst project, I am very serious with real budget behind it</p>



<a name="444638595"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444638595" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444638595">(Jun 14 2024 at 07:32)</a>:</h4>
<p>But, I don't understand Rust nor Zig enough to get started, even if <span class="user-mention" data-user-id="515757">@Luke Boswell</span> 's template. I need more help.</p>
<p>For example<br>
<a href="/user_uploads/22008/6OWgsSHuWbDHLvfVJqLKNhuK/image.png">image.png</a><br>
Now I know that <code>let out = call_the_closure(buffer);</code> will run the Roc code.</p>
<div class="message_inline_image"><a href="/user_uploads/22008/6OWgsSHuWbDHLvfVJqLKNhuK/image.png" title="image.png"><img src="/user_uploads/22008/6OWgsSHuWbDHLvfVJqLKNhuK/image.png"></a></div><p>But I don't understand </p>
<ol>
<li>how to add a new platform API in the Rust code.</li>
<li>Why does the platform have Roc code as well in the platform dir? I thought platform should not have Roc at all.</li>
</ol>



<a name="444639946"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444639946" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444639946">(Jun 14 2024 at 07:40)</a>:</h4>
<p>I have been following Roc for 2 years and have watched <span class="user-mention" data-user-id="281383">@Richard Feldman</span> 's talks since the Elm days btw. Now Roc feels like mature enough, at least for me, to work on.</p>



<a name="444640671"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444640671" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444640671">(Jun 14 2024 at 07:45)</a>:</h4>
<p>As for the GUI layer, I am thinking about something like Egui or the GPUI from Zed editor. GPUI uses Egui as well. Just need to figure out what's the best API for Roc to consume.</p>



<a name="444640896"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444640896" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444640896">(Jun 14 2024 at 07:46)</a>:</h4>
<p>Egui can run on Android now, so if we can implement a Rust Egui platform for Roc, maybe Roc can run on Android as well. iOS is always another beast.</p>



<a name="444640984"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444640984" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444640984">(Jun 14 2024 at 07:47)</a>:</h4>
<p>But, if we can achieve it, it's 100X better than Flutter which is a good platform with a horrible language. Dart is the worst part of Flutter in my opinion.</p>



<a name="444641106"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444641106" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444641106">(Jun 14 2024 at 07:48)</a>:</h4>
<p>If this is possible and exciting to you, please let me know. I need help to get started.</p>



<a name="444647390"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444647390" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444647390">(Jun 14 2024 at 08:26)</a>:</h4>
<p>I've been very motivated by the idea of a GUI platform for roc. I've done a few experiments over the last couple of years to learn more about platform development and generally explore the space. I think it'd be super cool if we had a decent GUI platform. Roc is 100% a great fit for this in my opinion.</p>
<p>You may find Richard's <a href="https://docs.google.com/document/d/16qY4NGVOHu8mvInVD-ddTajZYSsFvFBvQON_hmyHGfo/edit?usp=sharing">Action-State design proposal</a> an interesting read. It's a design for how GUIs might work in Roc (necessarily different from Elm). </p>
<p>I've built a PoC using raylib <a href="https://github.com/lukewilliamboswell/roc-ray">lukewilliamboswell/roc-ray</a>. That platform works well and there is nothing really stopping it today from being a great graphics platform. It just needs some polish, more API coverage, an upgrade to a later zig version and a release. For the GUI parts, unfortunately we would need a pure roc layout implementation, something like flutter's layout algorithm would be good I think. Thought raylib is definitely not aimed at making modern/pretty looking GUI's.</p>
<p>The project I have been watching closely and think will be most suitable is <a href="https://github.com/linebender/xilem">linebender/xilem</a> which brings together a lot of the GUI efforts from across the Rust ecosystem. They recently launched at RustNL, and there has been a lot of active development since then. I haven't had a chance to experiment with it (works been busy lately). I started early with this <a href="https://github.com/lukewilliamboswell/roc-masonry-experiment">https://github.com/lukewilliamboswell/roc-masonry-experiment</a> and my plan was to upgrade that to xilem and generally clean it up -- similar to how I've cleaned up the rust template (which has the latest and greatest).</p>
<p>One potential issue is that glue gen is still a WIP and needs to mature more. Writing types for interfacing between Roc and Rust by hand is the most reliable method, but also can be tedious. I started on <a href="https://github.com/lukewilliamboswell/roc-glue-code-gen">https://github.com/lukewilliamboswell/roc-glue-code-gen</a> with the goal to work on glue, but that turned into making template repositories. Actually fixing the glue generation requires a level of rust knowledge that I don't have right now. </p>
<p>Bit of a random collection of thoughts, but hope that helps.</p>



<a name="444656509"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444656509" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444656509">(Jun 14 2024 at 09:18)</a>:</h4>
<p>Is glue compiled to the host or to the app binary?</p>



<a name="444656740"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444656740" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444656740">(Jun 14 2024 at 09:19)</a>:</h4>
<blockquote>
<p>or the GUI parts, unfortunately we would need a pure roc layout implementation, something like flutter's layout algorithm would be good I think.</p>
</blockquote>
<p>Why? Is it because this approach is more cross platform? So that the host just take the pixel computed by the Roc GUI lib and draw it?</p>



<a name="444656965"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444656965" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444656965">(Jun 14 2024 at 09:21)</a>:</h4>
<p><a href="https://opensats.org/blog/opensats-receives-additional-funding-of-dollar21m-from-startsmall">https://opensats.org/blog/opensats-receives-additional-funding-of-dollar21m-from-startsmall</a></p>



<a name="444657095"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444657095" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444657095">(Jun 14 2024 at 09:21)</a>:</h4>
<p>Jack Dorsey is bootstrapping the Nostr ecosystem with additional 5M donations, on top of 5M last year.</p>



<a name="444657209"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444657209" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444657209">(Jun 14 2024 at 09:22)</a>:</h4>
<p>There is real needs to implement a simpler, safer hosting environment for micro apps</p>



<a name="444657334"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444657334" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444657334">(Jun 14 2024 at 09:23)</a>:</h4>
<p>Is there a plan for helping people manage public/private keys? That sounds like a challenge for new users. Or is the idea generally that identity will be more temporary.</p>



<a name="444657500"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444657500" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444657500">(Jun 14 2024 at 09:24)</a>:</h4>
<p>Currently, with Browser apps, the private key is either stored by an extension or by the app itself which are not safe in both ways</p>



<a name="444657525"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444657525" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444657525">(Jun 14 2024 at 09:24)</a>:</h4>
<p>In mobile and desktop, keys are stored by the apps</p>



<a name="444657577"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444657577" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444657577">(Jun 14 2024 at 09:24)</a>:</h4>
<p>So, if you use the same key on many apps, you increase the danger of a key exposure</p>



<a name="444657687"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444657687" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444657687">(Jun 14 2024 at 09:25)</a>:</h4>
<p>It's not like a blockchain that if you expose your key, you just transfer your fund as quick as possible to a new key</p>



<a name="444657745"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444657745" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444657745">(Jun 14 2024 at 09:25)</a>:</h4>
<p>It's social media, if you expose your key, your identity is compromised forever</p>



<a name="444657849"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444657849" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444657849">(Jun 14 2024 at 09:26)</a>:</h4>
<p>The user can generate a new key and start fresh but all the historical data is now accessible by the theft</p>



<a name="444657918"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444657918" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444657918">(Jun 14 2024 at 09:26)</a>:</h4>
<p>With a Roc platform, I can minimize the attack surface</p>



<a name="444657922"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444657922" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444657922">(Jun 14 2024 at 09:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="669503">Albert</span> <a href="#narrow/stream/302903-Writing-a-platform/topic/How.20to.20write.20a.20platform/near/444656509">said</a>:</p>
<blockquote>
<p>Is glue compiled to the host or to the app binary?</p>
</blockquote>
<p>Glue is a feature of the roc cli that provides all of the Roc types for a given platform. So we can write plugins that code gen the equivalent host code to interface with the platform. I.e. have a glue plugin that will code generate rust code implmentation for that specific platform. </p>
<p>But it's a WIP and generally not very mature right now.</p>



<a name="444658047"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444658047" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444658047">(Jun 14 2024 at 09:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/302903-Writing-a-platform/topic/How.20to.20write.20a.20platform/near/444657922">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="669503">Albert</span> <a href="#narrow/stream/302903-Writing-a-platform/topic/How.20to.20write.20a.20platform/near/444656509">said</a>:</p>
<blockquote>
<p>Is glue compiled to the host or to the app binary?</p>
</blockquote>
<p>Glue is a feature of the roc cli that provides all of the Roc types for a given platform. So we can write plugins that code gen the equivalent host code to interface with the platform. I.e. have a glue plugin that will code generate rust code implmentation for that specific platform. </p>
<p>But it's a WIP and generally not very mature right now.</p>
</blockquote>
<p>I still don't get it but I will learn more LOL</p>



<a name="444658163"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444658163" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444658163">(Jun 14 2024 at 09:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="669503">Albert</span> <a href="#narrow/stream/302903-Writing-a-platform/topic/How.20to.20write.20a.20platform/near/444657918">said</a>:</p>
<blockquote>
<p>With a Roc platform, I can minimize the attack surface</p>
</blockquote>
<p>Having key management built-in to the platform is separated from a GUI platform</p>



<a name="444658279"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444658279" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444658279">(Jun 14 2024 at 09:29)</a>:</h4>
<p>Having a GUI platform is the 1st step, then I can import the GUI platform as a library and build key management on top of it</p>



<a name="444658308"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444658308" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444658308">(Jun 14 2024 at 09:29)</a>:</h4>
<p>It's like Ark forks Chromium</p>



<a name="444658408"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444658408" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444658408">(Jun 14 2024 at 09:29)</a>:</h4>
<p>However, I am not sure if I should choose Rust or Zig</p>



<a name="444658533"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444658533" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444658533">(Jun 14 2024 at 09:30)</a>:</h4>
<p>Rust should be safer to write considering that this platform will load arbitrary Roc code</p>



<a name="444658579"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444658579" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444658579">(Jun 14 2024 at 09:30)</a>:</h4>
<p>The use case is to dynamically load remote Roc code instead of compiling into the same binary</p>



<a name="444658631"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444658631" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444658631">(Jun 14 2024 at 09:31)</a>:</h4>
<p>Similar to <span class="user-mention" data-user-id="281383">@Richard Feldman</span> 's idea of writing editor extensions in Roc</p>



<a name="444658756"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444658756" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444658756">(Jun 14 2024 at 09:31)</a>:</h4>
<p>If we do a good job, we can support both compilation mode (like electron) and dynamic mode (like browser)</p>



<a name="444658902"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444658902" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444658902">(Jun 14 2024 at 09:32)</a>:</h4>
<p>Then we can get rid of both React Native and Flutter</p>



<a name="444659200"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444659200" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444659200">(Jun 14 2024 at 09:34)</a>:</h4>
<p>Another approach is to write native apps using SwiftUI, or Kotlin and then use roc as a plugin. Using the same API would mean the roc parts can be identical, and defer mobile platform specific things to the platform.</p>



<a name="444659355"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444659355" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444659355">(Jun 14 2024 at 09:35)</a>:</h4>
<p>Developing the platform in a mature ecosystem like Swift will be a nice experience. I've got a template platform for Swift and it works nicely.</p>



<a name="444659595"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444659595" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444659595">(Jun 14 2024 at 09:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/302903-Writing-a-platform/topic/How.20to.20write.20a.20platform/near/444659200">said</a>:</p>
<blockquote>
<p>Another approach is to write native apps using SwiftUI, or Kotlin and then use roc as a plugin. Using the same API would mean the roc parts can be identical, and defer mobile platform specific things to the platform.</p>
</blockquote>
<p>If I can keep 90%+ of my code in Roc and just interfacing Kotlin or Swift platforms, that's also good</p>



<a name="444661823"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444661823" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444661823">(Jun 14 2024 at 09:48)</a>:</h4>
<p>I am not familiar with mobile so desktop platforms will be my 1st target. I need</p>
<ol>
<li>http request (which the cli platform already has)</li>
<li>websocket</li>
<li>GUI (very challenging)</li>
<li>cryptography</li>
<li>storage (like a built-in database, the SQLite demo was nice. But I might need to implement my own database on top of a KV )</li>
</ol>
<p>so, maybe I can start to add websocket to the CLI platform to learn</p>



<a name="444662455"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444662455" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444662455">(Jun 14 2024 at 09:52)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> said there was no cross-platform Roc app. Can I interpret it as that if I want cross platform Roc. I can wirte the shared part as a Roc library and 2 separate Roc app that interface the platform IO and just import the Roc library?</p>



<a name="444662534"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444662534" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444662534">(Jun 14 2024 at 09:52)</a>:</h4>
<p>This design force the coder to push IO/Side Effects to the most outside of the system</p>



<a name="444662636"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444662636" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444662636">(Jun 14 2024 at 09:53)</a>:</h4>
<p>What about async code? Can I have async code in a Roc library because it's an effect?</p>



<a name="444664892"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444664892" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444664892">(Jun 14 2024 at 10:05)</a>:</h4>
<p>If your interested in how cross-platform could work, and looking for a larger and more mature example, checkout <a href="https://github.com/imclerran/roc-start">imclerran/roc-start</a>. That's a nicely written roc app that runs on all of the targets supported by basic-cli, so currently linux/macos OS and x64/arm64 ARCH. The basic-cli platform provides pre-built binaries for various OS/ARCHs so the same roc app can run on all of those without needing to change anything. Indeed, it's easy to cross-compile from a macos to build a binary for linux using just the roc cli.</p>



<a name="444665040"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444665040" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444665040">(Jun 14 2024 at 10:06)</a>:</h4>
<p>E.g <code>roc build --target=linux-x86 src/main.roc</code></p>



<a name="444715972"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444715972" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444715972">(Jun 14 2024 at 14:47)</a>:</h4>
<blockquote>
<p>What about async code? Can I have async code in a Roc library because it's an effect?</p>
</blockquote>
<p>Others are welcome to correct me, but I believe that will be possible once Task is a builtin. <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> What are the blockers on that? I could not find a tracking issue.</p>



<a name="444727604"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444727604" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444727604">(Jun 14 2024 at 15:40)</a>:</h4>
<p>Not just task as a built-in, needs the full effect interpreters setup.</p>
<p>Theoretically it could be manually done today (I did it with some future testing, but it is not a nice experience)</p>



<a name="444730581"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444730581" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444730581">(Jun 14 2024 at 15:52)</a>:</h4>
<p>A few random other answers:</p>
<ol>
<li>A platform has roc code in it cause it needs to define the API between roc and the underly language. It also is allowed to define arbitrary roc libraries.</li>
<li>Pure roc layout logic is not required for any of this. Might be nice to have, but layout logic can be manually done or dealt with in the platform. Doing it purely in roc could help with consistency across devices. This is especially true if building multiple device specific platforms.</li>
<li>While this project could probably be forced in current day roc, I honestly believe we are early for this project. That said, if you are willing to force it, or will to also help contribute to fixes in the compiler you need, definitely in the realm of doable.</li>
<li>Glue generates code in the host language that helps deal with ffi from the host to the app.</li>
</ol>



<a name="444748908"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444748908" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444748908">(Jun 14 2024 at 17:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/302903-Writing-a-platform/topic/How.20to.20write.20a.20platform/near/444730581">said</a>:</p>
<blockquote>
<p>A few random other answers:</p>
<ol>
<li>A platform has roc code in it cause it needs to define the API between roc and the underly language. It also is allowed to define arbitrary roc libraries.</li>
<li>Pure roc layout logic is not required for any of this. Might be nice to have, but layout logic can be manually done or dealt with in the platform. Doing it purely in roc could help with consistency across devices. This is especially true if building multiple device specific platforms.</li>
<li>While this project could probably be forced in current day roc, I honestly believe we are early for this project. That said, if you are willing to force it, or will to also help contribute to fixes in the compiler you need, definitely in the realm of doable.</li>
<li>Glue generates code in the host language that helps deal with ffi from the host to the app.</li>
</ol>
</blockquote>
<p>I guess I should just start with adding some dumb APIs to the Rust template and get a feel with Roc</p>



<a name="444750301"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444750301" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444750301">(Jun 14 2024 at 17:15)</a>:</h4>
<p>Yeah..or as you said, add websockets to basic cli</p>



<a name="444946047"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444946047" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444946047">(Jun 16 2024 at 06:11)</a>:</h4>
<p>What is a <code>effect interpreter</code> ?</p>



<a name="444946420"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444946420" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444946420">(Jun 16 2024 at 06:17)</a>:</h4>
<p><a href="https://github.com/lukewilliamboswell/roc-platform-template-rust/blob/9e445264138f75477121ff6f1caf2cc1c250fdaa/platform/Stdout.roc#L2">https://github.com/lukewilliamboswell/roc-platform-template-rust/blob/9e445264138f75477121ff6f1caf2cc1c250fdaa/platform/Stdout.roc#L2</a></p>



<a name="444946470"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444946470" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444946470">(Jun 16 2024 at 06:18)</a>:</h4>
<p>This syntax <code>module [line, Err]</code> is not described in <a href="https://www.roc-lang.org/tutorial#modules">https://www.roc-lang.org/tutorial#modules</a></p>



<a name="444946519"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444946519" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444946519">(Jun 16 2024 at 06:19)</a>:</h4>
<p>That's the difference between <code>module [name]</code>, <code>exposes [name]</code> and <code>exposing [name]</code>?</p>



<a name="444947362"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444947362" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444947362">(Jun 16 2024 at 06:31)</a>:</h4>
<p>That syntax is just a regular module <a href="https://www.roc-lang.org/tutorial#regular-modules">https://www.roc-lang.org/tutorial#regular-modules</a></p>



<a name="444947364"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444947364" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444947364">(Jun 16 2024 at 06:31)</a>:</h4>
<p>Unfortunately that part of the tutorial needs some love <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="444947424"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444947424" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444947424">(Jun 16 2024 at 06:32)</a>:</h4>
<p>An effect interpreter is a large upgrade to roc that has been in development for some time. It will change the way the host in the platform is written and enable fully async execution of effects.</p>



<a name="444947811"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444947811" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444947811">(Jun 16 2024 at 06:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/302903-Writing-a-platform/topic/How.20to.20write.20a.20platform/near/444947364">said</a>:</p>
<blockquote>
<p>Unfortunately that part of the tutorial needs some love <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>
</blockquote>
<p>LOL</p>



<a name="444947834"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444947834" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444947834">(Jun 16 2024 at 06:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/302903-Writing-a-platform/topic/How.20to.20write.20a.20platform/near/444947424">said</a>:</p>
<blockquote>
<p>An effect interpreter is a large upgrade to roc that has been in development for some time. It will change the way the host in the platform is written and enable fully async execution of effects.</p>
</blockquote>
<p>Is this related to that host API implementations are not async at the moment?</p>



<a name="444947843"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444947843" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444947843">(Jun 16 2024 at 06:39)</a>:</h4>
<p><a href="https://github.com/roc-lang/basic-cli/blob/307f1f91d984ac966cca75a40d403bdced1f05a6/platform/src/lib.rs#L632">https://github.com/roc-lang/basic-cli/blob/307f1f91d984ac966cca75a40d403bdced1f05a6/platform/src/lib.rs#L632</a></p>
<p>For example, I am looking at the http request implementation of basic cli</p>



<a name="444947900"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444947900" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444947900">(Jun 16 2024 at 06:40)</a>:</h4>
<p>Is host API execution blocking at the moment?</p>



<a name="444947919"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444947919" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444947919">(Jun 16 2024 at 06:40)</a>:</h4>
<p>Is there an article or design draft of  effect interpreter that I can read?</p>



<a name="444948095"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444948095" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444948095">(Jun 16 2024 at 06:43)</a>:</h4>
<p><a href="/user_uploads/22008/0MTNiGiZdz08Q48LR50u3KsF/image.png">image.png</a><br>
Is this code also the code used in the Roc compiler or written only for platform development purpose?</p>
<div class="message_inline_image"><a href="/user_uploads/22008/0MTNiGiZdz08Q48LR50u3KsF/image.png" title="image.png"><img src="/user_uploads/22008/0MTNiGiZdz08Q48LR50u3KsF/image.png"></a></div>



<a name="444991658"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444991658" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444991658">(Jun 16 2024 at 16:23)</a>:</h4>
<p>Mostly for platform development, but the roc compiler uses it in some places</p>



<a name="444991707"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/444991707" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#444991707">(Jun 16 2024 at 16:23)</a>:</h4>
<p>And yeah, lack of effect interpreters is why every effect is synchronous currently</p>



<a name="445055891"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445055891" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445055891">(Jun 17 2024 at 05:19)</a>:</h4>
<p>Is parallelism also the decision of the platform?</p>



<a name="445057332"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445057332" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445057332">(Jun 17 2024 at 05:39)</a>:</h4>
<p>Yes</p>



<a name="445057444"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445057444" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445057444">(Jun 17 2024 at 05:41)</a>:</h4>
<p>For example, basic webserver is automatically multi threaded, but gives the requests no control over concurrency.</p>



<a name="445057468"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445057468" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445057468">(Jun 17 2024 at 05:41)</a>:</h4>
<p>Long term, it will likely support better async effects, but it might never support spawning arbitrary threads</p>



<a name="445057539"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445057539" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445057539">(Jun 17 2024 at 05:42)</a>:</h4>
<p>Basic CLI on the other hand is single threaded by default but plans to support spawning tasks that can run in parallel (multi threaded communication architecture unclear at the moment)</p>



<a name="445092389"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445092389" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445092389">(Jun 17 2024 at 09:39)</a>:</h4>
<blockquote>
<p>Is there an article or design draft of  effect interpreter that I can read?</p>
</blockquote>
<p>Do we have a google doc for this <span class="user-mention" data-user-id="281383">@Richard Feldman</span>?</p>



<a name="445124642"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445124642" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445124642">(Jun 17 2024 at 12:47)</a>:</h4>
<p>hm I don’t think so!</p>



<a name="445160553"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445160553" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445160553">(Jun 17 2024 at 15:25)</a>:</h4>
<p>You would really think after all of this discussion in various threads that we would have something written up.</p>



<a name="445160601"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445160601" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445160601">(Jun 17 2024 at 15:25)</a>:</h4>
<p>I guess the only write up is the small summary here: <a href="https://www.roc-lang.org/plans">https://www.roc-lang.org/plans</a></p>



<a name="445253640"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445253640" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445253640">(Jun 18 2024 at 01:26)</a>:</h4>
<p>The name "interpreter" does not convey what it does under the hood</p>



<a name="445258972"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445258972" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445258972">(Jun 18 2024 at 02:30)</a>:</h4>
<p>It is essentially a standard async state machine. The reason for the word "interpreter" is that the platform is essentially implementing an interpreter to run the state machine that executes roc code and effects.</p>



<a name="445771910"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445771910" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445771910">(Jun 20 2024 at 07:02)</a>:</h4>
<p>What is the Rust representation of a Roc record in the basic-cli?</p>



<a name="445783063"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445783063" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445783063">(Jun 20 2024 at 08:04)</a>:</h4>
<p>If you have the following Roc record</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="kt">MyRecord</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">age</span><span class="nf">:</span><span class="w"> </span><span class="kt">I64</span><span class="p">,</span>
<span class="w">    </span><span class="nv">name</span><span class="nf">:</span><span class="w"> </span><span class="kt">Str</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>In rust this would be</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#[repr(C)]</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">MyRecord</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">age</span><span class="p">:</span><span class="w"> </span><span class="kt">i64</span><span class="p">,</span>
<span class="w">    </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nc">roc_std</span><span class="p">::</span><span class="n">RocStr</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>



<a name="445783226"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445783226" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445783226">(Jun 20 2024 at 08:05)</a>:</h4>
<p>fields are sorted alphabetically</p>



<a name="445788007"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445788007" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445788007">(Jun 20 2024 at 08:29)</a>:</h4>
<p>So I simply return a <code>RocResult&lt;MyRecord, RocError&gt;</code> in the rust platform lib?</p>



<a name="445788189"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445788189" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445788189">(Jun 20 2024 at 08:30)</a>:</h4>
<p>I'm not sure what you are doing, but that looks ok to me.</p>



<a name="445797520"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445797520" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oskar Hahn <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445797520">(Jun 20 2024 at 09:14)</a>:</h4>
<p>I think, that the fields are not only sorted alphabetically, but also be size in memory. If I am correct, then "name" will be before "age".</p>



<a name="445881013"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445881013" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445881013">(Jun 20 2024 at 15:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/302903-Writing-a-platform/topic/How.20to.20write.20a.20platform/near/445788189">said</a>:</p>
<blockquote>
<p>I'm not sure what you are doing, but that looks ok to me.</p>
</blockquote>
<p>I am trying to expand the file API of the basic cli to return metadata of the file as well</p>



<a name="445881175"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445881175" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Albert <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445881175">(Jun 20 2024 at 15:31)</a>:</h4>
<p>It can be a useful small tool to check duplicated files</p>



<a name="445954696"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/445954696" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#445954696">(Jun 20 2024 at 21:12)</a>:</h4>
<p>They are sorted by alignment and name.</p>
<p><code>age</code> -&gt; <code>i64</code>, aligned to 8 bytes<br>
<code>name</code> -&gt; <code>Str</code>, aligned to 8 bytes as well (cause it is a pointer and 2 <code>i64</code>s)</p>
<p>So should be <code>age</code> then <code>name</code>.</p>



<a name="446057689"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/How%20to%20write%20a%20platform/near/446057689" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/How.20to.20write.20a.20platform.html#446057689">(Jun 21 2024 at 10:53)</a>:</h4>
<p>Do we have a file people can check to find the alignment for a type?</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>