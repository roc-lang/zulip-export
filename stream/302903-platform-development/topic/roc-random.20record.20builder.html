<html>
<head><meta charset="utf-8"><title>roc-random record builder · platform development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/index.html">platform development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html">roc-random record builder</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="476653949"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476653949" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476653949">(Oct 14 2024 at 01:51)</a>:</h4>
<p>Needed to generate a random list of buildings for a background... Sam helped upgrade roc-random to use records builders... and now I can do this which is cool.</p>
<div class="codehilite"><pre><span></span><code>randomBuilding : Random.Generator U32 { x : F32, y : F32, width : F32, height : F32, color : Color }
randomBuilding =

    updateY = \values -&gt; {values &amp; y : screenHeight - 130f32 - values.height}

    { Random.chain &lt;-
        x: Random.static 0f32,
        y: Random.static 0f32,
        width: Random.u32 50 200 |&gt; Random.map Num.toF32,
        height: Random.u32 100 800 |&gt; Random.map Num.toF32,
        color: {
            Random.chain &lt;-
                red: Random.u32 200 240 |&gt; Random.map Num.intCast,
                green: Random.u32 200 240 |&gt; Random.map Num.intCast,
                blue: Random.u32 200 250 |&gt; Random.map Num.intCast,
        } |&gt; Random.map \{ red, green, blue } -&gt; RGBA red green blue 255,
    }
    |&gt; Random.map updateY
</code></pre></div>
<p><a href="/user_uploads/22008/BXmPsLW87Q3Osoo6dqOu8OKh/Screenshot-2024-10-14-at-12.51.46.png">Screenshot 2024-10-14 at 12.51.46.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/BXmPsLW87Q3Osoo6dqOu8OKh/Screenshot-2024-10-14-at-12.51.46.png" title="Screenshot 2024-10-14 at 12.51.46.png"><img data-original-dimensions="1642x1226" src="/user_uploads/thumbnail/22008/BXmPsLW87Q3Osoo6dqOu8OKh/Screenshot-2024-10-14-at-12.51.46.png/840x560.webp"></a></div>



<a name="476654026"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654026" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654026">(Oct 14 2024 at 01:52)</a>:</h4>
<p>that's cool! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="476654034"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654034" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654034">(Oct 14 2024 at 01:52)</a>:</h4>
<p>why all the <code>|&gt; Random.map Num.intCast</code>? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="476654048"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654048" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654048">(Oct 14 2024 at 01:52)</a>:</h4>
<p>feels like that shouldn't be necessary</p>



<a name="476654101"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654101" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654101">(Oct 14 2024 at 01:53)</a>:</h4>
<p>That's something that would be good to investigate. I think it comes down to Roc having 13? different number types, and interfaces needing to handle every one separately</p>



<a name="476654148"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654148" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654148">(Oct 14 2024 at 01:54)</a>:</h4>
<p>So I think it's happening because the original author didn't feel like copying the same functions 13 times</p>



<a name="476654155"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654155" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654155">(Oct 14 2024 at 01:54)</a>:</h4>
<p>oh ok</p>



<a name="476654158"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654158" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654158">(Oct 14 2024 at 01:54)</a>:</h4>
<p>yeah I think copying them is the way to go <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="476654168"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654168" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654168">(Oct 14 2024 at 01:54)</a>:</h4>
<p>Weaver is like 60% this type of code, and 40% everything else haha</p>



<a name="476654178"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654178" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654178">(Oct 14 2024 at 01:54)</a>:</h4>
<p>Not that it matters <em>that</em> much</p>



<a name="476654194"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654194" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654194">(Oct 14 2024 at 01:55)</a>:</h4>
<p>I thought it was because I'm mixing U32 and U8 for the seed/state here... but I don't fully grok it</p>



<a name="476654195"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654195" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654195">(Oct 14 2024 at 01:55)</a>:</h4>
<p>But I can foresee ecosystem devs getting lazy in the same way</p>



<a name="476654217"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654217" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654217">(Oct 14 2024 at 01:55)</a>:</h4>
<p>I'll see if I can remove them</p>



<a name="476654218"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654218" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654218">(Oct 14 2024 at 01:55)</a>:</h4>
<p>there should be a <code>Random.u8</code>, <code>Random.i8</code>, <code>Random.u16</code>, <code>Random.i16</code>, ...etc</p>



<a name="476654235"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654235" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654235">(Oct 14 2024 at 01:55)</a>:</h4>
<p>so you don't have to <code>map</code> that</p>



<a name="476654297"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654297" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654297">(Oct 14 2024 at 01:56)</a>:</h4>
<p>There is, but that changes the state type, and I don't think we can then mix them</p>



<a name="476654306"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654306" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654306">(Oct 14 2024 at 01:56)</a>:</h4>
<p><a href="https://lukewilliamboswell.github.io/roc-random/Random/#u8">https://lukewilliamboswell.github.io/roc-random/Random/#u8</a></p>



<a name="476654307"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654307" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654307">(Oct 14 2024 at 01:56)</a>:</h4>
<p>Oh, good point...</p>



<a name="476654319"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654319" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654319">(Oct 14 2024 at 01:56)</a>:</h4>
<p>Yeah, the seed is kept as the same as the generated int</p>



<a name="476654341"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654341" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654341">(Oct 14 2024 at 01:57)</a>:</h4>
<p>Tbh, I'm not sure why there is different state types in here</p>



<a name="476654343"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654343" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654343">(Oct 14 2024 at 01:57)</a>:</h4>
<p>And this composition API only works if the seeds are the same</p>



<a name="476654358"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654358" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654358">(Oct 14 2024 at 01:57)</a>:</h4>
<p>I think it's because there is 32/16/8 bits of "noise"</p>



<a name="476654360"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654360" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654360">(Oct 14 2024 at 01:57)</a>:</h4>
<p>I presume we can just make all of the seeds <code>Num *</code></p>



<a name="476654382"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654382" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654382">(Oct 14 2024 at 01:57)</a>:</h4>
<p>And let Roc's "default num type" mechanism figure it out for the user</p>



<a name="476654437"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654437" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654437">(Oct 14 2024 at 01:58)</a>:</h4>
<p>That would be a nice upgrade</p>



<a name="476654456"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654456" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654456">(Oct 14 2024 at 01:58)</a>:</h4>
<p>PR <a href="https://github.com/roc-lang/roc/issues/2">#2</a>, here we come</p>



<a name="476654483"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654483" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654483">(Oct 14 2024 at 01:59)</a>:</h4>
<div class="codehilite"><pre><span></span><code>── TYPE MISMATCH in examples/2d_camera.roc ─────────────────────────────────────

Something is off with the body of the randomBuilding definition:

59│   randomBuilding : Random.Generator (Num *) { x : F32, y : F32, width : F32, height : F32, color : Color }
60│   randomBuilding =
61│
62│       updateY = \values -&gt; {values &amp; y : screenHeight - 130f32 - values.height}
63│
64│&gt;      { Random.chain &lt;-
65│&gt;          x: Random.static 0f32,
66│&gt;          y: Random.static 0f32,
67│&gt;          width: Random.int 50 200 |&gt; Random.map Num.toF32,
68│&gt;          height: Random.int 100 800 |&gt; Random.map Num.toF32,
69│&gt;          color: {
70│&gt;              Random.chain &lt;-
71│&gt;                  red: Random.u8 200 240,
72│&gt;                  green: Random.u8 200 240,
73│&gt;                  blue: Random.u8 200 250,
74│&gt;          } |&gt; Random.map \{ red, green, blue } -&gt; RGBA red green blue 255,
75│&gt;      }
76│&gt;      |&gt; Random.map updateY

This Random.map call produces:

    Generator U32 { … }

But the type annotation on randomBuilding says it should be:

    Generator (Num *) { … }


── TYPE MISMATCH in examples/../../roc-random/package/Random.roc ───────────────

Something is off with the body of the u8 definition:

201│  u8 : U8, U8 -&gt; Generator (Num *) U8
202│  u8 = \x, y -&gt; betweenUnsigned x y
                    ^^^^^^^^^^^^^^^^^^^

This betweenUnsigned call produces:

    State (Int Unsigned8) -&gt; {
        state : State (Int Unsigned8),
        value : Int Unsigned8,
    }

But the type annotation on u8 says it should be:

    State (Num *) -&gt; {
        state : State (Num *),
        value : U8,
    }

────────────────────────────────────────────────────────────────────────────────

2 errors and 0 warnings found in 16 ms
</code></pre></div>
<p>I actually.. I don't think that works either</p>



<a name="476654492"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654492" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654492">(Oct 14 2024 at 01:59)</a>:</h4>
<p>27 messages were moved here from <a class="stream-topic" data-stream-id="302903" href="/#narrow/stream/302903-platform-development/topic/roc-ray">#platform development &gt; roc-ray</a> by <span class="user-mention silent" data-user-id="515757">Luke Boswell</span>.</p>



<a name="476654493"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654493" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654493">(Oct 14 2024 at 01:59)</a>:</h4>
<p>Let me try</p>



<a name="476654948"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476654948" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476654948">(Oct 14 2024 at 02:02)</a>:</h4>
<p>I'm thinking we should make the 32-bit variant the default, so we can have the <code>Random.u8</code> do what you expect. But then separate out the 16/8-bit noise ones into separate modules like (Random16, Random8) so people can still use those if they need the lower noise. </p>
<p>Then every function within a module will play nicely together.</p>



<a name="476655053"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476655053" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476655053">(Oct 14 2024 at 02:02)</a>:</h4>
<p>I think that would work, but I'm not sure why leaving it generic wouldn't also work</p>



<a name="476655073"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476655073" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476655073">(Oct 14 2024 at 02:03)</a>:</h4>
<p>And it would lead to lower surface area</p>



<a name="476655290"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476655290" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476655290">(Oct 14 2024 at 02:04)</a>:</h4>
<p>I think it's probably that bug, where once you use a top-level it's type becomes fixed/specialised or something like that</p>



<a name="476655341"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476655341" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476655341">(Oct 14 2024 at 02:05)</a>:</h4>
<p>Ah...</p>



<a name="476655401"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476655401" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476655401">(Oct 14 2024 at 02:05)</a>:</h4>
<p>And based on what Ayaz said, I don't expect that we'll be changing how that works any time soon</p>



<a name="476655519"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476655519" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476655519">(Oct 14 2024 at 02:06)</a>:</h4>
<p>ah yeah that's true</p>



<a name="476655534"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476655534" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476655534">(Oct 14 2024 at 02:06)</a>:</h4>
<p>separate functions seems fine though</p>



<a name="476655551"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476655551" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476655551">(Oct 14 2024 at 02:06)</a>:</h4>
<p>probably less error-prone to use too</p>



<a name="476655605"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476655605" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476655605">(Oct 14 2024 at 02:06)</a>:</h4>
<p>Because apparently the alternative is that much slower to compile</p>



<a name="476664409"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476664409" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476664409">(Oct 14 2024 at 03:08)</a>:</h4>
<p>So I think that <code>roc-random</code> is unintentionally confusing as an api. It is trying to support all of the different PCG variants with all of the various state types.</p>



<a name="476664427"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476664427" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476664427">(Oct 14 2024 at 03:09)</a>:</h4>
<p>Almost no one ever wants or needs that</p>



<a name="476664446"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476664446" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476664446">(Oct 14 2024 at 03:09)</a>:</h4>
<p>You really just want the recommended 64 bit version hard coded</p>



<a name="476664474"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476664474" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476664474">(Oct 14 2024 at 03:09)</a>:</h4>
<p>Then you want to map from the values it returns into the various smaller integer types.</p>



<a name="476664518"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476664518" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476664518">(Oct 14 2024 at 03:09)</a>:</h4>
<p>If you are generating 8 bit numbers you don't want an 8 bit internal state.</p>



<a name="476664581"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476664581" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476664581">(Oct 14 2024 at 03:10)</a>:</h4>
<p>You still want the full 64 bit internal state</p>



<a name="476664732"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476664732" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476664732">(Oct 14 2024 at 03:11)</a>:</h4>
<p>Even on a 32 bit system, it is probably recommended to generally use the 64 bit state. 32 bits is not actually that much randomness and both will still be quite fast. Most rngs have 256 or way more state. The most common mersenne twister has 4kb of state if I recall corectly.</p>



<a name="476665709"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476665709" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476665709">(Oct 14 2024 at 03:18)</a>:</h4>
<p>Yeah, just looked at the pcg library again. For a simple pcg library, I think it is recommended to just implement either the 32bit version (which has 64 bits of state) or the 64bit version (which has 128 bits of state).</p>



<a name="476666453"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476666453" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476666453">(Oct 14 2024 at 03:24)</a>:</h4>
<p>Sounds good. I've just ripped the other variants out. I'll see if I can upgrade to U64 as the state... maybe U32 is fine, considering we will have builtin Crypto module which provides better crypto, this is just for randomish numbers</p>



<a name="476666646"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476666646" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476666646">(Oct 14 2024 at 03:26)</a>:</h4>
<p>U64 is a safer bet IMO</p>



<a name="476666806"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476666806" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476666806">(Oct 14 2024 at 03:27)</a>:</h4>
<p>So it is either <code>U128</code> for state with <code>U64</code> output or <code>U64</code> as state with <code>U32</code> as output. I think either is fine desktop. For embedded, 32 bit, or weaker devices, the small state runs a lot faster.</p>



<a name="476666905"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476666905" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476666905">(Oct 14 2024 at 03:28)</a>:</h4>
<p>The former  is my vote</p>



<a name="476666927"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476666927" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476666927">(Oct 14 2024 at 03:28)</a>:</h4>
<p>I think the former is the better default as well.</p>



<a name="476666947"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476666947" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476666947">(Oct 14 2024 at 03:28)</a>:</h4>
<p>And yes, you're right. We should go for the "sane defaults, complex available" route</p>



<a name="476666963"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476666963" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476666963">(Oct 14 2024 at 03:28)</a>:</h4>
<p>I think it would be fine to support both as well. But I wouldn't support any state sizes besides those two.</p>



<a name="476667017"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476667017" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476667017">(Oct 14 2024 at 03:29)</a>:</h4>
<p>And just expose the U128/U64 variant under something like <code>Random</code> and U64/U32 under <code>Random.U32</code></p>



<a name="476667188"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476667188" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476667188">(Oct 14 2024 at 03:30)</a>:</h4>
<p>I think I'd like to try renaming the <code>Random.chain</code> function to <code>Random.generate</code>... just because it "feels" right</p>



<a name="476667242"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476667242" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476667242">(Oct 14 2024 at 03:30)</a>:</h4>
<p>Messing with the documentation</p>



<a name="476667590"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476667590" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476667590">(Oct 14 2024 at 03:33)</a>:</h4>
<p>I'd not vote for <code>generate</code></p>



<a name="476667652"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476667652" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476667652">(Oct 14 2024 at 03:33)</a>:</h4>
<p>There are lots of candidates, but I'd only consider ones that also work if you're <em>not</em> using a record builder</p>



<a name="476667677"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476667677" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476667677">(Oct 14 2024 at 03:33)</a>:</h4>
<p>Unless you have a cool enough name, of course</p>



<a name="476667928"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476667928" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476667928">(Oct 14 2024 at 03:35)</a>:</h4>
<p><a href="/user_uploads/22008/coqc8Vasxw7fzThZFtSYC-Vi/Screenshot-2024-10-14-at-14.35.43.png">Screenshot 2024-10-14 at 14.35.43.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/coqc8Vasxw7fzThZFtSYC-Vi/Screenshot-2024-10-14-at-14.35.43.png" title="Screenshot 2024-10-14 at 14.35.43.png"><img data-original-dimensions="1174x878" src="/user_uploads/thumbnail/22008/coqc8Vasxw7fzThZFtSYC-Vi/Screenshot-2024-10-14-at-14.35.43.png/840x560.webp"></a></div>



<a name="476668006"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476668006" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476668006">(Oct 14 2024 at 03:36)</a>:</h4>
<p>Yeah, it might be a little confusing...</p>



<a name="476668337"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476668337" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476668337">(Oct 14 2024 at 03:38)</a>:</h4>
<p>Does that need to return a generator? Couldn't it return an rgb directly?</p>



<a name="476668380"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476668380" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476668380">(Oct 14 2024 at 03:39)</a>:</h4>
<p>I think record builders should be flexible enough to support that, right?</p>



<a name="476668393"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476668393" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476668393">(Oct 14 2024 at 03:39)</a>:</h4>
<p>It can do either</p>



<a name="476668443"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476668443" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476668443">(Oct 14 2024 at 03:39)</a>:</h4>
<p>That said, if it generates an RGB direcltly, where does the state go?</p>



<a name="476668450"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476668450" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476668450">(Oct 14 2024 at 03:39)</a>:</h4>
<p>The problem with generating values is that you don't actually generate the value in this version of the library, you generate the value and the state, yes</p>



<a name="476668583"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476668583" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476668583">(Oct 14 2024 at 03:40)</a>:</h4>
<p>Yeah, so I guess you have to build up a generator (theoretically could do that with decode)... Though I think it requires the future version of decode.</p>



<a name="476668609"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476668609" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476668609">(Oct 14 2024 at 03:40)</a>:</h4>
<p>Anyway, that is a side track for now.</p>



<a name="476668645"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476668645" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476668645">(Oct 14 2024 at 03:41)</a>:</h4>
<p>I think a nice record builder generator api and a separate direct api sounds great.</p>



<a name="476668841"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476668841" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476668841">(Oct 14 2024 at 03:42)</a>:</h4>
<p>Also, I would save <code>Random.generate</code> for converting a <code>Generator</code> into the final value?</p>



<a name="476671269"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476671269" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476671269">(Oct 14 2024 at 04:00)</a>:</h4>
<p>Would you expect <code>Random.u8</code> to generate a random <code>U8</code> between <code>Num.maxU8</code> and <code>Num.minU8</code> or would you expect it to be a function that takes an upper and lower bound? say <code>u8 : U8, U8 -&gt; Generator U8</code></p>



<a name="476671528"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476671528" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476671528">(Oct 14 2024 at 04:02)</a>:</h4>
<p>The former.</p>



<a name="476671613"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476671613" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476671613">(Oct 14 2024 at 04:02)</a>:</h4>
<p>I'd usually want: </p>
<ul>
<li>First, a random number, <code>Random.u8</code></li>
<li>Then maybe, a bounded number, <code>Random.boundedU8</code></li>
</ul>



<a name="476671973"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476671973" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476671973">(Oct 14 2024 at 04:05)</a>:</h4>
<p>Ok, so both in an API then</p>



<a name="476672116"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476672116" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476672116">(Oct 14 2024 at 04:06)</a>:</h4>
<p>Also, I'm super tempted to generate a list of numbers and plot these on a histogram... would you expect a uniform distribution from PCG? I'm not super familiar with these things</p>



<a name="476672257"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476672257" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476672257">(Oct 14 2024 at 04:07)</a>:</h4>
<p>According to Wikipedia, <a href="https://en.wikipedia.org/wiki/Permuted_congruential_generator">PCGs are equidistributed</a>, so yes</p>



<a name="476672749"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476672749" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476672749">(Oct 14 2024 at 04:11)</a>:</h4>
<p><a href="/user_uploads/22008/wKzDL1OSdk5aW8y7XNVHYglI/Screenshot-2024-10-14-at-15.11.31.png">Screenshot 2024-10-14 at 15.11.31.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/wKzDL1OSdk5aW8y7XNVHYglI/Screenshot-2024-10-14-at-15.11.31.png" title="Screenshot 2024-10-14 at 15.11.31.png"><img data-original-dimensions="2434x928" src="/user_uploads/thumbnail/22008/wKzDL1OSdk5aW8y7XNVHYglI/Screenshot-2024-10-14-at-15.11.31.png/840x560.webp"></a></div><p>Looks alright to me</p>



<a name="476675632"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476675632" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476675632">(Oct 14 2024 at 04:34)</a>:</h4>
<p>Ok, <a href="https://github.com/lukewilliamboswell/roc-random/pull/10">https://github.com/lukewilliamboswell/roc-random/pull/10</a></p>
<p>I did a big cleanup... ran out of steam and I'll leave the upgrade to U64 state for another time. This is working well for what I need, and I spent most of my time improving the docs, examples and API so it's much easier to use. The state upgrade should be all internal so that shouldn't really affect anyone.</p>



<a name="476679272"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-random%20record%20builder/near/476679272" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-random.20record.20builder.html#476679272">(Oct 14 2024 at 05:17)</a>:</h4>
<p>Yeah, I know early roc-random had a bug at least with calculating the bounds when limiting. Cause when plotted as a scatter plotted, it clearly sampled zero too much and missed the lower edge. But I think that was fixed</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>