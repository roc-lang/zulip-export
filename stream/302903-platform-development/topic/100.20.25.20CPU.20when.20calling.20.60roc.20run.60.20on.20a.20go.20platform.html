<html>
<head><meta charset="utf-8"><title>100 % CPU when calling `roc run` on a go platform Â· platform development Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/index.html">platform development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/100.20.25.20CPU.20when.20calling.20.60roc.20run.60.20on.20a.20go.20platform.html">100 % CPU when calling `roc run` on a go platform</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="491961459"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/100%20%25%20CPU%20when%20calling%20%60roc%20run%60%20on%20a%20go%20platform/near/491961459" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oskar Hahn <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/100.20.25.20CPU.20when.20calling.20.60roc.20run.60.20on.20a.20go.20platform.html#491961459">(Jan 05 2025 at 12:00)</a>:</h4>
<p>I have a strange behavior. I am creating a go platform. When I call</p>
<div class="codehilite"><pre><span></span><code>roc run examples/hello_world/main.roc
</code></pre></div>
<p>It works, but it also takes 100 % cpu, even when it idles. </p>
<p>When I build the binary with <code>roc build examples/hello_world/main.roc</code> (with or without --optimize) or I use <code>roc run examples/hello_world/main.roc --optimize</code>, it has a normal cpu usage.</p>
<p>I changed the host, so that it never calls into Roc, and it is the same behavior. 100% CPU when calling with <code>roc run</code>, no CPU, when building first or running with <code>--optimize</code>.</p>
<p>Switching the linker between surgical or legacy does not change anything.</p>
<p>I don't know, how to narrow the error down. Do you have any idea, what could cause it?</p>



<a name="491962417"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/100%20%25%20CPU%20when%20calling%20%60roc%20run%60%20on%20a%20go%20platform/near/491962417" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jasper Woudenberg <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/100.20.25.20CPU.20when.20calling.20.60roc.20run.60.20on.20a.20go.20platform.html#491962417">(Jan 05 2025 at 12:15)</a>:</h4>
<p>Some investigation into this problem in this thread:<br>
<a class="message-link" href="/#narrow/channel/302903-platform-development/topic/roc.20runtime.20continues.20using.20CPU.20after.20platform.20code.20is.20done/near/481793175">#platform development &gt; roc runtime continues using CPU after platform code is done @ ðŸ’¬</a></p>



<a name="491984664"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/100%20%25%20CPU%20when%20calling%20%60roc%20run%60%20on%20a%20go%20platform/near/491984664" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oskar Hahn <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/100.20.25.20CPU.20when.20calling.20.60roc.20run.60.20on.20a.20go.20platform.html#491984664">(Jan 05 2025 at 17:43)</a>:</h4>
<p>Ahh. Thank you. I missed that.</p>
<p>What I don't get is, why does this error not happen on basic-webserver?</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>