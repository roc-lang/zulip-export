<html>
<head><meta charset="utf-8"><title>zig 0.10.0 · platform development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/index.html">platform development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html">zig 0.10.0</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="296448158"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296448158" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arya Elfren <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296448158">(Aug 31 2022 at 20:56)</a>:</h4>
<p>I don't know how tightly integrated the zig definitions (RocStr etc.) are with the compiler.</p>
<p>Is there a reason they use a (now very) old version of zig? If not what would be the process for upgrading it to either 0.9.0, master, or (waiting to around November) the upcoming self hosted 0.10.0 compiler?</p>
<p>Additionally, would you accept changes to the zig definitions to use a different style/updated style? I also love to make the platform work with the zig allocator interface so you could change one line and use a different allocator for your roc code?</p>
<p>(Theoretically would it be possible to either compile separate roc .o files with different allocator link functions or even just define/change the function pointers used so certain calls to roc [if used as a library as I asked in <a class="stream" data-stream-id="231634" href="/#narrow/stream/231634-beginners">#beginners</a>] used different allocators?)</p>



<a name="296448534"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296448534" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296448534">(Aug 31 2022 at 20:59)</a>:</h4>
<p>We're working on the 0.10 upgrade. 0.10 is not yet released. We are on the latest released version I think.</p>



<a name="296448739"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296448739" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296448739">(Aug 31 2022 at 21:00)</a>:</h4>
<p>When you say "now very old" what are you referring to exactly? We're on 0.9</p>



<a name="296449248"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296449248" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arya Elfren <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296449248">(Aug 31 2022 at 21:03)</a>:</h4>
<p>Maybe I'm thinking of the roc example platform?</p>



<a name="296449348"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296449348" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arya Elfren <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296449348">(Aug 31 2022 at 21:04)</a>:</h4>
<p>I remember recently having to get 0.8.0 to do something in the roc repo</p>



<a name="296449399"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296449399" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arya Elfren <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296449399">(Aug 31 2022 at 21:04)</a>:</h4>
<p>Maybe not</p>



<a name="296449466"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296449466" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arya Elfren <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296449466">(Aug 31 2022 at 21:05)</a>:</h4>
<p>I'll double check, but what about the other suggestions?</p>



<a name="296449499"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296449499" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296449499">(Aug 31 2022 at 21:05)</a>:</h4>
<p>we're working on 0.10 but it has a bunch of bugs that mean we can't upgrade yet</p>



<a name="296449528"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296449528" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296449528">(Aug 31 2022 at 21:05)</a>:</h4>
<p>we're working together with the zig devs to make sure our code builds before 0.10 is released</p>



<a name="296449692"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296449692" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296449692">(Aug 31 2022 at 21:06)</a>:</h4>
<p>There's no Zig 0.8 in the repo today. We only support a single version at a time within our repo and it's 0.9 currently.</p>



<a name="296449711"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296449711" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arya Elfren <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296449711">(Aug 31 2022 at 21:06)</a>:</h4>
<p>Maybe I'm just too used to the zig ecosystem sticking to master and saw something break.</p>



<a name="296450368"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296450368" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296450368">(Aug 31 2022 at 21:10)</a>:</h4>
<p>Regarding the suggestion about the Zig allocator interface... all compiled Roc code uses a function called <code>roc_alloc</code> to allocate. A platform author can define that to work however they want. So I think we might already have the flexibility you're suggesting but in a different way, that isn't tied to Zig specifically.</p>



<a name="296451336"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296451336" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arya Elfren <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296451336">(Aug 31 2022 at 21:17)</a>:</h4>
<p>I see that, I was thinking about doing that for specific function calls (i.e. customising the allocator function used instead of always using <code>roc_alloc</code>), and updating the zig example platform to use that instead of <code>malloc</code></p>



<a name="296451816"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296451816" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296451816">(Aug 31 2022 at 21:20)</a>:</h4>
<p>Yeah <code>roc_alloc</code> doesn't have to be built on top of <code>malloc</code>. You can put something else inside it if you want. But the compiled Roc code calls a function called <code>roc_alloc</code> and assumes it has a certain type signature.</p>



<a name="296451880"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296451880" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296451880">(Aug 31 2022 at 21:21)</a>:</h4>
<p>There is no way to make Roc code use an allocator with a different name or type signature.</p>



<a name="296451912"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296451912" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296451912">(Aug 31 2022 at 21:21)</a>:</h4>
<p>But the implementation can be whatever you like.</p>



<a name="296459301"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296459301" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296459301">(Aug 31 2022 at 22:20)</a>:</h4>
<p>one trick you can do there is to set a global (or threadlocal) and have <code>roc_alloc</code> do something different based on its value</p>



<a name="296459393"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296459393" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296459393">(Aug 31 2022 at 22:21)</a>:</h4>
<p>like set it right before calling the roc function</p>



<a name="296460905"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296460905" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296460905">(Aug 31 2022 at 22:35)</a>:</h4>
<p>Just have to be careful not to free something incorrectly</p>



<a name="296460934"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/zig%200.10.0/near/296460934" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/zig.200.2E10.2E0.html#296460934">(Aug 31 2022 at 22:35)</a>:</h4>
<p>Given the changing allocators and potentially longer lived data</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>