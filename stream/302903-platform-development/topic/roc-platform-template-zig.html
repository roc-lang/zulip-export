<html>
<head><meta charset="utf-8"><title>roc-platform-template-zig · platform development · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/index.html">platform development</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html">roc-platform-template-zig</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="569167110"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569167110" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569167110">(Jan 21 2026 at 03:53)</a>:</h4>
<p><span class="user-mention" data-user-id="515757">@Luke Boswell</span> is it possible that build.zig is misconfigured for a native build?  this is a very shaky area for me, but I tried a native build, and there were some glibc symbols going into a musl build, which:</p>
<div class="codehilite"><pre><span></span><code>roc test/host.roc
ld.lld: error: undefined symbol: __vfprintf_chk
&gt;&gt;&gt; referenced by secp256k1.c
&gt;&gt;&gt;               .zig-cache/o/68a5a1526d4b3cedd8deaf08a3d7878c/secp256k1.o:(fprintf(_IO_FILE*, char const* pass_object_size1, ...)) in archive test/../platform/targets/x64musl/libhost.a
-- LINKER FAILED ---------------------------------

The linker failed while building for target x64musl

Error: LinkFailed
error: Recipe `test-integration` failed on line 269 with exit code 1
</code></pre></div>



<a name="569167137"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569167137" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569167137">(Jan 21 2026 at 03:53)</a>:</h4>
<p>it may just be my <code>build.zig</code>,  not sure yet</p>



<a name="569167265"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569167265" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569167265">(Jan 21 2026 at 03:55)</a>:</h4>
<p>Codex says:</p>
<blockquote>
<p>You’ve got it — the “native” build is faster, but in this project “native” needs to mean  “native Roc target,” not “host libc.” On Linux, Roc’s native target is x64musl, while Zig’s default native target is typically glibc. So the current zig build native produces a glibc-flavored libhost.a and then copies it into the x64musl slot, which looks “right” but is actually wrong.</p>
</blockquote>
<blockquote>
<p>How the two builds differ today:</p>
</blockquote>
<blockquote>
<ul>
<li>zig build (what build-all uses) builds each Roc target explicitly via roc_target.toZigTarget(), so x64musl is truly musl.</li>
<li>zig build native uses the host target, which is glibc on most Linux distros, and then copies to the Roc target directory. That mismatch is the subtle bug.</li>
</ul>
</blockquote>
<blockquote>
<p>Your expectation is totally reasonable; the “native build” just isn’t configured to match the Roc target definition.</p>
</blockquote>
<blockquote>
<p>If you want, I can fix native in build.zig to use detectNativeRocTarget(...) → toZigTarget() instead of standardTargetOptions(). That keeps the fast build but produces the correct musl target on Linux.</p>
</blockquote>



<a name="569167366"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569167366" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569167366">(Jan 21 2026 at 03:57)</a>:</h4>
<p>this might be an artifact of my inclusion of <code>libsecp256k1</code>; anyhow it's resolved</p>



<a name="569178694"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569178694" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569178694">(Jan 21 2026 at 06:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="780900">Rick Hull</span> <a href="#narrow/channel/302903-platform-development/topic/roc-platform-template-zig/near/569167366">said</a>:</p>
<blockquote>
<p>this might be an artifact of my inclusion of <code>libsecp256k1</code>; anyhow it's resolved</p>
</blockquote>
<p>At first glance I would guess it was related to this. </p>
<p>What was the issue in the end?</p>



<a name="569260655"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569260655" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569260655">(Jan 21 2026 at 13:56)</a>:</h4>
<div class="codehilite"><pre><span></span><code>diff --git a/build.zig b/build.zig
index bccf6f4..c5462eb 100644
--- a/build.zig
+++ b/build.zig
@@ -99,13 +99,14 @@ pub fn build(b: *std.Build) void {

     const native_target = b.standardTargetOptions(.{});

-    // Detect native RocTarget and copy to proper targets folder
+    // Detect native RocTarget based on host, then build using that Roc target.
     const native_roc_target = detectNativeRocTarget(native_target.result) orelse {
         std.debug.print(&quot;Unsupported native platform\n&quot;, .{});
         return;
     };

-    const native_lib = buildHostLib(b, native_target, optimize, builtins_module, secp256k1_dep);
+    const native_roc_zig_target = b.resolveTargetQuery(native_roc_target.toZigTarget());
+    const native_lib = buildHostLib(b, native_roc_zig_target, optimize, builtins_module, secp256k1_dep);
     b.installArtifact(native_lib);

     const copy_native = b.addUpdateSourceFiles();
</code></pre></div>
<p>I am about to publish my <code>nostr-platform</code> repo on github.  I think it's feature complete for building the rest of nostr in Roc.  But I think I need to rename it.  There is nothing in the platform specific to nostr -- it's roc-platform-template-zig, using Zig's sha256, plus libsecp256k1.   Any suggestions for repo name?</p>



<a name="569261109"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569261109" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569261109">(Jan 21 2026 at 13:58)</a>:</h4>
<p>I have 3 functions from libsecp: create public key, sign a msg/hash, verify a signature.  These are all strictly related to "Schnorr Signatures", which are used in Bitcoin (primarily) and later adopted by Nostr Protocol</p>



<a name="569262471"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569262471" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569262471">(Jan 21 2026 at 14:03)</a>:</h4>
<p><code>libsecp256k1</code> does WAY MORE than Schnorr, and Schnorr is a small optional module.  So i am going to to avoid the big mouthful and likely base on <code>schnorr</code>.  <code>roc-platform-schnorr</code>   or <code>schnorr-platform</code></p>



<a name="569265190"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569265190" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569265190">(Jan 21 2026 at 14:14)</a>:</h4>
<p><code>schnorr-platform</code> sounds good</p>



<a name="569292737"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569292737" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569292737">(Jan 21 2026 at 16:01)</a>:</h4>
<p>for day to day development, is there any reason to build all targets vs just the native target?  i assume this is for release rather than dev</p>



<a name="569293922"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569293922" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569293922">(Jan 21 2026 at 16:06)</a>:</h4>
<p>Yes, the new basic-cli script allows you to choose: <a href="https://github.com/roc-lang/basic-cli/blob/03e94adde676e495d7a80c89b5b54de7ed17af61/build.sh#L87">https://github.com/roc-lang/basic-cli/blob/03e94adde676e495d7a80c89b5b54de7ed17af61/build.sh#L87</a></p>



<a name="569294445"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569294445" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569294445">(Jan 21 2026 at 16:08)</a>:</h4>
<p>is there any good reason to build all for edit-build-test cycles?</p>



<a name="569295817"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569295817" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569295817">(Jan 21 2026 at 16:14)</a>:</h4>
<p>Not that I can think of</p>



<a name="569564146"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569564146" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569564146">(Jan 22 2026 at 18:38)</a>:</h4>
<p>For "hello world" to work with the new compiler, a new user needs a "new compiler" platform.  this will be <code>basic-cli</code> by default, when it's ready.  but is <code>roc-platform-template-zig</code> the next best alternative?  for a new user wanting hello world?</p>



<a name="569580894"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569580894" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569580894">(Jan 22 2026 at 20:16)</a>:</h4>
<p>Yes for now the template or possibly something like roc-ray which both have releases.</p>



<a name="569581048"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569581048" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569581048">(Jan 22 2026 at 20:17)</a>:</h4>
<p>The basic-cli branch works well enough but you do need to build the platform from source so not as friendly.</p>



<a name="569582261"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569582261" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569582261">(Jan 22 2026 at 20:24)</a>:</h4>
<p><span class="user-mention" data-user-id="780900">@Rick Hull</span> what OS are you running? I could make probably make a an alpha release with just the binary for your system. I could probably add http too if you are wanting to experiment with it.</p>



<a name="569586057"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569586057" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569586057">(Jan 22 2026 at 20:49)</a>:</h4>
<p>this isn't for me, really, but I'm running Arch Linux.   so, step 1 of "hello world" is first, get a working platform with Stdout.  and a binary seems good for that.</p>



<a name="569605481"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569605481" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569605481">(Jan 22 2026 at 23:12)</a>:</h4>
<p>referencing some other platform discussion in other channels...   what is the future of <code>roc-platform-template-zig</code> ?   I can imagine that <code>basic-cli</code> might be a better starting point for my <code>schnorr-platform</code>  (not really, just hypothetically).  leaving aside Rust vs Zig (I much prefer Zig, in my naivete)</p>



<a name="569605545"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569605545" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569605545">(Jan 22 2026 at 23:13)</a>:</h4>
<p>perhaps it becomes <code>basic-cli-zig</code>?   or halfway there?</p>



<a name="569605562"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569605562" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569605562">(Jan 22 2026 at 23:13)</a>:</h4>
<p>The future plan is to not change it... it's <em>done</em></p>



<a name="569605605"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569605605" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569605605">(Jan 22 2026 at 23:13)</a>:</h4>
<p>ah, nice.  I can agree with that</p>



<a name="569605711"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569605711" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569605711">(Jan 22 2026 at 23:14)</a>:</h4>
<p>Unless the roc &lt;-&gt; host boundary changes... I don't plan to change anything. It's a minimal platform template that shows just enough functionality for people to see how to build a platform. I aim to have the identical platform API for all the templates, Rust, Swift, C, Go, Zig, etc...</p>



<a name="569605735"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569605735" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569605735">(Jan 22 2026 at 23:15)</a>:</h4>
<p>if there were a hypothetical <code>basic-cli-zig</code> would you recommend someone wrapping an importantly-host-only library start with <code>roc-platform-template-zig</code> or <code>basic-cli-zig</code> ?</p>



<a name="569605818"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569605818" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569605818">(Jan 22 2026 at 23:15)</a>:</h4>
<p>or is there a better question lurking in here?</p>



<a name="569605820"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569605820" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569605820">(Jan 22 2026 at 23:15)</a>:</h4>
<p>I don't really understand the question. What is a hypothetical basic-cli-zig... is that the basic-cli API but with a zig host?</p>



<a name="569605863"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569605863" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569605863">(Jan 22 2026 at 23:16)</a>:</h4>
<p>yes, let me rephrase.  use <code>basic-cli</code> as a starting point, or <code>roc-platform-template-rust</code> ?</p>



<a name="569605958"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569605958" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569605958">(Jan 22 2026 at 23:17)</a>:</h4>
<p>What are you wanting to achieve? keep in mind the crypto primitive should be implemented in Roc's builtins so you could use any platform</p>



<a name="569605967"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569605967" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569605967">(Jan 22 2026 at 23:17)</a>:</h4>
<p>I recognize that this might be a poorly conceived question.  feel free to answer any related question ;)</p>



<a name="569606060"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569606060" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569606060">(Jan 22 2026 at 23:18)</a>:</h4>
<p>I thought your <code>schnorr-platform</code> was a learning experiment to learn more about roc, not necessarily something you plan to publish releases for and support long term</p>



<a name="569606188"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569606188" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569606188">(Jan 22 2026 at 23:19)</a>:</h4>
<p>Can you share a link to your platform? I wonder if you might want to implement it as a package instead?</p>



<a name="569606304"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569606304" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569606304">(Jan 22 2026 at 23:20)</a>:</h4>
<p>If we assume the crypto primitives are in the builtins (we can simulate that by putting that in a forked platform for now) -- you would explore options to build a higher level abstraction on top of that</p>



<a name="569606338"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569606338" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569606338">(Jan 22 2026 at 23:20)</a>:</h4>
<p>this is getting too specific to me.  my question is more general, about future stuff and new developers coming here with questions.  forget crypto.  pick a good example of something that belongs in the host.  maybe a fresh new arena allocator.  I've got this thing, and I want to expose it to Roc via a platform.  the platform templates are a great resource and a minimal way to get started.  <code>basic-cli</code> is very comprehensive and provides many modules that might never get used by any given application.  I guess to answer my question, I would start with the smallest thing that could possibly work.</p>



<a name="569606449"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569606449" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569606449">(Jan 22 2026 at 23:21)</a>:</h4>
<p>Ahk ... so generally I would suggest forking something like basic-cli if you needed all the functionality and wanted the same API (just adding a little more).</p>



<a name="569606490"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569606490" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569606490">(Jan 22 2026 at 23:22)</a>:</h4>
<p>I might tell someone: start with <code>roc-platform-template-rust</code>, which gives you basic I/O and memory mgmt.  add your host feature, and then start developing roc against your platform.  if you find that you need more platform features, you can base your host feature on <code>basic-cli</code> instead.</p>



<a name="569606499"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569606499" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569606499">(Jan 22 2026 at 23:22)</a>:</h4>
<p>If you are wanting to build a new platform I would say start with a template so you can see just the parts you need more easily</p>



<a name="569606565"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569606565" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569606565">(Jan 22 2026 at 23:23)</a>:</h4>
<p>also, good question about learning vs supporting for the long term.  that <code>schnorr-platform</code> is so tiny, porque no los dos?  I plan to implement nostr in roc (already done it in ruby)</p>



<a name="569606771"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569606771" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569606771">(Jan 22 2026 at 23:24)</a>:</h4>
<p>If you have any interest in <del>implementing Schnorr</del> achieving a Schnorr impl in Roc, I have a line-by-line impl in Ruby that matches the spec nearly 1-1.  But this type of impl gives up some timing guarantees, etc.   I don't mean that you, Luke, undertake this.  but there are reasons not to.</p>



<a name="569606905"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569606905" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569606905">(Jan 22 2026 at 23:26)</a>:</h4>
<p>Is schnorr implemented in this? <a href="https://ziglang.org/documentation/master/std/#std.crypto">https://ziglang.org/documentation/master/std/#std.crypto</a></p>



<a name="569606930"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569606930" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569606930">(Jan 22 2026 at 23:26)</a>:</h4>
<p>I can take a peek <span aria-label="spectacles" class="emoji emoji-1f453" role="img" title="spectacles">:spectacles:</span></p>



<a name="569607001"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569607001" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569607001">(Jan 22 2026 at 23:27)</a>:</h4>
<p>huzzah! <a href="https://ziglang.org/documentation/master/std/#std.crypto.pcurves.secp256k1.Secp256k1">https://ziglang.org/documentation/master/std/#std.crypto.pcurves.secp256k1.Secp256k1</a><br>
schnorr is an optional module, almost certainly implemented</p>



<a name="569607058"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569607058" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569607058">(Jan 22 2026 at 23:27)</a>:</h4>
<p>if it is not a port or wrapper around <code>libsecp256k1</code> it may be less desirable nonetheless</p>



<a name="569607120"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569607120" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569607120">(Jan 22 2026 at 23:28)</a>:</h4>
<p>(this is my sophomoric understanding, not a crypto developer, IANAL etc etc)</p>



<a name="569607177"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569607177" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569607177">(Jan 22 2026 at 23:28)</a>:</h4>
<p>If you design an idiomatic Roc module that wraps that zig functionality... you could propose the crypto primitive be added to Roc's builtins in a new ideas thread.</p>



<a name="569607217"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569607217" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569607217">(Jan 22 2026 at 23:29)</a>:</h4>
<p>If we have a solid design proposal -- I am reasonably confident I could implement it in no time</p>



<a name="569607255"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569607255" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569607255">(Jan 22 2026 at 23:29)</a>:</h4>
<p><span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> do you have any thoughts on adding secp256k1 as a primitive?</p>



<a name="569607392"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569607392" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569607392">(Jan 22 2026 at 23:31)</a>:</h4>
<blockquote>
<p>If you design an idiomatic Roc module that wraps that zig functionality... you could propose the crypto primitive be added to Roc's builtins in a new ideas thread.</p>
</blockquote>
<p>I'm gonna call this a....     S T R E T C H  G O A L</p>



<a name="569608962"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569608962" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569608962">(Jan 22 2026 at 23:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="780900">Rick Hull</span> <a href="#narrow/channel/302903-platform-development/topic/roc-platform-template-zig/near/569607392">said</a>:</p>
<blockquote>
<blockquote>
<p>If you design an idiomatic Roc module that wraps that zig functionality... you could propose the crypto primitive be added to Roc's builtins in a new ideas thread.</p>
</blockquote>
<p>I'm gonna call this a....     S T R E T C H  G O A L</p>
</blockquote>
<p>If you are interesting in working on this... here was the version we almost landed for SHA256 <a href="https://github.com/MatthewJohnHeath/rocSHA/blob/1f30fe05e1f617605f8c17c92c2d1ac5290cc667/crates/compiler/builtins/roc/Crypto.roc">https://github.com/MatthewJohnHeath/rocSHA/blob/1f30fe05e1f617605f8c17c92c2d1ac5290cc667/crates/compiler/builtins/roc/Crypto.roc</a></p>



<a name="569609045"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569609045" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569609045">(Jan 22 2026 at 23:45)</a>:</h4>
<p>That will need some translation to use type modules and associated methods etc... but it should give you some ideas</p>



<a name="569612237"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569612237" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569612237">(Jan 23 2026 at 00:11)</a>:</h4>
<p>honestly, my next step is to develop nostr in Roc on top of <code>schnorr-platform</code>; I was just getting comfortable with "old-roc" when I realized there was a "new-roc", and I hardly know either.</p>



<a name="569616876"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569616876" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569616876">(Jan 23 2026 at 01:00)</a>:</h4>
<p>Using this topic as a scratchpad, maybe better than creating new topics.  Are <code>build.sh</code> and <code>bundle.sh</code> expected to be standards carried forwards?  Or would something like <code>justfile</code> or <code>Makefile</code> be better?</p>



<a name="569616976"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569616976" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569616976">(Jan 23 2026 at 01:01)</a>:</h4>
<p>The plan is to replace them with <code>build.roc</code> and <code>bundle.roc</code></p>



<a name="569616991"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569616991" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569616991">(Jan 23 2026 at 01:01)</a>:</h4>
<p>ok, good to know!</p>



<a name="569617015"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569617015" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569617015">(Jan 23 2026 at 01:01)</a>:</h4>
<p>i haven't looked at these in detail but now on my radar</p>



<a name="569617061"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569617061" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569617061">(Jan 23 2026 at 01:02)</a>:</h4>
<p>Those scripts don't exist yet, we have them in the old compiler version of basic-cli for an example</p>



<a name="569617081"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569617081" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569617081">(Jan 23 2026 at 01:02)</a>:</h4>
<p><del>is there a canonical build.roc?</del></p>



<a name="569617107"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569617107" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569617107">(Jan 23 2026 at 01:02)</a>:</h4>
<p>No -- the plan is to use basic-cli for scripting, but we don't have a release for that yet</p>



<a name="569617178"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569617178" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569617178">(Jan 23 2026 at 01:03)</a>:</h4>
<p>I'm happy to assist with whatever I can with that, but I need to get much more comfortable with <code>basic-cli</code> ergos</p>



<a name="569820676"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/302903-platform%20development/topic/roc-platform-template-zig/near/569820676" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/302903-platform-development/topic/roc-platform-template-zig.html#569820676">(Jan 24 2026 at 00:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/302903-platform-development/topic/roc-platform-template-zig/near/569607255">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> do you have any thoughts on adding secp256k1 as a primitive?</p>
</blockquote>
<p>Nope... not really.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>