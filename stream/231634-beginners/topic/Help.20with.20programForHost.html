<html>
<head><meta charset="utf-8"><title>Help with programForHost Â· beginners Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Help.20with.20programForHost.html">Help with programForHost</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="410603654"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Help%20with%20programForHost/near/410603654" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Help.20with.20programForHost.html#410603654">(Dec 31 2023 at 04:51)</a>:</h4>
<p>I'm looking for some assitance with <a href="https://github.com/lukewilliamboswell/roc-gui">this platform</a>. Basically I am trying to revive the gui example and update it so that it uses glue and works as a standalone platform. </p>
<p>Brendan has provided a lot of assistance, but I'm still not quite there yet and I feel like I'm just spinning my wheels a bit and not making any progress. I'm asking here in the hope that someone is able to also assist me find the issue or get this platform working again.</p>
<p>I've converted the platform to use a <code>Box Model</code> and then represented this with a <code>c_void</code> in the rust host. I have added a script to generate glue and it compiles and runs the init function in Roc without issue. However when I call update or render and pass the model back in I think it segfaults. </p>
<p>I am pretty sure the issue is in <a href="https://github.com/lukewilliamboswell/roc-gui/blob/main/platform/src/roc.rs#L121">my roc.rs</a> where I am hand-rolling the <code>programForHost</code> implementation, and I don't think I am representing the BoxedModel correctly. </p>
<p>I have tried a few different things, but I don't know enough Roc or Rust to find where the issue is.</p>
<div class="codehilite"><pre><span></span><code>$ roc dev hello-gui.roc
ðŸ”¨ Rebuilding platform...
[src/roc.rs:87] size = 0
[src/roc.rs:88] init_size = 0
[src/roc.rs:89] render_size = 0
[src/roc.rs:90] update_size = 0
[src/lib.rs:16] &amp;roc_main = ProgramForHost {
    init: RocFunctionInit {
        closure_data: [],
    },
    render: RocFunctionRender {
        closure_data: [],
    },
    update: RocFunctionUpdate {
        closure_data: [],
    },
}
[hello-gui.roc:18] &quot;INIT CALLED&quot; = &quot;INIT CALLED&quot;
</code></pre></div>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>