<html>
<head><meta charset="utf-8"><title>could not compile · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html">could not compile</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="283378496"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283378496" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan Wirth <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283378496">(May 23 2022 at 21:32)</a>:</h4>
<p>Hey there<br>
I'm struggling to run the hello world example.</p>



<a name="283378512"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283378512" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan Wirth <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283378512">(May 23 2022 at 21:32)</a>:</h4>
<div class="codehilite"><pre><span></span><code>error[E0425]: cannot find function `fexecve` in crate `libc`
   --&gt; cli/src/lib.rs:609:26
    |
609 |                   if libc::fexecve(fd, argv.as_ptr(), envp.as_ptr()) != 0 {
    |                            ^^^^^^^ help: a function with a similar name exists: `execve`
    |
   ::: /Users/janwirth/.cargo/registry/src/github.com-1ecc6299db9ec823/libc-0.2.125/src/unix/mod.rs:862:5
    |
862 | /     pub fn execve(
863 | |         prog: *const c_char,
864 | |         argv: *const *const c_char,
865 | |         envp: *const *const c_char,
866 | |     ) -&gt; ::c_int;
    | |_________________- similarly named function `execve` defined here

error[E0425]: cannot find function `memfd_create` in crate `libc`
   --&gt; cli/src/lib.rs:655:33
    |
655 |         let fd = unsafe { libc::memfd_create(anonymous_file_name.as_ptr().cast(), flags) };
    |                                 ^^^^^^^^^^^^ not found in `libc`

For more information about this error, try `rustc --explain E0425`.
error: could not compile `roc_cli` due to 2 previous errors
warning: build failed, waiting for other jobs to finish...
error: build failed

[nix-shell:~/roc]$
</code></pre></div>



<a name="283378541"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283378541" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan Wirth <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283378541">(May 23 2022 at 21:32)</a>:</h4>
<p>I had it working before, but I pulled to get the latest updates from trunk and it seems broken since.</p>



<a name="283378570"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283378570" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan Wirth <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283378570">(May 23 2022 at 21:33)</a>:</h4>
<p>Is it posisble that I have to clear some nix cache or so?</p>



<a name="283379461"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283379461" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283379461">(May 23 2022 at 21:42)</a>:</h4>
<p>ah, no</p>



<a name="283379471"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283379471" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283379471">(May 23 2022 at 21:42)</a>:</h4>
<p>we're missing some conditional compilation there</p>



<a name="283379473"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283379473" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283379473">(May 23 2022 at 21:42)</a>:</h4>
<p>that's annoying</p>



<a name="283379510"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283379510" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283379510">(May 23 2022 at 21:42)</a>:</h4>
<p>what OS are you on?</p>



<a name="283380323"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283380323" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283380323">(May 23 2022 at 21:51)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> I'm assuming this is a macos issue where certain functions in libc are not there and we need to probably pull linux and macos apart in the code.</p>



<a name="283380341"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283380341" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283380341">(May 23 2022 at 21:51)</a>:</h4>
<p>it's hard for me to get right though because on linux everything just works</p>



<a name="283682003"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283682003" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283682003">(May 24 2022 at 00:23)</a>:</h4>
<p>yeah that's one of the functions that Linux libc has but Mac doesn't</p>



<a name="283682028"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283682028" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283682028">(May 24 2022 at 00:23)</a>:</h4>
<p>I'll make a PR to fix</p>



<a name="283714003"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283714003" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan Wirth <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283714003">(May 24 2022 at 08:46)</a>:</h4>
<p>Yeah I'm on OSX M1<br>
<a href="/user_uploads/22008/8Rob0fRBLLi-l60aqW9yEv73/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/8Rob0fRBLLi-l60aqW9yEv73/image.png" title="image.png"><img src="/user_uploads/22008/8Rob0fRBLLi-l60aqW9yEv73/image.png"></a></div>



<a name="283746726"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/283746726" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#283746726">(May 24 2022 at 13:42)</a>:</h4>
<p><a href="https://github.com/rtfeldman/roc/pull/3124/files">https://github.com/rtfeldman/roc/pull/3124/files</a> should fix this!</p>



<a name="284944923"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/284944923" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#284944923">(Jun 03 2022 at 23:45)</a>:</h4>
<p>I can't build <code>roc_load</code>the error was</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">error: failed to run custom build command for `roc_load v0.1.0 (PATH/roc/compile/load)`</span>

<span class="go">Caused by:</span>
<span class="go">  process didn't exit successfully: `PATH/roc/target/debug/build/roc_load-152347a29c7becb0/build-script-build` (signal: 4, SIGILL: illegal instruction)</span>
<span class="go">  --- stdout</span>
<span class="go">  cargo:rerun-if-changed=../builtins/roc/Bool.roc</span>
<span class="go">  cargo:rerun-if-changed=../builtins/roc/Result.roc</span>
</code></pre></div>



<a name="284964157"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/284964157" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#284964157">(Jun 04 2022 at 07:20)</a>:</h4>
<p>What system are you on?</p>



<a name="284978377"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/284978377" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#284978377">(Jun 04 2022 at 12:53)</a>:</h4>
<p>Arch</p>



<a name="285024825"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285024825" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285024825">(Jun 05 2022 at 08:21)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="506120">@Hashi364</span>, can you describe the steps you took? Did you download the repo and run <code>cargo build</code> from the root of the repo dir?</p>



<a name="285040573"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285040573" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285040573">(Jun 05 2022 at 15:08)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> I cloned the repo, installed the nix package manager and Flakes, created <code>~/.config/nix/nix.config</code> as a copy of <code>/etc/nix/nix.conf</code> and appended <code>experimental-fatures = nix-command flakes</code>, entered the repo_dir and ran <code>nix develop</code> and then <code>cargo build</code></p>



<a name="285084973"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285084973" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285084973">(Jun 06 2022 at 08:01)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="506120">@Hashi364</span>, could you also share the output of <code>lscpu</code>? Do you happen to be inside a virtual machine? Once I have this information I'll try to reproduce the error.</p>



<a name="285187505"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285187505" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285187505">(Jun 06 2022 at 23:47)</a>:</h4>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">Arquitetura:                  x86_64</span>
<span class="go">  Modo(s) operacional da CPU: 32-bit, 64-bit</span>
<span class="go">  Tamanhos de endereço:       36 bits physical, 48 bits virtual</span>
<span class="go">  Ordem dos bytes:            Little Endian</span>
<span class="go">CPU(s):                       4</span>
<span class="go">  Lista de CPU(s) on-line:    0-3</span>
<span class="go">ID de fornecedor:             GenuineIntel</span>
<span class="go">  Nome do modelo:             Intel(R) Pentium(R) CPU  N3700  @ 1.60GHz</span>
<span class="go">    Família da CPU:           6</span>
<span class="go">    Modelo:                   76</span>
<span class="go">    Thread(s) per núcleo:     1</span>
<span class="go">    Núcleo(s) por soquete:    4</span>
<span class="go">    Soquete(s):               1</span>
<span class="go">    Step:                     3</span>
<span class="go">    CPU(s) scaling MHz:       36%</span>
<span class="go">    CPU MHz máx.:             2400,0000</span>
<span class="go">    CPU MHz mín.:             480,0000</span>
<span class="go">    BogoMIPS:                 3201.33</span>
<span class="go">    Opções:                   fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe s</span>
<span class="go">                              yscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology tsc_reliable nonstop_tsc cpuid aperfmperf</span>
<span class="go">                              tsc_known_freq pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 movbe popcnt tsc_deadli</span>
<span class="go">                              ne_timer aes rdrand lahf_lm 3dnowprefetch epb pti tpr_shadow vnmi flexpriority ept vpid tsc_adjust smep erms dtherm ida a</span>
<span class="go">                              rat</span>
<span class="go">Recursos de virtualização:</span>
<span class="go">  Virtualização:              VT-x</span>
<span class="go">Caches (soma de todos):</span>
<span class="go">  L1d:                        96 KiB (4 instâncias)</span>
<span class="go">  L1i:                        128 KiB (4 instâncias)</span>
<span class="go">  L2:                         2 MiB (2 instâncias)</span>
<span class="go">NUMA:</span>
<span class="go">  Nó(s) de NUMA:              1</span>
<span class="go">  CPU(s) de nó0 NUMA:         0-3</span>
<span class="go">Vulnerabilidades:</span>
<span class="go">  Itlb multihit:              Not affected</span>
<span class="go">  L1tf:                       Not affected</span>
<span class="go">  Mds:                        Vulnerable: Clear CPU buffers attempted, no microcode; SMT disabled</span>
<span class="go">  Meltdown:                   Mitigation; PTI</span>
<span class="go">  Spec store bypass:          Not affected</span>
<span class="go">  Spectre v1:                 Mitigation; usercopy/swapgs barriers and __user pointer sanitization</span>
<span class="go">  Spectre v2:                 Mitigation; Retpolines, STIBP disabled, RSB filling</span>
<span class="go">  Srbds:                      Not affected</span>
<span class="go">  Tsx async abort:            Not affected</span>
</code></pre></div>
<p><span class="user-mention" data-user-id="361169">@Anton</span></p>



<a name="285214066"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285214066" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285214066">(Jun 07 2022 at 07:45)</a>:</h4>
<p>I think <code>cargo build -vv</code> ("very verbose") may tell us more</p>



<a name="285214084"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285214084" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285214084">(Jun 07 2022 at 07:45)</a>:</h4>
<p>it looks like either a segfault or panic, would be good to know which</p>



<a name="285246891"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285246891" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285246891">(Jun 07 2022 at 13:04)</a>:</h4>
<p>I think the Pentium processor is the problem, those don't have the same instructions available as most modern CPUs. This also means I won't be able to reproduce the problem.  <span class="user-mention" data-user-id="506120">@Hashi364</span> ,  you can use <code>gdb</code> to find the instruction that causes the problem. I don't have any experience with <code>gdb</code>, but perhaps <span class="user-mention" data-user-id="281543">@Folkert de Vries</span> or <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> can provide more detailed information on how to find the instruction as well as figure out which code generates that instruction.</p>



<a name="285247099"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285247099" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285247099">(Jun 07 2022 at 13:05)</a>:</h4>
<p>that implies it's a problem with the rust compiler, which I find hard to believe</p>



<a name="285247190"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285247190" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285247190">(Jun 07 2022 at 13:06)</a>:</h4>
<p>much more likely I made something segfault when reading/writing subs to/from disk</p>



<a name="285247579"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285247579" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285247579">(Jun 07 2022 at 13:08)</a>:</h4>
<p>Couldn't some dependency create the illegal instruction error like in <a href="https://github.com/rust-lang/rust/issues/75612">this issue</a>?</p>



<a name="285248166"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285248166" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285248166">(Jun 07 2022 at 13:13)</a>:</h4>
<p>wouldn't simd instructions be illegal (due to not existing) on a pentium?</p>



<a name="285248631"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285248631" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285248631">(Jun 07 2022 at 13:16)</a>:</h4>
<p>hmm, potentially</p>



<a name="285248678"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285248678" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285248678">(Jun 07 2022 at 13:16)</a>:</h4>
<p>we don't really check for feature availability in the simd code, just assume that these features are available on x86_64</p>



<a name="285248719"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285248719" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285248719">(Jun 07 2022 at 13:16)</a>:</h4>
<p>and they would be on most recent CPUs,</p>



<a name="285248875"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285248875" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285248875">(Jun 07 2022 at 13:18)</a>:</h4>
<p>hm, apparently N3700 is Braswell, which does support SIMD</p>



<a name="285248894"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285248894" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285248894">(Jun 07 2022 at 13:18)</a>:</h4>
<p><a href="https://laptopmedia.com/review/intel-pentium-n3700-review-the-budget-braswell-family-is-here/">https://laptopmedia.com/review/intel-pentium-n3700-review-the-budget-braswell-family-is-here/</a></p>



<a name="285328762"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285328762" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285328762">(Jun 07 2022 at 23:49)</a>:</h4>
<p>Building with <code>cargo build -vv</code>shows this warning from C/C++ twice (which doesn't look usefull to me) and the same error at the end:</p>
<div class="codehilite" data-code-language="consolewarning"><pre><span></span><code>warning:                  from /nix/store/j85inaz3mf0vy03c2jr835pqr0x5898b-llvm-13.0.0-dev/include/llvm-c/DataTypes.h:27,
warning:                  from /nix/store/j85inaz3mf0vy03c2jr835pqr0x5898b-llvm-13.0.0-dev/include/llvm-c/Types.h:17,
warning:                  from /nix/store/j85inaz3mf0vy03c2jr835pqr0x5898b-llvm-13.0.0-dev/include/llvm-c/Target.h:23,
warning:                  from wrappers/target.c:7:
warning: /nix/store/f8z3wraxrbziyf93lwh6adslm89zi6fw-glibc-2.33-123-dev/include/features.h:397:4: warning: #warning _FORTIFY_SOURCE requires compiling with optimization (-O) [-Wcpp]
warning:   397 | #  warning _FORTIFY_SOURCE requires compiling with optimization (-O)
warning:       |    ^~~~~~~```
</code></pre></div>



<a name="285329562"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285329562" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285329562">(Jun 08 2022 at 00:00)</a>:</h4>
<p>hmm, does <code>cargo check -vv</code> complete succesfully?</p>



<a name="285330480"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285330480" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285330480">(Jun 08 2022 at 00:15)</a>:</h4>
<p>It fails with the same error</p>



<a name="285330900"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285330900" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285330900">(Jun 08 2022 at 00:22)</a>:</h4>
<p>hmm, do you happen to have <code>lldb</code> installed?</p>



<a name="285330902"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285330902" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285330902">(Jun 08 2022 at 00:22)</a>:</h4>
<p>it's part of llvm</p>



<a name="285330918"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285330918" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285330918">(Jun 08 2022 at 00:22)</a>:</h4>
<p>if so, <code>lldb cargo -- check -vv</code> might do something</p>



<a name="285330931"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285330931" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285330931">(Jun 08 2022 at 00:23)</a>:</h4>
<p>the tricky part is that we and cargo are spawning a bunch of threads</p>



<a name="285473520"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285473520" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285473520">(Jun 09 2022 at 01:11)</a>:</h4>
<p>I can't run <code>lldb</code> inside a <code>nix develop</code> shell.<br>
I tried installing from <code>pacman -S lldb</code> looks like it works (but not on <code>nix develop</code> shell)<br>
I tried installing from <code>nix-env -i lldb</code> but it can't find <code>libicuuc.so</code></p>



<a name="285474300"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285474300" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285474300">(Jun 09 2022 at 01:23)</a>:</h4>
<p>When I try pacman's <code>lldb</code> yells that can't find some libraries' version information or something</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">lldb: /nix/store/9s8s7snpms482zm3z68aq91d184ynqma-ncurses-6.2/lib/libpanelw.so.6: no version information available (required by /usr/lib/liblldb.so.13)</span>
<span class="go">lldb: /nix/store/9s8s7snpms482zm3z68aq91d184ynqma-ncurses-6.2/lib/libncursesw.so.6: no version information available (required by /usr/lib/liblldb.so.13)</span>
<span class="go">lldb: /nix/store/9s8s7snpms482zm3z68aq91d184ynqma-ncurses-6.2/lib/libncursesw.so.6: no version information available (required by /usr/lib/liblldb.so.13)</span>
<span class="go">lldb: /nix/store/lbccj93nnf77zxg3m9gmral5avbp64z2-gcc-10.3.0-lib/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /usr/lib/liblldb.so.13)</span>
<span class="go">lldb: /nix/store/lbccj93nnf77zxg3m9gmral5avbp64z2-gcc-10.3.0-lib/lib/libstdc++.so.6: version `CXXABI_1.3.13' not found (required by /usr/lib/liblldb.so.13)</span>
<span class="go">lldb: /nix/store/9s8s7snpms482zm3z68aq91d184ynqma-ncurses-6.2/lib/libncursesw.so.6: no version information available (required by /usr/lib/libLLVM-13.so)</span>
<span class="go">lldb: /nix/store/lbccj93nnf77zxg3m9gmral5avbp64z2-gcc-10.3.0-lib/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /usr/lib/libLLVM-13.so)</span>
<span class="go">lldb: /nix/store/lbccj93nnf77zxg3m9gmral5avbp64z2-gcc-10.3.0-lib/lib/libstdc++.so.6: version `CXXABI_1.3.13' not found (required by /usr/lib/libLLVM-13.so)</span>
<span class="go">lldb: /nix/store/lbccj93nnf77zxg3m9gmral5avbp64z2-gcc-10.3.0-lib/lib/libstdc++.so.6: version `GLIBCXX_3.4.30' not found (required by /usr/lib/libLLVM-13.so)</span>
<span class="go">lldb: /nix/store/lbccj93nnf77zxg3m9gmral5avbp64z2-gcc-10.3.0-lib/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /usr/lib/libclang-cpp.so.13)</span>
</code></pre></div>



<a name="285501119"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285501119" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285501119">(Jun 09 2022 at 08:22)</a>:</h4>
<p>I can try making lldb work inside nix tomorrow.</p>



<a name="285656013"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285656013" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285656013">(Jun 10 2022 at 10:15)</a>:</h4>
<p><span class="user-mention" data-user-id="506120">@Hashi364</span> in flake.nix you can add <code>llvmPkgs.lldb</code> below <code>llvmPkgs.lld</code>. Then you can do <code>nix develop</code> followed by <code>lldb cargo -- check -vv</code>.</p>



<a name="285656196"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285656196" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285656196">(Jun 10 2022 at 10:17)</a>:</h4>
<p>assuming that works, it puts you in something like an interpreter. <code>run</code> (followed by enter) should run the application and crash, then <code>bt</code> gives the backtrace. That's what I'd like to see</p>



<a name="285713867"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285713867" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285713867">(Jun 10 2022 at 18:17)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> <span class="user-mention" data-user-id="281543">@Folkert de Vries</span> Only one error this time:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">/nix/store/bf05bf7znhygdpfxh2kdagmxwi1xfkis-lldb-13.0.0/bin/lldb: error while loading shared libraries: libicuuc.so.71: cannot open shared object file: No such file or directory</span>
</code></pre></div>



<a name="285713941"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285713941" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285713941">(Jun 10 2022 at 18:17)</a>:</h4>
<p>I think this is still a nix problem</p>



<a name="285714014"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285714014" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285714014">(Jun 10 2022 at 18:18)</a>:</h4>
<p>at least, I'm guessing just <code>lldb</code> would give the same thing?</p>



<a name="285717858"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285717858" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285717858">(Jun 10 2022 at 18:51)</a>:</h4>
<p>Yes, both <code>lldb</code> and <code>lldb cargo -- check -vv</code> say the same thing</p>



<a name="285768015"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285768015" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285768015">(Jun 11 2022 at 08:41)</a>:</h4>
<p>From what I could find there appears to be something wrong with your archlinux mirror, to fix this:</p>
<ul>
<li>generate a new mirror list <a href="https://archlinux.org/mirrorlist/">here</a></li>
<li>back up the <code>/etc/pacman.d/mirrorlist</code> file</li>
<li>delete the old mirrorlist in  <code>/etc/pacman.d/mirrorlist</code>and paste the new generated one</li>
<li>run <code>pacman -Syu</code></li>
</ul>
<p>And then try lldb again in the roc dir:</p>
<ul>
<li><code>nix develop</code></li>
<li><code>lldb cargo -- check -vv</code></li>
</ul>



<a name="285843328"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285843328" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285843328">(Jun 12 2022 at 13:41)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> I did it, same error</p>



<a name="285897047"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285897047" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285897047">(Jun 13 2022 at 08:40)</a>:</h4>
<p>Thanks for sticking with us @Hashi364, I'll try to test it on ArchLinux today or tomorrow.</p>



<a name="285962057"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/285962057" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#285962057">(Jun 13 2022 at 17:21)</a>:</h4>
<p>Ok, don't feel rushed</p>



<a name="286069204"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286069204" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286069204">(Jun 14 2022 at 13:13)</a>:</h4>
<p>I couldn't get lldb to work but;</p>
<ol>
<li>in flake.nix you can replace <code>llvmPkgs.lldb</code> with <code>gdb</code></li>
<li>run <code>nix develop</code></li>
<li>execute <code>gdb target/debug/build/roc_load-152347a29c7becb0/build-script-build</code></li>
<li>step through the program until the failure</li>
</ol>
<p>I think that should reveal the instruction at which the program fails which may be an instruction your CPU does not support.</p>



<a name="286153970"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286153970" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286153970">(Jun 15 2022 at 01:29)</a>:</h4>
<p>I "full" run:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">run</span>
<span class="go">Starting program: /home/shikiyo/selfinstalled/roc/target/debug/build/roc_load-152347a29c7becb0/build-script-build</span>
<span class="go">[Thread debugging using libthread_db enabled]</span>
<span class="go">Using host libthread_db library "/nix/store/rir9pf0kz1mb84x5bd3yr0fx415yy423-glibc-2.33-123/lib/libthread_db.so.1".</span>
<span class="go">cargo:rerun-if-changed=../builtins/roc/Bool.roc</span>
<span class="go">[New Thread 0x7ffff7ac1640 (LWP 6690)]</span>
<span class="go">[New Thread 0x7ffff72bd640 (LWP 6691)]</span>
<span class="go">[New Thread 0x7ffff6ab9640 (LWP 6692)]</span>
<span class="go">[Thread 0x7ffff72bd640 (LWP 6691) exited]</span>
<span class="go">[Thread 0x7ffff6ab9640 (LWP 6692) exited]</span>
<span class="go">[Thread 0x7ffff7ac1640 (LWP 6690) exited]</span>
<span class="go">thread 'main' panicked at 'called Result::unwrap() on an Err value: NotPresent', compiler/load/build.rs:50:66</span>
<span class="go">note: run with RUST_BACKTRACE=1 environment variable to display a backtrace</span>
<span class="go">[Inferior 1 (process 6686) exited with code 0145]</span>
</code></pre></div>
<p>A "stepped run":</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">break main</span>
<span class="go">Breakpoint 1 at 0x555555646d64: main. (2 locations)</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">run</span>
<span class="go">Starting program: /home/shikiyo/selfinstalled/roc/target/debug/build/roc_load-152347a29c7becb0/build-script-build</span>
<span class="go">[Thread debugging using libthread_db enabled]</span>
<span class="go">Using host libthread_db library "/nix/store/rir9pf0kz1mb84x5bd3yr0fx415yy423-glibc-2.33-123/lib/libthread_db.so.1".</span>

<span class="go">Breakpoint 1, 0x0000555555647a50 in main ()</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">n</span>
<span class="go">Single stepping until exit from function main,</span>
<span class="go">which has no line number information.</span>

<span class="go">Breakpoint 1, build_script_build::main () at compiler/load/build.rs:21</span>
<span class="go">21      for (module_id, filename) in MODULES {</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">n</span>
<span class="go">22          write_subs_for_module(*module_id, filename);</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">n</span>
<span class="go">cargo:rerun-if-changed=../builtins/roc/Bool.roc</span>
<span class="go">[New Thread 0x7ffff7ac1640 (LWP 7234)]</span>
<span class="go">[New Thread 0x7ffff72bd640 (LWP 7235)]</span>
<span class="go">[New Thread 0x7ffff6ab9640 (LWP 7236)]</span>
<span class="go">[Thread 0x7ffff6ab9640 (LWP 7236) exited]</span>
<span class="go">[Thread 0x7ffff7ac1640 (LWP 7234) exited]</span>
<span class="go">[Thread 0x7ffff72bd640 (LWP 7235) exited]</span>
<span class="go">thread 'main' panicked at 'called Result::unwrap() on an Err value: NotPresent', compiler/load/build.rs:50:66</span>
<span class="go">note: run with RUST_BACKTRACE=1 environment variable to display a backtrace</span>
<span class="go">[Inferior 1 (process 7211) exited with code 0145]</span>
</code></pre></div>



<a name="286154506"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286154506" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286154506">(Jun 15 2022 at 01:38)</a>:</h4>
<p>Breaking on <code>write_subs_for_module</code>:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">b write_subs_for_module</span>
<span class="go">Breakpoint 1 at 0xf2e15: file compiler/load/build.rs, line 28.</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">run</span>
<span class="go">Starting program: /home/shikiyo/selfinstalled/roc/target/debug/build/roc_load-152347a29c7becb0/build-script-build</span>
<span class="go">[Thread debugging using libthread_db enabled]</span>
<span class="go">Using host libthread_db library "/nix/store/rir9pf0kz1mb84x5bd3yr0fx415yy423-glibc-2.33-123/lib/libthread_db.so.1".</span>

<span class="go">Breakpoint 1, build_script_build::write_subs_for_module (module_id=..., filename=...) at compiler/load/build.rs:28</span>
<span class="go">28      println!("cargo:rerun-if-changed=../builtins/roc/{}", filename);</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">n</span>
<span class="go">cargo:rerun-if-changed=../builtins/roc/Bool.roc</span>
<span class="go">30      let arena = Bump::new();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">31      let src_dir = PathBuf::from(".");</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">32      let source = roc_builtins::roc::module_source(module_id);</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">32      let source = roc_builtins::roc::module_source(module_id);</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">33      let target_info = roc_target::TargetInfo::default_x86_64();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">33      let target_info = roc_target::TargetInfo::default_x86_64();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">37          PathBuf::from(filename),</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">39          &amp;src_dir,</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">40          Default::default(),</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">42          roc_reporting::report::RenderTarget::ColorTerminal,</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">43          Threading::AllAvailable,</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">35      let res_module = roc_load_internal::file::load_and_typecheck_str(</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">[New Thread 0x7ffff7ac1640 (LWP 9490)]</span>
<span class="go">[New Thread 0x7ffff72bd640 (LWP 9491)]</span>
<span class="go">[New Thread 0x7ffff6ab9640 (LWP 9492)]</span>
<span class="go">[Thread 0x7ffff72bd640 (LWP 9491) exited]</span>
<span class="go">[Thread 0x7ffff7ac1640 (LWP 9490) exited]</span>
<span class="go">[Thread 0x7ffff6ab9640 (LWP 9492) exited]</span>
<span class="go">44      );</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">46      let module = res_module.unwrap();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">47      let subs = module.solved.inner();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">48      let exposed_vars_by_symbol: Vec&lt;_&gt; = module.exposed_to_host.into_iter().collect();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">48      let exposed_vars_by_symbol: Vec&lt;_&gt; = module.exposed_to_host.into_iter().collect();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">50      let mut output_path = PathBuf::from(std::env::var("OUT_DIR").unwrap());</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">thread 'main' panicked at 'called Result::unwrap() on an Err value: NotPresent', compiler/load/build.rs:50:66</span>
<span class="go">note: run with RUST_BACKTRACE=1 environment variable to display a backtrace</span>
<span class="go">[Inferior 1 (process 9458) exited with code 0145]</span>
</code></pre></div>



<a name="286154517"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286154517" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286154517">(Jun 15 2022 at 01:39)</a>:</h4>
<p>Looks like I don't have a <code>OUT_DIR</code> system variable</p>



<a name="286154953"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286154953" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286154953">(Jun 15 2022 at 01:46)</a>:</h4>
<p>I made a dir <code>mkdir build</code> and ran <code>OUT_DIR=build gdb target/debug/build/roc_load-152347a29c7becb0/build-script-build</code><br>
(I may have pressed &lt;Enter&gt; too fast at the and):</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">b write_subs_for_module</span>
<span class="go">Breakpoint 1 at 0xf2e15: file compiler/load/build.rs, line 28.</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">run</span>
<span class="go">Starting program: /home/shikiyo/selfinstalled/roc/target/debug/build/roc_load-152347a29c7becb0/build-script-build</span>
<span class="go">[Thread debugging using libthread_db enabled]</span>
<span class="go">Using host libthread_db library "/nix/store/rir9pf0kz1mb84x5bd3yr0fx415yy423-glibc-2.33-123/lib/libthread_db.so.1".</span>
<span class="go">n</span>
<span class="go">Breakpoint 1, build_script_build::write_subs_for_module (module_id=..., filename=...) at compiler/load/build.rs:28</span>
<span class="go">28      println!("cargo:rerun-if-changed=../builtins/roc/{}", filename);</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">n</span>
<span class="go">cargo:rerun-if-changed=../builtins/roc/Bool.roc</span>
<span class="go">30      let arena = Bump::new();</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">n</span>
<span class="go">31      let src_dir = PathBuf::from(".");</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">32      let source = roc_builtins::roc::module_source(module_id);</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">32      let source = roc_builtins::roc::module_source(module_id);</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">33      let target_info = roc_target::TargetInfo::default_x86_64();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">33      let target_info = roc_target::TargetInfo::default_x86_64();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">37          PathBuf::from(filename),</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">39          &amp;src_dir,</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">40          Default::default(),</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">42          roc_reporting::report::RenderTarget::ColorTerminal,</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">43          Threading::AllAvailable,</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">35      let res_module = roc_load_internal::file::load_and_typecheck_str(</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">[New Thread 0x7ffff7ac1640 (LWP 10878)]</span>
<span class="go">[New Thread 0x7ffff72c0640 (LWP 10879)]</span>
<span class="go">[New Thread 0x7ffff6ab9640 (LWP 10880)]</span>
<span class="go">[Thread 0x7ffff6ab9640 (LWP 10880) exited]</span>
<span class="go">[Thread 0x7ffff72c0640 (LWP 10879) exited]</span>
<span class="go">[Thread 0x7ffff7ac1640 (LWP 10878) exited]</span>
<span class="go">44      );</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">46      let module = res_module.unwrap();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">47      let subs = module.solved.inner();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">48      let exposed_vars_by_symbol: Vec&lt;_&gt; = module.exposed_to_host.into_iter().collect();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">48      let exposed_vars_by_symbol: Vec&lt;_&gt; = module.exposed_to_host.into_iter().collect();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">50      let mut output_path = PathBuf::from(std::env::var("OUT_DIR").unwrap());</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">50      let mut output_path = PathBuf::from(std::env::var("OUT_DIR").unwrap());</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">51      output_path.extend(&amp;[filename]);</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">52      output_path.set_extension("dat");</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">53      let mut file = std::fs::File::create(&amp;output_path).unwrap();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">54      subs.serialize(&amp;exposed_vars_by_symbol, &amp;mut file).unwrap();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">54      subs.serialize(&amp;exposed_vars_by_symbol, &amp;mut file).unwrap();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">55  }</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">build_script_build::main () at compiler/load/build.rs:21</span>
<span class="go">21      for (module_id, filename) in MODULES {</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">22          write_subs_for_module(*module_id, filename);</span>
<span class="gp gp-VirtualEnv">(gdb)</span>

<span class="go">Thread 1 "build-script-bu" hit Breakpoint 1, build_script_build::write_subs_for_module (module_id=..., filename=...) at compiler/load/build.rs:28</span>
<span class="go">28      println!("cargo:rerun-if-changed=../builtins/roc/{}", filename);</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">cargo:rerun-if-changed=../builtins/roc/Result.roc</span>
<span class="go">30      let arena = Bump::new();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">31      let src_dir = PathBuf::from(".");</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">32      let source = roc_builtins::roc::module_source(module_id);</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">32      let source = roc_builtins::roc::module_source(module_id);</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">33      let target_info = roc_target::TargetInfo::default_x86_64();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">33      let target_info = roc_target::TargetInfo::default_x86_64();</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">37          PathBuf::from(filename),</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">39          &amp;src_dir,</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">40          Default::default(),</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">42          roc_reporting::report::RenderTarget::ColorTerminal,</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">43          Threading::AllAvailable,</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">35      let res_module = roc_load_internal::file::load_and_typecheck_str(</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">[New Thread 0x7ffff6ab9640 (LWP 10977)]</span>
<span class="go">[New Thread 0x7ffff72c0640 (LWP 10978)]</span>
<span class="go">[New Thread 0x7ffff7ac1640 (LWP 10979)]</span>

<span class="go">Thread 5 "build-script-bu" received signal SIGILL, Illegal instruction.</span>
<span class="go">[Switching to Thread 0x7ffff6ab9640 (LWP 10977)]</span>
<span class="go">core::core_arch::x86::avx::_mm256_setr_epi16 (e00=7, e01=7, e02=7, e03=7, e04=7, e05=7, e06=7, e07=7, e08=7, e09=7, e10=7, e11=7, e12=7, e13=7, e14=7, e15=7) at /rustc/7737e0b5c4103216d6fd8cf941b7ab9bdbaace7c/library/core/src/../../stdarch/crates/core_arch/src/x86/avx.rs:2368</span>
<span class="go">2368  /rustc/7737e0b5c4103216d6fd8cf941b7ab9bdbaace7c/library/core/src/../../stdarch/crates/core_arch/src/x86/avx.rs: No such file or directory.</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">Couldn't get registers: No such process.</span>
<span class="go">Couldn't get registers: No such process.</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
<span class="go">Couldn't get registers: No such process.</span>
<span class="go">Couldn't get registers: No such process.</span>
<span class="gp gp-VirtualEnv">(gdb)</span> <span class="go">[Thread 0x7ffff72c0640 (LWP 10978) exited]</span>
<span class="go">[Thread 0x7ffff6ab9640 (LWP 10977) exited]</span>
<span class="go">[Thread 0x7ffff7c6a880 (LWP 10842) exited]</span>

<span class="go">Couldn't get registers: No such process.</span>
<span class="go">Couldn't get registers: No such process.</span>
<span class="gp gp-VirtualEnv">(gdb)</span>
</code></pre></div>



<a name="286155022"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286155022" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286155022">(Jun 15 2022 at 01:48)</a>:</h4>
<p>Try to save the reading, looks like this is important:</p>
<div class="codehilite"><pre><span></span><code>core::core_arch::x86::avx::_mm256_setr_epi16 (e00=7, e01=7, e02=7, e03=7, e04=7, e05=7, e06=7, e07=7, e08=7, e09=7, e10=7, e11=7, e12=7, e13=7, e14=7, e15=7) at /rustc/7737e0b5c4103216d6fd8cf941b7ab9bdbaace7c/library/core/src/../../stdarch/crates/core_arch/src/x86/avx.rs:2368
2368  /rustc/7737e0b5c4103216d6fd8cf941b7ab9bdbaace7c/library/core/src/../../stdarch/crates/core_arch/src/x86/avx.rs: No such file or directory.
</code></pre></div>



<a name="286181589"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286181589" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286181589">(Jun 15 2022 at 08:41)</a>:</h4>
<p>Looks like it's trying to use avx instructions, which your CPU doesn't support. Now we have to figure out what rust code is generating that instruction.</p>



<a name="286182899"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286182899" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286182899">(Jun 15 2022 at 08:55)</a>:</h4>
<p>Looking at the disassembly of my <code>roc_load-152347a29c7becb0/build-script-build</code>:<br>
<code>callq  eb0cf0 &lt;_ZN4core9core_arch3x863avx17_mm256_set1_epi1617h486812b7e971ca88E&gt;</code> is called inside <code>roc_collections21small_string_interner21find_i16_slice_x86</code></p>



<a name="286183596"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286183596" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286183596">(Jun 15 2022 at 09:01)</a>:</h4>
<p>bingo :)<br>
In <code>compiler/collections/src/small_string_interner.rs</code> in the function <code>find_i16_slice_x86_64</code>, we explicitly call <code>_mm256_set1_epi16</code>:</p>
<div class="codehilite"><pre><span></span><code>let keys = unsafe { _mm256_set1_epi16(key) };
</code></pre></div>
<p>And from the definition we can see that it is an avx instruction:</p>
<div class="codehilite"><pre><span></span><code>/// [Intel&#39;s documentation](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm256_set1_epi16)
#[inline]
#[target_feature(enable = &quot;avx&quot;)]
//#[cfg_attr(test, assert_instr(vpshufb))]
#[cfg_attr(test, assert_instr(vinsertf128))]
// This intrinsic has no corresponding instruction.
#[stable(feature = &quot;simd_x86&quot;, since = &quot;1.27.0&quot;)]
pub unsafe fn _mm256_set1_epi16(a: i16) -&gt; __m256i {
    _mm256_setr_epi16(a, a, a, a, a, a, a, a, a, a, a, a, a, a, a, a)
}
</code></pre></div>



<a name="286184127"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286184127" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286184127">(Jun 15 2022 at 09:06)</a>:</h4>
<p>Rust std has <code>is_x86_feature_detected!("avx")</code> so we can change <code>#[cfg(target_arch = "x86_64")]</code> to also check that.<br>
Should I apply the fix like that <span class="user-mention" data-user-id="281543">@Folkert de Vries</span>?</p>



<a name="286193773"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286193773" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286193773">(Jun 15 2022 at 10:35)</a>:</h4>
<p>I ended up using <code>target-feature</code> instead. The fix is on the <code>illegal_instruction_PENTIUM_N3700</code> branch. Can you give it a try <span class="user-mention" data-user-id="506120">@Hashi364</span> (<code>nix develop</code> followed by <code>cargo build</code>)?</p>



<a name="286292984"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286292984" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286292984">(Jun 16 2022 at 00:33)</a>:</h4>
<p><code>git switch illegal_instruction_PENTIUM_N3700</code>,  <code>nix develop</code>, <code>cargo build</code>:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">Compiling cfg-if v1.0.0</span>
<span class="go">   Compiling libc v0.2.125</span>
<span class="go">   Compiling proc-macro2 v1.0.38</span>
<span class="go">   Compiling unicode-xid v0.2.3</span>
<span class="go">error: unknown codegen option:  target-cpu</span>

<span class="go">error: could not compile cfg-if due to previous error</span>
<span class="go">warning: build failed, waiting for other jobs to finish...</span>
<span class="go">error: build failed</span>
</code></pre></div>



<a name="286293354"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286293354" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286293354">(Jun 16 2022 at 00:39)</a>:</h4>
<p>With <code>cargo build -vv</code> part 1</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">Compiling cfg-if v1.0.0</span>
<span class="go">   Compiling libc v0.2.125</span>
<span class="go">   Compiling proc-macro2 v1.0.38</span>
<span class="go">   Compiling unicode-xid v0.2.3</span>
<span class="go">     Running `CARGO=/nix/store/mzckrnrszs2f1hrssb4cdqisjrrh87il-cargo-1.60.0-x86_64-unknown-linux-gnu/bin/cargo CARGO_CRATE_NAME=cfg_if CARGO_MANIFEST_DIR=/home/shikiyo/.cargo/registry/src/github.com-1ecc6299db9ec823/cfg-if-1.0.0 CARGO_PKG_AUTHORS='Alex Crichton &lt;alex@alexcrichton.com&gt;' CARGO_PKG_DESCRIPTION='A macro to ergonomically define an item depending on a large number of #[cfg]</span>
<span class="go">parameters. Structured like an if-else chain, the first matching branch is the</span>
<span class="go">item that gets emitted.</span>
<span class="go">' CARGO_PKG_HOMEPAGE='https://github.com/alexcrichton/cfg-if' CARGO_PKG_LICENSE=MIT/Apache-2.0 CARGO_PKG_LICENSE_FILE='' CARGO_PKG_NAME=cfg-if CARGO_PKG_REPOSITORY='https://github.com/alexcrichton/cfg-if' CARGO_PKG_VERSION=1.0.0 CARGO_PKG_VERSION_MAJOR=1 CARGO_PKG_VERSION_MINOR=0 CARGO_PKG_VERSION_PATCH=0 CARGO_PKG_VERSION_PRE='' LD_LIBRARY_PATH='/home/shikiyo/selfinstalled/roc/target/debug/deps:/nix/store/j3wy0pj7xcxdmj2sjlwsm825hynrbrmg-rust-default-1.60.0/lib:/nix/store/nk9n0g0gk856nnzcik0q7dwpqq49qjzz-pkg-config-wrapper-0.29.2/lib:/nix/store/lbccj93nnf77zxg3m9gmral5avbp64z2-gcc-10.3.0-lib/lib:/nix/store/5vqz6vp6cwlr94684583zzpwz5mvn9af-libffi-3.4.2/lib:/nix/store/9s8s7snpms482zm3z68aq91d184ynqma-ncurses-6.2/lib:/nix/store/p7syn79gwkjxcpqw2w79jw0qdlxr8s26-zlib-1.2.11/lib:/nix/store/9zb5qxnixld6bdvcp5isphi4qwscf6b7-valgrind-3.18.1/lib:/nix/store/xn34bjf4p7c4gcgxfsi8x09ikcsk55yh-vulkan-headers-1.2.189.1/lib:/nix/store/fjk8k473smpgxsqcs9lkdwayznlg6zgk-vulkan-loader-1.2.189.1/lib:/nix/store/qf6za190wgnq6i0k4yl75x84qcjlx05n-vulkan-tools-1.2.189.1/lib:/nix/store/qvifqgyfmq990sbgqn0blc6jx7429ypz-vulkan-validation-layers-1.2.189.1/lib:/nix/store/0pp8dys4m0j3d4idqjwzpk7xyapm0v8v-libX11-1.7.2/lib:/nix/store/bgilik8910381jk9vjmkkzmks00k271l-libXcursor-1.2.0/lib:/nix/store/n89p0dfm498v4zk1lv7pjrrfxqg26sqy-libXrandr-1.5.2/lib:/nix/store/17npsrav57vc90sn4034y51l0pndr1s5-libXi-1.8/lib:/nix/store/hc32k2zvhxmjg6280vs30kbqzgnfiwfd-libxcb-1.14/lib:/nix/store/ghj9i9xcadkrzlsfi1zr39pxwhgsqgrh-alsa-lib-1.2.5.1/lib' ROC_DEBUG_ALIAS_ANALYSIS=0 ROC_PRETTY_PRINT_ALIAS_CONTENTS=0 ROC_PRINT_IR_AFTER_REFCOUNT=0 ROC_PRINT_IR_AFTER_RESET_REUSE=0 ROC_PRINT_IR_AFTER_SPECIALIZATION=0 ROC_PRINT_LLVM_FN_VERIFICATION=0 ROC_PRINT_LOAD_LOG=0 ROC_PRINT_MISMATCHES=0 ROC_PRINT_UNIFICATIONS=0 ROC_VERIFY_RIGID_LET_GENERALIZED=0 ROC_WORKSPACE_DIR=/home/shikiyo/selfinstalled/roc/ rustc --crate-name cfg_if --edition=2018 /home/shikiyo/.cargo/registry/src/github.com-1ecc6299db9ec823/cfg-if-1.0.0/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type lib --emit=dep-info,metadata,link -C embed-bitcode=no -C debuginfo=2 -C metadata=56df745b5175507b -C extra-filename=-56df745b5175507b --out-dir /home/shikiyo/selfinstalled/roc/target/debug/deps -L dependency=/home/shikiyo/selfinstalled/roc/target/debug/deps --cap-lints warn '-C target-cpu=native'`</span>
<span class="go">     Running `CARGO=/nix/store/mzckrnrszs2f1hrssb4cdqisjrrh87il-cargo-1.60.0-x86_64-unknown-linux-gnu/bin/cargo CARGO_CRATE_NAME=build_script_build CARGO_MANIFEST_DIR=/home/shikiyo/.cargo/registry/src/github.com-1ecc6299db9ec823/libc-0.2.125 CARGO_PKG_AUTHORS='The Rust Project Developers' CARGO_PKG_DESCRIPTION='Raw FFI bindings to platform libraries like libc.</span>
<span class="go">GitHub</span>
</code></pre></div>



<a name="286293448"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286293448" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286293448">(Jun 16 2022 at 00:40)</a>:</h4>
<p>Part 2:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">GitHub - alexcrichton/cfg-if: A if/elif-like macro for Rust #[cfg] statements</span>

<span class="go">A if/elif-like macro for Rust #[cfg] statements. Contribute to alexcrichton/cfg-if development by creating an account on GitHub.</span>

<span class="go">' CARGO_PKG_HOMEPAGE='https://github.com/rust-lang/libc' CARGO_PKG_LICENSE='MIT OR Apache-2.0' CARGO_PKG_LICENSE_FILE='' CARGO_PKG_NAME=libc CARGO_PKG_REPOSITORY='https://github.com/rust-lang/libc' CARGO_PKG_VERSION=0.2.125 CARGO_PKG_VERSION_MAJOR=0 CARGO_PKG_VERSION_MINOR=2 CARGO_PKG_VERSION_PATCH=125 CARGO_PKG_VERSION_PRE='' LD_LIBRARY_PATH='/home/shikiyo/selfinstalled/roc/target/debug/deps:/nix/store/j3wy0pj7xcxdmj2sjlwsm825hynrbrmg-rust-default-1.60.0/lib:/nix/store/nk9n0g0gk856nnzcik0q7dwpqq49qjzz-pkg-config-wrapper-0.29.2/lib:/nix/store/lbccj93nnf77zxg3m9gmral5avbp64z2-gcc-10.3.0-lib/lib:/nix/store/5vqz6vp6cwlr94684583zzpwz5mvn9af-libffi-3.4.2/lib:/nix/store/9s8s7snpms482zm3z68aq91d184ynqma-ncurses-6.2/lib:/nix/store/p7syn79gwkjxcpqw2w79jw0qdlxr8s26-zlib-1.2.11/lib:/nix/store/9zb5qxnixld6bdvcp5isphi4qwscf6b7-valgrind-3.18.1/lib:/nix/store/xn34bjf4p7c4gcgxfsi8x09ikcsk55yh-vulkan-headers-1.2.189.1/lib:/nix/store/fjk8k473smpgxsqcs9lkdwayznlg6zgk-vulkan-loader-1.2.189.1/lib:/nix/store/qf6za190wgnq6i0k4yl75x84qcjlx05n-vulkan-tools-1.2.189.1/lib:/nix/store/qvifqgyfmq990sbgqn0blc6jx7429ypz-vulkan-validation-layers-1.2.189.1/lib:/nix/store/0pp8dys4m0j3d4idqjwzpk7xyapm0v8v-libX11-1.7.2/lib:/nix/store/bgilik8910381jk9vjmkkzmks00k271l-libXcursor-1.2.0/lib:/nix/store/n89p0dfm498v4zk1lv7pjrrfxqg26sqy-libXrandr-1.5.2/lib:/nix/store/17npsrav57vc90sn4034y51l0pndr1s5-libXi-1.8/lib:/nix/store/hc32k2zvhxmjg6280vs30kbqzgnfiwfd-libxcb-1.14/lib:/nix/store/ghj9i9xcadkrzlsfi1zr39pxwhgsqgrh-alsa-lib-1.2.5.1/lib' ROC_DEBUG_ALIAS_ANALYSIS=0 ROC_PRETTY_PRINT_ALIAS_CONTENTS=0 ROC_PRINT_IR_AFTER_REFCOUNT=0 ROC_PRINT_IR_AFTER_RESET_REUSE=0 ROC_PRINT_IR_AFTER_SPECIALIZATION=0 ROC_PRINT_LLVM_FN_VERIFICATION=0 ROC_PRINT_LOAD_LOG=0 ROC_PRINT_MISMATCHES=0 ROC_PRINT_UNIFICATIONS=0 ROC_VERIFY_RIGID_LET_GENERALIZED=0 ROC_WORKSPACE_DIR=/home/shikiyo/selfinstalled/roc/ rustc --crate-name build_script_build /home/shikiyo/.cargo/registry/src/github.com-1ecc6299db9ec823/libc-0.2.125/build.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type bin --emit=dep-info,link -C embed-bitcode=no -C debuginfo=2 --cfg 'feature="default"' --cfg 'feature="extra_traits"' --cfg 'feature="std"' -C metadata=e60b3e521702b755 -C extra-filename=-e60b3e521702b755 --out-dir /home/shikiyo/selfinstalled/roc/target/debug/build/libc-e60b3e521702b755 -L dependency=/home/shikiyo/selfinstalled/roc/target/debug/deps --cap-lints warn '-C target-cpu=native'`</span>
<span class="go">     Running CARGO=/nix/store/mzckrnrszs2f1hrssb4cdqisjrrh87il-cargo-1.60.0-x86_64-unknown-linux-gnu/bin/cargo CARGO_CRATE_NAME=build_script_build CARGO_MANIFEST_DIR=/home/shikiyo/.cargo/registry/src/github.com-1ecc6299db9ec823/proc-macro2-1.0.38 CARGO_PKG_AUTHORS='David Tolnay &lt;dtolnay@gmail.com&gt;:Alex Crichton &lt;alex@alexcrichton.com&gt;' CARGO_PKG_DESCRIPTION='A substitute implementation of the compiler'\''s `proc_macro API to decouple</span>
<span class="go">token-based libraries from the procedural macro use case.</span>
<span class="go">GitHub</span>

<span class="go">GitHub - rust-lang/libc: Raw bindings to platform APIs for Rust</span>

<span class="go">Raw bindings to platform APIs for Rust. Contribute to rust-lang/libc development by creating an account on GitHub.</span>

<span class="go">' CARGO_PKG_HOMEPAGE='' CARGO_PKG_LICENSE='MIT OR Apache-2.0' CARGO_PKG_LICENSE_FILE='' CARGO_PKG_NAME=proc-macro2 CARGO_PKG_REPOSITORY='https://github.com/dtolnay/proc-macro2' CARGO_PKG_VERSION=1.0.38 CARGO_PKG_VERSION_MAJOR=1 CARGO_PKG_VERSION_MINOR=0 CARGO_PKG_VERSION_PATCH=38 CARGO_PKG_VERSION_PRE='' LD_LIBRARY_PATH='/home/shikiyo/selfinstalled/roc/target/debug/deps:/nix/store/j3wy0pj7xcxdmj2sjlwsm825hynrbrmg-rust-default-1.60.0/lib:/nix/store/nk9n0g0gk856nnzcik0q7dwpqq49qjzz-pkg-config-wrapper-0.29.2/lib:/nix/store/lbccj93nnf77zxg3m9gmral5avbp64z2-gcc-10.3.0-lib/lib:/nix/store/5vqz6vp6cwlr94684583zzpwz5mvn9af-libffi-3.4.2/lib:/nix/store/9s8s7snpms482zm3z68aq91d184ynqma-ncurses-6.2/lib:/nix/store/p7syn79gwkjxcpqw2w79jw0qdlxr8s26-zlib-1.2.11/lib:/nix/store/9zb5qxnixld6bdvcp5isphi4qwscf6b7-valgrind-3.18.1/lib:/nix/store/xn34bjf4p7c4gcgxfsi8x09ikcsk55yh-vulkan-headers-1.2.189.1/lib:/nix/store/fjk8k473smpgxsqcs9lkdwayznlg6zgk-vulkan-loader-1.2.189.1/lib:/nix/store/qf6za190wgnq6i0k4yl75x84qcjlx05n-vulkan-tools-1.2.189.1/lib:/nix/store/qvifqgyfmq990sbgqn0blc6jx7429ypz-vulkan-validation-layers-1.2.189.1/lib:/nix/store/0pp8dys4m0j3d4idqjwzpk7xyapm0v8v-libX11-1.7.2/lib:/nix/store/bgilik8910381jk9vjmkkzmks00k271l-libXcursor-1.2.0/lib:/nix/store/n89p0dfm498v4zk1lv7pjrrfxqg26sqy-libXrandr-1.5.2/lib:/nix/store/17npsrav57vc90sn4034y51l0pndr1s5-libXi-1.8/lib:/nix/store/hc32k2zvhxmjg6280vs30kbqzgnfiwfd-libxcb-1.14/lib:/nix/store/ghj9i9xcadkrzlsfi1zr39pxwhgsqgrh-alsa-lib-1.2.5.1/lib' ROC_DEBUG_ALIAS_ANALYSIS=0 ROC_PRETTY_PRINT_ALIAS_CONTENTS=0 ROC_PRINT_IR_AFTER_REFCOUNT=0 ROC_PRINT_IR_AFTER_RESET_REUSE=0 ROC_PRINT_IR_AFTER_SPECIALIZATION=0 ROC_PRINT_LLVM_FN_VERIFICATION=0 ROC_PRINT_LOAD_LOG=0 ROC_PRINT_MISMATCHES=0 ROC_PRINT_UNIFICATIONS=0 ROC_VERIFY_RIGID_LET_GENERALIZED=0 ROC_WORKSPACE_DIR=/home/shikiyo/selfinstalled/roc/ rustc --crate-name build_script_build --edition=2018 /home/shikiyo/.cargo/registry/src/github.com-1ecc6299db9ec823/proc-macro2-1.0.38/build.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type bin --emit=dep-info,link -C embed-bitcode=no -C debuginfo=2 --cfg 'feature="default"' --cfg 'feature="proc-macro"' -C metadata=8ed3c46b652f6dfc -C extra-filename=-8ed3c46b652f6dfc --out-dir /home/shikiyo/selfinstalled/roc/target/debug/build/proc-macro2-8ed3c46b652f6dfc -L dependency=/home/shikiyo/selfinstalled/roc/target/debug/deps --cap-lints warn '-C target-cpu=native'`</span>
<span class="go">     Running `CARGO=/nix/store/mzckrnrszs2f1hrssb4cdqisjrrh87il-cargo-1.60.0-x86_64-unknown-linux-gnu/bin/cargo CARGO_CRATE_NAME=unicode_xid CARGO_MANIFEST_DIR=/home/shikiyo/.cargo/registry/src/github.com-1ecc6299db9ec823/unicode-xid-0.2.3 CARGO_PKG_AUTHORS='erick.tryzelaar &lt;erick.tryzelaar@gmail.com&gt;:kwantam &lt;kwantam@gmail.com&gt;:Manish Goregaokar &lt;manishsmail@gmail.com&gt;' CARGO_PKG_DESCRIPTION='Determine whether characters have the XID_Start</span>
<span class="go">or XID_Continue properties according to</span>
<span class="go">Unicode Standard Annex #31.</span>

<span class="go">' CARGO_PKG_HOMEPAGE='https://github.com/unicode-rs/unicode-xid' CARGO_PKG_LICENSE='MIT OR Apache-2.0' CARGO_PKG_LICENSE_FILE='' CARGO_PKG_NAME=unicode-xid CARGO_PKG_REPOSITORY='https://github.com/unicode-rs/unicode-xid' CARGO_PKG_VERSION=0.2.3 CARGO_PKG_VERSION_MAJOR=0 CARGO_PKG_VERSION_MINOR=2 CARGO_PKG_VERSION_PATCH=3 CARGO_PKG_VERSION_PRE='' LD_LIBRARY_PATH='/home/shikiyo/selfinstalled/roc/target/debug/deps:/nix/store/j3wy0pj7xcxdmj2sjlwsm825hynrbrmg-rust-default-1.60.0/lib:/nix/store/nk9n0g0gk856nnzcik0q7dwpqq49qjzz-pkg-config-wrapper-0.29.2/lib:/nix/store/lbccj93nnf77zxg3m9gmral5avbp64z2-gcc-10.3.0-lib/lib:/nix/store/5vqz6vp6cwlr94684583zzpwz5mvn9af-libffi-3.4.2/lib:/nix/store/9s8s7snpms482zm3z68aq91d184ynqma-ncurses-6.2/lib:/nix/store/p7syn79gwkjxcpqw2w79jw0qdlxr8s26-zlib-1.2.11/lib:/nix/store/9zb5qxnixld6bdvcp5isphi4qwscf6b7-valgrind-3.18.1/lib:/nix/store/xn34bjf4p7c4gcgxfsi8x09ikcsk55yh-vulkan-headers-1.2.189.1/lib:/nix/store/fjk8k473smpgxsqcs9lkdwayznlg6zgk-vulkan-loader-1.2.189.1/lib:/nix/store/qf6za190wgnq6i0k4yl75x84qcjlx05n-vulkan-tools-1.2.189.1/lib:/nix/store/qvifqgyfmq990sbgqn0blc6jx7429ypz-vulkan-validation-layers-1.2.189.1/lib:/nix/store/0pp8dys4m0j3d4idqjwzpk7xyapm0v8v-libX11-1.7.2/lib:/nix/store/bgilik8910381jk9vjmkkzmks00k271l-libXcursor-1.2.0/lib:/nix/store/n89p0dfm498v4zk1lv7pjrrfxqg26sqy-libXrandr-1.5.2/lib:/nix/store/17npsrav57vc90sn4034y51l0pndr1s5-libXi-1.8/lib:/nix/store/hc32k2zvhxmjg6280vs30kbqzgnfiwfd-libxcb-1.14/lib:/nix/store/ghj9i9xcadkrzlsfi1zr39pxwhgsqgrh-alsa-lib-1.2.5.1/lib' ROC_DEBUG_ALIAS_ANALYSIS=0 ROC_PRETTY_PRINT_ALIAS_CONTENTS=0 ROC_PRINT_IR_AFTER_REFCOUNT=0 ROC_PRINT_IR_AFTER_RESET_REUSE=0 ROC_PRINT_IR_AFTER_SPECIALIZATION=0 ROC_PRINT_LLVM_FN_VERIFICATION=0 ROC_PRINT_LOAD_LOG=0 ROC_PRINT_MISMATCHES=0 ROC_PRINT_UNIFICATIONS=0 ROC_VERIFY_RIGID_LET_GENERALIZED=0 ROC_WORKSPACE_DIR=/home/shikiyo/selfinstalled/roc/ rustc --crate-name unicode_xid /home/shikiyo/.cargo/registry/src/github.com-1ecc6299db9ec823/unicode-xid-0.2.3/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type lib --emit=dep-info,metadata,link -C embed-bitcode=no -C debuginfo=2 --cfg 'feature="default"' -C metadata=5409942a6294a17e -C extra-filename=-5409942a6294a17e --out-dir /home/shikiyo/selfinstalled/roc/target/debug/deps -L dependency=/home/shikiyo/selfinstalled/roc/target/debug/deps --cap-lints warn '-C target-cpu=native'`</span>
<span class="go">error: unknown codegen option:  target-cpu</span>

<span class="go">error: could not compile cfg-if due to previous error</span>
</code></pre></div>



<a name="286293453"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286293453" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286293453">(Jun 16 2022 at 00:40)</a>:</h4>
<p>Part 3:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">Caused by:</span>
<span class="go">  process didn't exit successfully: `CARGO=/nix/store/mzckrnrszs2f1hrssb4cdqisjrrh87il-cargo-1.60.0-x86_64-unknown-linux-gnu/bin/cargo CARGO_CRATE_NAME=cfg_if CARGO_MANIFEST_DIR=/home/shikiyo/.cargo/registry/src/github.com-1ecc6299db9ec823/cfg-if-1.0.0 CARGO_PKG_AUTHORS='Alex Crichton &lt;alex@alexcrichton.com&gt;' CARGO_PKG_DESCRIPTION='A macro to ergonomically define an item depending on a large number of #[cfg]</span>
<span class="go">  parameters. Structured like an if-else chain, the first matching branch is the</span>
<span class="go">  item that gets emitted.</span>
<span class="go">  ' CARGO_PKG_HOMEPAGE='https://github.com/alexcrichton/cfg-if' CARGO_PKG_LICENSE=MIT/Apache-2.0 CARGO_PKG_LICENSE_FILE='' CARGO_PKG_NAME=cfg-if CARGO_PKG_REPOSITORY='https://github.com/alexcrichton/cfg-if' CARGO_PKG_VERSION=1.0.0 CARGO_PKG_VERSION_MAJOR=1 CARGO_PKG_VERSION_MINOR=0 CARGO_PKG_VERSION_PATCH=0 CARGO_PKG_VERSION_PRE='' LD_LIBRARY_PATH='/home/shikiyo/selfinstalled/roc/target/debug/deps:/nix/store/j3wy0pj7xcxdmj2sjlwsm825hynrbrmg-rust-default-1.60.0/lib:/nix/store/nk9n0g0gk856nnzcik0q7dwpqq49qjzz-pkg-config-wrapper-0.29.2/lib:/nix/store/lbccj93nnf77zxg3m9gmral5avbp64z2-gcc-10.3.0-lib/lib:/nix/store/5vqz6vp6cwlr94684583zzpwz5mvn9af-libffi-3.4.2/lib:/nix/store/9s8s7snpms482zm3z68aq91d184ynqma-ncurses-6.2/lib:/nix/store/p7syn79gwkjxcpqw2w79jw0qdlxr8s26-zlib-1.2.11/lib:/nix/store/9zb5qxnixld6bdvcp5isphi4qwscf6b7-valgrind-3.18.1/lib:/nix/store/xn34bjf4p7c4gcgxfsi8x09ikcsk55yh-vulkan-headers-1.2.189.1/lib:/nix/store/fjk8k473smpgxsqcs9lkdwayznlg6zgk-vulkan-loader-1.2.189.1/lib:/nix/store/qf6za190wgnq6i0k4yl75x84qcjlx05n-vulkan-tools-1.2.189.1/lib:/nix/store/qvifqgyfmq990sbgqn0blc6jx7429ypz-vulkan-validation-layers-1.2.189.1/lib:/nix/store/0pp8dys4m0j3d4idqjwzpk7xyapm0v8v-libX11-1.7.2/lib:/nix/store/bgilik8910381jk9vjmkkzmks00k271l-libXcursor-1.2.0/lib:/nix/store/n89p0dfm498v4zk1lv7pjrrfxqg26sqy-libXrandr-1.5.2/lib:/nix/store/17npsrav57vc90sn4034y51l0pndr1s5-libXi-1.8/lib:/nix/store/hc32k2zvhxmjg6280vs30kbqzgnfiwfd-libxcb-1.14/lib:/nix/store/ghj9i9xcadkrzlsfi1zr39pxwhgsqgrh-alsa-lib-1.2.5.1/lib' ROC_DEBUG_ALIAS_ANALYSIS=0 ROC_PRETTY_PRINT_ALIAS_CONTENTS=0 ROC_PRINT_IR_AFTER_REFCOUNT=0 ROC_PRINT_IR_AFTER_RESET_REUSE=0 ROC_PRINT_IR_AFTER_SPECIALIZATION=0 ROC_PRINT_LLVM_FN_VERIFICATION=0 ROC_PRINT_LOAD_LOG=0 ROC_PRINT_MISMATCHES=0 ROC_PRINT_UNIFICATIONS=0 ROC_VERIFY_RIGID_LET_GENERALIZED=0 ROC_WORKSPACE_DIR=/home/shikiyo/selfinstalled/roc/ rustc --crate-name cfg_if --edition=2018 /home/shikiyo/.cargo/registry/src/github.com-1ecc6299db9ec823/cfg-if-1.0.0/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type lib --emit=dep-info,metadata,link -C embed-bitcode=no -C debuginfo=2 -C metadata=56df745b5175507b -C extra-filename=-56df745b5175507b --out-dir /home/shikiyo/selfinstalled/roc/target/debug/deps -L dependency=/home/shikiyo/selfinstalled/roc/target/debug/deps --cap-lints warn '-C target-cpu=native'` (exit status: 1)</span>
<span class="go">warning: build failed, waiting for other jobs to finish...</span>
<span class="go">error: build failed</span>
</code></pre></div>



<a name="286333433"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286333433" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286333433">(Jun 16 2022 at 10:36)</a>:</h4>
<p>I fixed the <code>unknown codegen option:  target-cpu</code> can you pull the latest version of the branch and try again?</p>



<a name="286341659"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286341659" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286341659">(Jun 16 2022 at 11:54)</a>:</h4>
<p><code>cargo build</code> and <code>cargo check</code> ran ok, but <code>cargo test</code> fails, maybe I shouldn't worry about it, this is part of the output (I changed the input files and flags given to cc for ...):</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">Compiling roc_cli v0.1.0 (/home/shikiyo/selfinstalled/roc/cli)</span>
<span class="go">   Compiling roc-bindgen v0.1.0 (/home/shikiyo/selfinstalled/roc/bindgen)</span>
<span class="go">error: linking with cc failed: exit status: 1</span>
<span class="go">  |</span>
<span class="go">  = note: "cc" "-m64" ...</span>
<span class="go">  = note: /nix/store/11szv8mf8ww7gv36kfgj56d68cx7chg3-gcc-wrapper-10.3.0/bin/ld: line 256: 36138 Killed                  /nix/store/wa59khxfvx6nf1wgdr5bjyyf9rdk23jc-binutils-2.35.2/bin/ld ${extraBefore+"${extraBefore[@]}"} ${params+"${params[@]}"} ${extraAfter+"${extraAfter[@]}"}</span>
<span class="go">          collect2: error: ld returned 137 exit status</span>


<span class="go">error: could not compile roc_cli due to previous error</span>
<span class="go">warning: build failed, waiting for other jobs to finish...</span>
<span class="go">error: build failed</span>
</code></pre></div>



<a name="286345253"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286345253" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286345253">(Jun 16 2022 at 12:29)</a>:</h4>
<p>Nice that build and check are working :)</p>
<blockquote>
<p>I changed the input files and flags given to cc for ...</p>
</blockquote>
<p>I'm not sure I follow completely, did you call something directly to recreate the error?</p>
<p>To fix things step by step, I recommend starting with building all tests <code>cargo test --locked --release --no-run</code>. If that works we can then try running them with <code>cargo test --locked --release</code>.</p>



<a name="286346529"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286346529" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286346529">(Jun 16 2022 at 12:41)</a>:</h4>
<p>I didn't change anything, I just didn't copied the full output (because it's too long). In the output there is something like <code>note : "cc" "-m64" ...</code> I put <code>... </code> instead of a bunch of files and flags</p>



<a name="286346865"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286346865" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286346865">(Jun 16 2022 at 12:44)</a>:</h4>
<p>Trying to make things clear: I ran <code>cargo test</code> and I didn't paste the full output.<br>
I'll try the step by step soon</p>



<a name="286348401"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286348401" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286348401">(Jun 16 2022 at 12:58)</a>:</h4>
<p>random observation <code>/nix/store/11szv8mf8ww7gv36kfgj56d68cx7chg3-gcc-wrapper-10.3.0/bin/ld</code> seems odd. It's definitely slow, <code>lld</code> is probably the better choice</p>



<a name="286348510"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286348510" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286348510">(Jun 16 2022 at 12:58)</a>:</h4>
<p>I have this in my <code>~/.cargo/config.toml</code> </p>
<div class="codehilite"><pre><span></span><code># Link with lld, per https://github.com/rust-lang/rust/issues/39915#issuecomment-538049306
# Use target-cpu=native, per https://deterministic.space/high-performance-rust.html
# rustflags = [&quot;-C&quot;, &quot;link-arg=-fuse-ld=lld&quot;, &quot;-C&quot;, &quot;target-cpu=native&quot;]
[target.x86_64-unknown-linux-gnu]
rustflags = [&quot;-C&quot;, &quot;link-arg=-fuse-ld=lld&quot;, &quot;-C&quot;, &quot;target-cpu=native&quot;]
``
</code></pre></div>



<a name="286348532"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286348532" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286348532">(Jun 16 2022 at 12:58)</a>:</h4>
<p>not sure if nix has some different way to configure it</p>



<a name="286350037"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286350037" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286350037">(Jun 16 2022 at 13:10)</a>:</h4>
<p>we could also consider trying <code>mold</code>, which claims to <a href="https://github.com/rui314/mold">outperform <code>lld</code></a> (and I think was created by the author of <code>lld</code> and/or <code>gold</code>?) and which <a href="https://search.nixos.org/packages?channel=22.05&amp;show=mold&amp;from=0&amp;size=50&amp;sort=relevance&amp;type=packages&amp;query=mold">has a nix package</a></p>



<a name="286350570"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286350570" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286350570">(Jun 16 2022 at 13:14)</a>:</h4>
<p>it <a href="https://github.com/rui314/mold/issues/189">doesn't support macOS</a> yet, but mac support seems to be pretty far along and actively developed</p>



<a name="286350631"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286350631" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286350631">(Jun 16 2022 at 13:14)</a>:</h4>
<p><a href="/user_uploads/22008/3perAORTPv7_LK_RdM27Ego4/Screen-Shot-2022-06-16-at-9.14.35-AM.png">Screen-Shot-2022-06-16-at-9.14.35-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/3perAORTPv7_LK_RdM27Ego4/Screen-Shot-2022-06-16-at-9.14.35-AM.png" title="Screen-Shot-2022-06-16-at-9.14.35-AM.png"><img src="/user_uploads/22008/3perAORTPv7_LK_RdM27Ego4/Screen-Shot-2022-06-16-at-9.14.35-AM.png"></a></div>



<a name="286350706"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286350706" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286350706">(Jun 16 2022 at 13:15)</a>:</h4>
<p><span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span> from the <a href="https://github.com/rui314/mold#how-to-use"><code>mold</code> readme</a></p>



<a name="286403827"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286403827" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286403827">(Jun 16 2022 at 19:48)</a>:</h4>
<p>I ran <code>cargo test --locked --release --no-run</code>, worked, but <code>cargo test --locked --release</code> failed in this test battery:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">Running tests/test_bindgen_cli.rs (target/release/deps/test_bindgen_cli-958923e56db382f9)</span>
<span class="go">Running cargo build --release on the cli crate before running the tests. This may take a bit!</span>

<span class="go">running 9 tests</span>
<span class="go">test bindgen_cli_run::all_fixtures_have_tests ... ok</span>
<span class="go">test bindgen_cli_run::enumeration ... ok</span>
<span class="go">test bindgen_cli_run::basic_record ... ok</span>
<span class="go">test bindgen_cli_run::basic_recursive_union ... ok</span>
<span class="go">test bindgen_cli_run::advanced_recursive_union ... ok</span>
<span class="go">test bindgen_cli_run::nested_record ... ok</span>
<span class="go">test bindgen_cli_run::union_without_padding ... ok</span>
<span class="go">test bindgen_cli_run::nullable_unwrapped ... ok</span>
<span class="go">test bindgen_cli_run::union_with_padding ... FAILED</span>

<span class="go">failures:</span>

<span class="go">---- bindgen_cli_run::union_with_padding stdout ----</span>
<span class="go">thread 'bindgen_cli_run::union_with_padding' panicked at 'bad status Out { stdout: "🔨 Rebuilding host...\n", stderr: "", status: ExitStatus(unix_wait_status(139)) }', bindgen/tests/test_bindgen_cli.rs:235:9</span>
<span class="go">note: run with RUST_BACKTRACE=1 environment variable to display a backtrace</span>


<span class="go">failures:</span>
<span class="go">    bindgen_cli_run::union_with_padding</span>

<span class="go">test result: FAILED. 8 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 11.44s</span>

<span class="go">error: test failed, to rerun pass '-p roc-bindgen --test test_bindgen_cli'</span>
</code></pre></div>



<a name="286403965"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286403965" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286403965">(Jun 16 2022 at 19:49)</a>:</h4>
<p>is that the only test out of all of <code>cargo test</code> that fails?</p>



<a name="286403984"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286403984" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286403984">(Jun 16 2022 at 19:49)</a>:</h4>
<p>e.g. if you do <code>cargo test --no-fail-fast</code> do you see other failures too?</p>



<a name="286414850"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286414850" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286414850">(Jun 16 2022 at 21:17)</a>:</h4>
<p>This battery failed too:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">running 37 tests</span>
<span class="go">test cli_run::all_examples_have_tests ... ok</span>
<span class="go">test cli_run::all_benchmarks_have_tests ... ok</span>
<span class="go">test cli_run::base64 ... FAILED</span>
<span class="go">test cli_run::astar ... FAILED</span>
<span class="go">test cli_run::cfold ... FAILED</span>
<span class="go">test cli_run::deriv ... FAILED</span>
<span class="go">test cli_run::closure ... FAILED</span>
<span class="go">test cli_run::cli ... ok</span>
<span class="go">test cli_run::exposed_not_defined ... ok</span>
<span class="go">test cli_run::effects ... FAILED</span>
<span class="go">test cli_run::format_check_folders ... ok</span>
<span class="go">test cli_run::fib ... FAILED</span>
<span class="go">test cli_run::format_check_good ... ok</span>
<span class="go">test cli_run::format_check_reformatting_needed ... ok</span>
<span class="go">test cli_run::breakout ... ok</span>
<span class="go">test cli_run::helloC ... ok</span>
<span class="go">test cli_run::helloSwift ... ok</span>
<span class="go">test cli_run::helloWeb ... ok</span>
<span class="go">test cli_run::helloWorld ... ok</span>
<span class="go">test cli_run::helloZig ... FAILED</span>
<span class="go">test cli_run::issue2279 ... FAILED</span>
<span class="go">test cli_run::known_type_error ... ok</span>
<span class="go">test cli_run::nqueens ... FAILED</span>
<span class="go">test cli_run::quicksort ... FAILED</span>
<span class="go">test cli_run::quicksort_app ... ok</span>
<span class="go">test cli_run::rbtree_ck ... FAILED</span>
<span class="go">test cli_run::rbtree_insert ... FAILED</span>
<span class="go">test cli_run::run_multi_dep_str_optimized ... FAILED</span>
<span class="go">test cli_run::run_multi_dep_str_unoptimized ... FAILED</span>
<span class="go">test cli_run::helloRust ... ok</span>
<span class="go">test cli_run::run_multi_dep_thunk_optimized ... FAILED</span>
<span class="go">test cli_run::run_multi_dep_thunk_unoptimized ... FAILED</span>
<span class="go">test cli_run::unknown_generates_with ... ok</span>
<span class="go">test cli_run::unused_import ... ok</span>
<span class="go">test cli_run::tui ... FAILED</span>
<span class="go">test cli_run::false_interpreter has been running for over 60 seconds</span>
<span class="go">test cli_run::gui has been running for over 60 seconds</span>
<span class="go">test cli_run::false_interpreter ... ok</span>
<span class="go">test cli_run::gui ... ok</span>
</code></pre></div>



<a name="286415227"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286415227" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286415227">(Jun 16 2022 at 21:20)</a>:</h4>
<p>Valgrind said something similar in may fails</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">valgrind stderr was: "</span>
<span class="go">valgrind:  Fatal error at startup: a function redirection</span>
<span class="go">valgrind:  which is mandatory for this platform-tool combination</span>
<span class="go">valgrind:  cannot be set up.  Details of the redirection are:</span>
<span class="go">valgrind:</span>
<span class="go">valgrind:  A must-be-redirected function</span>
<span class="go">valgrind:  whose name matches the pattern:      strlen</span>
<span class="go">valgrind:  in an object with soname matching:   ld-linux-x86-64.so.2</span>
<span class="go">valgrind:  was not found whilst processing</span>
<span class="go">valgrind:  symbols from the object with soname: ld-linux-x86-64.so.2</span>
<span class="go">valgrind:</span>
<span class="go">valgrind:  Possible fixes: (1, short term): install glibc's debuginfo</span>
<span class="go">valgrind:  package on this machine.  (2, longer term): ask the packagers</span>
<span class="go">valgrind:  for your Linux distribution to please in future ship a non-</span>
<span class="go">valgrind:  stripped ld.so (or whatever the dynamic linker .so is called)</span>
<span class="go">valgrind:  that exports the above-named function using the standard</span>
<span class="go">valgrind:  calling conventions for this platform.  The package you need</span>
<span class="go">valgrind:  to install for fix (1) is called</span>
<span class="go">valgrind:</span>
<span class="go">valgrind:    On Debian, Ubuntu:                 libc6-dbg</span>
<span class="go">valgrind:    On SuSE, openSuSE, Fedora, RHEL:   glibc-debuginfo</span>
<span class="go">valgrind:</span>
<span class="go">valgrind:  Note that if you are debugging a 32 bit process on a</span>
<span class="go">valgrind:  64 bit system, you will need a corresponding 32 bit debuginfo</span>
<span class="go">valgrind:  package (e.g. libc6-dbg:i386).</span>
<span class="go">valgrind:</span>
<span class="go">valgrind:  Cannot continue -- exiting now.  Sorry.</span>

<span class="go">"', cli/tests/cli_run.rs:200:29</span>
</code></pre></div>



<a name="286469407"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286469407" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286469407">(Jun 17 2022 at 10:02)</a>:</h4>
<p>I was able to reproduce these issues on my archlinux VM. I'll look into solving them in the coming days.</p>



<a name="286477073"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286477073" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286477073">(Jun 17 2022 at 11:37)</a>:</h4>
<p>does the fix suggested by valgrind work?</p>



<a name="286478092"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286478092" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286478092">(Jun 17 2022 at 11:48)</a>:</h4>
<p>I haven't tried it yet</p>



<a name="286505697"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286505697" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Maximilian E <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286505697">(Jun 17 2022 at 15:32)</a>:</h4>
<p>It's been a while since I've built Roc from source and after upgrading zig &amp; LLVM it seems to me that Roc should build, but I still get this error:</p>
<div class="codehilite"><pre><span></span><code> Compiling roc_alias_analysis v0.1.0 (/mnt/d/dev/roc-lang/compiler/alias_analysis)
   Compiling roc_gen_dev v0.1.0 (/mnt/d/dev/roc-lang/compiler/gen_dev)
error[E0658]: use of unstable library feature &#39;available_parallelism&#39;
    --&gt; compiler/load_internal/src/file.rs:1276:19
     |
1276 |             match std::thread::available_parallelism().map(|v| v.get()) {
     |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = note: see issue #74479 &lt;https://github.com/rust-lang/rust/issues/74479&gt; for more information

   Compiling roc_gen_llvm v0.1.0 (/mnt/d/dev/roc-lang/compiler/gen_llvm)
For more information about this error, try `rustc --explain E0658`.
error: could not compile `roc_load_internal` due to previous error
warning: build failed, waiting for other jobs to finish...
error: build failed
</code></pre></div>
<p>Is this new or am I doing something wrong?</p>



<a name="286506528"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286506528" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286506528">(Jun 17 2022 at 15:38)</a>:</h4>
<p>You may not be in the right rust version, we're on 1.60. What is the output of <code>cargo --version</code>?</p>



<a name="286507130"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286507130" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286507130">(Jun 17 2022 at 15:42)</a>:</h4>
<p>We have a file called <code>rust-toolchain.toml</code> to prevent this automatically, but the error really does make it look like you're using an older rust version.</p>



<a name="286522070"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286522070" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Maximilian E <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286522070">(Jun 17 2022 at 17:49)</a>:</h4>
<p>I get this: <code>cargo --version
cargo 1.58.0 (f01b232bc 2022-01-19)</code><br>
You're right, I'll need to upgrade rust too, thanks!</p>



<a name="286950740"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286950740" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286950740">(Jun 21 2022 at 17:48)</a>:</h4>
<p><span class="user-mention" data-user-id="506120">@Hashi364</span> <code>sudo pacman -Syu debuginfod</code> should fix all the valgrind errors. I'll make an issue for the <code>union_without_padding</code> error, I'm probably not the best person to fix that one <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="286979151"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/286979151" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#286979151">(Jun 21 2022 at 21:55)</a>:</h4>
<p>Installing <code>debuginfod</code> didn't fix valgrind errors, shouldn't I put it in <code>flakes.nix</code> or something like it?</p>



<a name="287019714"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/287019714" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#287019714">(Jun 22 2022 at 08:19)</a>:</h4>
<p>Hmm, no, it can't go in nix flakes, there is no nix package for debuginfod.<br>
I executed <code>sudo pacman -Syu debuginfod</code> after <code>nix develop</code>, not sure if it would make a difference but can you try it like that?</p>



<a name="287029554"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/287029554" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#287029554">(Jun 22 2022 at 09:47)</a>:</h4>
<p>If that does not work, I'd also try adding <code>DEBUGINFOD_URLS="https://debuginfod.archlinux.org/"</code>below <code>LLVM_SYS_130_PREFIX = ...</code> in flake.nix (exit from the nix shell if you already did <code>nix develop</code>) and run <code>nix develop</code> again.</p>



<a name="287035326"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/287035326" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#287035326">(Jun 22 2022 at 10:47)</a>:</h4>
<p>Oh, after <code>nix develop</code>, I'll try it</p>



<a name="287036980"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/287036980" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hashi364 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#287036980">(Jun 22 2022 at 11:04)</a>:</h4>
<p>It worked, now only <code>bindgen_cli_run::union_with_padding</code></p>



<a name="287038266"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/287038266" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#287038266">(Jun 22 2022 at 11:19)</a>:</h4>
<p>Awesome <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> thanks for your patience :)</p>



<a name="287042505"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/287042505" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#287042505">(Jun 22 2022 at 11:59)</a>:</h4>
<p>interestingly, we recently got a CI failure that I can't explain for <code>union_without_padding</code> (so, similar but not quite the same test) after a code change that should be totally unrelated:</p>
<p><a href="https://github.com/rtfeldman/roc/runs/6992258439?check_suite_focus=true">https://github.com/rtfeldman/roc/runs/6992258439?check_suite_focus=true</a></p>



<a name="287042536"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/could%20not%20compile/near/287042536" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/could.20not.20compile.html#287042536">(Jun 22 2022 at 11:59)</a>:</h4>
<p>I can't reproduce it locally on my M1, but I re-ran out on CI and it failed again</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>