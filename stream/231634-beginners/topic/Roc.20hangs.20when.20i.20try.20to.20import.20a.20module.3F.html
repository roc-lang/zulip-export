<html>
<head><meta charset="utf-8"><title>Roc hangs when i try to import a module? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html">Roc hangs when i try to import a module?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="405917861"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405917861" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405917861">(Dec 04 2023 at 21:54)</a>:</h4>
<p>I tried splitting my advent of code code into a module, to try and make one program that runs all of my solutions.<br>
I made an interface of todays solve and called that from a main.roc in the same folder, and that worked fine.<br>
Then I made a main.roc in the parent folder, and try to import that same interface (making sure to rename it according to its' path)- but now when I call <code>roc dev</code> in my repo root, roc just hangs.<br>
I tried letting it run for several minutes but ehhh.. I'm pretty convinced it's not getting anywhere. It's less than 200 lines of code.</p>
<p>Repo to reproduce (on the <code>modularize</code> branch):<br>
<a href="https://gitlab.com/AsbjornOlling/aoc2023/-/tree/modularize">https://gitlab.com/AsbjornOlling/aoc2023/-/tree/modularize</a></p>
<p>It hangs when I run <code>roc dev</code> in the repo root using the <code>roc</code> from the nix flake shell (should be latest <code>main</code>).</p>



<a name="405918219"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405918219" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405918219">(Dec 04 2023 at 21:57)</a>:</h4>
<p>If I comment out <code>D04.Solution</code> from the imports in <code>:/main.roc</code>, it runs fine.</p>



<a name="405918344"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405918344" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405918344">(Dec 04 2023 at 21:58)</a>:</h4>
<p>Feels like a bug in resolving imports? Let me know if I should just open a github issue.</p>



<a name="405918466"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405918466" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405918466">(Dec 04 2023 at 21:59)</a>:</h4>
<p>does <code>roc build</code> hang as well?</p>



<a name="405918669"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405918669" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405918669">(Dec 04 2023 at 22:00)</a>:</h4>
<p>yup. <code>roc build</code> as well</p>



<a name="405918699"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405918699" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405918699">(Dec 04 2023 at 22:00)</a>:</h4>
<p>they all hang while consuming 100% of one core</p>



<a name="405918814"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405918814" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405918814">(Dec 04 2023 at 22:01)</a>:</h4>
<p>...and actually the <code>roc_ls</code> language server that emacs is running hangs as well, using 100% of one core</p>



<a name="405919282"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405919282" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405919282">(Dec 04 2023 at 22:04)</a>:</h4>
<p><code>roc test D04/Solution.roc</code> hangs as well. so probably something funky in the interface file</p>



<a name="405919539"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405919539" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405919539">(Dec 04 2023 at 22:06)</a>:</h4>
<p>cool. Sounds like a proper bug. I wonder what kind of silly thing we are doing/looping on the imports</p>



<a name="405919611"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405919611" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405919611">(Dec 04 2023 at 22:07)</a>:</h4>
<p>Can you file an issue. If possible a minimal repro is always amazing, but filing everything is also great.</p>



<a name="405920742"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405920742" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405920742">(Dec 04 2023 at 22:17)</a>:</h4>
<p>I'll file an issue <span aria-label="sparkles" class="emoji emoji-2728" role="img" title="sparkles">:sparkles:</span> </p>
<p>I started ripping away code, and got down to this minimal repro:</p>
<p>in a folder with only this file, running <code>roc test Solution.roc</code></p>
<div class="codehilite"><pre><span></span><code>interface Solution
    exposes [a]
    imports [
        parser.Core
    ]

a = 2
</code></pre></div>



<a name="405921355"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405921355" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405921355">(Dec 04 2023 at 22:23)</a>:</h4>
<p>I filed <a href="https://github.com/roc-lang/roc/issues/6185">#6185</a></p>



<a name="405921520"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405921520" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405921520">(Dec 04 2023 at 22:24)</a>:</h4>
<p>Try <code>roc check</code>. I have seen that work when the other commands hang.</p>



<a name="405925419"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/405925419" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#405925419">(Dec 04 2023 at 22:33)</a>:</h4>
<p><code>roc check</code>also hangs</p>



<a name="406031061"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/406031061" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#406031061">(Dec 05 2023 at 10:58)</a>:</h4>
<p>FWIW, I tried going back in the roc repo history to see how far back I can reproduce this bug, and the bug seems to be older than one year, and probably also older than the first commit where <code>nix build</code> works in the repo flake <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="406031611"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/406031611" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asbjørn Olling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#406031611">(Dec 05 2023 at 11:01)</a>:</h4>
<p>I wanted to try and see if I could fix it myself (I probably can't, but I'll give it a shot!), by finding a commit where it works, and doing a <code>git bisect</code> dance from there. But I got stuck trying to build old versions of roc.</p>



<a name="406109314"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/406109314" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#406109314">(Dec 05 2023 at 17:19)</a>:</h4>
<p>It probably is just a parser assumption that is wrong from when the parse was first written</p>
<p>...actually, it hangs, so probably an issue in <code>file.rs</code> and the loading logic.</p>



<a name="406109505"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Roc%20hangs%20when%20i%20try%20to%20import%20a%20module%3F/near/406109505" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Roc.20hangs.20when.20i.20try.20to.20import.20a.20module.3F.html#406109505">(Dec 05 2023 at 17:20)</a>:</h4>
<p>Probably the best way to figure out what is going on:</p>
<ol>
<li>debug build compiler</li>
<li>run the command with <code>gdb</code> or <code>lldb</code></li>
<li>ctrl + c after a bit of wait</li>
<li><code>bt</code> to get a backtrace</li>
<li>start debugging from that backtrace. Something in that chain is probably the issue.</li>
</ol>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>