<html>
<head><meta charset="utf-8"><title>Where is error in Roc Tasks · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html">Where is error in Roc Tasks</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="411619793"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411619793" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrey Stegno <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411619793">(Jan 07 2024 at 18:00)</a>:</h4>
<p>Hey guys. My friend advised me to look into roclang. As far he knows I love live script. I would recommend to look into live script and check some ideas too.</p>



<a name="411619875"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411619875" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrey Stegno <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411619875">(Jan 07 2024 at 18:01)</a>:</h4>
<p><a href="http://livescript.net">http://livescript.net</a> lots of identical concepts here</p>



<a name="411620374"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411620374" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrey Stegno <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411620374">(Jan 07 2024 at 18:06)</a>:</h4>
<p>but the difference in live script I can make err, data &lt;- func ....</p>



<a name="411620379"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411620379" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrey Stegno <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411620379">(Jan 07 2024 at 18:06)</a>:</h4>
<p>here  url &lt;- File.readUtf8 path |&gt; Task.await</p>



<a name="411620387"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411620387" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrey Stegno <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411620387">(Jan 07 2024 at 18:06)</a>:</h4>
<p>where is err?</p>



<a name="411621531"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411621531" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411621531">(Jan 07 2024 at 18:20)</a>:</h4>
<p>5 messages were moved here from <a class="stream-topic" data-stream-id="304641" href="/#narrow/stream/304641-ideas/topic/import.20.2B.20decode.3F">#ideas &gt; import + decode?</a> by <span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span>.</p>



<a name="411621560"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411621560" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411621560">(Jan 07 2024 at 18:20)</a>:</h4>
<p><code>Task.await</code> only maps the happy case.</p>



<a name="411621576"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411621576" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411621576">(Jan 07 2024 at 18:21)</a>:</h4>
<p>It will just let all of the error cases accumulate together.</p>



<a name="411621594"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411621594" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411621594">(Jan 07 2024 at 18:21)</a>:</h4>
<p><code>Task.attempt</code> would instead give a result for handling the error immediately.</p>



<a name="411623472"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411623472" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karakatiza <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411623472">(Jan 07 2024 at 18:45)</a>:</h4>
<p><a href="https://www.roc-lang.org/packages/basic-cli/Task#await">https://www.roc-lang.org/packages/basic-cli/Task#await</a><br>
Error value type union is the second member of Task type (<code>b</code> in the example <code>Task c b</code>)<br>
In the case of an error there are multiple ways to handle / change the error type:<br>
<code>onErr : Task a b, (b -&gt; Task a c) -&gt; Task a c</code>  lets you use a handler function that takes an error type and returns a task, to process the error case with side effects and produce either successful result or an error of different type;<br>
<code>attempt : Task a b, (Result a b -&gt; Task c d) -&gt; Task c</code> lets you process both the happy case and error case in the same function;<br>
With <code>mapErr : Task c a, (a -&gt; b) -&gt; Task c b</code> you simply convert the type of your error value without handling it</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code>task =
  data &lt;- File.readUtf8 (Path.fromStr &quot;myfile.txt&quot;) |&gt; Task.await
  # At this point you have the type Task Str [ReadErr]
  File.write (Path.fromStr &quot;output.json&quot;) { some: &quot;json stuff&quot; } Json.toCompactUtf8
  # At this point you have the type Task {} [ReadErr, WriteErr]
task2 = task |&gt; Task.onErr \err -&gt; when err is
  ReadErr -&gt; Stderr.line &quot;Something went wrong!&quot; # We decide to only handle ReadErr
  e -&gt; Task.err e # We return a task that returns all other errors as is
# Type of task2 is Task {} [WriteErr]
</code></pre></div>
<p>In summary, the errors can be immediately handled like in LiveScript, but usually are accumulated until a later error handling</p>



<a name="411624038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411624038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karakatiza <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411624038">(Jan 07 2024 at 18:52)</a>:</h4>
<p>LiveScript-style, above could be changed to:</p>
<div class="codehilite"><pre><span></span><code>data &lt;- File.readUtf8 (Path.fromStr &quot;myfile.txt&quot;)
  |&gt; Task.onErr (\e -&gt; readErrToStr e |&gt; Stderr.line)
  |&gt; Task.await
# At this point you have the type Task Str []
{} &lt;- File.write (Path.fromStr &quot;output.json&quot;) { some: &quot;json stuff&quot; } Json.toCompactUtf8
  |&gt; Task.onErr (\e -&gt; writeErrToStr e |&gt; Stderr.line)
  |&gt; Task.await
# At this point you have the type Task {} []
</code></pre></div>



<a name="411628885"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Where%20is%20error%20in%20Roc%20Tasks/near/411628885" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karakatiza <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Where.20is.20error.20in.20Roc.20Tasks.html#411628885">(Jan 07 2024 at 20:08)</a>:</h4>
<p>You don't have <code>err, data &lt;- task</code> in Roc because this syntax combines an error case and a happy case in a single code path where both <code>err</code> and <code>data</code> are nullable. This is not considered nice so there are different patterns for error handling.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>