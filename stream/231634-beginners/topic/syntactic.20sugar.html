<html>
<head><meta charset="utf-8"><title>syntactic sugar · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html">syntactic sugar</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="312379104"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312379104" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312379104">(Nov 26 2022 at 17:46)</a>:</h4>
<p>it is maybe to much to ask but what is the reasoning behind "syntactic sugar" (task related  syntax) I see couple of ways to write the same thing,  isn't this to much? It creates confusion and always adds additional effort to decipher code  when someone has different style. Maybe focus on  1 max  2 ways to express stuff, just pick the nicer form and  drop the others(I ask in general terms  not like I expect  to invalidate already allowed syntax all the sudden)</p>



<a name="312382894"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312382894" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312382894">(Nov 26 2022 at 18:24)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="568088">@Artur Swiderski</span>, that sounds reasonable :)<br>
Can you give a specific example of a case and all the ways it can be written? That way we can perhaps provide the reason why all the options exist.</p>



<a name="312384311"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312384311" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312384311">(Nov 26 2022 at 18:40)</a>:</h4>
<div class="codehilite"><pre><span></span><code>
</code></pre></div>

<hr>
<p>await (Stdout.line "Type something press Enter:") \_ -&gt;<br>
        await Stdin.line \text -&gt;<br>
            Stdout.line "You just entered: \(text)"</p>
<hr>
<div class="codehilite"><pre><span></span><code>_ &lt;- await (Stdout.line &quot;Type something press Enter:&quot;)
text &lt;- await Stdin.line

Stdout.line &quot;You just entered: \(text)&quot;
</code></pre></div>

<hr>
<div class="codehilite"><pre><span></span><code>    cwd &lt;- Env.cwd |&gt; Task.await
    cwdStr = Path.display cwd

    _ &lt;- Stdout.line &quot;cwd: \(cwdStr)&quot; |&gt; Task.await
    dirEntries &lt;- Dir.list cwd |&gt; Task.await
    contentsStr = Str.joinWith (List.map dirEntries Path.display) &quot;\n    &quot;

    _ &lt;- Stdout.line &quot;Directory contents:\n    \(contentsStr)\n&quot; |&gt; Task.await
    _ &lt;- Stdout.line &quot;Writing a string to out.txt&quot; |&gt; Task.await
    _ &lt;- File.writeUtf8 path &quot;a string!&quot; |&gt; Task.await
</code></pre></div>



<a name="312384350"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312384350" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312384350">(Nov 26 2022 at 18:40)</a>:</h4>
<p>similar stuff  but  slightly different  syntax every time</p>



<a name="312384657"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312384657" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312384657">(Nov 26 2022 at 18:44)</a>:</h4>
<p>Yep. Backpassing and pipelining definitely give multiple options to write things. That said, they are both very important for readable code in certain cases. Maybe we need to teach them more directly.</p>



<a name="312385036"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312385036" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312385036">(Nov 26 2022 at 18:48)</a>:</h4>
<p>Without backpassing, <code>&lt;-</code>, you get stuck with the problem of nesting. Every lambda leads to another indentation level.</p>
<div class="codehilite"><pre><span></span><code>Task.await x (\a -&gt;
    Task.await y (\b -&gt;
        Task.await z (\c -&gt;
            ...
        )
    )
)
</code></pre></div>
<p>Becomes</p>
<div class="codehilite"><pre><span></span><code>a &lt;- Task.await x
b &lt;- Task.await y
c &lt;- Task.await z
</code></pre></div>
<p>Of course you still want regular lambda syntax for a few reason. (Function definition, one offs, lambdas that don't take up the rest of the scope).</p>



<a name="312385646"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312385646" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312385646">(Nov 26 2022 at 18:55)</a>:</h4>
<p>_ &lt;- File.writeUtf8 path "a string!" |&gt; Task.await<br>
intuitively I would expect this way 
_ -&gt; File.writeUtf8 path "a string!" |&gt; Task.await<br>
because when<br>
a &lt;- Task.await x<br>
b &lt;- Task.await y<br>
works how it works,
_ &lt;- File.writeUtf8 path "a string!" |&gt; Task.await becomes confusing</p>



<a name="312385880"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312385880" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312385880">(Nov 26 2022 at 18:57)</a>:</h4>
<p>Pipelining, <code>|&gt;</code>, on the other hand has a more limited use case where it is quite important. It is extremely useful for the readability of data transformation pipelines.</p>
<div class="codehilite"><pre><span></span><code>List.map (List.keepIf (List.reverse (List.walk data 0 Num.sub)) (\x -&gt; x &gt; 7)) (\x -&gt; x - 2)
</code></pre></div>
<p>or</p>
<div class="codehilite"><pre><span></span><code>data2 = List.map data  \x -&gt; x - 2
data3 = List.keepIf data2 \x -&gt; x &gt; 7
data4 = List.reverse data3
result = List.walk data4 0 Num.sub
</code></pre></div>
<p>Becomes</p>
<div class="codehilite"><pre><span></span><code>data
    |&gt; List.map \x -&gt; x - 2
    |&gt; List.keepIf \x -&gt; x &gt; 7
    |&gt; List.reverse
    |&gt; List.walk 0 Num.sub
</code></pre></div>



<a name="312386255"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312386255" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312386255">(Nov 26 2022 at 19:01)</a>:</h4>
<p>The syntax that you find confusing is when pipelining is mixed with backpassing. This syntax is less necessary, but is allowed due to mixing the two above described syntaxes.</p>
<p><code>_ &lt;- File.writeUtf8 path "a string!" |&gt; Task.await</code> is a way to move the relatively unimportant and repetitive <code>Task.await</code> to the end of the line. That way you can just read the operation that is happening <code>File.writeUtf8</code>. So it is a minor enhancement to readability if you know how it desugars, but I totally get that it is a strange syntax on its own.</p>



<a name="312386397"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312386397" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312386397">(Nov 26 2022 at 19:02)</a>:</h4>
<p>I guess you would find it more readable with parenthesis:<br>
<code>_ &lt;- (File.writeUtf8 path "a string!" |&gt; Task.await)</code></p>



<a name="312386690"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312386690" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312386690">(Nov 26 2022 at 19:05)</a>:</h4>
<p>Looking specifically at desugaring it, I see two ways it could be done (I am not 100% sure which ordering happens in the compiler).<br>
way 1 (pipeline desugars before backpassing):<br>
<code>_ &lt;- File.writeUtf8 path "a string!" |&gt; Task.await</code><br>
to<br>
<code>_ &lt;- Task.await (File.writeUtf8 path "a string!")</code><br>
to<br>
<code>Task.await (File.writeUtf8 path "a string!") \_ -&gt; ...</code></p>
<p>way 2 (backpassing desugars before pipelining):<br>
<code>_ &lt;- File.writeUtf8 path "a string!" |&gt; Task.await</code><br>
to<br>
<code>File.writeUtf8 path "a string!" |&gt; Task.await \_ -&gt; ...</code><br>
to<br>
<code>Task.await (File.writeUtf8 path "a string!") \_ -&gt; ...</code></p>



<a name="312386789"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312386789" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312386789">(Nov 26 2022 at 19:06)</a>:</h4>
<p>Hopefully that at least helps to explain what is happening some and the reason why both of the syntaxes exist. I totally understand that how they combine may be super strange especially when first learning</p>



<a name="312392880"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312392880" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312392880">(Nov 26 2022 at 20:17)</a>:</h4>
<p>interestingly, "fewer ways to do the same thing" is an argument I hadn't previously considered for why <code>with</code> might be a good idea:</p>
<div class="codehilite" data-code-language="Swift"><pre><span></span><code><span class="n">with</span> <span class="n">Task</span><span class="p">.</span><span class="k">await</span>
    <span class="n">cwd</span> <span class="o">&lt;-</span> <span class="n">Env</span><span class="p">.</span><span class="n">cwd</span>
    <span class="n">cwdStr</span> <span class="p">=</span> <span class="n">Path</span><span class="p">.</span><span class="n">display</span> <span class="n">cwd</span>

    <span class="kc">_</span> <span class="o">&lt;-</span> <span class="n">Stdout</span><span class="p">.</span><span class="n">line</span> <span class="s">"cwd: </span><span class="si">\(</span><span class="n">cwdStr</span><span class="si">)</span><span class="s">"</span>
    <span class="n">dirEntries</span> <span class="o">&lt;-</span> <span class="n">Dir</span><span class="p">.</span><span class="n">list</span> <span class="n">cwd</span>
    <span class="n">contentsStr</span> <span class="p">=</span> <span class="n">Str</span><span class="p">.</span><span class="n">joinWith</span> <span class="p">(</span><span class="n">List</span><span class="p">.</span><span class="bp">map</span> <span class="n">dirEntries</span> <span class="n">Path</span><span class="p">.</span><span class="n">display</span><span class="p">)</span> <span class="s">"</span><span class="se">\n</span><span class="s">    "</span>

    <span class="kc">_</span> <span class="o">&lt;-</span> <span class="n">Stdout</span><span class="p">.</span><span class="n">line</span> <span class="s">"Directory contents:</span><span class="se">\n</span><span class="s">    </span><span class="si">\(</span><span class="n">contentsStr</span><span class="si">)</span><span class="se">\n</span><span class="s">"</span>
    <span class="kc">_</span> <span class="o">&lt;-</span> <span class="n">Stdout</span><span class="p">.</span><span class="n">line</span> <span class="s">"Writing a string to out.txt"</span>
    <span class="kc">_</span> <span class="o">&lt;-</span> <span class="n">File</span><span class="p">.</span><span class="n">writeUtf8</span> <span class="n">path</span> <span class="s">"a string!"</span>
</code></pre></div>



<a name="312393087"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312393087" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312393087">(Nov 26 2022 at 20:20)</a>:</h4>
<p>How would that make fewer ways to do the same thing? That just adds another way.</p>



<a name="312395927"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312395927" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312395927">(Nov 26 2022 at 21:00)</a>:</h4>
<p>oh I'm thinking add that and remove backpassing - I don't think we need both</p>



<a name="312397183"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312397183" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312397183">(Nov 26 2022 at 21:16)</a>:</h4>
<p>Oh, but then you run into the issue of mixed functions. <code>List.mapTry</code>, <code>Result.try</code>, <code>List.map</code>, etc. All of them benefit from backpassing. <code>with</code> limits only one function to benefiting from backpassing. You lose all of the adhoc uses.</p>



<a name="312397290"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312397290" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312397290">(Nov 26 2022 at 21:18)</a>:</h4>
<p>Task and result might be avoided together, but lists and tasks would be used together. So that could still likely benefit from backpassing.</p>



<a name="312397375"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312397375" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312397375">(Nov 26 2022 at 21:19)</a>:</h4>
<p>hm, what would an example of that mixed-use look like? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="312397408"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312397408" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312397408">(Nov 26 2022 at 21:20)</a>:</h4>
<p>I don't know of any where the types actually work out, but I could be missing something!</p>



<a name="312405771"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312405771" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312405771">(Nov 26 2022 at 23:23)</a>:</h4>
<p>I guess we did discuss this some before and it is more one off use rather than mixed use. That or nested use. I'll try to type up an example later, but in general, i might nest the scope, use Result.try with backpassing within the nested scope and then continue on from that. This would require double nesting for a use case like that and would be very verbose.</p>



<a name="312406427"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312406427" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312406427">(Nov 26 2022 at 23:32)</a>:</h4>
<p>Oh, what about something like this:</p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">resultHttp</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="n">row</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="k">try</span><span class="w"> </span><span class="n">rowResultHttp</span><span class="w"></span>
<span class="w">    </span><span class="n">todoResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loadRowToTodo</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="n">baseUrl</span><span class="w"></span>
<span class="w">    </span><span class="n">todoResultHttp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapErrToHttp</span><span class="w"> </span><span class="n">todoResult</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="mi">500</span><span class="w"></span>
<span class="w">    </span><span class="n">todo</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="n">todoResultHttp</span><span class="w"></span>
<span class="w">    </span><span class="n">todoStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">writeTodo</span><span class="w"> </span><span class="s2">""</span><span class="w"> </span><span class="n">todo</span><span class="w"></span>
<span class="w">    </span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="n">todoStr</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Uses <code>Result.try</code> and <code>Result.map</code> (Theoretically this would also apply to <code>Task.await</code> and <code>Task.map</code>). I don't think it would work with <code>with</code>. Or if it did, it would be something like:</p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">resultHttp</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="n">with</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="k">try</span><span class="w"></span>
<span class="w">        </span><span class="n">row</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rowResultHttp</span><span class="w"></span>
<span class="w">        </span><span class="n">todoResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loadRowToTodo</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="n">baseUrl</span><span class="w"></span>
<span class="w">        </span><span class="n">todoResultHttp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapErrToHttp</span><span class="w"> </span><span class="n">todoResult</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="mi">500</span><span class="w"></span>
<span class="w">        </span><span class="n">with</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="n">map</span><span class="w"></span>
<span class="w">            </span><span class="n">todo</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">todoResultHttp</span><span class="w"></span>
<span class="w">            </span><span class="c1"># TODO replace this with json encoding</span><span class="w"></span>
<span class="w">            </span><span class="n">todoStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">writeTodo</span><span class="w"> </span><span class="s2">""</span><span class="w"> </span><span class="n">todo</span><span class="w"></span>
<span class="w">            </span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="n">todoStr</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="312406699"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312406699" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312406699">(Nov 26 2022 at 23:36)</a>:</h4>
<p>I think in general it makes any one off or nested uses quite verbose. So I think regular backpassing will still have value.</p>



<a name="312406807"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312406807" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312406807">(Nov 26 2022 at 23:38)</a>:</h4>
<p>For context, here is a full chunk of code with a mix of backpassing functions (and one <code>Result.map</code> that couldn't use backpassing due to the type problem you mentioned):</p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">updateResult</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dBExecute</span><span class="w"> </span><span class="s2">"UPDATE todos SET title = ?1, completed = ?2 WHERE id = ?2"</span><span class="w"> </span><span class="p">[</span><span class="nc">Text</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="nc">Boolean</span><span class="w"> </span><span class="n">completed</span><span class="p">,</span><span class="w"> </span><span class="nc">Int</span><span class="w"> </span><span class="n">id</span><span class="p">]</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">await</span><span class="w"></span>
<span class="n">updateResultHttp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapErrToHttp</span><span class="w"> </span><span class="n">updateResult</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="mi">500</span><span class="w"></span>
<span class="p">(</span><span class="nc">Result</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="n">updateResultHttp</span><span class="w"> </span><span class="err">\</span><span class="p">{</span><span class="n">rowsAffected</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="ow">when</span><span class="w"> </span><span class="n">rowsAffected</span><span class="w"> </span><span class="n">is</span><span class="w"></span>
<span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Fetch and return the todo.</span><span class="w"></span>
<span class="w">            </span><span class="n">rowResult</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dBFetchOne</span><span class="w"> </span><span class="s2">"SELECT id, title, completed, item_order FROM todos WHERE id = ?1"</span><span class="w"> </span><span class="p">[</span><span class="nc">Int</span><span class="w"> </span><span class="n">id</span><span class="p">]</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">await</span><span class="w"></span>
<span class="w">            </span><span class="n">rowResultHttp</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">                </span><span class="ow">when</span><span class="w"> </span><span class="n">rowResult</span><span class="w"> </span><span class="n">is</span><span class="w"></span>
<span class="w">                    </span><span class="nc">Ok</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Ok</span><span class="w"> </span><span class="n">v</span><span class="w"></span>
<span class="w">                    </span><span class="nc">Err</span><span class="w"> </span><span class="nc">NotFound</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Err</span><span class="w"> </span><span class="p">(</span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">})</span><span class="w"></span>
<span class="w">                    </span><span class="nc">Err</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Err</span><span class="w"> </span><span class="p">(</span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">})</span><span class="w"></span>
<span class="w">            </span><span class="n">resultHttp</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">                </span><span class="n">row</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="k">try</span><span class="w"> </span><span class="n">rowResultHttp</span><span class="w"></span>
<span class="w">                </span><span class="n">todoResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loadRowToTodo</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="n">baseUrl</span><span class="w"></span>
<span class="w">                </span><span class="n">todoResultHttp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapErrToHttp</span><span class="w"> </span><span class="n">todoResult</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="mi">500</span><span class="w"></span>
<span class="w">                </span><span class="n">todo</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="n">todoResultHttp</span><span class="w"></span>
<span class="w">                </span><span class="n">todoStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">writeTodo</span><span class="w"> </span><span class="s2">""</span><span class="w"> </span><span class="n">todo</span><span class="w"></span>
<span class="w">                </span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="n">todoStr</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="n">mergeResult</span><span class="w"> </span><span class="n">resultHttp</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">always</span><span class="w"></span>
<span class="w">        </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">}</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">mergeResult</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">always</span><span class="w"></span>
</code></pre></div>



<a name="312412569"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312412569" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312412569">(Nov 27 2022 at 01:08)</a>:</h4>
<p>would this work?</p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">with</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">await</span><span class="w"></span>
<span class="w">    </span><span class="n">updateResult</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dBExecute</span><span class="w"> </span><span class="s2">"UPDATE todos SET title = ?1, completed = ?2 WHERE id = ?2"</span><span class="w"> </span><span class="p">[</span><span class="nc">Text</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="nc">Boolean</span><span class="w"> </span><span class="n">completed</span><span class="p">,</span><span class="w"> </span><span class="nc">Int</span><span class="w"> </span><span class="n">id</span><span class="p">]</span><span class="w"></span>

<span class="w">    </span><span class="ow">when</span><span class="w"> </span><span class="n">mapErrToHttp</span><span class="w"> </span><span class="n">updateResult</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="n">is</span><span class="w"></span>
<span class="w">        </span><span class="nc">Ok</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="ss">rowsAffected</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">await</span><span class="w"></span>
<span class="w">            </span><span class="c1"># Fetch and return the todo.</span><span class="w"></span>
<span class="w">            </span><span class="n">rowResult</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dBFetchOne</span><span class="w"> </span><span class="s2">"SELECT id, title, completed, item_order FROM todos WHERE id = ?1"</span><span class="w"> </span><span class="p">[</span><span class="nc">Int</span><span class="w"> </span><span class="n">id</span><span class="p">]</span><span class="w"></span>

<span class="w">            </span><span class="ow">when</span><span class="w"> </span><span class="n">rowResult</span><span class="w"> </span><span class="n">is</span><span class="w"></span>
<span class="w">                </span><span class="nc">Ok</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">                    </span><span class="n">row</span><span class="w"></span>
<span class="w">                    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">loadRowToTodo</span><span class="w"> </span><span class="n">baseUrl</span><span class="w"></span>
<span class="w">                    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">mapErrToHttp</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="mi">500</span><span class="w"></span>
<span class="w">                    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="err">\</span><span class="n">todo</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">                        </span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="n">writeTodo</span><span class="w"> </span><span class="s2">""</span><span class="w"> </span><span class="n">todo</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">}</span><span class="w"></span>
<span class="w">                    </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">mergeResult</span><span class="w"></span>
<span class="w">                    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">always</span><span class="w"></span>

<span class="w">                </span><span class="nc">Err</span><span class="w"> </span><span class="nc">NotFound</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">fail</span><span class="w"> </span><span class="p">(</span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">})</span><span class="w"></span>
<span class="w">                </span><span class="nc">Err</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">fail</span><span class="w"> </span><span class="p">(</span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">})</span><span class="w"></span>
<span class="w">        </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="nc">Task</span><span class="o">.</span><span class="n">fail</span><span class="w"> </span><span class="p">(</span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">})</span><span class="w"></span>
</code></pre></div>



<a name="312413007"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312413007" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312413007">(Nov 27 2022 at 01:14)</a>:</h4>
<p>although in fairness, I like the backpassing version of <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span> better <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span> </p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">updateResult</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dBExecute</span><span class="w"> </span><span class="s2">"UPDATE todos SET title = ?1, completed = ?2 WHERE id = ?2"</span><span class="w"> </span><span class="p">[</span><span class="nc">Text</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="nc">Boolean</span><span class="w"> </span><span class="n">completed</span><span class="p">,</span><span class="w"> </span><span class="nc">Int</span><span class="w"> </span><span class="n">id</span><span class="p">]</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">await</span><span class="w"></span>

<span class="ow">when</span><span class="w"> </span><span class="n">mapErrToHttp</span><span class="w"> </span><span class="n">updateResult</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="n">is</span><span class="w"></span>
<span class="w">    </span><span class="nc">Ok</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="ss">rowsAffected</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">        </span><span class="c1"># Fetch and return the todo.</span><span class="w"></span>
<span class="w">        </span><span class="n">rowResult</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dBFetchOne</span><span class="w"> </span><span class="s2">"SELECT id, title, completed, item_order FROM todos WHERE id = ?1"</span><span class="w"> </span><span class="p">[</span><span class="nc">Int</span><span class="w"> </span><span class="n">id</span><span class="p">]</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">await</span><span class="w"></span>

<span class="w">        </span><span class="ow">when</span><span class="w"> </span><span class="n">rowResult</span><span class="w"> </span><span class="n">is</span><span class="w"></span>
<span class="w">            </span><span class="nc">Ok</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">                </span><span class="n">row</span><span class="w"></span>
<span class="w">                </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">loadRowToTodo</span><span class="w"> </span><span class="n">baseUrl</span><span class="w"></span>
<span class="w">                </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">mapErrToHttp</span><span class="w"> </span><span class="n">headers</span><span class="w"> </span><span class="mi">500</span><span class="w"></span>
<span class="w">                </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="err">\</span><span class="n">todo</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">                    </span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="n">writeTodo</span><span class="w"> </span><span class="s2">""</span><span class="w"> </span><span class="n">todo</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">mergeResult</span><span class="w"></span>
<span class="w">                </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">always</span><span class="w"></span>

<span class="w">            </span><span class="nc">Err</span><span class="w"> </span><span class="nc">NotFound</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">fail</span><span class="w"> </span><span class="p">(</span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">})</span><span class="w"></span>
<span class="w">            </span><span class="nc">Err</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Task</span><span class="o">.</span><span class="n">fail</span><span class="w"> </span><span class="p">(</span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">})</span><span class="w"></span>
<span class="w">    </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">        </span><span class="nc">Task</span><span class="o">.</span><span class="n">fail</span><span class="w"> </span><span class="p">(</span><span class="nc">Response</span><span class="w"> </span><span class="p">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">})</span><span class="w"></span>
</code></pre></div>



<a name="312414957"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312414957" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312414957">(Nov 27 2022 at 01:47)</a>:</h4>
<p>Yeah, i think other solutions definitely are possible, but i think supporting the backpassing syntax adds a lot of refreshing flexibility.</p>



<a name="312415115"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312415115" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312415115">(Nov 27 2022 at 01:50)</a>:</h4>
<p>Also, i am am not sure how often <code>Task.await</code> and <code>Task.map</code> will want to be used together, but i suspect fully removing backpassing would end up with a number of limitations.</p>
<p>Aside, that hidden <code>with Task.await</code> at the end of the line feels worse than <code>|&gt; Task.await</code> to me. Bother are trying to hide the <code>Task.await</code> for readability, but the <code>with</code> is super hidden and hard to find without the clear indentation.</p>



<a name="312416278"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312416278" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312416278">(Nov 27 2022 at 02:11)</a>:</h4>
<p>another thing I hadn't considered is that <code>with</code> inside another <code>with</code> is a form of shadowing</p>



<a name="312416282"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312416282" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312416282">(Nov 27 2022 at 02:11)</a>:</h4>
<p>(because <code>&lt;-</code> is taking on a new meaning)</p>



<a name="312416289"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312416289" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312416289">(Nov 27 2022 at 02:11)</a>:</h4>
<p>but without allowing that, nested code like this would be less nice</p>



<a name="312416295"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312416295" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312416295">(Nov 27 2022 at 02:11)</a>:</h4>
<p>so that's another point for backpassing</p>



<a name="312416345"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312416345" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312416345">(Nov 27 2022 at 02:12)</a>:</h4>
<p>maybe I need to give it some more time, but whenever I see backpassing used with <code>map</code> I don't like how it reads <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="312442983"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312442983" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312442983">(Nov 27 2022 at 09:28)</a>:</h4>
<p>Thx for explanation. As a side  comment I would say that construction "with Task.await" I find even more confusing. Whenever there is one liner impacting all below, I am struggling especially in language where there is no much usage of delimiters like {} , (). I like more  _ &lt;- because it at least act on  its immediate neighborhood.  With  this   "with Task.await" I am lost because I lose touch, what effects what. Is this another legal way to express the same concept?</p>



<a name="312443827"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312443827" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312443827">(Nov 27 2022 at 09:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="568088">Artur Swiderski</span> <a href="#narrow/stream/231634-beginners/topic/syntactic.20sugar/near/312443827">said</a>:</p>
<blockquote>
<p>sometimes  more verbose isn't  necessarily worser because I usually do a lot of copy pasting anyway so I do not save time with shorter enigmatic  syntax. But it causes a lot of burnout when I am forced to decipher like  10 lines at once instead of one two three lines.<br>
obviously  things like :<br>
[list]<br>
|&gt; dosomething<br>
|&gt; dosomething<br>
|&gt; dosomething<br>
|&gt; dosomething<br>
|&gt; dosomething</p>
<p>are ok  <br>
but  this :</p>
<p>with Task.await<br>
    cwd &lt;- Env.cwd<br>
    cwdStr = Path.display cwd</p>
<div class="codehilite"><pre><span></span><code>_ &lt;- Stdout.line &quot;cwd: \(cwdStr)&quot;
dirEntries &lt;- Dir.list cwd
contentsStr = Str.joinWith (List.map dirEntries Path.display) &quot;\n    &quot;

_ &lt;- Stdout.line &quot;Directory contents:\n    \(contentsStr)\n&quot;
_ &lt;- Stdout.line &quot;Writing a string to out.txt&quot;
_ &lt;- File.writeUtf8 path &quot;a string!&quot;
</code></pre></div>

<p>: O   and my jaw drops</p>
</blockquote>



<a name="312445779"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312445779" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312445779">(Nov 27 2022 at 09:56)</a>:</h4>
<p>below is weird but  at least I can  analyze it basically  line  by  line: 
_ &lt;- await (Stdout.line "Type something press Enter:")<br>
text &lt;- await Stdin.line<br>
Stdout.line "You just entered: \(text)"</p>
<p>and being  able to analyze  program line by line is huge  boost for my productivity.  In general it boils down to context if I do not have to keep track of  contex I am currently in good for me. This is  strong side of languages like "C"  with its all flows, I can read each line separately because  context is always simple. In provided  example "with Task.await" I expect that all below lines will behave in some  weird way  I have to keep track of those  ways. For examle  in "C++"  when program is heavily  templated, one code snippet may mean nothing without knowing  context of at least  some parameters,  from template list and that's horrible, looks cool  but  is horrible nevertheless. So I like  when every line  tells its own story I read  code like a book I don't have to  think so much  I don't  have to jump from place  to place distract myself</p>



<a name="312447312"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312447312" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312447312">(Nov 27 2022 at 10:10)</a>:</h4>
<p>I am rising all of that because I am more like bug fixer type than application creator(at least by trade) so I have to skim through a lot of code daily  (sometimes I am not so much familiar with). So I just know  what works for me best. So many times  I see code with single  conceptual context scatter all over the places, I have to jump here and there to gather it all back to one piece in my head. Those  riddles looks sometimes so professional but  they  are killing me. When I have opportunity  to read  code like a book line by line is so good ( but  rare nowadays ). By trade I do C++ and it's crazy how  people are abusing syntax of  this language just insane  at times</p>



<a name="312455932"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312455932" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312455932">(Nov 27 2022 at 11:30)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="568088">@Artur Swiderski</span>, excellent feedback!</p>



<a name="312464938"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312464938" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312464938">(Nov 27 2022 at 12:48)</a>:</h4>
<p>look at lua language, it has relatively simple straightforward syntax (although it is too verbose at times ). Right away I am able to work with this language because of that. In general,  I am looking for language with couple of traits (and roc potentially has many of them) among those syntax is not the most important consideration but still major factor. As to lua I don't like  other design choices  they made but regarding syntax, I will never complain.</p>



<a name="312466413"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312466413" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312466413">(Nov 27 2022 at 13:01)</a>:</h4>
<p>For  roc I have hope to replace  python in my usual use cases. Sometimes I write  simple tool to analyze some data  in files in very specific way. Functional languages are good with parsing, so "roc" should excel. In python because language is in such common use (a lot of examples and references online) I can complete task in couple of minutes but I find experience not satisfying and prone to minor mistakes. I hope  I will be able  to complete  the same in roc,  in similar time but in somehow less "ad hoc" manner. Since  those are very small programs for personal use I can use  anything  in terms of technology. In this  use case,  syntax is much less important  but still it is good to see something which fits my general world view</p>



<a name="312483446"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/syntactic%20sugar/near/312483446" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/syntactic.20sugar.html#312483446">(Nov 27 2022 at 15:19)</a>:</h4>
<p>I was also interested in roc because of my dissatisfaction with python.<br>
Dynamic languages like python and lua are easy to get started with. It's noticeably harder to keep things simple with a pure functional language but we'll keep trying :)</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>