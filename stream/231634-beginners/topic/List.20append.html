<html>
<head><meta charset="utf-8"><title>List append · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html">List append</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="347022511"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347022511" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Audrey Gao <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347022511">(Apr 05 2023 at 05:08)</a>:</h4>
<p>Given that "List.append" will add an element to the end of a list, I am wondering is there a predefined function in the List Module that can append a list to the end of a list? Or a function that can insert an element in front of a list?</p>



<a name="347023551"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347023551" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347023551">(Apr 05 2023 at 05:16)</a>:</h4>
<p><a href="https://www.roc-lang.org/builtins/List#concat">List.concat</a><br>
<a href="https://www.roc-lang.org/builtins/List#prepend">List.prepend</a></p>



<a name="347023675"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347023675" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347023675">(Apr 05 2023 at 05:17)</a>:</h4>
<p>We should probably add a perf note to <code>List.prepend</code>. It can cost a lot because it has to shift the entire list.</p>



<a name="347023849"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347023849" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Audrey Gao <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347023849">(Apr 05 2023 at 05:19)</a>:</h4>
<p>I didn't notice that there is a new documentation! Thanks a lot!</p>



<a name="347026223"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347026223" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Audrey Gao <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347026223">(Apr 05 2023 at 05:37)</a>:</h4>
<p>Actually I'm trying to build a self-defined map function for list. The following code encountered some error message that I couldn't figure out why.<br>
<a href="/user_uploads/22008/BZS4AJfBp0iTC_6NgndqHL6K/image.png">image.png</a> <a href="/user_uploads/22008/S9w_KJ1v_om2tUPq_8dYL3t9/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/BZS4AJfBp0iTC_6NgndqHL6K/image.png" title="image.png"><img src="/user_uploads/22008/BZS4AJfBp0iTC_6NgndqHL6K/image.png"></a></div><div class="message_inline_image"><a href="/user_uploads/22008/S9w_KJ1v_om2tUPq_8dYL3t9/image.png" title="image.png"><img src="/user_uploads/22008/S9w_KJ1v_om2tUPq_8dYL3t9/image.png"></a></div>



<a name="347026580"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347026580" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Audrey Gao <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347026580">(Apr 05 2023 at 05:39)</a>:</h4>
<p>The code worked when I deleted the function type annotation.</p>



<a name="347028338"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347028338" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347028338">(Apr 05 2023 at 05:50)</a>:</h4>
<p>It would definitely be useful if you can file some bugs as you hit these. I think a lot of these are breaks that are likely to be web repl specific. With repros, we can slowly dig into them.</p>



<a name="347028768"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347028768" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347028768">(Apr 05 2023 at 05:52)</a>:</h4>
<p>My only comment on that code is I am surprised it parses. I would have expect that <code>t1 = ...</code> would be required to be on the next line, but that is clearly a different issue than the type bug you are hitting. My only guess with this bug is somehow the compiler running on a single thread with async and await breaks with this type checking.</p>



<a name="347160583"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347160583" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Audrey Gao <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347160583">(Apr 05 2023 at 14:16)</a>:</h4>
<p>If I understand correctly, the way I wrote the type checking itself is correct? I tried to run the same piece of code on LLVM backend in the terminal and it worked. But the roc repl with LLVM backend also failed to run this code, and it gives me the error: This Roc code crashed with: "a Lambda Set is empty. Most likely there is a type error in your program." I'm confused about the "type error in your program" thing, should I change the type annotation in some way to make it correct?</p>



<a name="347162574"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347162574" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347162574">(Apr 05 2023 at 14:22)</a>:</h4>
<p>Oh, actually, it may be incorrect. I think the extra parens around the record in the type should not be there</p>



<a name="347162987"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347162987" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347162987">(Apr 05 2023 at 14:23)</a>:</h4>
<p>Not sure if that is the bug. Specifically because I am unsure if we create single element tuples.</p>



<a name="347166873"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347166873" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347166873">(Apr 05 2023 at 14:34)</a>:</h4>
<p>Anyway, yeah, I am pretty sure this is a repl/compiler bug. Your example works in the command line repl if you enter it one definition at a time:</p>
<div class="codehilite"><pre><span></span><code>Enter an expression, or :help, or :q to quit.

» map : ({t0: I64 -&gt; I64, t1: List I64}) -&gt; List I64
… map = \{t0: f1, t1: lst} -&gt;
…   when lst is
…     [] -&gt; []
…     [hd, ..] -&gt;
…       t1 = List.dropAt lst 0
…       List.concat [f1 hd] (map ({t0: f1, t1}))
…

&lt;function&gt; : { t0 : I64 -&gt; I64, t1 : List I64 } -&gt; List I64
                           # map

» f = \x -&gt; x + 1
…

&lt;function&gt; : Num a -&gt; Num a  # f

» map {t0: f, t1: [1,2,3]}
…

[2, 3, 4] : List I64      # val1
</code></pre></div>



<a name="347175276"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347175276" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347175276">(Apr 05 2023 at 15:02)</a>:</h4>
<p>Oh, interesting, this issue actually is reproducible in all locations, web repl, cmd repl, and real apps. It specifically is related to nesting somehow. The repl just automatically introduces the nesting so it is more likely to be found. Also, we should look at improving <code>roc_panic</code> in the web repl such that it prints out error messages.</p>



<a name="347175973"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347175973" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Audrey Gao <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347175973">(Apr 05 2023 at 15:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/231634-beginners/topic/List.20append/near/347162574">said</a>:</p>
<blockquote>
<p>Oh, actually, it may be incorrect. I think the extra parens around the record in the type should not be there</p>
</blockquote>
<p>Oh, deleting the extra parens around the record indeed fix the previous error! Thanks for the help!</p>



<a name="347176130"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List%20append/near/347176130" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.20append.html#347176130">(Apr 05 2023 at 15:04)</a>:</h4>
<p>I also filed <a href="https://github.com/roc-lang/roc/issues/5256">#5256</a> because there is definitely another issue here.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>