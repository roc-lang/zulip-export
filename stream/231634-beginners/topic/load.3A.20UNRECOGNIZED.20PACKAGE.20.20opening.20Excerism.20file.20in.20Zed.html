<html>
<head><meta charset="utf-8"><title>load: UNRECOGNIZED PACKAGE  opening Excerism file in Zed · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html">load: UNRECOGNIZED PACKAGE  opening Excerism file in Zed</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="475367369"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475367369" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niklas Konstenius <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475367369">(Oct 07 2024 at 18:48)</a>:</h4>
<p>I'm getting an error (from Roc language server I guess) in Zed when opening the file RestApi.roc on <a href="https://exercism.org/tracks/roc/exercises/rest-api">https://exercism.org/tracks/roc/exercises/rest-api</a></p>
<p>The error shows as a red squiggly line under the first character m in the module keyword at the top of the file:</p>
<div class="codehilite"><pre><span></span><code>load: UNRECOGNIZED PACKAGE

This module is trying to import from `json`:

3│  import json.Json
           ^^^^^^^^^

A lowercase name indicates a package shorthand, but I don&#39;t
know which packages are available.

When checking a module directly, I look for a `main.roc` app
or package to resolve shorthands from.

You can create it, or specify an existing one with the
`--main` flag.
</code></pre></div>
<p>Any ideas how to work around this?</p>



<a name="475375204"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475375204" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475375204">(Oct 07 2024 at 19:21)</a>:</h4>
<p>Do the tests work properly if you run them? I’m not sure if there is a way to get around this error from the LSP right now, but it suspect that everything else should still work normally.</p>



<a name="475375329"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475375329" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475375329">(Oct 07 2024 at 19:21)</a>:</h4>
<p><span class="user-mention" data-user-id="734214">@Aurélien Geron</span> Maybe we should rename all of the test files to main.roc so this issue doesn’t arise when solving exercises locally. Wdyt?</p>



<a name="475386988"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475386988" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niklas Konstenius <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475386988">(Oct 07 2024 at 20:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="611722">Isaac Van Doren</span> <a href="#narrow/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed/near/475375204">said</a>:</p>
<blockquote>
<p>Do the tests work properly if you run them? I’m not sure if there is a way to get around this error from the LSP right now, but it suspect that everything else should still work normally.</p>
</blockquote>
<p>Yes the tests works fine when running with <code>exercism test</code>.  The problem is that the error in Zed prevents me from getting useful info from the LSP like inferred types and compiler errors.</p>



<a name="475436014"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475436014" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475436014">(Oct 08 2024 at 01:24)</a>:</h4>
<p>As a workaround you could rename the test file to main.roc and it should work. You may need to restart the lsp and you’ll need to run the tests using roc test instead.</p>



<a name="475440698"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475440698" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aurélien Geron <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475440698">(Oct 08 2024 at 02:09)</a>:</h4>
<p>Mmh, the problem with renaming the test files is that all existing users will get a warning telling them that all the exercises they have done are outdated and they need to update them. They might even get one notification per exercise. So if we do this we need to synchronize with the Exercism team to ensure that this doesn't happen. It might be simpler to fix the LSP issue, IMHO.</p>



<a name="475454447"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475454447" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475454447">(Oct 08 2024 at 03:18)</a>:</h4>
<p>Yeah that would not be good. I’m not sure about the best way to fix the LSP issue since it can’t be passed the —main flag. </p>
<p><span class="user-mention" data-user-id="489294">@Agus Zubiaga</span> do you have any ideas/background with this? I think I remember you working on the —main flag.</p>



<a name="475505504"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475505504" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475505504">(Oct 08 2024 at 08:16)</a>:</h4>
<p>Yeah, unfortunately, we don’t have a way to specify a different main file when using the language server. We used to hang in this case, so that was an improvement, but we probably still need a way to do that.</p>



<a name="475505780"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475505780" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475505780">(Oct 08 2024 at 08:18)</a>:</h4>
<p>I don’t have the bandwidth to do it now, but it should be pretty straightforward to add an Ls setting for this. I don’t know if that’d be the best design, though.</p>



<a name="475505924"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475505924" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475505924">(Oct 08 2024 at 08:19)</a>:</h4>
<p>In the meantime, you could have a dummy <code>main.roc</code> file with all the dependencies needed.</p>



<a name="475545557"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475545557" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475545557">(Oct 08 2024 at 12:04)</a>:</h4>
<p>Yeah it seems like adding a setting would work but would be a little bit annoying to use</p>



<a name="475795329"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475795329" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niklas Konstenius <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475795329">(Oct 09 2024 at 08:40)</a>:</h4>
<p>Thanks for the feedback. Tried the workaround by copying the test-file as main.roc but unfortunately was hit by the language server panicking instead:</p>
<div class="codehilite"><pre><span></span><code>Roc language server initialized.
stderr: thread &#39;tokio-runtime-worker&#39; panicked at crates/language_server/src/analysis.rs:301:71:
stderr: called `Option::unwrap()` on a `None` value
stderr: note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>
<p>This was on my Linux machine, I'll try the workaround on my MacBook tonight and see if it works there.</p>



<a name="475826643"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475826643" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475826643">(Oct 09 2024 at 10:55)</a>:</h4>
<p>I just tried the rest-api files and everything is working for me on Ubuntu 22.04.  Can you share your RestApi.roc file?</p>



<a name="475879705"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475879705" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niklas Konstenius <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475879705">(Oct 09 2024 at 14:29)</a>:</h4>
<p>Sure, just did a fresh download of the files with:</p>
<div class="codehilite"><pre><span></span><code>exercism download --track roc --exercise=rest-api --force
cp rest-api-test.roc main.roc
</code></pre></div>
<p>The contents of RestApi.roc is:</p>
<div class="codehilite"><pre><span></span><code>module [get, post]

import json.Json

User : {
    name : Str,
    owes : Dict Str F64,
    owedBy : Dict Str F64,
    balance : F64,
}

Database : { users : List User }

get : Database, { url : Str, payload ? Str } -&gt; Result Str _
get = \database, { url, payload ? &quot;&quot; } -&gt;
    crash &quot;Please implement the &#39;get&#39; function&quot;

post : Database, { url : Str, payload ? Str } -&gt; Result Str _
post = \database, { url, payload ? &quot;&quot; } -&gt;
    crash &quot;Please implement the &#39;post&#39; function&quot;
</code></pre></div>
<p>The  roc compiler and lsp on my path is from roc_nightly-linux_x86_64-2024-10-07-6cb2501</p>
<div class="codehilite"><pre><span></span><code>md5sum `which roc`
7d299380f5270497917f388af74292d3  /home/xxxx/bin/roc

md5sum `which roc_language_server`
32a158fc8ee775c874f535a41ed3e21e  /home/xxxx/bin/roc_language_server
</code></pre></div>
<p>I'm using Ubuntu 22.0.4:</p>
<div class="codehilite"><pre><span></span><code>cat /etc/lsb-release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=22.04
DISTRIB_CODENAME=jammy
DISTRIB_DESCRIPTION=&quot;Ubuntu 22.04.5 LTS&quot;
</code></pre></div>
<p>When I open <code>RestApi.roc</code>in Zed  (0.155.2) I get the following in LSP Logs:</p>
<div class="codehilite"><pre><span></span><code>Roc language server initialized.
stderr: thread &#39;tokio-runtime-worker&#39; panicked at crates/language_server/src/analysis.rs:301:71:
stderr: called `Option::unwrap()` on a `None` value
stderr: note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
stderr: thread &#39;tokio-runtime-worker&#39; panicked at crates/language_server/src/analysis.rs:301:71:
stderr: called `Option::unwrap()` on a `None` value
</code></pre></div>



<a name="475884607"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475884607" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niklas Konstenius <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475884607">(Oct 09 2024 at 14:46)</a>:</h4>
<p>If I then remove <code>main.roc</code> (the copy of rest-api-test.roc) and restart Zed and open <code>RestApi.roc</code> no errors are shown in the LSP Logs:</p>
<div class="codehilite"><pre><span></span><code>Roc language server initialized.
</code></pre></div>
<p>But the original error is shown on <code>module</code> keyword again:</p>
<div class="codehilite"><pre><span></span><code>load: UNRECOGNIZED PACKAGE

This module is trying to import from `json`:

3│  import json.Json
           ^^^^^^^^^

A lowercase name indicates a package shorthand, but I don&#39;t
know which packages are available.

When checking a module directly, I look for a `main.roc` app
or package to resolve shorthands from.

You can create it, or specify an existing one with the
`--main` flag.
</code></pre></div>



<a name="475904043"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475904043" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475904043">(Oct 09 2024 at 15:49)</a>:</h4>
<p>Thanks for all the data <span class="user-mention" data-user-id="544552">@Niklas Konstenius</span>, I was able to reproduce it now and will create an issue on the roc repo.<br>
<code>roc check</code> and <code>roc dev</code> do look to be working fine, so you should be able to continue the exercise, unfortunately without help from the language server.</p>



<a name="475914338"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475914338" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475914338">(Oct 09 2024 at 16:38)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/7153">https://github.com/roc-lang/roc/issues/7153</a></p>



<a name="475915765"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/load%3A%20UNRECOGNIZED%20PACKAGE%20%20opening%20Excerism%20file%20in%20Zed/near/475915765" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niklas Konstenius <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/load.3A.20UNRECOGNIZED.20PACKAGE.20.20opening.20Excerism.20file.20in.20Zed.html#475915765">(Oct 09 2024 at 16:48)</a>:</h4>
<p>Thanks for the help <span class="user-mention" data-user-id="361169">@Anton</span>. I'll be watching the progress in the GH-issue.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>