<html>
<head><meta charset="utf-8"><title>Type annotation causes failure to build · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20annotation.20causes.20failure.20to.20build.html">Type annotation causes failure to build</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="568012875"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20annotation%20causes%20failure%20to%20build/near/568012875" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20annotation.20causes.20failure.20to.20build.html#568012875">(Jan 14 2026 at 15:21)</a>:</h4>
<p>A few weeks ago this code would build successfully with the zig compiler. However I just build the latest main, and now I get an error message when building the following code. Not sure if My type annotation is incorrect, or if this is a compiler bug, so posting it up here.</p>



<a name="568012896"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20annotation%20causes%20failure%20to%20build/near/568012896" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20annotation.20causes.20failure.20to.20build.html#568012896">(Jan 14 2026 at 15:21)</a>:</h4>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nv">keep_oks</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">List</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nx">Try</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="p">))</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nx">List</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
<span class="nv">keep_oks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="nx">vs</span><span class="p">,</span><span class="w"> </span><span class="nx">f</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">vs</span><span class="p">.</span><span class="nx">fold</span><span class="p">(</span>
<span class="w">        </span><span class="p">[],</span>
<span class="w">        </span><span class="o">|</span><span class="nx">acc</span><span class="p">,</span><span class="w"> </span><span class="nx">v</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">match</span><span class="w"> </span><span class="nx">f</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">Ok</span><span class="nf">(u) =&gt;</span><span class="w"> </span><span class="nx">acc</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">u</span><span class="p">)</span>
<span class="w">                </span><span class="nx">Err</span><span class="nf">(_) =&gt;</span><span class="w"> </span><span class="nx">acc</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>Produces the following error:</p>
<div class="codehilite"><pre><span></span><code>The first argument being passed to this function has the wrong type:
   ┌─ main.roc:29:2
   │
29 │    s.split_on(&quot;\n&quot;)
30 │    .map(extract_digits)

This argument has the type:

    List(List(U64))

But keep_oks needs the first argument to be:

    List(a)

Found 1 error(s) and 0 warning(s) for main.roc.
</code></pre></div>



<a name="568013034"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20annotation%20causes%20failure%20to%20build/near/568013034" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20annotation.20causes.20failure.20to.20build.html#568013034">(Jan 14 2026 at 15:22)</a>:</h4>
<p>However, if I comment out the type annotation for keep_oks, it builds just fine.</p>



<a name="568013524"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20annotation%20causes%20failure%20to%20build/near/568013524" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20annotation.20causes.20failure.20to.20build.html#568013524">(Jan 14 2026 at 15:24)</a>:</h4>
<p>Full code here: <a href="https://pastebin.com/Qn4xnhUY">https://pastebin.com/Qn4xnhUY</a></p>



<a name="568015934"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20annotation%20causes%20failure%20to%20build/near/568015934" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20annotation.20causes.20failure.20to.20build.html#568015934">(Jan 14 2026 at 15:35)</a>:</h4>
<p><span class="user-mention" data-user-id="518883">@Ian McLerran</span> would you mind opening a GH issue for this?</p>



<a name="568016408"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20annotation%20causes%20failure%20to%20build/near/568016408" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20annotation.20causes.20failure.20to.20build.html#568016408">(Jan 14 2026 at 15:36)</a>:</h4>
<p>Sure thing!</p>



<a name="568027934"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20annotation%20causes%20failure%20to%20build/near/568027934" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20annotation.20causes.20failure.20to.20build.html#568027934">(Jan 14 2026 at 16:25)</a>:</h4>
<p>Issue at <a href="https://github.com/roc-lang/roc/issues/9018">#9018</a></p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>