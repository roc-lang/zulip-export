<html>
<head><meta charset="utf-8"><title>Backpassing use cases · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html">Backpassing use cases</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="290365480"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290365480" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290365480">(Jul 21 2022 at 11:53)</a>:</h4>
<p>I've known since first reading the tutorial that backpassing is very useful in sugaring (simplifying the syntax of) asynchronous callbacks (specifically reducing indentation). However, I just saw <a href="#narrow/stream/316715-contributing/topic/Random.20number.20generator/near/290357990">an example of backpassing being used to chain synchronous contexts together</a>. When else is backpassing useful?</p>



<a name="290365599"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290365599" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290365599">(Jul 21 2022 at 11:54)</a>:</h4>
<p>It seems like a much more powerful (or FP fundamental) feature than I'd originally thought!</p>



<a name="290365637"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290365637" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290365637">(Jul 21 2022 at 11:54)</a>:</h4>
<p>it is, but that also makes it tricky to talk about in a clear way</p>



<a name="290365693"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290365693" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290365693">(Jul 21 2022 at 11:55)</a>:</h4>
<p>a decent intuition is that it is about the ordering of operations. first do this, then that, then that</p>



<a name="290365732"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290365732" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290365732">(Jul 21 2022 at 11:56)</a>:</h4>
<p>this is achieved with a data dependency: the <code>x &lt;-</code> part of the backpassing relies on the value of the <code>&lt;- ....</code> part being available</p>



<a name="290365814"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290365814" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290365814">(Jul 21 2022 at 11:56)</a>:</h4>
<p>so now think about "ordered" things: threading a state through a computation, updating a random seed, printing lines to the console in order</p>



<a name="290365864"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290365864" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290365864">(Jul 21 2022 at 11:57)</a>:</h4>
<p>here the output of the computation relies on the order. it doesn't in most parts of a functional program: <code>1 + 2 + 3</code> can be evaluated in arbitrary order</p>



<a name="290365989"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290365989" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290365989">(Jul 21 2022 at 11:58)</a>:</h4>
<p>but I guess the elm way of understanding this is: is there a function <code>andThen : m a -&gt;  (a -&gt; m b) -&gt; m b</code> for this type</p>



<a name="290366010"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290366010" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290366010">(Jul 21 2022 at 11:58)</a>:</h4>
<p>(it must behave in a certain way, too, not any implementation will do)</p>



<a name="290367957"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290367957" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290367957">(Jul 21 2022 at 12:20)</a>:</h4>
<p>... is <code>-&gt;</code> just monadic <code>=</code>?!</p>



<a name="290368142"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290368142" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290368142">(Jul 21 2022 at 12:23)</a>:</h4>
<p>I'm finally grasping monads and it looks like <code>-&gt;</code> is more of their chaining operator than <code>|&gt;</code>...</p>



<a name="290368171"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290368171" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290368171">(Jul 21 2022 at 12:23)</a>:</h4>
<p>Maybe more of a "raw" chaining operator?</p>



<a name="290369846"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290369846" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290369846">(Jul 21 2022 at 12:39)</a>:</h4>
<p>Your explanation makes sense, but that one part about "relies on the value of the <code>&lt;- ....</code> part being available" confuses me - wouldn't that just be <code>=</code>?</p>



<a name="290369884"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290369884" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290369884">(Jul 21 2022 at 12:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="462053">JanCVanB</span> <a href="#narrow/stream/231634-beginners/topic/Backpassing.20use.20cases/near/290367957">said</a>:</p>
<blockquote>
<p>... is <code>-&gt;</code> just monadic <code>=</code>?!</p>
</blockquote>
<p>Yes! Although it can be used in a slightly more flexible way because the monadic bind operator (known as <code>&gt;&gt;=</code> or <code>andThen</code> or <code>bind</code> or <code>chain</code> in different languages) has the exact type signature <code>m a -&gt; (a -&gt; m b) -&gt; m b</code> while IIRC in Roc you can use backpassing also with functions of the format <code>m a -&gt; (a -&gt; x b) -&gt; x b</code></p>



<a name="290369985"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290369985" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290369985">(Jul 21 2022 at 12:40)</a>:</h4>
<p>(continued) It seems like we're waiting on a variable nested INSIDE the right-hand side's context to become available, rather than the evaluation itself.</p>



<a name="290370263"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290370263" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290370263">(Jul 21 2022 at 12:43)</a>:</h4>
<p>It might be intuitive to think of all of these situations as callbacks. You can only ever evaluate a callback if the parameter to the callback was evaluated first.</p>
<p>How exactly you go from 'the thing you have before' to 'the precise parameter that is passed into the callback' (and how often the callback is executed exactly) depends on the function you are using. <code>List.joinMap</code>, <code>Task.after</code>, <code>Result.try</code>are three examples</p>



<a name="290370436"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290370436" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290370436">(Jul 21 2022 at 12:44)</a>:</h4>
<ul>
<li><code>List.joinMap</code>: Run the callback once for each element in the input list, and concatenate the results</li>
<li><code>Task.after</code>: Run the input task to completion, and once it is finished (without error) run the callback with the outcome.</li>
<li><code>Result.try</code>: Run the callback only if the input is <code>Ok val</code>, otherwise short-circuit with the error value immediately.</li>
</ul>



<a name="290370480"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290370480" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290370480">(Jul 21 2022 at 12:45)</a>:</h4>
<p>Right, but the variable passed as the parameter isn't the right-hand evaluation itself, it's a variable within that evaluation's context.</p>



<a name="290370505"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290370505" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290370505">(Jul 21 2022 at 12:45)</a>:</h4>
<p>Correct</p>



<a name="290370653"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290370653" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290370653">(Jul 21 2022 at 12:46)</a>:</h4>
<p>ex. <code>Result.try</code> internally contains logic that turns a <code>Result a err</code> into a variable of the type <code>a</code> that the callback expects as input parameter type.</p>



<a name="290370670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290370670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290370670">(Jul 21 2022 at 12:47)</a>:</h4>
<p>:D somehow that helps me!</p>



<a name="290370861"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290370861" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290370861">(Jul 21 2022 at 12:48)</a>:</h4>
<p><span aria-label="green heart" class="emoji emoji-1f49a" role="img" title="green heart">:green_heart:</span></p>



<a name="290370921"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290370921" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290370921">(Jul 21 2022 at 12:49)</a>:</h4>
<p>Is it only useful in synchronous situations when the internal state is intended to be hidden from the outside?</p>



<a name="290370932"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290370932" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290370932">(Jul 21 2022 at 12:49)</a>:</h4>
<p>Hooray! 🥳</p>



<a name="290371014"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290371014" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290371014">(Jul 21 2022 at 12:50)</a>:</h4>
<p>Otherwise we could just use <code>=</code> and pass that internal state around in a more complex return value.</p>



<a name="290371038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290371038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290371038">(Jul 21 2022 at 12:50)</a>:</h4>
<p>It is useful in any situation where it makes sense to keep track of something extra 'to the side' of plain sequencing.</p>



<a name="290371112"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290371112" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290371112">(Jul 21 2022 at 12:51)</a>:</h4>
<p>...without that side thing being visible/accessible in the calling context?</p>



<a name="290371119"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290371119" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290371119">(Jul 21 2022 at 12:51)</a>:</h4>
<p>There is a trivial implementation that does nothing extra which indeed simply uses <code>=</code> internally. It is not often useful in practical situations though; more a theoretical curio.</p>



<a name="290371490"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290371490" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290371490">(Jul 21 2022 at 12:54)</a>:</h4>
<p>There are many situations in which it is already helpful just to hide the following alternative:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">myfun</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">input</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"></span>
<span class="w">  </span><span class="kr">let</span><span class="w"> </span><span class="p">(</span><span class="nv">val</span><span class="p">,</span><span class="w"> </span><span class="nv">state</span><span class="p">)</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">foo</span><span class="w"> </span><span class="nv">defaultState</span><span class="w"> </span><span class="nv">input</span><span class="w"></span>
<span class="w">  </span><span class="kr">let</span><span class="w"> </span><span class="p">(</span><span class="nv">val2</span><span class="p">,</span><span class="w"> </span><span class="nv">state2</span><span class="p">)</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">bar</span><span class="w"> </span><span class="nv">state</span><span class="w"> </span><span class="nv">val</span><span class="w"></span>
<span class="w">  </span><span class="kr">let</span><span class="w"> </span><span class="p">(</span><span class="nv">val3</span><span class="p">,</span><span class="w"> </span><span class="nv">state3</span><span class="p">)</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">baz</span><span class="w"> </span><span class="nv">state2</span><span class="w"> </span><span class="nv">val2</span><span class="w"></span>
<span class="w">  </span><span class="nv">qux</span><span class="w"> </span><span class="nv">state3</span><span class="w"> </span><span class="nv">val3</span><span class="w"></span>
</code></pre></div>



<a name="290371566"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290371566" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290371566">(Jul 21 2022 at 12:55)</a>:</h4>
<p><span aria-label="point of information" class="emoji emoji-261d" role="img" title="point of information">:point_of_information:</span> this is actually what is going on behind the scenes in the RNG example</p>



<a name="290371761"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290371761" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290371761">(Jul 21 2022 at 12:57)</a>:</h4>
<p>But besides that: There are indeed many situations where it is extra useful because you can prevent the internals from being accessible from the outside. <code>Effect</code> and <code>Task</code> are good examples of this.</p>



<a name="290371764"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290371764" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290371764">(Jul 21 2022 at 12:57)</a>:</h4>
<p>Yes! This reminds me of my RNG example - jinx! You beat me to it haha</p>



<a name="290372047"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290372047" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290372047">(Jul 21 2022 at 12:59)</a>:</h4>
<p>If a calling context ever wanted to return the internals, does using any backpassing preclude/prevent that? Or can it just remove the last backpassing call to extract the final internals?</p>



<a name="290372262"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290372262" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290372262">(Jul 21 2022 at 13:01)</a>:</h4>
<p>For example, in the above snippet, if we switched to using backpassing for any of those <code>foo</code>/<code>bar</code> calls, can <code>myfun</code> return any <code>state</code>s at all or just <code>val</code>s?</p>



<a name="290372538"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290372538" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290372538">(Jul 21 2022 at 13:04)</a>:</h4>
<p>It could only access <code>val</code>s</p>



<a name="290372757"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290372757" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290372757">(Jul 21 2022 at 13:06)</a>:</h4>
<p>Okay, thank you. That answers a question I couldn't formulate until now.</p>



<a name="290372761"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290372761" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290372761">(Jul 21 2022 at 13:06)</a>:</h4>
<p>So backpassing/monadic composition alone hides the internal state, and for some datastructures this might be important. (Such as <code>Effect</code>).<br>
Others expose other functions or data constructors with which you _can_ access the internal state if you want to. (Like <code>Ok</code> and <code>Err</code> in <code>Result</code>, or many of the functions in the <code>List</code> module)</p>



<a name="290372856"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290372856" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290372856">(Jul 21 2022 at 13:07)</a>:</h4>
<p>But you can only really call those from outside the callback chain, not from the inside</p>



<a name="290372945"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290372945" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290372945">(Jul 21 2022 at 13:08)</a>:</h4>
<p>i.e. you cannot call them on the thing you are working on in the callback chain, because there you don't have a <code>Result a err</code> or a <code>List a</code>, you only have an <code>a</code>.</p>



<a name="290384580"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290384580" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290384580">(Jul 21 2022 at 14:42)</a>:</h4>
<p>Yes! That makes sense.</p>



<a name="290384604"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290384604" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290384604">(Jul 21 2022 at 14:42)</a>:</h4>
<p>Thank you for this 101 course :D I needed it</p>



<a name="290386054"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290386054" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290386054">(Jul 21 2022 at 14:53)</a>:</h4>
<p>You're very welcome! <span aria-label="blush" class="emoji emoji-1f60a" role="img" title="blush">:blush:</span></p>



<a name="290621396"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290621396" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290621396">(Jul 23 2022 at 16:21)</a>:</h4>
<p>here's an interesting progression of moving from non-backpassing to backpassing style: all 4 of these compile to exactly the same thing</p>



<a name="290621437"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290621437" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290621437">(Jul 23 2022 at 16:22)</a>:</h4>
<p><strong>indented</strong></p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="nf">result</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">    </span><span class="n">fields</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">split</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="s">"|"</span><span class="w"></span>

<span class="w">    </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="n">exclaim</span><span class="p">)</span><span class="w"> </span><span class="nf">\</span><span class="n">title</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"></span>
<span class="w">        </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">toU16</span><span class="p">)</span><span class="w"> </span><span class="nf">\</span><span class="n">year</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="nf">\</span><span class="n">cast</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"></span>
<span class="w">                </span><span class="kt">Ok</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">cast</span><span class="kt">:</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">split</span><span class="w"> </span><span class="n">cast</span><span class="w"> </span><span class="s">","</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="290621440"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290621440" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290621440">(Jul 23 2022 at 16:22)</a>:</h4>
<p><strong>outdented</strong></p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="nf">result</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">    </span><span class="n">fields</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">split</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="s">"|"</span><span class="w"></span>

<span class="w">    </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="n">exclaim</span><span class="p">)</span><span class="w"> </span><span class="nf">\</span><span class="n">title</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">toU16</span><span class="p">)</span><span class="w"> </span><span class="nf">\</span><span class="n">year</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="nf">\</span><span class="n">cast</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"></span>

<span class="w">    </span><span class="kt">Ok</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">cast</span><span class="kt">:</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">split</span><span class="w"> </span><span class="n">cast</span><span class="w"> </span><span class="s">","</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="290621450"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290621450" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290621450">(Jul 23 2022 at 16:22)</a>:</h4>
<p><strong>backpassing</strong></p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="nf">result</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">    </span><span class="n">fields</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">split</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="s">"|"</span><span class="w"></span>

<span class="w">    </span><span class="n">title</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="n">exclaim</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">year</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">toU16</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">cast</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="kt">Ok</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">cast</span><span class="kt">:</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">split</span><span class="w"> </span><span class="n">cast</span><span class="w"> </span><span class="s">","</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="290621708"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290621708" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290621708">(Jul 23 2022 at 16:28)</a>:</h4>
<p><strong>backpassing with |&gt;</strong></p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="nf">result</span><span class="w"> </span><span class="ow">=</span><span class="w"></span>
<span class="w">    </span><span class="n">fields</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">split</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="s">"|"</span><span class="w"></span>

<span class="w">    </span><span class="n">title</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="n">exclaim</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"></span>
<span class="w">    </span><span class="n">year</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">toU16</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"></span>
<span class="w">    </span><span class="n">cast</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">List</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="o">.</span><span class="n">try</span><span class="w"></span>

<span class="w">    </span><span class="kt">Ok</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">cast</span><span class="kt">:</span><span class="w"> </span><span class="kt">Str</span><span class="o">.</span><span class="n">split</span><span class="w"> </span><span class="n">cast</span><span class="w"> </span><span class="s">","</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="290621910"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290621910" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Graves <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290621910">(Jul 23 2022 at 16:33)</a>:</h4>
<p>I don’t think this is a particularly good benchmark, but it is interesting to see how on my small phone only the last version is understandable without scrolling! <a href="/user_uploads/22008/gsY-8Mof15bGMwZXxTbMt4GR/C8C09E23-67E7-44B0-8EFD-EF3416673916.png">C8C09E23-67E7-44B0-8EFD-EF3416673916.png</a> <a href="/user_uploads/22008/YNwv8G5IQOGz-SF-yf_0P_cT/DDEC1422-FC58-41E1-A2FF-D1AB097F1BF1.png">DDEC1422-FC58-41E1-A2FF-D1AB097F1BF1.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/gsY-8Mof15bGMwZXxTbMt4GR/C8C09E23-67E7-44B0-8EFD-EF3416673916.png" title="C8C09E23-67E7-44B0-8EFD-EF3416673916.png"><img src="/user_uploads/22008/gsY-8Mof15bGMwZXxTbMt4GR/C8C09E23-67E7-44B0-8EFD-EF3416673916.png"></a></div><div class="message_inline_image"><a href="/user_uploads/22008/YNwv8G5IQOGz-SF-yf_0P_cT/DDEC1422-FC58-41E1-A2FF-D1AB097F1BF1.png" title="DDEC1422-FC58-41E1-A2FF-D1AB097F1BF1.png"><img src="/user_uploads/22008/YNwv8G5IQOGz-SF-yf_0P_cT/DDEC1422-FC58-41E1-A2FF-D1AB097F1BF1.png"></a></div>



<a name="290622967"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Backpassing%20use%20cases/near/290622967" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Backpassing.20use.20cases.html#290622967">(Jul 23 2022 at 16:56)</a>:</h4>
<p>It isn't a good benchmark, but I think it does point out the truth of readability. I switched some code over to the last version recently because I find it way less noisy and easier to follow.</p>
<p>Of course if some of them were using different functions instead of <code>Result.try</code> and that was an important detail, it may not be the best for readability anymore.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>