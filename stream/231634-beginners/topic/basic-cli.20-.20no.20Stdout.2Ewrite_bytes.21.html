<html>
<head><meta charset="utf-8"><title>basic-cli - no Stdout.write_bytes! · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html">basic-cli - no Stdout.write_bytes!</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="493681110"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493681110" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kukimik <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493681110">(Jan 14 2025 at 22:21)</a>:</h4>
<p>I'd like to write a decoder (for example a <code>base64</code> decoder) that could be used in a pipeline. Thus, I'd like to be able to output the result of the decoding to <code>stdout</code> and pipe it to another executable. However, I see no <code>Stdout.write_bytes!</code> function in <code>basic-cli</code>. There is <code>Stdout.write!</code>, but my data is not a string.  Is there a good way to do it using the <code>basic-cli</code> platform? Is there a reason why such a function is not included?</p>



<a name="493681274"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493681274" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493681274">(Jan 14 2025 at 22:22)</a>:</h4>
<p>There should be <a href="https://github.com/roc-lang/basic-cli/blob/029a32465a9aa05d4a2eff01cb57e01f2e71430f/platform/File.roc#L82">https://github.com/roc-lang/basic-cli/blob/029a32465a9aa05d4a2eff01cb57e01f2e71430f/platform/File.roc#L82</a></p>



<a name="493681292"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493681292" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493681292">(Jan 14 2025 at 22:22)</a>:</h4>
<p><code>File.write_bytes! : List U8, Str =&gt; Result {} [FileWriteErr Path IOErr]</code></p>



<a name="493681340"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493681340" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493681340">(Jan 14 2025 at 22:23)</a>:</h4>
<p><a href="https://roc-lang.github.io/basic-cli/0.18.0/Path/#write_bytes">https://roc-lang.github.io/basic-cli/0.18.0/Path/#write_bytes</a>!</p>



<a name="493681388"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493681388" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493681388">(Jan 14 2025 at 22:23)</a>:</h4>
<p>Oh... stdout <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="493681476"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493681476" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493681476">(Jan 14 2025 at 22:24)</a>:</h4>
<p>Yeah, it looks like we don't have that right now. Should be easy to add though.</p>



<a name="493681537"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493681537" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493681537">(Jan 14 2025 at 22:25)</a>:</h4>
<blockquote>
<p>Is there a reason why such a function is not included?</p>
</blockquote>
<p>Probably no one has had a use case for it before</p>



<a name="493681840"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493681840" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493681840">(Jan 14 2025 at 22:27)</a>:</h4>
<p>I could see us adding these effects. </p>
<div class="codehilite"><pre><span></span><code>Stdout.write_bytes! : List U8 =&gt; Result {} [StdoutErr IOErr]
Stderr.write_bytes! : List U8 =&gt; Result {} [StderrErr IOErr]
</code></pre></div>
<p>I assume you can't use a <code>Str</code> because you don't have utf-8.. I wonder how common that is, or what the use case is. I'm wondering if we need to research the use cases a little to design the interface -- if if just adding the effect's as above is fine.</p>



<a name="493682758"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493682758" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493682758">(Jan 14 2025 at 22:35)</a>:</h4>
<p>If it mirrors file writing, I think just adding it should be fine</p>



<a name="493682868"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493682868" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493682868">(Jan 14 2025 at 22:36)</a>:</h4>
<p>If we don't have it, we should also have reading bytes from stdin</p>



<a name="493682972"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493682972" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493682972">(Jan 14 2025 at 22:37)</a>:</h4>
<p>We've got <code>Stdin.bytes!</code> so I think that's covered</p>



<a name="493682990"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493682990" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493682990">(Jan 14 2025 at 22:37)</a>:</h4>
<p><a href="https://roc-lang.github.io/basic-cli/0.18.0/Stdin/#bytes">https://roc-lang.github.io/basic-cli/0.18.0/Stdin/#bytes</a>!</p>



<a name="493683196"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493683196" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493683196">(Jan 14 2025 at 22:39)</a>:</h4>
<p>I've made an issue for this and labelled it Good First Issue... <a href="https://github.com/roc-lang/basic-cli/issues/311">https://github.com/roc-lang/basic-cli/issues/311</a></p>
<p>In case anyone would like to dip their toes into platform development. </p>
<p><span class="user-mention" data-user-id="714230">@kukimik</span> would you be interested?</p>



<a name="493800894"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/basic-cli%20-%20no%20Stdout.write_bytes%21/near/493800894" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kukimik <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/basic-cli.20-.20no.20Stdout.2Ewrite_bytes.21.html#493800894">(Jan 15 2025 at 07:53)</a>:</h4>
<blockquote>
<p>I assume you can't use a <code>Str</code> because you don't have utf-8.. I wonder how common that is, or what the use case is.</p>
</blockquote>
<p>As I tried to explain, I'd like to write a <a href="https://en.wikipedia.org/wiki/Filter_(software)">filter</a> and use it like that (not exactly, but it gives the idea):</p>
<div class="codehilite"><pre><span></span><code>cat ascii_encoded_png_file | decoder_written_in_roc | png2jpg &gt; decoded_file.jpg
</code></pre></div>
<p>So the data that <code>decoder_written_in_roc</code> outputs to <code>stdout</code> is binary, not utf-8.</p>
<p>Any binary file converter (like the <code>png2jpg</code> above) would be another example.</p>
<hr>
<blockquote>
<blockquote>
<p>Is there a reason why such a function is not included?</p>
</blockquote>
<p>Probably no one has had a use case for it before</p>
</blockquote>
<p>Ok. I thought it may be some portability issues. I think this is not obvious on Windows (see e.g. <a href="https://users.rust-lang.org/t/writing-binary-data-to-windows-stdout/66870/5">https://users.rust-lang.org/t/writing-binary-data-to-windows-stdout/66870/5</a>, <a href="https://stackoverflow.com/questions/16888339/what-is-the-simplest-way-to-write-to-stdout-in-binary-mode">https://stackoverflow.com/questions/16888339/what-is-the-simplest-way-to-write-to-stdout-in-binary-mode</a>).</p>
<hr>
<blockquote>
<p>@kukimik would you be interested?</p>
</blockquote>
<p>I'll see if time permits. If there really are some issues on Windows, I may have a hard time testing it, as I do not use Windows (and I've never written a line of Rust).</p>
<p>So I will not claim the task, but may look into it at some point.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>