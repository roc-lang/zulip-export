<html>
<head><meta charset="utf-8"><title>where are cycles allowed? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html">where are cycles allowed?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="259321471"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259321471" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Hicks <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259321471">(Oct 27 2021 at 23:35)</a>:</h4>
<p>I’m seeing some compiler hangs and just want to verify some assumptions. Are cycles in module imports allowed? How about cycles in data structure definitions?</p>



<a name="259324776"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259324776" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259324776">(Oct 28 2021 at 00:20)</a>:</h4>
<p>cycles in imports aren't allowed</p>



<a name="259324796"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259324796" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259324796">(Oct 28 2021 at 00:21)</a>:</h4>
<p>cycles in type aliases are only allowed within tag unions</p>



<a name="259324805"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259324805" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259324805">(Oct 28 2021 at 00:21)</a>:</h4>
<p>as far as I know they aren't allowed anywhere else!</p>



<a name="259325618"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259325618" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Hicks <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259325618">(Oct 28 2021 at 00:33)</a>:</h4>
<p>cool cool cool. Would you expect an import cycle to have given an error right now or is that a TODO? This is in platform code for rbt so maybe it’s being special-cased somehow?</p>



<a name="259325796"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259325796" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259325796">(Oct 28 2021 at 00:36)</a>:</h4>
<p>yeah we have an explicit error for that one</p>



<a name="259325806"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259325806" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259325806">(Oct 28 2021 at 00:36)</a>:</h4>
<p>with the fancy box art like Elm does <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="259325837"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259325837" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259325837">(Oct 28 2021 at 00:37)</a>:</h4>
<p>I think we have a general problem in file loading for "file not found" leads to a hang</p>



<a name="259325934"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259325934" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259325934">(Oct 28 2021 at 00:38)</a>:</h4>
<p>I think the reason for this is that instead of a worker reporting that it finished and failed, it instead doesn't report at all - so other worker(s) wait for it forever</p>



<a name="259326974"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259326974" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Hicks <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259326974">(Oct 28 2021 at 00:54)</a>:</h4>
<p>cool. I bet I can smoosh all these data types into one module and be fine</p>



<a name="259327090"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259327090" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Hicks <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259327090">(Oct 28 2021 at 00:55)</a>:</h4>
<p>as far as the other thing, the current design for rbt has Job -&gt; Command -&gt; Tool -&gt; Job. Reckon that can be accommodated or nah? Not familiar enough with the tagged stuff yet to know if it’s reasonable</p>



<a name="259327687"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259327687" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259327687">(Oct 28 2021 at 01:02)</a>:</h4>
<p>anything you can do with an ADT you can do with a closed tag union, so should be fine!</p>



<a name="259327733"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259327733" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259327733">(Oct 28 2021 at 01:03)</a>:</h4>
<p>phantom types currently work a little differently, but I assume they won't come up here</p>



<a name="259328774"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259328774" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Hicks <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259328774">(Oct 28 2021 at 01:21)</a>:</h4>
<p>well, those 3 types are not in the same union. Am I understanding that’s required?</p>



<a name="259332299"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259332299" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259332299">(Oct 28 2021 at 02:23)</a>:</h4>
<p>nah, so like</p>



<a name="259332382"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259332382" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259332382">(Oct 28 2021 at 02:25)</a>:</h4>
<p>in Elm you'd write <code>type Result ok err = Ok ok | Err err</code> and in Roc you'd write <code>Result ok err : [ Ok ok, Err err ]</code></p>



<a name="259332460"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259332460" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259332460">(Oct 28 2021 at 02:26)</a>:</h4>
<p>in either case you still do <code>Ok 5</code> and <code>Err "blah"</code> to make one, and you pattern match to destructure them in the same way</p>



<a name="259332476"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259332476" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259332476">(Oct 28 2021 at 02:26)</a>:</h4>
<p>you <em>can</em> use tags in other ways than this, but this is how to use them to basically be ADTs</p>



<a name="259332601"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259332601" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259332601">(Oct 28 2021 at 02:28)</a>:</h4>
<p>so an easy way to get started with them is to write what you'd write in Elm, then do the syntactic translation I showed above, and everything will work pretty much the same way you're used to unless you want to make a recursive one or a phantom type! <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="259373919"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259373919" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Hicks <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259373919">(Oct 28 2021 at 11:29)</a>:</h4>
<p>got it. Here's where I've ended up. Do you see anything in this module that would make this error happen? (I figure you might since we were looking at it yesterday) <a href="https://github.com/rtfeldman/rbt/pull/15#issuecomment-953756395">https://github.com/rtfeldman/rbt/pull/15#issuecomment-953756395</a></p>



<a name="259375491"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259375491" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259375491">(Oct 28 2021 at 11:47)</a>:</h4>
<p>ahhh I think this might be <a href="https://github.com/rtfeldman/roc/issues/1642">https://github.com/rtfeldman/roc/issues/1642</a></p>



<a name="259375618"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259375618" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259375618">(Oct 28 2021 at 11:48)</a>:</h4>
<p>try defining <code>Tool</code> higher in the file than <code>Command</code></p>



<a name="259375654"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259375654" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259375654">(Oct 28 2021 at 11:49)</a>:</h4>
<p>and <code>Command</code> higher than <code>Job</code></p>



<a name="259379400"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259379400" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Hicks <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259379400">(Oct 28 2021 at 12:21)</a>:</h4>
<p>ahh, ok. It happens when they’re tag unions too. I guess they use the same mechanism?</p>



<a name="259379576"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259379576" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259379576">(Oct 28 2021 at 12:22)</a>:</h4>
<p>oh so <code>Foo : ...</code> is Roc's syntax for type aliases - it's equivalent to <code>type alias Foo = ...</code> in Elm</p>



<a name="259379602"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259379602" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259379602">(Oct 28 2021 at 12:22)</a>:</h4>
<p>so all of those type definitions involving tag unions are type aliases <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="259383794"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/where%20are%20cycles%20allowed%3F/near/259383794" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Hicks <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/where.20are.20cycles.20allowed.3F.html#259383794">(Oct 28 2021 at 12:58)</a>:</h4>
<p>that's what I thought. OK, let's see how far I can get now <span aria-label="smiling devil" class="emoji emoji-1f608" role="img" title="smiling devil">:smiling_devil:</span></p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>