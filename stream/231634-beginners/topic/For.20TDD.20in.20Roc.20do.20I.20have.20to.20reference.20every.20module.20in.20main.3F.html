<html>
<head><meta charset="utf-8"><title>For TDD in Roc do I have to reference every module in main? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html">For TDD in Roc do I have to reference every module in main?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="445471555"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445471555" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445471555">(Jun 18 2024 at 22:18)</a>:</h4>
<p>I've been doing TDD of my first Roc function.</p>
<p>To get <code>roc test</code> to find my expectations I had to reference my new module from the main script.</p>
<p>When I added the module I got a warning (when running my tests) saying the module isn't being used.</p>
<p>It's not being used yet because I'm in the process of TDDing it.</p>
<p>How do others approach TDD in Roc? Should <code>roc test</code> pick up all expectations even if they are for code that isn't being used yet? Or do I just have to add every module I'm testing to the main code file and suffer the warnings while I'm TDDing?</p>
<p>Cheers<br>
Ash</p>



<a name="445471701"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445471701" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445471701">(Jun 18 2024 at 22:20)</a>:</h4>
<p>Can you run roc test on just your new module?</p>



<a name="445471726"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445471726" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445471726">(Jun 18 2024 at 22:20)</a>:</h4>
<p>If it doesn't import anything then this should work ok</p>



<a name="445471846"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445471846" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445471846">(Jun 18 2024 at 22:21)</a>:</h4>
<p>Should something like this work:</p>
<div class="codehilite"><pre><span></span><code>roc test --linker legacy headings.roc
</code></pre></div>



<a name="445471936"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445471936" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445471936">(Jun 18 2024 at 22:22)</a>:</h4>
<p>Yeah, that should work</p>



<a name="445472208"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445472208" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445472208">(Jun 18 2024 at 22:25)</a>:</h4>
<p>I'm getting a crash doing that:</p>
<div class="codehilite"><pre><span></span><code>&gt; roc test --linker legacy headings.roc
thread &#39;main&#39; panicked at crates/compiler/load_internal/src/file.rs:364:85:
called `Option::unwrap()` on a `None` value
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>
<p>Running under WSL2/Linux under Windows. It's a nightly build from a couple of days ago.</p>



<a name="445472326"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445472326" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445472326">(Jun 18 2024 at 22:26)</a>:</h4>
<p>Is there anyway to make <code>roc test</code> just pick up all tests in my project regardless of whether the code is actually used yet?</p>



<a name="445472430"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445472430" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445472430">(Jun 18 2024 at 22:27)</a>:</h4>
<p>That’s interesting. Can you open an issue for it? It might be helpful to see the output of <code>roc check</code> too</p>



<a name="445472567"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445472567" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445472567">(Jun 18 2024 at 22:28)</a>:</h4>
<p>Nothing comes up from <code>roc check</code>:</p>
<div class="codehilite"><pre><span></span><code>0 errors and 0 warnings found in 875 ms
</code></pre></div>



<a name="445472609"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445472609" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445472609">(Jun 18 2024 at 22:29)</a>:</h4>
<p>Is that for the module or the whole app?</p>



<a name="445472718"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445472718" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445472718">(Jun 18 2024 at 22:30)</a>:</h4>
<p>Just for reference, I have done tdd in roc before with this:</p>
<p><code>find . -name "*.roc" | entr -ccr roc test /_</code></p>
<p>Will run roc test on any roc file when it changes. That said, it won't automatically index new files. Just those that already exist.</p>



<a name="445472742"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445472742" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445472742">(Jun 18 2024 at 22:30)</a>:</h4>
<p>Whole app I guess.</p>



<a name="445472817"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445472817" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445472817">(Jun 18 2024 at 22:30)</a>:</h4>
<p>Try <code>roc check {YourModule}.roc</code></p>



<a name="445472895"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445472895" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445472895">(Jun 18 2024 at 22:31)</a>:</h4>
<p>Ok wow that's a bit different.</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>&gt;<span class="w"> </span>roc<span class="w"> </span>check<span class="w"> </span>headings.roc
An<span class="w"> </span>internal<span class="w"> </span>compiler<span class="w"> </span>expectation<span class="w"> </span>was<span class="w"> </span>broken.
This<span class="w"> </span>is<span class="w"> </span>definitely<span class="w"> </span>a<span class="w"> </span>compiler<span class="w"> </span>bug.
Please<span class="w"> </span>file<span class="w"> </span>an<span class="w"> </span>issue<span class="w"> </span>here:<span class="w"> </span>https://github.com/roc-lang/roc/issues/new/choose
thread<span class="w"> </span><span class="s1">'main'</span><span class="w"> </span>panicked<span class="w"> </span>at<span class="w"> </span>crates/compiler/load_internal/src/file.rs:3556:29:
Outstanding<span class="w"> </span>references<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>derived<span class="w"> </span>module
note:<span class="w"> </span>run<span class="w"> </span>with<span class="w"> </span><span class="sb">`</span><span class="nv">RUST_BACKTRACE</span><span class="o">=</span><span class="m">1</span><span class="sb">`</span><span class="w"> </span>environment<span class="w"> </span>variable<span class="w"> </span>to<span class="w"> </span>display<span class="w"> </span>a<span class="w"> </span>backtrace
</code></pre></div>



<a name="445472974"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445472974" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445472974">(Jun 18 2024 at 22:32)</a>:</h4>
<p>I've pushed the code already. I'm working on a chapter of the Roc "book of examples": </p>
<p><a href="https://github.com/ashleydavis/book-of-examples/tree/main/gallery/roc">https://github.com/ashleydavis/book-of-examples/tree/main/gallery/roc</a></p>



<a name="445473059"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445473059" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445473059">(Jun 18 2024 at 22:33)</a>:</h4>
<p>In my next session I'll try an updated build and then maybe log an issue.</p>
<p>Pls let me know if there's any resources already out to help me understand how to TDD in Roc.</p>



<a name="445473574"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445473574" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445473574">(Jun 18 2024 at 22:37)</a>:</h4>
<p><code>List.len(headingA)</code> looks like incorrect syntax. In roc we dont need brackets, so I think this should be <code>if List.len headingA == List.len headingB then</code></p>



<a name="445474204"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/For%20TDD%20in%20Roc%20do%20I%20have%20to%20reference%20every%20module%20in%20main%3F/near/445474204" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/For.20TDD.20in.20Roc.20do.20I.20have.20to.20reference.20every.20module.20in.20main.3F.html#445474204">(Jun 18 2024 at 22:43)</a>:</h4>
<p>Oh good catch thanks.</p>
<p><code>roc check</code> still crashes though.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>