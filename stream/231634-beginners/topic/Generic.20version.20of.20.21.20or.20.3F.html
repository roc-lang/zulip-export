<html>
<head><meta charset="utf-8"><title>Generic version of ! or ? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html">Generic version of ! or ?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="474865441"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/474865441" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> MystPi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#474865441">(Oct 04 2024 at 16:51)</a>:</h4>
<p>As far as I can tell, you can't have a custom function to use with ! or ?, right? Any reason for this? I feel this feature would be <strong>so</strong> much more powerful if you could have a custom bind function. I wanted to create a monad-based parser package, and having a custom version of ! or ? would make consuming the API much better. Coming from Gleam and being used to its very powerful <code>use</code> feature (backpassing), I was kind of unpleasantly surprised that this wasn't already possible.</p>



<a name="474873893"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/474873893" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#474873893">(Oct 04 2024 at 17:48)</a>:</h4>
<p>We used to have backpassing, but we got rid of it because it was a source of confusion and it increased the Roc learning curve. We've been getting along great so far with just <code>!</code> and <code>?</code> :)</p>



<a name="475010253"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475010253" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> MystPi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475010253">(Oct 05 2024 at 19:12)</a>:</h4>
<p>Personally, even though I was new to FP when learning Gleam, I was never confused about backpassing. It seemed quite logical since the desugaring rules are always the same.</p>



<a name="475010623"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475010623" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> MystPi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475010623">(Oct 05 2024 at 19:15)</a>:</h4>
<p>Anway—back to my original q—will there be a feature enabling custom version of ! and/or ? in Roc, something akin to</p>
<div class="codehilite" data-code-language="Croc"><pre><span></span><code><span class="k">with</span><span class="w"> </span><span class="n">Parser</span><span class="p">.</span><span class="n">andThen</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="n">Parser</span><span class="p">.</span><span class="n">token</span><span class="p">!</span><span class="w"> </span><span class="p">...</span>
<span class="w">    </span><span class="n">ident</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">parse_ident</span><span class="p">!</span>
<span class="w">    </span><span class="n">Parser</span><span class="p">.</span><span class="n">token</span><span class="p">!</span><span class="w"> </span><span class="p">...</span>
<span class="w">    </span><span class="n">Parser</span><span class="p">.</span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">SomeAst</span><span class="w"> </span><span class="n">ident</span><span class="p">)</span>
</code></pre></div>



<a name="475010733"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475010733" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> MystPi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475010733">(Oct 05 2024 at 19:15)</a>:</h4>
<p>I actually kind of like that syntax that I just made up, haha</p>



<a name="475023118"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475023118" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475023118">(Oct 05 2024 at 21:08)</a>:</h4>
<p>There are no such plans currently. Only task and result</p>



<a name="475023137"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475023137" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Cone <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475023137">(Oct 05 2024 at 21:08)</a>:</h4>
<p>Couldn't you just use tasks for that as-is?</p>



<a name="475026137"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475026137" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475026137">(Oct 05 2024 at 22:00)</a>:</h4>
<p><span class="user-mention" data-user-id="681650">@MystPi</span> have you seen the purity inference proposals? </p>
<p><a href="#narrow/stream/304641-ideas/topic/Purity.20inference.20proposal.20v3/near/468289211">https://roc.zulipchat.com/#narrow/stream/304641-ideas/topic/Purity.20inference.20proposal.20v3/near/468289211</a></p>



<a name="475027405"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475027405" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475027405">(Oct 05 2024 at 22:20)</a>:</h4>
<p>I don't think these are really related to be clear.</p>
<p>What <span class="user-mention" data-user-id="681650">@MystPi</span> wants is being able to chain no Task/Result types. For example generators, parsers, and the like. This is <code>ident &lt;- Parser.ident |&gt; Parser.andThen</code> in the backpassing world. So any Task or Result solution may not apply. That said, Task may apply if the parser is running Tasks. Most likely the parser is just over a Str, so no Task is wanted at all</p>



<a name="475027417"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475027417" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475027417">(Oct 05 2024 at 22:21)</a>:</h4>
<p>This is a common monadic pattern</p>



<a name="475027422"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475027422" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475027422">(Oct 05 2024 at 22:21)</a>:</h4>
<p>The closest we have today is record builders</p>



<a name="475027424"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475027424" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475027424">(Oct 05 2024 at 22:21)</a>:</h4>
<p>Like what is done for weaver</p>



<a name="475027432"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475027432" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475027432">(Oct 05 2024 at 22:21)</a>:</h4>
<p>Otherwise, this all has to be done manually</p>



<a name="475027494"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475027494" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475027494">(Oct 05 2024 at 22:22)</a>:</h4>
<p>This also can be done pretty well with shadowing (or mutable variables), but is more verbose than implicit state thread like is done with monads.</p>



<a name="475027542"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475027542" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475027542">(Oct 05 2024 at 22:23)</a>:</h4>
<p>If we get mutable varibles <code>_</code> suffix, the parser could be:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">state_</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">...</span>
<span class="nv">state_</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">Parser</span><span class="nf">.</span><span class="nv">token</span><span class="w"> </span><span class="nv">state_</span><span class="w"> </span><span class="nf">...</span>
<span class="nv">state_</span><span class="p">,</span><span class="w"> </span><span class="nv">ident</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">parse_ident</span><span class="w"> </span><span class="nv">state_</span>
<span class="nv">state_</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">Parser</span><span class="nf">.</span><span class="nv">token</span><span class="w"> </span><span class="nv">state_</span><span class="w"> </span><span class="nf">...</span>
<span class="nv">state_</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">Parser</span><span class="nf">.</span><span class="nv">return</span><span class="w"> </span><span class="nv">state_</span><span class="w"> </span><span class="p">(</span><span class="kt">SomeAst</span><span class="w"> </span><span class="nv">ident</span><span class="p">)</span>
</code></pre></div>



<a name="475027617"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475027617" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475027617">(Oct 05 2024 at 22:24)</a>:</h4>
<p>A lot more verbose and less nice than having arbitrary monadic chaining with <code>!</code> or backpassing.</p>
<p>I think if we get enough demand for it, we may one day open up <code>!</code> like is suggested above (or some other similar solution), but currently there has been minimal demand.</p>



<a name="475108396"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475108396" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> MystPi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475108396">(Oct 06 2024 at 15:32)</a>:</h4>
<p>Got it—I see that Roc's syntax is still very much in the development stage, which I can def understand</p>



<a name="475108438"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475108438" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> MystPi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475108438">(Oct 06 2024 at 15:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/231634-beginners/topic/Generic.20version.20of.20!.20or.20.3F/near/475026137">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="681650">MystPi</span> have you seen the purity inference proposals? </p>
<p><a href="#narrow/stream/304641-ideas/topic/Purity.20inference.20proposal.20v3/near/468289211">https://roc.zulipchat.com/#narrow/stream/304641-ideas/topic/Purity.20inference.20proposal.20v3/near/468289211</a></p>
</blockquote>
<p>No I haven't, though after reading (skimming) it I can't say I really get what it's about, haha. Not sure how it applies to my question either</p>



<a name="475110479"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Generic%20version%20of%20%21%20or%20%3F/near/475110479" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Generic.20version.20of.20.21.20or.20.3F.html#475110479">(Oct 06 2024 at 16:04)</a>:</h4>
<blockquote>
<p>I see that Roc's syntax is still very much in the development stage</p>
</blockquote>
<p>Yeah, it has changed a lot over the last year. Generally speaking, we start with the more minimal version of a feature (eg <code>!</code> just for task) before we expand to something more powerful (eg generic <code>!</code>)</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>