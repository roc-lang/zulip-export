<html>
<head><meta charset="utf-8"><title>How to use Stdin.line and a function returning a result aftr · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html">How to use Stdin.line and a function returning a result aftr</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="437816736"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437816736" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437816736">(May 09 2024 at 13:11)</a>:</h4>
<p>I have the following code:</p>
<div class="codehilite"><pre><span></span><code>shiftStr = Stdin.line!
shift &lt;- Str.toI8 shiftStr |&gt; Result.map
dbg shift
</code></pre></div>
<p>and the compiler doesn’t like it, giving me a long error about a type mismatch between something which is a <code>Task ...</code> and something which is a <code>Result ...</code>. Maybe there is a section in the tutorial I’ve skipped that give an example similar to this I’m trying to do?</p>



<a name="437817491"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437817491" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437817491">(May 09 2024 at 13:17)</a>:</h4>
<p>Your code is nested lambdas that return both tasks and results.</p>



<a name="437817506"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437817506" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437817506">(May 09 2024 at 13:17)</a>:</h4>
<p><a href="http://Result.map">Result.map</a> returns a result</p>



<a name="437817574"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437817574" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437817574">(May 09 2024 at 13:17)</a>:</h4>
<p>Do you have an example of how to read an integer from stdin?</p>



<a name="437817646"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437817646" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437817646">(May 09 2024 at 13:18)</a>:</h4>
<p>Task.await (called by <code>!</code>) returns a task/requires a task</p>



<a name="437817688"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437817688" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437817688">(May 09 2024 at 13:18)</a>:</h4>
<p>So they aren't capatible</p>



<a name="437818044"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437818044" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437818044">(May 09 2024 at 13:21)</a>:</h4>
<p><a href="https://www.roc-lang.org/packages/basic-cli/Task#fromResult">https://www.roc-lang.org/packages/basic-cli/Task#fromResult</a> should help</p>



<a name="437818124"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437818124" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437818124">(May 09 2024 at 13:21)</a>:</h4>
<p><code>shift = Str.toI8 shiftStr |&gt; Task.fromResult!</code></p>



<a name="437818193"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437818193" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437818193">(May 09 2024 at 13:22)</a>:</h4>
<p>That will let you just accumulate the errors</p>



<a name="437818230"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437818230" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437818230">(May 09 2024 at 13:22)</a>:</h4>
<p>Could also just use a raw <code>when ... is</code> on the result.</p>



<a name="437818629"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437818629" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437818629">(May 09 2024 at 13:25)</a>:</h4>
<p>Thanks ok. I was trying the exercise of having all in one indentation. This seems to work</p>
<div class="codehilite"><pre><span></span><code>shiftStr = Stdin.line!
shift &lt;- Str.toI8 shiftStr |&gt; Task.fromResult |&gt; Task.await
</code></pre></div>



<a name="437818813"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437818813" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437818813">(May 09 2024 at 13:26)</a>:</h4>
<p>Mainly to just not care about the error path</p>



<a name="437818972"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437818972" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437818972">(May 09 2024 at 13:27)</a>:</h4>
<p>This version works too</p>
<div class="codehilite"><pre><span></span><code>    shiftStr = Stdin.line!
    shift = (Str.toI8 shiftStr |&gt; Task.fromResult)!
</code></pre></div>



<a name="437848655"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437848655" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437848655">(May 09 2024 at 16:28)</a>:</h4>
<p>The parens are required in that last example? If so, pretty sure that is a bug in the <code>!</code> desugaring</p>



<a name="437851952"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437851952" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437851952">(May 09 2024 at 16:51)</a>:</h4>
<p>yes the parens are required</p>



<a name="437856462"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437856462" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437856462">(May 09 2024 at 17:21)</a>:</h4>
<p>yeah should be able to do <code>|&gt; Task.fromResult!</code> instead, sounds like a bug <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="437949879"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437949879" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437949879">(May 10 2024 at 09:06)</a>:</h4>
<p>I would advise against mixing <code>!</code> and <code>&lt;-</code> (backpassing) in the same code unless you're very experienced with both. We may get rid of backpassing in favor of <code>!</code>.</p>



<a name="437968125"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437968125" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karakatiza <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437968125">(May 10 2024 at 11:37)</a>:</h4>
<p>Does anyone know why specifically the initial version doesn't compile?  I thought syntactically it is valid?</p>
<p>Matthieu, are there any other statements after dbg in your original code? If not, maybe the body of the function is incomplete - you declare a backpassed argument, but then you might have no statements which I think is invalid syntax, you would atleast need to return something, e.g. that argument</p>



<a name="437975601"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437975601" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437975601">(May 10 2024 at 12:40)</a>:</h4>
<p><code>Result.map</code> returns a Result</p>



<a name="437975682"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437975682" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437975682">(May 10 2024 at 12:40)</a>:</h4>
<p><code>Task.await</code> requires an inner function that returns a Task</p>



<a name="437975702"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437975702" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437975702">(May 10 2024 at 12:40)</a>:</h4>
<p>So it is a type mismatch</p>



<a name="437995026"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437995026" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437995026">(May 10 2024 at 14:51)</a>:</h4>
<p>Speaking of mixing back passing and bang syntax, I discovered a bug where using the bang operator in a when block causes a compiler panic, but back passing does not. Haven’t got a min repo yet though, so haven’t determined for sure that it’s related to the when.</p>



<a name="437999170"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20use%20Stdin.line%20and%20a%20function%20returning%20a%20result%20aftr/near/437999170" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr.html#437999170">(May 10 2024 at 15:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="654587">Karakatiza</span> <a href="#narrow/stream/231634-beginners/topic/How.20to.20use.20Stdin.2Eline.20and.20a.20function.20returning.20a.20result.20aftr/near/437968125">said</a>:</p>
<blockquote>
<p>Does anyone know why specifically the initial version doesn't compile?  I thought syntactically it is valid?</p>
<p>Matthieu, are there any other statements after dbg in your original code? If not, maybe the body of the function is incomplete - you declare a backpassed argument, but then you might have no statements which I think is invalid syntax, you would atleast need to return something, e.g. that argument</p>
</blockquote>
<p>yep, as Brendan says, it was a type mismatch between a Result and a Task</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>