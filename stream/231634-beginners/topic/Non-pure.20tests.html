<html>
<head><meta charset="utf-8"><title>Non-pure tests · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Non-pure.20tests.html">Non-pure tests</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="341212286"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Non-pure%20tests/near/341212286" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Non-pure.20tests.html#341212286">(Mar 12 2023 at 02:57)</a>:</h4>
<p>It seems like with the way <code>expect</code> works, it must always test pure code. What is the plan for testing non-pure code? I think I remember hearing something about mocking out Tasks at one point. That would make it so that the tests are effectively still pure. What if I need side effects in tests? For example, I was trying to think of how property-based testing would work since you’d need a way to generate randomness.</p>



<a name="341212699"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Non-pure%20tests/near/341212699" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Non-pure.20tests.html#341212699">(Mar 12 2023 at 03:02)</a>:</h4>
<p>I don't know the details of how it will work, but the plan is to have <code>expect-fx</code> for that</p>



<a name="341212764"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Non-pure%20tests/near/341212764" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Non-pure.20tests.html#341212764">(Mar 12 2023 at 03:03)</a>:</h4>
<p>Also, for property based tests, I would assume eventually if they are wanted, they would be built into the language test runner. That way it can control the randomness (that or maybe done somehow through <code>expect-fx</code> or similar.</p>



<a name="341212821"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Non-pure%20tests/near/341212821" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Non-pure.20tests.html#341212821">(Mar 12 2023 at 03:04)</a>:</h4>
<p>And yeah, with the changes to Tasks, it should be able to mock and test them in pure roc, theoretcially with <code>expect</code></p>



<a name="341213059"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Non-pure%20tests/near/341213059" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Non-pure.20tests.html#341213059">(Mar 12 2023 at 03:06)</a>:</h4>
<p>Ah I hadn’t heard about <code>expect-fx</code>, cool. Out of curiosity, are there any designs/examples of what mocking Tasks would look like?</p>



<a name="341213219"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Non-pure%20tests/near/341213219" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Non-pure.20tests.html#341213219">(Mar 12 2023 at 03:08)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> do you have a doc for this? The effect interpreter stuff that enables task mocking?</p>



<a name="341215711"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Non-pure%20tests/near/341215711" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Non-pure.20tests.html#341215711">(Mar 12 2023 at 03:36)</a>:</h4>
<p>yeah I don't have an example yet unfortunately, it's still WIP</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>