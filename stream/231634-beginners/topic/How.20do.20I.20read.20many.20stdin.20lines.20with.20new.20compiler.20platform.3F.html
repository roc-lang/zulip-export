<html>
<head><meta charset="utf-8"><title>How do I read many stdin lines with new compiler platform? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html">How do I read many stdin lines with new compiler platform?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="566246274"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566246274" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artem <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566246274">(Jan 04 2026 at 19:58)</a>:</h4>
<p>I tried to create a small util that would read unknown beforehand amount of lines from stdin.  It reads, checks that the line is not a stop marker, and adds a line to a list.</p>
<p>Not only was it agonizingly slow (about 470 lines per second), but it ran out of stack memory on line 3330. </p>
<p>Was something wrong with my implementation?</p>
<p>Here is my code:</p>
<div class="codehilite" data-code-language="roc"><pre><span></span><code>app [main!] { pf: platform "https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.6/2BfGn4M9uWJNhDVeMghGeXNVDFijMfPsmmVeo6M4QjKX.tar.zst" }

import pf.Stdout

read_stdin_until! : Str, List(Str) =&gt; List(Str)
read_stdin_until! = |break_str, buffer| {
    new_line = Stdin.line!()
    if new_line == break_str {
        buffer
    } else {
        read_stdin_until!(break_str, buffer.append(new_line))
    }
}
</code></pre></div>
<p>Run result: <code>Roc crashed: This Roc program overflowed its stack memory. This usually means there is infinite recursion somewhere in the code.</code></p>
<p>P.S. The file that I piped into my Roc app was small: about 25 Kb in total, ~4500 lines with 3-5 chars</p>



<a name="566250211"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566250211" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566250211">(Jan 04 2026 at 21:05)</a>:</h4>
<p>Probably an interpretter bug in my opinion.</p>



<a name="566250225"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566250225" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566250225">(Jan 04 2026 at 21:05)</a>:</h4>
<p>The interpretter needs to be smart enough to do tail call optimization and avoid these kinds of stack overflows</p>



<a name="566252768"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566252768" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566252768">(Jan 04 2026 at 21:53)</a>:</h4>
<p>We dont have any TCO yet I believe</p>



<a name="566256113"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566256113" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566256113">(Jan 04 2026 at 23:01)</a>:</h4>
<p>yeah TCO has not been ported over yet</p>



<a name="566256286"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566256286" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566256286">(Jan 04 2026 at 23:06)</a>:</h4>
<p>I would normally start porting it, but I've already hit my Claude Max weekly limit halfway through the week, and rather than get a second account (which I did consider) I'm going to use this as a forcing function to spend my time on langref instead <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="566256894"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566256894" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artem <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566256894">(Jan 04 2026 at 23:18)</a>:</h4>
<p>Do you guys maybe have any ideas on how to smuggle a file into Roc? I don't want to bring it as a list into the source .roc files because it's a matter of principle now. </p>
<p>I assume that old file import syntax doesn't work on new compiler and since platform doesn't have files API, my only option is stdin. Is that correct? At this point I am considering concatenating all input into one huge line <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>. Or maybe read it in chunks to avoid stack growth</p>



<a name="566256934"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566256934" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artem <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566256934">(Jan 04 2026 at 23:20)</a>:</h4>
<p>But I was curious, of course, about exotic and silly hacks</p>



<a name="566257446"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566257446" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566257446">(Jan 04 2026 at 23:33)</a>:</h4>
<p>I think the old file import syntax works but I wouldn't swear to it <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="566257461"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566257461" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566257461">(Jan 04 2026 at 23:33)</a>:</h4>
<p>I'm on mobile but I recommend giving it a try!</p>



<a name="566261487"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566261487" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566261487">(Jan 05 2026 at 00:59)</a>:</h4>
<p>Yeah I'm pretty sure we haven't implemented the import file stuff yet</p>



<a name="566261551"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566261551" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566261551">(Jan 05 2026 at 00:59)</a>:</h4>
<p>Btw you can use basic-cli if you're happy to build the platform from source</p>



<a name="566261556"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566261556" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566261556">(Jan 05 2026 at 00:59)</a>:</h4>
<p>Use this branch <a href="https://github.com/roc-lang/basic-cli/pull/413">https://github.com/roc-lang/basic-cli/pull/413</a></p>



<a name="566261667"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566261667" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566261667">(Jan 05 2026 at 01:00)</a>:</h4>
<p>I've just been working through some issues preventing us from completing the other effects, but I think I just solved it -- so hopefully those can migrate now too</p>



<a name="566277780"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566277780" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566277780">(Jan 05 2026 at 05:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/channel/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F/near/566256286">said</a>:</p>
<blockquote>
<p>I would normally start porting it, but I've already hit my Claude Max weekly limit halfway through the week, and rather than get a second account (which I did consider) I'm going to use this as a forcing function to spend my time on langref instead <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>
</blockquote>
<p>I use opus with copilot because copilot doesn't have usage limits, its not a horrible agent either</p>



<a name="566277827"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566277827" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566277827">(Jan 05 2026 at 05:19)</a>:</h4>
<p>How does that work? like Opus does the thinking/reasoning and copilot does the tasks?</p>



<a name="566277928"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566277928" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566277928">(Jan 05 2026 at 05:21)</a>:</h4>
<p>yeah it's like claude code but its a copilot binary instead of a claude code binary <a href="https://github.com/github/copilot-cli">https://github.com/github/copilot-cli</a></p>



<a name="566278023"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566278023" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566278023">(Jan 05 2026 at 05:22)</a>:</h4>
<p>Cool, I'll give that a try when I hit my daily usage limit <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="566278210"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566278210" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566278210">(Jan 05 2026 at 05:25)</a>:</h4>
<p>There is a monthly limit and then they charge you but I've hit the monthly multiple months in a row and it just keeps going without ending I dunno if a bug or what. I'm trying not to publicize it too much in case they decide to fix it heh</p>
<p><a href="/user_uploads/22008/zfkpJ3RiG_tc89BITR1tpY8u/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/zfkpJ3RiG_tc89BITR1tpY8u/image.png" title="image.png"><img data-original-content-type="image/png" data-original-dimensions="967x240" src="/user_uploads/thumbnail/22008/zfkpJ3RiG_tc89BITR1tpY8u/image.png/840x560.webp"></a></div>



<a name="566278446"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566278446" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566278446">(Jan 05 2026 at 05:29)</a>:</h4>
<p><a href="/user_uploads/22008/Go84InZFhyaf1fCAxUyH1OtH/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/Go84InZFhyaf1fCAxUyH1OtH/image.png" title="image.png"><img data-original-content-type="image/png" data-original-dimensions="925x161" src="/user_uploads/thumbnail/22008/Go84InZFhyaf1fCAxUyH1OtH/image.png/840x560.webp"></a></div>



<a name="566278544"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566278544" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566278544">(Jan 05 2026 at 05:30)</a>:</h4>
<p>I've got it up to over 400% last month</p>



<a name="566418571"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20do%20I%20read%20many%20stdin%20lines%20with%20new%20compiler%20platform%3F/near/566418571" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nandi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20do.20I.20read.20many.20stdin.20lines.20with.20new.20compiler.20platform.3F.html#566418571">(Jan 05 2026 at 18:49)</a>:</h4>
<p>turns out their billing UX is just bad, lol got charged 100 bucks for last month usage. Not horrible but still not what I was wanting lol.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>