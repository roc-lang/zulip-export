<html>
<head><meta charset="utf-8"><title>matching while extracting from record · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/matching.20while.20extracting.20from.20record.html">matching while extracting from record</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="315442152"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/matching%20while%20extracting%20from%20record/near/315442152" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/matching.20while.20extracting.20from.20record.html#315442152">(Dec 12 2022 at 19:21)</a>:</h4>
<p>Should something like this work?</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nv">SomeType</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="o">:</span><span class="w"> </span><span class="nx">Str</span><span class="p">,</span><span class="w"> </span><span class="nv">other</span><span class="o">:</span><span class="w"> </span><span class="nx">U64</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nx">B</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="o">:</span><span class="w"> </span><span class="nx">Str</span><span class="p">,</span><span class="w"> </span><span class="nv">somethingElse</span><span class="o">:</span><span class="w"> </span><span class="nx">List</span><span class="w"> </span><span class="nx">U32</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>

<span class="nv">var</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">SomeType</span><span class="w"></span>
<span class="nv">var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="o">:</span><span class="w"> </span><span class="s">"test"</span><span class="p">,</span><span class="w"> </span><span class="nv">other</span><span class="o">:</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="nv">main</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="k">when</span><span class="w"> </span><span class="nx">var</span><span class="w"> </span><span class="o">is</span><span class="w"></span>
<span class="w">        </span><span class="nx">A</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="nx">Stdout</span><span class="p">.</span><span class="nx">line</span><span class="w"> </span><span class="nx">name</span><span class="w"></span>
</code></pre></div>



<a name="315442248"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/matching%20while%20extracting%20from%20record/near/315442248" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/matching.20while.20extracting.20from.20record.html#315442248">(Dec 12 2022 at 19:21)</a>:</h4>
<p>In current roc, the two instances of <code>name</code> in the match will not unify because the underlying record type has different fields.</p>



<a name="315442616"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/matching%20while%20extracting%20from%20record/near/315442616" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/matching.20while.20extracting.20from.20record.html#315442616">(Dec 12 2022 at 19:24)</a>:</h4>
<p>Oh, actually even if the records are the same, it still doesn't work in current roc. So really any record in general blocks <code>|</code> from being used.</p>



<a name="315506325"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/matching%20while%20extracting%20from%20record/near/315506325" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Gillette <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/matching.20while.20extracting.20from.20record.html#315506325">(Dec 13 2022 at 03:57)</a>:</h4>
<p>I would expect, as a beginner, that any disjoints within a <code>when</code> case to be exactly equivalent to if those disjoints were each given their own case (with the case body essentially just being duplicated in terms of semantic effect).</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>