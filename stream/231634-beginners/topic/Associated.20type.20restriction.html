<html>
<head><meta charset="utf-8"><title>Associated type restriction Â· beginners Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html">Associated type restriction</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="574399818"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574399818" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574399818">(Feb 17 2026 at 22:50)</a>:</h4>
<p>Hi all,<br>
I couldn't find the syntax in the tutorial or in the compiler repo, or the right terms to search here: is there a way to add a restriction/where clause to type parameters of types? E.g. an association list needs comparable keys? Or is there a way to define this in roc's way to avoid the problem?</p>
<p>(Invalid <code>where</code> clause below)</p>
<div class="codehilite"><pre><span></span><code>AssocList(key, value) ::  {
    elements : List((key, value))
} where [key.is_eq: key, key -&gt; Bool].{...}
</code></pre></div>



<a name="574400584"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574400584" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574400584">(Feb 17 2026 at 22:58)</a>:</h4>
<p>I suppose, being opaque, you could just put the restriction on the constructor (and every other func)? Although then there's nothing stopping me from doing </p>
<div class="codehilite"><pre><span></span><code>x : AssocList(MyTypeWithNoEq, Str)
x = AssocList.empty()
</code></pre></div>
<p>(Of course, why I would do that I don't know)</p>



<a name="574401478"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574401478" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574401478">(Feb 17 2026 at 23:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="820027">Jonathan</span> <a href="#narrow/channel/231634-beginners/topic/Associated.20type.20restriction/near/574399818">said</a>:</p>
<blockquote>
<p>Hi all,<br>
I couldn't find the syntax in the tutorial or in the compiler repo, or the right terms to search here: is there a way to add a restriction/where clause to type parameters of types? E.g. an association list needs comparable keys? Or is there a way to define this in roc's way to avoid the problem?</p>
<p>(Invalid <code>where</code> clause below)</p>
<p><div class="codehilite"><pre><span></span><code>AssocList(key, value) ::  {
    elements : List((key, value))
} where [key.is_eq: key, key -&gt; Bool].{...}
</code></pre></div><br>
</p>
</blockquote>
<p>I feel like that <code>where</code> clause should be valid</p>



<a name="574401518"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574401518" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574401518">(Feb 17 2026 at 23:07)</a>:</h4>
<p>Oh yeah, maybe it goes on the constructors</p>



<a name="574401552"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574401552" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574401552">(Feb 17 2026 at 23:07)</a>:</h4>
<p>This is what I'm getting on the current nightly</p>
<div class="codehilite"><pre><span></span><code>You cannot define a where clause inside a type declaration.

You&#39;re attempting do this here:
  â”Œâ”€ ./AssocList.roc:1:1
  â”‚
1 â”‚ AssocList(key, value) ::  {
2 â”‚     elements : List((key, value))
3 â”‚ }where [key.is_eq: key, key -&gt; Bool].{
4 â”‚ }
</code></pre></div>



<a name="574401683"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574401683" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574401683">(Feb 17 2026 at 23:08)</a>:</h4>
<blockquote>
<p>Oh yeah, maybe it goes on the constructors</p>
</blockquote>
<p>I guess also on the <code>.empty()</code> too would stop that edge case <span aria-label="man facepalming" class="emoji emoji-1f926-200d-2642" role="img" title="man facepalming">:man_facepalming:</span></p>



<a name="574401697"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574401697" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574401697">(Feb 17 2026 at 23:08)</a>:</h4>
<p>I think we talked about a way to alias a collection of <code>where</code> clauses into like an interface. </p>
<p>Maybe it would be something like this then?</p>
<div class="codehilite"><pre><span></span><code>AssocList(key, value) ::  {  elements : List((HasEq(key), value)) } ...
</code></pre></div>



<a name="574402043"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574402043" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574402043">(Feb 17 2026 at 23:12)</a>:</h4>
<p>Is HasEq a type alias for "something that implements is_eq"? That's pretty cool</p>



<a name="574402157"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574402157" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574402157">(Feb 17 2026 at 23:13)</a>:</h4>
<p>I <em>think</em> it would be something like but I don't know what the syntax would look like. I'm not sure we ever finished the conversation.</p>
<div class="codehilite"><pre><span></span><code>HasEq(a) : _ where a.is_eq: a, a -&gt; Bool
</code></pre></div>



<a name="574402451"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574402451" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574402451">(Feb 17 2026 at 23:16)</a>:</h4>
<p>That's quite an elegant solution tbh. So essentially you can put restrictions on aliases and record field annotations, and that bubbles up to the opaque type parameters?</p>



<a name="574402720"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574402720" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574402720">(Feb 17 2026 at 23:19)</a>:</h4>
<blockquote>
<p>I'm not sure we ever finished the conversation.</p>
</blockquote>
<p>Is that not valid syntax right now? Currently afk (but will testsoon!)</p>



<a name="574403767"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574403767" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574403767">(Feb 17 2026 at 23:30)</a>:</h4>
<p>this is actually an anti pattern! putting constraints on the type level end up being hard to work with. youâ€™ll want to put only the constraints necessary on each individual function</p>



<a name="574403823"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574403823" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574403823">(Feb 17 2026 at 23:30)</a>:</h4>
<p>thereâ€™s another thread from a while ago that has a fuller explanation, i can try to find it later</p>



<a name="574406520"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574406520" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574406520">(Feb 17 2026 at 23:55)</a>:</h4>
<p>Even if it's core to the existence of the type? I would love to read that if you could find it thank you (off soon - no pressure).</p>



<a name="574406677"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574406677" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574406677">(Feb 17 2026 at 23:57)</a>:</h4>
<p>Side note: I saw about the record builder suffix notation, eg</p>
<div class="codehilite"><pre><span></span><code>{ a: DoesNotImplEq }.MyType
</code></pre></div>
<p>Doesn't that allow bypassing smart constructor style type restrictions?</p>



<a name="574407472"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574407472" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574407472">(Feb 18 2026 at 00:05)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="341568">@Jared Ramirez</span></p>



<a name="574407672"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574407672" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574407672">(Feb 18 2026 at 00:07)</a>:</h4>
<p>Bonus question: are there any cases where you would consider type level constraints? For instance, if I am a function that accepts <code>Container(a)</code>, and there are certain type restricted functions of <code>Container</code> that I don't necessarily use yet, it would be a breaking change in the future if I started using them.</p>



<a name="574416724"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574416724" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574416724">(Feb 18 2026 at 01:53)</a>:</h4>
<p>previous discussion here: <a class="message-link" href="/#narrow/channel/304641-ideas/topic/where.20clause.20changes/near/528167945">#ideas &gt; where clause changes @ ðŸ’¬</a></p>



<a name="574416762"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574416762" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574416762">(Feb 18 2026 at 01:54)</a>:</h4>
<p>(old <code>where</code> syntax, but you get the idea)</p>



<a name="574416866"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574416866" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574416866">(Feb 18 2026 at 01:55)</a>:</h4>
<p>tldr; is if you put the constraint on the type, then you have to include that constraint in a bunch of type signatures everywhere, even if the function question doesn't need it (eg in <code>size : Dict(k, v)</code>, <code>k</code> would need <code>k.hash</code>, even though <code>size</code> doesn't do any hashing)</p>



<a name="574453912"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574453912" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574453912">(Feb 18 2026 at 08:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="341568">Jared Ramirez</span> <a href="#narrow/channel/231634-beginners/topic/Associated.20type.20restriction/near/574416724">said</a>:</p>
<blockquote>
<p>previous discussion here: <a class="message-link" href="/#narrow/channel/304641-ideas/topic/where.20clause.20changes/near/528167945">#ideas &gt; where clause changes @ ðŸ’¬</a></p>
</blockquote>
<p>Fair enough - thank you!</p>



<a name="574473248"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574473248" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574473248">(Feb 18 2026 at 10:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/231634-beginners/topic/Associated.20type.20restriction/near/574402157">said</a>:</p>
<blockquote>
<p><div class="codehilite"><pre><span></span><code>HasEq(a) : _ where a.is_eq: a, a -&gt; Bool
</code></pre></div><br>
</p>
</blockquote>
<p><del>So is this a syntax that will not make it in to roc?</del> I see it's currently frozen at least:</p>
<p><span class="user-mention silent" data-user-id="341568">Jared Ramirez</span> <a href="#narrow/channel/304641-ideas/topic/where.20clause.20changes/near/531882059">said</a>:</p>
<blockquote>
<p>Based on this convo, i'm planning on disallowing <code>where</code> clauses in type declarations for now in my next PR. </p>
</blockquote>
<p><del>Putting type constraints on a type may be an antipattern, but here it looks like it allows you to define something interface-y that you can tag a type variable with as a shorthand for all the constituent required functions in the <code>where</code>. Not sure how you'd compose though (e.g., HasEq and HasCmp).</del></p>



<a name="574473652"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Associated%20type%20restriction/near/574473652" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Associated.20type.20restriction.html#574473652">(Feb 18 2026 at 10:27)</a>:</h4>
<p>I also don't have a valid use case yet outside of type-foo so maybe don't mind me here <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>