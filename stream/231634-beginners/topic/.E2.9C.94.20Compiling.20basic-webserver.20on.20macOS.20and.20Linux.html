<html>
<head><meta charset="utf-8"><title>✔ Compiling basic-webserver on macOS and Linux · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Compiling.20basic-webserver.20on.20macOS.20and.20Linux.html">✔ Compiling basic-webserver on macOS and Linux</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="546069798"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Compiling%20basic-webserver%20on%20macOS%20and%20Linux/near/546069798" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Rubenz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Compiling.20basic-webserver.20on.20macOS.20and.20Linux.html#546069798">(Oct 20 2025 at 19:00)</a>:</h4>
<p>I want to compile <code>basic-webserver</code> targeting Ubuntu 24.04.</p>
<p>If I try it on my Mac (M1), I get:</p>
<p>roc build examples/hello-web.roc --target=linux-x64 --linker=legacy<br>
Couldn't find libgcc_s.so.1!<br>
You may need to install libgcc</p>
<p>Couldn't find the libc development files!<br>
We need the files crti.o, crtn.o, and Scrt1.o</p>
<p>On Ubuntu/Debian execute:<br>
        sudo apt install libc-dev</p>
<p>On ArchLinux/Manjaro execute:<br>
        sudo pacman -S glibc</p>
<p>On Fedora execute:<br>
        sudo dnf install glibc-devel</p>
<p>We looked in the following directories:<br>
/usr/lib/x86_64-linux-gnu<br>
/lib/x86_64-linux-gnu<br>
/usr/lib64<br>
/usr/lib</p>
<p>If I try it directly on my Ubuntu server, I get:</p>
<p>roc build basic-webserver/examples/hello-web.roc --linker=legacy<br>
Legacy linking failed: Failed to find any legacy linking files; I need one of these three paths to exist:<br>
    basic-webserver/examples/../platform/linux-x64.a<br>
    basic-webserver/examples/../platform/linux-x64.o<br>
    basic-webserver/examples/../platform/libhost.a</p>
<div class="codehilite"><pre><span></span><code>TIP: Maybe try surgical linking with the flag --linker=surgical
</code></pre></div>

<p>How can I make this work? I’d be grateful for any help! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>
<p>My Roc version is <strong>Roc nightly pre-release</strong>, built from commit <code>d73ea109cc2</code> on Tue Sep 9 10:23:53 UTC 2025.</p>



<a name="546076870"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Compiling%20basic-webserver%20on%20macOS%20and%20Linux/near/546076870" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Compiling.20basic-webserver.20on.20macOS.20and.20Linux.html#546076870">(Oct 20 2025 at 19:35)</a>:</h4>
<p>Are you using basic-webserver from a URL or using a relative path in your app header? </p>
<p>Those paths where its looking look to me like its a relative path. If you aren't using a release of the platform you will need to compile the host first. </p>
<p>I can't remember exactly how we do that, just on my phone and can't look rn.</p>



<a name="546078822"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Compiling%20basic-webserver%20on%20macOS%20and%20Linux/near/546078822" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Rubenz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Compiling.20basic-webserver.20on.20macOS.20and.20Linux.html#546078822">(Oct 20 2025 at 19:46)</a>:</h4>
<p>On the Ubuntu server itself, using the URL fixed the issue — it compiled perfectly.</p>
<p>On macOS – targeting Linux – the error message is still the same:<br>
Couldn't find libgcc_s.so.1!<br>
You may need to install libgcc</p>
<p>Couldn't find the libc development files!<br>
We need the files crti.o, crtn.o, and Scrt1.o</p>
<p>On Ubuntu/Debian execute:<br>
        sudo apt install libc-dev</p>
<p>On ArchLinux/Manjaro execute:<br>
        sudo pacman -S glibc</p>
<p>On Fedora execute:<br>
        sudo dnf install glibc-devel</p>
<p>We looked in the following directories:<br>
/usr/lib/x86_64-linux-gnu<br>
/lib/x86_64-linux-gnu<br>
/usr/lib64<br>
/usr/lib</p>



<a name="546101293"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Compiling%20basic-webserver%20on%20macOS%20and%20Linux/near/546101293" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Compiling.20basic-webserver.20on.20macOS.20and.20Linux.html#546101293">(Oct 20 2025 at 21:44)</a>:</h4>
<p>Yeah the way we do linking with the current rust design isn't great... this is an example of why we changed the platform hosts to be more explicit I think so the cross compilation will just work reliably. </p>
<p>Are you unblocked with this now?</p>



<a name="546101483"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Compiling%20basic-webserver%20on%20macOS%20and%20Linux/near/546101483" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Compiling.20basic-webserver.20on.20macOS.20and.20Linux.html#546101483">(Oct 20 2025 at 21:45)</a>:</h4>
<p>Specially the new zig compiler has a different approach for platform authors which is more explicit and avoids all the sneaky linker headaches.</p>



<a name="546101605"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Compiling%20basic-webserver%20on%20macOS%20and%20Linux/near/546101605" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Compiling.20basic-webserver.20on.20macOS.20and.20Linux.html#546101605">(Oct 20 2025 at 21:46)</a>:</h4>
<p>The platform authors are responsible for providing all of the dependencies like c runtime objects for each platform they support.</p>



<a name="546145093"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Compiling%20basic-webserver%20on%20macOS%20and%20Linux/near/546145093" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Rubenz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Compiling.20basic-webserver.20on.20macOS.20and.20Linux.html#546145093">(Oct 21 2025 at 05:17)</a>:</h4>
<p>Thanks for your help and the background info, Luke — and yes, all unblocked now! <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="546145107"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Compiling%20basic-webserver%20on%20macOS%20and%20Linux/near/546145107" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Compiling.20basic-webserver.20on.20macOS.20and.20Linux.html#546145107">(Oct 21 2025 at 05:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="581711">Johannes Rubenz</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>