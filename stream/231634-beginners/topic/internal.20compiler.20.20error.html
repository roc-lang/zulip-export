<html>
<head><meta charset="utf-8"><title>internal compiler  error · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html">internal compiler  error</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="395327095"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395327095" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395327095">(Oct 06 2023 at 20:50)</a>:</h4>
<p>I am getting compiler error on this </p>
<div class="codehilite"><pre><span></span><code>    app &quot;reg&quot;

    packages { pf: &quot;https://github.com/roc-lang/basic-cli/releases/download/0.5.0/Cufzl36_SnJ4QbOoEmiJ5dIpUxBvdB3NEySvuH82Wio.tar.br&quot; }
    imports [pf.Stdout]
    provides [main] to pf


checkMatching = \ str, reg  -&gt;
    matchStr = \ graph, pattern -&gt;
        when pattern is
            Character val -&gt;
                if val == graph then
                    Consume
                else
                    NoMatch
            Dot -&gt;
                Consume

    getFirstPat = (\  state  -&gt;
        when List.first state.current is
            Ok pat -&gt;
                { pattern : pat , state : state }
            Err _ -&gt;  getFirstPat  { state &amp; current : state.regex } )

    Str.graphemes  str
    |&gt; List.walk  { regex : reg, current : reg, matched : &quot;&quot;, result : Bool.false }  ( \ state, graph -&gt;
        if state.result == Bool.true then
            state
        else
            matchThis = getFirstPat state
            updatedState = matchThis.state

            when matchStr graph  matchThis.pattern is
                Consume -&gt;
                    if List.isEmpty updatedState.current == Bool.true then
                        { updatedState &amp; matched : Str.concat updatedState.matched graph, result : Bool.true  }
                    else
                        { updatedState &amp; matched : Str.concat updatedState.matched graph, current : List.dropFirst  updatedState.current }
                NoMatch -&gt;
                        { updatedState &amp; matched : &quot;&quot;, current : updatedState.regex } )


main =
    res = checkMatching &quot;dsads&quot;  [Dot]

    Stdout.line &quot;adfasfsa&quot;
</code></pre></div>



<a name="395376321"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395376321" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395376321">(Oct 07 2023 at 05:55)</a>:</h4>
<p>We can help if you tell us what the error is!</p>



<a name="395376324"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395376324" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395376324">(Oct 07 2023 at 05:55)</a>:</h4>
<p><code>app</code> on the first line should not be indented I think</p>



<a name="395391294"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395391294" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395391294">(Oct 07 2023 at 08:35)</a>:</h4>
<p><span class="user-mention" data-user-id="431893">@Brian Carroll</span>  internal  error I suppose , just copy paste  and try to compile. There is no formal error just crash</p>



<a name="395391321"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395391321" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395391321">(Oct 07 2023 at 08:35)</a>:</h4>
<p>at least for me</p>



<a name="395391399"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395391399" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395391399">(Oct 07 2023 at 08:36)</a>:</h4>
<p>formal error I would easily fix  myself</p>



<a name="395392819"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395392819" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395392819">(Oct 07 2023 at 08:54)</a>:</h4>
<p>Did you try removing the indentation before <code>app</code>?</p>



<a name="395392904"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395392904" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395392904">(Oct 07 2023 at 08:55)</a>:</h4>
<p>I attempted to minimise and added as an <a href="https://github.com/roc-lang/roc/issues/5889">Issue #5889</a></p>



<a name="395421012"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395421012" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395421012">(Oct 07 2023 at 13:41)</a>:</h4>
<p>do you have suggestion  how to avoid  this problem ?</p>



<a name="395423038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395423038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395423038">(Oct 07 2023 at 14:04)</a>:</h4>
<p>I would try to modify <a href="https://github.com/roc-lang/roc/issues/5889#issue-1931265022">Luke's minimal reproduction</a> in a way that produces the same output but using different data structures or functions that do not trigger this error.</p>



<a name="395448574"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395448574" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395448574">(Oct 07 2023 at 19:38)</a>:</h4>
<p>I find it helpful to break things down into smaller functions, add tests using <code>expect</code>, and type annotations. and then some combination of <code>roc test</code> and <code>roc check</code> usually helps to build up a working implementation. There may be a different set of types or data structures which work well as Anton suggested.</p>



<a name="395454282"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395454282" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395454282">(Oct 07 2023 at 20:58)</a>:</h4>
<p>what  roc test  roc  check  stands for ?</p>



<a name="395458260"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395458260" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395458260">(Oct 07 2023 at 22:10)</a>:</h4>
<p>The command line argument to for the Roc cli. So you can run the unit tests in the file with e.g. <code>roc test myFile.roc</code>. And check is similar but just checks all the types and syntax and reports any issues without actually building an executable.</p>



<a name="395458311"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395458311" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395458311">(Oct 07 2023 at 22:11)</a>:</h4>
<p>See also <a href="https://www.roc-lang.org/tutorial#tests-and-expectations">https://www.roc-lang.org/tutorial#tests-and-expectations</a></p>



<a name="395544918"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395544918" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395544918">(Oct 08 2023 at 13:57)</a>:</h4>
<p>btw.  abbreviation   { struct &amp;  field : new_field }  is crashing  if  I recreate entire  structure from scratch there is no error</p>



<a name="395652516"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/395652516" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#395652516">(Oct 09 2023 at 09:09)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> I've added this to <a href="https://github.com/roc-lang/roc/issues/5889">#5889</a></p>



<a name="397780880"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397780880" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Narek Asadorian <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397780880">(Oct 20 2023 at 21:59)</a>:</h4>
<p>I'm trying to tackle a couple documentation related GH issues, and I saw something odd in the docs regarding the pipeline operator. Specifically that <code>a b c |&gt; f x y</code> desugars to <code>f (a b c) x y</code>. Why would the pipe apply to the first hole in the RHS function? In other FP langs it applies to the last argument. So I went to test it out in the REPL and managed to crash it a few times, including with the given desugar example.</p>
<p>The REPL I ran this in is latest master rev, FWIW</p>
<div class="codehilite"><pre><span></span><code>» &quot;world&quot; |&gt; \w -&gt; Str.joinWith w [&quot;hello &quot;]
Erroneous: Expr::Call
thread &#39;main&#39; panicked at &#39;Roc hit an error&#39;, crates/repl_cli/src/cli_gen.rs:125:9
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="397781111"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397781111" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Narek Asadorian <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397781111">(Oct 20 2023 at 22:01)</a>:</h4>
<p>Why would the pipe apply the incoming value the first hole and not the last?</p>



<a name="397783787"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397783787" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Narek Asadorian <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397783787">(Oct 20 2023 at 22:30)</a>:</h4>
<div class="codehilite"><pre><span></span><code>One reason the |&gt; operator injects the value as the first argument is to make it work better with functions where argument order matters.
</code></pre></div>
<p>Ok based on the docs it's an intentional design decision, but I don't follow the reasoning. In monomorphic operations like <code>Num.div</code> the order absolutely matters, and as a user I'd expect the dividend to be the first argument ala <code>42 / 2</code> or <code>Num.div 42 2</code>. If I'm then forced to write a notation like <code>42 |&gt; Num.div 2</code> my intuition says this is <code>2 / 42</code></p>



<a name="397784503"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397784503" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397784503">(Oct 20 2023 at 22:39)</a>:</h4>
<p>interesting! So I had the opposite intuition the first time I encountered this (back in the day), and also this is the behavior I want. For example, I've wanted to do things like this on several occasions:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">num</span>
<span class="nf">|&gt;</span><span class="w"> </span><span class="nv">doSomething</span>
<span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">sub</span><span class="w"> </span><span class="mi">1</span>
</code></pre></div>
<p>So far I've never wanted the opposite - that is, I've never wanted to perform a pipeline operation of "take a number (<code>1</code> in this case) and subtract from it whatever I've built up so far." I've only ever wanted to subtract some number from what I've built up so far.</p>



<a name="397784666"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397784666" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397784666">(Oct 20 2023 at 22:41)</a>:</h4>
<p>Another example:</p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">append</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1"># appends 1 to the list</span>
</code></pre></div>
<p>that's an accurate comment in Roc (and in Elixir, which also does <code>|&gt;</code> the way Roc does) but it wouldn't be if <code>|&gt;</code> worked the other way</p>



<a name="397785092"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397785092" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397785092">(Oct 20 2023 at 22:46)</a>:</h4>
<p>regarding the repl error - the compiler shouldn't crash there of course, but I believe the problem it's hitting is that the arguments to <a href="https://www.roc-lang.org/builtins/Str#joinWith"><code>Str.joinWith</code></a> should be reversed!</p>



<a name="397785227"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397785227" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397785227">(Oct 20 2023 at 22:48)</a>:</h4>
<p>Probably just wanted <code>Str.concat</code></p>



<a name="397799182"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397799182" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Declan Joseph Maguire <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397799182">(Oct 21 2023 at 01:38)</a>:</h4>
<p>I agree with Richard, I find it way easier to conceptualise being the first argument. Maybe it's because I have the most experience with languages like python where mandatory arguments go first and the number of arguments can be unbounded, so for me, the first argument is the "primary" argument and so it makes sense to make it special. Maybe the other order better dissolves the boundaries between function application and composition.</p>



<a name="397800546"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397800546" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397800546">(Oct 21 2023 at 01:52)</a>:</h4>
<p>I think the key here is precedence.  <code>List.append x</code> should always partially apply the first argument. Which is what I expect. And which is why the primary argument goes last in most functional languages. Because that's how partial application works. </p>
<p>But if</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">num</span>
<span class="nf">|&gt;</span><span class="w"> </span><span class="nv">doSomething</span>
<span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">sub</span><span class="w"> </span><span class="mi">1</span>
</code></pre></div>
<p>is what you want in this case, surely that means the precedence is:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="p">(((</span><span class="nv">num</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">doSomething</span><span class="p">)</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">sub</span><span class="p">)</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<p>Which maybe we just need to be  document. If that's the case, then I'd expect:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">num</span>
<span class="nf">|&gt;</span><span class="w"> </span><span class="nv">doSomething</span>
<span class="nf">|&gt;</span><span class="w"> </span><span class="p">(</span><span class="kt">Num</span><span class="nf">.</span><span class="nv">sub</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<p>to work in the other way.</p>



<a name="397801001"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801001" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801001">(Oct 21 2023 at 01:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="659028">Lakin Wecker</span> <a href="#narrow/stream/231634-beginners/topic/internal.20compiler.20.20error/near/397800546">said</a>:</p>
<blockquote>
<p>I think the key here is precedence.  <code>List.append x</code> should always partially apply the first argument. Which is what I expect.</p>
</blockquote>
<p>that's a reasonable expectation in a curried language, but to be fair, <a href="https://github.com/roc-lang/roc/blob/main/FAQ.md#why-arent-roc-functions-curried-by-default">Roc isn't curried</a>! <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="397801009"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801009" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801009">(Oct 21 2023 at 01:56)</a>:</h4>
<p>There is no partial application in roc.</p>



<a name="397801025"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801025" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801025">(Oct 21 2023 at 01:56)</a>:</h4>
<p><span aria-label="cry" class="emoji emoji-1f622" role="img" title="cry">:cry:</span></p>



<a name="397801074"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801074" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801074">(Oct 21 2023 at 01:57)</a>:</h4>
<p>But <code>|&gt;</code> has a rule for applying that adds parens.</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">num</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">doSomething</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">Num</span><span class="p">.</span><span class="nx">sub</span><span class="w"> </span><span class="mi">1</span>
</code></pre></div>
<p>becomes:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">Num</span><span class="p">.</span><span class="nx">sub</span><span class="w"> </span><span class="p">(</span><span class="nx">doSomething</span><span class="w"> </span><span class="p">(</span><span class="nx">num</span><span class="p">))</span><span class="w"> </span><span class="mi">1</span>
</code></pre></div>



<a name="397801161"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801161" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801161">(Oct 21 2023 at 01:58)</a>:</h4>
<blockquote>
<p>Since no mainstream programming languages today are curried</p>
</blockquote>
<p>This feels like a pretty bold claim</p>



<a name="397801175"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801175" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Declan Joseph Maguire <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801175">(Oct 21 2023 at 01:58)</a>:</h4>
<p>I mean you can spoof partial application with anonymous function, if you so need.</p>



<a name="397801187"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801187" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801187">(Oct 21 2023 at 01:58)</a>:</h4>
<p>that said, if you ever need partial application, it is very easy to add a lambda</p>



<a name="397801228"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801228" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801228">(Oct 21 2023 at 01:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="659028">Lakin Wecker</span> <a href="#narrow/stream/231634-beginners/topic/internal.20compiler.20.20error/near/397801161">said</a>:</p>
<blockquote>
<blockquote>
<p>Since no mainstream programming languages today are curried</p>
</blockquote>
<p>This feels like a pretty bold claim</p>
</blockquote>
<p>really? What's a mainstream curried language? haha</p>



<a name="397801250"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801250" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801250">(Oct 21 2023 at 01:59)</a>:</h4>
<p>Haskell?</p>



<a name="397801267"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801267" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801267">(Oct 21 2023 at 01:59)</a>:</h4>
<p>I'd say "Haskell is mainstream" is an extremely bold claim <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="397801268"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801268" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801268">(Oct 21 2023 at 01:59)</a>:</h4>
<p>Now we're just debating what is mainstream or not. <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="397801344"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801344" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801344">(Oct 21 2023 at 02:00)</a>:</h4>
<p><code>const plus = (x: number) =&gt; (y: number): number =&gt; x + h;</code></p>



<a name="397801409"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801409" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801409">(Oct 21 2023 at 02:01)</a>:</h4>
<p>Anyways, I'm not complaining. It's a design choice and it's not a hill I'll die on. I find it surprising, but it's fine.</p>



<a name="397801451"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801451" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Declan Joseph Maguire <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801451">(Oct 21 2023 at 02:01)</a>:</h4>
<p>While some other people are here, have we considered some syntax sugar that lets <code>\x -&gt; x*x*x</code> be reexpressed as <code>\x*x*x</code>? Having to include function arguments in single-variable anonymous functions is a bit bloated, and I don't think it ought to cause too many issues.</p>



<a name="397801476"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801476" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801476">(Oct 21 2023 at 02:01)</a>:</h4>
<p>it's always really interesting to see what different people find surprising when coming to Roc! There's quite a variety depending on what people are used to</p>



<a name="397801556"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801556" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801556">(Oct 21 2023 at 02:02)</a>:</h4>
<p><span class="user-mention" data-user-id="657838">@Declan Joseph Maguire</span> we have not; I'd say start a new <a class="stream" data-stream-id="304641" href="/#narrow/stream/304641-ideas">#ideas</a> thread about it!</p>



<a name="397801571"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801571" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801571">(Oct 21 2023 at 02:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="657838">Declan Joseph Maguire</span> <a href="#narrow/stream/231634-beginners/topic/internal.20compiler.20.20error/near/397801451">said</a>:</p>
<blockquote>
<p>While some other people are here, have we considered some syntax sugar that lets <code>\x -&gt; x*x*x</code> be reexpressed as <code>\x*x*x</code>? Having to include function arguments in single-variable anonymous functions is a bit bloated, and I don't think it ought to cause too many issues.</p>
</blockquote>
<p>Like scala's <code>_</code>?</p>



<a name="397801601"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801601" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801601">(Oct 21 2023 at 02:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/231634-beginners/topic/internal.20compiler.20.20error/near/397801476">said</a>:</p>
<blockquote>
<p>it's always really interesting to see what different people find surprising when coming to Roc! There's quite a variety depending on what people are used to</p>
</blockquote>
<p>To be fair, I haven't learned roc. I just assumed: natively compiled  Elm without the "web"</p>



<a name="397801612"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801612" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801612">(Oct 21 2023 at 02:03)</a>:</h4>
<p>Which is probably a bad assumption. <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="397801622"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801622" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801622">(Oct 21 2023 at 02:03)</a>:</h4>
<p>as evidenced here.</p>



<a name="397801664"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801664" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Declan Joseph Maguire <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801664">(Oct 21 2023 at 02:03)</a>:</h4>
<p>Fantastic! I haven't dug through all the threads and they often hold more than the title suggests, so I'm a bit hesitant to make suggestions that may have already been discussed and rejected - I ain't an expert at language design after all, I don't know what's useful and what's a footgun always.</p>



<a name="397801704"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801704" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Declan Joseph Maguire <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801704">(Oct 21 2023 at 02:04)</a>:</h4>
<p>I'll go make that asap</p>



<a name="397801757"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397801757" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lakin Wecker <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397801757">(Oct 21 2023 at 02:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="657838">Declan Joseph Maguire</span> <a href="#narrow/stream/231634-beginners/topic/internal.20compiler.20.20error/near/397801664">said</a>:</p>
<blockquote>
<p>... what's a footgun always.</p>
</blockquote>
<p>C++?</p>



<a name="397928770"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/397928770" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#397928770">(Oct 22 2023 at 09:11)</a>:</h4>
<p>I think piping into the first argument is very natural for me because I learnt R and then Julia which both have packages that rely on that convention, and neither of which are automatically currying languages</p>



<a name="398125990"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/398125990" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Narek Asadorian <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#398125990">(Oct 23 2023 at 17:04)</a>:</h4>
<p>Whoops I sniped everyone into a conversation and signed off for the weekend <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="398126364"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/398126364" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Narek Asadorian <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#398126364">(Oct 23 2023 at 17:07)</a>:</h4>
<p>I think the distilled point from my original post comes down to this: it is misleading from a user's perspective to have to write <code>List.append 1</code> when they  know the first argument is supposed to be a <code>List Int</code> and not an <code>Int</code>.</p>
<p>It distorts the notion of having a "strongly typed function" to apply a value of the wrong type to a positional argument.</p>



<a name="398126754"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/398126754" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Narek Asadorian <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#398126754">(Oct 23 2023 at 17:09)</a>:</h4>
<p>However let's say the syntax involved a placeholder for the unapplied variable, it would read more clearly</p>
<div class="codehilite"><pre><span></span><code>[0, 1, 2]
    |&gt; List.append _ 3
</code></pre></div>



<a name="398129796"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/398129796" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#398129796">(Oct 23 2023 at 17:32)</a>:</h4>
<p>Yeah, if you are used to currying, it reads weird. That said, I think it takes exceptionally little time to get used to always missing the first arg.</p>
<p>Also, we have discussed placeholders in general before. If we enable putting a place holder in the first position, people will want to use it in other positions. Discussions around allowing it in other locations have always led to the recommendation to just use a lambda.</p>
<p>With that in mind, adding a placeholder to the first location has issues. Either it is weirdly restricted to only the first position, or it means we have to accept general placeholders. Which again, so far have not gotten anywhere in idea discussions cause adding an extra lambda is simple.</p>



<a name="398129834"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/398129834" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#398129834">(Oct 23 2023 at 17:32)</a>:</h4>
<p>Hmm...also, where do you put a placeholder with a raw lambda?</p>



<a name="398130168"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/398130168" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Narek Asadorian <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#398130168">(Oct 23 2023 at 17:35)</a>:</h4>
<blockquote>
<p>Yeah, if you are used to currying, it reads weird</p>
</blockquote>
<p>Right, the pipe operator originates in curried languages (OCaml pretty sure). So most coming from that world will have the same reaction.</p>



<a name="398130320"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/398130320" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Narek Asadorian <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#398130320">(Oct 23 2023 at 17:36)</a>:</h4>
<p>And yeah agreed the placeholder would open up the discussion for allowing it any position, which would be kind of a cool feature but also harder to implement</p>



<a name="398130442"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/398130442" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Narek Asadorian <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#398130442">(Oct 23 2023 at 17:37)</a>:</h4>
<p>But to use a lambda on the RHS kind of defeats the purpose of pipelining / point free</p>



<a name="398132070"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/internal%20compiler%20%20error/near/398132070" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/internal.20compiler.20.20error.html#398132070">(Oct 23 2023 at 17:50)</a>:</h4>
<p>If you think of the pipeline just as a list of stages to execute, I don't think a lambda defeats the purposes. Just means that the function the pipeline was referencing wasn't worth defining as a standalone function.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>