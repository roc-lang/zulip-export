<html>
<head><meta charset="utf-8"><title>New to Roc, question about effects · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html">New to Roc, question about effects</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="546683684"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546683684" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Stevens <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546683684">(Oct 23 2025 at 13:42)</a>:</h4>
<p>Hey all, I'm new to Roc, the separation between platforms and applications is a really cool idea.</p>
<p>I watched a talk about how Roc's implementation of effects is essentially that the function returns a result object with something indicating what effect should be performed and then that is implemented elsewhere. I'm wondering, is it possible for the platform to expose custom effects to the application that only the platform can handle?</p>
<p>At work I use a workflow service like cadence / temporal for orchestrating distributed, long running jobs. To use it correctly devs essentially have to write pure functions. Anything producing side effects has to be called in a special way so the workflow library can manage them. If you don't you'll get wierd behavior at runtime.</p>
<p>Turns out getting everyone to use this thing correctly consistently is impossible. With something like Roc though, I could imagine a framework that could statically catch those problems. For it to work though I think the platform would have to be able to expose some set of effect types that it can manage execution for and then resume running Roc code once the effect result is available.</p>



<a name="546692904"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546692904" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546692904">(Oct 23 2025 at 14:16)</a>:</h4>
<blockquote>
<p>the platform to expose custom effects to the application that only the platform can handle</p>
</blockquote>
<blockquote>
<p>platform would have to be able to expose some set of effect types that it can manage execution for and then resume running Roc code once the effect result is available.</p>
</blockquote>
<p>As far as I know, that is exactly how Roc works! All effects in Roc are handled by the platform, and then it hands the return value of the effect back to the application</p>



<a name="546693022"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546693022" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546693022">(Oct 23 2025 at 14:17)</a>:</h4>
<p>Let me know if I've misunderstood your question <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="546713503"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546713503" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Stevens <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546713503">(Oct 23 2025 at 15:40)</a>:</h4>
<p>So it's possible to write something like</p>
<div class="codehilite"><pre><span></span><code>result0 = ctx.run!(&quot;foo&quot;)
result1 = ctx.run!(&quot;bar&quot;, result0)
</code></pre></div>
<p>Where there's like an hour long gap between the two results where the platform is busy running task "foo"?</p>



<a name="546731218"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546731218" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jasper Woudenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546731218">(Oct 23 2025 at 17:07)</a>:</h4>
<p>Such a cool idea combining Roc with Temporal, I think that'd be a great fit!</p>
<p>I think what you describe should be possible. One way to go about it would be for the platform to keep track of results from previous effects, serialize and store them. Then when the "current effect" resolves the platform can rerun the function, return stored results from effect calls, and when a new effect is encountered queue it and exit. The platform would keep doing that until the function can run off stored results to completion. Because the platform is fully in control of what effects are possible and Roc is otherwise pure there'd be no way for users to do anything illegal.</p>



<a name="546752785"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546752785" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Stevens <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546752785">(Oct 23 2025 at 19:15)</a>:</h4>
<p>It does seem like a perfect fit. We have another problem where when we push new versions of our service if we aren't extra careful inflight workflows will have unexpected behavior as they start to run on the new code.</p>
<p>You can solve that with workflow versioning, but that's another footgun that goes off all the time.</p>
<p>Could I keep multiple versions of the roc application around and always run requests on the same version they started on?</p>



<a name="546758745"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546758745" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546758745">(Oct 23 2025 at 19:52)</a>:</h4>
<p>For sure</p>



<a name="546758753"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546758753" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546758753">(Oct 23 2025 at 19:52)</a>:</h4>
<p>They are just binaries</p>



<a name="546762107"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546762107" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Stevens <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546762107">(Oct 23 2025 at 20:14)</a>:</h4>
<p>Are there any examples of platforms in go/rust/zig that are slightly more complicated than this one? <a href="https://roc-lang.org/examples/GoPlatform/README">https://roc-lang.org/examples/GoPlatform/README</a></p>



<a name="546798745"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546798745" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546798745">(Oct 24 2025 at 02:27)</a>:</h4>
<p>Slightly, maybe not, significantly, probably.</p>



<a name="546798761"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546798761" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546798761">(Oct 24 2025 at 02:27)</a>:</h4>
<p>We have basic cli and basic webserver in rust</p>



<a name="546798771"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546798771" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546798771">(Oct 24 2025 at 02:27)</a>:</h4>
<p>We have this like roc wasm4 in zig</p>



<a name="546836627"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20to%20Roc%2C%20question%20about%20effects/near/546836627" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20to.20Roc.2C.20question.20about.20effects.html#546836627">(Oct 24 2025 at 08:15)</a>:</h4>
<p>Some links:<br>
<a href="https://github.com/roc-lang/basic-cli">https://github.com/roc-lang/basic-cli</a><br>
<a href="https://github.com/roc-lang/basic-webserver">https://github.com/roc-lang/basic-webserver</a><br>
<a href="https://github.com/lukewilliamboswell/roc-wasm4">https://github.com/lukewilliamboswell/roc-wasm4</a> (this one is not up to date)</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>