<html>
<head><meta charset="utf-8"><title>Type mismatch: Do I need explicit typing here? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html">Type mismatch: Do I need explicit typing here?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="449986251"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449986251" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449986251">(Jul 08 2024 at 21:31)</a>:</h4>
<p>I'm getting a type mismatch been literal records. I feel like I need to add explicit types to my literal records to force them into the right shape. How do I do that? Or is there a better way to get this code to compile?</p>
<p>Here is the code:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>interface<span class="w"> </span>Layout
<span class="w">    </span>exposes<span class="w"> </span><span class="o">[</span>getNextRow,<span class="w"> </span>GalleryItem,<span class="w"> </span>LayoutItem,<span class="w"> </span>LayoutRow<span class="o">]</span>
<span class="w">    </span>imports<span class="w"> </span><span class="o">[]</span>

GalleryItem<span class="w"> </span>:<span class="w"> </span><span class="o">{</span>
<span class="o">}</span>

LayoutItem<span class="w"> </span>:<span class="w"> </span><span class="o">{</span>
<span class="o">}</span>

LayoutRow<span class="w"> </span>:<span class="w"> </span><span class="o">{</span>
<span class="w">    </span>items<span class="w"> </span>:<span class="w"> </span>List<span class="w"> </span>LayoutItem,
<span class="w">    </span>galleryWidth<span class="w"> </span>:<span class="w"> </span>Int<span class="w"> </span>U32,
<span class="w">    </span>targetRowHeight<span class="w"> </span>:<span class="w"> </span>Int<span class="w"> </span>U32,
<span class="w">    </span>currentRowItems<span class="w"> </span>:<span class="w"> </span>List<span class="w"> </span>GalleryItem,
<span class="w">    </span>width<span class="w"> </span>:<span class="w"> </span>Int<span class="w"> </span>U32,
<span class="w">    </span>removedItems<span class="w"> </span>:<span class="w"> </span>List<span class="w"> </span>GalleryItem,
<span class="w">    </span>headings<span class="w"> </span>:<span class="w"> </span>List<span class="w"> </span>Str
<span class="o">}</span>

getNextRow<span class="w"> </span>:<span class="w"> </span>List<span class="w"> </span>GalleryItem,<span class="w">  </span>Int<span class="w"> </span>U32,<span class="w">        </span>Int<span class="w"> </span>U32,<span class="w">         </span>List<span class="w"> </span>GalleryItem,<span class="w">  </span>Int<span class="w"> </span>U32,<span class="w">    </span>List<span class="w"> </span>GalleryItem,<span class="w">   </span>List<span class="w"> </span>Str<span class="w"> </span>-&gt;<span class="w"> </span><span class="o">{</span><span class="w"> </span>row<span class="w"> </span>:<span class="w"> </span>LayoutRow,<span class="w"> </span>removedItems:<span class="w"> </span>List<span class="w"> </span>GalleryItem,<span class="w"> </span>remainingItems<span class="w"> </span>:<span class="w"> </span>List<span class="w"> </span>GalleryItem<span class="w"> </span><span class="o">}</span>
<span class="nv">getNextRow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="se">\i</span>tems,<span class="w">            </span>galleryWidth,<span class="w">   </span>targetRowHeight,<span class="w"> </span>currentRowItems,<span class="w">   </span>width,<span class="w">      </span>removedItems,<span class="w">       </span>headings<span class="w"> </span>-&gt;
<span class="w">    </span><span class="k">if</span><span class="w"> </span>List.len<span class="w"> </span><span class="nv">items</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span>row:<span class="w"> </span><span class="o">{</span>
<span class="w">            </span>items:<span class="w"> </span><span class="o">[]</span>,
<span class="w">            </span>galleryWidth,
<span class="w">            </span>targetRowHeight,
<span class="w">            </span>currentRowItems,
<span class="w">            </span>width,
<span class="w">            </span>removedItems,
<span class="w">            </span>headings
<span class="w">        </span><span class="o">}</span>,
<span class="w">        </span>removedItems:<span class="w"> </span><span class="o">[]</span>,
<span class="w">        </span>remainingItems:<span class="w"> </span><span class="o">[]</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span>row:<span class="w"> </span><span class="o">{</span>
<span class="w">            </span>items:<span class="w"> </span><span class="o">[]</span>,
<span class="w">            </span>galleryWidth,
<span class="w">            </span>targetRowHeight,
<span class="w">            </span>currentRowItems,
<span class="w">            </span>width,
<span class="w">            </span>removedItems,
<span class="w">            </span>headings
<span class="w">        </span><span class="o">}</span>,
<span class="w">        </span>removedItems:<span class="w"> </span><span class="o">[]</span>,
<span class="w">        </span>remainingItems:<span class="w"> </span><span class="o">[]</span>
<span class="w">    </span><span class="o">}</span>

<span class="c1"># Empty gallery returns empty layout.</span>
expect<span class="w"> </span>getNextRow<span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="m">10</span><span class="w">  </span><span class="m">20</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>row:<span class="w"> </span><span class="o">{</span>
<span class="w">        </span>items:<span class="w"> </span><span class="o">[]</span>,
<span class="w">        </span>galleryWidth:<span class="w"> </span><span class="m">10</span>,
<span class="w">        </span>targetRowHeight:<span class="w"> </span><span class="m">20</span>,
<span class="w">        </span>currentRowItems:<span class="w"> </span><span class="o">[]</span>,
<span class="w">        </span>width:<span class="w"> </span><span class="m">0</span>,
<span class="w">        </span>removedItems:<span class="w"> </span><span class="o">[]</span>,
<span class="w">        </span>headings:<span class="w"> </span><span class="o">[]</span>
<span class="w">    </span><span class="o">}</span>,
<span class="w">    </span>removedItems:<span class="w"> </span><span class="o">[]</span>,
<span class="w">    </span>remainingItems:<span class="w"> </span><span class="o">[]</span>
<span class="o">}</span>

<span class="c1"># No items left returns current row.</span>
expect
<span class="w">    </span><span class="nv">currentRowItems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[{}</span>,<span class="w"> </span><span class="o">{}</span>,<span class="w"> </span><span class="o">{}]</span>
<span class="w">    </span><span class="nv">removedItems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[{}</span>,<span class="w"> </span><span class="o">{}]</span>
<span class="w">    </span><span class="nv">headings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s2">"a"</span>,<span class="w"> </span><span class="s2">"b"</span><span class="o">]</span>
<span class="w">    </span><span class="nv">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>getNextRow<span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">21</span><span class="w"> </span>currentRowItems<span class="w"> </span><span class="m">12</span><span class="w"> </span>removedItems<span class="w"> </span>headings
<span class="w">    </span><span class="nv">out</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="c1"># &lt;-- This is where it says the problem is.</span>
<span class="w">        </span>row:<span class="w"> </span><span class="o">{</span>
<span class="w">            </span>items:<span class="w"> </span>currentRowItems,
<span class="w">            </span>offsetY:<span class="w"> </span><span class="m">0</span>,
<span class="w">            </span>height:<span class="w"> </span><span class="m">21</span>,
<span class="w">            </span>currentRowItems:<span class="w"> </span><span class="o">[]</span>,
<span class="w">            </span>width:<span class="w"> </span><span class="m">12</span>,
<span class="w">            </span>headings
<span class="w">        </span><span class="o">}</span>,
<span class="w">        </span>removedItems,
<span class="w">        </span>remainingItems:<span class="w"> </span><span class="o">[]</span>
<span class="w">    </span><span class="o">}</span>
</code></pre></div>
<p>Here is the error:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>──<span class="w"> </span>TYPE<span class="w"> </span>MISMATCH<span class="w"> </span><span class="k">in</span><span class="w"> </span>Layout.roc<span class="w"> </span>─────────────────────────────────────────────────

This<span class="w"> </span>2nd<span class="w"> </span>argument<span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>has<span class="w"> </span>an<span class="w"> </span>unexpected<span class="w"> </span>type:

<span class="m">71</span>│&gt;<span class="w">      </span><span class="nv">out</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">{</span>
<span class="m">72</span>│&gt;<span class="w">          </span>row:<span class="w"> </span><span class="o">{</span>
<span class="m">73</span>│&gt;<span class="w">              </span>items:<span class="w"> </span>currentRowItems,
<span class="m">74</span>│&gt;<span class="w">              </span>offsetY:<span class="w"> </span><span class="m">0</span>,
<span class="m">75</span>│&gt;<span class="w">              </span>height:<span class="w"> </span><span class="m">21</span>,
<span class="m">76</span>│&gt;<span class="w">              </span>currentRowItems:<span class="w"> </span><span class="o">[]</span>,
<span class="m">77</span>│&gt;<span class="w">              </span>width:<span class="w"> </span><span class="m">12</span>,
<span class="m">78</span>│&gt;<span class="w">              </span>headings
<span class="m">79</span>│&gt;<span class="w">          </span><span class="o">}</span>,
<span class="m">80</span>│&gt;<span class="w">          </span>removedItems,
<span class="m">81</span>│&gt;<span class="w">          </span>remainingItems:<span class="w"> </span><span class="o">[]</span>
<span class="m">82</span>│&gt;<span class="w">      </span><span class="o">}</span>

The<span class="w"> </span>argument<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>record<span class="w"> </span>of<span class="w"> </span>type:

<span class="w">    </span><span class="o">{</span><span class="w"> </span>row<span class="w"> </span>:<span class="w"> </span><span class="o">{</span>
<span class="w">        </span>height<span class="w"> </span>:<span class="w"> </span>Num<span class="w"> </span>*,
<span class="w">        </span>offsetY<span class="w"> </span>:<span class="w"> </span>Num<span class="w"> </span>*,
<span class="w">        </span>width<span class="w"> </span>:<span class="w"> </span>Num<span class="w"> </span>*,
<span class="w">        </span>…
<span class="w">    </span><span class="o">}</span>,<span class="w"> </span>…<span class="w"> </span><span class="o">}</span>

<span class="nv">But</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>needs<span class="w"> </span>its<span class="w"> </span>2nd<span class="w"> </span>argument<span class="w"> </span>to<span class="w"> </span>be:

<span class="w">    </span><span class="o">{</span><span class="w"> </span>row<span class="w"> </span>:<span class="w"> </span><span class="o">{</span>
<span class="w">        </span>galleryWidth<span class="w"> </span>:<span class="w"> </span>Int<span class="w"> </span>U32,
<span class="w">        </span>removedItems<span class="w"> </span>:<span class="w"> </span>List<span class="w"> </span><span class="o">{}</span>,
<span class="w">        </span>targetRowHeight<span class="w"> </span>:<span class="w"> </span>Int<span class="w"> </span>U32,
<span class="w">        </span>width<span class="w"> </span>:<span class="w"> </span>Int<span class="w"> </span>U32,
<span class="w">        </span>…
<span class="w">    </span><span class="o">}</span>,<span class="w"> </span>…<span class="w"> </span><span class="o">}</span>

Tip:<span class="w"> </span>Seems<span class="w"> </span>like<span class="w"> </span>a<span class="w"> </span>record<span class="w"> </span>field<span class="w"> </span>typo.<span class="w"> </span>Maybe<span class="w"> </span>height<span class="w"> </span>should<span class="w"> </span>be
galleryWidth?

Tip:<span class="w"> </span>Can<span class="w"> </span>more<span class="w"> </span><span class="nb">type</span><span class="w"> </span>annotations<span class="w"> </span>be<span class="w"> </span>added?<span class="w"> </span>Type<span class="w"> </span>annotations<span class="w"> </span>always<span class="w"> </span><span class="nb">help</span>
me<span class="w"> </span>give<span class="w"> </span>more<span class="w"> </span>specific<span class="w"> </span>messages,<span class="w"> </span>and<span class="w"> </span>I<span class="w"> </span>think<span class="w"> </span>they<span class="w"> </span>could<span class="w"> </span><span class="nb">help</span><span class="w"> </span>a<span class="w"> </span>lot<span class="w"> </span><span class="k">in</span>
this<span class="w"> </span><span class="k">case</span>
</code></pre></div>



<a name="449987903"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449987903" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449987903">(Jul 08 2024 at 21:46)</a>:</h4>
<p>Well the first thing I'm seeing is that <code>height</code> isn't included in the return value from getNextRow, so that is a mismatch...</p>



<a name="449988442"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449988442" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449988442">(Jul 08 2024 at 21:48)</a>:</h4>
<p>Same goes for <code>offsetY</code></p>



<a name="449989020"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449989020" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449989020">(Jul 08 2024 at 21:50)</a>:</h4>
<p>Oh yeah I'm seeing the problems. Thanks for the pointer in the right direction.</p>
<p>It would be cool if the Roc compiler could diff the expected and actual types side by side.</p>



<a name="449990076"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449990076" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449990076">(Jul 08 2024 at 21:55)</a>:</h4>
<p>The error message is pretty much giving you the diff here. It doesn't list the full record, but only the diff:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">The</span><span class="w"> </span><span class="nx">argument</span><span class="w"> </span><span class="o">is</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">record</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nv">type</span><span class="o">:</span>

<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nv">row</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nv">height</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Num</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w">  </span><span class="c1"># this is present but should not be</span>
<span class="w">        </span><span class="nv">offsetY</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Num</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="c1"># this is present but should not be</span>
<span class="w">        </span><span class="nv">width</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Num</span><span class="w"> </span><span class="o">*</span><span class="p">,</span>
<span class="w">        </span><span class="err">…</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="err">…</span><span class="w"> </span><span class="p">}</span>

<span class="nx">But</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">needs</span><span class="w"> </span><span class="nx">its</span><span class="w"> </span><span class="mi">2</span><span class="nx">nd</span><span class="w"> </span><span class="nx">argument</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nv">be</span><span class="o">:</span>

<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nv">row</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nv">galleryWidth</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Int</span><span class="w"> </span><span class="nx">U32</span><span class="p">,</span><span class="w"> </span><span class="c1"># this is missing</span>
<span class="w">        </span><span class="nv">removedItems</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">List</span><span class="w"> </span><span class="p">{},</span><span class="w">  </span><span class="c1"># this is missing</span>
<span class="w">        </span><span class="nv">targetRowHeight</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Int</span><span class="w"> </span><span class="nx">U32</span><span class="p">,</span><span class="w"> </span><span class="c1"># this is missing</span>
<span class="w">        </span><span class="nv">width</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Int</span><span class="w"> </span><span class="nx">U32</span><span class="p">,</span>
<span class="w">        </span><span class="err">…</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="err">…</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>I'm not sure why it included <code>width</code> (maybe the compiler chooses to include 1 overlap?), but every other record field listed in the error message is problematic. The fields that are okay are omitted as part of the <code>...</code>.</p>



<a name="449990391"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449990391" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449990391">(Jul 08 2024 at 21:56)</a>:</h4>
<p>Thanks so much.</p>



<a name="449992430"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449992430" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449992430">(Jul 08 2024 at 22:06)</a>:</h4>
<p>But you're right, the error message could definitely be clearer in specifying the specific issues, ie extra/missing fields, type mismatch, etc. With that said, it does typically do a pretty good job of surfacing <em>which</em> fields are problematic.</p>



<a name="449992809"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449992809" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449992809">(Jul 08 2024 at 22:08)</a>:</h4>
<p><span class="user-mention" data-user-id="651556">@Ashley Davis</span> would you be able to post a reproduction of this error message? I have some ideas for how to improve it!</p>



<a name="449993256"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449993256" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449993256">(Jul 08 2024 at 22:12)</a>:</h4>
<p>I posted one earlier in this chat, but I have a different one now as I'm trying to work through the differences in my types: </p>
<div class="codehilite"><pre><span></span><code>── TYPE MISMATCH in Layout.roc ─────────────────────────────────────────────────

Something is off with the then branch of this if expression:

21│   getNextRow : List GalleryItem,  Int U32,        Int U32,         List GalleryItem,  Int U32,    List GalleryItem,   List Str -&gt; { row : LayoutRow, removedItems: List GalleryItem, remainingItems : List GalleryItem }
22│   getNextRow = \items,            galleryWidth,   targetRowHeight, currentRowItems,   width,      removedItems,       headings -&gt;

23│&gt;      if List.len items == 0 then {
24│&gt;          row: {
25│&gt;              items: [],
26│&gt;              galleryWidth,
27│&gt;              targetRowHeight,
28│&gt;              currentRowItems,
29│&gt;              width,
30│&gt;              removedItems,
31│&gt;              headings
32│&gt;          },
33│&gt;          removedItems: [],
34│&gt;          remainingItems: []
35│&gt;      }

This branch is a record of type:

    {
        remainingItems : List GalleryItem,
        removedItems : List GalleryItem,
        row : {
            currentRowItems : List GalleryItem,
            galleryWidth : Int U32,
            headings : List Str,
            items : List *,
            removedItems : List GalleryItem,
            targetRowHeight : Int U32,
            width : Int U32,
        },
    }

But the type annotation on getNextRow says it should be:

    {
        remainingItems : List GalleryItem,
        removedItems : List GalleryItem,
        row : {
            currentRowItems : List GalleryItem,
            galleryWidth : Int U32,
            headings : List Str,
            items : List {},
            targetRowHeight : Int U32,
            width : Int U32,
        },
    }
</code></pre></div>



<a name="449993836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449993836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449993836">(Jul 08 2024 at 22:18)</a>:</h4>
<p>I'm surprised it's not doing that on the second one though; do you have a repro of that one?</p>



<a name="449993889"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449993889" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449993889">(Jul 08 2024 at 22:18)</a>:</h4>
<p>I've actually fixed it now.</p>



<a name="449994264"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449994264" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449994264">(Jul 08 2024 at 22:22)</a>:</h4>
<p>I'm getting better anyway (thanks to help here) at reading the error messages and working out what the problem is.</p>
<p>I'm trying to spend 30 minutes each morning to move this project forward and learn Roc, but currently it's moving really slowly as I'm struggling a bit with basic syntax (and it doesn't help when I shoot myself in the foot either).</p>



<a name="449994394"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449994394" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449994394">(Jul 08 2024 at 22:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="651556">Ashley Davis</span> <a href="#narrow/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F/near/449993889">said</a>:</p>
<blockquote>
<p>I've actually fixed it now.</p>
</blockquote>
<p>great! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>
<p>if there’s any way to get back to the state where the error reproduced, that would be very helpful!</p>



<a name="449995229"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449995229" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449995229">(Jul 08 2024 at 22:28)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> if it helps I can produce a cut down sample that produces a similar error message? I'm not sure I can get the exact same one as before though.</p>



<a name="449995380"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449995380" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449995380">(Jul 08 2024 at 22:28)</a>:</h4>
<p>sure!</p>



<a name="449995546"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449995546" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449995546">(Jul 08 2024 at 22:29)</a>:</h4>
<p>just the one where no diffs appear - I don't know why the <code>…</code>s aren't happening in that one like they are in the original message you posted, and I'd like to investigate</p>



<a name="449996676"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449996676" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449996676">(Jul 08 2024 at 22:34)</a>:</h4>
<p>Here's a cutdown example, but it might be too simple!</p>
<p>Let's say I made a typo <code>smed</code> instead of <code>smeg</code>:</p>
<div class="codehilite"><pre><span></span><code>interface Layout
    exposes [getNextRow, GalleryItem]
    imports []

getNextRow = \_ -&gt; {
        smeg: 1
    }

expect getNextRow == {
    smed: 2
}
</code></pre></div>
<p>When the problem is this simple it's easy to decipher the error message:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>──<span class="w"> </span>TYPE<span class="w"> </span>MISMATCH<span class="w"> </span><span class="k">in</span><span class="w"> </span>Layout.roc<span class="w"> </span>─────────────────────────────────────────────────

This<span class="w"> </span>2nd<span class="w"> </span>argument<span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>has<span class="w"> </span>an<span class="w"> </span>unexpected<span class="w"> </span>type:

<span class="w"> </span><span class="m">9</span>│&gt;<span class="w">  </span>expect<span class="w"> </span><span class="nv">getNextRow</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">{</span>
<span class="m">10</span>│&gt;<span class="w">      </span>smed:<span class="w"> </span><span class="m">2</span>
<span class="m">11</span>│&gt;<span class="w">  </span><span class="o">}</span>

The<span class="w"> </span>argument<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>record<span class="w"> </span>of<span class="w"> </span>type:

<span class="w">    </span><span class="o">{</span><span class="w"> </span>smed<span class="w"> </span>:<span class="w"> </span>Num<span class="w"> </span>*<span class="w"> </span><span class="o">}</span>

<span class="nv">But</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>needs<span class="w"> </span>its<span class="w"> </span>2nd<span class="w"> </span>argument<span class="w"> </span>to<span class="w"> </span>be:

<span class="w">    </span>*<span class="w"> </span>-&gt;<span class="w"> </span><span class="o">{</span><span class="w"> </span>smeg<span class="w"> </span>:<span class="w"> </span>Num<span class="w"> </span>*<span class="w"> </span><span class="o">}</span>
</code></pre></div>
<p>Here's a slight more complicated version:</p>
<div class="codehilite"><pre><span></span><code>interface Layout
    exposes [getNextRow, GalleryItem]
    imports []

getNextRow = \_ -&gt; {
        a: 1,
        b: 2,
        smeg: 1,
        c: 3
    }

expect getNextRow == {
    a: 1,
    b: 2,
    smed: 2,
    c: 3
}
</code></pre></div>
<p>In the more complicated case it's more difficult to see what you got wrong:</p>
<div class="codehilite"><pre><span></span><code>── TYPE MISMATCH in Layout.roc ─────────────────────────────────────────────────

This 2nd argument to == has an unexpected type:

12│&gt;  expect getNextRow == {
13│&gt;      a: 1,
14│&gt;      b: 2,
15│&gt;      smed: 2,
16│&gt;      c: 3
17│&gt;  }

The argument is a record of type:

    {
        a : Num *,
        b : Num *,
        c : Num *,
        smed : Num *,
    }

But == needs its 2nd argument to be:

    * -&gt; {
        a : Num *,
        b : Num *,
        c : Num *,
        smeg : Num *,
    }
</code></pre></div>



<a name="449996845"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449996845" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449996845">(Jul 08 2024 at 22:36)</a>:</h4>
<p>I could probably still recover the original error by hitting the undo key, so let me know if you need that.</p>



<a name="449997041"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449997041" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449997041">(Jul 08 2024 at 22:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="651556">Ashley Davis</span> <a href="#narrow/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F/near/449996845">said</a>:</p>
<blockquote>
<p>I could probably still recover the original error by hitting the undo key, so let me know if you need that.</p>
</blockquote>
<p>if you could, that would be great!</p>



<a name="449997071"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449997071" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449997071">(Jul 08 2024 at 22:38)</a>:</h4>
<p>the ones you just showed are separately interesting - the <code>* -&gt;</code> at the beginning means one of them was a function and the other one wasn't, and I think we should also have a separate special-case for that <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="449997134"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449997134" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449997134">(Jul 08 2024 at 22:39)</a>:</h4>
<p>Ha you should see how many errors I've gone through!</p>



<a name="449997153"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449997153" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449997153">(Jul 08 2024 at 22:39)</a>:</h4>
<p>I'm a complete newbie again.</p>



<a name="449997256"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449997256" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449997256">(Jul 08 2024 at 22:40)</a>:</h4>
<p>This would be easy if I could undo to a specific time ;)</p>



<a name="449997775"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449997775" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449997775">(Jul 08 2024 at 22:45)</a>:</h4>
<p>Ok I've been back through my undo buffer and extracted 3 sets of code + error.</p>



<a name="449997846"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449997846" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449997846">(Jul 08 2024 at 22:46)</a>:</h4>
<p>1: <a href="https://gist.github.com/ashleydavis/487284e01796ac5751bfd580f181f027">https://gist.github.com/ashleydavis/487284e01796ac5751bfd580f181f027</a></p>



<a name="449997876"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449997876" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449997876">(Jul 08 2024 at 22:46)</a>:</h4>
<p>2: <a href="https://gist.github.com/ashleydavis/7b130aa61e3056254bfbbf33f35aa9f8">https://gist.github.com/ashleydavis/7b130aa61e3056254bfbbf33f35aa9f8</a></p>



<a name="449997910"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449997910" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449997910">(Jul 08 2024 at 22:47)</a>:</h4>
<p>3: <a href="https://gist.github.com/ashleydavis/eb2d39dd07e8f9c37d9bb6e24eed0ee6">https://gist.github.com/ashleydavis/eb2d39dd07e8f9c37d9bb6e24eed0ee6</a></p>



<a name="449997934"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449997934" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Davis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449997934">(Jul 08 2024 at 22:47)</a>:</h4>
<p>At the end of each one is the error.</p>



<a name="449998178"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/449998178" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#449998178">(Jul 08 2024 at 22:49)</a>:</h4>
<p>sweet, thank you so much! <span aria-label="heart eyes" class="emoji emoji-1f60d" role="img" title="heart eyes">:heart_eyes:</span></p>



<a name="450426639"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/450426639" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#450426639">(Jul 10 2024 at 11:45)</a>:</h4>
<p>so for the first one, I'm not sure what the best error message would be <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="450426739"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/450426739" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#450426739">(Jul 10 2024 at 11:45)</a>:</h4>
<p>the current error is:</p>
<div class="codehilite"><pre><span></span><code>── TYPE MISMATCH in repro.roc ──────────────────────────────────────────────────

This 2nd argument to == has an unexpected type:

74│&gt;      == {
75│&gt;          row: LayoutRow {
76│&gt;              items: currentRowItems,
77│&gt;              offsetY: 0,
78│&gt;              height: 21,
79│&gt;              currentRowItems: [],
80│&gt;              width: 12,
81│&gt;              headings,
82│&gt;          },
83│&gt;          removedItems,
84│&gt;          remainingItems: [],
85│&gt;      }

The argument is a record of type:

    { row : [LayoutRow {
        currentRowItems : List *,
        headings : List Str,
        height : Num *,
        items : List {},
        offsetY : Num *,
        width : Num *,
    }], … }

But == needs its 2nd argument to be:

    { row : {
        currentRowItems : List {},
        galleryWidth : Int U32,
        headings : List Str,
        items : List LayoutItem,
        removedItems : List {},
        targetRowHeight : Int U32,
        width : Int U32,
    }, … }

────────────────────────────────────────────────────────────────────────────────
</code></pre></div>



<a name="450426985"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/450426985" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#450426985">(Jul 10 2024 at 11:46)</a>:</h4>
<p>the thing that makes this tricky is that one of them is <code>row: { ... }</code> and the other is <code>row : [LayoutRow { ... }]</code></p>



<a name="450427083"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/450427083" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#450427083">(Jul 10 2024 at 11:46)</a>:</h4>
<p>but also the record types are different</p>



<a name="450427282"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/450427282" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#450427282">(Jul 10 2024 at 11:47)</a>:</h4>
<p>so if we just show the diff as being between <code>row : { ... }</code> and <code>row : [LayoutRow { ... }]</code> then it won't be showing that the record types are different too</p>



<a name="450427514"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/450427514" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#450427514">(Jul 10 2024 at 11:48)</a>:</h4>
<p>but if we show the record types, would it really make sense to diff them, considering one of them is a tag payload and the other isn't?</p>



<a name="450427692"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/450427692" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#450427692">(Jul 10 2024 at 11:49)</a>:</h4>
<p>but if we don't diff them, it seems easy to miss the <code>[LayoutRow ...]</code> tag around the record - I missed it the first few times I looked at this error <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="450440795"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/450440795" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#450440795">(Jul 10 2024 at 12:38)</a>:</h4>
<p>I would avoid deep diff for simplicity and have only shallow one. I think this is a good way to show the difference of the fields, as in your message: <code>row : { ... }</code> vs <code>row : [LayoutRow { ... }]</code> (literally use three dots). imo it's even enough to have <code>row : ...</code> vs <code>row : [ ... ]</code> to emphasize the highest level incompatibility. After the user fixed it, they will get the next type error and it's fine. Small clear steps are better than a big chunk of diff one should comprehend</p>



<a name="450495695"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/450495695" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#450495695">(Jul 10 2024 at 16:02)</a>:</h4>
<p>yeah I agree</p>



<a name="450495843"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Type%20mismatch%3A%20Do%20I%20need%20explicit%20typing%20here%3F/near/450495843" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Type.20mismatch.3A.20Do.20I.20need.20explicit.20typing.20here.3F.html#450495843">(Jul 10 2024 at 16:03)</a>:</h4>
<p>just focusing on "before you can fix anything else that might be wrong here, you have to fix this"</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>