<html>
<head><meta charset="utf-8"><title>✔ Is this a bug in Roc or an EBKAC? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html">✔ Is this a bug in Roc or an EBKAC?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="450328394"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450328394" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Francois Green <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450328394">(Jul 10 2024 at 02:29)</a>:</h4>
<p>I tried moving an old F# (and OCaml before that ) lesson I found on the web to Roc:</p>
<div class="codehilite" data-code-language="F#"><pre><span></span><code><span class="k">let</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="mi">4</span><span class="o">;</span><span class="w"> </span><span class="mi">3</span><span class="o">;</span><span class="w"> </span><span class="mi">8</span><span class="o">;</span><span class="w"> </span><span class="mi">7</span><span class="o">;</span><span class="w"> </span><span class="mi">10</span><span class="o">;</span><span class="w"> </span><span class="mi">1</span><span class="o">;</span><span class="w"> </span><span class="mi">9</span><span class="o">;</span><span class="w"> </span><span class="mi">6</span><span class="o">;</span><span class="w"> </span><span class="mi">5</span><span class="o">;</span><span class="w"> </span><span class="mi">0</span><span class="o">;</span><span class="w"> </span><span class="mi">2</span><span class="o">]</span>

<span class="k">type</span><span class="w"> </span><span class="nc">Tree</span><span class="o">&lt;</span><span class="k">'</span><span class="n">a</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">Tree</span><span class="o">&lt;</span><span class="k">'</span><span class="n">a</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">'</span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Tree</span><span class="o">&lt;</span><span class="k">'</span><span class="n">a</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Leaf</span>

<span class="k">let</span><span class="w"> </span><span class="nv">rec</span><span class="w"> </span><span class="n">insert</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">element</span><span class="o">,</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="k">with</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">Leaf</span><span class="w">                       </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="o">(</span><span class="n">Leaf</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">Leaf</span><span class="o">)</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="o">(</span><span class="n">l</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">r</span><span class="o">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="o">((</span><span class="n">insert</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="n">x</span><span class="o">),</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">r</span><span class="o">)</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="o">(</span><span class="n">l</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">r</span><span class="o">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w">  </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="o">(</span><span class="n">l</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="o">(</span><span class="n">insert</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">x</span><span class="o">))</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Leaf</span>

<span class="k">let</span><span class="w"> </span><span class="nv">tree</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">List</span><span class="p">.</span><span class="n">fold</span><span class="w"> </span><span class="n">insert</span><span class="w"> </span><span class="n">Leaf</span><span class="w"> </span><span class="n">data</span>

<span class="k">let</span><span class="w"> </span><span class="nv">rec</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">goal</span><span class="w"> </span><span class="n">queue</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">queue</span><span class="w"> </span><span class="k">with</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="bp">[]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="o">(</span><span class="n">Leaf</span><span class="o">,</span><span class="w"> </span><span class="o">_)::</span><span class="n">tail</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">goal</span><span class="w"> </span><span class="n">tail</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="o">(</span><span class="n">Node</span><span class="w"> </span><span class="o">(</span><span class="n">l</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">r</span><span class="o">),</span><span class="w"> </span><span class="n">trace</span><span class="o">)::</span><span class="n">tail</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">goal</span><span class="w"> </span><span class="k">then</span>
<span class="w">            </span><span class="n">Some</span><span class="w"> </span><span class="o">(</span><span class="nn">List</span><span class="p">.</span><span class="n">rev</span><span class="w"> </span><span class="o">(</span><span class="n">y</span><span class="o">::</span><span class="n">trace</span><span class="o">))</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">            </span><span class="n">find</span><span class="w"> </span><span class="n">goal</span><span class="w"> </span><span class="o">(</span><span class="n">tail</span><span class="w"> </span><span class="o">@</span><span class="w"> </span><span class="o">[</span><span class="n">l</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">::</span><span class="n">trace</span><span class="o">;</span><span class="w"> </span><span class="n">r</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">::</span><span class="n">trace</span><span class="o">])</span>

<span class="n">printfn</span><span class="w"> </span><span class="s">"%A"</span><span class="w"> </span><span class="o">(</span><span class="n">find</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">[</span><span class="n">tree</span><span class="o">,</span><span class="w"> </span><span class="bp">[]</span><span class="o">])</span>
</code></pre></div>
<p>The above works, but my Roc version gives me an error:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">app</span><span class="w"> </span><span class="p">[</span><span class="nv">main</span><span class="p">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">pf</span><span class="nf">:</span><span class="w"> </span><span class="nv">platform</span><span class="w"> </span><span class="s">"https://github.com/roc-lang/basic-cli/releases/download/0.10.0/vNe6s9hWzoTZtFmNkvEICPErI9ptji_ySjicO6CkucY.tar.br"</span><span class="p">,</span>
<span class="p">}</span>

<span class="kn">import</span><span class="w"> </span><span class="nc">pf.Stdout</span>

<span class="nv">data</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span>

<span class="kt">Tree</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">[</span><span class="kt">Node</span><span class="w"> </span><span class="p">(</span><span class="kt">Tree</span><span class="w"> </span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="kt">Tree</span><span class="w"> </span><span class="nv">a</span><span class="p">),</span><span class="w"> </span><span class="kt">Leaf</span><span class="p">]</span>

<span class="nv">insert</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">tree</span><span class="p">,</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">when</span><span class="w"> </span><span class="p">(</span><span class="nv">element</span><span class="p">,</span><span class="w"> </span><span class="nv">tree</span><span class="p">)</span><span class="w"> </span><span class="nv">is</span>
<span class="w">        </span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="kt">Leaf</span><span class="p">)</span><span class="w">                     </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Node</span><span class="w"> </span><span class="p">(</span><span class="kt">Leaf</span><span class="p">,</span><span class="w"> </span><span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="kt">Leaf</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="kt">Node</span><span class="w"> </span><span class="p">(</span><span class="nv">l</span><span class="p">,</span><span class="w"> </span><span class="nv">y</span><span class="p">,</span><span class="w"> </span><span class="nv">r</span><span class="p">))</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nf">&lt;=</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Node</span><span class="w"> </span><span class="p">((</span><span class="nv">insert</span><span class="w"> </span><span class="nv">l</span><span class="w"> </span><span class="nv">x</span><span class="p">),</span><span class="w"> </span><span class="nv">y</span><span class="p">,</span><span class="w"> </span><span class="nv">r</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="kt">Node</span><span class="w"> </span><span class="p">(</span><span class="nv">l</span><span class="p">,</span><span class="w"> </span><span class="nv">y</span><span class="p">,</span><span class="w"> </span><span class="nv">r</span><span class="p">))</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nf">&gt;</span><span class="w"> </span><span class="nv">y</span><span class="w">  </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Node</span><span class="w"> </span><span class="p">(</span><span class="nv">l</span><span class="p">,</span><span class="w"> </span><span class="nv">y</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nv">insert</span><span class="w"> </span><span class="nv">r</span><span class="w"> </span><span class="nv">x</span><span class="p">))</span>
<span class="w">        </span><span class="nv">_</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Leaf</span>

<span class="nv">boom</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">walk</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="kt">Leaf</span><span class="w"> </span><span class="nv">insert</span>

<span class="nv">find</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">goal</span><span class="p">,</span><span class="w"> </span><span class="nv">queue</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">when</span><span class="w"> </span><span class="nv">queue</span><span class="w"> </span><span class="nv">is</span>
<span class="w">        </span><span class="p">[]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">None</span>
<span class="w">        </span><span class="p">[(</span><span class="kt">Leaf</span><span class="p">,</span><span class="w"> </span><span class="nv">_</span><span class="p">),</span><span class="w"> </span><span class="nf">..</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nv">tail</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">find</span><span class="w"> </span><span class="nv">goal</span><span class="w"> </span><span class="nv">tail</span>
<span class="w">        </span><span class="p">[(</span><span class="kt">Node</span><span class="w"> </span><span class="p">(</span><span class="nv">l</span><span class="p">,</span><span class="w"> </span><span class="nv">y</span><span class="p">,</span><span class="w"> </span><span class="nv">r</span><span class="p">),</span><span class="w"> </span><span class="nv">trace</span><span class="p">),</span><span class="w"> </span><span class="nf">..</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nv">tail</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="kr">if</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="nv">goal</span><span class="w"> </span><span class="kr">then</span>
<span class="w">                </span><span class="kt">Some</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="nf">.</span><span class="nv">reverse</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="nf">.</span><span class="nv">prepend</span><span class="w"> </span><span class="nv">trace</span><span class="w"> </span><span class="nv">y</span><span class="p">))</span>
<span class="w">            </span><span class="kr">else</span>
<span class="w">                </span><span class="nv">find</span><span class="w"> </span><span class="nv">goal</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="nf">.</span><span class="nv">concat</span><span class="w"> </span><span class="nv">tail</span><span class="w"> </span><span class="p">[(</span><span class="nv">l</span><span class="p">,</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">prepend</span><span class="w"> </span><span class="nv">trace</span><span class="w"> </span><span class="nv">y</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="nv">r</span><span class="p">,</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">prepend</span><span class="w"> </span><span class="nv">trace</span><span class="w"> </span><span class="nv">y</span><span class="p">)])</span>

<span class="kr">main </span><span class="nf">=</span>

<span class="w">    </span><span class="kt">Stdout</span><span class="nf">.</span><span class="nv">line</span><span class="w"> </span><span class="s">"$(Inspect.toStr (find 5 [boom, []] ))"</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code>TYPE MISMATCH

This list contains elements with different types:

32│      Stdout.line &quot;$(Inspect.toStr (find 5 [boom, []] ))&quot;
                                                     ^^

Its 2nd element is a list of type:

    List *

However, the 1st element has the type:

    [
        Leaf,
        Node (
            a,
            Num *,
            a,
        )c,
    ] as a

Every element in a list must have the same type!
</code></pre></div>
<p>Any help would be greatly appreciated.</p>



<a name="450328613"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450328613" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450328613">(Jul 10 2024 at 02:31)</a>:</h4>
<p>If you move the <code>boom</code> definition inside of <code>main</code>, does it work?</p>



<a name="450328827"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450328827" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450328827">(Jul 10 2024 at 02:33)</a>:</h4>
<p>That didn't work for me, ignore it</p>



<a name="450328865"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450328865" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450328865">(Jul 10 2024 at 02:33)</a>:</h4>
<p>Thanks for posting the whole function, let me see if I can figure out what the issue is</p>



<a name="450329209"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450329209" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450329209">(Jul 10 2024 at 02:37)</a>:</h4>
<p>I find adding type annotations to "pin" the types can help sometimes. Like it enables the compiler to find the issue sooner, or provide a better error message.</p>



<a name="450329211"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450329211" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450329211">(Jul 10 2024 at 02:37)</a>:</h4>
<p>Yeah, that's what I'm doing</p>



<a name="450329373"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450329373" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450329373">(Jul 10 2024 at 02:39)</a>:</h4>
<p>Could you define an fn and use that instead of <code>[]</code>?</p>
<div class="codehilite"><pre><span></span><code>empty : Tree a
empty = []
</code></pre></div>



<a name="450329751"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450329751" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450329751">(Jul 10 2024 at 02:43)</a>:</h4>
<p>Yeah, with doing that, I found two things:</p>
<ul>
<li><code>Leaf</code> is an empty tree, not <code>[]</code>, so the list is currently not homogeous</li>
<li>find doesn't quite line up, type-wise:</li>
</ul>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">find</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Num</span><span class="w"> </span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="p">(</span><span class="kt">Tree</span><span class="w"> </span><span class="p">(</span><span class="kt">Num</span><span class="w"> </span><span class="nv">a</span><span class="p">))</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="kt">Some</span><span class="w"> </span><span class="p">(</span><span class="kt">Num</span><span class="w"> </span><span class="nv">a</span><span class="p">),</span><span class="w"> </span><span class="kt">None</span><span class="p">]</span>
<span class="nv">find</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">goal</span><span class="p">,</span><span class="w"> </span><span class="nv">queue</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">when</span><span class="w"> </span><span class="nv">queue</span><span class="w"> </span><span class="nv">is</span>
<span class="w">        </span><span class="p">[]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">None</span>
<span class="w">        </span><span class="p">[(</span><span class="kt">Leaf</span><span class="p">,</span><span class="w"> </span><span class="nv">_</span><span class="p">),</span><span class="w"> </span><span class="nf">..</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nv">tail</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">find</span><span class="w"> </span><span class="nv">goal</span><span class="w"> </span><span class="nv">tail</span>
<span class="w">        </span><span class="p">[(</span><span class="kt">Node</span><span class="w"> </span><span class="p">(</span><span class="nv">l</span><span class="p">,</span><span class="w"> </span><span class="nv">y</span><span class="p">,</span><span class="w"> </span><span class="nv">r</span><span class="p">),</span><span class="w"> </span><span class="nv">trace</span><span class="p">),</span><span class="w"> </span><span class="nf">..</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nv">tail</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="kr">if</span><span class="w"> </span><span class="nv">y</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="nv">goal</span><span class="w"> </span><span class="kr">then</span>
<span class="w">                </span><span class="kt">Some</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="nf">.</span><span class="nv">reverse</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="nf">.</span><span class="nv">prepend</span><span class="w"> </span><span class="nv">trace</span><span class="w"> </span><span class="nv">y</span><span class="p">))</span>
<span class="w">            </span><span class="kr">else</span>
<span class="w">                </span><span class="nv">find</span><span class="w"> </span><span class="nv">goal</span><span class="w"> </span><span class="p">(</span><span class="kt">List</span><span class="nf">.</span><span class="nv">concat</span><span class="w"> </span><span class="nv">tail</span><span class="w"> </span><span class="p">[(</span><span class="nv">l</span><span class="p">,</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">prepend</span><span class="w"> </span><span class="nv">trace</span><span class="w"> </span><span class="nv">y</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="nv">r</span><span class="p">,</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">prepend</span><span class="w"> </span><span class="nv">trace</span><span class="w"> </span><span class="nv">y</span><span class="p">)])</span>
</code></pre></div>
<p>gives 4 errors, one of which is:</p>
<div class="codehilite"><pre><span></span><code>── TYPE MISMATCH in test.roc ───────────────────────────────────────────────────

This 2nd argument to find has an unexpected type:

26│                  find goal (List.concat tail [(l, List.prepend trace y), (r, List.prepend trace y)])
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

This concat call produces:

    List (
        *,
        List (Num a),
    )b

But find needs its 2nd argument to be:

    List [
        Leaf,
        Node (
            a,
            Num a,
            a,
        )b,
    ] as a
</code></pre></div>



<a name="450330078"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450330078" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450330078">(Jul 10 2024 at 02:46)</a>:</h4>
<div class="codehilite"><pre><span></span><code>find : a, List (Tree a) -&gt; [Some a, None] where a implements Eq
</code></pre></div>
<p>is a better type annotation btw</p>



<a name="450331604"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450331604" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450331604">(Jul 10 2024 at 03:02)</a>:</h4>
<p>I'm sure I'm missing something, but how is <code>[boom, []]</code> expected to typecheck? Isn't <code>boom</code> a <code>Tree I64</code> while <code>[]</code> is a <code>List *</code>?</p>



<a name="450331761"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450331761" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450331761">(Jul 10 2024 at 03:04)</a>:</h4>
<p>Maybe it should be just <code>[boom]</code> or <code>[boom, Leaf]</code>?</p>



<a name="450332185"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450332185" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450332185">(Jul 10 2024 at 03:09)</a>:</h4>
<p>Oh, I think there is a tuple missing cause F# uses <code>,</code> for tuples and <code>;</code> for lists</p>



<a name="450332236"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450332236" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450332236">(Jul 10 2024 at 03:10)</a>:</h4>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="w">    </span><span class="kt">Stdout</span><span class="nf">.</span><span class="nv">line</span><span class="w"> </span><span class="s">"$(Inspect.toStr (find 5 [(boom, [])]))"</span>
</code></pre></div>



<a name="450332264"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450332264" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450332264">(Jul 10 2024 at 03:10)</a>:</h4>
<p>That runs for me</p>



<a name="450338154"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450338154" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Francois Green <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450338154">(Jul 10 2024 at 03:55)</a>:</h4>
<p>Thank you so much!  I keep forgetting that it's commas not parentheses that connote tuple in these ML languages!</p>



<a name="450338159"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Is%20this%20a%20bug%20in%20Roc%20or%20an%20EBKAC%3F/near/450338159" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Is.20this.20a.20bug.20in.20Roc.20or.20an.20EBKAC.3F.html#450338159">(Jul 10 2024 at 03:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="674667">Francois Green</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>