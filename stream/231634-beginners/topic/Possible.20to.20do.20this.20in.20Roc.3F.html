<html>
<head><meta charset="utf-8"><title>Possible to do this in Roc? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html">Possible to do this in Roc?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="276388173"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276388173" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Cone <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276388173">(Mar 23 2022 at 19:32)</a>:</h4>
<p>Hello, I was wondering if it would be possible to do something like this in Roc (C# code):</p>
<div class="codehilite"><pre><span></span><code>class ComponentRegistry
    {
        Dictionary&lt;Type, Object&gt; components = new Dictionary&lt;Type, object&gt;();

        public void AddComponent&lt;T&gt;(T component)
        {
            components[typeof(T)] = component;
        }

        public bool GetComponentOfType&lt;T&gt;(out T result)
        {
            if (components.ContainsKey(typeof(T)))
            {
                result = (T)components[typeof(T)];
                return true;
            }

            result = default(T);
            return false;
        }
    }
</code></pre></div>
<p>Basically, have a generic store of components that would let you retrieve a component by its type? In case context helps I'm brainstorming how <a href="https://en.wikipedia.org/wiki/Entity_component_system">ECS</a> could be done in Roc</p>



<a name="276389046"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276389046" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276389046">(Mar 23 2022 at 19:40)</a>:</h4>
<p>I believe tags are the recommended mechanism for "runtime typing"</p>



<a name="276399009"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276399009" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Cone <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276399009">(Mar 23 2022 at 20:55)</a>:</h4>
<p>But tags require the ComponentRegistry to know about every possible thing that can be put into it?</p>



<a name="276399308"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276399308" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276399308">(Mar 23 2022 at 20:57)</a>:</h4>
<p>we don't have this kind of reflection. You can see here how a type is turned into a value <code>typeof(T)</code>. That's not something we can do</p>



<a name="276399382"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276399382" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276399382">(Mar 23 2022 at 20:58)</a>:</h4>
<p>types and values live in distinct universes in roc</p>



<a name="276399421"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276399421" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276399421">(Mar 23 2022 at 20:58)</a>:</h4>
<p>interestingly, to get this sort of feature you can be both more strongly and more weakly typed</p>



<a name="276399474"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276399474" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276399474">(Mar 23 2022 at 20:59)</a>:</h4>
<p>e.g. haskell can actually achieve the same result (if you enable a bunch of language extensions)</p>



<a name="276401129"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276401129" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276401129">(Mar 23 2022 at 21:11)</a>:</h4>
<p>If you don't want the component registry to know every "type" it can use as a dict key, then it sounds like you'll want to use strings as keys. Perhaps a component is a record with a <code>.type</code> string field.</p>



<a name="276401996"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276401996" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276401996">(Mar 23 2022 at 21:18)</a>:</h4>
<p>That wouldn't work in roc. What would the actual component be? <code>{ type: Str, component: ??? }</code></p>
<p>So it would have to be an explicit tag I think.</p>
<p>If you used a type variable for the component, all components would need the same type.</p>



<a name="276402044"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276402044" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276402044">(Mar 23 2022 at 21:19)</a>:</h4>
<p>As a side note, I think that the tagged version would be cheaper at runtime then the type reflection version.</p>



<a name="276402106"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276402106" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276402106">(Mar 23 2022 at 21:19)</a>:</h4>
<p>But yeah, not flexible due to no reflection.</p>



<a name="276403092"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276403092" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276403092">(Mar 23 2022 at 21:28)</a>:</h4>
<p>I don't know ECS very well, so this is just an idea:</p>
<div class="codehilite"><pre><span></span><code>MyECS.Component : { type: Str }*
MyECS.ComponentRegistry : SomeDictLibrary.Dict
MyECS.addComponent : MyECS.ComponentRegistry, MyECS.Component -&gt; MyECS.ComponentRegistry

registry : MyECS.ComponentRegistry
registry = MyECS.initializeComponentRegistry
registry = MyECS.addComponent registry { type: &quot;friend&quot;, name: &quot;Friendo&quot; }
</code></pre></div>



<a name="276403641"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276403641" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276403641">(Mar 23 2022 at 21:33)</a>:</h4>
<p>Hmmm...I'm actually really interested, does that work in roc? At a minimum, it would break if two component have a field with the same name but different types, but otherwise it may work.</p>



<a name="276403862"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276403862" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276403862">(Mar 23 2022 at 21:34)</a>:</h4>
<p><code>MyECS.Component : { type: Str }*</code> does not work. That <code>*</code> type variable needs to occur on the left-hand side</p>



<a name="276403929"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276403929" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276403929">(Mar 23 2022 at 21:35)</a>:</h4>
<p>Oh, whoops, lemme edit</p>



<a name="276404321"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276404321" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276404321">(Mar 23 2022 at 21:39)</a>:</h4>
<div class="codehilite"><pre><span></span><code>MyECS.Component a : { type: Str }a
MyECS.ComponentRegistry : SomeDictLibrary.Dict
MyECS.addComponent : MyECS.ComponentRegistry, MyECS.Component -&gt; MyECS.ComponentRegistry

registry : MyECS.ComponentRegistry
registry = MyECS.initializeComponentRegistry
Friend : { name: Str }
friendo : MyECS.Component Friend
friendo = { type: &quot;friend_idk_this_aspect_is_pain&quot;, name: &quot;Friendo&quot; }
registry = MyECS.addComponent registry
</code></pre></div>



<a name="276404329"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276404329" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276404329">(Mar 23 2022 at 21:39)</a>:</h4>
<p>None of those type aliases are necessary, they're just to show what types things would have (and to skip writing full definitions)</p>



<a name="276404389"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276404389" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276404389">(Mar 23 2022 at 21:39)</a>:</h4>
<p>It turns out my understanding of ECS is just OOP with methods extracted into systems (not shown here) <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="276404582"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276404582" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276404582">(Mar 23 2022 at 21:41)</a>:</h4>
<p>I think the <code>.Dict</code> also needs some type parameters right? and I think that makes this fall apart</p>



<a name="276404651"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276404651" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276404651">(Mar 23 2022 at 21:42)</a>:</h4>
<p>what you want is some sort of way to "forget" about that type variable</p>



<a name="276404673"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276404673" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276404673">(Mar 23 2022 at 21:42)</a>:</h4>
<p>and we can't do that. There are ways in haskell with a <code>forall</code>, or in rust with the <code>Any</code> trait</p>



<a name="276404680"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276404680" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276404680">(Mar 23 2022 at 21:42)</a>:</h4>
<p>I imagine this particular ECS implementation approach isn't the most Roc-y regardless</p>



<a name="276404687"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276404687" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276404687">(Mar 23 2022 at 21:42)</a>:</h4>
<p>or <code>dyn Trait</code> in general</p>



<a name="276404929"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276404929" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276404929">(Mar 23 2022 at 21:44)</a>:</h4>
<p>String encoding? <span aria-label="nauseated" class="emoji emoji-1f922" role="img" title="nauseated">:nauseated:</span></p>



<a name="276405136"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276405136" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276405136">(Mar 23 2022 at 21:46)</a>:</h4>
<p><code>void *</code></p>



<a name="276405154"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276405154" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276405154">(Mar 23 2022 at 21:46)</a>:</h4>
<p>solution to all our problems</p>



<a name="276405189"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276405189" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276405189">(Mar 23 2022 at 21:47)</a>:</h4>
<p>I don't understand and I'm terrified</p>



<a name="276405353"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276405353" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276405353">(Mar 23 2022 at 21:48)</a>:</h4>
<p>So what's the real solution here? It's a legitimate use case, so we should have a clean pattern ready.</p>



<a name="276405518"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276405518" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276405518">(Mar 23 2022 at 21:50)</a>:</h4>
<p>A tag and explicitly naming the possible types is definitely the cleanest in current roc. The library would just expose it as a type variable and the user would fill in the tag</p>



<a name="276405564"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276405564" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276405564">(Mar 23 2022 at 21:50)</a>:</h4>
<p>Ooh</p>



<a name="276405730"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276405730" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276405730">(Mar 23 2022 at 21:52)</a>:</h4>
<div class="codehilite"><pre><span></span><code>ComponentRegistry a : List a

# not sure if the original deduplicates based on the type?
addComponent = List.push

findComponent : ComponentRegistry a, (a -&gt; Bool) -&gt; [ Found a, NotFound ]
</code></pre></div>



<a name="276405892"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276405892" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276405892">(Mar 23 2022 at 21:54)</a>:</h4>
<p>(wow, Roc's type variables and type inference are a powerful combo for terse yet readable code, IMO)</p>



<a name="276405939"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276405939" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276405939">(Mar 23 2022 at 21:54)</a>:</h4>
<p>So does this or something like it work in general?</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nv">dict : </span><span class="nx">Dict</span> <span class="nx">Str</span> <span class="p">{</span> <span class="p">}</span><span class="nx">a</span>
<span class="nv">dict = </span><span class="nx">Dict</span><span class="p">.</span><span class="nx">Empty</span>
    <span class="o">|&gt;</span> <span class="nx">Dict</span><span class="p">.</span><span class="nx">insert</span> <span class="s">"Friend"</span> <span class="p">{</span> <span class="nv">hp: </span><span class="mi">12</span><span class="p">,</span> <span class="nv">name: </span><span class="s">"Foo"</span> <span class="p">}</span>
    <span class="o">|&gt;</span> <span class="nx">Dict</span><span class="p">.</span><span class="nx">insert</span> <span class="s">"Enemy"</span> <span class="p">{</span> <span class="nv">hp: </span><span class="mi">10</span><span class="p">,</span> <span class="nv">atk: </span><span class="mi">7</span> <span class="p">}</span>
</code></pre></div>



<a name="276405978"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276405978" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276405978">(Mar 23 2022 at 21:55)</a>:</h4>
<p><code>dict a : ...</code>?</p>



<a name="276406088"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276406088" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276406088">(Mar 23 2022 at 21:56)</a>:</h4>
<p>no collections are homogeneous</p>



<a name="276406246"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276406246" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276406246">(Mar 23 2022 at 21:58)</a>:</h4>
<p>Ok. That is what I thought.</p>



<a name="276406698"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276406698" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276406698">(Mar 23 2022 at 22:01)</a>:</h4>
<p><span class="user-mention" data-user-id="481285">@Jared Cone</span> with the original code, wouldn't that limit to exactly one component of each type? Is that normal for ECS. This just doesn't quite match my understanding of it.</p>



<a name="276410176"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276410176" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276410176">(Mar 23 2022 at 22:29)</a>:</h4>
<p>Yeah I think this use case needs variable component types/bodies</p>



<a name="276410359"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276410359" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276410359">(Mar 23 2022 at 22:30)</a>:</h4>
<p>I think the <code>a</code> in Folkert's example would be a tag union with "component types" as tags and "component data" as tag payloads</p>



<a name="276410884"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276410884" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Cone <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276410884">(Mar 23 2022 at 22:36)</a>:</h4>
<blockquote>
<p>with the original code, wouldn't that limit to exactly one component of each type? Is that normal for ECS. This just doesn't quite match my understanding of it.</p>
</blockquote>
<p>Yes, I was just wanting to keep the example simple. The core issue is the same regardless if it's exactly one component or more than one component of each type.</p>



<a name="276412027"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276412027" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Cone <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276412027">(Mar 23 2022 at 22:46)</a>:</h4>
<p>So a basic design in Roc might be something like:</p>
<div class="codehilite"><pre><span></span><code>EntityId : U32

Game : {
    deltaSeconds : F32,
    velocityComponents : Dict EntityId Vector3,
    gravityComponents : Dict EntityId Vector3,
    ...
}

GravitySystem : Game -&gt; Game
GravitySystem = \game -&gt;
    velocityComponents = ... apply gravity to each entity that has velocity and gravity components ...
    { game &amp; velocityComponents }
</code></pre></div>
<p>Issues:</p>
<ul>
<li>Components have to live in top-level modules, then Game lives in a middle module, then Systems live in lower modules</li>
<li>Any new component types have to be added to Game. Also means plugins can't be supported.</li>
<li>Is this performant if Game has hundreds of component types?</li>
</ul>



<a name="276412342"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276412342" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276412342">(Mar 23 2022 at 22:49)</a>:</h4>
<p>I thought one of the goals of ECS pattern is to eliminate bloated "God"/"Game" objects, so maybe mimicking the implementation from another language is breaking the spirit of the pattern?</p>



<a name="276412613"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276412613" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Cone <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276412613">(Mar 23 2022 at 22:52)</a>:</h4>
<p>The idea is a System can say "Give me the entities that have X and Y components so I can do some work with them". As far as I can tell in Roc currently the only way to do that is with a "God" object.</p>



<a name="276413025"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276413025" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276413025">(Mar 23 2022 at 22:57)</a>:</h4>
<p>So I think this would be a functional example that would theoretically perform similar to a regular ECS:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nv">Type : </span><span class="p">[</span>
        <span class="nx">Animal</span><span class="p">,</span>
        <span class="nx">Plant</span><span class="p">,</span>
        <span class="nx">Player</span><span class="p">,</span>
        <span class="nx">Chest</span><span class="p">,</span>
    <span class="p">]</span>

<span class="nx">Entity</span> <span class="o">:=</span> <span class="p">{</span> <span class="nv">id: </span><span class="nx">U64</span><span class="p">,</span> <span class="nv">type: </span><span class="nx">Type</span> <span class="p">}</span>

<span class="nv">ComponentProperties : </span><span class="p">{</span>
        <span class="nv">hasPosition: </span><span class="nx">Bool</span><span class="p">,</span>
        <span class="nv">hasVelocity: </span><span class="nx">Bool</span><span class="p">,</span>
        <span class="nv">hasHealth: </span><span class="nx">Bool</span><span class="p">,</span>
        <span class="nv">hasInventory: </span><span class="nx">Bool</span><span class="p">,</span>
    <span class="p">}</span>

<span class="nv">supportedComponents : </span><span class="nx">Type</span> <span class="nf">-&gt;</span> <span class="nx">ComponentProperties</span>
<span class="nv">supportedComponents = </span><span class="err">\</span><span class="nx">type</span> <span class="nf">-&gt;</span>
    <span class="k">when</span> <span class="nx">type</span> <span class="o">is</span>
        <span class="nx">Animal</span> <span class="nf">-&gt;</span>
            <span class="p">{</span> <span class="nv">hasPosition: </span><span class="nx">True</span><span class="p">,</span> <span class="nv">hasVelocity: </span><span class="nx">True</span><span class="p">,</span> <span class="nv">hasHealth: </span><span class="nx">True</span><span class="p">,</span> <span class="nv">hasInventory: </span><span class="nx">False</span> <span class="p">}</span>
        <span class="nx">Plant</span> <span class="nf">-&gt;</span>
            <span class="p">{</span> <span class="nv">hasPosition: </span><span class="nx">True</span><span class="p">,</span> <span class="nv">hasVelocity: </span><span class="nx">False</span><span class="p">,</span> <span class="nv">hasHealth: </span><span class="nx">True</span><span class="p">,</span> <span class="nv">hasInventory: </span><span class="nx">False</span> <span class="p">}</span>
        <span class="nx">Chest</span> <span class="nf">-&gt;</span>
            <span class="p">{</span> <span class="nv">hasPosition: </span><span class="nx">True</span><span class="p">,</span> <span class="nv">hasVelocity: </span><span class="nx">False</span><span class="p">,</span> <span class="nv">hasHealth: </span><span class="nx">False</span><span class="p">,</span> <span class="nv">hasInventory: </span><span class="nx">True</span> <span class="p">}</span>
        <span class="nx">Player</span> <span class="nf">-&gt;</span>
            <span class="p">{</span> <span class="nv">hasPosition: </span><span class="nx">True</span><span class="p">,</span> <span class="nv">hasVelocity: </span><span class="nx">True</span><span class="p">,</span> <span class="nv">hasHealth: </span><span class="nx">True</span><span class="p">,</span> <span class="nv">hasInventory: </span><span class="nx">True</span> <span class="p">}</span>

<span class="nv">Item : </span><span class="p">[</span> <span class="nx">SomeTag</span> <span class="p">]</span>

<span class="nv">Components : </span><span class="p">{</span>
        <span class="c1"># These could also be lists with empty data for entities without this data.</span>
        <span class="nv">position: </span><span class="nx">Dict</span> <span class="nx">U64</span> <span class="p">{</span> <span class="nv">x: </span><span class="nx">F64</span><span class="p">,</span> <span class="nv">y: </span><span class="nx">F64</span><span class="p">,</span> <span class="nv">z: </span><span class="nx">F64</span> <span class="p">},</span>
        <span class="nv">velocity: </span><span class="nx">Dict</span> <span class="nx">U64</span> <span class="p">{</span> <span class="nv">dx: </span><span class="nx">F64</span><span class="p">,</span> <span class="nv">dy: </span><span class="nx">F64</span><span class="p">,</span> <span class="nv">dz: </span><span class="nx">F64</span> <span class="p">},</span>
        <span class="nv">health: </span><span class="nx">Dict</span> <span class="nx">U64</span> <span class="nx">U64</span>
        <span class="nv">inventory: </span><span class="nx">Dict</span> <span class="nx">U64</span> <span class="p">(</span><span class="nx">List</span> <span class="nx">Item</span><span class="p">)</span>
    <span class="p">}</span>

<span class="nv">moveSystem : </span><span class="nx">List</span> <span class="nx">Entity</span><span class="p">,</span> <span class="nx">Components</span> <span class="nf">-&gt;</span> <span class="p">[</span> <span class="nx">T</span> <span class="p">(</span><span class="nx">List</span> <span class="nx">Entity</span><span class="p">)</span> <span class="nx">Components</span> <span class="p">]</span>
<span class="nv">moveSystem = </span><span class="err">\</span><span class="nx">entities</span><span class="p">,</span> <span class="nx">components</span> <span class="nf">-&gt;</span>
    <span class="nx">List</span><span class="p">.</span><span class="nx">walk</span> <span class="nx">entities</span> <span class="p">(</span><span class="nx">T</span> <span class="nx">entities</span> <span class="nx">components</span><span class="p">)</span> <span class="p">(</span><span class="err">\</span><span class="nx">T</span> <span class="nx">currentEntities</span> <span class="nx">currentComponents</span><span class="p">,</span> <span class="nx">entity</span> <span class="nf">-&gt;</span>
        <span class="nv">supported = </span><span class="nx">supportedComponents</span> <span class="nx">entity</span><span class="p">.</span><span class="nx">type</span>
        <span class="k">if</span> <span class="nx">supported</span><span class="p">.</span><span class="nx">hasPosition</span> <span class="o">&amp;&amp;</span> <span class="nx">supported</span><span class="p">.</span><span class="nx">hasVelocity</span> <span class="k">then</span>
            <span class="p">{</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">z</span><span class="p">}</span> <span class="o">=</span> <span class="nx">Dict</span><span class="p">.</span><span class="nx">get</span> <span class="nx">currentComponents</span><span class="p">.</span><span class="nx">position</span> <span class="nx">entity</span><span class="p">.</span><span class="nx">id</span>
            <span class="p">{</span><span class="nx">dx</span><span class="p">,</span> <span class="nx">dy</span><span class="p">,</span> <span class="nx">dz</span><span class="p">}</span> <span class="o">=</span> <span class="nx">Dict</span><span class="p">.</span><span class="nx">get</span> <span class="nx">currentComponents</span><span class="p">.</span><span class="nx">velocity</span> <span class="nx">entity</span><span class="p">.</span><span class="nx">id</span>
            <span class="nv">nextPosition = </span><span class="p">{</span> <span class="nv">x: </span><span class="nx">x</span> <span class="o">+</span> <span class="nx">dx</span><span class="p">,</span> <span class="nv">y: </span><span class="nx">y</span> <span class="o">+</span> <span class="nx">dy</span><span class="p">,</span> <span class="nv">z: </span><span class="nx">z</span> <span class="o">+</span> <span class="nx">dz</span> <span class="p">}</span>
            <span class="nv">nextComponents = </span><span class="p">{</span><span class="nx">currentComponents</span> <span class="o">&amp;</span> <span class="nv">position: </span><span class="nx">Dict</span><span class="p">.</span><span class="nx">insert</span> <span class="nx">currentComponents</span><span class="p">.</span><span class="nx">position</span> <span class="nx">entity</span><span class="p">.</span><span class="nx">id</span> <span class="nx">nextPosition</span><span class="p">}</span>
            <span class="nx">T</span> <span class="nx">currentEntities</span> <span class="nx">nextComponents</span>
        <span class="k">else</span>
            <span class="nx">T</span> <span class="nx">currentEntities</span> <span class="nx">currentComponents</span>
    <span class="p">)</span>
</code></pre></div>



<a name="276413384"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276413384" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276413384">(Mar 23 2022 at 23:00)</a>:</h4>
<p>Of course it is custom and would be much harder to make generic in roc. Would have a bunch of open ended type variables that need to be filled in.</p>



<a name="276413698"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276413698" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276413698">(Mar 23 2022 at 23:03)</a>:</h4>
<p>As a side note, this might be made more reasonable with abilities. Could have an ability to get an entities position. That ability would be on all entities and would just look up the entity in the position dictionary. If the entity does not support position, it would return None.</p>



<a name="276413798"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276413798" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276413798">(Mar 23 2022 at 23:04)</a>:</h4>
<p>But that would also be one ability per component, so it would be quite odd.</p>



<a name="276415848"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276415848" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276415848">(Mar 23 2022 at 23:26)</a>:</h4>
<blockquote>
<p>would be much harder to make generic in roc</p>
</blockquote>
<p>True but in Elm I've always found this to be a good thing. If you're making a game (as opposed to selling a game engine like Unity) then isn't it <em>better</em> it to be explicit rather than generic?</p>



<a name="276415870"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276415870" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276415870">(Mar 23 2022 at 23:26)</a>:</h4>
<p>I say this with zero experience in game dev, it's just what I've found in other types of application.</p>



<a name="276416048"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276416048" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276416048">(Mar 23 2022 at 23:29)</a>:</h4>
<p>I mean if you are new to game making and want to use someone's basic game platform with some ECS library, you would prefer not to have to learn and implementation everything explicitly cause it is all new to you.</p>



<a name="276416196"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276416196" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276416196">(Mar 23 2022 at 23:31)</a>:</h4>
<p>The big issue is that I believe some ECS library basically wouldn't be functional without reflection or something more powerful in those lines. It would basically be an empty shell of type variables that take explicit knowledge to implement. Probably would be best just to make your own custom implementation or ECS rather than use the library.</p>



<a name="276416350"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276416350" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Stewart <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276416350">(Mar 23 2022 at 23:33)</a>:</h4>
<p>There are two ECS packages in Elm (which has a very similar type system to Roc) if you're interested in seeing what the API and implementation of those look like. I don't know that much about ECS so I don't know if they are good implementations of it though.</p>
<p><a href="https://package.elm-lang.org/packages/justgook/elm-game-logic/latest/">https://package.elm-lang.org/packages/justgook/elm-game-logic/latest/</a> (source code: <a href="https://github.com/justgook/elm-game-logic/tree/3.0.0">https://github.com/justgook/elm-game-logic/tree/3.0.0</a>)<br>
<a href="https://package.elm-lang.org/packages/harmboschloo/elm-ecs/latest/">https://package.elm-lang.org/packages/harmboschloo/elm-ecs/latest/</a> (source code: <a href="https://github.com/harmboschloo/elm-ecs/tree/2.0.0">https://github.com/harmboschloo/elm-ecs/tree/2.0.0</a>)</p>



<a name="276417947"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276417947" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276417947">(Mar 23 2022 at 23:53)</a>:</h4>
<p>So <code>elm-game-logic</code> just ignores the entity typing problem all together by using an array of <code>Maybe</code>. That might be an acceptable option, but it has a few problems:</p>
<ul>
<li><del>More bug prone: e.g. might forget a component on an entity that should have it due to not having entity types</del></li>
<li>Higher memory cost: every element in every array has the overhead of <code>Maybe</code></li>
<li>Lookup performance cost: Instead of knowing the type of the entity and then being done, I must look up the entity in each array to figure out if it has a component.</li>
</ul>



<a name="276418016"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276418016" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276418016">(Mar 23 2022 at 23:54)</a>:</h4>
<p><code>elm-ecs</code> is more complicated for me to wrap my head around. Will try to give an analysis once I get what it is actually doing under the hood.</p>



<a name="276419279"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276419279" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276419279">(Mar 24 2022 at 00:12)</a>:</h4>
<p>Ok, <code>elm-ecs</code> looks better. It uses a lot of type variables and indirection (that could theoretically be compiled away) to make this work. Essentially each component has to know how to get/set itself in the world via the use of lambdas. Assuming those lambdas get compiled away it should generate similar code to what I have above. Though it does still have some clear drawbacks from the direct implementation:</p>
<ul>
<li><del>Same bug prone-ness as above due to lacking entity types</del></li>
<li>Same lookup cost as above due to lacking entity types and needing to look up in all dictionaries before knowing if all components are supported by an entity.</li>
<li>No memory overhead to the dictionary version due to the lambdas. Would not be able to convert to the list version without adding in maybes and reintroducing the memory overhead.</li>
<li>restrictions based on how many duplicate methods the author makes. For example, the author only added up to <code>Ecs.Components49</code> so if you have 50 components, you need the author to update the library. Same with a number of the accessors.</li>
</ul>



<a name="276419305"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276419305" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276419305">(Mar 24 2022 at 00:13)</a>:</h4>
<p>So I would label this as both having fundamental overhead and restrictions compared to the raw implementation, but still cool and probably useful for many hobby games.</p>



<a name="276421422"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276421422" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276421422">(Mar 24 2022 at 00:48)</a>:</h4>
<p>Would this be a job for a Roc codegen/scaffolding tool? Or maybe just copy/paste/customize haha</p>



<a name="276421944"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276421944" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276421944">(Mar 24 2022 at 00:56)</a>:</h4>
<p>(with regard to the idea I'm gathering that "Roc ECS developers of all skill levels might be better served by a manual implementation from scratch, since a Roc ECS library can't provide meaningful zero-cost abstractions")</p>



<a name="276428269"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276428269" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276428269">(Mar 24 2022 at 03:06)</a>:</h4>
<p>I think copy and modify would work great for something like with. Also would work well to be able to make a declarative list of types and their components and then generate it.</p>



<a name="276430169"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276430169" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276430169">(Mar 24 2022 at 03:58)</a>:</h4>
<p>So I was watching <a href="https://www.youtube.com/watch?v=NTWSeQtHZ9M">a talk on ECS</a> to better understand how it is done with good data oriented design. I think that there may actually be a way to modify something like <code>elm-ecs</code> to generate almost the exact same thing as a proper DoD entity component system (assuming all lambdas inline). The actual core difference is just expanding an entity include some metadata about the components and tags that is has.</p>
<div class="youtube-video message_inline_image"><a data-id="NTWSeQtHZ9M" href="https://www.youtube.com/watch?v=NTWSeQtHZ9M"><img src="https://uploads.zulipusercontent.net/a86b318e0eed2a4f97bb56330dbaf15a74f6d83b/68747470733a2f2f692e7974696d672e636f6d2f76692f4e545753655174485a394d2f64656661756c742e6a7067"></a></div><p>This ECS still doesn't exactly have entity types, but it has entity tags that can be used in the same way. Though it has no proper verification to stop a user from accidentally make an entity that is missing a component that it should have. To get that sort of full verification, you would either need a tag per entity type, or make the entity type something separate.</p>



<a name="276430180"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276430180" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276430180">(Mar 24 2022 at 03:59)</a>:</h4>
<p>I should add a warning to the talk: it is a lot of C++ and a metric ton of templates.</p>



<a name="276431827"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276431827" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Cone <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276431827">(Mar 24 2022 at 04:38)</a>:</h4>
<p>To clarify, there shouldn't be static types of entities. An entity is a collection of components and components can be added to or removed from entities throughout their lifetime</p>



<a name="276431849"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276431849" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276431849">(Mar 24 2022 at 04:39)</a>:</h4>
<p>Yeah, I didn't realize that at first. see it now with these talks</p>



<a name="276432942"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276432942" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276432942">(Mar 24 2022 at 05:04)</a>:</h4>
<p>Yeah, I forgot that too in my examples and treated entities as components</p>



<a name="276561209"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276561209" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zeljko Nesic <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276561209">(Mar 25 2022 at 01:27)</a>:</h4>
<p>There is fundamental clash between ECS and functional programming. </p>
<p>The fact that any component of an entity can modify other entities and it's components in the game world, eg. on colision with other object, open the door. </p>
<p>Which is bonkers from the perspective of FP.</p>



<a name="276561337"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276561337" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zeljko Nesic <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276561337">(Mar 25 2022 at 01:29)</a>:</h4>
<p>I believe that we still don't know how to model the world so rich and dynamic with FP and type systems that we've got. </p>
<p>Just blunt copying the pattern doesn't work!</p>



<a name="276561474"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276561474" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zeljko Nesic <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276561474">(Mar 25 2022 at 01:31)</a>:</h4>
<p>Which is weird, because we are talking about "composability" of FP constructs, and yet, we can't have a blank cotton ball and stick random stuff to it and be sure that our program will run.</p>



<a name="276561478"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276561478" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276561478">(Mar 25 2022 at 01:31)</a>:</h4>
<p>With Roc's inplace mutation, I think that can be worked around. Of course, a small mistake can lead to tons of copying.</p>



<a name="276561535"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276561535" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276561535">(Mar 25 2022 at 01:32)</a>:</h4>
<p>So definitely a case where you need to tread carefully or you could ruin performance</p>



<a name="276561660"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276561660" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zeljko Nesic <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276561660">(Mar 25 2022 at 01:34)</a>:</h4>
<p>Maybe this is good place where abilities might help? Or platforms?</p>



<a name="276575179"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276575179" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Cone <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276575179">(Mar 25 2022 at 04:20)</a>:</h4>
<blockquote>
<p>The fact that any component of an entity can modify other entities and it's components</p>
</blockquote>
<p>Unfortunately ECS has two different meanings. The type of ECS I'm referring to is where the Components are just data, no behavior. Systems are behavior, no data. So in that case Components don't modify anything, but any System can modify any entity or component.</p>



<a name="276575484"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276575484" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Cone <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276575484">(Mar 25 2022 at 04:26)</a>:</h4>
<p>I think FP should be a good fit for ECS because Systems can be implemented as pure functions. The thing that I'm a little roadblocked with is how to do it in Roc since there (currently) isn't a data type that can store "anything" that can later be cast to the correct underlying type. Though... could open tags somehow support this? I haven't worked much with them.</p>



<a name="276575519"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276575519" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276575519">(Mar 25 2022 at 04:27)</a>:</h4>
<p>An open tag can't be stored. Has be a concrete type.</p>



<a name="276575577"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276575577" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276575577">(Mar 25 2022 at 04:28)</a>:</h4>
<p>I think making an ECS library will be hard in Roc (would require lots of type variables and lambdas like the linked elm libraries)</p>



<a name="276575596"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276575596" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276575596">(Mar 25 2022 at 04:29)</a>:</h4>
<p>I think making a concrete ECS where each component gets it's own array or dictionary should be totally doable. Just has to be done manually.</p>



<a name="276789063"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276789063" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Gillette <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276789063">(Mar 27 2022 at 13:43)</a>:</h4>
<p>I haven't thought this through at all, and don't know about ECS, but can't you have a general ECS module expressed in terms of a completely open tag system (possibly with tags the ECS module specifically understands), and accept a callback function from the app that takes as input the known app-specific tags? At that point, the compiler would have its concrete definition. This would be a bit like Elm update functions, I presume.</p>



<a name="276799633"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276799633" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276799633">(Mar 27 2022 at 17:56)</a>:</h4>
<p>I think you would run into storage issues. For example, I want the position component in one array and the color component in a separate array.</p>
<p>If the user of the library is passing an open tag of type <code>[ Pos F32 F32, Color U8 U8 U8 ]*</code>. The underlying library would know nothing about the type and would not able able to do anything with it. The underlying library could store them all to one master list, but it would have no way to distinguish between them.</p>



<a name="276799656"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/276799656" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#276799656">(Mar 27 2022 at 17:57)</a>:</h4>
<p>To store <code>Pos</code> in the position array and <code>Color</code> in the color array would require the library to know about the individual tags.</p>



<a name="288313143"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/288313143" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kas Buunk <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#288313143">(Jul 03 2022 at 07:18)</a>:</h4>
<p>Hi! Is there a platform and example of a simple http server in Roc?</p>



<a name="288314023"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/288314023" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#288314023">(Jul 03 2022 at 07:44)</a>:</h4>
<p>Some work was done on this in <a href="https://github.com/rtfeldman/roc/pull/2975">PR #2975</a> but it may require some updating.</p>



<a name="288314930"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/288314930" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kas Buunk <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#288314930">(Jul 03 2022 at 08:09)</a>:</h4>
<p>Thanks. Would be relevant for a large audience if a solid ecosystem exists for building web services on http, like rest, gRPC, graphql, etc.</p>



<a name="288314985"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/288314985" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kas Buunk <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#288314985">(Jul 03 2022 at 08:10)</a>:</h4>
<p>Same goes for event-driven microservices, an ecosystem for subscribing and publishing to a Kafka or Nats/JetStream event bus would make it easy for service meshes to experiment with a microservice in Roc.</p>



<a name="288315070"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/288315070" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#288315070">(Jul 03 2022 at 08:14)</a>:</h4>
<p>Absolutely, we definitely plan to work on it in the future.</p>



<a name="288315623"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/288315623" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kas Buunk <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#288315623">(Jul 03 2022 at 08:29)</a>:</h4>
<p>Would make for a fantastic well-scoped domain.</p>



<a name="288315703"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Possible%20to%20do%20this%20in%20Roc%3F/near/288315703" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kas Buunk <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Possible.20to.20do.20this.20in.20Roc.3F.html#288315703">(Jul 03 2022 at 08:31)</a>:</h4>
<p>Probably in Rust. With arena memory management with requests and incoming events with their separate arenas.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>