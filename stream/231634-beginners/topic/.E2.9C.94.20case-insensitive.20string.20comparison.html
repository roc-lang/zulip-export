<html>
<head><meta charset="utf-8"><title>✔ case-insensitive string comparison · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html">✔ case-insensitive string comparison</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="490060832"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490060832" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chuck Daniels <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490060832">(Dec 19 2024 at 22:41)</a>:</h4>
<p>Hi there! I'm new to Roc, and I'm having fun with it on Exercism. Thanks for the nice language!</p>
<p>Is there a convenient way to perform case-insensitive string comparisons using the stdlib? If not, is there some reasonably idiomatic way to do so?</p>



<a name="490061706"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490061706" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490061706">(Dec 19 2024 at 22:47)</a>:</h4>
<p>If you know you only have ASCII then it's easy to roll you're own using the builtins. </p>
<p>If you have utf-8/unicode then there isn't an easy way to do it just with the builtins.</p>



<a name="490061790"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490061790" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490061790">(Dec 19 2024 at 22:48)</a>:</h4>
<p>If you can use a package then I'd recommend you checkout <span class="user-mention" data-user-id="508951">@Hannes</span>'s <a href="https://github.com/Hasnep/roc-ascii">https://github.com/Hasnep/roc-ascii</a></p>



<a name="490061835"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490061835" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490061835">(Dec 19 2024 at 22:48)</a>:</h4>
<p>The longer term plan is for working with unicode is <a href="https://github.com/roc-lang/unicode">https://github.com/roc-lang/unicode</a></p>



<a name="490061924"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490061924" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chuck Daniels <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490061924">(Dec 19 2024 at 22:49)</a>:</h4>
<p>Yep, just ASCII. What would be an idiomatic way to do that?</p>



<a name="490061939"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490061939" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490061939">(Dec 19 2024 at 22:49)</a>:</h4>
<p>The unicode package is a WIP and doesn't have the Str comparison functions your looking for</p>



<a name="490062022"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490062022" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490062022">(Dec 19 2024 at 22:50)</a>:</h4>
<p>Can you use a package in exercism? <span class="user-mention" data-user-id="611722">@Isaac Van Doren</span> would know</p>



<a name="490062044"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490062044" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490062044">(Dec 19 2024 at 22:50)</a>:</h4>
<p>I'll make an example for you, 1 sec</p>



<a name="490062092"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490062092" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490062092">(Dec 19 2024 at 22:51)</a>:</h4>
<p>I'd say <code>Ascii.toLowercase left == Ascii.toLowercase right</code></p>



<a name="490062103"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490062103" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chuck Daniels <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490062103">(Dec 19 2024 at 22:51)</a>:</h4>
<p>I don't know if I can use a package in exercism.</p>



<a name="490062107"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490062107" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490062107">(Dec 19 2024 at 22:51)</a>:</h4>
<p>For a simple approach (ASCII only)</p>



<a name="490062294"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490062294" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490062294">(Dec 19 2024 at 22:53)</a>:</h4>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">toLowercase</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Str</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="kt">U8</span>
<span class="nv">toLowercase</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">str</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">casingDelta</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">'</span><span class="nv">a'</span><span class="w"> </span><span class="nf">-</span><span class="w"> </span><span class="nf">'</span><span class="kt">A</span><span class="nf">'</span>
<span class="w">    </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">toUtf8</span><span class="w"> </span><span class="nv">str</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="nf">\</span><span class="nv">byte</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">byte</span><span class="w"> </span><span class="nf">&gt;=</span><span class="w"> </span><span class="nf">'</span><span class="kt">A</span><span class="nf">'</span><span class="w"> </span><span class="nf">&amp;&amp;</span><span class="w"> </span><span class="nv">byte</span><span class="w"> </span><span class="nf">&lt;=</span><span class="w"> </span><span class="nf">'</span><span class="kt">Z</span><span class="nf">'</span><span class="w"> </span><span class="kr">then</span>
<span class="w">            </span><span class="nv">byte</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="nv">casingDelta</span>
<span class="w">        </span><span class="kr">else</span>
<span class="w">            </span><span class="nv">byte</span>

<span class="nv">insensitiveEqual</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Str</span><span class="p">,</span><span class="w"> </span><span class="kt">Str</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Bool</span>
<span class="nv">insensitiveEqual</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">left</span><span class="p">,</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">toLowercase</span><span class="w"> </span><span class="nv">left</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="nv">toLowercase</span><span class="w"> </span><span class="nv">right</span>
</code></pre></div>



<a name="490062349"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490062349" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490062349">(Dec 19 2024 at 22:53)</a>:</h4>
<p>You can use packages in Exercism but they have to be explicitly added to that exercise in the language track. If it seems like many users of an exercise would want a particular package we can certainly add one</p>



<a name="490062471"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490062471" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490062471">(Dec 19 2024 at 22:54)</a>:</h4>
<p>In this case hand-rolling might be straightforward enough</p>



<a name="490062934"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490062934" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490062934">(Dec 19 2024 at 22:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="787504">Chuck Daniels</span> has marked this topic as resolved.</p>



<a name="490063043"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490063043" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490063043">(Dec 19 2024 at 22:59)</a>:</h4>
<p>Looks like <span class="user-mention" data-user-id="461444">@Sam Mohr</span> beat me to it... </p>
<div class="codehilite"><pre><span></span><code>module [to_upper, to_lower]

to_upper : Str -&gt; Str
to_upper = \str -&gt;
    str
    |&gt; Str.toUtf8
    |&gt; List.map to_upper_help
    |&gt; Str.fromUtf8
    |&gt; unwrap

to_lower : Str -&gt; Str
to_lower = \str -&gt;
    str
    |&gt; Str.toUtf8
    |&gt; List.map to_lower_help
    |&gt; Str.fromUtf8
    |&gt; unwrap

expect to_upper &quot;hello&quot; == &quot;HELLO&quot;
expect to_upper &quot;Hello&quot; == &quot;HELLO&quot;

expect to_lower &quot;HELLO&quot; == &quot;hello&quot;
expect to_lower &quot;Hello&quot; == &quot;hello&quot;

to_upper_help = \c -&gt; if c &gt;= &#39;a&#39; &amp;&amp; c &lt;= &#39;z&#39; then c - delta else c
to_lower_help = \c -&gt; if c &gt;= &#39;A&#39; &amp;&amp; c &lt;= &#39;Z&#39; then c + delta else c
delta = &#39;a&#39; - &#39;A&#39;

unwrap : Result a _ -&gt; a
unwrap = \result -&gt;
    when result is
        Ok a -&gt; a
        Err _ -&gt; crash &quot;quick and dirty error handling&quot;
</code></pre></div>
<div class="codehilite"><pre><span></span><code>$ roc test conversion.roc
0 failed and 4 passed in 523 ms.
</code></pre></div>



<a name="490063179"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490063179" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490063179">(Dec 19 2024 at 23:00)</a>:</h4>
<p>A cleaner quick-and-dirty solution</p>



<a name="490069723"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490069723" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490069723">(Dec 20 2024 at 00:06)</a>:</h4>
<p>I've added a Good First Issue for someone to add this to our Examples repo </p>
<p><a href="https://github.com/roc-lang/examples/issues/222">https://github.com/roc-lang/examples/issues/222</a></p>



<a name="490088025"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490088025" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490088025">(Dec 20 2024 at 03:33)</a>:</h4>
<p>Nothing wrong with that solution, but I'd like to suggest an alternative. ASCII letters are conveniently arranged so that only one bit flips between lowercase and uppercase. So you can actually do this branchless with a bitwise operation:</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="nf">to_lower_help</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="nf">\</span><span class="n">c</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="o">.</span><span class="n">bitwiseOr</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class="n">c</span>

<span class="o">#</span><span class="w"> </span><span class="n">or</span><span class="kt">:</span>

<span class="nf">to_lower_help</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="nf">\</span><span class="n">c</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="o">.</span><span class="n">bitwiseOr</span><span class="w"> </span><span class="p">(</span><span class="sc">'A'</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="sc">'a'</span><span class="p">)</span><span class="w"> </span><span class="n">c</span>
</code></pre></div>



<a name="490089013"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490089013" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490089013">(Dec 20 2024 at 03:46)</a>:</h4>
<p>Actually, now that I think about it, this probably shouldn’t be used in the examples. Some non-letter characters would become different ones <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="490089088"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490089088" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490089088">(Dec 20 2024 at 03:47)</a>:</h4>
<p>So it’s only safe if you know you’re only working with a restricted subset. Probably just an interesting trick then.</p>



<a name="490095748"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490095748" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490095748">(Dec 20 2024 at 05:14)</a>:</h4>
<p>you can check first, e.g.</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="kr">if</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="sc">'a'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="sc">'Z'</span><span class="w"> </span><span class="kr">then</span>
<span class="w">    </span><span class="kt">Num</span><span class="o">.</span><span class="n">bitwiseOr</span><span class="w"> </span><span class="p">(</span><span class="sc">'A'</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="sc">'a'</span><span class="p">)</span><span class="w"> </span><span class="n">c</span>
<span class="kr">else</span>
<span class="w">    </span><span class="n">c</span>
</code></pre></div>



<a name="490141932"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490141932" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chuck Daniels <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490141932">(Dec 20 2024 at 11:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/channel/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison/near/490095748">said</a>:</p>
<blockquote>
<p>you can check first, e.g.</p>
<p><div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="kr">if</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="sc">'a'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="sc">'Z'</span><span class="w"> </span><span class="kr">then</span>
<span class="w">    </span><span class="kt">Num</span><span class="o">.</span><span class="n">bitwiseOr</span><span class="w"> </span><span class="p">(</span><span class="sc">'A'</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="sc">'a'</span><span class="p">)</span><span class="w"> </span><span class="n">c</span>
<span class="kr">else</span>
<span class="w">    </span><span class="n">c</span>
</code></pre></div><br>
</p>
</blockquote>
<p>I <em>think</em> you meant <code>c &gt;= 'A' &amp;&amp; c &lt;= 'Z'</code>, although I would write it as <code>'A' &lt;= c &amp;&amp; c &lt;= 'Z'</code>.</p>



<a name="490144483"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490144483" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490144483">(Dec 20 2024 at 11:38)</a>:</h4>
<p>You can check but then idk how much better it’s than the original solution</p>



<a name="490164692"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490164692" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chuck Daniels <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490164692">(Dec 20 2024 at 13:50)</a>:</h4>
<p>I suspect that using the bitwise operation would show noticeable performance benefit only in the context of performing a large volume of character conversions.</p>
<p>Here's my approach:</p>
<div class="codehilite" data-code-language="roc"><pre><span></span><code>asciiLowercaseBit : U8
asciiLowercaseBit = 0b0010_0000

charToLower : U8 -&gt; U8
charToLower = \char -&gt;
    if 'A' &lt;= char &amp;&amp; char &lt;= 'Z' then
        char |&gt; Num.bitwiseXor asciiLowercaseBit # Set lowercase bit
    else
        char

charToUpper : U8 -&gt; U8
charToUpper = \char -&gt;
    if 'a' &lt;= char &amp;&amp; char &lt;= 'z' then
        char |&gt; Num.bitwiseXor asciiLowercaseBit # Clear lowercase bit
    else
        char
</code></pre></div>



<a name="490173178"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490173178" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chuck Daniels <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490173178">(Dec 20 2024 at 14:36)</a>:</h4>
<p>Or this, for some additional functions:</p>
<div class="codehilite"><pre><span></span><code>asciiLowercaseBit : U8
asciiLowercaseBit = 0b0010_0000

isUpper : U8 -&gt; Bool
isUpper = \char -&gt; &#39;A&#39; &lt;= char &amp;&amp; char &lt;= &#39;Z&#39;

isLower : U8 -&gt; Bool
isLower = \char -&gt; &#39;a&#39; &lt;= char &amp;&amp; char &lt;= &#39;a&#39;

toggleCase : U8 -&gt; U8
toggleCase = \char -&gt; char |&gt; Num.bitwiseXor asciiLowercaseBit # Toggle lowercase bit

charToLower : U8 -&gt; U8
charToLower = \char -&gt; if char |&gt; isUpper then char |&gt; toggleCase else char

charToUpper : U8 -&gt; U8
charToUpper = \char -&gt; if char |&gt; isLower then char |&gt; toggleCase else char
</code></pre></div>



<a name="490201681"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490201681" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490201681">(Dec 20 2024 at 17:17)</a>:</h4>
<blockquote>
<p>I suspect that using the bitwise operation would show noticeable performance benefit only in the context of performing a large volume of character conversions.</p>
</blockquote>
<p>If llvm can manage to optimize it to simd, bitwise would likely be significantly faster (it probably will fail if you use a conditional instead of doing fully bitwise math). </p>
<p>Otherwise, they should be useing the exact same processor units, so no perf diff (I think they both should be single cycle and limited by ram loads and stores in a loop, which should be pipelined)</p>



<a name="490201988"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490201988" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490201988">(Dec 20 2024 at 17:19)</a>:</h4>
<p>So the fast version would be something like:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="p">(</span><span class="kt">Num</span><span class="nf">.</span><span class="nv">bitwiseAnd</span><span class="w"> </span><span class="p">(</span><span class="nf">'</span><span class="kt">A</span><span class="nf">'</span><span class="w"> </span><span class="nf">&lt;=</span><span class="w"> </span><span class="nv">char</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">char</span><span class="w"> </span><span class="nf">&lt;=</span><span class="w"> </span><span class="nf">'</span><span class="kt">Z</span><span class="nf">'</span><span class="p">))</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">shiftLeftBy</span><span class="w"> </span><span class="mi">5</span>
<span class="w">    </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">bitwiseXor</span><span class="w"> </span><span class="nv">char</span>
</code></pre></div>



<a name="490202020"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490202020" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490202020">(Dec 20 2024 at 17:19)</a>:</h4>
<p>llvm should turn that into a simd loop</p>



<a name="490202126"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490202126" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490202126">(Dec 20 2024 at 17:20)</a>:</h4>
<p>oh, probably need to <code>Num.toU8</code> the conditionals</p>



<a name="490202597"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490202597" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490202597">(Dec 20 2024 at 17:24)</a>:</h4>
<p>oh yeah, we can't <code>Num.toU8</code> a bool... that's annoying</p>



<a name="490203346"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490203346" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490203346">(Dec 20 2024 at 17:28)</a>:</h4>
<p>So I guess a working form of the more optimized version would be to take the helpers from <span class="user-mention" data-user-id="787504">@Chuck Daniels</span> above, but write the core functions as:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">charToLower</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">U8</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">U8</span>
<span class="nv">charToLower</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">char</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">toggle</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">isUpper</span><span class="w"> </span><span class="nv">char</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="nv">asciiLowercaseBit</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">bitwiseXor</span><span class="w"> </span><span class="nv">char</span><span class="w"> </span><span class="nv">toggle</span>

<span class="nv">charToUpper</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">U8</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">U8</span>
<span class="nv">charToUpper</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">char</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">toggle</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">isLower</span><span class="w"> </span><span class="nv">char</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="nv">asciiLowercaseBit</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">bitwiseXor</span><span class="w"> </span><span class="nv">char</span><span class="w"> </span><span class="nv">toggle</span>
</code></pre></div>



<a name="490203477"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490203477" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490203477">(Dec 20 2024 at 17:29)</a>:</h4>
<p>That should turn into a hot simd loop if used within <code>List.map</code> or similar</p>



<a name="490204195"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490204195" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490204195">(Dec 20 2024 at 17:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/channel/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison/near/490202597">said</a>:</p>
<blockquote>
<p>oh yeah, we can't <code>Num.toU8</code> a bool... that's annoying</p>
</blockquote>
<p>we could offer <code>Bool.toNum : Bool -&gt; Num *</code></p>



<a name="490219621"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20case-insensitive%20string%20comparison/near/490219621" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20case-insensitive.20string.20comparison.html#490219621">(Dec 20 2024 at 19:34)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/7395">https://github.com/roc-lang/roc/issues/7395</a></p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>