<html>
<head><meta charset="utf-8"><title>roc nix flake · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html">roc nix flake</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="553273845"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/553273845" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drewry Pope <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#553273845">(Nov 02 2025 at 21:04)</a>:</h4>
<p>hi roc friends, i looked at the couple previous nix flake topics but i think this is newer..</p>
<p>is there an updated flake somewhere with an in-support rust version OR a zig-only version?</p>
<p>i'm all good with nightly builds, closer to master the better, preferably with a flake to depend on. is this possible right now? should i make some sort of hashed binary derivation instead?</p>



<a name="553273961"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/553273961" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drewry Pope <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#553273961">(Nov 02 2025 at 21:06)</a>:</h4>
<p>(1.77.2 is eol i think, by default i try to run just a single nixpkgs when possible. i could go ahead and use the roc flake as-is without following my nixpkgs from 2025, but wanted to check first. maybe it's better if i don't rely on this flake for now, add my own derivation directly in my repo?)</p>



<a name="553563667"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/553563667" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#553563667">(Nov 04 2025 at 09:29)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="747334">@Drewry Pope</span>,</p>
<blockquote>
<p>is there an updated flake somewhere with an in-support rust version</p>
</blockquote>
<p>No, I have not updated the rust version so I can focus on getting the new compiler ready.</p>
<blockquote>
<p>OR a zig-only version?</p>
</blockquote>
<p>Yes: <a href="https://github.com/roc-lang/roc/blob/main/src/flake.nix">https://github.com/roc-lang/roc/blob/main/src/flake.nix</a>. But, it is not ready to replace the old compiler yet.</p>



<a name="553563768"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/553563768" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#553563768">(Nov 04 2025 at 09:29)</a>:</h4>
<blockquote>
<p>i could go ahead and use the roc flake as-is without following my nixpkgs from 2025</p>
</blockquote>
<p>That would be the approach I recommend.</p>



<a name="553747396"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/553747396" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#553747396">(Nov 05 2025 at 01:41)</a>:</h4>
<p>I noticed that the flake for the new Zig compiler doesn't define any output packages, is there a technical reason for that or is it just a lower priority thing?</p>



<a name="553792764"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/553792764" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#553792764">(Nov 05 2025 at 08:36)</a>:</h4>
<p>Yeah, lower priority</p>



<a name="553799904"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/553799904" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#553799904">(Nov 05 2025 at 09:12)</a>:</h4>
<p>Cool, because that means I can open a PR for my local branch where I've added it <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="553816044"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/553816044" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#553816044">(Nov 05 2025 at 10:27)</a>:</h4>
<p>It's open here: <a href="https://github.com/roc-lang/roc/pull/8351">https://github.com/roc-lang/roc/pull/8351</a></p>



<a name="553833541"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/553833541" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#553833541">(Nov 05 2025 at 11:57)</a>:</h4>
<p>Thanks, I'll check it out :)</p>



<a name="553838082"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/553838082" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#553838082">(Nov 05 2025 at 12:17)</a>:</h4>
<p>Hmm, this is going very slowly for me:</p>
<div class="codehilite"><pre><span></span><code>❯ nix run ./src/#roc
warning: Git tree &#39;/Users/username/gitrepos/forks/hasnep/roc&#39; is dirty
[1/0/1 built] building roc (buildPhase): install -C .zig-cache/o/63519b81310eced5835dbe3ca5ae69cd/roc /nix/var/nix/builds/nix-9378-2989836767/5lsb292nlfn65p09g6aqlfz2bdbsq44h-source/zig-out/bin/roc
</code></pre></div>
<p>But when I look in activity monitor it's not using much CPU or memory at all</p>



<a name="570093601"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/570093601" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georges Boris <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#570093601">(Jan 26 2026 at 13:38)</a>:</h4>
<p>Hey folks - anyone using the new compiler with nix flakes?<br>
I noticed there is <a href="https://github.com/roc-lang/roc/pull/8351">an open PR</a> but seems inactive.</p>
<p>IIRC Anton used nix flakes for roc development, right? Do you have any working setup available?</p>



<a name="570094667"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/570094667" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#570094667">(Jan 26 2026 at 13:42)</a>:</h4>
<p>Georges, i used to run nixos and I used to do nix flake for some project setup, but I abandoned this approach for a moment.  So i may be able to help a little, maybe not.  But have you seen <a href="https://github.com/rickhull/roc-init">https://github.com/rickhull/roc-init</a> ?</p>



<a name="570096906"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/570096906" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#570096906">(Jan 26 2026 at 13:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="364014">Georges Boris</span> <a href="#narrow/channel/231634-beginners/topic/roc.20nix.20flake/near/570093601">said</a>:</p>
<blockquote>
<p>Hey folks - anyone using the new compiler with nix flakes?<br>
I noticed there is <a href="https://github.com/roc-lang/roc/pull/8351">an open PR</a> but seems inactive.</p>
<p>IIRC Anton used nix flakes for roc development, right? Do you have any working setup available?</p>
</blockquote>
<p>Hi Georges :) we already have a new compiler flake, use it with 'nix develop ./src'</p>



<a name="570098081"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/570098081" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#570098081">(Jan 26 2026 at 13:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="364014">Georges Boris</span> <a href="#narrow/channel/231634-beginners/topic/roc.20nix.20flake/near/570093601">said</a>:</p>
<blockquote>
<p>I noticed there is <a href="https://github.com/roc-lang/roc/pull/8351">an open PR</a> but seems inactive.</p>
</blockquote>
<p>That PR will become active again next week when I quit my job and have more time to work on Roc again <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="570098297"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/570098297" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#570098297">(Jan 26 2026 at 13:56)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/blob/main/src/flake.nix">https://github.com/roc-lang/roc/blob/main/src/flake.nix</a> # cool</p>



<a name="570112565"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/570112565" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#570112565">(Jan 26 2026 at 14:52)</a>:</h4>
<p>Oh and you should know that it seems like you need to run tests from the top level '/'. So I always run <code>nix develop</code> from in /src then go back to / and run <code>zig build test</code></p>



<a name="570209960"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/roc%20nix%20flake/near/570209960" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/roc.20nix.20flake.html#570209960">(Jan 26 2026 at 23:56)</a>:</h4>
<p>You should be able to run <code>nix develop ./src</code> to use the flake in the src directory</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>