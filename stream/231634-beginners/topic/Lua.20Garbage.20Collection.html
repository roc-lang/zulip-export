<html>
<head><meta charset="utf-8"><title>Lua Garbage Collection · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html">Lua Garbage Collection</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="387759050"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387759050" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ShalokShalom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387759050">(Aug 28 2023 at 21:23)</a>:</h4>
<p>You write on your homepage: Like Lua, Roc's automatic memory management doesn't require a virtual machine. </p>
<p>How do you mean that? Lua has a traditional GC, and as far as I know, does it need a VM?</p>



<a name="387772488"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387772488" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387772488">(Aug 28 2023 at 23:21)</a>:</h4>
<p>From Wikipedia:</p>
<blockquote>
<p>Lua programs are not interpreted directly from the textual Lua file, but are compiled into bytecode, which is then run on the Lua virtual machine.</p>
</blockquote>
<p>So probably our site is wrong?</p>



<a name="387772906"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387772906" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387772906">(Aug 28 2023 at 23:26)</a>:</h4>
<p>oh, I guess so! I always thought Lua didn't have a VM <span aria-label="embarrassed" class="emoji emoji-1f633" role="img" title="embarrassed">:embarrassed:</span></p>



<a name="387772965"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387772965" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387772965">(Aug 28 2023 at 23:26)</a>:</h4>
<p>what example could we use there instead? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="387776597"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387776597" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387776597">(Aug 29 2023 at 00:05)</a>:</h4>
<p>swift?</p>



<a name="387776629"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387776629" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387776629">(Aug 29 2023 at 00:05)</a>:</h4>
<p>is the most high-level compiled (to machine code) language I can think of</p>



<a name="387926813"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387926813" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387926813">(Aug 29 2023 at 17:15)</a>:</h4>
<p>Go also compiles to machine code and has memory management.</p>



<a name="387939545"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387939545" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387939545">(Aug 29 2023 at 18:23)</a>:</h4>
<p>yeah I was trying to think of something that people use for "embedding" (like Lua), but maybe there aren't good examples of that <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="387940196"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387940196" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387940196">(Aug 29 2023 at 18:27)</a>:</h4>
<p>So you want embedded and refcounting essentially. Cause GC means VM or interpreter generally speaking (or runtime hooks I guess cause that is what go does, right?).</p>



<a name="387940668"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387940668" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387940668">(Aug 29 2023 at 18:30)</a>:</h4>
<p>I guess Go has neither, but it's not really used for embedding (I think maybe because of C ABI and/or maybe it's not a good fit due to being oriented around the use case of servers?)</p>



<a name="387940738"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387940738" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387940738">(Aug 29 2023 at 18:31)</a>:</h4>
<p>It has really bad cffi that often is really slow</p>



<a name="387940768"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387940768" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387940768">(Aug 29 2023 at 18:31)</a>:</h4>
<p>Gotten better over the years, but historically really bad</p>



<a name="387940845"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387940845" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387940845">(Aug 29 2023 at 18:32)</a>:</h4>
<p>But yeah, swift is closest if you ignore the embedding part. Go probably next closest. But neither really good examples</p>



<a name="387940928"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/387940928" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#387940928">(Aug 29 2023 at 18:32)</a>:</h4>
<p>May need to split the example in two. Mention Lua and Swift or something</p>



<a name="390374603"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/390374603" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ShalokShalom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#390374603">(Sep 11 2023 at 19:25)</a>:</h4>
<p>Nim, Vale, Odin, there are a bunch of languages.</p>



<a name="390375030"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/390375030" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ShalokShalom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#390375030">(Sep 11 2023 at 19:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/231634-beginners/topic/Lua.20Garbage.20Collection/near/387772906">said</a>:</p>
<blockquote>
<p>oh, I guess so! I always thought Lua didn't have a VM <span aria-label="embarrassed" class="emoji emoji-1f633" role="img" title="embarrassed">:embarrassed:</span></p>
</blockquote>
<p>I think, because there is LuaJIT, and you confused the original Lua because its different from LuaJIT.<br>
Thats at least, how I make such mistakes <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="390375271"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/390375271" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ShalokShalom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#390375271">(Sep 11 2023 at 19:30)</a>:</h4>
<p>The text on the homepage still says Lua has no VM: <br>
<a href="https://www.roc-lang.org/">https://www.roc-lang.org/</a></p>
<p>I can make a PR, to change this.</p>



<a name="390377294"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/390377294" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ShalokShalom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#390377294">(Sep 11 2023 at 19:46)</a>:</h4>
<p>Just had a chat with the Nim guys. <br>
 They basically use a VM for compile time evaluation, but dont bake it into the runtime.</p>



<a name="390377431"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/390377431" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#390377431">(Sep 11 2023 at 19:48)</a>:</h4>
<p>LuaJIT is still a VM...though VM is a very general term</p>



<a name="390377469"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/390377469" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#390377469">(Sep 11 2023 at 19:48)</a>:</h4>
<p>from <a href="https://luajit.org/luajit.html">https://luajit.org/luajit.html</a>:</p>
<blockquote>
<p>For LuaJIT 2.0, the whole VM has been rewritten from the ground up and relentlessly optimized for performance. It combines a high-speed interpreter, written in assembler, with a state-of-the-art JIT compiler.</p>
</blockquote>



<a name="390378275"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Lua%20Garbage%20Collection/near/390378275" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Lua.20Garbage.20Collection.html#390378275">(Sep 11 2023 at 19:54)</a>:</h4>
<p>Also, maybe not super useful here, but happened upon this really good read on the luaJIT VM. All linked to from here: <a href="https://0xbigshaq.github.io/2022/08/22/lua-jit-intro/">https://0xbigshaq.github.io/2022/08/22/lua-jit-intro/</a></p>
<p>Definitely a classic VM like JS.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>