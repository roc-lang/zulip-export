<html>
<head><meta charset="utf-8"><title>Advent of Code 2021 · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html">Advent of Code 2021</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="262241233"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262241233" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262241233">(Nov 21 2021 at 13:39)</a>:</h4>
<p>Anyone planning to do Advent of Code 2021 in Roc? <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>
<p><a href="https://adventofcode.com/2021">https://adventofcode.com/2021</a></p>



<a name="262241357"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262241357" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262241357">(Nov 21 2021 at 13:42)</a>:</h4>
<p>How much setup would it need? Is it for example possible to set up an AoC example?</p>
<p>I think it's a great opportunity to try out Roc, I'm just not sure how much time I'll have for AoC. So if there is expected overhead, I might reconsider Roc.</p>



<a name="262253997"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262253997" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262253997">(Nov 21 2021 at 18:37)</a>:</h4>
<p>I think I'll give it a go. I've never done it and might as well do it in roc</p>



<a name="262254053"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262254053" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262254053">(Nov 21 2021 at 18:39)</a>:</h4>
<blockquote>
<p>Is it for example possible to set up an AoC example?</p>
</blockquote>
<p>definitely! We could make an <code>examples/advent-of-code</code> which has sort of a starter kit example for doing things like:</p>
<ul>
<li>writing to the terminal</li>
<li>reading from the terminal</li>
<li>writing to a file</li>
<li>reading from a file</li>
</ul>



<a name="262254119"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262254119" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262254119">(Nov 21 2021 at 18:40)</a>:</h4>
<p>maybe just cli is enough?</p>



<a name="262254129"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262254129" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262254129">(Nov 21 2021 at 18:41)</a>:</h4>
<p>it has writing/reading to terminal but idk about file IO</p>



<a name="262254356"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262254356" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262254356">(Nov 21 2021 at 18:47)</a>:</h4>
<p>482952-59f1582e</p>



<a name="262254363"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262254363" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262254363">(Nov 21 2021 at 18:47)</a>:</h4>
<p>I made a private leaderboard ^</p>



<a name="262256265"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262256265" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262256265">(Nov 21 2021 at 19:31)</a>:</h4>
<p>Generally you don't need terminal, just file io/copying data into an array. They tend to give you a sample problem with a small input to interpret then either a larger input or many inputs in a file.</p>



<a name="262261224"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262261224" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262261224">(Nov 21 2021 at 21:18)</a>:</h4>
<p>When I did it in Elm one year, I just copied the input data into a file called <code>input.elm</code> and made it a <code>String</code> or a <code>List Int</code>. I figured my program didn't need to parse _any_ input, just that specific input. <span aria-label="smiling devil" class="emoji emoji-1f608" role="img" title="smiling devil">:smiling_devil:</span></p>



<a name="262261241"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262261241" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262261241">(Nov 21 2021 at 21:19)</a>:</h4>
<p>But Elm has the excuse of being a front end language!</p>



<a name="262262148"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262262148" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262262148">(Nov 21 2021 at 21:40)</a>:</h4>
<p>lmao</p>



<a name="262262155"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262262155" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262262155">(Nov 21 2021 at 21:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/231634-beginners/topic/Advent.20of.20Code.202021/near/262256265">said</a>:</p>
<blockquote>
<p>Generally you don't need terminal, just file io/copying data into an array. They tend to give you a sample problem with a small input to interpret then either a larger input or many inputs in a file.</p>
</blockquote>
<p>what about outputting an answer?</p>



<a name="262262294"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262262294" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262262294">(Nov 21 2021 at 21:44)</a>:</h4>
<p>oh...fair...though could just write to file.</p>



<a name="262262473"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262262473" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262262473">(Nov 21 2021 at 21:49)</a>:</h4>
<p>oh true lol</p>



<a name="262934053"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262934053" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262934053">(Nov 28 2021 at 15:23)</a>:</h4>
<p>I thought I'd have a look at the previous AoC to see how to set it up. It's pretty easy to go inside <code>example/cli</code> and just do something like <code>cat input.txt | cargo run Day1.roc &gt; output.txt</code>.</p>
<p>But I immediately needed to parse the input into a list of numbers and that's where I'm already lost. I know it's marked as a high priority built-in in <a href="https://github.com/rtfeldman/roc/issues/664">https://github.com/rtfeldman/roc/issues/664</a>, but unfortunately I currently don't have time to figure out how to implement it.</p>
<p>So based on this, I think I might do AoC (if at all) in a more familiar language, but I'm definitely interested in doing it again in Roc, as soon as the avant-garde has cleared the way. ;)</p>



<a name="262934926"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262934926" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pit Capitain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262934926">(Nov 28 2021 at 15:43)</a>:</h4>
<p>Hi Johannes, I solved last year's AoC with a very early version of Roc. You can read a little bit about it here: <a href="https://github.com/pithub/aoc2020/blob/master/WrapUp.md">https://github.com/pithub/aoc2020/blob/master/WrapUp.md</a>. My platform read files as a list of bytes, which were then parsed into a list of numbers, for example.</p>



<a name="262938024"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262938024" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262938024">(Nov 28 2021 at 17:00)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="358152">@Pit Capitain</span>! Looks really interesting! If I find some time, I might take inspiration from your repo. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="262964487"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262964487" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262964487">(Nov 29 2021 at 03:51)</a>:</h4>
<p>I got most of the tutorial done: <a href="https://github.com/rtfeldman/roc/blob/trunk/TUTORIAL.md">https://github.com/rtfeldman/roc/blob/trunk/TUTORIAL.md</a></p>



<a name="262964504"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262964504" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262964504">(Nov 29 2021 at 03:51)</a>:</h4>
<p>I'll keep filling in missing sections over the next week, but hopefully what's there will be helpful so far!</p>



<a name="262971174"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/262971174" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pit Capitain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#262971174">(Nov 29 2021 at 06:29)</a>:</h4>
<p>Very nice <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> It's really hard for me to resist, but I have other tasks I need to accomplish first <span aria-label="disappointed" class="emoji emoji-1f61e" role="img" title="disappointed">:disappointed:</span></p>



<a name="263011222"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263011222" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263011222">(Nov 29 2021 at 13:58)</a>:</h4>
<p>if anyone just joined for Advent of Code, welcome! <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> </p>
<p>feel free to introduce yourself in <a class="stream-topic" data-stream-id="231634" href="/#narrow/stream/231634-beginners/topic/introductions">#beginners &gt; introductions</a> and ask any Advent of Code related questions right here in this topic!</p>



<a name="263020142"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263020142" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263020142">(Nov 29 2021 at 15:07)</a>:</h4>
<p>482952-59f1582e</p>



<a name="263020177"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263020177" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263020177">(Nov 29 2021 at 15:07)</a>:</h4>
<p>dropping the private leaderboard I made for roc folks again ^</p>



<a name="263259231"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263259231" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Janiczek <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263259231">(Dec 01 2021 at 08:46)</a>:</h4>
<p>Hello! Trying Roc on 2021/01, starting out from examples/cli. Is there some working implemented str-&gt;num function? I tried out Str.toNum and Str.toU8 that I saw mentioned in the compiler/builtins/docs/*.roc but no luck so far</p>



<a name="263261052"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263261052" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263261052">(Dec 01 2021 at 09:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="455616">Martin Janiczek</span> <a href="#narrow/stream/231634-beginners/topic/Advent.20of.20Code.202021/near/263259231">said</a>:</p>
<blockquote>
<p>Hello! Trying Roc on 2021/01, starting out from examples/cli. Is there some working implemented str-&gt;num function? I tried out Str.toNum and Str.toU8 that I saw mentioned in the compiler/builtins/docs/*.roc but no luck so far</p>
</blockquote>
<p>We mentioned that in <a class="stream-topic" data-stream-id="231634" href="/#narrow/stream/231634-beginners/topic/tutorial">#beginners &gt; tutorial</a> and the change is coming: <a href="https://github.com/rtfeldman/roc/pull/2108">https://github.com/rtfeldman/roc/pull/2108</a></p>



<a name="263263238"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263263238" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263263238">(Dec 01 2021 at 09:28)</a>:</h4>
<p>for day 1, if we save the inputs into a file, we need a way to read from that file.  The tutorial mentions that in <a href="https://github.com/rtfeldman/roc/blob/trunk/TUTORIAL.md#tasks">https://github.com/rtfeldman/roc/blob/trunk/TUTORIAL.md#tasks</a> but does not show the implementation. WIP I guess.<br>
I could not find any examples reading from a file. And you?</p>



<a name="263265584"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263265584" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263265584">(Dec 01 2021 at 09:51)</a>:</h4>
<p>I don't know if it's the good channel to get help.<br>
With the following code:</p>
<div class="codehilite"><pre><span></span><code>measurements = [199, 200, 208, 210, 200, 207, 240, 269, 260, 263 ]
increases = List.walk measurements { counts: 0, previousElement: 600 } \state, elem -&gt;
    when state.previousElement is
        Num previousElement if previousElement &lt; elem -&gt; { counts: state.counts + 1, previousElement: elem }
        _ -&gt; { state &amp; previousElement: elem }
increases
</code></pre></div>
<p>(previousElement: 600 is not here to stay, only to experiment)<br>
I got the following error:</p>
<div class="codehilite"><pre><span></span><code>── TYPE MISMATCH ───────────────────────────────────────────────────────────────

The 2nd branch of this when does not match all the previous branches:

6│          when state.previousElement is
7│              Num previousElement if previousElement &lt; elem -&gt; { counts: state.counts + 1, previousElement: elem }
8│              _ -&gt; { state &amp; previousElement: elem }
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The 2nd branch is a record of type:

    { counts : Num a, previousElement : [ Num (Num b) ]c }

But all the previous branches have type:

    { counts : Num a, previousElement : Num b }

I need all branches of a when to have the same type!
</code></pre></div>
<p>I don't really get the error about <code>[ Num (Num b) ]c</code>. Can someone help?</p>



<a name="263266859"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263266859" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263266859">(Dec 01 2021 at 10:02)</a>:</h4>
<p>I'll take a look in 15 mins <span class="user-mention" data-user-id="460663">@Yann Simon</span></p>



<a name="263269678"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263269678" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263269678">(Dec 01 2021 at 10:29)</a>:</h4>
<p>I'm not exactly sure what went wrong <span class="user-mention" data-user-id="460663">@Yann Simon</span> but this fixes it :)</p>
<div class="codehilite"><pre><span></span><code>measurements = [199, 200, 208, 210, 200, 207, 240, 269, 260, 263 ]
increases =
    List.walk measurements { counts: 0, previousElement: 600 } \state, elem -&gt;
        if state.previousElement &lt; elem then
            { counts: state.counts + 1, previousElement: elem }
        else
            { state &amp; previousElement: elem }
increases
</code></pre></div>



<a name="263270627"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263270627" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263270627">(Dec 01 2021 at 10:37)</a>:</h4>
<p>OK, but I'd like to use something else as <code>600</code>  as initial state, like <code>None</code> to start with an empty previous element. And then I need the <code>when</code> right?</p>



<a name="263271866"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263271866" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Janiczek <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263271866">(Dec 01 2021 at 10:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="460663">Yann Simon</span> <a href="#narrow/stream/231634-beginners/topic/Advent.20of.20Code.202021/near/263261052">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="455616">Martin Janiczek</span> <a href="#narrow/stream/231634-beginners/topic/Advent.20of.20Code.202021/near/263259231">said</a>:</p>
<blockquote>
<p>Hello! Trying Roc on 2021/01, starting out from examples/cli. Is there some working implemented str-&gt;num function? I tried out Str.toNum and Str.toU8 that I saw mentioned in the compiler/builtins/docs/*.roc but no luck so far</p>
</blockquote>
<p>We mentioned that in <a class="stream-topic" data-stream-id="231634" href="/#narrow/stream/231634-beginners/topic/tutorial">#beginners &gt; tutorial</a> and the change is coming: <a href="https://github.com/rtfeldman/roc/pull/2108">https://github.com/rtfeldman/roc/pull/2108</a></p>
</blockquote>
<p>I'm sorry for the confusion, my question was the other way round, the linked PR does Num-&gt;Str, I need Str-&gt;Num</p>



<a name="263275742"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263275742" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263275742">(Dec 01 2021 at 11:24)</a>:</h4>
<p><span class="user-mention" data-user-id="460663">@Yann Simon</span> I see, matching with <code>Some</code>(with if) and <code>None</code> should work. <br>
Matching with <code>Num previousElement</code> does not work as you intend, I'd recommend reading the section on Numbers <a href="https://github.com/rtfeldman/roc/blob/trunk/roc-for-elm-programmers.md#numbers">here</a>.</p>



<a name="263301693"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263301693" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurence Joseph Pakenham-Smith <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263301693">(Dec 01 2021 at 14:51)</a>:</h4>
<p>Hey all, looking for a bit of advice on how to get up and running. I've got a hello world example here: <a href="https://github.com/Sourceless/advent-of-code-2021/blob/master/01/part1.roc">https://github.com/Sourceless/advent-of-code-2021/blob/master/01/part1.roc</a> -- I see that a lib is required to use some of the I/O actions, so I've symlinked to the <code>platform</code> in <code>examples/cli</code> in the Roc repo.</p>
<p>This example compiles and runs but produces no output:<br>
``` $ roc part1.roc <br>
<span aria-label="hammer" class="emoji emoji-1f528" role="img" title="hammer">:hammer:</span> Rebuilding host... Done!</p>
<p>$ ```</p>
<p>There is however a blank line.</p>
<p>I'm running the latest nightly of Roc (the binary sat in my PATH) with cargo nightly on Ubuntu 20.04. Thanks in advance for any help and please forgive the stupid questions!</p>



<a name="263302179"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263302179" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrikanth Upadhayaya <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263302179">(Dec 01 2021 at 14:54)</a>:</h4>
<p>You might be running into the same issue I ran into a while ago : <a href="#narrow/stream/231634-beginners/topic/tutorial/near/263096067">https://roc.zulipchat.com/#narrow/stream/231634-beginners/topic/tutorial/near/263096067</a></p>



<a name="263302311"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263302311" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrikanth Upadhayaya <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263302311">(Dec 01 2021 at 14:55)</a>:</h4>
<p>I've found that you just need to await <em>something</em> - so I'm making it await on <code>Task.succeed {}</code></p>



<a name="263302505"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263302505" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurence Joseph Pakenham-Smith <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263302505">(Dec 01 2021 at 14:56)</a>:</h4>
<p>using your <code>main</code> definition there gets me this:</p>
<div class="codehilite"><pre><span></span><code>thread &#39;&lt;unnamed&gt;&#39; panicked at &#39;index out of bounds: the len is 0 but the index is 0&#39;, compiler/mono/src/ir.rs:8208:35
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrac
</code></pre></div>



<a name="263302872"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263302872" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrikanth Upadhayaya <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263302872">(Dec 01 2021 at 14:59)</a>:</h4>
<p>Did you import <code>pf.Task.{ await }</code>?</p>



<a name="263302918"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263302918" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurence Joseph Pakenham-Smith <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263302918">(Dec 01 2021 at 14:59)</a>:</h4>
<p>i didn't, i'll try that quickly</p>



<a name="263302926"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263302926" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrikanth Upadhayaya <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263302926">(Dec 01 2021 at 14:59)</a>:</h4>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">app</span> <span class="s">"hello"</span>
    <span class="nx">packages</span> <span class="p">{</span> <span class="nv">base: </span><span class="s">"../examples/cli/platform"</span> <span class="p">}</span>
    <span class="nx">imports</span> <span class="p">[</span> <span class="nx">base</span><span class="p">.</span><span class="nx">Task</span><span class="p">.{</span> <span class="nx">await</span><span class="p">,</span> <span class="nx">succeed</span> <span class="p">},</span> <span class="nx">base</span><span class="p">.</span><span class="nx">Stdout</span> <span class="p">]</span>
    <span class="nx">provides</span> <span class="p">[</span> <span class="nx">main</span> <span class="p">]</span> <span class="nx">to</span> <span class="nx">base</span>

<span class="nv">main =</span>
    <span class="c1"># Has to be the first line of every main</span>
    <span class="nx">_</span> <span class="o">&lt;-</span> <span class="nx">await</span> <span class="p">(</span><span class="nx">succeed</span> <span class="p">{})</span>

    <span class="nx">Stdout</span><span class="p">.</span><span class="nx">line</span> <span class="s">"I'm a roc application!"</span>
</code></pre></div>



<a name="263303143"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263303143" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurence Joseph Pakenham-Smith <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263303143">(Dec 01 2021 at 15:00)</a>:</h4>
<p>that did it, many thanks <span class="user-mention" data-user-id="460648">@Shrikanth Upadhayaya</span></p>



<a name="263311954"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263311954" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263311954">(Dec 01 2021 at 15:58)</a>:</h4>
<p>I see we have a few people in the AoC roc leaderboard :p</p>



<a name="263312035"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263312035" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263312035">(Dec 01 2021 at 15:58)</a>:</h4>
<p>here's the id for newcomers: <code>482952-59f1582e</code></p>



<a name="263314365"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263314365" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Hobbs <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263314365">(Dec 01 2021 at 16:12)</a>:</h4>
<p><span class="user-mention" data-user-id="357305">@Lucas Rosa</span>  Where do we use that ID?</p>



<a name="263314893"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263314893" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263314893">(Dec 01 2021 at 16:15)</a>:</h4>
<p>on the AoC site, click <code>[Leaderboard]</code>, then in the paragraph below the menu click <code>[Private Leaderboard]</code>, you should see an input box to add that ID</p>



<a name="263315377"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263315377" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Hobbs <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263315377">(Dec 01 2021 at 16:18)</a>:</h4>
<p>Ah, that paragraph doesn't show up until you Log In.  Thanks... just added myself.</p>



<a name="263316389"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263316389" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263316389">(Dec 01 2021 at 16:25)</a>:</h4>
<p>baller</p>



<a name="263333180"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263333180" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263333180">(Dec 01 2021 at 18:15)</a>:</h4>
<p>For anyone that has completed the advent of code for today in Roc, it would be great if you can send the link to your repo. That way other users who get stuck can take a look. Since roc has a number of rough edges at the moment, that would probably be very useful to others.</p>



<a name="263380526"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263380526" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Whiting <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263380526">(Dec 02 2021 at 01:03)</a>:</h4>
<p>Here is a link to a gist. I'll probably end up creating a repo so I can have all the days together, but this is for today. This is my first time really using a functional language for something non-trivial, and I know at least a few things that I could have improved: <a href="https://gist.github.com/cbcc781860f5ad69b7c7bfe55087e6c6">https://gist.github.com/cbcc781860f5ad69b7c7bfe55087e6c6</a></p>
<p>I didn't do any reading in from a file, just copied the list of numbers since the Str.toNum builtin wasn't ready yet</p>
<p>I just used the cli platform for the platform</p>



<a name="263388289"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263388289" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263388289">(Dec 02 2021 at 03:11)</a>:</h4>
<p>I'm still stuck. I've tried adding more type annotations to help the compiler, but nothing helps ;(</p>
<div class="codehilite"><pre><span></span><code>Option a : [ Some a, None ]
Aggr : { counts: Nat, previousElement: Option Nat}

walkStep: Aggr, Nat -&gt; Aggr
walkStep = \state, elem -&gt;
    when state.previousElement is
        Some previousElement if previousElement &lt; elem -&gt; { counts: state.counts + 1, previousElement: Some elem }
        _ -&gt; { state &amp; previousElement: Some elem }

initialState: Aggr
initialState = { counts: 0, previousElement: None }

measurements = [199, 200, 208, 210, 200, 207, 240, 269, 260, 263 ]
increases = List.walk measurements initialState walkStep
increases
</code></pre></div>
<p>gives the following error in the REPL:</p>
<div class="codehilite"><pre><span></span><code>thread &#39;main&#39; panicked at &#39;internal error: entered unreachable code: Something had a Struct layout, but instead of a Record or TagUnion type, it had: Alias(`#UserApp.Aggr`, AliasVariables { variables_start: 424, all_variables_len: 0, type_variables_len: 0 }, 990)&#39;, cli/src/repl/eval.rs:184:21
</code></pre></div>
<p>or this error when compiling the roc file:</p>
<div class="codehilite"><pre><span></span><code>Mismatch in compiler/unify/src/unify.rs Line 1078 Column 13
Trying to unify two flat types that are incompatible: { &#39;counts&#39; : Required(1152), &#39;previousElement&#39; : Required(1137), }&lt;1&gt; ~ Apply(`Str.Str`, [])

thread &#39;main&#39; panicked at &#39;internal error: entered unreachable code: symbol/layout `fx.Effect.effect_always_inner` ProcLayout { arguments: [Struct([]), LambdaSet(LambdaSet { set: [(`fx.Effect.effect_always_inner`, [Union(NonRecursive([[Union(NonRecursive([]))], [Builtin(Str)]]))])], representation: Struct([Union(NonRecursive([[Union(NonRecursive([]))], [Builtin(Str)]]))]) })], result: Union(NonRecursive([[Union(NonRecursive([]))], [Union(NonRecursive([]))]])) } combo must be in DeclarationToIndex&#39;, compiler/mono/src/borrow.rs:227:9
</code></pre></div>



<a name="263388879"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263388879" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263388879">(Dec 02 2021 at 03:25)</a>:</h4>
<p>Same issue by changing <code>walkStep</code> to:</p>
<div class="codehilite"><pre><span></span><code>walkStep = \state, _elem -&gt;
    state
</code></pre></div>



<a name="263389609"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263389609" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrikanth Upadhayaya <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263389609">(Dec 02 2021 at 03:40)</a>:</h4>
<p>I created a gist for using the WIP <code>cli-file-io</code> branch for reading input: <a href="https://gist.github.com/shrik450/dea48e77ccacc3f6da6bf9538cd61bde">https://gist.github.com/shrik450/dea48e77ccacc3f6da6bf9538cd61bde</a></p>



<a name="263389624"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263389624" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrikanth Upadhayaya <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263389624">(Dec 02 2021 at 03:40)</a>:</h4>
<p>I ran into a few issues which I patched, so this should be helpful if you're trying to do it but can't get it working</p>



<a name="263389639"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263389639" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263389639">(Dec 02 2021 at 03:41)</a>:</h4>
<p>ok very strange, I've started a new roc file from scratch, copy/paste everything step by step, and now it's compiling...</p>



<a name="263389992"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263389992" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263389992">(Dec 02 2021 at 03:48)</a>:</h4>
<p>My solution, without reading inputs from file:</p>
<ul>
<li>with type annotations: <a href="https://gist.github.com/yanns/3212cd6400b6ccf0f32912e1c96e9b1f">https://gist.github.com/yanns/3212cd6400b6ccf0f32912e1c96e9b1f</a></li>
<li>without type annotations: <a href="https://gist.github.com/yanns/b8ea295d91ac64d8bd6d41a0d1611ac8">https://gist.github.com/yanns/b8ea295d91ac64d8bd6d41a0d1611ac8</a></li>
</ul>



<a name="263390259"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263390259" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263390259">(Dec 02 2021 at 03:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="460648">Shrikanth Upadhayaya</span> <a href="#narrow/stream/231634-beginners/topic/Advent.20of.20Code.202021/near/263389609">said</a>:</p>
<blockquote>
<p>I created a gist for using the WIP <code>cli-file-io</code> branch for reading input: <a href="https://gist.github.com/shrik450/dea48e77ccacc3f6da6bf9538cd61bde">https://gist.github.com/shrik450/dea48e77ccacc3f6da6bf9538cd61bde</a></p>
</blockquote>
<p>Cool! Could you merge trunk inside so that we can still use <code>Num.toStr</code>?</p>



<a name="263390412"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263390412" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrikanth Upadhayaya <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263390412">(Dec 02 2021 at 03:58)</a>:</h4>
<p>It's not my branch, unfortunately</p>



<a name="263390422"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263390422" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrikanth Upadhayaya <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263390422">(Dec 02 2021 at 03:59)</a>:</h4>
<p>if you want to use both, you can vendor the platform code separately into whatever directory you're using</p>



<a name="263390435"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263390435" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrikanth Upadhayaya <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263390435">(Dec 02 2021 at 03:59)</a>:</h4>
<p>The only changes there are in the platform code</p>



<a name="263390659"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263390659" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263390659">(Dec 02 2021 at 04:02)</a>:</h4>
<p>ok thx</p>



<a name="263391364"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263391364" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263391364">(Dec 02 2021 at 04:18)</a>:</h4>
<p>I can confirm I can read the file (with the modification as I'm on macos)<br>
Now I just need <a class="stream-topic" data-stream-id="231634" href="/#narrow/stream/231634-beginners/topic/Str.2EtoNum">#beginners &gt; Str.toNum</a>  <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="263392188"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263392188" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263392188">(Dec 02 2021 at 04:38)</a>:</h4>
<p>What's the policy on public repos with Roc code? Would it be okay to make Roc code public, or should I make my repo private until the language stabilizes?</p>



<a name="263392312"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263392312" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263392312">(Dec 02 2021 at 04:41)</a>:</h4>
<p>I think public repos should be fine. I mean there are already a number of talks on roc. We mostly want to control how plausible it is for Roc to go viral and then for many people to be extremely annoyed because it isn't ready yet. But we are willing to accept new comers who happen upon the language.</p>



<a name="263392370"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263392370" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263392370">(Dec 02 2021 at 04:42)</a>:</h4>
<p>Just want slow stable growth until it is more ready for the general internet. Public repos on github should be just fine. I wouldn't expect them to randomly go viral.</p>



<a name="263410288"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263410288" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yann Simon <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263410288">(Dec 02 2021 at 09:17)</a>:</h4>
<p>I've pushed my current code to github: <a href="https://github.com/yanns/roc-advent-of-code-2021/blob/main/day1/aoc_1.roc">https://github.com/yanns/roc-advent-of-code-2021/blob/main/day1/aoc_1.roc</a></p>



<a name="263459548"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263459548" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263459548">(Dec 02 2021 at 16:03)</a>:</h4>
<p>sick</p>



<a name="263770666"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263770666" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263770666">(Dec 05 2021 at 14:21)</a>:</h4>
<p>for those doing advent of code in Roc: how's it going? Has anyone gotten stuck or blocked on anything?</p>
<p>It's a great opportunity to find things to fix in the language, so please let us know about anything you trip over! <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="263802986"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263802986" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263802986">(Dec 06 2021 at 02:30)</a>:</h4>
<p>(Day 1 of AoC is my first Roc program, so my feedback is very untrained.)</p>
<p>I got stuck on this problem for a while:</p>
<div class="codehilite"><pre><span></span><code>jan@Jans-MacBook-Pro advent-of-code-2021 % ./solutions/day-1a-sonar-sweep/run_1a.sh
    Finished dev [unoptimized + debuginfo] target(s) in 0.30s
     Running `target/debug/roc ../solutions/day-1a-sonar-sweep/solution_1a.roc`
Mismatch in compiler/unify/src/unify.rs Line 1078 Column 13
Trying to unify two flat types that are incompatible: Func([242, 252], 240, 221) ~ Func([104, 105, 117], 119, 120)

thread &#39;&lt;unnamed&gt;&#39; panicked at &#39;index out of bounds: the len is 0 but the index is 0&#39;, compiler/mono/src/ir.rs:8236:35
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
^C

[nix-shell:~/code/advent-of-code-2021/roc]$ exit
exit
jan@Jans-MacBook-Pro advent-of-code-2021 %
</code></pre></div>
<p>The problematic code was essentially this:</p>
<div class="codehilite"><pre><span></span><code>#!/usr/bin/env roc

app &quot;hi&quot;
    packages { base: &quot;../../roc/examples/cli/platform&quot; }
    imports [ base.Task.{ Task, await }, base.Stdout ]
    provides [ main ] to base

main : Task {} *
main =
    {} &lt;- await Stdout.line &quot;hi&quot;
    Stdout.line &quot;nope&quot;
</code></pre></div>
<p>My obvious-in-hindsight mistake was missing parentheses: <code>await (Stdout.line "hi")</code> However, this panic is super confusing. Additionally, I feel like I've seen as many obtuse panics (like this one, but there's been others) as pretty-printed error/warning messages - this is offputting to a learner, though I imagine this is par for the course for WIP compilers.</p>



<a name="263803045"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263803045" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263803045">(Dec 06 2021 at 02:32)</a>:</h4>
<p>I saw this panic about 10 times in my first 10 minutes of coding (likely from some fundamentally flawed line of code, like missing parentheses or something):</p>
<div class="codehilite"><pre><span></span><code>thread &#39;&lt;unnamed&gt;&#39; panicked at &#39;called `Option::unwrap()` on a `None` value&#39;, src/lib.rs:116:45
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
fatal runtime error: failed to initiate panic, error 5
</code></pre></div>



<a name="263803109"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263803109" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263803109">(Dec 06 2021 at 02:34)</a>:</h4>
<p>Ideas for improvement (not sure if possible):</p>
<ol>
<li>Call out likely formatting mistakes?</li>
<li>Identify the line of code that's causing the panic?</li>
</ol>



<a name="263850437"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263850437" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263850437">(Dec 06 2021 at 13:36)</a>:</h4>
<p>Excellent feedback, thanks <span class="user-mention" data-user-id="462053">@JanCVanB</span>! Can someone familiar with this code set up some issues?</p>



<a name="263857222"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263857222" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ju Liu <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263857222">(Dec 06 2021 at 14:29)</a>:</h4>
<p>I have the repo updated and can run <code>cargo run repl</code>. what's the recommended way to get started? :) I tried the gist, but even with the patches it segfaults on <code>thread 'main' panicked at 'not yet implemented: unhandled parse error IndentProvides(0, 14)', reporting/src/error/parse.rs:3148:14</code></p>



<a name="263858112"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263858112" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263858112">(Dec 06 2021 at 14:36)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="400753">@Ju Liu</span>, can you tell me which gist you are using?</p>



<a name="263870326"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263870326" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ju Liu <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263870326">(Dec 06 2021 at 15:54)</a>:</h4>
<p>this one :) <a href="https://gist.github.com/shrik450/dea48e77ccacc3f6da6bf9538cd61bde">https://gist.github.com/shrik450/dea48e77ccacc3f6da6bf9538cd61bde</a></p>



<a name="263881172"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263881172" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263881172">(Dec 06 2021 at 17:01)</a>:</h4>
<p>"packages ...", "imports..." and "provides..." need to have four spaces before them.</p>



<a name="263889282"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263889282" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ju Liu <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263889282">(Dec 06 2021 at 17:56)</a>:</h4>
<p>thank you! now it just sits there</p>



<a name="263889350"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263889350" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ju Liu <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263889350">(Dec 06 2021 at 17:56)</a>:</h4>
<div class="codehilite"><pre><span></span><code>$ cargo run test.roc
    Finished dev [unoptimized + debuginfo] target(s) in 0.89s
     Running `target/debug/roc test.roc`
</code></pre></div>



<a name="263889478"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263889478" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ju Liu <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263889478">(Dec 06 2021 at 17:57)</a>:</h4>
<div class="codehilite"><pre><span></span><code>$ cat test.roc
app &quot;solution&quot;
    packages { base: &quot;../platform&quot; }
    imports [ base.Task.{ await }, base.Stdout, base.File ]
    provides [ main ] to base

inputPath = &quot;test.roc&quot;

main =
    _ &lt;- await (Stdout.line &quot;Trying to read file...&quot;)
    task = File.readUtf8 inputPath
    Task.attempt task \result -&gt;
      when result is
          Ok input -&gt; Stdout.line &quot;Contents:\n\(input)&quot;
          Err _ -&gt; Stdout.line &quot;Failed to read input.&quot;
</code></pre></div>



<a name="263889690"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263889690" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263889690">(Dec 06 2021 at 17:58)</a>:</h4>
<p>that branch is still WIP, although it should fail with an explicit error <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> </p>
<p><a href="https://github.com/rtfeldman/roc/pull/2105#issuecomment-984236135">https://github.com/rtfeldman/roc/pull/2105#issuecomment-984236135</a></p>



<a name="263890125"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263890125" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ju Liu <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263890125">(Dec 06 2021 at 18:01)</a>:</h4>
<p>it's weird because it seems it's just stuck, maybe I should try straceing it and see what it's up to</p>



<a name="263890236"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263890236" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263890236">(Dec 06 2021 at 18:01)</a>:</h4>
<p>I also encountered that:</p>
<ul>
<li>I changed inputPath to be the full path, which in my case is <code>inputPath = "/home/anton/gitrepos/extraroc/roc/examples/cli/Test.roc"</code></li>
<li>This is my folder layout in examples/cli:</li>
</ul>
<div class="codehilite"><pre><span></span><code>echo  Echo.roc  Files.roc  platform  README.md  solution  Test.roc
</code></pre></div>
<ul>
<li>I changed the platform location to <code>packages { base: "./platform" }</code> instead of  <code>packages { base: "../platform" }</code></li>
</ul>



<a name="263890388"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263890388" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263890388">(Dec 06 2021 at 18:02)</a>:</h4>
<p>I run with <code>cargo run examples/cli/Test.roc</code> from the root of the repo.</p>



<a name="263890479"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263890479" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263890479">(Dec 06 2021 at 18:03)</a>:</h4>
<p>Note that I also used <code>Test.roc</code> everywhere instead of <code>test.roc</code></p>



<a name="263892836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263892836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263892836">(Dec 06 2021 at 18:18)</a>:</h4>
<p>Does that work for you <span class="user-mention" data-user-id="400753">@Ju Liu</span> ?</p>



<a name="263893210"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263893210" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ju Liu <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263893210">(Dec 06 2021 at 18:21)</a>:</h4>
<p>uhh, good catch, it runs! :)</p>



<a name="263893242"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263893242" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ju Liu <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263893242">(Dec 06 2021 at 18:21)</a>:</h4>
<p>I had to apply the patches since I'm on OSX</p>



<a name="263893439"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263893439" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ju Liu <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263893439">(Dec 06 2021 at 18:22)</a>:</h4>
<p>this now works for me from the top-level of the repo</p>
<div class="codehilite"><pre><span></span><code>$ cat Test.roc
app &quot;solution&quot;
    packages { base: &quot;./examples/cli/platform&quot; }
    imports [ base.Task.{ await }, base.Stdout, base.File ]
    provides [ main ] to base

inputPath = &quot;./Test.roc&quot;

main =
    _ &lt;- await (Stdout.line &quot;Trying to read file...&quot;)
    task = File.readUtf8 inputPath
    Task.attempt task \result -&gt;
      when result is
          Ok input -&gt; Stdout.line &quot;Contents:\n\(input)&quot;
          Err _ -&gt; Stdout.line &quot;Failed to read input.&quot;
</code></pre></div>



<a name="263893561"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263893561" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ju Liu <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263893561">(Dec 06 2021 at 18:23)</a>:</h4>
<p>have to run right now, thanks <span class="user-mention" data-user-id="361169">@Anton</span> for showing me the light</p>



<a name="263894131"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263894131" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263894131">(Dec 06 2021 at 18:26)</a>:</h4>
<p>Happy to help :)</p>



<a name="263895620"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263895620" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Emiliano Bovetti <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263895620">(Dec 06 2021 at 18:34)</a>:</h4>
<p>hello everyone!<br>
not sure where to write (first time using zulip) <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> <br>
I'm getting an error while using records as values for <code>Dict</code>, is this a known issue?</p>
<div class="codehilite"><pre><span></span><code>$ roc repl

» Dict.single 0 {a: 1, b: 1} |&gt; Dict.get 0

thread &#39;main&#39; panicked at &#39;Error in alias analysis: error in module ModName(&quot;UserApp&quot;), function definition FuncName(&quot;\x06\x00\x00\x00\x04\x00\x00\x00eiGJ\xf5B\x11=&quot;), definition of value binding ValueId(13): expected type &#39;(((), ()),)&#39;, found type &#39;((),)&#39;&#39;, compiler/gen_llvm/src/llvm/build.rs:4019:19
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="263899426"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/263899426" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#263899426">(Dec 06 2021 at 19:01)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="461347">@Emiliano Bovetti</span>,<br>
I could not find this in the issues, I'll make a new one. Thanks for reporting it!</p>



<a name="264222242"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264222242" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Fischer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264222242">(Dec 08 2021 at 21:22)</a>:</h4>
<p>I wrote a <a href="https://gist.github.com/sebfisch/b7d0e60ef9381376f0f3061d82bd6409">program to solve the tasks of Day 1 with Roc</a>.</p>
<p>The first task of Day 1 is solved when removing lines 9 and 10 of that program. For that task, the program prints the correct answer for <code>exampleInput</code> as well as <code>largeInput</code>.</p>
<p>For the second task of Day 1 the program prints the correct result only for <code>exampleInput</code>. When using <code>largeInput</code> the program exits with a segmentation fault.</p>



<a name="264223193"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264223193" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264223193">(Dec 08 2021 at 21:29)</a>:</h4>
<p>Are you building with <code>--optimize</code></p>



<a name="264223283"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264223283" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264223283">(Dec 08 2021 at 21:30)</a>:</h4>
<p>Probably getting stack overflow on large inputs otherwise.</p>



<a name="264225407"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264225407" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Fischer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264225407">(Dec 08 2021 at 21:46)</a>:</h4>
<p>Originally I was not. I now tried with <code>--optimize</code> but it still segfaults.</p>



<a name="264226662"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264226662" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264226662">(Dec 08 2021 at 21:57)</a>:</h4>
<p>One more test, can you run <code>ulimit -s unlimited</code> before running the executable?</p>



<a name="264226704"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264226704" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264226704">(Dec 08 2021 at 21:57)</a>:</h4>
<p>Will enable unlimited stack space for that terminal session</p>



<a name="264227378"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264227378" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Fischer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264227378">(Dec 08 2021 at 22:03)</a>:</h4>
<p>Also segfaults with unlimited stack space.</p>



<a name="264227545"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264227545" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264227545">(Dec 08 2021 at 22:04)</a>:</h4>
<p>hmm...probably an actual bug...cool</p>



<a name="264227596"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264227596" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264227596">(Dec 08 2021 at 22:05)</a>:</h4>
<p>To be fair requiring unlimited stack space is definitely also a bug, but that is more general to work on things than specific bugs.</p>



<a name="264228043"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264228043" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264228043">(Dec 08 2021 at 22:09)</a>:</h4>
<p>Hmm...neither run on my m1 mac. That suggests it is likely some sort of invalid memory bug. arm is a lot more picky around that kind of stuff.</p>



<a name="264228588"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264228588" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264228588">(Dec 08 2021 at 22:14)</a>:</h4>
<p>Yeah, looks to be some sort of refcounting issue, maybe a double free</p>



<a name="264265170"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264265170" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264265170">(Dec 09 2021 at 07:30)</a>:</h4>
<p>I just spent 2 hours debugging type mismatches in my AoC code, and although I've found some mistakes, I don't feel like my code is close to working. Therefore, I want to take a step back and ask... How should I be developing Roc code? I feel like my workflow must be flawed.</p>



<a name="264265552"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264265552" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264265552">(Dec 09 2021 at 07:37)</a>:</h4>
<p>My workflow:</p>
<ol start="0">
<li>VS Code + Terminal on a Mac, with CoffeeScript syntax highlighting and a smooth nix-shell compiler experience</li>
<li>Write a bunch of Roc code</li>
<li>Try to compile it</li>
<li>Read some well-formatted error messages</li>
<li>Fix the type mismatches and recompile it</li>
<li>Squint at a confusing panic message</li>
<li>Comment out half of my code, to do a binary search for the problem</li>
<li>Wish there was a polymorphic Stdout.line for print-based debugging</li>
<li>Repeat steps 5-7 until the bad line is found, and fix it</li>
<li>Repeat steps 2-8 until bedtime</li>
</ol>



<a name="264265620"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264265620" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264265620">(Dec 09 2021 at 07:38)</a>:</h4>
<p>Where am I going wrong? I'm asking honestly, not flaming, because the workflow feels wrong.</p>



<a name="264265896"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264265896" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264265896">(Dec 09 2021 at 07:43)</a>:</h4>
<p>I finished days 1 &amp; 2 with this workflow, but I'm stuck on debugging my day 9 code.</p>
<p>Here's my day 1 code: <a href="https://github.com/JanCVanB/advent-of-code-2021">https://github.com/JanCVanB/advent-of-code-2021</a> (will push more days soon)</p>



<a name="264267842"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264267842" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264267842">(Dec 09 2021 at 08:11)</a>:</h4>
<p>are you using  <code>roc check Foo.roc</code>? using <code>check</code> over <code>build</code> should improve error messages</p>



<a name="264267859"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264267859" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264267859">(Dec 09 2021 at 08:11)</a>:</h4>
<p>most crashes are because of earlier type checking problems leading to edge cases during code gen</p>



<a name="264267894"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264267894" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264267894">(Dec 09 2021 at 08:12)</a>:</h4>
<p>and <code>check</code> only runs the type checker</p>



<a name="264274941"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264274941" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264274941">(Dec 09 2021 at 09:26)</a>:</h4>
<p>I'll add a tip to use <code>roc check</code> to the README and getting started files.</p>



<a name="264300818"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264300818" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264300818">(Dec 09 2021 at 13:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281543">Folkert de Vries</span> <a href="#narrow/stream/231634-beginners/topic/Advent.20of.20Code.202021/near/264267842">said</a>:</p>
<blockquote>
<p>are you using  <code>roc check Foo.roc</code>? using <code>check</code> over <code>build</code> should improve error messages</p>
</blockquote>
<p>No, I didn't know that existed! I'll try that, thanks.</p>



<a name="264617658"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264617658" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264617658">(Dec 12 2021 at 11:18)</a>:</h4>
<p>What is the best way to read complex numeric data into an <code>examples/cli/</code>-based Roc module from a file or string? <a href="https://github.com/rtfeldman/roc/issues/2188">https://github.com/rtfeldman/roc/issues/2188</a> is giving me trouble with <a href="https://adventofcode.com/2021/day/9">AoC day 9</a>, which has this input data format (for a 2D matrix of elevation data, where <code>input(x, y) ∈ [0, 9]</code>):<br>
<a href="/user_uploads/22008/_KvU0nbNPj8o7mqti0ytXh8T/Screen-Shot-2021-12-12-at-4.16.06-AM.png">Screen-Shot-2021-12-12-at-4.16.06-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/_KvU0nbNPj8o7mqti0ytXh8T/Screen-Shot-2021-12-12-at-4.16.06-AM.png" title="Screen-Shot-2021-12-12-at-4.16.06-AM.png"><img src="/user_uploads/22008/_KvU0nbNPj8o7mqti0ytXh8T/Screen-Shot-2021-12-12-at-4.16.06-AM.png"></a></div>



<a name="264617758"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264617758" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264617758">(Dec 12 2021 at 11:21)</a>:</h4>
<p>I really don't want to semi-manually convert that into a hard-coded <code>List</code> like <code>heightMeasurements = [ [ 6, 6, 8, 9, 9, 2, ... ], [ ... ], ... ]</code>, but I don't mind copy/pasting it into a hard-coded <code>Str</code> like <code>heightMeasurements = "668992...\n..."</code>. However, I can't seem to split that Str without a segfault. Any tips appreciated! <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="264618235"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264618235" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264618235">(Dec 12 2021 at 11:33)</a>:</h4>
<p>Ooh, I just found <a href="https://gist.github.com/shrik450/dea48e77ccacc3f6da6bf9538cd61bde">https://gist.github.com/shrik450/dea48e77ccacc3f6da6bf9538cd61bde</a> (thank you <span class="user-mention" data-user-id="460648">@Shrikanth Upadhayaya</span>) via <a href="https://github.com/yanns/roc-advent-of-code-2021/blob/main/day1/aoc_1.roc">https://github.com/yanns/roc-advent-of-code-2021/blob/main/day1/aoc_1.roc</a> (thank you <span class="user-mention" data-user-id="460663">@Yann Simon</span>) - this might solve my file I/O needs, though I'll still need <code>Str</code> splitting...</p>



<a name="264638073"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264638073" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264638073">(Dec 12 2021 at 18:57)</a>:</h4>
<p>Str.split or something might exist. Str.toI64 just got merged</p>



<a name="264650822"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264650822" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264650822">(Dec 12 2021 at 23:52)</a>:</h4>
<p>Hooray for Str.toI64! Yes, Str.split exists, but it doesn't seem to work with an empty-string delimiter :/</p>



<a name="264651391"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264651391" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264651391">(Dec 13 2021 at 00:03)</a>:</h4>
<p><span class="user-mention" data-user-id="462053">@JanCVanB</span> that's probably a quick fix! can you file a bug?</p>



<a name="264651939"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264651939" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264651939">(Dec 13 2021 at 00:17)</a>:</h4>
<p>Sure! Should I enhance <a href="https://github.com/rtfeldman/roc/issues/2188">https://github.com/rtfeldman/roc/issues/2188</a> or file something new?</p>



<a name="264653815"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264653815" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264653815">(Dec 13 2021 at 01:02)</a>:</h4>
<p>oh nm that's good enough</p>



<a name="264653838"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264653838" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264653838">(Dec 13 2021 at 01:03)</a>:</h4>
<p>although, I just realized that <code>Str.split</code> with an empty string should likely be  a no-op <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="264654001"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264654001" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264654001">(Dec 13 2021 at 01:06)</a>:</h4>
<p>it would be easy to say "we should make it split on a character boundary" such that <code>"1234"</code> would become <code>[ "1", "2", "3", "4" ]</code> but that devolves quickly into a pile of Unicode edge cases (e.g. what if there are a bunch of emojis with modifiers, or multi-code-point compound characters) which I don't think should be in scope for a simple function like <code>split</code></p>



<a name="264654167"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264654167" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264654167">(Dec 13 2021 at 01:10)</a>:</h4>
<p>Oh, lol, so I can just <code>List.map</code> a <code>Str</code>... nice.</p>



<a name="264654172"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264654172" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264654172">(Dec 13 2021 at 01:10)</a>:</h4>
<p>however, I think there's an easier solution: <code>Str.split</code> on newlines to get a <code>List Str</code> of lines, and then for each line, do <code>Str.toUtf8</code> to get a <code>List U8</code></p>



<a name="264654190"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264654190" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264654190">(Dec 13 2021 at 01:11)</a>:</h4>
<p>the <code>List U8</code> won't be quite what you want, because they'll be ASCII bytes rather than the actual numbers you want, so you'll have to subtract 48 from each of them</p>



<a name="264654199"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264654199" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264654199">(Dec 13 2021 at 01:11)</a>:</h4>
<p>to get the actual number</p>



<a name="264654203"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264654203" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264654203">(Dec 13 2021 at 01:11)</a>:</h4>
<p>but then you'll have the actual number as a <code>U8</code>!</p>



<a name="264654364"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264654364" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264654364">(Dec 13 2021 at 01:14)</a>:</h4>
<p>Modifying my example in the above issue, when I change <code>Stdout.line (Str.joinWith (Str.split "abc" "") ", ")</code> to <code>Stdout.line (Str.joinWith "abc" ", ")</code>, I get</p>
<div class="codehilite"><pre><span></span><code>[nix-shell:~/code/advent-of-code-2021]$ ./roc/target/release/roc example.roc
🔨 Rebuilding host...
── TYPE MISMATCH ───────────────────────────────────────────────────────────────

The 1st argument to joinWith is not what I expect:

12│      Stdout.line (Str.joinWith &quot;abc&quot; &quot;, &quot;)
                                   ^^^^^

This argument is a string of type:

    Str

But joinWith needs the 1st argument to be:

    List Str

────────────────────────────────────────────────────────────────────────────────

Done!

Roc hit a panic: Hit an erroneous type when creating a layout for `3.IdentId(5)`

[nix-shell:~/code/advent-of-code-2021]$
</code></pre></div>



<a name="264654684"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264654684" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264654684">(Dec 13 2021 at 01:22)</a>:</h4>
<p>However, <code>Stdout.line (Num.toStr (List.sum (List.map (Str.toUtf8 "123") \x -&gt; x - 48)))</code> prints <code>6</code>! Thank you!</p>



<a name="264655261"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264655261" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264655261">(Dec 13 2021 at 01:36)</a>:</h4>
<p>Whoa... While cleaning that up by replacing <code>\x -&gt; x - 48</code> with <code>Str.toI64</code>, I just experienced a level up in my Roc comfort <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span> #Pipes4Life</p>
<div class="codehilite"><pre><span></span><code>#!/usr/bin/env roc

app &quot;example&quot;
    packages { base: &quot;roc/examples/cli/platform&quot; }
    imports [ base.Stdout, base.Task.{ await, Task } ]
    provides [ main ] to base

main : Task {} *
main =
    # This extra Stdout.line call is required. See GH issue #2151.
    _ &lt;- await (Stdout.line &quot;&quot;)
    &quot;123&quot;
        |&gt; Str.toUtf8
        |&gt; List.map \u -&gt;
            when Str.fromUtf8 [u] is
                Err _ -&gt; &quot;!&quot;
                Ok s -&gt; s
        |&gt; List.map \s -&gt;
            when Str.toI64 s is
                Err _ -&gt; -999
                Ok i -&gt; i
        |&gt; List.sum
        |&gt; Num.toStr
        |&gt; Stdout.line
</code></pre></div>
<p>That prints <code>6</code> <span aria-label="heart eyes" class="emoji emoji-1f60d" role="img" title="heart eyes">:heart_eyes:</span></p>



<a name="264656662"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264656662" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264656662">(Dec 13 2021 at 02:10)</a>:</h4>
<p>nice!!! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="264663657"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264663657" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264663657">(Dec 13 2021 at 04:53)</a>:</h4>
<p>Very awesome!</p>



<a name="264734607"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264734607" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264734607">(Dec 13 2021 at 16:48)</a>:</h4>
<p>Should this work?</p>
<div class="codehilite"><pre><span></span><code>[1, 2, 3]
      |&gt; List.map \x -&gt; x * 2
</code></pre></div>



<a name="264734717"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264734717" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264734717">(Dec 13 2021 at 16:49)</a>:</h4>
<p>I'm getting an <code>internal error: entered unreachable code</code> panic about it, so I can't tell if I'm making a syntax mistake</p>



<a name="264735236"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264735236" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264735236">(Dec 13 2021 at 16:52)</a>:</h4>
<p>I think the anonymous function needs brackets.</p>



<a name="264735312"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264735312" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264735312">(Dec 13 2021 at 16:53)</a>:</h4>
<p>That works! Thank you :D</p>



<a name="264735328"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264735328" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264735328">(Dec 13 2021 at 16:53)</a>:</h4>
<p>Because function arguments are also separated by spaces.</p>



<a name="264735335"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264735335" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264735335">(Dec 13 2021 at 16:53)</a>:</h4>
<p>You're welcome :)</p>



<a name="264736689"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264736689" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264736689">(Dec 13 2021 at 17:02)</a>:</h4>
<p>So now that that panic is gone, I have a Roc fluency problem: How can I improve this function to support parsing negative integers?</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="nf">parseIntegers</span> <span class="kt">:</span> <span class="kt">List</span> <span class="kt">Str</span> <span class="ow">-&gt;</span> <span class="kt">List</span> <span class="kt">I64</span>
<span class="nf">parseIntegers</span> <span class="ow">=</span> <span class="nf">\</span><span class="n">integerStrings</span> <span class="ow">-&gt;</span>
    <span class="n">integerStrings</span>
        <span class="o">|&gt;</span> <span class="kt">List</span><span class="o">.</span><span class="n">map</span> <span class="p">(</span><span class="nf">\</span><span class="n">s</span> <span class="ow">-&gt;</span> <span class="kt">Str</span><span class="o">.</span><span class="n">toI64</span> <span class="n">s</span><span class="p">)</span>
        <span class="o">|&gt;</span> <span class="kt">List</span><span class="o">.</span><span class="n">map</span> <span class="nf">\</span><span class="n">x</span> <span class="ow">-&gt;</span>
            <span class="n">when</span> <span class="n">x</span> <span class="n">is</span>
                <span class="kt">Ok</span> <span class="n">i</span> <span class="ow">-&gt;</span> <span class="n">i</span>
                <span class="kt">Err</span> <span class="kr">_</span> <span class="ow">-&gt;</span> <span class="o">-</span><span class="mi">1</span>
        <span class="o">|&gt;</span> <span class="kt">List</span><span class="o">.</span><span class="n">keepIf</span> <span class="p">(</span><span class="nf">\</span><span class="n">i</span> <span class="ow">-&gt;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>



<a name="264736889"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264736889" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264736889">(Dec 13 2021 at 17:03)</a>:</h4>
<p>I'm using the <code>-1</code> hack to prevent the output type having <code>Result</code>s in it, but there must be a better way.</p>



<a name="264737203"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264737203" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264737203">(Dec 13 2021 at 17:05)</a>:</h4>
<p>Maybe the output type having <code>Result</code>s in it is actually best? Maybe I need to get used to <code>Err</code>s bubbling up from every subroutine...</p>



<a name="264737394"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264737394" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264737394">(Dec 13 2021 at 17:06)</a>:</h4>
<p>However, in this case I simply want to throw away strings that aren't valid integers. Surely that should be possible:<br>
<code>parseIntegers ([ "no", "way", "-123", "456", "789jk" ]) == [ -123, 456 ]</code></p>



<a name="264738670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264738670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264738670">(Dec 13 2021 at 17:14)</a>:</h4>
<p>Oh I found something useful, List supports <code>keepOks</code>.</p>



<a name="264738767"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264738767" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264738767">(Dec 13 2021 at 17:15)</a>:</h4>
<p><del>but it does not appear to be implemented yet.</del></p>



<a name="264739100"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264739100" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264739100">(Dec 13 2021 at 17:17)</a>:</h4>
<p>I think this should work:</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="nf">parseIntegers</span> <span class="kt">:</span> <span class="kt">List</span> <span class="kt">Str</span> <span class="ow">-&gt;</span> <span class="kt">List</span> <span class="kt">I64</span>
<span class="nf">parseIntegers</span> <span class="ow">=</span> <span class="nf">\</span><span class="n">integerStrings</span> <span class="ow">-&gt;</span>
    <span class="n">integerStrings</span>
        <span class="o">|&gt;</span> <span class="kt">List</span><span class="o">.</span><span class="n">map</span> <span class="p">(</span><span class="nf">\</span><span class="n">s</span> <span class="ow">-&gt;</span> <span class="kt">Str</span><span class="o">.</span><span class="n">toI64</span> <span class="n">s</span><span class="p">)</span>
        <span class="o">|&gt;</span> <span class="kt">List</span><span class="o">.</span><span class="n">keepIf</span> <span class="nf">\</span><span class="n">x</span> <span class="ow">-&gt;</span>
            <span class="n">when</span> <span class="n">x</span> <span class="n">is</span>
                <span class="kt">Ok</span> <span class="kr">_</span> <span class="ow">-&gt;</span> <span class="kt">True</span>
                <span class="kt">Err</span> <span class="kr">_</span> <span class="ow">-&gt;</span> <span class="kt">False</span>
</code></pre></div>



<a name="264740369"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264740369" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264740369">(Dec 13 2021 at 17:26)</a>:</h4>
<p>Better version:</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="nf">parseIntegers</span> <span class="kt">:</span> <span class="kt">List</span> <span class="kt">Str</span> <span class="ow">-&gt;</span> <span class="kt">List</span> <span class="kt">I64</span>
<span class="nf">parseIntegers</span> <span class="ow">=</span> <span class="nf">\</span><span class="n">integerStrings</span> <span class="ow">-&gt;</span>
    <span class="n">integerStrings</span>
        <span class="o">|&gt;</span> <span class="kt">List</span><span class="o">.</span><span class="n">keepOks</span> <span class="p">(</span><span class="nf">\</span><span class="n">s</span> <span class="ow">-&gt;</span> <span class="kt">Str</span><span class="o">.</span><span class="n">toI64</span> <span class="n">s</span><span class="p">)</span>
</code></pre></div>



<a name="264740433"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264740433" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias Devlamynck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264740433">(Dec 13 2021 at 17:26)</a>:</h4>
<p>Interesting, I would expect this <code>[1, 2, 3] |&gt; List.map \x -&gt; x * 2</code> to work. Is it a bug or is it intended?</p>



<a name="264740752"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264740752" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264740752">(Dec 13 2021 at 17:28)</a>:</h4>
<p>Uhu <code>[1, 2, 3] |&gt; List.map \x -&gt; x * 2</code> works in the repl.</p>



<a name="264748999"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264748999" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264748999">(Dec 13 2021 at 18:21)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> I get</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="gp">[nix-shell:~/code/advent-of-code-2021]$ </span>./roc/target/release/roc check solutions/day-1-sonar-sweep/solution_1a.roc

<span class="go">── TYPE MISMATCH ───────────────────────────────────────────────────────────────</span>

<span class="go">Something is off with the body of the parseIntegers definition:</span>

<span class="go"> 8│   parseIntegers : List Str -&gt; List I64</span>
<span class="go"> 9│   parseIntegers = \integerStrings -&gt;</span>
<span class="go">10│&gt;      integerStrings</span>
<span class="go">11│&gt;          |&gt; List.map (\s -&gt; Str.toI64 s)</span>
<span class="go">12│&gt;          |&gt; List.keepIf \x -&gt;</span>
<span class="go">13│&gt;              when x is</span>
<span class="go">14│&gt;                  Ok _ -&gt; True</span>
<span class="go">15│&gt;                  Err _ -&gt; False</span>

<span class="go">This keepIf call produces:</span>

<span class="go">    List (Result I64 [ InvalidNumStr ]b)</span>

<span class="go">But the type annotation on parseIntegers says it should be:</span>

<span class="go">    List I64</span>

<span class="go">────────────────────────────────────────────────────────────────────────────────</span>


<span class="gp">[nix-shell:~/code/advent-of-code-2021]$</span>
</code></pre></div>
<p>:/</p>



<a name="264749357"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264749357" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264749357">(Dec 13 2021 at 18:24)</a>:</h4>
<p>Oh right, the results are all Ok but they are not unwrapped. The shorter alternative I posted does work right?</p>



<a name="264750482"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264750482" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264750482">(Dec 13 2021 at 18:33)</a>:</h4>
<p>sidenote: <code>Result.isOk</code> and <code>Result.isErr</code> are implemented but are not in the builtins/docs. I'll add them now.</p>



<a name="264750841"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264750841" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264750841">(Dec 13 2021 at 18:36)</a>:</h4>
<p>Oh, whoa, I didn't expect that to work because I thought <code>List.keepOks</code> wasn't implemented yet (also missing from builtins/docs). Your shorter alternative works like a charm!</p>



<a name="264750935"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264750935" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264750935">(Dec 13 2021 at 18:36)</a>:</h4>
<p><code>List.keepOks</code> is going to be a huge help for AoC, since inputs are highly controlled</p>



<a name="264751209"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264751209" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264751209">(Dec 13 2021 at 18:38)</a>:</h4>
<p>Actually, we can make it even cleaner by making it slightly point-free-er: <code>parseIntegers = \integerStrings -&gt; integerStrings |&gt; List.keepOks Str.toI64</code></p>



<a name="264751329"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264751329" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264751329">(Dec 13 2021 at 18:39)</a>:</h4>
<p>I wonder if there's a way to make it totally point-free by eliminating the need for <code>integerStrings</code>...</p>



<a name="264758527"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264758527" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264758527">(Dec 13 2021 at 19:36)</a>:</h4>
<p>point-free requires currying usually</p>



<a name="264758645"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264758645" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264758645">(Dec 13 2021 at 19:37)</a>:</h4>
<p>roc doesn't do that. point-free is cute but honestly it can lead to some confusing code especially for people not familiar with ML style languages</p>



<a name="264765430"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264765430" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264765430">(Dec 13 2021 at 20:27)</a>:</h4>
<p><span class="user-mention" data-user-id="462053">@JanCVanB</span> regarding the "entered unreachable code" panic you saw - any time you see that error message, it's definitely a compiler bug! It means the compiler went down a code path that we thought was unreachable.</p>
<p>Would you mind reporting that one as an issue?</p>



<a name="264766205"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264766205" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264766205">(Dec 13 2021 at 20:34)</a>:</h4>
<p>and given the location it's probably some error in llvm codegen, which is particularly interesting</p>



<a name="264769752"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264769752" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264769752">(Dec 13 2021 at 21:05)</a>:</h4>
<p>It's really cool to see this much roc code being used for stuff :D</p>



<a name="264783554"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264783554" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264783554">(Dec 13 2021 at 23:03)</a>:</h4>
<p>I'm glad y'all aren't tired of me spamming my beginner questions for my beginner use case :)</p>



<a name="264791569"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264791569" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264791569">(Dec 14 2021 at 00:39)</a>:</h4>
<p>oh it's amazing! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="264791575"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264791575" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264791575">(Dec 14 2021 at 00:39)</a>:</h4>
<p>the more the better!</p>



<a name="264794957"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264794957" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264794957">(Dec 14 2021 at 01:24)</a>:</h4>
<p><span class="user-mention" data-user-id="462053">@JanCVanB</span> not at all, in a way you’ve used more roc than all of us, we’re the beginners</p>



<a name="264795358"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264795358" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264795358">(Dec 14 2021 at 01:30)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> Reported: <a href="https://github.com/rtfeldman/roc/issues/2205">https://github.com/rtfeldman/roc/issues/2205</a></p>



<a name="264945668"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264945668" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Fischer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264945668">(Dec 14 2021 at 23:46)</a>:</h4>
<p>Because of a <a href="https://github.com/rtfeldman/roc/issues/2157">memory issue with large lists</a> I tried to use my own type for linked lists and ran into three separate problems.</p>
<p>The first problem can be reproduced by replacing the hello-world example with the following program.</p>
<div class="codehilite"><pre><span></span><code>LinkedList elem : [Empty, Prepend (LinkedList elem) elem]

prepend : LinkedList elem, elem -&gt; LinkedList elem
prepend = Prepend

single : elem -&gt; LinkedList elem
single = \elem -&gt; prepend Empty elem

main =
    nested = single (single 42)
    &quot;Hello, World!\n&quot;
</code></pre></div>
<p>This program produces the following panic:</p>
<div class="codehilite"><pre><span></span><code>thread &#39;main&#39; panicked at &#39;internal error: entered unreachable code: symbol/layout `#UserApp.1` ProcLayout { arguments: [Union(NullableUnwrapped { nullable_id: false, other_fields: [RecursivePointer, Builtin(Int(I64))] }), Builtin(Int(I64))], result: Union(NullableUnwrapped { nullable_id: false, other_fields: [RecursivePointer, Builtin(Int(I64))] }) } combo must be in DeclarationToIndex&#39;, compiler/mono/src/borrow.rs:227:9
</code></pre></div>
<p>The program runs as intended when inlining <code>prepend</code> or <code>single</code> or when changing the definition of <code>prepend</code>as shown below.</p>
<p>The second issue can be reproduced by adding/changing the following definitions:</p>
<div class="codehilite"><pre><span></span><code>empty : LinkedList *
empty = Empty

prepend : LinkedList elem, elem -&gt; LinkedList elem
prepend = \elems, elem -&gt; Prepend elems elem

wrap : LinkedList elem -&gt; LinkedList (LinkedList elem)
wrap = \elems -&gt;
    when elems is
        Empty -&gt; empty
        Prepend tail head -&gt; tail |&gt; wrap |&gt; prepend (single head)

main =
    nested = wrap (single 42)
    &quot;Hello, World!\n&quot;
</code></pre></div>
<p>Now executing the program results in the following error:</p>
<div class="codehilite"><pre><span></span><code>Application crashed with message

    Hit an unresolved type variable 103 when creating a layout for `#UserApp.empty` (var 102)

Shutting down
</code></pre></div>
<p>The error goes away when replacing <code>empty</code> with <code>Empty</code> in the definition of <code>wrap</code>.</p>
<p>The third issue is a stack overflow when compiling (or running <code>roc check</code>) on the following definition:</p>
<div class="codehilite"><pre><span></span><code>fromList : List elem -&gt; LinkedList elem
fromList = \elems -&gt; List.walkBackwards elems Empty Prepend
</code></pre></div>
<p>Compilation works fine when replacing <code>Empty</code> with <code>empty</code> in the definition of <code>fromList</code>.</p>
<p>By using the described work-arounds, I was able to change <a href="https://gist.github.com/sebfisch/b7d0e60ef9381376f0f3061d82bd6409">my program for AoC Day 1</a> to use linked lists instead of built-in lists to solve the problem for the large input!</p>
<p>Should I create issues for the described problems or are they expected / already known?</p>



<a name="264959695"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264959695" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264959695">(Dec 15 2021 at 03:06)</a>:</h4>
<p>issues would be most appreciated! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="264981001"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264981001" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Fischer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264981001">(Dec 15 2021 at 09:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/231634-beginners/topic/Advent.20of.20Code.202021/near/264959695">said</a>:</p>
<blockquote>
<p>issues would be most appreciated! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>
</blockquote>
<p>Just filed issues <a href="https://github.com/rtfeldman/roc/issues/2215">2215</a>, <a href="https://github.com/rtfeldman/roc/issues/2216">2216</a>, and <a href="https://github.com/rtfeldman/roc/issues/2217">2217</a></p>



<a name="264996407"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/264996407" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#264996407">(Dec 15 2021 at 11:32)</a>:</h4>
<p>awesome, thank you so much!</p>



<a name="265650811"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265650811" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265650811">(Dec 21 2021 at 06:05)</a>:</h4>
<p>Roc is feeling reeeeeeal smooth! <a href="https://github.com/JanCVanB/advent-of-code-2021/blob/main/solutions/day-2-dive/solution_2_part_2.roc">https://github.com/JanCVanB/advent-of-code-2021/blob/main/solutions/day-2-dive/solution_2_part_2.roc</a><br>
(Spoiler alert for AoC participants, this is a solution for Day 2 Part 2)</p>



<a name="265650962"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265650962" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265650962">(Dec 21 2021 at 06:08)</a>:</h4>
<p>Pipe chains are super readable, the <code>Result</code> builtins are intuitive... and though I've hit a lot of compiler bugs, there are always acceptable workarounds.</p>



<a name="265652437"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265652437" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265652437">(Dec 21 2021 at 06:39)</a>:</h4>
<p>:) yay</p>



<a name="265700580"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265700580" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265700580">(Dec 21 2021 at 15:53)</a>:</h4>
<p>Today's multiverse problem (part 2) seems like it could cause some stack overflows, though I imagine there's some optimization(s) that could help somehow. However, even with a quick recursion-ending condition (maxScore=5, instead of 21), I'm getting a new kind of compiler error: <code>Stored value type does not match pointer operand type! ... Function "..." failed LLVM verification in NON-OPTIMIZED build. ... thread 'main' panicked at '😱 LLVM errors when defining function ...</code>. I'll create a GH issue.</p>



<a name="265701699"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265701699" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265701699">(Dec 21 2021 at 16:01)</a>:</h4>
<p>Whoa, it's due to <code>True</code> / <code>False</code> literals...</p>



<a name="265701823"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265701823" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265701823">(Dec 21 2021 at 16:02)</a>:</h4>
<p>something to watch out for is that <code>True</code> itself has type <code>[ True ]*</code>, not <code>Bool</code></p>



<a name="265701844"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265701844" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265701844">(Dec 21 2021 at 16:02)</a>:</h4>
<p>you may need some type annotations sometimes to make it a boolean</p>



<a name="265702357"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265702357" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265702357">(Dec 21 2021 at 16:06)</a>:</h4>
<p>Oh, that's interesting!</p>



<a name="265702368"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265702368" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265702368">(Dec 21 2021 at 16:06)</a>:</h4>
<p>I posted an issue for it: <a href="https://github.com/rtfeldman/roc/issues/2254">https://github.com/rtfeldman/roc/issues/2254</a></p>



<a name="265702462"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265702462" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265702462">(Dec 21 2021 at 16:07)</a>:</h4>
<p>Essentially, something works with <code>{ oldRecord &amp; thing: True, a: b, x: y }</code> but not with <code>{ oldRecord &amp; thing: False, a: b, x: y }</code></p>



<a name="265702689"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265702689" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265702689">(Dec 21 2021 at 16:08)</a>:</h4>
<p>right, I think you can fix it quickly with a type annotation to coerce the value to be a bool</p>



<a name="265702704"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265702704" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265702704">(Dec 21 2021 at 16:08)</a>:</h4>
<p>Was just about to ask that, thanks</p>



<a name="265703682"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265703682" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265703682">(Dec 21 2021 at 16:17)</a>:</h4>
<p><span class="user-mention" data-user-id="281543">@Folkert de Vries</span> The problem starts with state initialization. This code:</p>
<div class="codehilite"><pre><span></span><code>InitialSetup : { player1Position: Nat, player2Position: Nat }
Multiverse : { player1WinCount: Nat, player2WinCount: Nat, universes: List Universe }
Universe : { isPlayer1sTurn: Bool, player1Position: Nat, player1Score: Nat, player2Position: Nat, player2Score: Nat }
initializeMultiverse : InitialSetup -&gt; Multiverse
initializeMultiverse = \setup -&gt;
    universe : Universe
    universe = { isPlayer1sTurn: True, player1Position: setup.player1Position, player1Score: 0, player2Position: setup.player2Position, player2Score: 0 }
    { player1WinCount: 0, player2WinCount: 0, universes: [universe] }
</code></pre></div>
<p>gets this <code>roc check</code> error:</p>
<div class="codehilite"><pre><span></span><code>The body is a record of type:

    { player1WinCount : Num (Integer Natural),
    player2WinCount : Num (Integer Natural), universes : List {
    isPlayer1sTurn : Bool, player1Position : Nat, player1Score : Nat,
    player2Position : Nat, player2Score : Nat } }

But the type annotation on initializeMultiverse says it should be:

    { player1WinCount : Nat, player2WinCount : Nat,
    universes : List Universe }
</code></pre></div>



<a name="265703763"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265703763" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265703763">(Dec 21 2021 at 16:18)</a>:</h4>
<p>Do records not type well?</p>



<a name="265703823"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265703823" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265703823">(Dec 21 2021 at 16:18)</a>:</h4>
<p>I meant </p>
<div class="codehilite"><pre><span></span><code>isPlayer1sTurn:  Bool
isPlayer1sTurn = True
</code></pre></div>



<a name="265705003"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265705003" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265705003">(Dec 21 2021 at 16:28)</a>:</h4>
<p>It looks to me that both of the supposedly-mismatched types above have <code>Bool</code> in them, is that not sufficient?</p>



<a name="265705075"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265705075" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265705075">(Dec 21 2021 at 16:29)</a>:</h4>
<p>Adding those two lines doesn't help:</p>
<div class="codehilite"><pre><span></span><code>InitialSetup : { player1Position: Nat, player2Position: Nat }
Multiverse : { player1WinCount: Nat, player2WinCount: Nat, universes: List Universe }
Universe : { isPlayer1sTurn: Bool, player1Position: Nat, player1Score: Nat, player2Position: Nat, player2Score: Nat }
initializeMultiverse : InitialSetup -&gt; Multiverse
initializeMultiverse = \setup -&gt;
    isPlayer1sTurn : Bool
    isPlayer1sTurn = True
    universe : Universe
    universe = { isPlayer1sTurn: isPlayer1sTurn, player1Position: setup.player1Position, player1Score: 0, player2Position: setup.player2Position, player2Score: 0 }
    { player1WinCount: 0, player2WinCount: 0, universes: [universe] }
</code></pre></div>
<p>(same check error)</p>



<a name="265705874"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265705874" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265705874">(Dec 21 2021 at 16:35)</a>:</h4>
<p>oh, I see what's happening</p>



<a name="265705934"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265705934" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265705934">(Dec 21 2021 at 16:36)</a>:</h4>
<p>somehow <code>Universe</code> is not recognized as an alias</p>



<a name="265705975"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265705975" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265705975">(Dec 21 2021 at 16:36)</a>:</h4>
<p>ah, this is the alias ordering bug</p>



<a name="265705982"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265705982" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265705982">(Dec 21 2021 at 16:36)</a>:</h4>
<p>try putting <code>Universe</code> at the top</p>



<a name="265706058"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265706058" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265706058">(Dec 21 2021 at 16:37)</a>:</h4>
<p>due to a bug, aliases must be defined in their usage order (so no use before definition)</p>



<a name="265706304"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265706304" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265706304">(Dec 21 2021 at 16:39)</a>:</h4>
<p>Wowwwwww you're right! Flipping the order of the <code>Multiverse</code> and <code>Universe</code> definitions fixes it!</p>



<a name="265712681"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265712681" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265712681">(Dec 21 2021 at 17:32)</a>:</h4>
<p>Now I just have to optimize it so that it won't take... (checks calculator)... a week to run.</p>



<a name="265720936"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265720936" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265720936">(Dec 21 2021 at 18:48)</a>:</h4>
<p>Glad you're posing this stuff, Jan, it's really interesting, keep up the good work!</p>



<a name="265721334"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265721334" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265721334">(Dec 21 2021 at 18:51)</a>:</h4>
<p>Checking ~ 1 quintillion board game states sure takes a while... <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="265721646"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/265721646" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#265721646">(Dec 21 2021 at 18:54)</a>:</h4>
<p>That's a handful... Maybe enough to not compete with bad code generation/recursion issues</p>



<a name="266505589"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/266505589" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takeshi Sato <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#266505589">(Dec 31 2021 at 14:12)</a>:</h4>
<p>This is my output<br>
<a href="https://gist.github.com/satotake/0e5f4cb69924927cbce379212e102081">https://gist.github.com/satotake/0e5f4cb69924927cbce379212e102081</a><br>
not completed  (day1 - day14)<br>
I might add the others but I am starting feeling that they will be almost same in terms of  testing roc.<br>
Seeing <span class="user-mention" data-user-id="357305">@Lucas Rosa</span> 's private leaderboard,  <code>Arkham</code> is legendary.</p>



<a name="266505686"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/266505686" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#266505686">(Dec 31 2021 at 14:14)</a>:</h4>
<p>You might have written the most AoC Roc code of anyone, since I'm not sure that everyone in that leaderboard used Roc!</p>



<a name="266506862"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/266506862" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takeshi Sato <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#266506862">(Dec 31 2021 at 14:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="462053">JanCVanB</span> <a href="#narrow/stream/231634-beginners/topic/Advent.20of.20Code.202021/near/266505686">said</a>:</p>
<blockquote>
<p>since I'm not sure that everyone in that leaderboard used Roc!</p>
</blockquote>
<p>possible ... but really?. <br>
Anyway, the conversations in this channel motivated me to do so. thanks!</p>



<a name="266517134"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/266517134" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#266517134">(Dec 31 2021 at 18:20)</a>:</h4>
<p>I was using zig but then just quit after day 3 cause I was like why am I doing this</p>



<a name="266614647"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/266614647" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Takeshi Sato <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#266614647">(Jan 02 2022 at 13:37)</a>:</h4>
<p>zig's comptime is interesting <a href="https://expandingman.gitlab.io/tvu-compare/">https://expandingman.gitlab.io/tvu-compare/</a><br>
It might have been also good for me to try AoC in zig or rust to understand roc codebase</p>



<a name="284579460"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/284579460" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nicola Peduzzi <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#284579460">(Jun 01 2022 at 08:09)</a>:</h4>
<p>hah! from time to time I re-compile roc, fix any error that come up on the platform I stitched up and try my day 1 advent of code 2021 program. it finally worked <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>
<div class="codehilite"><pre><span></span><code>app &quot;day-01&quot;
    packages { pf: &quot;cli-platform&quot; }
    imports [ pf.Task.{ Task, await }, pf.Stdout, pf.File ]
    provides [ main ] to pf

main =
    handle &lt;- File.withOpen &quot;day-01-input.txt&quot;
    stringLines &lt;- await (File.lines handle)

    lines = stringLines |&gt; List.map \n -&gt; (Str.toNat n |&gt; Result.withDefault 0)

    increases = lines
        |&gt; List.walk { count: 0, prev: None } \res, m -&gt;
            when res.prev is
                Some p -&gt;
                    count = res.count + (if p &lt; m then 1 else 0)
                    { count, prev: Some m }
                None -&gt; { count: res.count, prev: Some m }

    r = Num.toStr increases.count

    Stdout.line &quot;res: \(r)&quot;
</code></pre></div>



<a name="284582596"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Advent%20of%20Code%202021/near/284582596" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Advent.20of.20Code.202021.html#284582596">(Jun 01 2022 at 08:44)</a>:</h4>
<p>Nice :)</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>