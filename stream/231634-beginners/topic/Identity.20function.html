<html>
<head><meta charset="utf-8"><title>Identity function · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html">Identity function</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="303272762"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303272762" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303272762">(Oct 10 2022 at 14:41)</a>:</h4>
<p>is there a builtin identity function somewhere or should we just write <code>\x -&gt; x</code>?</p>



<a name="303273140"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303273140" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303273140">(Oct 10 2022 at 14:43)</a>:</h4>
<p>i'm often using this. is this the best way to express 'unwrap if ok'? </p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">...</span><span class="w"></span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="k">try</span><span class="w"> </span><span class="err">\</span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"></span>
</code></pre></div>



<a name="303276162"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303276162" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303276162">(Oct 10 2022 at 15:00)</a>:</h4>
<p>Do you have a bigger example?<br>
<code>Result.try</code> has this definition :</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">try</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Result</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">err</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nv">err</span><span class="p">)</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Result</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nv">err</span><span class="w"></span>
</code></pre></div>
<p>It doesn't look to fit with your example as the callback should return a <code>Result</code></p>



<a name="303276798"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303276798" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303276798">(Oct 10 2022 at 15:03)</a>:</h4>
<p>oh you're right. i was forgetting a Result. i need to use type annotations more. would have helped here.</p>



<a name="303277193"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303277193" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303277193">(Oct 10 2022 at 15:05)</a>:</h4>
<p>so maybe i only thought i needed an identity function. is it even useful in roc? seems necessary in other functional langs.</p>



<a name="303284745"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303284745" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303284745">(Oct 10 2022 at 15:51)</a>:</h4>
<p>my general view is that demand for an identity function is usually demand for a convenience operation in an API <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="303284943"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303284943" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303284943">(Oct 10 2022 at 15:52)</a>:</h4>
<p>e.g. in other languages I've often found myself using <code>filterMap identity</code> - but if there were a function (like <code>keepOks</code> in Roc) which directly did what I wanted, I'd use that instead!</p>



<a name="303287723"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303287723" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303287723">(Oct 10 2022 at 16:08)</a>:</h4>
<p>seems good to me. was just curious. turns out i didn't really need it. will re-evaluate later on maybe after doing more of the advent problems (via zig platform btw )  <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="303288068"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303288068" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303288068">(Oct 10 2022 at 16:10)</a>:</h4>
<p>now that we have an at least partially working File.readBytes impl, i won't need to use multiline strings either</p>



<a name="303300355"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303300355" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303300355">(Oct 10 2022 at 17:30)</a>:</h4>
<p>turns out i did need to use <code>Result.try \x -&gt; x</code> here is the usage for more context. this is from my aoc 2021 day 2. without the last line it errors. </p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">parseLine</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Str</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="w"> </span><span class="nc">Vec2</span><span class="w"> </span><span class="p">[</span><span class="nc">InvalidNumStr</span><span class="p">]</span><span class="w"></span>
<span class="n">parseLine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">\</span><span class="n">line</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">parsers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="err">\</span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">parseDir</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="s2">"up "</span><span class="w"> </span><span class="p">{</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="err">\</span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">parseDir</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="s2">"down "</span><span class="w"> </span><span class="p">{</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="err">\</span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">parseDir</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="s2">"forward "</span><span class="w"> </span><span class="p">{</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>

<span class="w">    </span><span class="nc">List</span><span class="o">.</span><span class="n">walkUntil</span><span class="w"> </span><span class="n">parsers</span><span class="w"> </span><span class="p">(</span><span class="nc">Err</span><span class="w"> </span><span class="nc">InvalidNumStr</span><span class="p">)</span><span class="w"> </span><span class="err">\</span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">        </span><span class="ow">when</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">is</span><span class="w"></span>
<span class="w">            </span><span class="nc">Ok</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Break</span><span class="w"> </span><span class="p">(</span><span class="nc">Ok</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="nc">Err</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Continue</span><span class="w"> </span><span class="n">state</span><span class="w"></span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="k">try</span><span class="w"> </span><span class="err">\</span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"></span>
</code></pre></div>



<a name="303301607"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303301607" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303301607">(Oct 10 2022 at 17:39)</a>:</h4>
<p>Yes, my bad, I re-thought about your unwrap after posting my answer and understood what you could have written. <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>



<a name="303301878"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303301878" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303301878">(Oct 10 2022 at 17:41)</a>:</h4>
<p>But, it looked a bit confusing to me to return a <code>Result (Result a e) e</code>. Here it looks like it's what returns your <code>parseDir</code>, or am I missing something?</p>



<a name="303302219"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303302219" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303302219">(Oct 10 2022 at 17:44)</a>:</h4>
<p>maybe <code>parseDir</code> could be simplified to only return <code>Result a e</code></p>



<a name="303302378"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303302378" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303302378">(Oct 10 2022 at 17:45)</a>:</h4>
<p>Then you wouldn't have to unwrap if <code>Ok</code></p>



<a name="303302820"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303302820" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303302820">(Oct 10 2022 at 17:48)</a>:</h4>
<p>If you want to keep your <code>parseDir</code> signature, you could also have written:</p>
<div class="codehilite"><pre><span></span><code>when f line is
            Ok v -&gt; Break v
            Err _ -&gt; Continue state
</code></pre></div>
<p>Although it would still be confusing to keep an unknown <code>Result</code> after having unwrapped it with <code>Ok v</code></p>



<a name="303303097"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303303097" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303303097">(Oct 10 2022 at 17:50)</a>:</h4>
<p>yes i agree about the Result Result. that function needs some work. but its an improvement over what i started with. originally i was always doing all 3 <code>parseDir</code> calls and them <code>List.keepOks</code> followed by <code>List.get 0</code> was very sad. so atleast this is an improvement.</p>



<a name="303303221"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303303221" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303303221">(Oct 10 2022 at 17:52)</a>:</h4>
<p>i think the <code>Break Ok v</code> is needed because the state is a Result.</p>



<a name="303303352"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303303352" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303303352">(Oct 10 2022 at 17:52)</a>:</h4>
<p>initially <code>Err InvalidNumStr</code></p>



<a name="303304100"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303304100" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303304100">(Oct 10 2022 at 17:58)</a>:</h4>
<p><span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> <code>v</code> should also be a <code>Result</code> (<code>[Ok a, Err *]</code>)  so compatible with <code>Err InvalidNumStr</code></p>



<a name="303304442"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303304442" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303304442">(Oct 10 2022 at 18:01)</a>:</h4>
<p>yes i agree. but when i remove it i get this error:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">This 2nd argument to try has an unexpected type:</span>

<span class="go">24│      |&gt; Result.try \x -&gt; x</span>
<span class="go">                       ^^^^^^^</span>

<span class="go">The argument is an anonymous function of type:</span>

<span class="go">    { x : Int Signed64, y : Int Signed64 } -&gt; { x : Int Signed64,</span>
<span class="go">    y : Int Signed64 }</span>

<span class="go">But try needs its 2nd argument to be:</span>

<span class="go">    { x : Int Signed64, y : Int Signed64 } -&gt;</span>
<span class="go">    Result b [InvalidNumStr]*</span>
</code></pre></div>



<a name="303304477"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303304477" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303304477">(Oct 10 2022 at 18:02)</a>:</h4>
<p>this was with Oct 8th build</p>



<a name="303304579"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303304579" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303304579">(Oct 10 2022 at 18:02)</a>:</h4>
<p>it took me a few minutes to respond cause i had just installed Oct 10th build to check if my json parser lazy call was fixed</p>



<a name="303304609"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303304609" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303304609">(Oct 10 2022 at 18:03)</a>:</h4>
<p>but that made my day2 code err with different errors</p>



<a name="303305101"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303305101" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303305101">(Oct 10 2022 at 18:06)</a>:</h4>
<p>Yes, my point was to be able to remove the Result.try <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="303476532"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303476532" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303476532">(Oct 11 2022 at 16:38)</a>:</h4>
<p>i did end up removing the <code>Result.try</code> btw. here's how they ended up. </p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">parseLine</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Str</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="w"> </span><span class="nc">Vec2</span><span class="w"> </span><span class="p">[</span><span class="nc">InvalidNumStr</span><span class="p">]</span><span class="w"></span>
<span class="n">parseLine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">\</span><span class="n">line</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">parsers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="err">\</span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">parseDir</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="s2">"up "</span><span class="w"> </span><span class="p">{</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="err">\</span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">parseDir</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="s2">"down "</span><span class="w"> </span><span class="p">{</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="err">\</span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">parseDir</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="s2">"forward "</span><span class="w"> </span><span class="p">{</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>

<span class="w">    </span><span class="nc">List</span><span class="o">.</span><span class="n">walkUntil</span><span class="w"> </span><span class="n">parsers</span><span class="w"> </span><span class="p">(</span><span class="nc">Err</span><span class="w"> </span><span class="nc">InvalidNumStr</span><span class="p">)</span><span class="w"> </span><span class="err">\</span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">        </span><span class="ow">when</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">is</span><span class="w"></span>
<span class="w">            </span><span class="nc">Ok</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Break</span><span class="w"> </span><span class="p">(</span><span class="nc">Ok</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="nc">Err</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Continue</span><span class="w"> </span><span class="n">state</span><span class="w"></span>

<span class="n">parseDir</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Str</span><span class="p">,</span><span class="w"> </span><span class="nc">Str</span><span class="p">,</span><span class="w"> </span><span class="nc">Vec2</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="w"> </span><span class="nc">Vec2</span><span class="w"> </span><span class="p">[</span><span class="nc">NotFound</span><span class="p">,</span><span class="w"> </span><span class="nc">InvalidNumStr</span><span class="p">]</span><span class="w"></span>
<span class="n">parseDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">\</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">startsWith</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nc">Str</span><span class="o">.</span><span class="n">replaceFirst</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="n">startsWith</span><span class="w"> </span><span class="s2">""</span><span class="w"></span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="k">try</span><span class="w"> </span><span class="err">\</span><span class="n">r</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Str</span><span class="o">.</span><span class="n">toI64</span><span class="w"> </span><span class="n">r</span><span class="w"></span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="err">\</span><span class="n">n</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">vecMul</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="p">{</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="ss">y</span><span class="p">:</span><span class="w"> </span><span class="n">n</span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="303476662"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303476662" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303476662">(Oct 11 2022 at 16:39)</a>:</h4>
<p>not too bad. i looked at your day 2 and like your solution better though which uses pattern matching</p>



<a name="303477266"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303477266" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303477266">(Oct 11 2022 at 16:42)</a>:</h4>
<p>i wonder do you have any suggestions for cleaning this part up? would like to remove the last line somehow.</p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">solve</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Str</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">pos1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Vec2</span><span class="p">,</span><span class="w"> </span><span class="n">pos2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Vec2</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">solve</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">\</span><span class="n">input</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">vecs</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">        </span><span class="nc">Str</span><span class="o">.</span><span class="n">trim</span><span class="w"> </span><span class="n">input</span><span class="w"></span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Str</span><span class="o">.</span><span class="n">split</span><span class="w"> </span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="w"></span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="err">\</span><span class="n">line</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">parseLine</span><span class="w"> </span><span class="n">line</span><span class="w"></span>
<span class="w">            </span><span class="c1"># will overflow if reached - how to panic here or stop / return error?</span><span class="w"></span>
<span class="w">            </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="n">withDefault</span><span class="w"> </span><span class="p">{</span><span class="n">x</span><span class="p">:</span><span class="mi">999999999999999</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">:</span><span class="mi">999999999999999</span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="303477409"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303477409" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303477409">(Oct 11 2022 at 16:43)</a>:</h4>
<p><code>List.mapTry</code> may help</p>



<a name="303477539"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303477539" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303477539">(Oct 11 2022 at 16:43)</a>:</h4>
<p>Instead of getting a list of results will give you a result of a list.</p>



<a name="303477987"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303477987" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303477987">(Oct 11 2022 at 16:46)</a>:</h4>
<p>oh neat. will give it a 'try' <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="303483332"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Identity%20function/near/303483332" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Identity.20function.html#303483332">(Oct 11 2022 at 17:15)</a>:</h4>
<p><code>mapTry</code> much better. now i can handle the error in main.</p>
<div class="codehilite" data-code-language="Elixir"><pre><span></span><code><span class="n">solve</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Str</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">pos1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Vec2</span><span class="p">,</span><span class="w"> </span><span class="n">pos2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nc">Vec2</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">[</span><span class="nc">InvalidNumStr</span><span class="p">]</span><span class="w"></span>
<span class="n">solve</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">\</span><span class="n">input</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">        </span><span class="nc">Str</span><span class="o">.</span><span class="n">trim</span><span class="w"> </span><span class="n">input</span><span class="w"></span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Str</span><span class="o">.</span><span class="n">split</span><span class="w"> </span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="w"></span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">mapTry</span><span class="w"> </span><span class="err">\</span><span class="n">line</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">parseLine</span><span class="w"> </span><span class="n">line</span><span class="w"></span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Result</span><span class="o">.</span><span class="n">map</span><span class="w"> </span><span class="err">\</span><span class="n">vecs</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">        </span><span class="n">...</span><span class="w"></span>
</code></pre></div>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>