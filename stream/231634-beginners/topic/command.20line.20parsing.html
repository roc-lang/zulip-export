<html>
<head><meta charset="utf-8"><title>command line parsing · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html">command line parsing</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="397529265"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/397529265" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#397529265">(Oct 19 2023 at 15:25)</a>:</h4>
<p>Hi folks. I'm trying to test out command line parsing from the basic-cli platform, but I'm getting a thread panic. My code and output are here -- <a href="https://gist.github.com/drewolson/bef70f973c04e22e4ffe9ec44b9af135">https://gist.github.com/drewolson/bef70f973c04e22e4ffe9ec44b9af135</a>. What am I doing wrong?</p>



<a name="397534671"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/397534671" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#397534671">(Oct 19 2023 at 15:56)</a>:</h4>
<p>I don't think its you, if I remember correctly the stuff in the <a href="https://www.roc-lang.org/packages/basic-cli/Arg">arg parser module</a> has some issues.</p>



<a name="397534928"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/397534928" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#397534928">(Oct 19 2023 at 15:58)</a>:</h4>
<p>Ahhh yeah <a href="https://github.com/roc-lang/basic-cli/issues/90">here is the issue</a>.</p>



<a name="397535710"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/397535710" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#397535710">(Oct 19 2023 at 16:02)</a>:</h4>
<p>Ah, bummer. Thanks!</p>



<a name="403258014"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403258014" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403258014">(Nov 20 2023 at 22:45)</a>:</h4>
<p>i'm curious if folks think this will be fixed before Advent of Code starts. with the new website release and advent of code just around the corner, i'm sure folks will be trying out roc, and command line arg parsing seems like it would be super useful!</p>



<a name="403258062"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403258062" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403258062">(Nov 20 2023 at 22:45)</a>:</h4>
<p>seems like the actual issue is <a href="https://github.com/roc-lang/roc/issues/5701">https://github.com/roc-lang/roc/issues/5701</a></p>



<a name="403258727"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403258727" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403258727">(Nov 20 2023 at 22:49)</a>:</h4>
<blockquote>
<p>if folks think this will be fixed before Advent of Code starts</p>
</blockquote>
<p>Probably not, sadly.</p>



<a name="403258818"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403258818" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elias Mulhall <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403258818">(Nov 20 2023 at 22:50)</a>:</h4>
<p>Ah I see, you're writing a script to fetch AoC puzzles. The website examples include an example of CLI parsing that gets around this issue, but is a bit noisier <a href="https://www.roc-lang.org/examples/CommandLineArgs/README.html">https://www.roc-lang.org/examples/CommandLineArgs/README.html</a></p>



<a name="403258929"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403258929" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403258929">(Nov 20 2023 at 22:51)</a>:</h4>
<p>It's not even a script to fetch the puzzles, rather just accepting args from the user as to the day of the puzzle and the part to run.</p>



<a name="403258950"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403258950" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403258950">(Nov 20 2023 at 22:51)</a>:</h4>
<p>so that all of my puzzles can be part of the same application. it's how i've done it for haskell and ocaml.</p>



<a name="403259069"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259069" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259069">(Nov 20 2023 at 22:52)</a>:</h4>
<p>i suppose i could just have a program per day</p>



<a name="403259084"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259084" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259084">(Nov 20 2023 at 22:52)</a>:</h4>
<p>or maybe this is my year of ocaml and next year is my year of roc :)</p>



<a name="403259106"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259106" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259106">(Nov 20 2023 at 22:52)</a>:</h4>
<p>Also, you can always directly work with <code>args &lt;- Arg.list |&gt; Task.await</code>. The bug is in the nested lambdas used for handling parsing. For AOC, naive parsing probably is enough with just directly using that list of strings.</p>



<a name="403259158"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259158" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259158">(Nov 20 2023 at 22:53)</a>:</h4>
<p><span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> fair point. does the nested lambdas issue also become a problem for parser combinator style parsing of the input?</p>



<a name="403259178"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259178" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259178">(Nov 20 2023 at 22:53)</a>:</h4>
<p>i feel like all i need to start aoc is some parser combinator library and some arg parsing library. oh, and sum types ;)</p>



<a name="403259183"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259183" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259183">(Nov 20 2023 at 22:53)</a>:</h4>
<p>In case it helps anyone, I wrote this poor man's version of the arg parser while I was updating roc-pg to the latest basic-cli the other day: <a href="https://github.com/agu-z/roc-pg/blob/72f5390db26527bc3b6067f77ea570f895ff3c0b/sql-cli/src/roc-sql.roc#L191-L278">https://github.com/agu-z/roc-pg/blob/72f5390db26527bc3b6067f77ea570f895ff3c0b/sql-cli/src/roc-sql.roc#L191-L278</a></p>



<a name="403259271"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259271" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259271">(Nov 20 2023 at 22:54)</a>:</h4>
<p>I think it can affect parser combinator style parsers.</p>



<a name="403259304"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259304" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259304">(Nov 20 2023 at 22:54)</a>:</h4>
<p><span aria-label="cry" class="emoji emoji-1f622" role="img" title="cry">:cry:</span> got it, so maybe next year for me. i'm super excited about the language</p>



<a name="403259327"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259327" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elias Mulhall <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259327">(Nov 20 2023 at 22:54)</a>:</h4>
<blockquote>
<p>or maybe this is my year of ocaml and next year is my year of roc :)</p>
</blockquote>
<p>fair, they are similar languages and I love OCaml</p>
<blockquote>
<p>does the nested lambdas also become a problem for parser combinator style parsing of the input?</p>
</blockquote>
<p>Last month I worked through some AoC puzzles in Roc and mostly used parser combinators for parsing. You can see my code here <a href="https://github.com/mulias/roctoberfest/tree/main/advent_2022">https://github.com/mulias/roctoberfest/tree/main/advent_2022</a></p>



<a name="403259350"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259350" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259350">(Nov 20 2023 at 22:55)</a>:</h4>
<p>thanks!</p>



<a name="403259705"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259705" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elias Mulhall <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259705">(Nov 20 2023 at 22:58)</a>:</h4>
<p>The one type system issue I ran into with parser combinators was a case where I needed a <code>lazy</code> parser to parse recursive data. <span class="user-mention" data-user-id="489294">@Agus Zubiaga</span> showed me a workaround, which is here <a href="https://github.com/mulias/roctoberfest/blob/main/advent_2022/day_07/main.roc#L158">https://github.com/mulias/roctoberfest/blob/main/advent_2022/day_07/main.roc#L158</a><br>
You need to use <code>buildPrimitiveParser</code> to "reset" something with the type system. Sorry I can't be more exact than that, it's definitely a hack to get around a bug.</p>



<a name="403259849"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403259849" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403259849">(Nov 20 2023 at 22:59)</a>:</h4>
<p>interesting. is <code>lazy</code> effectively a fixed point combinator?</p>



<a name="403260289"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403260289" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403260289">(Nov 20 2023 at 23:02)</a>:</h4>
<p>ah, i see it here, thanks. <a href="https://github.com/lukewilliamboswell/roc-parser/blob/46ab6e2a8c13f69601ad516520981331c6b7ce3b/package/Core.roc#L231-L234">https://github.com/lukewilliamboswell/roc-parser/blob/46ab6e2a8c13f69601ad516520981331c6b7ce3b/package/Core.roc#L231-L234</a></p>



<a name="403260549"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/command%20line%20parsing/near/403260549" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elias Mulhall <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/command.20line.20parsing.html#403260549">(Nov 20 2023 at 23:04)</a>:</h4>
<p>In general I wouldn't hesitate to use Roc for AoC <strong>if</strong> you're willing to ask for help around here. It's mostly smooth sailing, but every once in a while you run into a road block where it seems like you're doing the right thing and it's not working. Sometimes that's because you are doing the right thing and the compiler has a bug.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>