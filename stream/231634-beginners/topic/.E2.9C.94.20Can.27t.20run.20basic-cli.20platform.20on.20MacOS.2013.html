<html>
<head><meta charset="utf-8"><title>‚úî Can&#x27;t run basic-cli platform on MacOS 13 ¬∑ beginners ¬∑ Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html">‚úî Can&#x27;t run basic-cli platform on MacOS 13</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="376887142"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/376887142" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Domurad <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#376887142">(Jul 20 2023 at 08:27)</a>:</h4>
<p>Hi, I'm new here - just getting started with ROC &lt;3 </p>
<p>I can't get ROC running on my MacOS 13.4.1 :/<br>
I'm using "roc nightly pre-release, built from commit ecf728a on Tue Jul 18 09:08:46 UTC 2023"<br>
And I'm trying to run examples from <a href="https://github.com/roc-lang/basic-cli">https://github.com/roc-lang/basic-cli</a> </p>
<div class="codehilite"><pre><span></span><code>basic-cli on ÓÇ† main
‚ùØ roc run examples/form.roc
üî® Rebuilding platform...
0  0x100154e8a  __assert_rtn + 64
1  0x1000a9922  ___ZN2ld4pass3tlvERKNS_7OptionsERNS_20AtomFileConsolidatorE_block_invoke_2 + 2178
2  0x1000a9bc2  void mapReduce&lt;ld::Atom const*, ld::pass::tlv(ld::Options const&amp;, ld::AtomFileConsolidator&amp;)::CollectedAtoms&gt;(std::__1::span&lt;ld::Atom const*, 18446744073709551615ul&gt;, unsigned long, void (unsigned long, ld::pass::tlv(ld::Options const&amp;, ld::AtomFileConsolidator&amp;)::CollectedAtoms&amp;, std::__1::span&lt;ld::Atom const*, 18446744073709551615ul&gt;) block_pointer, void (std::__1::span&lt;ld::pass::tlv(ld::Options const&amp;, ld::AtomFileConsolidator&amp;)::CollectedAtoms, 18446744073709551615ul&gt;) block_pointer) + 482
3  0x1000a905f  ld::pass::tlv(ld::Options const&amp;, ld::AtomFileConsolidator&amp;) + 527
4  0x100138664  ld::AtomFileConsolidator::resolve() + 18628
5  0x1000a32ec  main + 12348
ld: Assertion failed: (fixups().size() == 2), function initFixup, file Atom.cpp, line 2005.
thread &#39;main&#39; panicked at &#39;not yet implemented: gracefully handle `ld` (or `zig` in the case of wasm with --optimize) returning exit code Some(1)&#39;, crates/compiler/build/src/program.rs:1048:17
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>
<p>Not sure if I'm doing something wrong or if this even supposed to work.<br>
I have rust:</p>
<div class="codehilite"><pre><span></span><code>rustup 1.26.0 (5af9b9484 2023-04-05)
info: This is the version for the rustup toolchain manager, not the rustc compiler.
info: The currently active `rustc` version is `rustc 1.71.0 (8ede3aae2 2023-07-12)`
</code></pre></div>



<a name="377047477"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/377047477" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Domurad <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#377047477">(Jul 20 2023 at 16:41)</a>:</h4>
<p>I have an Intel based Mac.<br>
I was able to build the ROC compiler from source - but I'm still getting the same error with it...<br>
I get the same error when trying to run with the pre-built platform:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">app</span><span class="w"> </span><span class="s">"hello"</span>
<span class="w">    </span><span class="nv">packages</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">pf</span><span class="nf">:</span><span class="w"> </span><span class="s">"https://github.com/roc-lang/basic-cli/releases/download/0.4.0/DI4lqn7LIZs8ZrCDUgLK-tHHpQmxGF1ZrlevRKq5LXk.tar.br"</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nv">imports</span><span class="w"> </span><span class="p">[</span><span class="nv">pf</span><span class="nf">.</span><span class="kt">Stdout</span><span class="p">]</span>
<span class="w">    </span><span class="nv">provides</span><span class="w"> </span><span class="p">[</span><span class="nv">main</span><span class="p">]</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">pf</span>

<span class="kr">main </span><span class="nf">=</span>
<span class="w">    </span><span class="kt">Stdout</span><span class="nf">.</span><span class="nv">line</span><span class="w"> </span><span class="s">"I'm a Roc application!"</span>
</code></pre></div>
<p>I was able to run some examples from "platform-switching", like rocLovesRust.roc, rocLovesSwift.roc and rocLovesC.roc .<br>
And I was able to run the "gui" example, and the "webserver" example... <br>
So it seems that I can't run the "basic-cli" platform... (or any cli platform).</p>



<a name="377047547"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/377047547" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#377047547">(Jul 20 2023 at 16:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="634290">Artur Domurad</span> has marked this topic as resolved.</p>



<a name="377047557"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/377047557" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#377047557">(Jul 20 2023 at 16:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="634290">Artur Domurad</span> has marked this topic as unresolved.</p>



<a name="377047592"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/377047592" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#377047592">(Jul 20 2023 at 16:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="634290">Artur Domurad</span> has marked this topic as resolved.</p>



<a name="377565982"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/377565982" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#377565982">(Jul 22 2023 at 11:20)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="634290">@Artur Domurad</span>, can you share what fixed your problem?</p>



<a name="377576319"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/377576319" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Domurad <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#377576319">(Jul 22 2023 at 11:55)</a>:</h4>
<p>Actually all the examples that use any rust-based "cli" platform still don't work.<br>
For now I'm happy that I can use other platforms (like the webserver) to play with the language :)<br>
I do plan to debug the issue with the "basic-cli" platform after the weekend - maybe I will be able to figure it out.</p>



<a name="385427074"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/385427074" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Domurad <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#385427074">(Aug 16 2023 at 09:52)</a>:</h4>
<p>For anyone with the same problem:</p>
<p>This is an issue with the linker - macos 13 + Intel + xcode 15.<br>
If I want to be able to run any roc app using the basic-cli platform (precompiled or not) - I had to add the "-ld64" flag to the "ld" command.</p>
<p>How to fix if you have the same problem:<br>
Go to <code>crates/compiler/build/src/link.rs</code> <br>
And in the function <code>link_macos</code> in the <code>ld_command.args</code> you need to add "-ld", like so:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">   </span><span class="n">ld_command</span>
<span class="w">        </span><span class="c1">// NOTE: order of arguments to `ld` matters here!</span>
<span class="w">        </span><span class="c1">// The `-l` flags should go after the `.o` arguments</span>
<span class="w">        </span><span class="c1">// Don't allow LD_ env vars to affect this</span>
<span class="w">        </span><span class="p">.</span><span class="n">env_clear</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">args</span><span class="p">(</span><span class="o">&amp;</span><span class="n">link_type_args</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">args</span><span class="p">([</span>
<span class="w">            </span><span class="s">"-ld64"</span><span class="p">,</span><span class="w">  </span><span class="c1">// &lt;------------------ HERE ----------------------------------------------------</span>
<span class="w">            </span><span class="c1">// NOTE: we don't do --gc-sections on macOS because the default</span>
<span class="w">            </span><span class="c1">// macOS linker doesn't support it, but it's a performance</span>
<span class="w">            </span><span class="c1">// optimization, so if we ever switch to a different linker,</span>
<span class="w">            </span><span class="c1">// we'd like to re-enable it on macOS!</span>
<span class="w">            </span><span class="c1">// "--gc-sections",</span>
<span class="w">            </span><span class="s">"-arch"</span><span class="p">,</span>
</code></pre></div>



<a name="385431317"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/385431317" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#385431317">(Aug 16 2023 at 10:20)</a>:</h4>
<p>Thanks for reporting this <span class="user-mention" data-user-id="634290">@Artur Domurad</span>!<br>
Can you share the original error message? That way I can write up an issue that is more search friendly.<br>
Github recently added support for CI on macos 13, I'll look into setting that up.</p>



<a name="385431959"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/385431959" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Domurad <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#385431959">(Aug 16 2023 at 10:24)</a>:</h4>
<p>Example program:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">app</span><span class="w"> </span><span class="s">"helloWorld"</span>
<span class="w">    </span><span class="nv">packages</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">pf</span><span class="nf">:</span><span class="w"> </span><span class="s">"https://github.com/roc-lang/basic-cli/releases/download/0.5.0/Cufzl36_SnJ4QbOoEmiJ5dIpUxBvdB3NEySvuH82Wio.tar.br"</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nv">imports</span><span class="w"> </span><span class="p">[</span><span class="nv">pf</span><span class="nf">.</span><span class="kt">Stdout</span><span class="p">]</span>
<span class="w">    </span><span class="nv">provides</span><span class="w"> </span><span class="p">[</span><span class="nv">main</span><span class="p">]</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">pf</span>

<span class="kr">main </span><span class="nf">=</span>
<span class="w">    </span><span class="kt">Stdout</span><span class="nf">.</span><span class="nv">line</span><span class="w"> </span><span class="s">"Hello, World!"</span>
</code></pre></div>
<p>I run:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>roc<span class="w"> </span>dev<span class="w"> </span>./helloWorld.roc
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>‚ùØ<span class="w"> </span>roc<span class="w"> </span>dev<span class="w"> </span>./helloWorld.roc
<span class="m">0</span><span class="w">  </span>0x10298ae8a<span class="w">  </span>__assert_rtn<span class="w"> </span>+<span class="w"> </span><span class="m">64</span>
<span class="m">1</span><span class="w">  </span>0x1028dfad2<span class="w">  </span>___ZN2ld4pass3tlvERKNS_7OptionsERNS_20AtomFileConsolidatorE_block_invoke_2<span class="w"> </span>+<span class="w"> </span><span class="m">2178</span>
<span class="m">2</span><span class="w">  </span>0x1028dfd72<span class="w">  </span>void<span class="w"> </span>mapReduce&lt;ld::Atom<span class="w"> </span>const*,<span class="w"> </span>ld::pass::tlv<span class="o">(</span>ld::Options<span class="w"> </span>const<span class="p">&amp;</span>,<span class="w"> </span>ld::AtomFileConsolidator<span class="p">&amp;</span><span class="o">)</span>::CollectedAtoms&gt;<span class="o">(</span>std::__1::span&lt;ld::Atom<span class="w"> </span>const*,<span class="w"> </span>18446744073709551615ul&gt;,<span class="w"> </span>unsigned<span class="w"> </span>long,<span class="w"> </span>void<span class="w"> </span><span class="o">(</span>unsigned<span class="w"> </span>long,<span class="w"> </span>ld::pass::tlv<span class="o">(</span>ld::Options<span class="w"> </span>const<span class="p">&amp;</span>,<span class="w"> </span>ld::AtomFileConsolidator<span class="p">&amp;</span><span class="o">)</span>::CollectedAtoms<span class="p">&amp;</span>,<span class="w"> </span>std::__1::span&lt;ld::Atom<span class="w"> </span>const*,<span class="w"> </span>18446744073709551615ul&gt;<span class="o">)</span><span class="w"> </span>block_pointer,<span class="w"> </span>void<span class="w"> </span><span class="o">(</span>std::__1::span&lt;ld::pass::tlv<span class="o">(</span>ld::Options<span class="w"> </span>const<span class="p">&amp;</span>,<span class="w"> </span>ld::AtomFileConsolidator<span class="p">&amp;</span><span class="o">)</span>::CollectedAtoms,<span class="w"> </span>18446744073709551615ul&gt;<span class="o">)</span><span class="w"> </span>block_pointer<span class="o">)</span><span class="w"> </span>+<span class="w"> </span><span class="m">482</span>
<span class="m">3</span><span class="w">  </span>0x1028df20f<span class="w">  </span>ld::pass::tlv<span class="o">(</span>ld::Options<span class="w"> </span>const<span class="p">&amp;</span>,<span class="w"> </span>ld::AtomFileConsolidator<span class="p">&amp;</span><span class="o">)</span><span class="w"> </span>+<span class="w"> </span><span class="m">527</span>
<span class="m">4</span><span class="w">  </span>0x10296e664<span class="w">  </span>ld::AtomFileConsolidator::resolve<span class="o">()</span><span class="w"> </span>+<span class="w"> </span><span class="m">18628</span>
<span class="m">5</span><span class="w">  </span>0x1028d949c<span class="w">  </span>main<span class="w"> </span>+<span class="w"> </span><span class="m">12348</span>
ld:<span class="w"> </span>Assertion<span class="w"> </span>failed:<span class="w"> </span><span class="o">(</span>fixups<span class="o">()</span>.size<span class="o">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="k">function</span><span class="w"> </span>initFixup,<span class="w"> </span>file<span class="w"> </span>Atom.cpp,<span class="w"> </span>line<span class="w"> </span><span class="m">2005</span>.
thread<span class="w"> </span><span class="s1">'main'</span><span class="w"> </span>panicked<span class="w"> </span>at<span class="w"> </span><span class="s1">'not yet implemented: gracefully handle `ld` (or `zig` in the case of wasm with --optimize) returning exit code Some(1)'</span>,<span class="w"> </span>crates/compiler/build/src/program.rs:1048:17
note:<span class="w"> </span>run<span class="w"> </span>with<span class="w"> </span><span class="sb">`</span><span class="nv">RUST_BACKTRACE</span><span class="o">=</span><span class="m">1</span><span class="sb">`</span><span class="w"> </span>environment<span class="w"> </span>variable<span class="w"> </span>to<span class="w"> </span>display<span class="w"> </span>a<span class="w"> </span>backtrace
</code></pre></div>



<a name="385432354"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/385432354" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#385432354">(Aug 16 2023 at 10:27)</a>:</h4>
<p>Lovely, thanks <span class="user-mention" data-user-id="634290">@Artur Domurad</span> :)</p>



<a name="385441337"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/385441337" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#385441337">(Aug 16 2023 at 11:26)</a>:</h4>
<p>I've logged this as issue <a href="https://github.com/roc-lang/roc/issues/5765">#5765</a>. I'll try to fix it this week.</p>



<a name="385951092"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/385951092" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#385951092">(Aug 18 2023 at 16:25)</a>:</h4>
<p>I was not able to reproduce this issue on the github ci machine with macos 13, can someone else on macos 13 try the above example?</p>



<a name="386117721"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/386117721" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Domurad <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#386117721">(Aug 19 2023 at 15:36)</a>:</h4>
<p>Not sure, but it might be related to the xcode/ld version.<br>
I have the xcode and ld in version 15:</p>
<div class="codehilite"><pre><span></span><code>‚ùØ ld -v
@(#)PROGRAM:ld-classic  PROJECT:ld64-906.2
BUILD 20:09:28 Jul  7 2023
configured to support archs: armv6 armv7 armv7s arm64 arm64e arm64_32 i386 x86_64 x86_64h armv6m armv7k armv7m armv7em
LTO support using: LLVM version 15.0.0 (static support for 29, runtime is 29)
TAPI support using: Apple TAPI version 15.0.0 (tapi-1500.0.12.2)
</code></pre></div>
<p>When I was looking for a solution to my problem, I have found couple of threads on sites like "stackoverflow" that suggest that there is an issue with the new linker which is used by default when you migrate xcode from 14 to 15. (atleast it is how I understood it)</p>
<p>In the link below people have the same error while linking a GO program, and there is suggestion that golang did add the "-ld64" flag as the default option:<br>
<a href="https://github.com/golang/go/issues/61229#issuecomment-1669673723">https://github.com/golang/go/issues/61229#issuecomment-1669673723</a></p>
<p>I will try to find someone with xcode/clang in version 14.x and will test ROC, and then upgrade and test again.<br>
And I will try to upgrade macos and xcode to the newest version - it seems that there was a fix to address this issue.</p>



<a name="386123544"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/386123544" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#386123544">(Aug 19 2023 at 16:28)</a>:</h4>
<p>Thanks for looking into this <span class="user-mention" data-user-id="634290">@Artur Domurad</span>.<br>
I've checked the github CI macos 13 image and it is on xcode 14.3.1</p>



<a name="386123712"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/386123712" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Domurad <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#386123712">(Aug 19 2023 at 16:30)</a>:</h4>
<p>UPDATE:<br>
after upgrading macos to 13.5.1 and the newest xcode/ld (BUILD 17:43:49 Jul 30 2023)<br>
when running roc compiler with the -ld64 flag I get a warning:</p>
<div class="codehilite"><pre><span></span><code>‚ùØ roc dev ./main.roc
ld: warning: -ld64 is deprecated, use -ld_classic instead
I&#39;m a Roc application!
</code></pre></div>
<p>And now I am able to run the previous basic-cli example without the "-ld64" flag :) <br>
It seems that this was just a bug in "ld" 15 and now it is fixed.<br>
So there is no real need to add the "-ld64" flag to roc.</p>



<a name="386123777"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/386123777" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#386123777">(Aug 19 2023 at 16:31)</a>:</h4>
<p>Awesome <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span><br>
I'll update the issue</p>



<a name="451107636"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/451107636" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#451107636">(Jul 13 2024 at 01:25)</a>:</h4>
<p>A note, on my list refcounting branch, I hit this a lot more, no idea why. Maybe the more complex generation creates more cases where the new macos ld fails. So it requires <code>-ld_classic</code> for me. That said, <code>-ld_classic</code> breaks ci (I assume it is on an older version?).</p>



<a name="451147813"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Can%27t%20run%20basic-cli%20platform%20on%20MacOS%2013/near/451147813" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Can.27t.20run.20basic-cli.20platform.20on.20MacOS.2013.html#451147813">(Jul 13 2024 at 09:18)</a>:</h4>
<p>I'll check it out</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>