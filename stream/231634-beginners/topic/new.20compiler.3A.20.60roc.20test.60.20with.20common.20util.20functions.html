<html>
<head><meta charset="utf-8"><title>new compiler: `roc test` with common util functions · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html">new compiler: `roc test` with common util functions</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="571149939"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571149939" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571149939">(Jan 31 2026 at 01:08)</a>:</h4>
<p>I am developing an application with the new roc compiler.  I have some type modules that call common utility functions (i.e. different type modules reusing the same common functions).  this seems to make <code>roc test</code> unhappy.  is this by design?  these are all pure functions</p>



<a name="571149997"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571149997" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571149997">(Jan 31 2026 at 01:08)</a>:</h4>
<p><code>roc test</code> shouldn't be unhappy about anything... have you found a bug?</p>



<a name="571150244"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571150244" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571150244">(Jan 31 2026 at 01:11)</a>:</h4>
<p>i feel like I'm Doing It Wrong, but i've tried all kinds of things.  let's say I have parse.roc with some pure functions defined, that take strings and return numbers.  then a type module like Wager, that has a parse method (or function) which calls functions defined in parse.roc (ignore capitalization issues; i have been trying all kinds of different module organizations).  what's the simplest thing that definitely should work?</p>



<a name="571150317"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571150317" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571150317">(Jan 31 2026 at 01:13)</a>:</h4>
<p>the parse utility functions do things like parse_u32('1234') =&gt; U32 (let's say)    and then Wager or several other types in different modules need to call parse_u32 on different things</p>



<a name="571150466"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571150466" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571150466">(Jan 31 2026 at 01:14)</a>:</h4>
<p>this "parse utility file" has a few objectives: includes unit tests; is importable or callable from other files; these other files should have unit tests as well.</p>



<a name="571150650"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571150650" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571150650">(Jan 31 2026 at 01:16)</a>:</h4>
<p>what's good new compiler application to reference?  i have been using <code>basic-cli</code> (migrate-zig-compiler) but this is showing more platform-style organization</p>



<a name="571152054"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571152054" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571152054">(Jan 31 2026 at 01:37)</a>:</h4>
<div class="codehilite"><pre><span></span><code>$ roc example_app.roc
dbg: Ok([1])
dbg: Ok([1, 2, 3])
dbg: Err(NotANumber)
dbg: Err(NotANumber)
dbg: Ok([4, 2])
$ roc test Parser.roc --verbose
All (4) tests passed in 37.1 ms.
PASS: Parser.roc:24
PASS: Parser.roc:25
PASS: Parser.roc:26
PASS: Parser.roc:27
</code></pre></div>
<h2>Parser.roc</h2>
<div class="codehilite"><pre><span></span><code># a Roc type module includes a single nominal type
Parser := {}.{

    # this is an function associated with the Parser type
    # e.g. &quot;12&quot; -&gt; [1,2]
    parse_digits : Str -&gt; Try(List(U8), [NotANumber])
    parse_digits = |str| {
        bytes = Str.to_utf8(str)
        bytes.fold(Ok([]), |acc, byte| {
            match acc {
                Err(e) =&gt; Err(e)
                Ok(digits) =&gt; {
                    if &#39;0&#39; &lt;= byte and byte &lt;= &#39;9&#39; {
                        Ok(List.append(digits, byte - &#39;0&#39;))
                    } else {
                        Err(NotANumber)
                    }
                }
            }
        })
    }
}

expect Parser.parse_digits(&quot;12&quot;) == Ok([1,2])
expect Parser.parse_digits(&quot;abc&quot;) == Err(NotANumber)
expect Parser.parse_digits(&quot;123&quot;) == Ok([1,2,3])
expect Parser.parse_digits(&quot;1234&quot;) == Ok([1,2,3,4])
</code></pre></div>
<h2>example_app.roc</h2>
<div class="codehilite"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.6/2BfGn4M9uWJNhDVeMghGeXNVDFijMfPsmmVeo6M4QjKX.tar.zst&quot; }

import pf.Stdout
import Parser

main! = |_args| {
    dbg Parser.parse_digits(&quot;1&quot;)
    dbg Parser.parse_digits(&quot;123&quot;)
    dbg Parser.parse_digits(&quot;NotADigit&quot;)
    dbg Parser.parse_digits(&quot;0.1&quot;)
    dbg Parser.parse_digits(&quot;42&quot;)
    Ok({})
}
</code></pre></div>



<a name="571152262"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571152262" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571152262">(Jan 31 2026 at 01:40)</a>:</h4>
<p>This should help!  Taking rhe dogs for a walk rn ...</p>



<a name="571152448"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571152448" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571152448">(Jan 31 2026 at 01:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="780900">Rick Hull</span> <a href="#narrow/channel/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions/near/571150650">said</a>:</p>
<blockquote>
<p>what's good new compiler application to reference?  i have been using <code>basic-cli</code> (migrate-zig-compiler) but this is showing more platform-style organization</p>
</blockquote>
<p>There isn't any examples or documentation yet -- aside from the bits and pieces in the <code>langref/</code> ... the new compiler isn't a very friendly place for beginners right now and there are unimplemented or buggy things lurking around every corner.</p>



<a name="571152511"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571152511" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571152511">(Jan 31 2026 at 01:43)</a>:</h4>
<p>The more we try and build real things though we can find the issues and fix them one by one... so it's very helpful when people try things out and report any issues or questions.</p>



<a name="571153544"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571153544" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571153544">(Jan 31 2026 at 02:00)</a>:</h4>
<p><span class="user-mention" data-user-id="515757">@Luke Boswell</span> big help, thanks!   we (me and claude) were using [].{...}    not {}.{...}    what are the implications?</p>



<a name="571153571"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571153571" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571153571">(Jan 31 2026 at 02:00)</a>:</h4>
<p>Both should work...</p>



<a name="571153626"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571153626" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571153626">(Jan 31 2026 at 02:01)</a>:</h4>
<p><code>[]</code> is an empty tag union, <code>{}</code> is an empty record, both are zero sized types.</p>



<a name="571153806"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571153806" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571153806">(Jan 31 2026 at 02:05)</a>:</h4>
<p>i think we found a bug, but compiler is like 10 days old; continuing to test and narrow down; will get the latest nightly</p>



<a name="571153877"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571153877" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571153877">(Jan 31 2026 at 02:06)</a>:</h4>
<p>For now:</p>
<blockquote>
<p>The bug is precisely: inside a {}.{...} type method at comptime, once a different method<br>
   is called on one parameter (e.g. a.to_u64()), subsequent access to the other parameter<br>
  (b) loses scope. to_str doesn't trigger it — likely because it's the same builtin method<br>
   called on both, so the comptime evaluator doesn't context-switch the same way.</p>
</blockquote>
<p>grabbing a newer compiler to retest</p>



<a name="571154214"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571154214" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571154214">(Jan 31 2026 at 02:12)</a>:</h4>
<p><a href="https://gist.github.com/rickhull/289ef29265d182ada8accc81957fd93a">https://gist.github.com/rickhull/289ef29265d182ada8accc81957fd93a</a> # latest roc-nightly</p>



<a name="571154499"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571154499" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571154499">(Jan 31 2026 at 02:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="780900">Rick Hull</span> <a href="#narrow/channel/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions/near/571154214">said</a>:</p>
<blockquote>
<p><a href="https://gist.github.com/rickhull/289ef29265d182ada8accc81957fd93a">https://gist.github.com/rickhull/289ef29265d182ada8accc81957fd93a</a> # latest roc-nightly</p>
</blockquote>
<p>looks like a bug to me, can you make a GH issue?</p>



<a name="571155712"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571155712" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571155712">(Jan 31 2026 at 02:36)</a>:</h4>
<p>we were able to repro a segfault repeatedly, at address 0xblahblah, supposedly ASCII 'tosh'; unable to repro for now</p>



<a name="571155893"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571155893" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571155893">(Jan 31 2026 at 02:40)</a>:</h4>
<div class="codehilite"><pre><span></span><code>● Bash(roc test src/ParseUtil.roc --verbose 2&gt;&amp;1)
  ⎿  Error: Exit code 139

     Segmentation fault (SIGSEGV) in the Roc compiler.
     Fault address: 0x74736f68

     Please report this issue at: https://github.com/roc-lang/roc/issues

● THERE IT IS! The segfault! When Value.parse_sexp (a type method) calls tokenize (a
  module-level function with fold) at comptime IN THE SAME FILE, it segfaults!

  But wait - spike/Value.roc works with the exact same structure. Let me compare the two
  more carefully:
</code></pre></div>
<div class="codehilite"><pre><span></span><code>● This is a deep compiler bug. For now, we have a working version in spike/Value.roc and
  the copy in ParseUtil_minimal.roc. The full ParseUtil.roc segfaults for reasons we
  haven&#39;t identified yet.

  Summary for you: We&#39;ve hit a Roc compiler bug that causes segfaults when type methods
  call module-level functions at comptime. We&#39;ve identified that fold-based tokenize works
   (avoiding for/var), but there&#39;s still a segfault in the full ParseUtil that doesn&#39;t
  occur in the minimal spike/Value.roc version. We have working code we can build from,
  but debugging the compiler bug itself would require more investigation.
</code></pre></div>



<a name="571156788"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571156788" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571156788">(Jan 31 2026 at 02:58)</a>:</h4>
<p>it looks like there are 3 bugs, and initial suspicion is that they are all specific to <code>roc test</code></p>



<a name="571156849"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571156849" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571156849">(Jan 31 2026 at 02:59)</a>:</h4>
<p>If you log a GH issue with the files to minimally reproduce, that would be helpful.</p>



<a name="571156869"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571156869" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571156869">(Jan 31 2026 at 03:00)</a>:</h4>
<p>It should be easy enough to fix I think. I'm looking at some other bugs rn</p>



<a name="571156898"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571156898" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571156898">(Jan 31 2026 at 03:00)</a>:</h4>
<p><code>roc test</code> hasn't had any love in months</p>



<a name="571156946"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571156946" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571156946">(Jan 31 2026 at 03:01)</a>:</h4>
<p>It hasn't been upgraded to use the new coordinator, so that could be related here</p>



<a name="571158232"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571158232" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan G Knutson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571158232">(Jan 31 2026 at 03:26)</a>:</h4>
<p>Questions about the single-nominal-type-per-file syntax:</p>
<ol>
<li>Is it fair to treat <code>Builtin.roc</code> as sort of a bible for this pattern, other than the special <code>ProvidedByCompiler</code> constructor?</li>
<li>Are multiple top-level type declarations (or nominal type declarations) intended to be a compile error now?</li>
</ol>



<a name="571158292"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571158292" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan G Knutson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571158292">(Jan 31 2026 at 03:27)</a>:</h4>
<p>I'm wondering if a windows-specific bug I'm running into working on the glue command is actually a case of 2 not being treated as a compile error when it should be an error.</p>



<a name="571158801"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571158801" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571158801">(Jan 31 2026 at 03:37)</a>:</h4>
<p>I recently added the error for not having a top level nominal type... I dont think I added one for multiple top level nominal types.</p>



<a name="571158813"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571158813" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571158813">(Jan 31 2026 at 03:37)</a>:</h4>
<p>It should be an error</p>



<a name="571158838"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571158838" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571158838">(Jan 31 2026 at 03:38)</a>:</h4>
<p>I would say Builtin.roc is probable the best example, aside from the annotation only parts the compiler implements internally</p>



<a name="571159167"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571159167" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571159167">(Jan 31 2026 at 03:43)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/9117">https://github.com/roc-lang/roc/issues/9117</a><br>
<a href="https://github.com/roc-lang/roc/issues/9118">https://github.com/roc-lang/roc/issues/9118</a><br>
<a href="https://github.com/roc-lang/roc/issues/9119">https://github.com/roc-lang/roc/issues/9119</a></p>



<a name="571159262"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571159262" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571159262">(Jan 31 2026 at 03:45)</a>:</h4>
<p>For reference type modules should be named with an uppercase, like <code>Bug3.roc</code> not <code>bug3.roc</code> -- and match the name of the type they exposing</p>



<a name="571159288"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571159288" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571159288">(Jan 31 2026 at 03:46)</a>:</h4>
<p>See <a href="https://github.com/roc-lang/roc/blob/main/langref/modules.md">https://github.com/roc-lang/roc/blob/main/langref/modules.md</a></p>



<a name="571159329"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571159329" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Hull <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571159329">(Jan 31 2026 at 03:47)</a>:</h4>
<p>this was just iterating on getting a minimal repro, not necessarily realistic; would it matter here?</p>



<a name="571159370"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571159370" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571159370">(Jan 31 2026 at 03:48)</a>:</h4>
<p>The compiler shouldn't segfault, and should give helpful error messages... so if we find any situation where it doesn't that's a bug</p>



<a name="571159403"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571159403" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571159403">(Jan 31 2026 at 03:48)</a>:</h4>
<p>I thought I'd mention that in case it unblocks you</p>



<a name="571160690"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/new%20compiler%3A%20%60roc%20test%60%20with%20common%20util%20functions/near/571160690" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan G Knutson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/new.20compiler.3A.20.60roc.20test.60.20with.20common.20util.20functions.html#571160690">(Jan 31 2026 at 04:06)</a>:</h4>
<p>I'm not sure how I would go about reproducing it, but without the error for multiple type declarations in a file, we get fun stack corruption on windows. Might be worth figuring out how to avoid that even if we won't hit this specific case any more.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>