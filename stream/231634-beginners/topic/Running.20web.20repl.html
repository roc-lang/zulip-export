<html>
<head><meta charset="utf-8"><title>Running web repl · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html">Running web repl</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="274317797"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274317797" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274317797">(Mar 06 2022 at 17:23)</a>:</h4>
<p>I'm having trouble running the web repl. Here's the output I'm getting from <code>repl_www/build.sh</code></p>
<div class="codehilite"><pre><span></span><code>+ [[ ! -d repl_www ]]
+ which wasm-pack
/home/degustaf/.cargo/bin/wasm-pack
+ WWW_ROOT=repl_www/build
+ mkdir -p repl_www/build
+ cp -r repl_www/public/repl repl_www/public/repl.css repl_www/public/repl.js repl_www/public/wasi.js repl_www/build
+ &#39;[&#39; -n &#39;&#39; &#39;]&#39;
+ wasm-pack build --target web repl_wasm
[INFO]: Checking for the Wasm target...
Error: wasm32-unknown-unknown target not found in sysroot: &quot;/nix/store/hjjh1mnip37gahmn1w8w2z76lhmvi3aw-rustc-1.58.1&quot;

Used rustc from the following path: &quot;/nix/store/hjjh1mnip37gahmn1w8w2z76lhmvi3aw-rustc-1.58.1/bin/rustc&quot;
It looks like Rustup is not being used. For non-Rustup setups, the wasm32-unknown-unknown target needs to be installed manually. See https://rustwasm.github.io/wasm-pack/book/prerequisites/non-rustup-setups.html on how to do this.
</code></pre></div>



<a name="274317818"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274317818" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274317818">(Mar 06 2022 at 17:24)</a>:</h4>
<p>How are other people doing this? Are you using rustup?</p>



<a name="274318871"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274318871" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274318871">(Mar 06 2022 at 17:47)</a>:</h4>
<p>I probably work on this the most. I do have rustup installed yes.</p>



<a name="274318887"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274318887" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274318887">(Mar 06 2022 at 17:47)</a>:</h4>
<p>Then should we be adding it to shell.nix?</p>



<a name="274318888"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274318888" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274318888">(Mar 06 2022 at 17:47)</a>:</h4>
<p>And I assume that's how I got the wasm32 target! I would remember if I did some special manual thing.</p>



<a name="274318928"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274318928" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274318928">(Mar 06 2022 at 17:48)</a>:</h4>
<p>I have no idea, I'm not using nix</p>



<a name="274319014"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274319014" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274319014">(Mar 06 2022 at 17:50)</a>:</h4>
<p>Ah, nix doesn't use rust up and instead directly install rustc and cargo and such</p>



<a name="274319021"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274319021" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274319021">(Mar 06 2022 at 17:50)</a>:</h4>
<p>Maybe we should switch nix to use rustup. I know it is supported by nix.</p>



<a name="274319041"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274319041" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274319041">(Mar 06 2022 at 17:51)</a>:</h4>
<p>I added rustup to nix locally, and got a different error.</p>
<div class="codehilite"><pre><span></span><code>+ [[ ! -d repl_www ]]
+ which wasm-pack
/home/degustaf/.cargo/bin/wasm-pack
+ WWW_ROOT=repl_www/build
+ mkdir -p repl_www/build
+ cp -r repl_www/public/repl repl_www/public/repl.css repl_www/public/repl.js repl_www/public/wasi.js repl_www/build
+ &#39;[&#39; -n &#39;&#39; &#39;]&#39;
+ wasm-pack build --target web repl_wasm
Error: Error during execution of `cargo metadata`: error: no override and no default toolchain set
</code></pre></div>



<a name="274319107"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274319107" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274319107">(Mar 06 2022 at 17:52)</a>:</h4>
<p>Could this be because the rest of the toolchain is installed directly?</p>



<a name="274319115"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274319115" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274319115">(Mar 06 2022 at 17:53)</a>:</h4>
<p>probably</p>



<a name="274319122"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274319122" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274319122">(Mar 06 2022 at 17:53)</a>:</h4>
<p>your "other" cargo might not know about the toolchain that rustup specified</p>



<a name="274319306"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274319306" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274319306">(Mar 06 2022 at 17:57)</a>:</h4>
<p>Yeah, nix cargo doesn't know of rustup. It is separate</p>



<a name="274319371"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274319371" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274319371">(Mar 06 2022 at 17:58)</a>:</h4>
<p>okay, I'm cleaning out my nix store, and trying again using rustup in shell.nix instead of the individual rust tools</p>



<a name="274320784"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274320784" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274320784">(Mar 06 2022 at 18:29)</a>:</h4>
<p>Cleaning out my nix store probably wasn't the right answer, but it eventually worked.</p>



<a name="274320975"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274320975" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274320975">(Mar 06 2022 at 18:33)</a>:</h4>
<p>I think the right answer would be having nix install rustup. Then add a step under nix in BUILDING_FROM_SOURCE telling people to install the toolchains using rustup and setting them as the default.</p>



<a name="274322461"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274322461" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274322461">(Mar 06 2022 at 19:03)</a>:</h4>
<p>We should probably add a <code>rust-toolchain.toml</code> file to the project instead of having people set the default manually. That can also be used by everyone else to keep rust version consistent</p>



<a name="274324721"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274324721" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274324721">(Mar 06 2022 at 19:51)</a>:</h4>
<p>I wasn't aware that was an option. Sounds like a good idea to me</p>



<a name="274373599"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274373599" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274373599">(Mar 07 2022 at 10:36)</a>:</h4>
<p>I have set up a PR with the rust-toolchain file. I'll look into using rustup when I do the nix flake setup.</p>



<a name="274379104"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274379104" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274379104">(Mar 07 2022 at 11:34)</a>:</h4>
<p>Sorry, probably should have said something here. I already did this.<br>
<a href="https://github.com/rtfeldman/roc/pull/2667">https://github.com/rtfeldman/roc/pull/2667</a></p>



<a name="274382568"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Running%20web%20repl/near/274382568" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Running.20web.20repl.html#274382568">(Mar 07 2022 at 12:12)</a>:</h4>
<p>No problem <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>