<html>
<head><meta charset="utf-8"><title>PSA: import files as Str/List U8 · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html">PSA: import files as Str/List U8</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="348507136"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/348507136" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#348507136">(Apr 11 2023 at 16:16)</a>:</h4>
<p>Hi all, I recently added a new feature that I think may be useful to others. It enables importing files directly as a <code>Str</code> or a <code>List U8</code>.</p>
<p>There is a silly example in the repo of <a href="https://github.com/roc-lang/roc/blob/65ebeab30368e1270c628d9538b82e10874d5f73/examples/cli/ingested-file.roc">a roc file that prints it's own source code</a>. There is also an example of <a href="https://github.com/roc-lang/roc/blob/65ebeab30368e1270c628d9538b82e10874d5f73/examples/cli/ingested-file-bytes.roc">summing the bytes of a file</a>.</p>
<p>The syntax is:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">imports</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s">"some-file"</span><span class="w"> </span><span class="nx">as</span><span class="w"> </span><span class="nv">someStr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Str</span><span class="p">,</span>
<span class="w">    </span><span class="s">"some-file"</span><span class="w"> </span><span class="nx">as</span><span class="w"> </span><span class="nv">someBytes</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">List</span><span class="w"> </span><span class="nx">U8</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>
<p>This feature is now available in the <a href="https://github.com/roc-lang/roc/releases/tag/nightly">latest nightly</a> from 2023-04-11.</p>



<a name="348521483"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/348521483" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#348521483">(Apr 11 2023 at 17:18)</a>:</h4>
<p>finally: a roc quine</p>



<a name="348567232"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/348567232" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Duncan <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#348567232">(Apr 11 2023 at 21:48)</a>:</h4>
<p>What happens if the file doesn't exist or there's no read permission?</p>



<a name="348567540"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/348567540" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#348567540">(Apr 11 2023 at 21:50)</a>:</h4>
<p>A compilation error</p>



<a name="349089047"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349089047" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349089047">(Apr 13 2023 at 12:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="454654">Ayaz Hafiz</span> <a href="#narrow/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8/near/348521483">said</a>:</p>
<blockquote>
<p>finally: a roc quine</p>
</blockquote>
<p>April Fools idea: change the whole <a href="http://roc-lang.org">roc-lang.org</a> webpage to be a pitch for how Roc is a programming language designed for speedrunning quines</p>



<a name="349089190"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349089190" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349089190">(Apr 13 2023 at 12:07)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> , this is awesome! <span aria-label="heart eyes" class="emoji emoji-1f60d" role="img" title="heart eyes">:heart_eyes:</span></p>



<a name="349089627"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349089627" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349089627">(Apr 13 2023 at 12:09)</a>:</h4>
<p>I missed the PR, but I'm curious - what happens if you annotate its type as <code>_</code> and then use it as something other than <code>Str</code> or <code>List U8</code>?</p>



<a name="349089737"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349089737" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349089737">(Apr 13 2023 at 12:10)</a>:</h4>
<p>also curious if the <code>:</code> is optional syntactically, given that <code>: _</code> is allowed <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="349089908"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349089908" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349089908">(Apr 13 2023 at 12:10)</a>:</h4>
<p>(side note: it's fun to come back from a 2-day conference and discover awesome new features have landed in the meantime! <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> )</p>



<a name="349121095"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349121095" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349121095">(Apr 13 2023 at 14:08)</a>:</h4>
<p><code>: _</code> just works. It is actually used in the summing bytes example linked above</p>



<a name="349121792"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349121792" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349121792">(Apr 13 2023 at 14:09)</a>:</h4>
<p>I don't think the <code>:</code> is optional. Currently, this does not really have any special parsing. It parses a string, <code> as </code>, and then a type annotation. I think a type annotation requires the <code>:</code>. I guess that could be changed to make it optional</p>



<a name="349140621"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349140621" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349140621">(Apr 13 2023 at 15:17)</a>:</h4>
<p>To Brendan’s note- If you annotate as _, the inferred type would be List U8</p>



<a name="349141585"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349141585" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349141585">(Apr 13 2023 at 15:21)</a>:</h4>
<p>You are correct. I thought at one point I had it working with both, but maybe that was when the PR was broken in a different way. So, I guess, fixing other constraint bugs made it always <code>List U8</code>.</p>



<a name="349354378"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349354378" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349354378">(Apr 14 2023 at 11:57)</a>:</h4>
<p>to clarify, what I meant about the inference is: suppose I annotate it as <code>: _</code> and then use it as a <code>Dict</code> or something - do I get a type mismatch saying it can only unify to <code>Str</code> or <code>List U8</code>?</p>



<a name="349354893"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349354893" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349354893">(Apr 14 2023 at 11:58)</a>:</h4>
<p>also, I really like the idea of having the annotation syntax be optional - that's consistent with how annotations work in general, plus it means tutorials can use the feature even before they teach type annotations! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="349985307"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/349985307" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#349985307">(Apr 14 2023 at 15:43)</a>:</h4>
<p>Currently, if you annotate as <code>: _</code>, the type will be <code>List U8</code>. If you use it as any other type, that will be a type mismatch. Also, if you annotate as any other type than <code>List U8</code> or <code>Str</code>, it will be a type mismatch.</p>



<a name="350004061"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/350004061" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#350004061">(Apr 14 2023 at 17:04)</a>:</h4>
<p>oh interesting - so when you do <code>: _</code> it's not actually doing type inference?</p>



<a name="350019215"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/PSA%3A%20import%20files%20as%20Str/List%20U8/near/350019215" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/PSA.3A.20import.20files.20as.20Str.2FList.20U8.html#350019215">(Apr 14 2023 at 18:17)</a>:</h4>
<p>Nope. Was talking to ayaz about that. Would require more work to be done correctly. Would need a type like <code>RangedNum</code> but specific for ingested files. I initially had a version that kinda did type inference, but it would break if the type was used as <code>List a</code> where <code>a</code> is not <code>U8</code>. Currently, it just picks the first type the matches. Given any type matches <code>_</code>, <code>List U8</code> wins.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>