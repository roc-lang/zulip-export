<html>
<head><meta charset="utf-8"><title>Numbers friendly usage · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html">Numbers friendly usage</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="304926808"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304926808" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304926808">(Oct 19 2022 at 10:57)</a>:</h4>
<p>Hello everyone, first time posting here and first time using Zulip (actually)!</p>
<p>I have gone through the tutorial section on numbers and I've found you can be quite specific about the numbers you're using in your Roc program (<code>u8</code>, <code>u16</code>, <code>i32</code> and so on), but you can also use <code>Num</code>,  <code>Int</code> and <code>Frac</code> to be open to any kind of numbers, integers and fractions respectively.</p>
<p>From a high level program perspective, ignoring performance, using <code>Int</code> and <code>Frac</code> when we need to differentiate between integers and fractions can be done through all the program's code without ever mentioning specific number types like <code>u8</code>, <code>u16</code>, <code>i32</code> and so on and without the need to think about overflows?</p>



<a name="304930742"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304930742" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304930742">(Oct 19 2022 at 11:22)</a>:</h4>
<p>Welcome <span class="user-mention" data-user-id="556413">@Kristian Notari</span>!<br>
I'm not the expert on this but I think the compiler does end up creating specific variants of functions. So when the user sees a function that uses <code>Int</code> the compiler will end up constraining it to say <code>i64</code> if it detects that is the type that will end up as input or output. So overflows can definitely happen. I believe this is a lot faster than trying to detect and patch overflows on the fly by dynamically moving something to a bigger type, which is why this choice was made.</p>



<a name="304932414"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304932414" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304932414">(Oct 19 2022 at 11:33)</a>:</h4>
<p>also, overflow panics in roc with the default infix operators</p>



<a name="304932471"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304932471" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304932471">(Oct 19 2022 at 11:33)</a>:</h4>
<p>so overflows won't ever happen silently, unless you explicitly opt into that</p>



<a name="304941609"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304941609" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304941609">(Oct 19 2022 at 12:29)</a>:</h4>
<p>Ok so Roc's take on this is somehow more low-level than something else where, for example, by default the Num type is treated as the widest possibile implementation of a numeric value, let's say <code>i64</code> or <code>f64</code>.</p>
<p>Cause I'd like to take advantage of runtime speed that Roc is giving while still offering a simple and intuitive functional like writing and modeling experience. I'd like not to base my thoughts on "will this crash at runtime due to some overflow happening" but rather on "if it compiles it works".</p>
<p>I don't see how I should be peacefully writing programs with these premises, from an abstract high level perspective I mean. I'd like to know more on how should I approach this topic when writing programs.</p>
<p>Let's say I have my custom add function (for some reason):</p>
<div class="codehilite"><pre><span></span><code>add : Num a, Num a -&gt; Num a
</code></pre></div>
<p>Should I consider it safe to add two i8 values? Like what happens if the only point in my code where I use this function is to calculate:</p>
<div class="codehilite"><pre><span></span><code>result = add 127i8 127i8
</code></pre></div>
<p>Should I expect the result to be a crash with overflow due to the usage of i8 or should it be 127 + 127 = 254?</p>



<a name="304945243"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304945243" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304945243">(Oct 19 2022 at 12:35)</a>:</h4>
<p>Oh I've just seen Num is typed, so I guess that when using i8 values they overflow since i8 addition is used</p>



<a name="304945281"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304945281" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304945281">(Oct 19 2022 at 12:35)</a>:</h4>
<p>yes, exactly</p>



<a name="304945357"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304945357" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304945357">(Oct 19 2022 at 12:35)</a>:</h4>
<p>The actual signature of <code>add</code> will be</p>
<div class="codehilite"><pre><span></span><code>add : Num a, Num a -&gt; Num a
</code></pre></div>

<p>which we can write more explicitly as (this is not actual roc syntax)</p>
<div class="codehilite"><pre><span></span><code>add : forall a. Num a, Num a -&gt; Num a
</code></pre></div>

<p>So now when you go to apply this function to an actual value, the type checker will make the types line up. The <code>I8</code> type is an alias for <code>Num Signed8</code>, so the actual add you call has type </p>
<div class="codehilite"><pre><span></span><code>add : Num Signed8, Num Signed8 -&gt; Num Signed8
</code></pre></div>



<a name="304945388"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304945388" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304945388">(Oct 19 2022 at 12:36)</a>:</h4>
<p>and that call will overflow with the inputs you picked</p>



<a name="304945463"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304945463" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304945463">(Oct 19 2022 at 12:36)</a>:</h4>
<p>now, what happens depends on your implementation of add here</p>



<a name="304945505"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304945505" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304945505">(Oct 19 2022 at 12:36)</a>:</h4>
<p>with <code>add = Num.add</code>, it overflows</p>



<a name="304945586"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304945586" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304945586">(Oct 19 2022 at 12:36)</a>:</h4>
<p>Yeah I was just pretending to wrap the Num.add implementation basically, so I expect an overflow, so a runtime crash with no compile-time warning, right?</p>



<a name="304945606"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304945606" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304945606">(Oct 19 2022 at 12:36)</a>:</h4>
<p>but we also have <code>addSaturated</code> or  <code>addWrap</code></p>



<a name="304945666"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304945666" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304945666">(Oct 19 2022 at 12:37)</a>:</h4>
<p>yes</p>



<a name="304945893"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304945893" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304945893">(Oct 19 2022 at 12:38)</a>:</h4>
<p>we've made this choice quite deliberately. Overflow of an <code>i64</code> is rare, but if it happens you don't want that to happen silently, even in production</p>



<a name="304946015"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304946015" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304946015">(Oct 19 2022 at 12:38)</a>:</h4>
<blockquote>
<p>Cause I'd like to take advantage of runtime speed that Roc is giving while still offering a simple and intuitive functional like writing and modeling experience</p>
</blockquote>
<p>There is a direct tradeoff between speed and high-level convenience. No language or system can give you maximum speed and maximum convenience at the same time.<br>
The Num package has functions that cover various options</p>
<ul>
<li>handle overflow by returning a Result that can be Ok or Err: <code>Num.addChecked</code></li>
<li>handle overflow by saturating at the max/min value: <code>Num.addSaturated</code></li>
<li>crash on overflow: <code>Num.add</code> or <code>+</code></li>
<li>wrap on overflow: <code>Num.addWrap</code> (this is what a hardware adder circuit does, so it is the fastest)</li>
</ul>



<a name="304948084"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304948084" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304948084">(Oct 19 2022 at 12:49)</a>:</h4>
<p>also worth noting that numbers in mathematics are infinite, but computers have finite resources. So there does not (and can never even theoretically) exist a computer that can offer a programming experience where you never think about overflow and it always works out fine.</p>



<a name="304948295"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304948295" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304948295">(Oct 19 2022 at 12:50)</a>:</h4>
<p>so it's a question of where you decide to draw that line. Python for example has "arbitrary ints" - which means "overflow happens when you run out of memory"</p>



<a name="304948353"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304948353" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304948353">(Oct 19 2022 at 12:51)</a>:</h4>
<p>Another option could be to write your own <code>prettySafeAdd: Num a, Num a -&gt; i128</code>.</p>



<a name="304948460"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304948460" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304948460">(Oct 19 2022 at 12:51)</a>:</h4>
<p>yeah I've actually been thinking that defaulting to I128 would be a better default</p>



<a name="304952083"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304952083" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304952083">(Oct 19 2022 at 13:10)</a>:</h4>
<p>really, how does one overflow an i64 by accident in a way that it would not with an i128</p>



<a name="304952135"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304952135" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304952135">(Oct 19 2022 at 13:11)</a>:</h4>
<p>seems like it would just provide more space to hide bugs</p>



<a name="304952563"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304952563" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304952563">(Oct 19 2022 at 13:13)</a>:</h4>
<p>Thanks everyone.</p>
<p>I'm not concerned by speed, rather by high level abstraction and "not have to think about low level stuff under the hood". With this system, if I expose some API that uses two numeric inputs in a potentially unsafe way (where unsafe mean potential overflows), I can't really be sure the user it's using the API correctly cause if I use <code>Num a</code> as my types and I'm not informing them to the risks (within the type level, so no compile-time errors on their part), if they use <code>i8</code> values they are much more likely to encounter overflow issues.</p>
<p>So I'm basically leaving that "risk" to the user without letting him know, cause there's no contract/types involved, just the Roc docs saying it's potentially unsafe to do numeric operations, right?</p>



<a name="304952817"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304952817" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304952817">(Oct 19 2022 at 13:14)</a>:</h4>
<p>if your user explicitly picks <code>I8</code>, which is not the default anywhere, and then use the default operators then it is likely they run into overflows and hence crashes, yes</p>



<a name="304952888"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304952888" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304952888">(Oct 19 2022 at 13:15)</a>:</h4>
<p>and actually, very likely, so will your library code. Being generic over numbers breaks down very quickly</p>



<a name="304952919"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304952919" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304952919">(Oct 19 2022 at 13:15)</a>:</h4>
<p>I mean, if my exposed API is "doSomethingWithNumbers" the user doesn't know addition and potential overflows are a thing, it can't be certain</p>



<a name="304952971"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304952971" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304952971">(Oct 19 2022 at 13:15)</a>:</h4>
<p>it is nice for the standard library api, but your own code should usually quickly just pick one representation</p>



<a name="304953176"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304953176" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304953176">(Oct 19 2022 at 13:16)</a>:</h4>
<p>correct. On the other hand, there is no alternative. You could be using wrapping addition and that may not be what your user wants/expects either</p>



<a name="304953390"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304953390" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304953390">(Oct 19 2022 at 13:17)</a>:</h4>
<p>Apart from numeric operations, are there any other "common enough" cases where potential runtime crashes can happen that are not reflected into the type system nor compile time errors?</p>



<a name="304953555"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304953555" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304953555">(Oct 19 2022 at 13:18)</a>:</h4>
<p>(I'm not speaking about List being instantiated with more than the process memory capacity, but more common and probable things)</p>



<a name="304954836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304954836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304954836">(Oct 19 2022 at 13:25)</a>:</h4>
<p>By the way, in order to have 100% safe exposed API (except for some more rare 128+ overflows) I should always accept a signed/unsigned number of the most wide numeric type and so force the user to convert their numbers to my accepted (the widest) numeric type (in Roc being <code>I/U 128</code> and <code>Dec</code>).</p>
<p>And to be the most user friendly and safe possible, I should accept whatever the user is passing to me and then convert them instantly in their widest counterparts and use them internally.</p>
<p>(I mean, ignoring performance/memory)</p>



<a name="304955844"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304955844" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304955844">(Oct 19 2022 at 13:31)</a>:</h4>
<p>Is using something like “addChecked”, which will return a result and an Err on overflow, an option for you?</p>



<a name="304955929"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304955929" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304955929">(Oct 19 2022 at 13:31)</a>:</h4>
<p>I understand the ergonomics suffer a bit because your users will get a Result rather than a number directly, but it will be a safe API.</p>



<a name="304956899"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304956899" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304956899">(Oct 19 2022 at 13:36)</a>:</h4>
<p>I'm not concerned about returning a Result. It's the opposite in fact. If I can reflect the risks at the type level, I'm more than glad to do so and I'm likely going to do so if I ever have to write something like that down (whenever reasonable to do so).</p>
<p>My concerns are that is not going to be that common to do numeric operations with results, as a community, since the language also have "unsafe" counterparts ready to use.</p>



<a name="304957333"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304957333" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304957333">(Oct 19 2022 at 13:38)</a>:</h4>
<p>Personally, I was expecting a "safe" first approach on this by Roc, like defaulting to 64 or something like that when being generic over numeric types as said <a href="#narrow/stream/231634-beginners/topic/Numbers.20friendly.20usage/near/304948460">here</a>, just to exclude some minor but more frequent bugs with lower than 64 bits numbers</p>



<a name="304962527"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304962527" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304962527">(Oct 19 2022 at 14:04)</a>:</h4>
<p>We do default to 64bit types when none is picked. Which means unless a user chooses otherwise it is relatively safe.</p>
<p>If you want safety, there are simply some things you can't be generic over (without extra checks). By choosing <code>Num a</code> as a type in a function signature, you are accepting the risk that a user might pass in an <code>I8</code> or a <code>U128</code>. In many cases, there is likely no safe and fast way to deal with both of those types.</p>
<p>Compared to most systems languages I would say that crashing on over or underflow by default is extremely safe because it stops the application before something goes wrong.</p>
<p>That being said, it obviously is less safe than something like python for numerics. I guess you could try and argue JavaScript as well, but JS is always floating point numerics are another can of worms.</p>



<a name="304963230"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304963230" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304963230">(Oct 19 2022 at 14:07)</a>:</h4>
<p>If we wanted to enable safer Roc code (from the numerics perspective), we could add a flag to enforce checked math. I personally find that way too tedious because your code becomes riddle with results, but it would enable generic and safe code.</p>



<a name="304965501"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304965501" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304965501">(Oct 19 2022 at 14:17)</a>:</h4>
<p>Yeah I was not criticizing. It was more an opportunity to know the reasons why. I assumed by default the most safe way of doing things was the go to for Roc and I was excepting not to incur in “unsafe runtime crashes” explanations directly in the tutorial. But I guess those number representations decisions also help with performance which is one of the goals</p>



<a name="304965745"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304965745" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304965745">(Oct 19 2022 at 14:18)</a>:</h4>
<p>Are there other untyped run-time issues besides running out of memory?</p>



<a name="304966154"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304966154" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304966154">(Oct 19 2022 at 14:20)</a>:</h4>
<p>I wonder if we should have a <code>CheckedNum a</code> type or something similar that removes default math operators. Forces the user to directly call <code>addWrap</code>, <code>addChecked</code> or <code>addSaturated</code>. That at least would give a very clear opt into safety. Of course this could easily be a userland library, though slightly less convenient as such.</p>



<a name="304966388"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304966388" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304966388">(Oct 19 2022 at 14:21)</a>:</h4>
<p>Other cases for panic: division and modulus by zero, i think. Maybe some float related stuff, but I'm not sure in the end what all has been setup with floats. That said, we default to a decimal fixed point that won't hit as many issues as floats</p>



<a name="304967387"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304967387" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304967387">(Oct 19 2022 at 14:26)</a>:</h4>
<p>From a community perspective, the more alternatives you make the less clear intents and code become. Today is checked math, tomorrow is an alternative formatter, two months from now is a “legacy-something” compiler flag, and so on</p>



<a name="304967510"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304967510" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304967510">(Oct 19 2022 at 14:27)</a>:</h4>
<p>That’s why I was expecting checked math by default, but that could be seen as too rigid from a practical perspective</p>



<a name="304967654"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304967654" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304967654">(Oct 19 2022 at 14:27)</a>:</h4>
<p>(Checked math or at least checked math for sub wide number types like i8 and similar)</p>



<a name="304967955"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304967955" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304967955">(Oct 19 2022 at 14:28)</a>:</h4>
<p>We originally had some checked math by default. Like with division by zero. In most cases, is was just an inconvenience and user would end up writing: <code>Result.withDefault (a / b) 0  # b should never be zero</code>. It just appears all over certain code.</p>



<a name="304968460"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304968460" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304968460">(Oct 19 2022 at 14:31)</a>:</h4>
<blockquote>
<p>(Checked math or at least checked math for sub wide number types like i8 and similar)</p>
</blockquote>
<p>I feel like that would be very confusing to users. Specifically because it would be inconsistent based on the type. Also, You wouldn't be able to use <code>Num a</code> anymore. It would need to do different things based on the version of <code>Num a</code>. So you would still need something like <code>SubWideNum a</code> and <code>WideNum a</code> to support something like that.</p>



<a name="304969113"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304969113" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304969113">(Oct 19 2022 at 14:34)</a>:</h4>
<blockquote>
<p>We originally had some checked math by default. Like with division by zero. In most cases, is was just an inconvenience and user would end up writing:</p>
</blockquote>
<p>Yeah, I don't think we could call roc beginner-friendly if we decided to do that.</p>



<a name="304969165"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304969165" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304969165">(Oct 19 2022 at 14:34)</a>:</h4>
<p>Yeah it's suboptimal whatever way you choose I guess. Picking the "right" suboptimal for is not easy task, but I'm interested in following what would end up being the "common way of doing things".</p>



<a name="304970181"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304970181" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304970181">(Oct 19 2022 at 14:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/231634-beginners/topic/Numbers.20friendly.20usage/near/304967955">said</a>:</p>
<blockquote>
<p>We originally had some checked math by default. Like with division by zero. In most cases, is was just an inconvenience and user would end up writing: <code>Result.withDefault (a / b) 0  # b should never be zero</code>. It just appears all over certain code.</p>
</blockquote>
<p>From my personal perspective, this is the most "correct" way of doing such things. As in any other domain where things can fail, here you have it described in the type system for you to help reason about what you're doing. The number of times you encounter that doesn't matter. Moreover, the "beginner-friendliness" of this approach I guess is debatable. Cause nowadays more and more people are thinking about their programs in a more safe and typed way. I'm no saying everyone is expecting checked divisions, but it's not as strange as it was 10 years ago. Being an "early" adopter of "everything checked" by default sounds great to me. But that's purely personal</p>



<a name="304970436"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304970436" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304970436">(Oct 19 2022 at 14:40)</a>:</h4>
<p>The issue is that you end up opting into a garbage value. That is not safe, but that is the default of what most people would write.</p>



<a name="304970512"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304970512" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304970512">(Oct 19 2022 at 14:41)</a>:</h4>
<p>So it was safer to panic unless someone truly wants to handle the check</p>



<a name="304970603"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304970603" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304970603">(Oct 19 2022 at 14:41)</a>:</h4>
<p>But yeah, I can see the tradeoff. I think it just makes numerics pretty impractical to use, but that is just an opinion</p>



<a name="304974067"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304974067" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304974067">(Oct 19 2022 at 14:58)</a>:</h4>
<p>I am scanning the code trying to collect possible panics (we should make a doc with a list somewhere if it doesn't already exist):</p>
<ul>
<li>Integer over/underflow (including this can be trigger by negating/absolute value, but only on the most negative number)</li>
<li>Integer division by 0 (should be a panic but currently isn't? filed <a href="https://github.com/roc-lang/roc/issues/4363">#4363</a>)</li>
<li>Integer remainder/modulus by 0</li>
<li>Dec (our fixed point decimal) overflowing</li>
<li>Dec division by 0</li>
<li>RuntimeError: Roc lets you run a program that doesn't fully compile if you explicitly use <code>roc run</code>. Your code would then hit a runtime error if it runs part of the code with a bug. For example a <code>when</code> statement that does not match on all possibilities.</li>
</ul>
<p>I think that is a correct list, but I easily could have missed something. So really just numerics.</p>



<a name="304974385"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304974385" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304974385">(Oct 19 2022 at 14:59)</a>:</h4>
<p>Yeah I got your point and I agree with the impractical usage. If the list is limited as you're saying I guess it's a no brainer and it's good as it is, the tradeoff is more than acceptable</p>



<a name="304974572"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304974572" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304974572">(Oct 19 2022 at 15:00)</a>:</h4>
<p>Still, for math operations the alternative checked functions are there right?</p>



<a name="304974737"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304974737" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304974737">(Oct 19 2022 at 15:01)</a>:</h4>
<p>Yep</p>



<a name="304974781"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304974781" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304974781">(Oct 19 2022 at 15:01)</a>:</h4>
<p>all math functions that could panic have alternatives</p>



<a name="304974837"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304974837" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304974837">(Oct 19 2022 at 15:01)</a>:</h4>
<ul>
<li>Dec might not yet, but it should be added if it doesn't exist</li>
</ul>



<a name="304975242"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304975242" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304975242">(Oct 19 2022 at 15:03)</a>:</h4>
<p>So I guess "all checked math functions" label on packages is the new "no unsafe" of Rust libraries then :D</p>



<a name="304975877"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304975877" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304975877">(Oct 19 2022 at 15:06)</a>:</h4>
<p>Haha, I guess. This is definitely something to re-evaluate as Roc grows. Hard to say what the right option is.</p>
<p>For example, it may be that libraries should be forced to use checked math, but applications can use panicking math. I think it is much more common in applications to just ignore cases you don't expect to happen. Helps quickly develop and iterate. With libraries, maybe we want more guarantees in general.</p>
<p>The mix of high and low level use cases is always a balance in Roc.</p>



<a name="304993310"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304993310" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Stewart <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304993310">(Oct 19 2022 at 16:27)</a>:</h4>
<p>What if instead of <code>Result.withDefault (a / b) 0</code> you'd instead write something like</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">lotsOfMath</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">UnsafeNum</span><span class="w"> </span><span class="kt">I64</span><span class="w"></span>
<span class="nv">lotsOfMath</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nf">/</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="nf">*</span><span class="w"> </span><span class="nv">c</span><span class="w"></span>

<span class="nv">match</span><span class="w"> </span><span class="nv">lotsOfMath</span><span class="w"> </span><span class="nv">with</span><span class="w"></span>
<span class="w">    </span><span class="kt">Ok</span><span class="w"> </span><span class="nv">ok</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="err">&amp;</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="nv">ok</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kt">Err</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">data</span><span class="w"></span>
</code></pre></div>
<p>In other words, we are doing math as if it was a transaction that we then check at the end to see if it worked out (and we can't forget to check because the data structure we are assigning it to has Num I64, not UnsafeNum I64)</p>



<a name="304993704"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304993704" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304993704">(Oct 19 2022 at 16:29)</a>:</h4>
<p>Interesting :)</p>



<a name="304996485"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304996485" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304996485">(Oct 19 2022 at 16:40)</a>:</h4>
<p>Which is basically leveraging chainable computations capabilities of mathematical functions in an upper level “Expression : Result Num *”</p>



<a name="304996885"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304996885" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304996885">(Oct 19 2022 at 16:42)</a>:</h4>
<p>That would be like chaining tasks or results, so going from values to expressions, staying there as much as you can then come back to either a value or an error</p>



<a name="304997001"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304997001" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304997001">(Oct 19 2022 at 16:43)</a>:</h4>
<p>But it has the same drawbacks as checked operations when you only have to do small math operations in different parts of your code</p>



<a name="304997057"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304997057" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304997057">(Oct 19 2022 at 16:43)</a>:</h4>
<p>A lot of unwrapping (and potentially wrapping)</p>



<a name="304997130"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/304997130" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristian Notari <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#304997130">(Oct 19 2022 at 16:44)</a>:</h4>
<p>Which I’m all for, btw 😅</p>



<a name="305003728"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/305003728" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#305003728">(Oct 19 2022 at 17:18)</a>:</h4>
<p>That is a much more usable idea. Does cost in storage space though (every number type will take up 2x the space in a List). Also, without a smart compiler to skip operations could spend a lot of time just passing around an error result.</p>
<p>Also would be less efficient performance wise, but only minorly so.</p>



<a name="305003820"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/305003820" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#305003820">(Oct 19 2022 at 17:19)</a>:</h4>
<p>We actually discussed doing something similar for floats at one point. Though in that case the discussion was floats are for speed to not have issues with NaN and etc, just use Dec.</p>



<a name="305003851"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Numbers%20friendly%20usage/near/305003851" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Numbers.20friendly.20usage.html#305003851">(Oct 19 2022 at 17:19)</a>:</h4>
<p>So different context for sure.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>