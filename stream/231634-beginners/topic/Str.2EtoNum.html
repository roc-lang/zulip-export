<html>
<head><meta charset="utf-8"><title>Str.toNum · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html">Str.toNum</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="263273965"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263273965" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263273965">(Dec 01 2021 at 11:06)</a>:</h4>
<p>I'll see what I can do to help <span class="user-mention" data-user-id="455616">@Martin Janiczek</span></p>



<a name="263278015"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263278015" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263278015">(Dec 01 2021 at 11:49)</a>:</h4>
<p>I'll get started on implementing <code>toU8</code> and work my way through all the Num types. Once that's done, I can use them all for <code>toNum</code>.</p>



<a name="263278197"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263278197" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263278197">(Dec 01 2021 at 11:51)</a>:</h4>
<p>it's easier to make a <code>toNum</code> builtin I think</p>



<a name="263278216"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263278216" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263278216">(Dec 01 2021 at 11:51)</a>:</h4>
<p>then <code>toU8</code> can just be a specialized version of that</p>



<a name="263278284"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263278284" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263278284">(Dec 01 2021 at 11:52)</a>:</h4>
<p>I can make some zig foundations for that too</p>



<a name="263278544"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263278544" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Janiczek <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263278544">(Dec 01 2021 at 11:55)</a>:</h4>
<p>Don't feel pressured <span class="user-mention" data-user-id="361169">@Anton</span> , thanks for the willingness to help :)</p>



<a name="263279593"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263279593" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263279593">(Dec 01 2021 at 12:06)</a>:</h4>
<p><span class="user-mention" data-user-id="455616">@Martin Janiczek</span> it's cool, I am happy to do it!</p>



<a name="263296501"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263296501" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263296501">(Dec 01 2021 at 14:17)</a>:</h4>
<p>This might be a hard first builtin <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="263297041"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263297041" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263297041">(Dec 01 2021 at 14:21)</a>:</h4>
<p>I mostly got the backend part I think</p>



<a name="263297136"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263297136" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263297136">(Dec 01 2021 at 14:22)</a>:</h4>
<p>an open question is what the errors should be. Zig gives some info but we probably don't want to just follow that</p>



<a name="263297228"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263297228" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263297228">(Dec 01 2021 at 14:22)</a>:</h4>
<p>with backend I mean the lowlevel</p>



<a name="263297328"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263297328" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263297328">(Dec 01 2021 at 14:23)</a>:</h4>
<p>in fact, I can push my current state which kinda should be good enough for integers, and you can work from there @Anton ?</p>



<a name="263298907"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263298907" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263298907">(Dec 01 2021 at 14:33)</a>:</h4>
<p>Pushed my work to the <code>str-to-num</code> branch</p>



<a name="263299092"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263299092" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263299092">(Dec 01 2021 at 14:35)</a>:</h4>
<p>it should have working code for the integers, floats should follow from that straightforwardly, decimal I didn't really look at yet</p>



<a name="263299145"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263299145" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263299145">(Dec 01 2021 at 14:35)</a>:</h4>
<p>and I guess for now we can make the type <code>Str -&gt; Result (Num *) {}</code>?</p>



<a name="263306287"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263306287" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263306287">(Dec 01 2021 at 15:20)</a>:</h4>
<p>Awesome, thanks <span class="user-mention" data-user-id="281543">@Folkert de Vries</span> I'll check it out</p>



<a name="263319939"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263319939" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263319939">(Dec 01 2021 at 16:48)</a>:</h4>
<p>I think a type of <code>Str -&gt; Result (Num *) [ InvalidStr ]*</code> would be best</p>



<a name="263320007"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263320007" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263320007">(Dec 01 2021 at 16:48)</a>:</h4>
<p>the wording on the error type for this one is a tricky because (for example) if <code>Num *</code> becomes <code>I8</code> then a string of <code>"1.1"</code> becomes an invalid input, and an error type of <code>InvalidNum</code> might look weird there ("huh? 1.1 <em>is</em> a valid number!")</p>



<a name="263320152"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263320152" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263320152">(Dec 01 2021 at 16:49)</a>:</h4>
<p>and we can't really get more specific than that without making exhaustiveness checks weird - e.g. if it were like <code>[ IntWithDecimalPoint, UnexpectedNonDigits ]*</code> the first one wouldn't be possible if <code>Num *</code> unified to <code>F64</code></p>



<a name="263320411"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263320411" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263320411">(Dec 01 2021 at 16:51)</a>:</h4>
<p>fortunately, in practice I expect it to be extremely rare for anyone to want a more specific error than "it didn't work," so I think we're okay just having one error type <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="263324233"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263324233" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263324233">(Dec 01 2021 at 17:15)</a>:</h4>
<p>maybe,  <code>Str -&gt; Result (Num *) [ NotANumber ]*</code> lol</p>



<a name="263324246"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263324246" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263324246">(Dec 01 2021 at 17:15)</a>:</h4>
<p>I love these tags</p>



<a name="263324334"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263324334" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263324334">(Dec 01 2021 at 17:16)</a>:</h4>
<p>I'm kinda joking, InvalidStr is fine</p>



<a name="263327759"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263327759" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263327759">(Dec 01 2021 at 17:38)</a>:</h4>
<p><code>NaN</code> is totally a valid tag, but of course <code>if num == NaN</code> won't type check if <code>num</code> is actually a number <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="263327878"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263327878" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263327878">(Dec 01 2021 at 17:38)</a>:</h4>
<p><span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> actually I wonder if we'll end up wanting to special-case error messages around the <code>NaN</code> tag in case people actually try to do that!</p>



<a name="263327968"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263327968" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263327968">(Dec 01 2021 at 17:39)</a>:</h4>
<p>example?</p>



<a name="263327994"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263327994" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263327994">(Dec 01 2021 at 17:39)</a>:</h4>
<p>like what kind of error message</p>



<a name="263328145"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263328145" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263328145">(Dec 01 2021 at 17:40)</a>:</h4>
<p>oh just like a hint "In Roc, NaN is not a number type, but rather a tag like Ok, Err, True, False, etc."</p>



<a name="263328274"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263328274" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263328274">(Dec 01 2021 at 17:41)</a>:</h4>
<p>amusingly, <code>== NaN</code> would always return false in languages where NaN is a number, so arguably the type mismatch Roc would give you is actually more helpful than having it "Just Work" <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="263339349"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263339349" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263339349">(Dec 01 2021 at 18:56)</a>:</h4>
<p>How about <code>InvalidNumStr</code>? <code>InvalidStr</code> makes me think I have an improperly decoded String or something.</p>



<a name="263339953"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263339953" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263339953">(Dec 01 2021 at 19:00)</a>:</h4>
<p>The original <code>ExpectedNum a</code> is also pretty good or can't we make builtins with type variables in the errors yet?</p>



<a name="263346689"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263346689" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263346689">(Dec 01 2021 at 19:42)</a>:</h4>
<p><code>InvalidNumStr</code> sounds good! <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="263347122"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263347122" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263347122">(Dec 01 2021 at 19:44)</a>:</h4>
<p>I think we shouldn't actually do the <code>ExpectedNum a</code> thing because it wouldn't work with an Abilities design for numbers</p>



<a name="263355571"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263355571" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263355571">(Dec 01 2021 at 20:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/231634-beginners/topic/Str.2EtoNum/near/263328274">said</a>:</p>
<blockquote>
<p>amusingly, <code>== NaN</code> would always return false in languages where NaN is a number, so arguably the type mismatch Roc would give you is actually more helpful than having it "Just Work" <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>
</blockquote>
<p>I see so this is more for giving a helping hand to people coming from a language like JavaScript for example</p>



<a name="263355604"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263355604" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263355604">(Dec 01 2021 at 20:49)</a>:</h4>
<p>cool idea, that kind of friendliness goes a long way</p>



<a name="263356814"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263356814" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263356814">(Dec 01 2021 at 20:59)</a>:</h4>
<p>Anton passed me the baton on this, I'll see if I can wrap it up within the hr or so</p>



<a name="263359501"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263359501" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263359501">(Dec 01 2021 at 21:22)</a>:</h4>
<p>how do I use a Dec again?</p>



<a name="263359514"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263359514" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263359514">(Dec 01 2021 at 21:23)</a>:</h4>
<p>I have to force it in the type signature right?</p>



<a name="263359583"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263359583" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263359583">(Dec 01 2021 at 21:23)</a>:</h4>
<p>yes</p>



<a name="263359653"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263359653" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263359653">(Dec 01 2021 at 21:24)</a>:</h4>
<p>ok, I almost have this done, I'm just running into an issue with the bitcode functions atm</p>



<a name="263359667"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263359667" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263359667">(Dec 01 2021 at 21:24)</a>:</h4>
<p><code>'Unrecognized builtin function: "roc_builtins.str.to_int.i64"</code></p>



<a name="263360587"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263360587" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263360587">(Dec 01 2021 at 21:33)</a>:</h4>
<p>I see the issue</p>



<a name="263361206"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263361206" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263361206">(Dec 01 2021 at 21:38)</a>:</h4>
<p>you know Anton was working on this too?</p>



<a name="263361547"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263361547" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263361547">(Dec 01 2021 at 21:41)</a>:</h4>
<p>He told me to take over and that he'll pick up where I left off tomorrow</p>



<a name="263361719"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263361719" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263361719">(Dec 01 2021 at 21:42)</a>:</h4>
<p>I'm using his branch</p>



<a name="263361807"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263361807" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263361807">(Dec 01 2021 at 21:43)</a>:</h4>
<p><code>thread 'main' panicked at 'Found StructValue(StructValue { struct_value: Value { name: "call_builtin", address: 0x600001773e20, is_const: false, is_null: false, is_undef: false, llvm_value: "  %call_builtin = call %\"num.NumParseResult(i64)\" @roc_builtins.str.to_int.i64(%str.RocStr %\"#arg1\"), !dbg !488", llvm_type: "%\"num.NumParseResult(i64)\" = type { i8, i64 }" } }) but expected PointerValue variant', /Users/rvcas/.cargo/git/checkouts/inkwell-85610d8ccb0c28f9/14b78d9/src/values/enums.rs:285:13</code></p>



<a name="263361890"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263361890" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263361890">(Dec 01 2021 at 21:44)</a>:</h4>
<p>I kinda have no clue what that means tbh</p>



<a name="263361948"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263361948" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263361948">(Dec 01 2021 at 21:44)</a>:</h4>
<p>set <code>RUST_BACKTRACE=1</code> to figure out where that cast was called</p>



<a name="263361972"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263361972" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263361972">(Dec 01 2021 at 21:44)</a>:</h4>
<p>oh right</p>



<a name="263362073"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263362073" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263362073">(Dec 01 2021 at 21:45)</a>:</h4>
<p><a href="/user_uploads/22008/z3IZme8Rk9eAN2u0v9mIobc9/Screen-Shot-2021-12-01-at-4.45.33-PM.png">Screen-Shot-2021-12-01-at-4.45.33-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/z3IZme8Rk9eAN2u0v9mIobc9/Screen-Shot-2021-12-01-at-4.45.33-PM.png" title="Screen-Shot-2021-12-01-at-4.45.33-PM.png"><img src="/user_uploads/22008/z3IZme8Rk9eAN2u0v9mIobc9/Screen-Shot-2021-12-01-at-4.45.33-PM.png"></a></div>



<a name="263362143"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263362143" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263362143">(Dec 01 2021 at 21:46)</a>:</h4>
<p>yo this M1 is so fast, I have zero fear of a full rebuild takes me max 48s lmao</p>



<a name="263362657"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263362657" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263362657">(Dec 01 2021 at 21:50)</a>:</h4>
<p>seems to be related to how things are returned from zig</p>



<a name="263362969"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263362969" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263362969">(Dec 01 2021 at 21:52)</a>:</h4>
<p>I probably need to look at fromUtf8C</p>



<a name="263363147"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263363147" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263363147">(Dec 01 2021 at 21:54)</a>:</h4>
<p>ok I know what to do, just a sec</p>



<a name="263363159"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263363159" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263363159">(Dec 01 2021 at 21:54)</a>:</h4>
<p>hmm for decimal it may be that zig returns via a pointer</p>



<a name="263363180"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263363180" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263363180">(Dec 01 2021 at 21:54)</a>:</h4>
<p>because the <code>{ errcode, value }</code> struct is bigger than an i128</p>



<a name="263364657"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263364657" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263364657">(Dec 01 2021 at 22:07)</a>:</h4>
<p>oh sorry, Int doesn't work yet</p>



<a name="263364679"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263364679" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263364679">(Dec 01 2021 at 22:07)</a>:</h4>
<p>I think I'm stuck, trying to mimic fromUtf8C didn't work :'(</p>



<a name="263364899"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263364899" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263364899">(Dec 01 2021 at 22:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281543">Folkert de Vries</span> <a href="#narrow/stream/231634-beginners/topic/Str.2EtoNum/near/263363159">said</a>:</p>
<blockquote>
<p>hmm for decimal it may be that zig returns via a pointer</p>
</blockquote>
<p>the above output was from running <code>Str.toNum "1"</code></p>



<a name="263366113"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263366113" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263366113">(Dec 01 2021 at 22:20)</a>:</h4>
<p>so where is that invalid cast?</p>



<a name="263366156"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263366156" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263366156">(Dec 01 2021 at 22:21)</a>:</h4>
<p>also when dealing with records, keep in mind that we reorder fields</p>



<a name="263366162"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263366162" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263366162">(Dec 01 2021 at 22:21)</a>:</h4>
<p>and so on the zig side the fields must also be in the right order</p>



<a name="263366286"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263366286" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263366286">(Dec 01 2021 at 22:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281543">Folkert de Vries</span> <a href="#narrow/stream/231634-beginners/topic/Str.2EtoNum/near/263366113">said</a>:</p>
<blockquote>
<p>so where is that invalid cast?</p>
</blockquote>
<p>oh I'm dumb, I should have walked down the stack trace further</p>



<a name="263366299"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263366299" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263366299">(Dec 01 2021 at 22:22)</a>:</h4>
<p>let me do that again</p>



<a name="263366426"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263366426" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263366426">(Dec 01 2021 at 22:23)</a>:</h4>
<p>it's hard to tell to be honest, I just ran the stack trace again</p>



<a name="263366664"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263366664" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263366664">(Dec 01 2021 at 22:26)</a>:</h4>
<p>I have everything as is pushed, I didn't bother committing my attempt at mimicking what fromUtf8 does</p>



<a name="263367993"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263367993" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263367993">(Dec 01 2021 at 22:39)</a>:</h4>
<p>found the issue, can't fix it now. The problem is t hat the zig code returns a struct { errcode, value }, but the roc function needs to return a result</p>



<a name="263368002"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263368002" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263368002">(Dec 01 2021 at 22:39)</a>:</h4>
<p>we have some examples of that</p>



<a name="263368041"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263368041" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263368041">(Dec 01 2021 at 22:40)</a>:</h4>
<p><code>num_overflow_checked</code> in can/src/builtins.rs is probably a good example</p>



<a name="263368797"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263368797" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263368797">(Dec 01 2021 at 22:48)</a>:</h4>
<p>ah I see, so my suspicions were correct but I was looking at a bad example. Thanks, I'll see if I can work with that</p>



<a name="263479354"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263479354" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263479354">(Dec 02 2021 at 18:18)</a>:</h4>
<p>I'm about to continue this</p>



<a name="263486024"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263486024" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263486024">(Dec 02 2021 at 19:07)</a>:</h4>
<p><span class="user-mention" data-user-id="281543">@Folkert de Vries</span> I tried your suggestion, I think I've made progress but it's not quite there yet</p>



<a name="263486089"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263486089" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263486089">(Dec 02 2021 at 19:07)</a>:</h4>
<p>I pushed those changes, I use an If Expr to check the returned record's "error code" field for a value greater than zero</p>



<a name="263486127"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263486127" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263486127">(Dec 02 2021 at 19:07)</a>:</h4>
<p>I might be doing something wrong with the vars tho, it's a little hard to tell for me</p>



<a name="263489302"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263489302" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263489302">(Dec 02 2021 at 19:31)</a>:</h4>
<p>got a test working, pushed, see bottom of <code>gen_str.rs</code></p>



<a name="263490425"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263490425" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263490425">(Dec 02 2021 at 19:41)</a>:</h4>
<p>nice</p>



<a name="263490427"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263490427" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263490427">(Dec 02 2021 at 19:41)</a>:</h4>
<p>thanks</p>



<a name="263490903"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263490903" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263490903">(Dec 02 2021 at 19:45)</a>:</h4>
<p>cool, I see your commit, a few subtle but key changes</p>



<a name="263491598"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263491598" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263491598">(Dec 02 2021 at 19:50)</a>:</h4>
<p>I'm going to have to think about how to do Float</p>



<a name="263491617"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263491617" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263491617">(Dec 02 2021 at 19:50)</a>:</h4>
<p><a href="/user_uploads/22008/1bHb4mEgF-4ucb2XY_1ut9Zc/Screen-Shot-2021-12-02-at-2.50.00-PM.png">Screen-Shot-2021-12-02-at-2.50.00-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/1bHb4mEgF-4ucb2XY_1ut9Zc/Screen-Shot-2021-12-02-at-2.50.00-PM.png" title="Screen-Shot-2021-12-02-at-2.50.00-PM.png"><img src="/user_uploads/22008/1bHb4mEgF-4ucb2XY_1ut9Zc/Screen-Shot-2021-12-02-at-2.50.00-PM.png"></a></div>



<a name="263491692"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263491692" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263491692">(Dec 02 2021 at 19:51)</a>:</h4>
<p>that layout makes sense because how would it even know the string contains a float in it before hand</p>



<a name="263491958"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263491958" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263491958">(Dec 02 2021 at 19:53)</a>:</h4>
<p>I'm not sure it would make sense to try the parseFloat if if parseInt fails</p>



<a name="263491977"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263491977" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263491977">(Dec 02 2021 at 19:53)</a>:</h4>
<p>is there a run time cost to that?</p>



<a name="263492348"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263492348" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263492348">(Dec 02 2021 at 19:56)</a>:</h4>
<p>or does it make more sense to have 3 builtins for this instead ?</p>



<a name="263492751"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263492751" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263492751">(Dec 02 2021 at 19:59)</a>:</h4>
<p>float should work in an actual program</p>



<a name="263492939"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263492939" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263492939">(Dec 02 2021 at 20:00)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> thoughts here? I'm not sure there is anything good we can do in this case</p>



<a name="263492961"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263492961" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263492961">(Dec 02 2021 at 20:00)</a>:</h4>
<p>default to float?</p>



<a name="263492993"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263492993" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263492993">(Dec 02 2021 at 20:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281543">Folkert de Vries</span> <a href="#narrow/stream/231634-beginners/topic/Str.2EtoNum/near/263492751">said</a>:</p>
<blockquote>
<p>float should work in an actual program</p>
</blockquote>
<p>I see, cause it can infer it based on usage</p>



<a name="263492994"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263492994" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263492994">(Dec 02 2021 at 20:01)</a>:</h4>
<p>makes sense</p>



<a name="263493028"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263493028" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263493028">(Dec 02 2021 at 20:01)</a>:</h4>
<p>it would be nice for it to just work in the repl though</p>



<a name="263493071"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263493071" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263493071">(Dec 02 2021 at 20:01)</a>:</h4>
<p>but how could it?</p>



<a name="263493719"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263493719" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263493719">(Dec 02 2021 at 20:06)</a>:</h4>
<p>I know, that's the question :'(</p>



<a name="263493825"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263493825" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263493825">(Dec 02 2021 at 20:07)</a>:</h4>
<div class="codehilite"><pre><span></span><code>x = Str.toNum &quot;1.0&quot;

x + 2.0
</code></pre></div>



<a name="263493850"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263493850" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263493850">(Dec 02 2021 at 20:07)</a>:</h4>
<p>this should work tho like you said</p>



<a name="263494029"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263494029" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263494029">(Dec 02 2021 at 20:09)</a>:</h4>
<p>modulo error handling</p>



<a name="263494033"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263494033" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263494033">(Dec 02 2021 at 20:09)</a>:</h4>
<p>yes</p>



<a name="263494149"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263494149" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263494149">(Dec 02 2021 at 20:10)</a>:</h4>
<p>right right lol</p>



<a name="263494200"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263494200" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263494200">(Dec 02 2021 at 20:10)</a>:</h4>
<p>I can add a test case for that at least</p>



<a name="263494666"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263494666" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263494666">(Dec 02 2021 at 20:15)</a>:</h4>
<p>ok that passes now</p>



<a name="263495245"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263495245" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263495245">(Dec 02 2021 at 20:20)</a>:</h4>
<p>should we bother supporting dec right now? or should we take the WIP prefix off the PR</p>



<a name="263495366"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263495366" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263495366">(Dec 02 2021 at 20:21)</a>:</h4>
<p>dec has a fromstr already, so might as well implement that one?</p>



<a name="263495392"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263495392" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263495392">(Dec 02 2021 at 20:21)</a>:</h4>
<p>oh right</p>



<a name="263495421"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263495421" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263495421">(Dec 02 2021 at 20:21)</a>:</h4>
<p>I just need to switch the function that gets called in the <a href="http://build.rs">build.rs</a> match case then</p>



<a name="263495483"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263495483" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263495483">(Dec 02 2021 at 20:22)</a>:</h4>
<p>I have a failing test case written already so I'll go ahead and try to make it pass</p>



<a name="263497067"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263497067" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263497067">(Dec 02 2021 at 20:35)</a>:</h4>
<p>ok almost there: <code>'LLVM error: Did not get return value from bitcode function "roc_builtins.dec.from_str"'</code></p>



<a name="263497081"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263497081" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263497081">(Dec 02 2021 at 20:36)</a>:</h4>
<p>pushed the changes as well</p>



<a name="263497130"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263497130" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263497130">(Dec 02 2021 at 20:36)</a>:</h4>
<div class="codehilite" data-code-language="Zig"><pre><span></span><code><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">fromStr</span><span class="p">(</span><span class="n">arg</span><span class="o">:</span><span class="w"> </span><span class="n">RocStr</span><span class="p">)</span><span class="w"> </span><span class="n">callconv</span><span class="p">(.</span><span class="n">C</span><span class="p">)</span><span class="w"> </span><span class="n">num_</span><span class="p">.</span><span class="n">NumParseResult</span><span class="p">(</span><span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">@call</span><span class="p">(.{</span><span class="w"> </span><span class="p">.</span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">always_inline</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">RocDec</span><span class="p">.</span><span class="n">fromStr</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="n">arg</span><span class="p">}))</span><span class="w"> </span><span class="o">|</span><span class="n">dec</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">.{</span><span class="w"> </span><span class="p">.</span><span class="n">errorcode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dec</span><span class="p">.</span><span class="n">num</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">.{</span><span class="w"> </span><span class="p">.</span><span class="n">errorcode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="263498201"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263498201" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263498201">(Dec 02 2021 at 20:47)</a>:</h4>
<p>not exactly sure what I'm missing here</p>



<a name="263499459"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263499459" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263499459">(Dec 02 2021 at 20:58)</a>:</h4>
<p>look at the LLVM IR,</p>



<a name="263500733"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263500733" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263500733">(Dec 02 2021 at 21:09)</a>:</h4>
<p>how do I dump that from the test?</p>



<a name="263500760"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263500760" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263500760">(Dec 02 2021 at 21:09)</a>:</h4>
<p>is there a print statement somewhere I can uncomment or add?</p>



<a name="263501003"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263501003" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263501003">(Dec 02 2021 at 21:11)</a>:</h4>
<p>yes, in <code>compiler/test_gen/src/helpers/llvm.rs</code></p>



<a name="263501054"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263501054" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263501054">(Dec 02 2021 at 21:12)</a>:</h4>
<p>line 242 I think</p>



<a name="263501144"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263501144" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263501144">(Dec 02 2021 at 21:13)</a>:</h4>
<p>right ok, that's what I thought, I'm going to take a break and come back to this in a bit</p>



<a name="263506137"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506137" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506137">(Dec 02 2021 at 22:01)</a>:</h4>
<p>so I think this edge case means it can't be <code>Num.fromStr</code> and instead the Roc API needs to be like <code>Str.toU8</code>, <code>Str.toF64</code>, etc. <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="263506181"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506181" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506181">(Dec 02 2021 at 22:02)</a>:</h4>
<p>because other things depend on any <code>Num *</code> value being an integer</p>



<a name="263506211"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506211" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506211">(Dec 02 2021 at 22:02)</a>:</h4>
<p>and if we do <code>Num.fromStr "1.1"</code> and that fails because it was expecting an int, that's super confusing</p>



<a name="263506282"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506282" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506282">(Dec 02 2021 at 22:03)</a>:</h4>
<p>whereas <code>Str.toF64 "1.1"</code> will obviously succeed, and <code>Str.toI64 "1.1"</code> will obviously fail</p>



<a name="263506330"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506330" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506330">(Dec 02 2021 at 22:03)</a>:</h4>
<p>right</p>



<a name="263506337"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506337" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506337">(Dec 02 2021 at 22:03)</a>:</h4>
<p><code>Str.toI64 "1.0"</code> is a little less clear, but I think either design is fine; we could either allow it because it's an integer or give an error because it' has a decimal point</p>



<a name="263506420"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506420" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506420">(Dec 02 2021 at 22:04)</a>:</h4>
<p>What if we had the tag be an argument?</p>



<a name="263506472"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506472" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506472">(Dec 02 2021 at 22:04)</a>:</h4>
<p>Str.toNum “1.0” F64</p>



<a name="263506521"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506521" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506521">(Dec 02 2021 at 22:05)</a>:</h4>
<p><span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span>  what would the type of that function be?</p>



<a name="263506538"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506538" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506538">(Dec 02 2021 at 22:05)</a>:</h4>
<p>oh</p>



<a name="263506577"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506577" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506577">(Dec 02 2021 at 22:05)</a>:</h4>
<p>A tag union could be the signature for the second arg?</p>



<a name="263506634"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506634" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506634">(Dec 02 2021 at 22:06)</a>:</h4>
<p>I mean what's the type of that <code>Str.toNum</code> function?</p>



<a name="263506640"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506640" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506640">(Dec 02 2021 at 22:06)</a>:</h4>
<p>And we fill it in with all available num types?</p>



<a name="263506650"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506650" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506650">(Dec 02 2021 at 22:06)</a>:</h4>
<p>(like what's the return type specifically)</p>



<a name="263506693"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506693" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506693">(Dec 02 2021 at 22:06)</a>:</h4>
<p>Hm right</p>



<a name="263506703"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506703" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506703">(Dec 02 2021 at 22:06)</a>:</h4>
<p>e.g. <code>Str.toI64 : Str -&gt; Result I64 [ InvalidI64Str ]*</code> - we know it gives an I64</p>



<a name="263506705"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506705" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506705">(Dec 02 2021 at 22:06)</a>:</h4>
<p>but yeah</p>



<a name="263506717"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506717" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506717">(Dec 02 2021 at 22:07)</a>:</h4>
<p>could it still not be Num?</p>



<a name="263506724"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506724" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506724">(Dec 02 2021 at 22:07)</a>:</h4>
<p>I think if we try to have a more flexible function than that, we end up returning <code>Num *</code></p>



<a name="263506744"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506744" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506744">(Dec 02 2021 at 22:07)</a>:</h4>
<p>which has the edge case problem</p>



<a name="263506784"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506784" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506784">(Dec 02 2021 at 22:07)</a>:</h4>
<p>like we could try to do <code>Num.toStr : Str, a -&gt; Result (Num a) [ InvalidNumStr ]*</code></p>



<a name="263506785"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506785" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506785">(Dec 02 2021 at 22:07)</a>:</h4>
<p>The return type isn’t exactly the issue it’s not knowing the type within the string for the layout without some usage for inference</p>



<a name="263506796"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506796" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506796">(Dec 02 2021 at 22:07)</a>:</h4>
<p>unless I misunderstood the question</p>



<a name="263506814"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506814" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506814">(Dec 02 2021 at 22:08)</a>:</h4>
<p>but now you can actually pass an <code>a</code> value, which we don't want because that's supposed to be a phantom type in <code>Num</code> so there's no runtime overhead</p>



<a name="263506871"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506871" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506871">(Dec 02 2021 at 22:08)</a>:</h4>
<p>oh I see</p>



<a name="263506925"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506925" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506925">(Dec 02 2021 at 22:08)</a>:</h4>
<p>yea so it works fine with usage allowing F64 to be inferred and then it hits the correct branch</p>



<a name="263506969"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263506969" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263506969">(Dec 02 2021 at 22:09)</a>:</h4>
<p>but just stand alone in the repl it defaults to Int I64</p>



<a name="263507005"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507005" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507005">(Dec 02 2021 at 22:09)</a>:</h4>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nv">x = </span><span class="nx">Str</span><span class="p">.</span><span class="nx">toNum</span> <span class="s">"1.1"</span> <span class="nx">F64</span> <span class="o">|&gt;</span> <span class="nx">Result</span><span class="p">.</span><span class="nx">withDefault</span> <span class="mi">0</span>

<span class="nx">x</span> <span class="o">+</span> <span class="mi">999999999999</span>
</code></pre></div>



<a name="263507020"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507020" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507020">(Dec 02 2021 at 22:09)</a>:</h4>
<p>so there we're saying "hey parse this as an F64" but its return type is still <code>Num *</code></p>



<a name="263507031"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507031" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507031">(Dec 02 2021 at 22:09)</a>:</h4>
<p>yea</p>



<a name="263507105"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507105" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507105">(Dec 02 2021 at 22:10)</a>:</h4>
<p>Then I can match on the layout of ARG_2</p>



<a name="263507110"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507110" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507110">(Dec 02 2021 at 22:10)</a>:</h4>
<p>so when we add it to 9999999999, all the <code>Num.add</code> is going to know is that it's a <code>Num *</code> + <code>Num *</code></p>



<a name="263507123"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507123" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507123">(Dec 02 2021 at 22:10)</a>:</h4>
<p>yep</p>



<a name="263507131"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507131" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507131">(Dec 02 2021 at 22:10)</a>:</h4>
<p>that info won't make it to <code>Num.add</code></p>



<a name="263507142"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507142" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507142">(Dec 02 2021 at 22:10)</a>:</h4>
<p>dam</p>



<a name="263507148"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507148" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507148">(Dec 02 2021 at 22:10)</a>:</h4>
<p>lol</p>



<a name="263507211"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507211" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507211">(Dec 02 2021 at 22:11)</a>:</h4>
<p>I guess separate functions makes the most sense? But realistically it’ll be fine as is in a real program</p>



<a name="263507235"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507235" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507235">(Dec 02 2021 at 22:11)</a>:</h4>
<p>yeah I think separate functions is the way to go</p>



<a name="263507256"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507256" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507256">(Dec 02 2021 at 22:11)</a>:</h4>
<p>but we can probably get some good code reuse behind the scenes</p>



<a name="263507257"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507257" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507257">(Dec 02 2021 at 22:11)</a>:</h4>
<p>Str.toInt and Str.toFloat then</p>



<a name="263507316"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507316" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507316">(Dec 02 2021 at 22:12)</a>:</h4>
<p>the reverse doesn’t have that problem of course</p>



<a name="263507330"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507330" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507330">(Dec 02 2021 at 22:12)</a>:</h4>
<p>Num.toStr works fine</p>



<a name="263507352"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507352" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507352">(Dec 02 2021 at 22:12)</a>:</h4>
<p>This probably explains why most systems langs have different functions for that</p>



<a name="263507393"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507393" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507393">(Dec 02 2021 at 22:13)</a>:</h4>
<p>agreed! <span aria-label="100" class="emoji emoji-1f4af" role="img" title="100">:100:</span></p>



<a name="263507401"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507401" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507401">(Dec 02 2021 at 22:13)</a>:</h4>
<p>Also Str.toDec of course</p>



<a name="263507410"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507410" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507410">(Dec 02 2021 at 22:13)</a>:</h4>
<p>I’ll adjust that today</p>



<a name="263507422"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507422" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507422">(Dec 02 2021 at 22:13)</a>:</h4>
<p>I think <code>Str.toNum</code> still works right?</p>



<a name="263507428"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507428" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507428">(Dec 02 2021 at 22:13)</a>:</h4>
<p>oops</p>



<a name="263507445"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507445" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507445">(Dec 02 2021 at 22:13)</a>:</h4>
<p>I know it’s been confusing me too</p>



<a name="263507448"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507448" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507448">(Dec 02 2021 at 22:13)</a>:</h4>
<p>I mean <code>Num.toStr</code> still works</p>



<a name="263507497"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507497" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507497">(Dec 02 2021 at 22:14)</a>:</h4>
<p>100%</p>



<a name="263507500"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507500" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507500">(Dec 02 2021 at 22:14)</a>:</h4>
<p>one thing we could do is use the word <code>parse</code></p>



<a name="263507507"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507507" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507507">(Dec 02 2021 at 22:14)</a>:</h4>
<p>yea</p>



<a name="263507569"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507569" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507569">(Dec 02 2021 at 22:15)</a>:</h4>
<p>Num.toStr takes Num * as the arg so we concretely know the layout before hand</p>



<a name="263507593"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507593" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507593">(Dec 02 2021 at 22:15)</a>:</h4>
<p>like <code>Num.parseI64</code> or <code>Str.parseI64</code> or something</p>



<a name="263507705"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507705" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507705">(Dec 02 2021 at 22:16)</a>:</h4>
<p>parse is cool, although I like the consistency with toStr</p>



<a name="263507744"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507744" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507744">(Dec 02 2021 at 22:16)</a>:</h4>
<p>Do we want I64 etc. or all Int *?</p>



<a name="263507762"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507762" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507762">(Dec 02 2021 at 22:16)</a>:</h4>
<p>So parseInt?</p>



<a name="263507802"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507802" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507802">(Dec 02 2021 at 22:17)</a>:</h4>
<p>oh that's interesting</p>



<a name="263507904"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507904" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507904">(Dec 02 2021 at 22:18)</a>:</h4>
<p>Oh actually you’re right</p>



<a name="263507918"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507918" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507918">(Dec 02 2021 at 22:18)</a>:</h4>
<p>It has to be per type</p>



<a name="263507936"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507936" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507936">(Dec 02 2021 at 22:18)</a>:</h4>
<p>so <code>Int</code> is probably fine, but if we did a <code>parseFrac</code> then it might need to be different between float vs dec because of <code>NaN</code>, <code>Infinity</code>, and <code>-Infinity</code></p>



<a name="263507939"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507939" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507939">(Dec 02 2021 at 22:19)</a>:</h4>
<p>Cause again it defaults to I64</p>



<a name="263507969"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507969" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507969">(Dec 02 2021 at 22:19)</a>:</h4>
<p>oh yeah that's another point</p>



<a name="263507980"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263507980" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263507980">(Dec 02 2021 at 22:19)</a>:</h4>
<p><span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="263508007"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263508007" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263508007">(Dec 02 2021 at 22:19)</a>:</h4>
<p>Ima sit down to eat brb</p>



<a name="263508056"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263508056" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263508056">(Dec 02 2021 at 22:20)</a>:</h4>
<p>yeah like what if you do <code>parseInt</code> on a number that's too big for I64, but it would have fit in I128?</p>



<a name="263509023"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263509023" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263509023">(Dec 02 2021 at 22:30)</a>:</h4>
<p>yea you right or even like if you want an I32 but it defaults to I64</p>



<a name="263570285"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263570285" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263570285">(Dec 03 2021 at 12:12)</a>:</h4>
<p>If I'm following this correctly these are issues that arise only in the REPL because you don't have the full program to do type inference.<br>
Could we say that the REPL input <em>must</em> have type annotations in certain cases? Do these issues go away then? Or is it too hard to make good error messages for that?</p>



<a name="263570586"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263570586" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263570586">(Dec 03 2021 at 12:15)</a>:</h4>
<p>Like maybe in REPL mode it's an error to define a value whose type we can't resolve. You have to annotate it? Maybe that's too annoying, just an idea.</p>



<a name="263572765"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263572765" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263572765">(Dec 03 2021 at 12:34)</a>:</h4>
<p>there is not really a good place for them to go</p>



<a name="263572949"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263572949" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263572949">(Dec 03 2021 at 12:35)</a>:</h4>
<p>haskell has type applications for this sort of thing, so you can say <code>identity @Word32 42</code> and that would provide all the required type info</p>



<a name="263580575"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263580575" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263580575">(Dec 03 2021 at 13:39)</a>:</h4>
<blockquote>
<p>these are issues that arise only in the REPL because you don't have the full program to do type inference.</p>
</blockquote>
<p>they can happen even in a full program, e.g.</p>
<div class="codehilite"><pre><span></span><code>x = 5

if x - 1 &gt; 0 then
</code></pre></div>
<p>should the branch get taken? In order to decide that, we need to evaluate <code>x - 1</code> where both <code>x</code> and <code>1</code> have the type <code>Num *</code></p>



<a name="263580735"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263580735" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263580735">(Dec 03 2021 at 13:40)</a>:</h4>
<p>so in general I consider it valuable for Roc to maintain the invariant that you never need to add a type annotation to anything for any reason</p>



<a name="263580772"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263580772" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263580772">(Dec 03 2021 at 13:40)</a>:</h4>
<p>among other things, this means that the editor feature of "highlight this to find out its type" works 100% of the time</p>



<a name="263580888"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263580888" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263580888">(Dec 03 2021 at 13:41)</a>:</h4>
<p>I'd be very hesitant to give that up, especially when the <code>parseI64</code> design is very simple and doesn't have this problem <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="263593510"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263593510" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263593510">(Dec 03 2021 at 15:15)</a>:</h4>
<p>Yea it’s just a bunch of copy and paste work tbh, it’ll be fine</p>



<a name="263593534"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263593534" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263593534">(Dec 03 2021 at 15:15)</a>:</h4>
<p>did we settle on parse or to as the prefix?</p>



<a name="263593566"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263593566" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263593566">(Dec 03 2021 at 15:15)</a>:</h4>
<p>parseI64 or toI64</p>



<a name="263593954"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263593954" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263593954">(Dec 03 2021 at 15:18)</a>:</h4>
<p><code>toI64</code> seems better in every way :p</p>



<a name="263594224"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263594224" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263594224">(Dec 03 2021 at 15:20)</a>:</h4>
<p>I like that it’s consistent with Num.toStr</p>



<a name="263594703"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263594703" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263594703">(Dec 03 2021 at 15:24)</a>:</h4>
<p>yeah let's try <code>Str.toI64</code> and see if people get confused in practice; can always try the longer <code>parse</code> if so!</p>



<a name="263597335"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263597335" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263597335">(Dec 03 2021 at 15:44)</a>:</h4>
<p>I’m happy either way</p>



<a name="263604911"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263604911" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263604911">(Dec 03 2021 at 16:39)</a>:</h4>
<p>I’ll carry on a bit later btw, it’s art Basel weekend in Miami right now so stuff is pretty crazy and I have to do some running around</p>



<a name="263604987"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263604987" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263604987">(Dec 03 2021 at 16:40)</a>:</h4>
<p>if anyone else wants they are welcome to continue no need to wait for me</p>



<a name="263632704"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263632704" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263632704">(Dec 03 2021 at 20:22)</a>:</h4>
<p>I’m back home, I’ll pick this back up again in a sec</p>



<a name="263748755"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263748755" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263748755">(Dec 05 2021 at 04:27)</a>:</h4>
<p>I haven’t forgotten about this. My b for not getting it done yesterday</p>



<a name="263748762"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263748762" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263748762">(Dec 05 2021 at 04:27)</a>:</h4>
<p>tomorrow I should be good to go</p>



<a name="263953577"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263953577" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263953577">(Dec 07 2021 at 03:07)</a>:</h4>
<p><a href="/user_uploads/22008/g389H4Z1IC7oYg6A2zFUCfVK/Screen-Shot-2021-12-06-at-10.07.23-PM.png">Screen-Shot-2021-12-06-at-10.07.23-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/g389H4Z1IC7oYg6A2zFUCfVK/Screen-Shot-2021-12-06-at-10.07.23-PM.png" title="Screen-Shot-2021-12-06-at-10.07.23-PM.png"><img src="/user_uploads/22008/g389H4Z1IC7oYg6A2zFUCfVK/Screen-Shot-2021-12-06-at-10.07.23-PM.png"></a></div>



<a name="263953618"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263953618" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263953618">(Dec 07 2021 at 03:08)</a>:</h4>
<p>we're cooking. so I was able to do it with the same low-level for all aliases</p>



<a name="263953648"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/263953648" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#263953648">(Dec 07 2021 at 03:09)</a>:</h4>
<p>so it's just a matter of defining the builtins and mapping them to <code>str_to_num</code> in can <code>builtins.rs</code></p>



<a name="264235989"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/264235989" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#264235989">(Dec 08 2021 at 23:25)</a>:</h4>
<p>are we happy with this PR? anyone got time to review?<br>
<a href="https://github.com/rtfeldman/roc/pull/2116">https://github.com/rtfeldman/roc/pull/2116</a></p>



<a name="264274397"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/264274397" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#264274397">(Dec 09 2021 at 09:21)</a>:</h4>
<p>I reviewed it but I couldn't approve because I started the PR.</p>



<a name="264311614"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/264311614" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#264311614">(Dec 09 2021 at 14:48)</a>:</h4>
<p>merged! <span aria-label="raised hands" class="emoji emoji-1f64c" role="img" title="raised hands">:raised_hands:</span></p>
<p>IT'S ALIVE!!!!</p>



<a name="264354636"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/264354636" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#264354636">(Dec 09 2021 at 19:35)</a>:</h4>
<p>Awesome thank you</p>



<a name="264354714"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/264354714" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#264354714">(Dec 09 2021 at 19:36)</a>:</h4>
<p>I’m gonna crawl back to wasm now :p</p>



<a name="264354821"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Str.toNum/near/264354821" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Str.2EtoNum.html#264354821">(Dec 09 2021 at 19:36)</a>:</h4>
<p>If anyone wants to explore why i128 and LLVM are not happy for the Dec/I128 functions feel free</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>