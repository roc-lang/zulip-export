<html>
<head><meta charset="utf-8"><title>Compile to javascript? Build Single Page Application? SPA? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html">Compile to javascript? Build Single Page Application? SPA?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="420803386"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/420803386" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rofrol <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#420803386">(Feb 10 2024 at 14:15)</a>:</h4>
<p>Hello.<br>
How to build SPA with Roc? I was using Elm previously.</p>
<p>I have found this for Elm programmers but can't find something about SPA <a href="https://github.com/roc-lang/roc/blob/main/roc-for-elm-programmers.md">https://github.com/roc-lang/roc/blob/main/roc-for-elm-programmers.md</a>.</p>
<p>I see that I can generate static website</p>
<ul>
<li><a href="https://github.com/roc-lang/roc/blob/main/www/main.roc">https://github.com/roc-lang/roc/blob/main/www/main.roc</a></li>
<li><a href="https://github.com/yukiomoto/roc/blob/main/www/wip_new_website/InteractiveExample.roc">https://github.com/yukiomoto/roc/blob/main/www/wip_new_website/InteractiveExample.roc</a></li>
</ul>
<p>I see there are platforms but no web platform? <a href="https://github.com/zraexy/roc/tree/main/examples/platform-switching">https://github.com/zraexy/roc/tree/main/examples/platform-switching</a></p>
<p>There is this project <a href="https://github.com/roc-lang/roc/tree/main/examples/virtual-dom-wip">https://github.com/roc-lang/roc/tree/main/examples/virtual-dom-wip</a> but I think it is going webassembly way and is also WIP.</p>
<p>Thanks.</p>



<a name="420806053"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/420806053" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#420806053">(Feb 10 2024 at 14:55)</a>:</h4>
<p>We don't have any SPA platforms yet but you can use Roc for the backend with the <a href="https://github.com/roc-lang/basic-webserver/blob/main/examples/todos.roc">basic-webserver platform</a>.</p>



<a name="420806326"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/420806326" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#420806326">(Feb 10 2024 at 14:58)</a>:</h4>
<p>Roc doesn't compile to JavaScript, and the plan is that it won't. So in the browser, WebAssembly is the one way to run Roc!</p>



<a name="420827264"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/420827264" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#420827264">(Feb 10 2024 at 19:34)</a>:</h4>
<p>I've had fun writing a web app using htmx. I wrote about my exploration <a href="https://lukewilliamboswell.github.io/roc-htmx-demo/">https://lukewilliamboswell.github.io/roc-htmx-demo/</a></p>



<a name="421250934"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421250934" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shaiden Spreitzer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421250934">(Feb 13 2024 at 14:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F/near/420806326">said</a>:</p>
<blockquote>
<p>Roc doesn't compile to JavaScript, and the plan is that it won't. So in the browser, WebAssembly is the one way to run Roc!</p>
</blockquote>
<p>What would it take to modify the compiler to emit javascript instead of, say, llvm?<br>
The readme (<a href="https://github.com/roc-lang/roc/blob/main/crates/compiler/README.md">https://github.com/roc-lang/roc/blob/main/crates/compiler/README.md</a>) lists a number of steps. Where, and what kind of changes are need to allow targeting javascript (or any other scripting lang)?</p>
<p>How to implement platforms when compiling to javascript is a different question. My main interest here is if it is possible at all, and if so how, too parse + convert Roc to javascript, turning Roc into a viable replacement for Elm</p>



<a name="421251641"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421251641" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421251641">(Feb 13 2024 at 14:16)</a>:</h4>
<p>it's an explicit non-goal of the project to emit JavaScript, but if you wanted to try it yourself on a fork, the minimal change you'd need to make would be to add a new <code>gen_</code> crate (like <code>gen_llvm</code> or <code>gen_dev</code>) which would go from <code>mono::ir</code> to whatever output you wanted</p>



<a name="421252619"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421252619" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421252619">(Feb 13 2024 at 14:22)</a>:</h4>
<p>A better (or maybe just easier) way to use Roc in the JS world would probably be for someone to create a platform that compiles to wasm and provides access to parts of the JS stdlib. Then you would load the wasm file in JS and hook up the wasm calls to JS calls. It would be weird but i think it would work, right?</p>



<a name="421253199"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421253199" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421253199">(Feb 13 2024 at 14:24)</a>:</h4>
<p>right, in general that's how wasm in the browser works <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="421253292"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421253292" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421253292">(Feb 13 2024 at 14:25)</a>:</h4>
<p>the wasm itself is basically only capable of doing calculations, so wiring it up to some amount of hardcoded JS is necessary to be able to do any interesting browser stuff</p>



<a name="421255256"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421255256" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421255256">(Feb 13 2024 at 14:34)</a>:</h4>
<p>Great! So someone just needs to write that hard coded JS file that exposes all of the effects in the JS stdlib and that's basically the same as compiling to JS <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="421273534"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421273534" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421273534">(Feb 13 2024 at 15:56)</a>:</h4>
<p>Something I've always seen handwaved in wasm "code sharing" or the like is referential integrity. A lot of JavaScript optimizations rely on it and I worry that dropping a wasm bundle in would prevent any sort of "share you business logic using a roc module that your existing code can use" migration path</p>



<a name="421273801"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421273801" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421273801">(Feb 13 2024 at 15:57)</a>:</h4>
<p>The nice thing about compile to JS is that there is no to/from wasm conversion that breaks those optimization (obviously there are other pitfalls, but that's just one)</p>



<a name="421281752"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421281752" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421281752">(Feb 13 2024 at 16:33)</a>:</h4>
<p>If you want JS compilation, why not just use Elm?</p>



<a name="421281956"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421281956" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421281956">(Feb 13 2024 at 16:34)</a>:</h4>
<blockquote>
<p>"share you business logic using a roc module that your existing code can use" migration path</p>
</blockquote>
<p>Also, I'm not really sure how a wasm bundle stops this, can you explain more?</p>



<a name="421342508"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421342508" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421342508">(Feb 13 2024 at 23:26)</a>:</h4>
<p>What is referential integrity? Is it related to referential transparency?<br>
I've done a lot of webassembly work but I'm not following this point.</p>



<a name="421371641"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421371641" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421371641">(Feb 14 2024 at 05:08)</a>:</h4>
<p>For sure, let's say that you have a mobile app and a web app and you want to share some logic in a common roc module (basically along the lines of kotlin multiplatform), elm won't run in a non-browser environment so I don't think that's an option.</p>



<a name="421371837"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421371837" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421371837">(Feb 14 2024 at 05:10)</a>:</h4>
<p>Referential integrity is basical JavaScript's way of saying pointer comparisons. It is a common optimization to check object (essentially pointers to records) equality by just comparing the references themselves. If they reference the same object they are equal , or perhaps more importantly if they don't have the same reference you assume they are not equal</p>



<a name="421371956"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421371956" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421371956">(Feb 14 2024 at 05:11)</a>:</h4>
<p>From what I understand of wasm, if I'm using any data inside of wasm from js-land then I have to marshall it across the wasm-boundary, and then if I return the data I would marshall it back across the boundary and end up with a different reference (and in this case most likely a deep copy), this would make it unusable in a lot of common js patterns.</p>



<a name="421372050"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421372050" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421372050">(Feb 14 2024 at 05:12)</a>:</h4>
<p>For example selectors in redux rely heavily on referential integrity in order to avoid triggering re-renders, if the reference changes each frame then it can't avoid doing deep comparisons which are slow</p>



<a name="421372165"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421372165" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421372165">(Feb 14 2024 at 05:14)</a>:</h4>
<p>The way most wasm-based web frameworks do stuff is they shift as much as possible into the wasm side so all that is ever marshalled across is the minimal DOM changes, no application data</p>



<a name="421372245"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421372245" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421372245">(Feb 14 2024 at 05:15)</a>:</h4>
<p>This isn't a problem outside the browser because there doesn't have to be much marshalling to cross the C ffi. Presumably a platform could just "understand" a roc type and it's all good to go</p>



<a name="421372647"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421372647" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421372647">(Feb 14 2024 at 05:20)</a>:</h4>
<p>Note: I should have used the term referential equality not integrity. Related concepts but not exactly the same, and probably confusing that I used the wrong one</p>



<a name="421373068"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421373068" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421373068">(Feb 14 2024 at 05:27)</a>:</h4>
<p>I also think it is totally fine to say "swapping out a redux store in a react app for a roc module is not a use case we think is in scope". Just pointing out that there are reasons people like compile to js over wasm for some use cases</p>



<a name="421527734"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421527734" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421527734">(Feb 14 2024 at 20:32)</a>:</h4>
<p><span class="user-mention" data-user-id="492563">@Pearce Keesling</span> have you seen the <a href="https://github.com/roc-lang/roc/tree/main/examples/virtual-dom-wip">virtual dom example</a>? That might be good to see some ideas for managing the WASM boundary and sharing logic on front and back ends.</p>



<a name="421534302"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421534302" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421534302">(Feb 14 2024 at 21:17)</a>:</h4>
<p>Yeah, I think that is a great strategy for when a whole slice of your ui is going to be in roc. I don't think it avoids the problems when you're embedding just logic into a react app.</p>



<a name="421534689"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421534689" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421534689">(Feb 14 2024 at 21:19)</a>:</h4>
<p>For example a real use case we have at my company. We have a list of transactions that's 10s of thousands of times long. If I want to update a single transaction I need to send it all across and then update a value and send it  back. In order to use wasm I'd need to find a good "cutting point" to minimize the amount of serialize/deserialize I have to do. If it's just js I can plug it in way easier</p>



<a name="421545241"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421545241" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421545241">(Feb 14 2024 at 22:38)</a>:</h4>
<p>Given how roc handles effects, I think it will always have some complex edges in this area. Fundamentally a good "cutting point" is required to use roc in general. That is what a platform hopefully is.</p>



<a name="421545836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421545836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421545836">(Feb 14 2024 at 22:43)</a>:</h4>
<p>I do agree that wasm makes this more complex. For this cutting point, you might:</p>
<ul>
<li>Need to store the full list of transactions in wasm. Then just reference it from the js side. That would be avoid serialization.</li>
<li>Give roc effects that let it read and write individual elements in the list of transactions. That way you only ever pay the cost of a small conversion at a time. You never need an extra copy of this data in memory.</li>
<li>Just pay the cost but do things in larger blocks in roc. That way the cost isn't a big deal.</li>
</ul>
<p>Any of these might mitigated the issue, but fundamentally, performance would need to be measured.</p>



<a name="421547081"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421547081" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421547081">(Feb 14 2024 at 22:53)</a>:</h4>
<p>Absolutely, all of those are reasonable routes. It's all about tradeoffs</p>



<a name="421708598"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421708598" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421708598">(Feb 15 2024 at 17:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F/near/421527734">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="492563">Pearce Keesling</span> have you seen the <a href="https://github.com/roc-lang/roc/tree/main/examples/virtual-dom-wip">virtual dom example</a>? That might be good to see some ideas for managing the WASM boundary and sharing logic on front and back ends.</p>
</blockquote>
<p>I think a really interesting concept is using this pattern for targets other than the browser</p>



<a name="421708813"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421708813" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421708813">(Feb 15 2024 at 17:46)</a>:</h4>
<p>like in general if you have a Roc function whose purpose is to quickly return a description of how you want the UI to look, and then the platform's job is to translate that into actual visuals...</p>



<a name="421708898"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421708898" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421708898">(Feb 15 2024 at 17:47)</a>:</h4>
<p>you could implement something in the browser which does that, sure, but in theory you could do the same in Swift on iOS, calling the Roc function via Swift's C FFI</p>



<a name="421708926"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421708926" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421708926">(Feb 15 2024 at 17:47)</a>:</h4>
<p>and same thing on Android</p>



<a name="421708974"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421708974" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421708974">(Feb 15 2024 at 17:47)</a>:</h4>
<p>same thing on desktop, etc.</p>



<a name="421709127"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/421709127" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#421709127">(Feb 15 2024 at 17:48)</a>:</h4>
<p>I noticed that one of the open native devs is working on decoupling react native from react. I think I tagged @roc_lang in the tweet thread. That might be a super interesting foundation to build on since react native is essentially a C FFI for native views</p>



<a name="422072512"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/422072512" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#422072512">(Feb 18 2024 at 06:34)</a>:</h4>
<p><span class="user-mention" data-user-id="492563">@Pearce Keesling</span> any chance you could dig out a link? that sounds interesting.</p>



<a name="422072866"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/422072866" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#422072866">(Feb 18 2024 at 06:40)</a>:</h4>
<p>Also, somewhat related to the above. </p>
<p>I've been expanding on my roc+htmx demo, refactoring it and generally tinkering. I think it's a good sandpit for developing basic-webserver features and trying out ideas.</p>
<p>But I wonder if anyone else would be interested in tinkering with it also? I thought I might ask because if anyone would be interested in making PRs and generally adding random features then that might be fun. </p>
<p>There is no overall direction or anything, I'm just doing the next thing that pops into my head, a random exploration of different ideas for building web apps with Roc. To be honest, I have spent most of my time just rebuilding things I've already built and refactoring.</p>
<p>I want to challenge myself to write up a blog article every now and then to capture some of the things I learn along the way.</p>
<p>It's currently sitting in a private repository... I should probably make it public anyway. </p>
<p>Thoughts?</p>



<a name="422108713"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/422108713" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#422108713">(Feb 18 2024 at 16:12)</a>:</h4>
<p>This is the tweet in particular but he's been posting a lot about it this week <a href="https://x.com/birch_js/status/1757743078738469145?s=20">https://x.com/birch_js/status/1757743078738469145?s=20</a></p>



<a name="422327341"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/422327341" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeffrey Mudge <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#422327341">(Feb 20 2024 at 00:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F/near/422072866">said</a>:</p>
<blockquote>
<p>I've been expanding on my roc+htmx demo, refactoring it and generally tinkering. I think it's a good sandpit for developing basic-webserver features and trying out ideas.</p>
<p>But I wonder if anyone else would be interested in tinkering with it also? I thought I might ask because if anyone would be interested in making PRs and generally adding random features then that might be fun. <br>
...<br>
Thoughts?</p>
</blockquote>
<p>I've been wanting to learn htmx and expand my limited roc knowledge, so this is cool. I went ahead and created a PR with a feature to add a button to mark a task as completed. <a href="https://github.com/lukewilliamboswell/roc-htmx-playground/pull/1">https://github.com/lukewilliamboswell/roc-htmx-playground/pull/1</a> </p>
<p>If you don't want to merge it, I won't be offended. I'm just thankful that you created the playground and gave me a good spot to experiment.</p>



<a name="422328996"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/422328996" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#422328996">(Feb 20 2024 at 01:18)</a>:</h4>
<p>Awesome <span aria-label="heart eyes" class="emoji emoji-1f60d" role="img" title="heart eyes">:heart_eyes:</span> I can have a closer look at this later. It's hard to read on my phone, but super cool. How did you find roc + htmx + sqlite? I think they're a pretty nice combination so far.</p>



<a name="422329836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/422329836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeffrey Mudge <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#422329836">(Feb 20 2024 at 01:30)</a>:</h4>
<p>I find them pretty nice! There are some rough edges and oddities to roc for me still, but building the client side interaction in the element attributes feels good. Having a server side elm-like language is amazing, and the unexpected bumps are an indication of the promising future. You'd already done the hard work with the sqlite stuff, so I just had to write a query and use your existing connection, so I don't feel like I can comment on that too much, but it does seem like a good choice.</p>



<a name="422330116"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Compile%20to%20javascript%3F%20Build%20Single%20Page%20Application%3F%20SPA%3F/near/422330116" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeffrey Mudge <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Compile.20to.20javascript.3F.20Build.20Single.20Page.20Application.3F.20SPA.3F.html#422330116">(Feb 20 2024 at 01:34)</a>:</h4>
<p>Sorry about the formatting changes in my PR. The roc formatter is set to auto format when I save. I probably should have tried to isolate that to a single commit, or turned it off. But I wasn't intending to make a PR when I started messing around, I just wanted to see if I could get it to run, and then wanted to see if I could add a feature. It was only when I'd finished that I thought I should make a PR out of it.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>