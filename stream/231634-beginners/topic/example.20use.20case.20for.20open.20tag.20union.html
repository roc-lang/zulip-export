<html>
<head><meta charset="utf-8"><title>example use case for open tag union · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html">example use case for open tag union</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="273120799"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273120799" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273120799">(Feb 24 2022 at 17:19)</a>:</h4>
<p>I was following the discussion about open vs closed tag unions and started wondering what the use cases for open tag unions are.</p>
<p>To clarify, I understand how they are important for outputs like flexible error types where it's easy to return additional error variants.</p>
<p>I'm wondering about inputs. What's an example of a function that requires an open tag union as its input?</p>



<a name="273158523"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273158523" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273158523">(Feb 24 2022 at 22:29)</a>:</h4>
<p>I just had the idea to reread the tutorial and Roc for Elm document to see if the example would help me. Unfortunately I couls only find artificial examples like</p>
<div class="codehilite"><pre><span></span><code>example : [ Foo Str, Bar Bool ]* -&gt; Bool
example =
  \tag -&gt;
    when tag is
      Foo str -&gt; Str.isEmpty str
      Bar bool -&gt; bool
      _ -&gt; False
</code></pre></div>
<p>So I'm still not sure what a real use case for a function accepting open tag unions might be. I'm starting to get the feeling that maybe we don't need explicit open and closed tags. But I haven't fully grasped it yet.</p>



<a name="273158743"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273158743" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273158743">(Feb 24 2022 at 22:31)</a>:</h4>
<blockquote>
<p>I'm starting to get the feeling that maybe we don't need explicit open and closed tags.</p>
</blockquote>
<p>this is a common rite of passage along the way to discovering that we do need both <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="273158806"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273158806" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273158806">(Feb 24 2022 at 22:32)</a>:</h4>
<p>but I agree that there may not be a real use case for a function accepting open tag unions</p>



<a name="273158812"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273158812" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273158812">(Feb 24 2022 at 22:32)</a>:</h4>
<p>or at least, I don't know of any!</p>



<a name="273158816"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273158816" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273158816">(Feb 24 2022 at 22:32)</a>:</h4>
<p>maybe one will come up eventually</p>



<a name="273158855"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273158855" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273158855">(Feb 24 2022 at 22:33)</a>:</h4>
<p>but without open unions, chaining effects that can fail in different ways would be pretty unpleasant <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="273159912"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273159912" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273159912">(Feb 24 2022 at 22:43)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> can you share an example of how an effect chain would use open unions?</p>



<a name="273160309"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273160309" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273160309">(Feb 24 2022 at 22:47)</a>:</h4>
<p>I have one example of wanting an open tag union, but as a result type. Think of a function that takes a lambda as an arg. The lambda would do something and then maybe return an error. The error type of the lambda would be an open tag union. The function as whole would return either one of it's own errors, or one of the errors that the lambda could return.</p>



<a name="273160444"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273160444" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273160444">(Feb 24 2022 at 22:48)</a>:</h4>
<p>So the lambda returns an open union that is merged with the overall functions error union. The function could not know this union ahead of time due to accepting any lambda.</p>



<a name="273160473"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273160473" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273160473">(Feb 24 2022 at 22:49)</a>:</h4>
<p><a href="https://youtu.be/6qzWm_eoUXM?t=2370">https://youtu.be/6qzWm_eoUXM?t=2370</a></p>
<div class="youtube-video message_inline_image"><a data-id="6qzWm_eoUXM" href="https://youtu.be/6qzWm_eoUXM?t=2370"><img src="https://uploads.zulipusercontent.net/c3a925ed18fe1016e197f6abdd6cd3ed6c8f1858/68747470733a2f2f692e7974696d672e636f6d2f76692f36717a576d5f656f55584d2f64656661756c742e6a7067"></a></div>



<a name="273160524"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273160524" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273160524">(Feb 24 2022 at 22:49)</a>:</h4>
<p><a href="/user_uploads/22008/qNu7FdWbcUrlv4uDdhLSQEle/Screen-Shot-2022-02-24-at-5.49.37-PM.png">Screen-Shot-2022-02-24-at-5.49.37-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/qNu7FdWbcUrlv4uDdhLSQEle/Screen-Shot-2022-02-24-at-5.49.37-PM.png" title="Screen-Shot-2022-02-24-at-5.49.37-PM.png"><img src="/user_uploads/22008/qNu7FdWbcUrlv4uDdhLSQEle/Screen-Shot-2022-02-24-at-5.49.37-PM.png"></a></div>



<a name="273160651"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273160651" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273160651">(Feb 24 2022 at 22:50)</a>:</h4>
<p>so open unions mean that <code>File.read</code>, <code>File.write</code>, and <code>Http.get</code> can have different error types, and yet this still works</p>



<a name="273160711"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273160711" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273160711">(Feb 24 2022 at 22:51)</a>:</h4>
<p>the type of <code>task</code> there is something like <code>Task {} [ HttpErr Http.Err, FileReadErr File.ReadErr, FileWriteErr File.WriteErr ]*</code></p>



<a name="273160848"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273160848" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273160848">(Feb 24 2022 at 22:52)</a>:</h4>
<p>assuming we have</p>
<div class="codehilite"><pre><span></span><code>File.read : Str -&gt; Task Str [ FileReadErr File.ReadErr ]*
File.write : Str, Str -&gt; Task Str [ FileWriteErr File.WriteErr ]*
Http.get : Str -&gt; Task Str [ HttpErr Http.Err ]*
</code></pre></div>



<a name="273160866"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273160866" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273160866">(Feb 24 2022 at 22:52)</a>:</h4>
<p>if those are all closed unions instead, this is a type mismatch</p>



<a name="273160873"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273160873" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273160873">(Feb 24 2022 at 22:52)</a>:</h4>
<p>you just can't chain these together anymore</p>



<a name="273160914"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273160914" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273160914">(Feb 24 2022 at 22:52)</a>:</h4>
<p>alternatively, you could make them all have one gigantic error type called like <code>SomethingWentWrong</code></p>



<a name="273161229"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273161229" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273161229">(Feb 24 2022 at 22:55)</a>:</h4>
<p>then they'd be chainable, but when trying to recover from the error, you'd basically be stuck doing a <code>when</code> that either handles any possible thing that could conceivably ever go wrong (including errors from types of I/O operations that aren't even happening here, because they'd all need to be included in that error union)</p>



<a name="273161368"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273161368" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273161368">(Feb 24 2022 at 22:56)</a>:</h4>
<p>so like imagine in a language with exceptions, if you just had one <code>Exception</code> type and that was it</p>



<a name="273161408"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273161408" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273161408">(Feb 24 2022 at 22:57)</a>:</h4>
<p>this is the original use case for having open unions in the language incidentally</p>



<a name="273162396"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162396" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162396">(Feb 24 2022 at 23:06)</a>:</h4>
<p>So in this example, is <code>await</code> the function that takes an open tag union as an input? I don't see why it can't take a closed tag union input.</p>



<a name="273162453"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162453" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162453">(Feb 24 2022 at 23:06)</a>:</h4>
<p>this is the type of <code>await</code>:</p>
<div class="codehilite"><pre><span></span><code>await : Task a err, (a -&gt; Task b err) -&gt; Task b err
</code></pre></div>



<a name="273162462"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162462" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162462">(Feb 24 2022 at 23:06)</a>:</h4>
<p>it actually doesn't know about tag unions at all!</p>



<a name="273162511"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162511" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162511">(Feb 24 2022 at 23:07)</a>:</h4>
<p>Does that example have any function <del>with</del> that benefits from an open tag union input?</p>



<a name="273162535"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162535" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162535">(Feb 24 2022 at 23:07)</a>:</h4>
<p>the example in the screenshot?</p>



<a name="273162600"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162600" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162600">(Feb 24 2022 at 23:08)</a>:</h4>
<p>Yeah</p>



<a name="273162714"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162714" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162714">(Feb 24 2022 at 23:09)</a>:</h4>
<p>Ah, nevermind, I see now that you weren't proposing this as an example of an OTU input.</p>



<a name="273162744"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162744" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162744">(Feb 24 2022 at 23:10)</a>:</h4>
<p>no it totally is! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="273162795"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162795" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162795">(Feb 24 2022 at 23:10)</a>:</h4>
<p>take a look at the types I wrote for <code>File.read</code> and such</p>



<a name="273162822"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162822" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162822">(Feb 24 2022 at 23:10)</a>:</h4>
<p>they all return open unions (instead the error type of the <code>Task</code> they return</p>



<a name="273162825"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162825" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162825">(Feb 24 2022 at 23:10)</a>:</h4>
<p>)</p>



<a name="273162858"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162858" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162858">(Feb 24 2022 at 23:11)</a>:</h4>
<p>Yes, but those are outputs, not inputs, right?</p>



<a name="273162960"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273162960" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273162960">(Feb 24 2022 at 23:11)</a>:</h4>
<p>I'm wondering if anyone would notice if Roc started inferring function input tag unions as closed instead of open.</p>



<a name="273163111"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163111" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163111">(Feb 24 2022 at 23:13)</a>:</h4>
<p>oh gotcha</p>



<a name="273163116"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163116" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163116">(Feb 24 2022 at 23:13)</a>:</h4>
<p>And in writing that I now realize why</p>



<a name="273163123"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163123" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163123">(Feb 24 2022 at 23:13)</a>:</h4>
<p>so they're inputs to <code>await</code>, but not to <code>File.read</code></p>



<a name="273163131"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163131" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163131">(Feb 24 2022 at 23:13)</a>:</h4>
<p>but I see what you mean</p>



<a name="273163183"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163183" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163183">(Feb 24 2022 at 23:14)</a>:</h4>
<p>like a function that <em>only</em> accepts an open union</p>



<a name="273163196"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163196" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163196">(Feb 24 2022 at 23:14)</a>:</h4>
<p>yeah I don't know of a use case for such a function</p>



<a name="273163197"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163197" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163197">(Feb 24 2022 at 23:14)</a>:</h4>
<p>Yeah</p>



<a name="273163208"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163208" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163208">(Feb 24 2022 at 23:14)</a>:</h4>
<p>as opposed to <code>await</code>, which accepts any type</p>



<a name="273163225"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163225" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163225">(Feb 24 2022 at 23:14)</a>:</h4>
<p>But I realize now it's a flexibility thing, right?</p>



<a name="273163231"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163231" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163231">(Feb 24 2022 at 23:14)</a>:</h4>
<p>yeah so this is an example of the value of open unions in the language</p>



<a name="273163260"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163260" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163260">(Feb 24 2022 at 23:15)</a>:</h4>
<p>like if we only have closed unions, then chaining tasks together would be a lot less pleasant!</p>



<a name="273163296"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163296" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163296">(Feb 24 2022 at 23:15)</a>:</h4>
<p>also, if we only had closed unions, then other things would need to change - e.g. you'd have to declare the type up front before using one</p>



<a name="273163320"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163320" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163320">(Feb 24 2022 at 23:15)</a>:</h4>
<p>Yeah it's to avoid a lot of manual annotating</p>



<a name="273163370"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163370" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163370">(Feb 24 2022 at 23:16)</a>:</h4>
<p>Honestly, I think that might be the easiest way to teach it</p>



<a name="273163406"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163406" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163406">(Feb 24 2022 at 23:16)</a>:</h4>
<p>Show a realish example with closed tag union values, inputs, outputs, etc</p>



<a name="273163437"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163437" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163437">(Feb 24 2022 at 23:16)</a>:</h4>
<p>Then show how it takes less code to do it with open unions</p>



<a name="273163456"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163456" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163456">(Feb 24 2022 at 23:17)</a>:</h4>
<p>Then show how it takes way less code to do it with inferred open unions</p>



<a name="273163495"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163495" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163495">(Feb 24 2022 at 23:17)</a>:</h4>
<p>That's the real value to developers</p>



<a name="273163504"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163504" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163504">(Feb 24 2022 at 23:17)</a>:</h4>
<p>Saving keystrokes</p>



<a name="273163579"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163579" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163579">(Feb 24 2022 at 23:18)</a>:</h4>
<p>eh I don't like pitching things that way</p>



<a name="273163628"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163628" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163628">(Feb 24 2022 at 23:18)</a>:</h4>
<p>I've gotten burned by so many things where the pitch was "saves you keystrokes" and the fine print turned out to be "and will make you want to tear your hair out in a few months!" that I'm now deeply skeptical of anything where that's the pitch</p>



<a name="273163646"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163646" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163646">(Feb 24 2022 at 23:18)</a>:</h4>
<p>Lol, fair enough</p>



<a name="273163723"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163723" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163723">(Feb 24 2022 at 23:19)</a>:</h4>
<p>the reason I didn't want to use the <code>await</code> example in the tutorial is that it requires a big detour</p>



<a name="273163796"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163796" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163796">(Feb 24 2022 at 23:20)</a>:</h4>
<p>but one potential approach is to teach an example platform, and then teach <code>await</code> without talking about types</p>



<a name="273163812"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163812" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163812">(Feb 24 2022 at 23:20)</a>:</h4>
<p>and then later go back and explain how the types work out there</p>



<a name="273163854"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273163854" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273163854">(Feb 24 2022 at 23:20)</a>:</h4>
<p>so then by the time you get to open unions, I can just say "ok now let's look at <code>await</code>" which you're already familiar with from the earlier parts of the tutorial</p>



<a name="273164759"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273164759" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273164759">(Feb 24 2022 at 23:30)</a>:</h4>
<p><span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span> I just realized that tag union inputs for functions with no <code>_ -&gt;</code> aren't inferred as open... they're inferred as closed. I somehow mis-assumed that, which is why I was asking about "would anyone notice"... whoops</p>
<div class="codehilite" data-code-language="Pan"><pre><span></span><code>»<span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="se">\t</span><span class="w"> </span>-&gt;<span class="w"></span>
…<span class="w">     </span>when<span class="w"> </span>t<span class="w"> </span>is<span class="w"></span>
…<span class="w">         </span>A<span class="w"> </span>-&gt;<span class="w"> </span><span class="s2">"a"</span><span class="w"></span>
…<span class="w">         </span>B<span class="w"> </span>-&gt;<span class="w"> </span><span class="s2">"b"</span><span class="w"></span>
…<span class="w"> </span>f<span class="w"></span>

&lt;function&gt;<span class="w"> </span>:<span class="w"> </span><span class="o">[</span><span class="w"> </span>A,<span class="w"> </span>B<span class="w"> </span><span class="o">]</span><span class="w"> </span>-&gt;<span class="w"> </span>Str<span class="w"></span>

»<span class="w"></span>
</code></pre></div>



<a name="273165040"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273165040" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273165040">(Feb 24 2022 at 23:33)</a>:</h4>
<p>They used to be inferred as open, but we have to infer them as closed or otherwise it's a soundness bug - then you could pass in a <code>C</code>, and we would compile the program but crash at runtime</p>



<a name="273165121"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273165121" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273165121">(Feb 24 2022 at 23:34)</a>:</h4>
<p>That realization is what prompted me to try the REPL - "wait, what would happen if..."</p>



<a name="273165722"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273165722" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273165722">(Feb 24 2022 at 23:41)</a>:</h4>
<p><span class="user-mention" data-user-id="455781">@Johannes Maas</span> I still don't know of a real-world example for a function input OTU, but this is a minimal artificial example:</p>
<div class="codehilite" data-code-language="Pan"><pre><span></span><code>»<span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="se">\t</span><span class="w"> </span>-&gt;<span class="w"></span>
…<span class="w">     </span>when<span class="w"> </span>t<span class="w"> </span>is<span class="w"></span>
…<span class="w">         </span>A<span class="w"> </span>-&gt;<span class="w"> </span><span class="s2">"a"</span><span class="w"></span>
…<span class="w">         </span>_<span class="w"> </span>-&gt;<span class="w"> </span><span class="s2">"?"</span><span class="w"></span>
…<span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>B<span class="w"></span>
…<span class="w"> </span>f<span class="w"> </span>x<span class="w"></span>

<span class="s2">"?"</span><span class="w"> </span>:<span class="w"> </span>Str<span class="w"></span>

»<span class="w"></span>
</code></pre></div>



<a name="273165829"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273165829" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273165829">(Feb 24 2022 at 23:42)</a>:</h4>
<p>where <code>f</code>'s type is inferred as <code>f : [ A ]* -&gt; Str</code> regardless of the existence &amp; usage of <code>x</code></p>



<a name="273166015"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273166015" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273166015">(Feb 24 2022 at 23:44)</a>:</h4>
<p>Warning to anyone else going to the REPL to learn tag unions, I've discovered multiple tag-union-related bugs/gaps in the compiler that hinder experimental learning.</p>



<a name="273166116"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273166116" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273166116">(Feb 24 2022 at 23:45)</a>:</h4>
<p>Are these bugs more than the ones you sent to me? If so can you please also file issues for them :)</p>



<a name="273166318"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273166318" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273166318">(Feb 24 2022 at 23:48)</a>:</h4>
<p>No, just those <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="273195169"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273195169" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273195169">(Feb 25 2022 at 07:02)</a>:</h4>
<p>I think I see now that you need OTUs for proper type inference. Because if you have a <code>when</code> with a catch-all but you don't give type annotation, you can't know from looking at that <code>when</code> what tags are put into it.</p>
<p>And it is difficult to hide that from developers because they need to know whether they can input just the explicit branches or whether there is a catch-all branch.</p>
<p>Which means that they need to concern themselves with input OTUs, even if in practice they wouldn't really want to ask for input OTUs.</p>
<p>So in a way, you wouldn't really need it in explicit type annotations, but it is necessary for type inference and thus for showing the type of something.</p>



<a name="273216891"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273216891" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273216891">(Feb 25 2022 at 11:25)</a>:</h4>
<p>I'm still thinking about this. <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>
<p>I have feeling about it, and I think it boils down to: Do we need closed tag unions for outputs? I think not, because why prevent someone from piecing them together? </p>
<p>If for explicit type annotations we can always use closed inputs and we do not need closed outputs, then the only case where open unions are relevant is when we infer the type of a <code>when</code> with a catch-all. Then we need to say "I know the input can be one of these tags, but you could also give me any other".</p>
<p>In that case maybe we can never show whether a tag union is open or closed (that's quite naturally determined by wether it's an input or an output), except when we need to show the inferred type for a catch-all conditional where we need to admit that it could accept more tags than we can list.</p>



<a name="273217035"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273217035" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273217035">(Feb 25 2022 at 11:26)</a>:</h4>
<p>Basically: If this holds, then the developer wouldn't need to worry about openness. It would just be something that sometimes shows up in inferred types to mark catch-alls.</p>



<a name="273221958"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273221958" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273221958">(Feb 25 2022 at 12:22)</a>:</h4>
<p>I agree with everything you just said except for the hiding :D what a wild ride of learning...</p>



<a name="273222253"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273222253" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273222253">(Feb 25 2022 at 12:25)</a>:</h4>
<p>But also I do see a use case for closed outputs, and it's best exemplified by something Richard mentioned: for something like <code>Bool : [ True, False ]</code> you might want a program to fail if it ever tried to parse a <code>Bool</code> with a function like <code>parse : [ True, False, Maybe, Other ]*</code> because "no, it can only be true or false!"</p>



<a name="273223448"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273223448" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273223448">(Feb 25 2022 at 12:39)</a>:</h4>
<p>so today, let's say I write this function (not saying this is a good function to write, but it's certainly <em>possible</em>, so the compiler has to do something with it!)</p>
<div class="codehilite"><pre><span></span><code>blah : [ Foo Str, Bar ]a -&gt; [ Foo Str, Bar, Baz ]a
blah = \fooOrBar -&gt;
    when fooOrBar is
        Foo &quot;&quot; -&gt; Bar
        Foo _ -&gt; Foo &quot;something&quot;
        Bar -&gt; Baz
        other -&gt; other
</code></pre></div>
<p>let's say in this proposed design I don't give this function a type annotation, but I implement it and put it into the repl. What type should the compiler infer and display for me?</p>



<a name="273223587"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273223587" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273223587">(Feb 25 2022 at 12:41)</a>:</h4>
<p>one answer could be that the compiler tracks the type variable (this is non-optional btw; even if the type variable is never displayed to the user, it must be there at least behind the scenes in order for the compiler to work properly) and just doesn't render it, so the compiler would say that this is the type:</p>
<div class="codehilite"><pre><span></span><code>blah : [ Foo Str, Bar ] -&gt; [ Foo Str, Bar, Baz ]
</code></pre></div>



<a name="273223848"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273223848" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273223848">(Feb 25 2022 at 12:44)</a>:</h4>
<p>however, if I then put this into the repl:</p>
<div class="codehilite"><pre><span></span><code>myFunction : [ Foo Str, Bar, Something ] -&gt; Str
myFunction = \arg -&gt;
    answer : [ Foo Str, Bar, Baz ]
    answer = blah arg

    ...
</code></pre></div>



<a name="273223888"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273223888" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273223888">(Feb 25 2022 at 12:44)</a>:</h4>
<p>...I'll get a type mismatch</p>



<a name="273223950"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273223950" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273223950">(Feb 25 2022 at 12:45)</a>:</h4>
<p>because although <code>blah</code> allegedly (according to the type annotation the repl told me the compiler inferred for it) returns <code>[ Foo Str, Bar, Baz ]</code>, and although I copy/pasted that exact type as the annotation for <code>answer</code> - which I got by calling <code>blah</code>! - those types don't line up because my annotation is missing the <code>Something</code> type. (Because actually <code>blah</code> returns any extra tags you give it, even though it doesn't say it does)</p>



<a name="273223962"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273223962" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273223962">(Feb 25 2022 at 12:45)</a>:</h4>
<p>and it's not just the annotation either</p>



<a name="273223969"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273223969" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273223969">(Feb 25 2022 at 12:45)</a>:</h4>
<p>if I then did this:</p>



<a name="273224058"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273224058" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273224058">(Feb 25 2022 at 12:46)</a>:</h4>
<div class="codehilite"><pre><span></span><code>when answer is
    Foo _ -&gt; &quot;foo&quot;
    Bar -&gt; &quot;bar&quot;
    Baz -&gt; &quot;baz&quot;
</code></pre></div>



<a name="273224069"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273224069" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273224069">(Feb 25 2022 at 12:46)</a>:</h4>
<p>I'd get an exhaustiveness check failure</p>



<a name="273224072"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273224072" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273224072">(Feb 25 2022 at 12:46)</a>:</h4>
<p>because I didn't account for <code>Something</code></p>



<a name="273224108"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273224108" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273224108">(Feb 25 2022 at 12:46)</a>:</h4>
<p>so if we just hid the type variable from the user, I think we could end up with some very confusing situations</p>



<a name="273224119"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273224119" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273224119">(Feb 25 2022 at 12:46)</a>:</h4>
<p>where it appeared the compiler was incorrectly inferring types</p>



<a name="273224129"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273224129" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273224129">(Feb 25 2022 at 12:47)</a>:</h4>
<p>but the actual problem is that it was correctly inferring them and then hiding important information about them <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="273226996"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273226996" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273226996">(Feb 25 2022 at 13:15)</a>:</h4>
<p>a related problem with the "hide the type variables" idea is that if I had this code:</p>
<div class="codehilite"><pre><span></span><code>foo : [ A, B ]
foo = doStuff &quot;blah&quot;

bar : [ C, D ]
bar = doOtherStuff &quot;blah&quot;

if condition then
    foo
else
    bar
</code></pre></div>
<p>this might or might not type-check depending on whether the <code>doStuff</code> and <code>doOtherStuff</code> functions happen to be doing an exhaustive <code>when</code> on the values they return</p>



<a name="273227101"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273227101" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273227101">(Feb 25 2022 at 13:16)</a>:</h4>
<p>because the type annotations <code>[ A, B ]</code> and <code>[ C, D ]</code> in this hypothetical design could mean either open or closed tag unions, so they wouldn't change even if the implementation of the function changed in a way that made this code invalid</p>



<a name="273227307"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273227307" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273227307">(Feb 25 2022 at 13:18)</a>:</h4>
<p>so yeah, when it comes to this:</p>
<blockquote>
<p>maybe we can never show whether a tag union is open or closed</p>
</blockquote>
<p>it would create situations where no amount of learning can prevent confusion</p>



<a name="273227393"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273227393" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273227393">(Feb 25 2022 at 13:18)</a>:</h4>
<p>because the compiler would be hiding information that's required to understand why certain things are happening!</p>



<a name="273239752"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273239752" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273239752">(Feb 25 2022 at 15:01)</a>:</h4>
<blockquote>
<p>I have feeling about it, and I think it boils down to: Do we need closed tag unions for outputs? I think not, because why prevent someone from piecing them together? </p>
</blockquote>
<p>Sometimes you legitimately have a specific list that you want to return a value from. It would be a bug if someone added a new type to the list. You would still want a close union output. The stoplight can only be red, green, or yellow. It wouldn't make any sense if someone could add to that union. So a closed union output.</p>



<a name="273240193"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273240193" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273240193">(Feb 25 2022 at 15:04)</a>:</h4>
<p>Also, if a function returns an open union, I believe that everything that depends on it will need a catch all case. That may not be desired.</p>



<a name="273260244"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273260244" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273260244">(Feb 25 2022 at 17:40)</a>:</h4>
<blockquote>
<p>Also, if a function returns an open union, I believe that everything that depends on it will need a catch all case. That may not be desired.</p>
</blockquote>
<p>True, I think I still have the wrong mental model. <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="273260458"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273260458" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273260458">(Feb 25 2022 at 17:42)</a>:</h4>
<p>Crazy how complicated this is to grok.</p>



<a name="273267030"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273267030" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273267030">(Feb 25 2022 at 18:33)</a>:</h4>
<p>Is this the most-polymorphic builtin/fundamental in Roc? I'm new to polymorphism, so that might be the primary source of my confusion.</p>



<a name="273268440"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273268440" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273268440">(Feb 25 2022 at 18:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union/near/273240193">said</a>:</p>
<blockquote>
<p>Also, if a function returns an open union, I believe that everything that depends on it will need a catch all case. That may not be desired.</p>
</blockquote>
<p>This is not necessarily true. For example:</p>
<div class="codehilite"><pre><span></span><code>f : Bool -&gt; [A, B]e
f = \b -&gt; if b then A else B

when f True is
  A -&gt; &quot;is a&quot;
  B -&gt; &quot;is b&quot;
</code></pre></div>
<p>This will compile without needing a catch all case in the when expression because at the call site <code>f True</code>, we will infer that we need <code>[A, B]e</code> to be equal to <code>[A, B]</code>. And <code>e</code> will be specialized to <code>[]</code>, so we will generate a specific version of <code>f</code> that has exactly the function signature <code>Bool -&gt; [A, B]</code> for this use case.</p>



<a name="273268542"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273268542" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273268542">(Feb 25 2022 at 18:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="462053">JanCVanB</span> <a href="#narrow/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union/near/273267030">said</a>:</p>
<blockquote>
<p>Is this the most-polymorphic builtin/fundamental in Roc? I'm new to polymorphism, so that might be the primary source of my confusion.</p>
</blockquote>
<p>No, records behave in the same way, just "in the opposite direction". For example I can say <code>{a: Str, b: Str}e</code> as a type that can be specialized to be more specific than <code>{a: Str, b: Str}</code>, but must be at least as specific as that.</p>



<a name="273268654"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273268654" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273268654">(Feb 25 2022 at 18:46)</a>:</h4>
<p>Is that true if it was a <code>*</code> instead of an <code>e</code>?</p>



<a name="273268729"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273268729" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273268729">(Feb 25 2022 at 18:47)</a>:</h4>
<p>Yeah, maybe record polymorphism is more familiar to me from JSON/POJO experience</p>



<a name="273271122"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273271122" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273271122">(Feb 25 2022 at 19:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union/near/273268654">said</a>:</p>
<blockquote>
<p>Is that true if it was a <code>*</code> instead of an <code>e</code>?</p>
</blockquote>
<p>Yes. <code>*</code> is just a special syntax for when there is no other type variable of the same name linked to each other. So <code>{} -&gt; [A]a</code> and <code>{} -&gt; [A]*</code> are the same thing, but <code>[A]c -&gt; [B]c</code> cannot be replaced by <code>[A]* -&gt; [B]*</code>, because the former says "the tags instantiated in <code>c</code> in the input are also shared in the output" while the latter would be equivalent to <code>[A]c -&gt; [B]d</code>.</p>



<a name="273320551"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273320551" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273320551">(Feb 26 2022 at 05:51)</a>:</h4>
<p>Warning: <a href="https://github.com/rtfeldman/roc/issues/2588">Don't</a> test <a href="https://github.com/rtfeldman/roc/issues/2589">this</a> stuff <a href="https://github.com/rtfeldman/roc/issues/2590">in</a> the <a href="https://github.com/rtfeldman/roc/issues/2591">REPL</a> right <a href="https://github.com/rtfeldman/roc/issues/2592">now</a> <span aria-label="yum" class="emoji emoji-1f60b" role="img" title="yum">:yum:</span></p>



<a name="273320602"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/example%20use%20case%20for%20open%20tag%20union/near/273320602" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/example.20use.20case.20for.20open.20tag.20union.html#273320602">(Feb 26 2022 at 05:52)</a>:</h4>
<p><span class="user-mention" data-user-id="454654">@Ayaz Hafiz</span> </p>
<blockquote>
<p>Are these bugs more than the ones you sent to me? If so can you please also file issues for them :)</p>
</blockquote>
<p><span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span> There they are</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>