<html>
<head><meta charset="utf-8"><title>Does the platform provide builtins? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html">Does the platform provide builtins?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="486583356"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486583356" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486583356">(Dec 06 2024 at 19:43)</a>:</h4>
<p>I'm confused about what a platform needs to include. The basic-cli seems to include implementations for all of the builtins. But other demo platforms are much smaller. Are the builtins in basic-cli just there for convenience with interfacing between Roc and Zig? If so, where are the real implementations of the builtins?</p>



<a name="486584693"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486584693" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486584693">(Dec 06 2024 at 19:53)</a>:</h4>
<p>When you say builtins, are you referring to <code>List</code> and <code>Dict</code> and all, or stuff like <code>File</code> and <code>Http</code>?</p>



<a name="486584769"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486584769" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486584769">(Dec 06 2024 at 19:54)</a>:</h4>
<p>Roc's "builtins" are those types defined here: <a href="https://github.com/roc-lang/roc/tree/main/crates/compiler/builtins/roc">https://github.com/roc-lang/roc/tree/main/crates/compiler/builtins/roc</a></p>



<a name="486584861"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486584861" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486584861">(Dec 06 2024 at 19:54)</a>:</h4>
<p>And the basic-cli interaction with them is auto-generated as "roc glue"</p>



<a name="486585006"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486585006" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486585006">(Dec 06 2024 at 19:55)</a>:</h4>
<p>The other types like <code>File</code> and <code>Http</code> are defined in basic-cli specifically for now because it's easier to maintain them there, but will <em>probably</em> get pulled into separate packages at some point</p>



<a name="486585058"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486585058" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486585058">(Dec 06 2024 at 19:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461444">Sam Mohr</span> <a href="#narrow/channel/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486584693">said</a>:</p>
<blockquote>
<p>When you say builtins, are you referring to <code>List</code> and <code>Dict</code> and all, or stuff like <code>File</code> and <code>Http</code>?</p>
</blockquote>
<p>List, Dict. Str...</p>



<a name="486585189"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486585189" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486585189">(Dec 06 2024 at 19:56)</a>:</h4>
<p>Thank you!</p>



<a name="486585277"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486585277" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486585277">(Dec 06 2024 at 19:57)</a>:</h4>
<p>In particular, the builtins like <code>List</code> and <code>Result</code> are included by the compiler without import in every Roc program</p>



<a name="486585312"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486585312" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486585312">(Dec 06 2024 at 19:57)</a>:</h4>
<p>Which is why you never see them explicitly imported</p>



<a name="486585406"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486585406" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486585406">(Dec 06 2024 at 19:58)</a>:</h4>
<p>Follow up: how would one add support for a new platform language to <code>roc glue</code>?</p>
<p>[edit] I found it at <a href="https://github.com/roc-lang/roc/tree/main/crates/glue">https://github.com/roc-lang/roc/tree/main/crates/glue</a></p>



<a name="486586091"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486586091" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486586091">(Dec 06 2024 at 20:03)</a>:</h4>
<p>yep!</p>



<a name="486586187"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486586187" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486586187">(Dec 06 2024 at 20:03)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="625912">@Sven van Caem</span> was working on the glue recently, maybe he can help you figure out how to get started?</p>



<a name="486586525"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486586525" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486586525">(Dec 06 2024 at 20:06)</a>:</h4>
<p>Thanks! I'm interested in (perhaps) making a better Go platform than <a href="https://github.com/roc-lang/examples/tree/main/examples/GoPlatform">https://github.com/roc-lang/examples/tree/main/examples/GoPlatform</a>, so might give it a try to add support for Go to glue.</p>



<a name="486587416"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486587416" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486587416">(Dec 06 2024 at 20:12)</a>:</h4>
<p>btw. I noticed GoPlatform is missing roc_panic, roc_memset, roc_getppid, roc_shm_open, and roc_mmap. Are those optional?</p>



<a name="486587485"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486587485" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486587485">(Dec 06 2024 at 20:12)</a>:</h4>
<p>I'm not sure.</p>



<a name="486587495"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486587495" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486587495">(Dec 06 2024 at 20:12)</a>:</h4>
<p>Does it run? haha</p>



<a name="486587574"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486587574" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486587574">(Dec 06 2024 at 20:13)</a>:</h4>
<p>Also, having Go glue could be helpful for our attempt to make stackful coroutines work, so this would be a useful endeavour!</p>



<a name="486587629"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486587629" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486587629">(Dec 06 2024 at 20:13)</a>:</h4>
<p>It runs the provided example, but I don't know what might break if I try to use it.</p>



<a name="486587741"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486587741" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sven van Caem <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486587741">(Dec 06 2024 at 20:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461444">Sam Mohr</span> <a href="#narrow/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486586187">said</a>:</p>
<blockquote>
<p>I think <span class="user-mention silent" data-user-id="625912">Sven van Caem</span> was working on the glue recently, maybe he can help you figure out how to get started?</p>
</blockquote>
<p>I might be able to answer questions! I'll have more time later though</p>



<a name="486587847"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486587847" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486587847">(Dec 06 2024 at 20:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="625912">Sven van Caem</span> <a href="#narrow/channel/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486587741">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="461444">Sam Mohr</span> <a href="#narrow/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486586187">said</a>:</p>
<blockquote>
<p>I think <span class="user-mention silent" data-user-id="625912">Sven van Caem</span> was working on the glue recently, maybe he can help you figure out how to get started?</p>
</blockquote>
<p>I might be able to answer questions! I'll have more time later though</p>
</blockquote>
<p>No rush! I'm pleasantly surprised to have gotten any answer at all so quickly. :-)</p>



<a name="486587873"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486587873" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sven van Caem <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486587873">(Dec 06 2024 at 20:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="782455">Matt Harden</span> <a href="#narrow/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486587416">said</a>:</p>
<blockquote>
<p>btw. I noticed GoPlatform is missing roc_panic, roc_memset, roc_getppid, roc_shm_open, and roc_mmap. Are those optional?</p>
</blockquote>
<p>It seems to depend on the language e.g. a C app will run just fine without them as long as they're not used, but a Zig app won't compile without them</p>



<a name="486587908"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486587908" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486587908">(Dec 06 2024 at 20:15)</a>:</h4>
<p>Context on stackful coroutines, btw: <a href="#narrow/channel/304641-ideas/topic/stackful.20coroutines.20in.20hosts/near/473001620">https://roc.zulipchat.com/#narrow/channel/304641-ideas/topic/stackful.20coroutines.20in.20hosts/near/473001620</a></p>



<a name="486588198"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486588198" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486588198">(Dec 06 2024 at 20:17)</a>:</h4>
<p><a href="https://github.com/lukewilliamboswell/roc-platform-template-go">https://github.com/lukewilliamboswell/roc-platform-template-go</a> </p>
<p>This may be of interest. </p>
<p>Also checkout some of <span class="user-mention" data-user-id="496321">@Oskar Hahn</span> work on different go platforms.</p>



<a name="486588338"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486588338" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486588338">(Dec 06 2024 at 20:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486588198">said</a>:</p>
<blockquote>
<p><a href="https://github.com/lukewilliamboswell/roc-platform-template-go">https://github.com/lukewilliamboswell/roc-platform-template-go</a> </p>
<p>This may be of interest. </p>
<p>Also checkout some of <span class="user-mention silent" data-user-id="496321">Oskar Hahn</span> work on different go platforms.</p>
</blockquote>
<p>Oh! thank you, I missed those.</p>



<a name="486588648"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486588648" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486588648">(Dec 06 2024 at 20:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="782455">Matt Harden</span> <a href="#narrow/channel/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486587416">said</a>:</p>
<blockquote>
<p>btw. I noticed GoPlatform is missing roc_panic, roc_memset, roc_getppid, roc_shm_open, and roc_mmap. Are those optional?</p>
</blockquote>
<p>roc_panic is called by roc when there is a crash or a runtime error. It is needed.</p>
<p>The others are part of the shared memory infra that is used for roc test and <code>expect</code> . I believe the plan is to remove those. I made a start on a PR in that direction...</p>



<a name="486588744"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486588744" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486588744">(Dec 06 2024 at 20:21)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/7256">https://github.com/roc-lang/roc/pull/7256</a></p>



<a name="486589109"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486589109" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486589109">(Dec 06 2024 at 20:24)</a>:</h4>
<p>So <code>RocStr</code> and <code>RocList</code> in <a href="https://github.com/lukewilliamboswell/roc-platform-template-go/blob/main/host/roc/roc_std.go">https://github.com/lukewilliamboswell/roc-platform-template-go/blob/main/host/roc/roc_std.go</a> are hand spun, right?</p>



<a name="486589519"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486589519" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486589519">(Dec 06 2024 at 20:27)</a>:</h4>
<p>Yep</p>



<a name="486589527"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486589527" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486589527">(Dec 06 2024 at 20:27)</a>:</h4>
<p>So the <code>host</code> directory is for the Roc to host language basic interface, and the <code>platform</code> directory is for the extended capabilities provided to Roc by the platform?</p>



<a name="486589752"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486589752" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486589752">(Dec 06 2024 at 20:29)</a>:</h4>
<p>A roc app doesn't exist without a platform. The platform includes a host which is written in another language like Go, and is the executable that starts first and then calls into roc.</p>



<a name="486589865"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486589865" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486589865">(Dec 06 2024 at 20:30)</a>:</h4>
<p>The platform files are all .roc and are basically just an API or interface between the roc part and the host part.</p>



<a name="486590048"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486590048" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486590048">(Dec 06 2024 at 20:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486589865">said</a>:</p>
<blockquote>
<p>The platform files are all .roc and are basically just an API or interface between the roc part and the host part.</p>
</blockquote>
<p>I see now; thanks.</p>



<a name="486590064"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486590064" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486590064">(Dec 06 2024 at 20:31)</a>:</h4>
<p>One day we might have a Go package for RocStr and RocList and the builtins so platform authors dont have to worry about the internals of how roc handles things. But for now we have been writing them by hand.</p>



<a name="486590124"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486590124" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486590124">(Dec 06 2024 at 20:31)</a>:</h4>
<p>We would want to generate those with roc glue, right?</p>



<a name="486590325"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486590325" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486590325">(Dec 06 2024 at 20:33)</a>:</h4>
<p>I dont think so. Glue is more for generating types defined in the platform, like if you make a record or tag union you would use glue to generate interfacing code in go. It would probably use the Go package that already had impls for RocStr and RocList etc.</p>



<a name="486590548"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486590548" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486590548">(Dec 06 2024 at 20:35)</a>:</h4>
<p>So the builtins should live in a Go package/library somwhere. e.g. <code>RocResult</code>, <code>RocList</code></p>
<p>And custom types specific to the platform are generated by glue. E.g. <code>HttpResponse</code>, <code>File</code></p>



<a name="486590734"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486590734" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486590734">(Dec 06 2024 at 20:36)</a>:</h4>
<p>Which builtin Roc types would we want to have hand implementations of in other languages? It seems like that could be a maintenance issue. Str and List are fairly complex already and the more different implementations we have the harder they will be to change without breaking things.</p>



<a name="486591253"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486591253" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486591253">(Dec 06 2024 at 20:40)</a>:</h4>
<p>It seems like a world where glue creates a working but perhaps suboptimal impl of those types for you would be nice, as long as you keep the option of replacing them with better implementations manually.</p>



<a name="486591529"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486591529" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486591529">(Dec 06 2024 at 20:42)</a>:</h4>
<p>glue/README.md agrees with what you're saying though.</p>



<a name="486592234"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486592234" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486592234">(Dec 06 2024 at 20:48)</a>:</h4>
<p>I noticed that <code>build.roc</code> in <a href="https://github.com/lukewilliamboswell/roc-platform-template-go">https://github.com/lukewilliamboswell/roc-platform-template-go</a> tells the <code>go</code> command to use <code>zig cc</code>, meaning there's a dependency on Zig. Is that necessary?</p>



<a name="486615946"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486615946" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486615946">(Dec 07 2024 at 00:40)</a>:</h4>
<p>I really think for these types we should enable roc to expose a c abi interface for the platforms to use</p>



<a name="486615958"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486615958" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486615958">(Dec 07 2024 at 00:40)</a>:</h4>
<p>Then the platform can just see them as an opaque bag of bytes</p>



<a name="486616002"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486616002" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486616002">(Dec 07 2024 at 00:41)</a>:</h4>
<p>I came to this realization after making Dict. It is too complex to be worth implementing in platforms, yet it would still be very convenient to have in platforms.</p>



<a name="486616089"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486616089" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486616089">(Dec 07 2024 at 00:42)</a>:</h4>
<p>That said, monomorphization makes this all a tad tricky.</p>



<a name="486617219"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486617219" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486617219">(Dec 07 2024 at 00:57)</a>:</h4>
<p>we should be able to expose zig versions that take size and alignment as arguments to all their operations, which the host needs anyway - and I think that basically takes care of monomorphization except for refcounting, yeah?</p>



<a name="486621251"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486621251" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486621251">(Dec 07 2024 at 01:50)</a>:</h4>
<p>Yeah. Something along those lines (but doesn't work for dict which is written in roc)</p>



<a name="486621405"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486621405" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486621405">(Dec 07 2024 at 01:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/channel/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486615946">said</a>:</p>
<blockquote>
<p>I really think for these types we should enable roc to expose a c abi interface for the platforms to use</p>
</blockquote>
<p>Can you give me a simple example? </p>
<p>Like <code>List.len</code> maybe?</p>



<a name="486621449"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486621449" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486621449">(Dec 07 2024 at 01:53)</a>:</h4>
<p>It'd be great to explore this direction further... particularly if it greatly simplifies the glue stuff Sven is working on</p>



<a name="486621514"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486621514" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486621514">(Dec 07 2024 at 01:54)</a>:</h4>
<p>Or at least simplifies the roc_std for zig/rust/go we've been talking about</p>



<a name="486621670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486621670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486621670">(Dec 07 2024 at 01:57)</a>:</h4>
<p>It would be very similar to the zig builtins for roc list, but exposed as c abi. Then each language is ready of implementing roc list would just wrap our single bespoke c abi implementation</p>



<a name="486621997"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486621997" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486621997">(Dec 07 2024 at 02:01)</a>:</h4>
<p>Really might be best to clean up the zig builtins and use that as the base. Though might be better to avoid the zig dependency and make this all in C.</p>



<a name="486622082"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486622082" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486622082">(Dec 07 2024 at 02:02)</a>:</h4>
<p>Also, this still isn't enough cause our zig builtins don't understand refcounting. This is part of the reason I think it would be better for roc to generate these functions for each platform.</p>



<a name="486622125"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486622125" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486622125">(Dec 07 2024 at 02:03)</a>:</h4>
<p>Is there an opportunity to kill two birds, with the zig package we want to make?</p>



<a name="486622128"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486622128" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486622128">(Dec 07 2024 at 02:03)</a>:</h4>
<p>Imagine that instead of exposing init and respond from basic webserver, it also exposed a whole suite of functions related to each of the primitives used in init and update.</p>



<a name="486622203"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486622203" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486622203">(Dec 07 2024 at 02:04)</a>:</h4>
<p>Oh interesting... you're imagining roc exposes more functions that are related for the primitive types exposed to the host. Nice</p>



<a name="486622322"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486622322" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486622322">(Dec 07 2024 at 02:06)</a>:</h4>
<p>Like in the roc-on-simple example.. </p>
<div class="codehilite"><pre><span></span><code>Smf : {
    header : Header,
    tracks : List Track,
}

mainForHost! : {} =&gt; Smf
</code></pre></div>
<p>Here we might include a <code>void roc__smf_refcount_inc()</code> or something?</p>



<a name="486622372"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486622372" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486622372">(Dec 07 2024 at 02:07)</a>:</h4>
<p>Exactly. Plus the primitives to interactive with a list of <code>Track</code> (including refcounting a Track).</p>



<a name="486622389"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486622389" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486622389">(Dec 07 2024 at 02:07)</a>:</h4>
<p>This stuff is hard to build out in glue, but roc already knows how to do it</p>



<a name="486622409"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486622409" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486622409">(Dec 07 2024 at 02:07)</a>:</h4>
<p>So it would be nice if roc could expose it to the platform</p>



<a name="486622466"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486622466" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486622466">(Dec 07 2024 at 02:08)</a>:</h4>
<p>Then glue truly is just glue code and not implementation code</p>



<a name="486622478"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486622478" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486622478">(Dec 07 2024 at 02:08)</a>:</h4>
<p>This is where I think we need to head</p>



<a name="486635944"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486635944" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486635944">(Dec 07 2024 at 05:22)</a>:</h4>
<p>yeah we should spec this out!</p>



<a name="486635974"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486635974" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486635974">(Dec 07 2024 at 05:23)</a>:</h4>
<p>definitely seems like the right approach based on what we've learned <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="486636134"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486636134" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486636134">(Dec 07 2024 at 05:25)</a>:</h4>
<p>I think keeping the implementation in Zig should be fine - either way, the host just needs some extern definition, which can be hardcoded .h and .rs files that we can write tests against using zig alone, and which glue can just copy/paste into the output dir</p>



<a name="486648313"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486648313" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oskar Hahn <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486648313">(Dec 07 2024 at 08:28)</a>:</h4>
<p>Coming  back to go glue code. I also tried it some time ago. My problem was, that cgo needs a .h file, with all types. This .h file needs also the signatures of the provided functions, like this one: <a href="https://github.com/lukewilliamboswell/roc-platform-template-go/blob/0e8d53b6087662ea231a164a059f1c2ba0a91c34/host/roc/app.h#L14">https://github.com/lukewilliamboswell/roc-platform-template-go/blob/0e8d53b6087662ea231a164a059f1c2ba0a91c34/host/roc/app.h#L14</a></p>
<p>But this is currently impossible with glue, since the signature of the exported functions are not provided by the glue API.</p>
<p>The separate .h file is also the reason, why I don't think a roc-std-go package is possible. Your app.h file could not import/include the std.h file, provided by the package. So your app.h file could not use types like RocStr. Therefore I think the std types have to be generated for each app with glue.</p>
<p>I don't know if this would change, if roc would provide the types by API. I think it would still be necessary to generate the type definition and all std function definition with glue to use them inside the app.h.</p>



<a name="486657483"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486657483" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sven van Caem <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486657483">(Dec 07 2024 at 10:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486622128">said</a>:</p>
<blockquote>
<p>Imagine that instead of exposing init and respond from basic webserver, it also exposed a whole suite of functions related to each of the primitives used in init and update.</p>
</blockquote>
<p>Love this idea! Would really lighten the load for a glue spec author.</p>



<a name="486683970"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486683970" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Harden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486683970">(Dec 07 2024 at 16:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="496321">Oskar Hahn</span> <a href="#narrow/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486648313">said</a>:</p>
<blockquote>
<p>Coming  back to go glue code. I also tried it some time ago. My problem was, that cgo needs a .h file, with all types. This .h file needs also the signatures of the provided functions, like this one: <a href="https://github.com/lukewilliamboswell/roc-platform-template-go/blob/0e8d53b6087662ea231a164a059f1c2ba0a91c34/host/roc/app.h#L14">https://github.com/lukewilliamboswell/roc-platform-template-go/blob/0e8d53b6087662ea231a164a059f1c2ba0a91c34/host/roc/app.h#L14</a></p>
<p>But this is currently impossible with glue, since the signature of the exported functions are not provided by the glue API.</p>
<p>The separate .h file is also the reason, why I don't think a roc-std-go package is possible. Your app.h file could not import/include the std.h file, provided by the package. So your app.h file could not use types like RocStr. Therefore I think the std types have to be generated for each app with glue.</p>
<p>I don't know if this would change, if roc would provide the types by API. I think it would still be necessary to generate the type definition and all std function definition with glue to use them inside the app.h.</p>
</blockquote>
<p>If all Roc values were passed around as opaque pointers in the API you wouldn't need any types in the .h files.</p>



<a name="486688552"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486688552" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486688552">(Dec 07 2024 at 17:25)</a>:</h4>
<p>well it's pretty common that the host wants to do things with the values it gets from Roc, e.g. read the contents of a string or list</p>



<a name="486688565"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486688565" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486688565">(Dec 07 2024 at 17:25)</a>:</h4>
<p>so in those cases it needs something more than opaque pointers</p>



<a name="486689831"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486689831" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486689831">(Dec 07 2024 at 17:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F/near/486636134">said</a>:</p>
<blockquote>
<p>I think keeping the implementation in Zig should be fine</p>
</blockquote>
<p>I don't think so. Zig does not know how to recount things. Only roc does. It depends on roc passing it functions that tell it how to recount things. I think we need to leave this all to roc. Otherwise, glue becomes way harder.</p>



<a name="486690109"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486690109" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486690109">(Dec 07 2024 at 17:46)</a>:</h4>
<p>Roc will surely already be generating these functions anyway, it needs them to do refcounting of things passed into roc.</p>



<a name="486690618"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486690618" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486690618">(Dec 07 2024 at 17:54)</a>:</h4>
<p>I guess after recounting, the rest could be in zig theoretically.</p>
<p>This is where you get a trade from:<br>
Extreme 1, like today, platform has to implement everything, super brittle</p>
<p>To:<br>
Extreme n, platform just needs to know the size of the type and which methods it has (including methods to get and set the data in the object). Roc exposes all of those via cffi. The platform doesn't even need to know the layout of the type.</p>
<hr>
<p>I think we should be way closer to extreme n. Maybe even at extreme n. Extreme n does have a minor cost in perf due to there being no inlining between platform and app, but it removes tons of what makes the API brittle and hard to work with.</p>



<a name="486690926"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486690926" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486690926">(Dec 07 2024 at 17:58)</a>:</h4>
<p>oh sorry I mainly meant zig as opposed to C</p>



<a name="486690962"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486690962" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486690962">(Dec 07 2024 at 17:59)</a>:</h4>
<p>it makes sense that Roc would expose functions to the host, and that some of those would be implemented in the Roc code base using Zig</p>



<a name="486690990"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486690990" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486690990">(Dec 07 2024 at 17:59)</a>:</h4>
<p>but I don't think we would need to change any internal implementations from Zig to C to facilitate any of that</p>



<a name="486690997"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486690997" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486690997">(Dec 07 2024 at 17:59)</a>:</h4>
<p>Oh yeah, for sure not</p>



<a name="486691093"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486691093" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486691093">(Dec 07 2024 at 18:00)</a>:</h4>
<p>Literally could make an exposed function for every builtin if we wanted. No need to implement anything in c for that.</p>



<a name="486691152"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486691152" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486691152">(Dec 07 2024 at 18:01)</a>:</h4>
<p>yeah, basically we could look through every type that's exposed to the host and expose all the appropriate functions for it</p>



<a name="486691186"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486691186" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486691186">(Dec 07 2024 at 18:01)</a>:</h4>
<p>and put them in their own sections so a linker can DCE any unused ones</p>



<a name="486691304"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486691304" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486691304">(Dec 07 2024 at 18:02)</a>:</h4>
<p>and in a surgical linking future we could even do it lazily</p>



<a name="486691322"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486691322" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486691322">(Dec 07 2024 at 18:02)</a>:</h4>
<p>actually I guess just preprocessing the host is enough <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="486691424"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486691424" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486691424">(Dec 07 2024 at 18:04)</a>:</h4>
<p>like see which functions the host is dynamically linking in, and go generate them all (or give an error if it's asking for something that's malformed or shouldn't be exposed to the host)</p>



<a name="486691453"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486691453" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486691453">(Dec 07 2024 at 18:04)</a>:</h4>
<p>that way we wouldn't waste time generating a ton of monomorphized functions that the host wouldn't even use in practice anyway</p>



<a name="486691597"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486691597" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486691597">(Dec 07 2024 at 18:06)</a>:</h4>
<p>I guess with <code>--no-link</code> you'd have to generate them all anyway, unless we gave <code>--no-link</code> an optional host to analyze but not link</p>



<a name="486691728"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486691728" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486691728">(Dec 07 2024 at 18:08)</a>:</h4>
<p>Yeah, exactly this. And I don't think we need to expose the full standard library just enough primitives to use each type. Host languages tend to have enough tools to deal with most things (like mapping folding, looping, etc)</p>



<a name="486704023"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486704023" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486704023">(Dec 07 2024 at 21:00)</a>:</h4>
<p>yeah that makes sense to me! <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="486704038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486704038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486704038">(Dec 07 2024 at 21:00)</a>:</h4>
<p>is there anything blocking that? I can't think of anything</p>



<a name="486710865"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486710865" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486710865">(Dec 07 2024 at 22:35)</a>:</h4>
<p>Not that I can think of.</p>



<a name="486710948"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/486710948" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#486710948">(Dec 07 2024 at 22:36)</a>:</h4>
<p>As I said earlier, it could be done manually today by adding a ton more functions exposed to the host. Should be very doable to automatically generate them instead.</p>



<a name="492682354"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/492682354" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Norbert Hajagos <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#492682354">(Jan 09 2025 at 10:10)</a>:</h4>
<p>Was scanning zulip for some knowledge regarding the builtins when I came across this. Did this discussion produce a GH issue? Would be a shame to lose the conclusion.</p>



<a name="492683153"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/492683153" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#492683153">(Jan 09 2025 at 10:14)</a>:</h4>
<p>I don't think we have an issue. But Brendan has mentioned a couple of times that he plans to work on this</p>



<a name="492684288"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/492684288" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#492684288">(Jan 09 2025 at 10:20)</a>:</h4>
<p><a class="message-link" href="/#narrow/channel/316715-contributing/topic/projects/near/491535450">#contributing &gt; projects @ 💬</a></p>



<a name="492693392"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/492693392" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Norbert Hajagos <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#492693392">(Jan 09 2025 at 11:04)</a>:</h4>
<p>Ah, thanks Luke, saw that thread when browsing, but it was in the additional projects section. It feels like <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span>  can do anything <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="492758495"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Does%20the%20platform%20provide%20builtins%3F/near/492758495" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Does.20the.20platform.20provide.20builtins.3F.html#492758495">(Jan 09 2025 at 16:06)</a>:</h4>
<p>Anything with the backend, maybe....I don't tend to touch anything type checker and up.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>