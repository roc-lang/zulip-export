<html>
<head><meta charset="utf-8"><title>File example crashes · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html">File example crashes</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="403246976"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403246976" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fyzics <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403246976">(Nov 20 2023 at 21:17)</a>:</h4>
<p>Re: <a href="https://www.reddit.com/r/ProgrammingLanguages/comments/17zp4m7/comment/ka23kwi/">https://www.reddit.com/r/ProgrammingLanguages/comments/17zp4m7/comment/ka23kwi/</a><br>
<span class="user-mention" data-user-id="281383">@Richard Feldman</span> </p>
<p>OS: Linux<br>
Kernel: 6.6.1-arch1-1 <br>
Roc version: nightly pre-release, built from commit 48e9b53 on So 19 Nov 2023 09:07:19 UTC</p>
<h3>Steps:</h3>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/roc-lang/roc.git
<span class="nb">cd</span><span class="w"> </span>roc/examples/cli
roc<span class="w"> </span>build<span class="w"> </span>file.roc
./file
</code></pre></div>
<h3>Error:</h3>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="c1">#FISH</span>
cwd:<span class="w"> </span>/home/dev/programs/rocgit/examples/cli
Dir.list...
munmap_chunk<span class="o">()</span>:<span class="w"> </span>invalid<span class="w"> </span>pointer
fish:<span class="w"> </span>Job<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="s1">'./file'</span><span class="w"> </span>terminated<span class="w"> </span>by<span class="w"> </span>signal<span class="w"> </span>SIGABRT<span class="w"> </span><span class="o">(</span>Abort<span class="o">)</span>

<span class="c1">#BASH</span>
cwd:<span class="w"> </span>/home/dev/programs/rocgit/examples/cli
Dir.list...
munmap_chunk<span class="o">()</span>:<span class="w"> </span>invalid<span class="w"> </span>pointer
Aborted<span class="w"> </span><span class="o">(</span>core<span class="w"> </span>dumped<span class="o">)</span>
</code></pre></div>



<a name="403251352"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403251352" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403251352">(Nov 20 2023 at 21:52)</a>:</h4>
<p>thanks for reporting this! Would you mind sharing what Linux distro this was?</p>



<a name="403251369"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403251369" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403251369">(Nov 20 2023 at 21:52)</a>:</h4>
<p>might help us reproduce</p>



<a name="403252153"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403252153" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403252153">(Nov 20 2023 at 21:59)</a>:</h4>
<p>I'm pretty sure this is an old issue that I have looked at a few times and am still confused by.</p>



<a name="403252405"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403252405" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403252405">(Nov 20 2023 at 22:01)</a>:</h4>
<p>interesting - when  I <code>dbg</code> the error, it's showing <code>NotSeekable</code> - <span class="user-mention" data-user-id="515757">@Luke Boswell</span> any ideas on why basic-cli would be giving a <code>NotSeekable</code> error there? Maybe a glue issue, and the value is coming across wrong?</p>



<a name="403253167"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403253167" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fyzics <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403253167">(Nov 20 2023 at 22:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/231634-beginners/topic/File.20example.20crashes/near/403251352">said</a>:</p>
<blockquote>
<p>thanks for reporting this! Would you mind sharing what Linux distro this was?</p>
</blockquote>
<p>EndeavourOS Linux x86_64</p>



<a name="403253283"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403253283" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403253283">(Nov 20 2023 at 22:07)</a>:</h4>
<p>thanks!</p>



<a name="403253400"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403253400" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403253400">(Nov 20 2023 at 22:08)</a>:</h4>
<p><span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> any chance your recent glue updates would fix this in basic-cli 0.6, or at least change the error in a way that gives a clue what the problem is?</p>



<a name="403254673"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403254673" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403254673">(Nov 20 2023 at 22:18)</a>:</h4>
<p>not that I know of. But maybe changing to passing pointers for glue functions might fix this.</p>



<a name="403254762"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403254762" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403254762">(Nov 20 2023 at 22:18)</a>:</h4>
<p>In general I think <code>Dir.list</code> has been broken for a long while due to some strange memory bug. It may also be what is breaking <a class="stream-topic" data-stream-id="231634" href="/#narrow/stream/231634-beginners/topic/listing.20files.20in.20a.20directory">#beginners &gt; listing files in a directory</a></p>



<a name="403254803"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403254803" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403254803">(Nov 20 2023 at 22:19)</a>:</h4>
<p>Been a while since I looked at any of this, so would have to refresh myself</p>



<a name="403255605"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403255605" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403255605">(Nov 20 2023 at 22:25)</a>:</h4>
<p>Dir.list is definitely broken on basic cli. I just fixed it for basic webserver yesterday. We can copy-paste that implementation and it should be identical. (on my phone rn)</p>



<a name="403255801"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403255801" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403255801">(Nov 20 2023 at 22:26)</a>:</h4>
<p>I was thinking this morning before work I should make a PR for that before someone runs into that issue. <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="403256090"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403256090" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakub <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403256090">(Nov 20 2023 at 22:28)</a>:</h4>
<p><span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> <span class="user-mention" data-user-id="515757">@Luke Boswell</span> how difficult is fixing this type of bug for a person who only has a vague of how Rust and how compilers work? is it more like:</p>
<ul>
<li>start with something simpler, look for <code>good first issue</code> tag</li>
<li>this is actually not that difficult even for people without the background knowledge</li>
</ul>



<a name="403256093"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403256093" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403256093">(Nov 20 2023 at 22:28)</a>:</h4>
<p>Im not sure about the NotSeekable error specifically, I can look into it but I'm pretty sure the current implementation just returns a hardcoded Error tag.</p>



<a name="403256336"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403256336" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403256336">(Nov 20 2023 at 22:30)</a>:</h4>
<p>This is super easy really. There is an identical implementation working in basic-webserver that can be copied into basic-cli. Its in the platform/src/lib.rs file. Both called dirList. Acutally I think <code>roc_fx_dirList</code> and <code>dir_list</code>.</p>



<a name="403257010"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403257010" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakub <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403257010">(Nov 20 2023 at 22:36)</a>:</h4>
<p>found it, <code>todo!("handle Dir.list error");</code> might be the reason ;)</p>



<a name="403257433"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403257433" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403257433">(Nov 20 2023 at 22:40)</a>:</h4>
<p>Oh, I just realized that this is using the <code>file.roc</code> from the roc repo, which uses the super old fork of basic cli. I think that we should really remove that old fork of basic cli and make these either:</p>
<ol>
<li>depend on the package url</li>
<li>use git submodules to import the real basic cli.</li>
</ol>
<p>As it stands, we are just asking for extra bugs and confusion.</p>



<a name="403257615"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403257615" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403257615">(Nov 20 2023 at 22:41)</a>:</h4>
<p>We wanted to keep some examples in the repository for testing reasons. Maybe these should be moved out of the examples folder and deeper into a testing crate?</p>



<a name="403257739"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403257739" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403257739">(Nov 20 2023 at 22:42)</a>:</h4>
<p>A lot of people click on the examples folder in the top level of the repository</p>



<a name="403257955"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403257955" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403257955">(Nov 20 2023 at 22:44)</a>:</h4>
<p>I know, I strongly think we should re-evaluate that for anything basic-cli, basic-cli lives elsewhere now. Also, yeah, anything depending on a local basic-cli should move to cli testing examples. We can still have examples that use the proper distribution of basic cli</p>



<a name="403258640"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403258640" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403258640">(Nov 20 2023 at 22:48)</a>:</h4>
<p>Also, <code>NotSeekable</code> and <code>Other</code> are 1 away from each other in the enum. Maybe something is off by one or glue needs to be regenerated? Not fully sure, but it should be returning <code>Other</code> according to the current source code. Some reason, that is just becoming a <code>NotSeekable</code> I guess it is also possible that it is a <code>dbg</code> bug.</p>



<a name="403262468"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/File%20example%20crashes/near/403262468" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roberto Rodriguez Jr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/File.20example.20crashes.html#403262468">(Nov 20 2023 at 23:22)</a>:</h4>
<p>cwd: /home/bob/roc/examples/cli<br>
Dir.list...<br>
fish: Job 1, 'roc run file.roc' terminated by signal SIGSEGV (Address boundary error)</p>
<p>roc build file.roc<br>
<span aria-label="hammer" class="emoji emoji-1f528" role="img" title="hammer">:hammer:</span> Rebuilding platform...<br>
0 errors and 0 warnings found in 590 ms while successfully building:<br>
 file</p>
<p>./file echo.roc <br>
cwd: /home/bob/roc/examples/cli<br>
Dir.list...<br>
fish: Job 1, './file echo.roc' terminated by signal SIGSEGV (Address boundary error)</p>
<p>./file <br>
cwd: /home/bob/roc/examples/cli<br>
Dir.list...<br>
fish: Job 1, './file' terminated by signal SIGSEGV (Address boundary error)</p>
<p>Just wanted to update that it still fails? Im a n00b.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>