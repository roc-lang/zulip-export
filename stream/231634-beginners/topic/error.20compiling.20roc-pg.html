<html>
<head><meta charset="utf-8"><title>error compiling roc-pg · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html">error compiling roc-pg</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="524115412"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524115412" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Don P <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524115412">(Jun 15 2025 at 08:51)</a>:</h4>
<p>I'm trying to use the hello-world example from the roc postgres client, but compilation gives this error</p>
<p>── UNKNOWN OPERATOR in src/../roc-pg/src/Pg/Client.roc ─────────────────────────</p>
<p>This looks like an operator, but it's not one I recognize!</p>
<p>39│      stream &lt;- Tcp.withConnect host port<br>
                ^^</p>
<p>I have no specific suggestion for this operator, see</p>



<a name="524115442"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524115442" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Don P <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524115442">(Jun 15 2025 at 08:52)</a>:</h4>
<p>I'm using nightly-roc, so maybe that is the problem?</p>
<p>roc nightly pre-release, built from commit c47a8e9 on Sa 22 Mär 2025 09:02:05 UTC</p>



<a name="524141118"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524141118" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524141118">(Jun 15 2025 at 16:10)</a>:</h4>
<p>That is the backpassing operator which has been removed from the language. I think roc-pg will need to be substantially refactored to be compiled again</p>



<a name="524158180"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524158180" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Don P <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524158180">(Jun 15 2025 at 22:03)</a>:</h4>
<p>okay thanks for the explanation. is there any sql client library available for roc?</p>



<a name="524160367"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524160367" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524160367">(Jun 15 2025 at 22:54)</a>:</h4>
<p>Sorry <span class="user-mention" data-user-id="762219">@Don P</span> I don't think there is any right now.</p>



<a name="524161867"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524161867" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524161867">(Jun 15 2025 at 23:35)</a>:</h4>
<p>There is SQLite in basic webserver</p>



<a name="524162401"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524162401" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524162401">(Jun 15 2025 at 23:47)</a>:</h4>
<p>Yeah, I was thinking of cross-platform libraries. The SQlite in basic-cli and basic-webserver work nice imo</p>



<a name="524171178"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524171178" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Don P <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524171178">(Jun 16 2025 at 02:40)</a>:</h4>
<p>I've left an issue on the roc-pg repo asking for the latest version it did compile for. It looks like the project has been idle for a year. For my purposes I can export some data from psql into sqlite for playing around with roc. thanks.</p>



<a name="524171570"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524171570" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524171570">(Jun 16 2025 at 02:48)</a>:</h4>
<p><span class="user-mention" data-user-id="489294">@Agus Zubiaga</span> was instrumental with the design and evolution of the map-2 record builders, which enables a really nice API for sql clients and is much simpler than the backpassing approach or the other record builders API we have before map-2 based ones. </p>
<p>I'm sure he'll be keen to upgrade the package as soon as we have the new compiler online as it's a super cool API and very unique to roc. I don't know of any other language that will have as nice a story for working with sql as roc 0.1  <span aria-label="heart eyes" class="emoji emoji-1f60d" role="img" title="heart eyes">:heart_eyes:</span> (but I may be biased a little)</p>



<a name="524171687"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524171687" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524171687">(Jun 16 2025 at 02:50)</a>:</h4>
<p>For reference, this is an example of the record builder API from basic-cli</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">query_todos_by_status</span><span class="o">!</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Str</span><span class="p">,</span><span class="w"> </span><span class="nx">Str</span><span class="w"> </span><span class="nf">=&gt;</span><span class="w"> </span><span class="nx">Result</span><span class="w"> </span><span class="p">(</span><span class="nx">List</span><span class="w"> </span><span class="nx">Todo</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">Sqlite</span><span class="p">.</span><span class="nx">SqlDecodeErr</span><span class="w"> </span><span class="nx">_</span><span class="p">)</span>
<span class="nx">query_todos_by_status</span><span class="o">!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="nx">db_path</span><span class="p">,</span><span class="w"> </span><span class="nx">status</span><span class="o">|</span>
<span class="w">    </span><span class="nx">Sqlite</span><span class="p">.</span><span class="nx">query_many</span><span class="o">!</span><span class="p">(</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nv">path</span><span class="o">:</span><span class="w"> </span><span class="nx">db_path</span><span class="p">,</span>
<span class="w">            </span><span class="nv">query</span><span class="o">:</span><span class="w"> </span><span class="s">"SELECT id, task, status FROM todos WHERE status = :status;"</span><span class="p">,</span>
<span class="w">            </span><span class="nv">bindings</span><span class="o">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nv">name</span><span class="o">:</span><span class="w"> </span><span class="s">":status"</span><span class="p">,</span><span class="w"> </span><span class="nv">value</span><span class="o">:</span><span class="w"> </span><span class="nb">String</span><span class="p">(</span><span class="nx">status</span><span class="p">)</span><span class="w"> </span><span class="p">}],</span>
<span class="w">            </span><span class="nv">rows</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Sqlite</span><span class="p">.</span><span class="nx">decode_record</span><span class="w"> </span><span class="o">&lt;-</span>
<span class="w">                </span><span class="nv">id</span><span class="o">:</span><span class="w"> </span><span class="nx">Sqlite</span><span class="p">.</span><span class="nx">i64</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Sqlite</span><span class="p">.</span><span class="nx">map_value</span><span class="p">(</span><span class="nx">Num</span><span class="p">.</span><span class="nx">to_str</span><span class="p">),</span>
<span class="w">                </span><span class="nv">task</span><span class="o">:</span><span class="w"> </span><span class="nx">Sqlite</span><span class="p">.</span><span class="nx">str</span><span class="p">(</span><span class="s">"task"</span><span class="p">),</span>
<span class="w">                </span><span class="nv">status</span><span class="o">:</span><span class="w"> </span><span class="nx">Sqlite</span><span class="p">.</span><span class="nx">str</span><span class="p">(</span><span class="s">"status"</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Sqlite</span><span class="p">.</span><span class="nx">map_value_result</span><span class="p">(</span><span class="nx">decode_todo_status</span><span class="p">),</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">)</span>
</code></pre></div>



<a name="524220378"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524220378" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niclas Ahden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524220378">(Jun 16 2025 at 10:02)</a>:</h4>
<p>I posted a PR for migrating to the new syntax, but it's incomplete as I didn't touch the query builder and it may contain choices which Agus would make differently. I couldn't live without <code>roc-pg</code> in my life, though, so I created a fork with releases here: <a href="https://github.com/growthagent/roc-pg">https://github.com/growthagent/roc-pg</a></p>
<p>I'll retire the fork once <code>roc-pg</code> is back in action, but it's fine to use for now if you'd like. Note that I've made some unholy changes that may or may not make it into <code>roc-pg</code>, like how record builders work now and I've introduced <code>Maybe</code> for nullable input and outputs. Here's a full example: <a href="https://github.com/growthagent/roc-pg/blob/main/examples/query-with-record-builder.roc">https://github.com/growthagent/roc-pg/blob/main/examples/query-with-record-builder.roc</a></p>
<p>Happy paddling!</p>



<a name="524365489"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20compiling%20roc-pg/near/524365489" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20compiling.20roc-pg.html#524365489">(Jun 17 2025 at 03:36)</a>:</h4>
<p>Hey all! I'm not quite back in action, but I did publish <a href="https://github.com/agu-z/roc-pg/releases/tag/0.1.1"><code>roc-pg@0.1.1</code></a> with <span class="user-mention" data-user-id="524503">@Niclas Ahden</span>'s migration (thx so much <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span>).</p>
<p>I've decided to remove the query builder from <code>main</code> as I never quite got it over the line, and I don't have the time to dedicate to it.  I'd love to return to it when the new compiler is out, and things are calmer in my life.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>