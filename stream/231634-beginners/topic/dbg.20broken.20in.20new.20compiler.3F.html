<html>
<head><meta charset="utf-8"><title>dbg broken in new compiler? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html">dbg broken in new compiler?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="562616789"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562616789" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562616789">(Dec 09 2025 at 07:52)</a>:</h4>
<p>I'm trying out the new compiler on AoC and my dbg statement has no effect in the terminal.</p>
<p>My code is this:</p>
<div class="codehilite"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.4/6XA8JLWhmG1FSgb8GxPjBs9cGrtRqopohR3KAHYo722z.tar.zst&quot; }

import pf.Stdout
import pf.Stdin

main! = |_args| {
    parsed = parse_input(input)
    dbg &quot;dbg&quot;
    dbg parsed
    Stdout.line!(&quot;stdout&quot;)
    Ok({})
}

parse_input = |_| {
    [Left(21), Right(37)]
}

input = &quot;R33\nL22\n...&quot;
</code></pre></div>
<p>Running <code>roc main.roc</code>, this is only printing "stdout", no "dbg" or other stuff...</p>
<p>I want to report this just for the case that it is inadvertently broken. I will manage without it and it's fine if it is not yet implemented. :)</p>



<a name="562620046"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562620046" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562620046">(Dec 09 2025 at 08:14)</a>:</h4>
<p>not sure about dbg, but since you are trying the new compiler, beware that there are still bugs that are not easy to circumvent to solve AoC puzzles. Currently, my AoC day 1 solution is still leaking memory, and my day2 is still facing panics or other crashes. There has been a lot of progress in bug fixing but still not there yet.</p>



<a name="562620262"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562620262" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562620262">(Dec 09 2025 at 08:15)</a>:</h4>
<p>Yep, I'm aware that the compiler is fresh. Thanks for the heads up! :)</p>



<a name="562620641"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562620641" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562620641">(Dec 09 2025 at 08:18)</a>:</h4>
<p>It was working... but I think we may have broken it recently.</p>



<a name="562620716"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562620716" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562620716">(Dec 09 2025 at 08:18)</a>:</h4>
<p>If you make a GH Issue that would help track it. Do you know if it's all <code>dbg</code> statements?</p>



<a name="562620891"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562620891" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562620891">(Dec 09 2025 at 08:19)</a>:</h4>
<p>I will make a GH issue with all information I have. :)</p>



<a name="562621219"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562621219" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562621219">(Dec 09 2025 at 08:21)</a>:</h4>
<p>Oh I think I know what the issue here specifically is...</p>



<a name="562621248"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562621248" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562621248">(Dec 09 2025 at 08:22)</a>:</h4>
<div class="codehilite" data-code-language="Zig"><pre><span></span><code><span class="c1">/// Roc debug function</span>
<span class="k">fn</span><span class="w"> </span><span class="n">rocDbgFn</span><span class="p">(</span><span class="n">roc_dbg</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="kr">const</span><span class="w"> </span><span class="n">builtins</span><span class="p">.</span><span class="n">host_abi</span><span class="p">.</span><span class="n">RocDbg</span><span class="p">,</span><span class="w"> </span><span class="n">env</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">anyopaque</span><span class="p">)</span><span class="w"> </span><span class="n">callconv</span><span class="p">(.</span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">env</span><span class="p">;</span>
<span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">roc_dbg</span><span class="p">.</span><span class="n">utf8_bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">..</span><span class="n">roc_dbg</span><span class="p">.</span><span class="n">len</span><span class="p">];</span>
<span class="w">    </span><span class="n">std</span><span class="p">.</span><span class="n">log</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="s">"</span><span class="se">\x1b</span><span class="s">[33mRoc dbg:</span><span class="se">\x1b</span><span class="s">[0m {s}"</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="n">message</span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>



<a name="562621299"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562621299" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562621299">(Dec 09 2025 at 08:22)</a>:</h4>
<p>This is from the platform... and we print using <code>std.log.debug</code></p>



<a name="562621380"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562621380" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562621380">(Dec 09 2025 at 08:22)</a>:</h4>
<p>When I built a release of the platform I used <code>-Doptimize=ReleaseSafe</code> so I bet that is a no-op when using that platform from a URL release</p>



<a name="562621555"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562621555" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562621555">(Dec 09 2025 at 08:23)</a>:</h4>
<p>That should probably be using <code>stderr</code> instead, and have a global so it exits with a non-zero exit code I think.</p>



<a name="562621631"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562621631" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562621631">(Dec 09 2025 at 08:24)</a>:</h4>
<p>So I don't think this is a "bug" in Roc but in my zig platform template.</p>



<a name="562621911"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562621911" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562621911">(Dec 09 2025 at 08:25)</a>:</h4>
<p>Yeah so with this test program using the fx test platform</p>
<div class="codehilite"><pre><span></span><code>app [main!] { pf: platform &quot;./platform/main.roc&quot; }

import pf.Stdout
import pf.Stdin

main! = || {
    parsed = parse_input(input)
    dbg &quot;dbg&quot;
    dbg parsed
    Stdout.line!(&quot;stdout&quot;)
}

parse_input = |_| {
    [Left(21), Right(37)]
}

input = &quot;R33\nL22\n...&quot;
</code></pre></div>
<div class="codehilite"><pre><span></span><code>$ roc test/fx/test_app.roc
ROC DBG: &quot;dbg&quot;
ROC DBG: [&lt;tag_union variant=0&gt;, &lt;tag_union variant=1&gt;]
stdout
</code></pre></div>



<a name="562622044"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562622044" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562622044">(Dec 09 2025 at 08:26)</a>:</h4>
<p>Thanks! Do you want me to create an issue on your platform repo? (I have created one on the Roc repo which I will close.)</p>



<a name="562622049"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562622049" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562622049">(Dec 09 2025 at 08:26)</a>:</h4>
<p>Interestingly though... that <code>&lt;tag_union variant=0&gt;</code> looks like a bug to me, that should print the tag I would assume</p>



<a name="562622311"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562622311" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Maas <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562622311">(Dec 09 2025 at 08:28)</a>:</h4>
<p>GH issue: <a href="https://github.com/lukewilliamboswell/roc-platform-template-zig/issues/18">https://github.com/lukewilliamboswell/roc-platform-template-zig/issues/18</a></p>



<a name="562622666"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562622666" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562622666">(Dec 09 2025 at 08:30)</a>:</h4>
<p>If I can fix my issues with the roc build PR I need to make a new release of the platform anyway as that is a breaking change for the platforms, they now require a <code>"targets"</code> section in the platform header</p>



<a name="562635761"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562635761" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562635761">(Dec 09 2025 at 09:36)</a>:</h4>
<p><span class="user-mention" data-user-id="515757">@Luke Boswell</span> so you know, you can now make a release of roc-platform-template-zig by clicking the "Run workflow" button <a href="https://github.com/lukewilliamboswell/roc-platform-template-zig/actions/workflows/release.yml">here</a>.</p>



<a name="562650890"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562650890" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562650890">(Dec 09 2025 at 10:46)</a>:</h4>
<p>Thank you Anton, I hadn't noticed that</p>



<a name="562652091"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/dbg%20broken%20in%20new%20compiler%3F/near/562652091" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/dbg.20broken.20in.20new.20compiler.3F.html#562652091">(Dec 09 2025 at 10:51)</a>:</h4>
<p>The above issue is fixed in <code>commit f3bb846a74cbcbf4f80252e85252d0df79effcfb</code> should be in the next release</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>