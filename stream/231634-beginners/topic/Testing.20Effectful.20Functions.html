<html>
<head><meta charset="utf-8"><title>Testing Effectful Functions · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Testing.20Effectful.20Functions.html">Testing Effectful Functions</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="563522220"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Testing%20Effectful%20Functions/near/563522220" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Redding <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Testing.20Effectful.20Functions.html#563522220">(Dec 12 2025 at 17:03)</a>:</h4>
<p>Does anyone have any advice about how to write tests for effectful functions?</p>
<p>I'm exploring presenting lazy line by line text file access as walk/map/etc over a File.Reader (from basic-cli) but I'm struggling to write any useful tests for these functions which are, by necessity, effectful.</p>
<p>I keep running into "Effect in top-level" errors when I try to use "expect" and I hoping that there's a good way to avoid this or a different approach that I should be taking.</p>



<a name="563523866"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Testing%20Effectful%20Functions/near/563523866" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Testing.20Effectful.20Functions.html#563523866">(Dec 12 2025 at 17:10)</a>:</h4>
<p>I have a design for this, but it's not currently the highest-priority thing to implement <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="563523919"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Testing%20Effectful%20Functions/near/563523919" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Testing.20Effectful.20Functions.html#563523919">(Dec 12 2025 at 17:10)</a>:</h4>
<p>short answer is that it's not implemented yet, sorry about that!</p>



<a name="563530452"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Testing%20Effectful%20Functions/near/563530452" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Redding <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Testing.20Effectful.20Functions.html#563530452">(Dec 12 2025 at 17:41)</a>:</h4>
<p>That's good to know, and I can totally understand it not being a priority.<br>
It's not a show stopper by any means.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>