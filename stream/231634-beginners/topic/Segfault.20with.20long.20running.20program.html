<html>
<head><meta charset="utf-8"><title>Segfault with long running program ¬∑ beginners ¬∑ Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html">Segfault with long running program</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="338287736"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338287736" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338287736">(Feb 27 2023 at 10:25)</a>:</h4>
<p>I have been running the Roc Clock as an actual clock these last few days. The problem is that it consistently seg faults after running for about 8 hours. I‚Äôm guessing this is going to be a hard issue to debug üòÖ<br>
<a href="/user_uploads/22008/3FlS3Q1hCXUI0R_CqwQX1KJ-/Screenshot-2023-02-27-at-3.24.06-AM.png">Seg Faults</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/3FlS3Q1hCXUI0R_CqwQX1KJ-/Screenshot-2023-02-27-at-3.24.06-AM.png" title="Seg Faults"><img src="/user_uploads/22008/3FlS3Q1hCXUI0R_CqwQX1KJ-/Screenshot-2023-02-27-at-3.24.06-AM.png"></a></div>



<a name="338288076"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338288076" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338288076">(Feb 27 2023 at 10:26)</a>:</h4>
<p>Here‚Äôs the code for it if that‚Äôs useful<br>
<a href="https://github.com/Billzabob/roc-clock/blob/main/examples/clock.roc">https://github.com/Billzabob/roc-clock/blob/main/examples/clock.roc</a></p>



<a name="338292708"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338292708" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338292708">(Feb 27 2023 at 10:46)</a>:</h4>
<p>Valgrind might be able to shed more light on the cause, can you execute:</p>
<div class="codehilite"><pre><span></span><code>valgrind --leak-check=full --track-origins=yes ./examples/clock
</code></pre></div>



<a name="338411042"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338411042" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338411042">(Feb 27 2023 at 17:58)</a>:</h4>
<p>Letting the clock run a lot faster could also trigger the segfault much sooner...</p>



<a name="338414640"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338414640" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338414640">(Feb 27 2023 at 18:13)</a>:</h4>
<p>Ya that's a good point. I'm not home right now though, so I'll just let it run it's course today. But if I need to redo this I'll just disconnect the PI from the clock hardware and just run it without all the sleeps.</p>



<a name="338496736"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338496736" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338496736">(Feb 28 2023 at 04:04)</a>:</h4>
<p>Is this useful at all?<br>
<a href="/user_uploads/22008/nBHxYhxYZYxe30G7iXaskbV6/Screenshot-2023-02-27-at-9.03.17-PM.png">Valgrind</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/nBHxYhxYZYxe30G7iXaskbV6/Screenshot-2023-02-27-at-9.03.17-PM.png" title="Valgrind"><img src="/user_uploads/22008/nBHxYhxYZYxe30G7iXaskbV6/Screenshot-2023-02-27-at-9.03.17-PM.png"></a></div>



<a name="338498573"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338498573" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338498573">(Feb 28 2023 at 04:30)</a>:</h4>
<p>haha 12 GB allocated over the course of the application.</p>



<a name="338498639"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338498639" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338498639">(Feb 28 2023 at 04:32)</a>:</h4>
<p>Looks to be str.graphemes that is leaking memory, so that is useful to know.</p>



<a name="338498695"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338498695" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338498695">(Feb 28 2023 at 04:33)</a>:</h4>
<p>Guess I just need to download some more RAM then</p>



<a name="338498907"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338498907" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338498907">(Feb 28 2023 at 04:36)</a>:</h4>
<p>The question is why isn't the memory being freed. Could just be a bug in str.graphemes or could be some other bug in the application that is keeping around the data generated from str.graphemes. I'll try to take a look and see what's going on.</p>



<a name="338499083"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338499083" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338499083">(Feb 28 2023 at 04:39)</a>:</h4>
<p>I have a fuzz test for Str.graphemes (that has never run on arm), but at least on x86_64, it seems to pass consistently. Not definitive of anything, but suggests that the bug if probably not just directly in Str.graphemes.</p>



<a name="338499398"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338499398" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338499398">(Feb 28 2023 at 04:44)</a>:</h4>
<p>Looking at the code, I bet the bug is in Task.loop, or more specifically Effect.loop. I bet that it is not correctly decrementing the refcount of the looped over data between iterations.</p>



<a name="338499407"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338499407" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338499407">(Feb 28 2023 at 04:44)</a>:</h4>
<p>I am gonna try to make a small repro and see.</p>



<a name="338500780"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338500780" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338500780">(Feb 28 2023 at 05:05)</a>:</h4>
<p>Hmmm, unless this issue is arm specific, my guess seems wrong. Somehow numbers is being shared around in a way such that roc never manages to decrement it's refcount to zero, so it is never freed. Maybe another function is missing a decrement.</p>



<a name="338501148"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338501148" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338501148">(Feb 28 2023 at 05:09)</a>:</h4>
<p>As a simple validity check, can you do two tests for me on you pi:</p>
<ol>
<li>
<p><code>numbers = Str.graphemes n</code> -&gt; <code>numbers = lastNumbers</code>. I am pretty sure that this shouldn't crash anytime soon/shouldn't accumulate a ton of memory.</p>
</li>
<li>
<p><code>numbers = Str.graphemes n</code> -&gt; <code>numbers = [ "8", "8", "8", "8" ]</code>. If I am correct, this should still lead to the memory leak and then crash.</p>
</li>
</ol>



<a name="338682128"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338682128" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338682128">(Feb 28 2023 at 20:11)</a>:</h4>
<p>It seems like your hypothesis is correct! <a href="https://github.com/roc-lang/roc/issues/2">#2</a> crashed after a short while and <a href="https://github.com/roc-lang/roc/issues/1">#1</a> has been running for a while without any issues</p>



<a name="338688876"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338688876" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338688876">(Feb 28 2023 at 20:48)</a>:</h4>
<p>Ok. Good to know</p>



<a name="338693353"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338693353" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338693353">(Feb 28 2023 at 21:15)</a>:</h4>
<p>Next i guess i should look at the ir with recounting and see anything missing, otherwise, need to dig into other functions that numbers is passed to. Some built-in likely is simply not correctly handling refcounts.</p>



<a name="338701875"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338701875" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338701875">(Feb 28 2023 at 22:09)</a>:</h4>
<p>Ok. I think I found the issue. Looks like <code>List.map2</code> and <code>List.map3</code> have memory leak.</p>



<a name="338702270"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338702270" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338702270">(Feb 28 2023 at 22:12)</a>:</h4>
<p>minimal repro: <a href="https://github.com/roc-lang/roc/issues/5079">#5079</a></p>



<a name="338704546"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338704546" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338704546">(Feb 28 2023 at 22:29)</a>:</h4>
<p>So I think I was wrong, looks like 1 and 2 above both eventually segfaulted. Does that make sense for the <code>List.mapN</code> thing?</p>



<a name="338704784"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338704784" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338704784">(Feb 28 2023 at 22:31)</a>:</h4>
<p>I think there may be more than one memory leak, just at different speeds. does 1 take longer to segfault?</p>



<a name="338714203"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338714203" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338714203">(Feb 28 2023 at 23:36)</a>:</h4>
<p>Yes seemed like the first one took much longer to seg fault</p>



<a name="338741291"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338741291" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338741291">(Mar 01 2023 at 04:42)</a>:</h4>
<p>Trying to familiarize myself with the codebase. <a href="https://github.com/roc-lang/roc/blob/a6cbc847298a0369c78d333df19e74a0c72df091/crates/compiler/builtins/bitcode/src/list.zig#L238-L293">Am I looking in the right area here</a>? I'm guessing <code>Dec</code> and <code>IncN</code> refer to the reference count?</p>



<a name="338749198"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338749198" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338749198">(Mar 01 2023 at 06:09)</a>:</h4>
<p>Yep and yep</p>



<a name="338749371"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338749371" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338749371">(Mar 01 2023 at 06:10)</a>:</h4>
<p>In this case my guess is something weird is happening with the 2nd to nth list that cause roc to not decrement their refcount after the function. We have a whole system around wether variables are passed to built-ins as owned or borrowed. I am guessing that is the root cause of the bug.</p>



<a name="338749426"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338749426" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338749426">(Mar 01 2023 at 06:11)</a>:</h4>
<p>Though i don't really understand the fundamentals of how that system works/the underlying details.</p>



<a name="338749515"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338749515" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338749515">(Mar 01 2023 at 06:12)</a>:</h4>
<p>Could also be a bug local to those functions directly, but at first glance (and a little messing around), i didn't think so.</p>



<a name="338749890"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338749890" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338749890">(Mar 01 2023 at 06:16)</a>:</h4>
<p>Ownership definition defined here: <a href="https://github.com/roc-lang/roc/blob/main/crates/compiler/mono/src/borrow.rs#L1009">https://github.com/roc-lang/roc/blob/main/crates/compiler/mono/src/borrow.rs#L1009</a></p>



<a name="338821947"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338821947" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338821947">(Mar 01 2023 at 12:20)</a>:</h4>
<p>is there a way we could rewrite those functions to be in pure Roc?</p>



<a name="338822018"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338822018" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338822018">(Mar 01 2023 at 12:21)</a>:</h4>
<p>(using unsafe low-level <code>List</code>-module-only primitives)</p>



<a name="338825525"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338825525" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338825525">(Mar 01 2023 at 12:36)</a>:</h4>
<p>I'd like that to happen, but currently it would have worse performance</p>



<a name="338825673"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338825673" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338825673">(Mar 01 2023 at 12:36)</a>:</h4>
<p>maybe it's worth it for these <code>List.mapN</code> functions though</p>



<a name="338825803"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338825803" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338825803">(Mar 01 2023 at 12:37)</a>:</h4>
<p>for <code>List.map</code> itself I remember the performance is significantly worse. But these days my benchmarking harness segfauls and I cannot figure out why that is</p>



<a name="338849042"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/338849042" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#338849042">(Mar 01 2023 at 14:05)</a>:</h4>
<p>eh let's not degrade perf then</p>



<a name="339009271"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339009271" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339009271">(Mar 02 2023 at 05:55)</a>:</h4>
<p>I think I found the bug. Will push a pr soon.</p>



<a name="339009548"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339009548" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339009548">(Mar 02 2023 at 05:58)</a>:</h4>
<p>essentially we were only decrementing the refcount of the last list in <code>List.mapN</code> functions.</p>



<a name="339009792"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339009792" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339009792">(Mar 02 2023 at 06:00)</a>:</h4>
<p>Entire change is to delete 2 dollar signs in a macro: <a href="https://github.com/roc-lang/roc/pull/5085/files">https://github.com/roc-lang/roc/pull/5085/files</a></p>



<a name="339010727"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339010727" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339010727">(Mar 02 2023 at 06:09)</a>:</h4>
<p><span class="user-mention" data-user-id="580063">@Nick Hallstrom</span> when you get the chance, can you run your clock with this change and valgrind again. I assume there is more than 1 memory leak and want to try and track down what else is leaking memory. Another screenshot like you sent above would be useful in debugging this.</p>



<a name="339196951"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339196951" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339196951">(Mar 02 2023 at 20:17)</a>:</h4>
<p>Got the next one for you<br>
<a href="/user_uploads/22008/DnXC7EcQYKdIV7aRbVDA1Hwa/Screenshot-2023-03-02-at-1.16.37-PM.png">Seg Fault 2</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/DnXC7EcQYKdIV7aRbVDA1Hwa/Screenshot-2023-03-02-at-1.16.37-PM.png" title="Seg Fault 2"><img src="/user_uploads/22008/DnXC7EcQYKdIV7aRbVDA1Hwa/Screenshot-2023-03-02-at-1.16.37-PM.png"></a></div>



<a name="339197009"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339197009" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339197009">(Mar 02 2023 at 20:17)</a>:</h4>
<p>So still another leak with <code>Str.graphemes</code> it looks like?</p>



<a name="339215332"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339215332" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339215332">(Mar 02 2023 at 22:17)</a>:</h4>
<p>Just wondering, is this a <code>--optimized</code> build?</p>



<a name="339216009"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339216009" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339216009">(Mar 02 2023 at 22:22)</a>:</h4>
<p>Also, <code>Str.graphemes</code> is not leaking anymore. It has one block of size 104 bytes. Which is the exact size of a list with 4 small strings in it. It's just that the program crashed, so valgrind noticed the memory is still in use when the program ended.</p>
<p>Hard to say about the other data. I mean, the 32 bytes in 4 blocks that was definitely lost is obviously a leak. I would guess the 1564 bytes in 46 blocks is also leaked, but would need to look at your program for other expected allocations to be sure.</p>



<a name="339216287"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339216287" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339216287">(Mar 02 2023 at 22:24)</a>:</h4>
<p>I think the stack overflow is a separate bug/issue. Maybe a problem with tail recursion or need for the <code>--optimized</code> flag. Given only, 10KB are in use at exit, that shouldn't be enough pressure to end up limiting the stack size.</p>



<a name="339227063"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339227063" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339227063">(Mar 02 2023 at 23:54)</a>:</h4>
<p>Ya, if I didn‚Äôt have the <code>‚Äîoptimize</code> flag, it would seg fault during compilation on the Pi. You were the one that found that workaround I believe.</p>



<a name="339229116"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339229116" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339229116">(Mar 03 2023 at 00:11)</a>:</h4>
<p>Ah, I guess I already forgot the exact contraints</p>



<a name="339229201"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339229201" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339229201">(Mar 03 2023 at 00:12)</a>:</h4>
<p>I'll take another look and see if I have any ideas around the stack overflow</p>



<a name="339234823"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339234823" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339234823">(Mar 03 2023 at 01:00)</a>:</h4>
<p>Ok. I think I found the issue. We have a bug in our generation of <code>Effect.loop</code>. It is not generating a tail recursive function. As such, after some giant number of runs, we get a stack overflow</p>
<p>Not sure if this is specific to your example for some reason or a general issue. Trying to make a minimal repro now.</p>



<a name="339236024"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339236024" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339236024">(Mar 03 2023 at 01:11)</a>:</h4>
<p>Yeah, so far having a hard time generating a repro. I assume that somehow it is related to inlining and llvm.</p>



<a name="339236105"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339236105" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339236105">(Mar 03 2023 at 01:12)</a>:</h4>
<p>I think you have a pretty long chain of tasks with <code>Task.traverse</code> on multiple lists</p>



<a name="339239618"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339239618" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339239618">(Mar 03 2023 at 01:46)</a>:</h4>
<p>Yeah, the generated llvm ir from <code>clock.roc</code> for <code>Effect.loop</code> does not have tail call optimization</p>



<a name="339239663"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339239663" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339239663">(Mar 03 2023 at 01:46)</a>:</h4>
<p>No idea why not so far.</p>



<a name="339240862"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339240862" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339240862">(Mar 03 2023 at 02:03)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/5086">#5086</a> is a minimal repro. Not really sure what is going on though. Some sort of bad reaction of <code>Task.loop</code> being after other Tasks.</p>



<a name="339240983"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339240983" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339240983">(Mar 03 2023 at 02:04)</a>:</h4>
<p><span class="user-mention" data-user-id="580063">@Nick Hallstrom</span> if you can make your program work without <code>init</code> and <code>startup</code>, that will workaround the issue.</p>



<a name="339241445"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339241445" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339241445">(Mar 03 2023 at 02:11)</a>:</h4>
<p>Something like this:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nv">main</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="nx">Task</span><span class="p">.</span><span class="nx">loop</span><span class="w"> </span><span class="p">{</span><span class="nv">initialized</span><span class="o">:</span><span class="w"> </span><span class="nx">Bool</span><span class="p">.</span><span class="nx">false</span><span class="p">,</span><span class="w"> </span><span class="nv">lastNumbers</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s">"8"</span><span class="p">,</span><span class="w"> </span><span class="s">"8"</span><span class="p">,</span><span class="w"> </span><span class="s">"8"</span><span class="p">,</span><span class="w"> </span><span class="s">"8"</span><span class="p">]}</span><span class="w"> </span><span class="nx">run</span>

<span class="p">...</span>

<span class="nv">run</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">\</span><span class="p">{</span><span class="nx">initialized</span><span class="p">,</span><span class="w"> </span><span class="nx">lastNumbers</span><span class="p">}</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="nx">initialized</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nx">_</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">await</span><span class="w"> </span><span class="nx">init</span>
<span class="w">        </span><span class="nx">_</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">await</span><span class="w"> </span><span class="nx">startup</span>
<span class="w">        </span><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">(</span><span class="nx">Step</span><span class="w"> </span><span class="p">{</span><span class="nv">initialized</span><span class="o">:</span><span class="w"> </span><span class="nx">Bool</span><span class="p">.</span><span class="nx">true</span><span class="p">,</span><span class="w"> </span><span class="nx">lastNumbers</span><span class="p">})</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="nx">_</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">await</span><span class="w"> </span><span class="p">(</span><span class="nx">Task</span><span class="p">.</span><span class="nx">sleep</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span>
<span class="w">        </span><span class="nx">n</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">await</span><span class="w"> </span><span class="nx">Time</span><span class="p">.</span><span class="nx">getTime</span>
<span class="w">        </span><span class="nv">numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Str</span><span class="p">.</span><span class="nx">graphemes</span><span class="w"> </span><span class="nx">n</span>
<span class="w">        </span><span class="nx">_</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">await</span><span class="w"> </span><span class="p">(</span><span class="nx">setClock</span><span class="w"> </span><span class="nx">lastNumbers</span><span class="w"> </span><span class="nx">numbers</span><span class="p">)</span>
<span class="w">        </span><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">(</span><span class="nx">Step</span><span class="w"> </span><span class="p">{</span><span class="nx">initialized</span><span class="p">,</span><span class="w"> </span><span class="nv">lastNumbers</span><span class="o">:</span><span class="w"> </span><span class="nx">numbers</span><span class="p">})</span>
</code></pre></div>



<a name="339241718"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339241718" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339241718">(Mar 03 2023 at 02:14)</a>:</h4>
<p>Looks to fix the other memory leak as well</p>



<a name="339247558"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339247558" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339247558">(Mar 03 2023 at 03:25)</a>:</h4>
<p>Oh awesome! I‚Äôll give that a try in the morning. Thanks again Brendan</p>



<a name="339472780"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339472780" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339472780">(Mar 04 2023 at 00:59)</a>:</h4>
<p>Just an update on this. It did indeed fix the issue. It‚Äôs been running for a day with all the sleeps taken out and is still going strong üí™</p>



<a name="339475290"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339475290" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339475290">(Mar 04 2023 at 01:28)</a>:</h4>
<p>yoooo, awesome!</p>



<a name="339475326"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339475326" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339475326">(Mar 04 2023 at 01:29)</a>:</h4>
<p>thanks for helping valgrind these bugs to the surface - now they can be fixed for everyone! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="339774917"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339774917" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339774917">(Mar 06 2023 at 04:24)</a>:</h4>
<p><span class="user-mention" data-user-id="580063">@Nick Hallstrom</span> I believe <a href="https://github.com/roc-lang/roc/pull/5095">https://github.com/roc-lang/roc/pull/5095</a> will solve the stack overflow you ran into above, without needing to workaround</p>



<a name="339775811"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/339775811" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#339775811">(Mar 06 2023 at 04:40)</a>:</h4>
<p>Woohoo <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> I‚Äôll give it a try in the morning. Thanks so much üôè</p>



<a name="340271007"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Segfault%20with%20long%20running%20program/near/340271007" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hallstrom <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Segfault.20with.20long.20running.20program.html#340271007">(Mar 08 2023 at 05:31)</a>:</h4>
<p>Got to this a bit late, but your fix seems to be working! Thanks a bunch Ayaz!</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>