<html>
<head><meta charset="utf-8"><title>New Compiler: segfault running gist example · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html">New Compiler: segfault running gist example</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="561734870"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561734870" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561734870">(Dec 03 2025 at 19:18)</a>:</h4>
<p>Hi all, I am trying to get the new compiler set up for the Advent of Code, but I am running into a segfault. I started with the AoC snippet on the gist, and tried with the latest compiled version of git as well as the latest version of the platform, but I keep getting segfaults. Any ideas on how I can fix that?</p>
<p><code>roc --no-cache day1.roc</code> results in:</p>
<div class="codehilite"><pre><span></span><code>error: Child process /home/personal/.cache/roc/e59c636351ad64c25ba81dca340f7248/temp/roc-tmp-bFsSwh08ITK6jzGnh60qSlf2SM6zBcHO/roc_run_2372458751 killed by signal: 11
error: Child process crashed with segmentation fault (SIGSEGV)
</code></pre></div>
<p>I did notice I got errors for the build tests:</p>
<p><code> ~/.zig/zig build test</code> results in</p>
<div class="codehilite"><pre><span></span><code>Build Summary: 54/57 steps succeeded; 1 failed; 1797/1845 tests passed; 1 skipped; 47 failed
test transitive failure
└─ tests_summary transitive failure
   └─ run test fx_platform_test 0/47 passed, 47 failed

error: the following build command failed with exit code 1:
.zig-cache/o/d9d16c1099fe679e867f0f1a0b415354/build /home/personal/.zig/zig /home/personal/.zig/lib /home/personal/Documents/Dev/roc .zig-cache /home/personal/.cache/zig --seed 0x4a32e7f3 -Z7d6ff281091d6793 test
</code></pre></div>



<a name="561735489"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561735489" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561735489">(Dec 03 2025 at 19:21)</a>:</h4>
<p>By "latest compiled version of git" do you mean you compiled it from the git repo, or you used a published pre-compiled one?</p>



<a name="561735681"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561735681" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561735681">(Dec 03 2025 at 19:23)</a>:</h4>
<p>With that I mean compiled from the git repo. I tried the recommended nightly as well but neither seemed to work (could be that I used the wrong combination of compiler + platform version)</p>



<a name="561735926"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561735926" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561735926">(Dec 03 2025 at 19:24)</a>:</h4>
<p>Currently if you want to make sure you have the latest version from the main branch. The simplest way is to clone fresh, or if you cloned already, you pull main again, then <code>git clean -fdx</code> to remove everything not supposed to be in the folder. Then <code>zig build rebuild-builtins &amp;&amp; zig build</code> and if that’s ok, <code>zig build test</code>. (That’s my paranoid way of making sure I’m good, but maybe some steps aren’t needed ^^)</p>



<a name="561736082"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561736082" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561736082">(Dec 03 2025 at 19:25)</a>:</h4>
<p>Zig compiler must be version 0.15.2 I believe.</p>



<a name="561736500"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561736500" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561736500">(Dec 03 2025 at 19:27)</a>:</h4>
<p>I just cloned, but I followed your steps (for your sanity as well as mine :)), but I still got the same issue.<br>
Also checked the zig version, it is indeed 15.2</p>



<a name="561736636"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561736636" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561736636">(Dec 03 2025 at 19:28)</a>:</h4>
<p>I just set up the roc repo and zig</p>



<a name="561736753"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561736753" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niclas Ahden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561736753">(Dec 03 2025 at 19:29)</a>:</h4>
<p>I pulled latest <code>main</code> (<code>b578eea38f443c1de8e4f3b3f606b17214014e70</code>) and followed the same instructions above and the tests pass. NixOS x86, using the dev shell of<code>./src/flake.nix</code>.</p>
<p>What OS/arch are you on?</p>



<a name="561736977"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561736977" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561736977">(Dec 03 2025 at 19:30)</a>:</h4>
<p>Fedora 42, Kernel 6.17.9</p>



<a name="561737040"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561737040" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561737040">(Dec 03 2025 at 19:31)</a>:</h4>
<p>Any other useful info I can provide?</p>



<a name="561737234"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561737234" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561737234">(Dec 03 2025 at 19:32)</a>:</h4>
<p>Could you share what <code>zig build test --summary all</code> shows please?</p>



<a name="561737239"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561737239" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561737239">(Dec 03 2025 at 19:32)</a>:</h4>
<p>Just reconfirmed the git commit hash</p>



<a name="561737281"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561737281" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561737281">(Dec 03 2025 at 19:32)</a>:</h4>
<p>We haven't tested on fedora yet asfaik</p>



<a name="561737486"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561737486" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561737486">(Dec 03 2025 at 19:34)</a>:</h4>
<p><a href="/user_uploads/22008/yVZbkmjih8Ga_aiFTUJ0csQX/PastedText.txt">PastedText.txt</a></p>



<a name="561737517"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561737517" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561737517">(Dec 03 2025 at 19:34)</a>:</h4>
<p>There you go</p>



<a name="561737590"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561737590" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561737590">(Dec 03 2025 at 19:34)</a>:</h4>
<p>I wonder what tier support fedora has with Zig, that fx platform is using zig std lib calls so it's surprising.</p>



<a name="561737688"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561737688" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561737688">(Dec 03 2025 at 19:34)</a>:</h4>
<p>I am using this exact command as I haven't loaded the path if that's relevant <code> ~/.zig/zig build test --summary all</code></p>



<a name="561738206"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561738206" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561738206">(Dec 03 2025 at 19:38)</a>:</h4>
<p>What does <code>zig build roc</code> give you?</p>



<a name="561738898"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561738898" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561738898">(Dec 03 2025 at 19:41)</a>:</h4>
<p><code>Roc cache not found (nothing to clear)</code>, with zig_out/bin containing the roc binary</p>



<a name="561738905"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561738905" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561738905">(Dec 03 2025 at 19:41)</a>:</h4>
<p>It seems those test are all failing at the same point <code>ensureRocBinary</code></p>



<a name="561739066"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561739066" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561739066">(Dec 03 2025 at 19:42)</a>:</h4>
<p>Ohk, so roc builds... can you run <code>./zig-out/bin/roc version</code></p>



<a name="561739183"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561739183" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561739183">(Dec 03 2025 at 19:43)</a>:</h4>
<p>/home/personal/.roc/latest/roc: /lib64/libtinfo.so.6: no version information available (required by /ho<br>
me/personal/.roc/latest/roc)<br>
roc nightly pre-release, built from commit d73ea109 on Tue 09 Sep 2025 09:02:08 AM UTC</p>
<p>The no version information available error was also present in the old compiler, but everything still worked</p>



<a name="561739283"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561739283" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561739283">(Dec 03 2025 at 19:44)</a>:</h4>
<p>wait, that was the one in path, not the compiled one</p>



<a name="561739334"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561739334" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561739334">(Dec 03 2025 at 19:44)</a>:</h4>
<p>Roc compiler version debug-b578eea3</p>



<a name="561739586"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561739586" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561739586">(Dec 03 2025 at 19:45)</a>:</h4>
<p><code>const roc_binary_path = if (builtin.os.tag == .windows) ".\\zig-out\\bin\\roc.exe" else "./zig-out/bin/roc"</code></p>
<p>Maybe this goes wrong because I am using ~/.zig/zig?</p>



<a name="561739696"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561739696" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561739696">(Dec 03 2025 at 19:46)</a>:</h4>
<p>yeah that'd probably be it</p>



<a name="561739872"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561739872" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561739872">(Dec 03 2025 at 19:47)</a>:</h4>
<p>possibly*</p>



<a name="561740389"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561740389" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561740389">(Dec 03 2025 at 19:50)</a>:</h4>
<p>I have gotten the path working (Nushell shenanigans, now falling back to bash) and now the tests succeed</p>



<a name="561740780"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561740780" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niclas Ahden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561740780">(Dec 03 2025 at 19:52)</a>:</h4>
<p>I was racing to get a Fedora 42 VM running - dropping that! :P</p>



<a name="561741029"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561741029" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561741029">(Dec 03 2025 at 19:54)</a>:</h4>
<p>Okay, so I put the new roc binary in my path and ran the example as on the Gist, but still no dice:</p>
<p><code>roc version</code>: Roc compiler version debug-b578eea3<br>
<code>roc --no-cache day1.roc</code>:</p>
<div class="codehilite"><pre><span></span><code>error: Child process /home/personal/.cache/roc/e59c636351ad64c25ba81dca340f7248/temp/roc-tmp-wCL3AsLNHM1fkMNPe8Wf3IMsSYtHSzdg/roc_run_2372458751 killed by signal: 11
error: Child process crashed with segmentation fault (SIGSEGV)
</code></pre></div>



<a name="561741267"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561741267" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niclas Ahden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561741267">(Dec 03 2025 at 19:55)</a>:</h4>
<p>Does it work if you put the Roc code into <code>test/fx/app.roc</code> of the Roc compiler project and run that from the project root?</p>



<a name="561741415"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561741415" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niclas Ahden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561741415">(Dec 03 2025 at 19:56)</a>:</h4>
<p>If no, could you paste the exact Roc code you're running?</p>



<a name="561741784"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561741784" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561741784">(Dec 03 2025 at 19:58)</a>:</h4>
<p>It could be that the URL from the snippet is an older release of the platform with a known bug it it. I haven't been taking down older links for the zig template platform</p>



<a name="561741961"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561741961" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561741961">(Dec 03 2025 at 19:59)</a>:</h4>
<p>If the zig tests are passing the most logical thing I can think of is the platform</p>



<a name="561742288"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561742288" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561742288">(Dec 03 2025 at 20:01)</a>:</h4>
<p>If your on the latest release of the platfrom and it still fails... I'd be interested to know if <code>zig build</code> succeeds, and then if you can run an fx test app manually.. like <code>.\zig-out\bin\roc test\fx\app.roc</code> etc</p>



<a name="561743020"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561743020" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561743020">(Dec 03 2025 at 20:06)</a>:</h4>
<p>I'm on it, was still faffing about with getting it all running</p>



<a name="561743228"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561743228" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561743228">(Dec 03 2025 at 20:07)</a>:</h4>
<p>I compiled roc and ran <code>./zig-out/bin/roc test/fx/app.roc</code> from the root of the roc compiler repo, still the same error</p>



<a name="561743303"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561743303" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niclas Ahden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561743303">(Dec 03 2025 at 20:08)</a>:</h4>
<p>Can you paste your full Roc source?</p>



<a name="561743367"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561743367" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561743367">(Dec 03 2025 at 20:08)</a>:</h4>
<p>Yes, forgot about that:</p>
<div class="codehilite"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst&quot; }

import pf.Stdout

main! = |_args| {
    Stdout.line!(&quot;Hello, World!&quot;)
    Ok({})
}
</code></pre></div>



<a name="561743507"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561743507" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561743507">(Dec 03 2025 at 20:09)</a>:</h4>
<p><code>zig build test --summary all</code> returns</p>
<p><a href="/user_uploads/22008/LHsU9hXVaQNiJzbQ9yiZuCx9/PastedText.txt">PastedText.txt</a></p>



<a name="561743753"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561743753" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niclas Ahden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561743753">(Dec 03 2025 at 20:11)</a>:</h4>
<p>Using that source I'm segfaulting too:</p>
<div class="codehilite"><pre><span></span><code>./zig-out/bin/roc test/fx/app.roc
error: Child process /home/niclas/.cache/roc/e59c636351ad64c25ba81dca340f7248/temp/roc-tmp-peyESAxE4KSKWkmYBrByTDx2QmyibQwP/roc_run_792223834 killed by signal: 11
error: Child process crashed with segmentation fault (SIGSEGV)
</code></pre></div>
<p>Can run the built-in example (with the built-in platform) fine:</p>
<div class="codehilite"><pre><span></span><code>./zig-out/bin/roc test/fx/app.roc
Hello from stdout!
Line 1 to stdout
Line 2 to stderr
Line 3 to stdout
Error from stderr!
</code></pre></div>
<p>And the segfaulting example is using the latest platform version and compiler version is latest (<code>b578eea38f443c1de8e4f3b3f606b17214014e70</code>).</p>



<a name="561743754"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561743754" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561743754">(Dec 03 2025 at 20:11)</a>:</h4>
<p>All platform versions seem to give the segfault</p>



<a name="561743857"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561743857" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561743857">(Dec 03 2025 at 20:12)</a>:</h4>
<p>Nice! That's one step closer</p>



<a name="561744049"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561744049" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561744049">(Dec 03 2025 at 20:13)</a>:</h4>
<p>Can confirm that the built-in example runs fine:</p>
<div class="codehilite"><pre><span></span><code>Hello from stdout!
Line 1 to stdout
Line 2 to stderr
Line 3 to stdout
Error from stderr!
</code></pre></div>



<a name="561744807"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561744807" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561744807">(Dec 03 2025 at 20:18)</a>:</h4>
<p>Some more interesting findings (all running <code>./zig-out/bin/roc test/fx/app.roc</code>) :</p>
<p>Just importing the platform:</p>
<div class="codehilite"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst&quot; }

import pf.Stdout
import pf.Stderr

str : Str -&gt; Str
str = |s| s

main! = || {
    Stdout.line!(str(&quot;Hello from stdout!&quot;))
    Stdout.line!(str(&quot;Line 1 to stdout&quot;))
    Stderr.line!(str(&quot;Line 2 to stderr&quot;))
    Stdout.line!(str(&quot;Line 3 to stdout&quot;))
    Stderr.line!(str(&quot;Error from stderr!&quot;))
}
</code></pre></div>
<p>gives</p>
<div class="codehilite"><pre><span></span><code>-- TYPE MISMATCH ---------------------------------

This expression is used in an unexpected way:
  ┌─ test/fx/app.roc:9:1
  │
9 │ main! = || {
  │ ^^^^^

It has the type:
    ({}) =&gt; {  }

But the type annotation says it should have the type:
    List(Str) =&gt; Try({  }, [Exit(I32)])

Found 1 error(s) and 0 warning(s) for test/fx/app.roc.
</code></pre></div>
<p>Adding <code>|_args</code> and <code>Ok({})</code></p>
<div class="codehilite"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst&quot; }

import pf.Stdout
import pf.Stderr

str : Str -&gt; Str
str = |s| s

main! = |_args| {
    Stdout.line!(str(&quot;Hello from stdout!&quot;))
    Stdout.line!(str(&quot;Line 1 to stdout&quot;))
    Stderr.line!(str(&quot;Line 2 to stderr&quot;))
    Stdout.line!(str(&quot;Line 3 to stdout&quot;))
    Stderr.line!(str(&quot;Error from stderr!&quot;))
    Ok({})
}
</code></pre></div>
<p>gives</p>
<div class="codehilite"><pre><span></span><code>thread 68341 panic: incorrect alignment
/home/personal/Documents/Dev/roc/src/eval/StackValue.zig:894:39: 0x43b436 in storeListElementCount (mod.zig)
            const ptr = @as([*]usize, @ptrCast(@alignCast(source))) - 2;
                                      ^
/home/personal/Documents/Dev/roc/src/eval/StackValue.zig:190:30: 0x3c6cad in copyToPtr (mod.zig)
        storeListElementCount(dest_list, elements_refcounted);
                             ^
/home/personal/Documents/Dev/roc/src/eval/interpreter.zig:782:30: 0x3cab0b in pushCopy (mod.zig)
            try src.copyToPtr(&amp;self.runtime_layout_store, ptr.?, roc_ops);
                             ^
/home/personal/Documents/Dev/roc/src/eval/interpreter.zig:6434:49: 0x3d3b7d in patternMatchesBind (mod.zig)
                const copied = try self.pushCopy(value, roc_ops);
                                                ^
/home/personal/Documents/Dev/roc/src/eval/interpreter.zig:589:64: 0x3de83e in evaluateExpression (mod.zig)
                    const matched = try self.patternMatchesBind(params[j], arg_value, param_rt_vars[j], roc_ops, &amp;temp_binds, @enumFromInt(0));
                                                               ^
/home/personal/Documents/Dev/roc/src/interpreter_shim/main.zig:174:39: 0x3b9b77 in evaluateFromSharedMemory (main.zig)
    try interpreter.evaluateExpression(expr_idx, ret_ptr, roc_ops, arg_ptr);
                                      ^
/home/personal/Documents/Dev/roc/src/interpreter_shim/main.zig:71:29: 0x3b8f0e in roc_entrypoint (main.zig)
    evaluateFromSharedMemory(entry_idx, ops, ret_ptr, arg_ptr) catch |err| {
                            ^
/home/personal/Documents/Dev/roc/test/fx/platform/host.zig:300:14: 0x282543 in platform_main (host.zig)
    roc__main(&amp;roc_ops, @as(*anyopaque, @ptrCast(&amp;ret)), @as(*anyopaque, @ptrCast(&amp;args)));
             ^
/home/personal/Documents/Dev/roc/test/fx/platform/host.zig:168:18: 0x282668 in main (host.zig)
    platform_main() catch |err| {
                 ^
src/env/__libc_start_main.c:95:2: 0xaca54c in libc_start_main_stage2 (src/env/__libc_start_main.c)
Unwind error at address `exe:0xaca54c` (error.MissingFDE), trace may be incomplete

???:?:?: 0x0 in ??? (???)
error: Child process /home/personal/.cache/roc/e59c636351ad64c25ba81dca340f7248/temp/roc-tmp-QrCVuZwQCTugoE4UXr9kfu6No9KsEwgj/roc_run_792223834 killed by signal: 6
error: Child process aborted (SIGABRT)
</code></pre></div>



<a name="561745286"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561745286" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niclas Ahden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561745286">(Dec 03 2025 at 20:22)</a>:</h4>
<p>Try deleting the Roc cache (<code>rm -rf ~/.cache/roc</code> or such) and re-running. You'll probably be back at the segfault.</p>



<a name="561745426"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561745426" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561745426">(Dec 03 2025 at 20:23)</a>:</h4>
<p>Yup, that's right</p>



<a name="561745826"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561745826" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niclas Ahden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561745826">(Dec 03 2025 at 20:26)</a>:</h4>
<p>This is probably a problem for a Wizard. Perhaps use the built-in platform for now or play a delightful session of Diablo II and I'm sure it'll be in order when you return!</p>



<a name="561746459"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561746459" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561746459">(Dec 03 2025 at 20:30)</a>:</h4>
<p>More of a Cities Skylines guy myself, so I guess I'll get to building some suburbs <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="561747694"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561747694" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561747694">(Dec 03 2025 at 20:38)</a>:</h4>
<p>There's a guy who does Cities Skylines videos in YoutTube that loves drinking tea. I think Biffa is his name... that you? <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="561747984"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561747984" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561747984">(Dec 03 2025 at 20:39)</a>:</h4>
<p>No that's a different guy, I just also happen to drink tea and enjoy Cities Skylines  <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="561754335"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561754335" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561754335">(Dec 03 2025 at 21:25)</a>:</h4>
<p>If anyone wants to/can help me further and needs some more info, just ping me, I'll be keeping an eye on this channel</p>



<a name="561770747"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/561770747" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#561770747">(Dec 03 2025 at 23:50)</a>:</h4>
<p>I’m with you, <span class="user-mention" data-user-id="758860">@TeaDrinkingProgrammer</span> . I was excited to try the new Roc compiler for AoC, but I’m running into the same segfault. I’m on the latest MacOS Silicon binary.</p>



<a name="562078611"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562078611" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562078611">(Dec 05 2025 at 11:29)</a>:</h4>
<p>I'll check this out</p>



<a name="562082229"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562082229" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562082229">(Dec 05 2025 at 11:50)</a>:</h4>
<p>This works for me on the latest roc commit 04bb3f9270bda4306828aa2c0194d10755ecdf74 (built from source), on apple silicon. Source code:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">app</span><span class="w"> </span><span class="p">[</span><span class="nx">main</span><span class="o">!</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">pf</span><span class="o">:</span><span class="w"> </span><span class="nx">platform</span><span class="w"> </span><span class="s">"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst"</span><span class="w"> </span><span class="p">}</span>

<span class="nx">import</span><span class="w"> </span><span class="nx">pf</span><span class="p">.</span><span class="nx">Stdout</span>

<span class="nx">main</span><span class="o">!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="nx">_args</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Stdout</span><span class="p">.</span><span class="nx">line</span><span class="o">!</span><span class="p">(</span><span class="s">"Hello, World!"</span><span class="p">)</span>
<span class="w">    </span><span class="nx">Ok</span><span class="p">({})</span>
<span class="p">}</span>
</code></pre></div>



<a name="562084653"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562084653" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Niclas Ahden <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562084653">(Dec 05 2025 at 12:02)</a>:</h4>
<p>Can confirm on macOS Apple Silicon. Sadly not on NixOS x86:</p>
<div class="codehilite"><pre><span></span><code>./zig-out/bin/roc appc.roc
error: Child process /home/niclas/.cache/roc/5931167c7313ef73dbb36e68e48b39cf/temp/roc-tmp-pkhvoyUrxhdo7z21VPuLALspQGB5rbo2/roc_run_1644006530 killed by signal: 11
error: Child process crashed with segmentation fault (SIGSEGV)
</code></pre></div>
<p>Same source and  Roc built from source (<code>04bb3f9270bda4306828aa2c0194d10755ecdf74</code>).  <code>git clean -fdx</code>, <code>rm -rf ~/.cache/roc</code>, and <code>zig build test</code> passing before testing.</p>



<a name="562091786"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562091786" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562091786">(Dec 05 2025 at 12:43)</a>:</h4>
<p>Any commands/logs I can supply to make it easier for you to find the cause?</p>



<a name="562097271"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562097271" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562097271">(Dec 05 2025 at 13:11)</a>:</h4>
<p>No, it's fine, I will probably be able to reproduce on linux too</p>



<a name="562105368"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562105368" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562105368">(Dec 05 2025 at 13:53)</a>:</h4>
<p>It does not happen when building roc-platform-template-zig from source, make sure to use <code>roc --no-cache myfile.roc</code> if you just switched out the platform line though.</p>



<a name="562106221"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562106221" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562106221">(Dec 05 2025 at 13:57)</a>:</h4>
<p>Looks like it was a linking issue, I will automate releases and add more testing too.</p>



<a name="562147669"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562147669" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562147669">(Dec 05 2025 at 17:04)</a>:</h4>
<p>I know what's wrong, fix is underway</p>



<a name="562163362"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562163362" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562163362">(Dec 05 2025 at 18:42)</a>:</h4>
<p>Thanks for the update, works for me! I hadn’t seen the latest version with the GitHub’s odd sorting.</p>



<a name="562168836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562168836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562168836">(Dec 05 2025 at 19:18)</a>:</h4>
<p>Is there a new version of something already? I can't find anything</p>



<a name="562169061"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562169061" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562169061">(Dec 05 2025 at 19:20)</a>:</h4>
<p>Never mind, found it. Like it says in the nightlies channel, the 5 december release is shown as being 5 days old.</p>



<a name="562169869"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562169869" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> TeaDrinkingProgrammer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562169869">(Dec 05 2025 at 19:26)</a>:</h4>
<p>Just out of curiosity, what was the problem in the end?</p>



<a name="562172805"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562172805" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562172805">(Dec 05 2025 at 19:46)</a>:</h4>
<blockquote>
<p>the 5 december release is shown as being 5 days old</p>
</blockquote>
<p>Weird, it's shown as 10 hours old for me</p>



<a name="562172902"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562172902" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562172902">(Dec 05 2025 at 19:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="758860">TeaDrinkingProgrammer</span> <a href="#narrow/channel/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example/near/562169869">said</a>:</p>
<blockquote>
<p>Just out of curiosity, what was the problem in the end?</p>
</blockquote>
<p>.o files were not included in the .tar.zst, a specific .o file is necessary for (musl) linux.</p>



<a name="562174363"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/New%20Compiler%3A%20segfault%20running%20gist%20example/near/562174363" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/New.20Compiler.3A.20segfault.20running.20gist.20example.html#562174363">(Dec 05 2025 at 19:59)</a>:</h4>
<p>Fixed :)<br>
This is the header for the latest release:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">app</span><span class="w"> </span><span class="p">[</span><span class="nx">main</span><span class="o">!</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">pf</span><span class="o">:</span><span class="w"> </span><span class="nx">platform</span><span class="w"> </span><span class="s">"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.4/6XA8JLWhmG1FSgb8GxPjBs9cGrtRqopohR3KAHYo722z.tar.zst"</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>