<html>
<head><meta charset="utf-8"><title>✔ basic-cli Opt/Param docs · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html">✔ basic-cli Opt/Param docs</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="474217303"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474217303" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Janiczek <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474217303">(Oct 02 2024 at 07:25)</a>:</h4>
<p>Hello all! I'm trying to write a small CLI tool in Roc. Using basic-cli.</p>
<p>I'm looking at the <a href="https://www.roc-lang.org/packages/basic-cli/0.15.0">docs</a> and am missing anything about Opt or Param, or even SubCmd.</p>
<p>Is that a documentation bug, or a me-problem? Is my best option to read the library source code for now?</p>



<a name="474222119"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474222119" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474222119">(Oct 02 2024 at 07:47)</a>:</h4>
<p>What is Opt, Param or SubCmd?</p>



<a name="474222189"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474222189" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474222189">(Oct 02 2024 at 07:47)</a>:</h4>
<p>I'm not familiar with these names</p>



<a name="474222442"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474222442" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474222442">(Oct 02 2024 at 07:49)</a>:</h4>
<p>I'm guessing this is an Elm thing... but its been so long I've fogotten</p>



<a name="474222471"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474222471" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Kramer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474222471">(Oct 02 2024 at 07:49)</a>:</h4>
<p>I can see those names in this directory of <code>basic-cli</code></p>
<p><a href="https://github.com/roc-lang/basic-cli/tree/main/platform/Arg">https://github.com/roc-lang/basic-cli/tree/main/platform/Arg</a></p>



<a name="474222510"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474222510" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474222510">(Oct 02 2024 at 07:49)</a>:</h4>
<p>Ahk... right</p>



<a name="474222591"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474222591" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Kramer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474222591">(Oct 02 2024 at 07:49)</a>:</h4>
<p>I guess they're just undocumented as you say Martin</p>



<a name="474222752"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474222752" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474222752">(Oct 02 2024 at 07:50)</a>:</h4>
<p>I think this is the bug I was talking about earlier today <a href="#narrow/stream/306878-off-topic/topic/POC.3A.20AI.20agent.20writing.20Roc/near/474144956">https://roc.zulipchat.com/#narrow/stream/306878-off-topic/topic/POC.3A.20AI.20agent.20writing.20Roc/near/474144956</a></p>



<a name="474222841"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474222841" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Kramer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474222841">(Oct 02 2024 at 07:50)</a>:</h4>
<p>ah, interesting</p>



<a name="474222857"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474222857" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474222857">(Oct 02 2024 at 07:50)</a>:</h4>
<blockquote>
<p>Is that a documentation bug, or a me-problem? Is my best option to read the library source code for now?</p>
</blockquote>
<p>Yeah, I think it's a bug in roc docs generation... so best to read the source for now.</p>



<a name="474223016"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474223016" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474223016">(Oct 02 2024 at 07:51)</a>:</h4>
<p>Checkout <a href="https://github.com/smores56/weaver">https://github.com/smores56/weaver</a></p>



<a name="474223035"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474223035" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474223035">(Oct 02 2024 at 07:51)</a>:</h4>
<p>Docs here <a href="https://smores56.github.io/weaver/Opt/">https://smores56.github.io/weaver/Opt/</a></p>



<a name="474223150"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474223150" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474223150">(Oct 02 2024 at 07:52)</a>:</h4>
<p>The implementation in basic-cli was copied from weaver...</p>



<a name="474223228"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474223228" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474223228">(Oct 02 2024 at 07:52)</a>:</h4>
<p>I think the plan is to use weaver instead of having it in the platform long term</p>



<a name="474229814"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474229814" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Janiczek <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474229814">(Oct 02 2024 at 08:25)</a>:</h4>
<p>Thank you both!</p>



<a name="474229838"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474229838" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474229838">(Oct 02 2024 at 08:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="455616">Martin Janiczek</span> has marked this topic as resolved.</p>



<a name="474230981"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474230981" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Janiczek <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474230981">(Oct 02 2024 at 08:28)</a>:</h4>
<p>Actually, maybe one more question. Is there a pattern for non-empty list in either basic-cli or weaver? I ended up using <code>Opt.strList</code> and a followup custom logic:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="n">Cli</span><span class="p">.</span><span class="n">parseOrDisplayMessage</span><span class="w"> </span><span class="n">cli</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="n">is</span>
<span class="w">        </span><span class="nb">Ok</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="p">-&gt;</span>
<span class="w">            </span><span class="nc">if</span><span class="w"> </span><span class="n">List</span><span class="p">.</span><span class="n">isEmpty</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">versions</span><span class="w"> </span><span class="n">then</span>
<span class="w">                </span><span class="n">Stderr</span><span class="p">.</span><span class="fm">line!</span><span class="w"> </span><span class="s">"No versions to benchmark"</span>
<span class="w">                </span><span class="n">Task</span><span class="p">.</span><span class="n">err</span><span class="w"> </span><span class="p">(</span><span class="n">Exit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="s">""</span><span class="p">)</span>
<span class="w">            </span><span class="k">else</span>
<span class="w">                </span><span class="n">Bench</span><span class="p">.</span><span class="n">run</span><span class="w"> </span><span class="n">input</span>

<span class="w">        </span><span class="nb">Err</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="p">-&gt;</span>
<span class="w">            </span><span class="nc">Stderr</span><span class="p">.</span><span class="fm">line!</span><span class="w"> </span><span class="n">message</span>
<span class="w">            </span><span class="n">Task</span><span class="p">.</span><span class="n">err</span><span class="w"> </span><span class="p">(</span><span class="n">Exit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="s">""</span><span class="p">)</span>
</code></pre></div>



<a name="474231335"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474231335" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Janiczek <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474231335">(Oct 02 2024 at 08:29)</a>:</h4>
<p>I guess if there's no <code>Opt.nonemptyStrList</code> my best option is to extract the above length check into some <code>validateInput</code> function that I use with <code>Result.try</code>?</p>



<a name="474231504"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474231504" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Janiczek <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474231504">(Oct 02 2024 at 08:30)</a>:</h4>
<p>as in, <code>when args |&gt; Cli.parseOrDisplayMessage cli |&gt; Result.try validateInput is ...</code></p>



<a name="474235463"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20basic-cli%20Opt/Param%20docs/near/474235463" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20basic-cli.20Opt.2FParam.20docs.html#474235463">(Oct 02 2024 at 08:47)</a>:</h4>
<p><span class="user-mention" data-user-id="455616">@Martin Janiczek</span> I'd say you have a couple options:</p>
<p>First is to ask for two fields, the first being a single value and the second being a list:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">cliParser</span><span class="w"> </span><span class="nf">=</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="kt">Cli</span><span class="nf">.</span><span class="nv">weave</span><span class="w"> </span><span class="nf">&lt;-</span>
<span class="w">        </span><span class="nv">file</span><span class="nf">:</span><span class="w"> </span><span class="kt">Param</span><span class="nf">.</span><span class="nv">str</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="nf">:</span><span class="w"> </span><span class="s">"file"</span><span class="p">,</span><span class="w"> </span><span class="nv">help</span><span class="nf">:</span><span class="w"> </span><span class="s">"The file to process."</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="nv">files</span><span class="nf">:</span><span class="w"> </span><span class="kt">Param</span><span class="nf">.</span><span class="nv">strList</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="nf">:</span><span class="w"> </span><span class="s">"files"</span><span class="p">,</span><span class="w"> </span><span class="nv">help</span><span class="nf">:</span><span class="w"> </span><span class="s">"The rest of the files."</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>

<span class="nv">parsed</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">parseArgsWith</span><span class="err">!</span><span class="w"> </span><span class="nv">cliParser</span><span class="w"> </span><span class="nv">args</span>

<span class="nv">allFiles</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">concat</span><span class="w"> </span><span class="p">[</span><span class="nv">file</span><span class="p">]</span><span class="w"> </span><span class="nv">files</span>
</code></pre></div>
<p>Second is to validate the list value, which still requires post-parsing handling:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">cliParser</span><span class="w"> </span><span class="nf">=</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="kt">Cli</span><span class="nf">.</span><span class="nv">weave</span><span class="w"> </span><span class="nf">&lt;-</span>
<span class="w">        </span><span class="err">#</span><span class="w"> </span><span class="nv">other</span><span class="w"> </span><span class="nv">fields</span><span class="nf">...</span>
<span class="w">        </span><span class="nv">files</span><span class="nf">:</span><span class="w"> </span><span class="kt">Param</span><span class="nf">.</span><span class="nv">strList</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="nf">:</span><span class="w"> </span><span class="s">"files"</span><span class="w"> </span><span class="p">}</span>
<span class="w">            </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Cli</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="nf">\</span><span class="nv">fs</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">isEmpty</span><span class="w"> </span><span class="nv">fs</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kt">Err</span><span class="w"> </span><span class="kt">EmptyFiles</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="kt">Ok</span><span class="w"> </span><span class="nv">fs</span>
<span class="w">    </span><span class="p">}</span>

<span class="nv">parsed</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">parseArgsWith</span><span class="err">!</span><span class="w"> </span><span class="nv">cliParser</span><span class="w"> </span><span class="nv">args</span>

<span class="nv">files</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">parsed</span><span class="nf">.</span><span class="nv">files</span><span class="err">?</span>
</code></pre></div>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>