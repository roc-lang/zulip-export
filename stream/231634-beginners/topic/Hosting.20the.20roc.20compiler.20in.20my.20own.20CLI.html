<html>
<head><meta charset="utf-8"><title>Hosting the roc compiler in my own CLI · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html">Hosting the roc compiler in my own CLI</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="439390779"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439390779" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Damian Reeves <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439390779">(May 18 2024 at 23:43)</a>:</h4>
<p>Is there a scenario for hosting the roc compiler in my own CLI?<br>
I have my own toolchain and I am wondering if I can do the roc compilation for my own custom platform using my own CLI, so that users would not need to directly invoke roc?<br>
Also I'm new here so I might be way off base with what I'm thinking. I'm imagining kind of like what <code>javy</code> from the bytecodealliance/shopify enables you to do by consuming their crates.</p>



<a name="439430029"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439430029" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439430029">(May 19 2024 at 11:04)</a>:</h4>
<p><del>My understanding is that the Roc code that's being called from a platform (i.e., from the host is essentially an already-compiled shared library).</del></p>
<p><del>I hope this does clarify matters a bit. It doesn't seem to me what you're actually after is hosting the Roc compiler.</del></p>
<p><del>I have to admit I'm not familiar with the <code>javy</code> project.</del></p>
<p><strong><em>Update:</em></strong> Having thought about your use-case in more detail and having looked up <code>javy</code> briefly, I think I have a bit better understandasing of your use-case.</p>
<p>I'll let the more knowledgeable members share their opinion on this one, as I'm afraid I couldn't be of help.</p>



<a name="439558523"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439558523" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439558523">(May 20 2024 at 11:59)</a>:</h4>
<p><span class="user-mention" data-user-id="720944">@Damian Reeves</span> do you also want to compile to wasm like javy?</p>



<a name="439561649"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439561649" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Damian Reeves <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439561649">(May 20 2024 at 12:17)</a>:</h4>
<p>Yes I do</p>



<a name="439573313"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439573313" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439573313">(May 20 2024 at 13:24)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> what language does your "own custom platform" use?</p>



<a name="439574936"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439574936" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Damian Reeves <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439574936">(May 20 2024 at 13:32)</a>:</h4>
<p>So my "custom platform" can be theoretically written in any language though it is usually Elm (and perhaps Scala or Bosque), but the main thing is the language frontend produces a Mophir IR file that is a JSON file (or multiple IR JSON files if you have dependencies).</p>
<p>I have multiple use-cases I have in mind but the main is I want to be able to run my compiler, produce my IR (as JSON), and produce webassembly... I believe I can produce Roc from my IR since my IR maps very well to Elm. </p>
<p>I also want to be able to natively test from my CLI as well. <br>
So all these usecases kind of require me to use the underlying functionality of Roc to build my own toolchain.</p>



<a name="439575712"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439575712" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Damian Reeves <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439575712">(May 20 2024 at 13:37)</a>:</h4>
<p>In the end I also want to take advantage of Roc's platforms as  users often want to bind their model to execution on some platform that expects entry points with specific signatures (this is why I think Roc is such a good fit). <br>
The main thing is I don't want to need to tell my users to install my CLI (morphir CLI), install roc, install rust or clang and all this other stuff to produce their thing that runs on my platform.</p>
<p>They want to write their app, which you can think of as something that will run a calculation that will work on their specific runtime. The output of compiling their app should be agnostic of the host it is being ran on (which is why I want to target webassembly since it runs on all hosts we target</p>



<a name="439581284"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439581284" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439581284">(May 20 2024 at 14:07)</a>:</h4>
<blockquote>
<p>The main thing is I don't want to need to tell my users to install my CLI (morphir CLI), install roc, install rust or clang and all this other stuff to produce their thing that runs on my platform.</p>
</blockquote>
<p>Right, that should be achievable, what targets do you plan on supporting? e.g. macos-aarch64, macos-x86-64, linux-x86-64, linux-aarch64, windows-x86-64 etc.?</p>



<a name="439581795"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439581795" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439581795">(May 20 2024 at 14:10)</a>:</h4>
<p>By targets I don't mean wasm of course, but the type of computer your users will run your CLI on</p>



<a name="439582112"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439582112" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Damian Reeves <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439582112">(May 20 2024 at 14:12)</a>:</h4>
<p>That list seems sufficient: macos-aarch64, macos-x86-64, linux-x86-64, linux-aarch64, windows-x86-64. Potentially gravatron as well</p>



<a name="439582165"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439582165" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Damian Reeves <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439582165">(May 20 2024 at 14:13)</a>:</h4>
<p>But I'm no expert on the gravatron struff (I might even be spelling it wrong)</p>



<a name="439587469"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/439587469" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#439587469">(May 20 2024 at 14:41)</a>:</h4>
<p>linux-aarch64 and windows-x86-64 currently still have some issues but macos-aarch64, macos-x86-64 and linux-x86-64 should work. Given that set, I would recommend creating one .sh script that can install everything in one go. I'm not sure which dependencies are required to compile to wasm, perhaps others can weigh in?</p>



<a name="441905698"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/441905698" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Damian Reeves <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#441905698">(Jun 01 2024 at 13:26)</a>:</h4>
<p>Coming back to this and wondering if just distributing roc alongside my CLI would be sufficient? What I am not sure is can I do that? Can I distribute roc with my tool?<br>
Also guess it depends on the state of things like rocup?</p>



<a name="443269211"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Hosting%20the%20roc%20compiler%20in%20my%20own%20CLI/near/443269211" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Hosting.20the.20roc.20compiler.20in.20my.20own.20CLI.html#443269211">(Jun 07 2024 at 10:52)</a>:</h4>
<blockquote>
<p>Can I distribute roc with my tool?</p>
</blockquote>
<p>Yes, just make sure to include <a href="https://github.com/roc-lang/roc/blob/main/LICENSE">the Roc license</a> somewhere too.</p>
<blockquote>
<p>Also guess it depends on the state of things like rocup?</p>
</blockquote>
<p>We plan to include rocup functionality in the roc command. Note that  your Roc code (inside your CLI tool?) may not work if you "blindly" update to the latest Roc version.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>