<html>
<head><meta charset="utf-8"><title>✔ advent of code sample · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html">✔ advent of code sample</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="477828743"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477828743" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477828743">(Oct 19 2024 at 18:34)</a>:</h4>
<p>Hey folks, I put together a quick skeleton for advent of code here <a href="https://github.com/drewolson/aoc-roc">https://github.com/drewolson/aoc-roc</a>, a few questions</p>



<a name="477828788"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477828788" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477828788">(Oct 19 2024 at 18:35)</a>:</h4>
<ol>
<li>i didn't expect to need this line <a href="https://github.com/drewolson/aoc-roc/blob/635f62f26928ea4b2c1c32f83bb633ef030e032a/main.roc#L72">https://github.com/drewolson/aoc-roc/blob/635f62f26928ea4b2c1c32f83bb633ef030e032a/main.roc#L72</a>. my understanding is that i should be able to handle my custom errors and let everything else flow to the top of the program</li>
</ol>



<a name="477828850"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477828850" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477828850">(Oct 19 2024 at 18:36)</a>:</h4>
<ol start="2">
<li>when i open <a href="https://github.com/drewolson/aoc-roc/blob/main/Aoc/Year2023/Day09.roc">https://github.com/drewolson/aoc-roc/blob/main/Aoc/Year2023/Day09.roc</a> in my editor (nvim), the LSP crashes with the following error:</li>
</ol>



<a name="477828862"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477828862" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477828862">(Oct 19 2024 at 18:36)</a>:</h4>
<p><code>[ERROR][2024-10-19 13:35:51] .../lean/stderr.lua:74 "rpc" "/Users/drew/.local/bin/roc_language_server"  "stderr"  "An internal compiler expectation was broken.\nThis is definitely a compiler bug.\nPlease file an issue here: &lt;       https://github.com/roc-lang/roc/issues/new/choose&gt;\nOutstanding references to the derived module\nLocation: crates/compiler/load_internal/src/file.rs:3299:29\n"</code></p>



<a name="477828871"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477828871" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477828871">(Oct 19 2024 at 18:36)</a>:</h4>
<p>let me know if i should actually file a bug for this</p>



<a name="477828948"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477828948" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477828948">(Oct 19 2024 at 18:38)</a>:</h4>
<p>i get the same error when i open <a href="https://github.com/drewolson/aoc-roc/blob/main/Aoc/Args.roc">https://github.com/drewolson/aoc-roc/blob/main/Aoc/Args.roc</a>, which just consists of type synonyms</p>



<a name="477828976"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477828976" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477828976">(Oct 19 2024 at 18:38)</a>:</h4>
<p>and final question 3. is there a library for arbitrary sized ints in roc?</p>



<a name="477829061"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477829061" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477829061">(Oct 19 2024 at 18:40)</a>:</h4>
<p>One more observation -- i find it interesting that record builders are basically syntax sugar for applicatives using <code>&lt;-</code>, but that roc plans to deprecate backpassing, which is sugar for monads (among other things) using <code>&lt;-</code></p>



<a name="477829074"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477829074" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477829074">(Oct 19 2024 at 18:40)</a>:</h4>
<p>this is the farthest i've gotten in writing a reasonably sized skeleton for aoc without hitting major compiler bugs, so that's awesome!</p>



<a name="477831083"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477831083" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477831083">(Oct 19 2024 at 19:13)</a>:</h4>
<p>For 1</p>
<p>On line 65, you call <code>Stdout.line! e</code>. That puts <code>StdoutErr</code> as one of the possible error outputs. When mapping the errors, you have to map all possible errors. That includes the error produced there.</p>



<a name="477837537"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477837537" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477837537">(Oct 19 2024 at 20:55)</a>:</h4>
<p>Weirdly, though, a catch all doesn't work</p>



<a name="477837545"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477837545" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477837545">(Oct 19 2024 at 20:55)</a>:</h4>
<p>meaning if i instead have <code>e -&gt; e</code> i get a compiler error</p>



<a name="477837616"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477837616" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477837616">(Oct 19 2024 at 20:56)</a>:</h4>
<p>actually, i guess i get a compiler bug <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="477837622"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477837622" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477837622">(Oct 19 2024 at 20:56)</a>:</h4>
<div class="codehilite"><pre><span></span><code>$ roc run
thread &#39;main&#39; panicked at crates/compiler/mono/src/borrow.rs:396:34:
internal error: entered unreachable code:
        No borrow signature for LambdaName { name: `16.IdentId(42)`, niche: Niche(Captures([InLayout(25), InLayout(44)])) } layout.

        Tip 1: This can happen when you call a function with less arguments than it expects.
        Like `Arg.list!` instead of `Arg.list! {}`.
        Tip 2: `roc check yourfile.roc` can sometimes give you a helpful error.

note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="477837736"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477837736" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477837736">(Oct 19 2024 at 20:58)</a>:</h4>
<p><code>roc check main.roc</code> seems to think that i'm not narrowing the type at all <a href="https://gist.github.com/drewolson/c126c3a1981bcb15318dce6f95060d57">https://gist.github.com/drewolson/c126c3a1981bcb15318dce6f95060d57</a></p>



<a name="477837750"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477837750" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477837750">(Oct 19 2024 at 20:59)</a>:</h4>
<p>with the <code>e -&gt; e</code> arm rather than <code>StdoutErr e -&gt; StdoutErr e</code></p>



<a name="477837891"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477837891" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477837891">(Oct 19 2024 at 21:00)</a>:</h4>
<p>oh, and i reproduced the LSP error like this</p>



<a name="477837897"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477837897" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477837897">(Oct 19 2024 at 21:01)</a>:</h4>
<div class="codehilite"><pre><span></span><code>$ roc check Aoc/Args.roc
An internal compiler expectation was broken.
This is definitely a compiler bug.
Please file an issue here: &lt;https://github.com/roc-lang/roc/issues/new/choose&gt;
Outstanding references to the derived module
Location: crates/compiler/load_internal/src/file.rs:3299:29
</code></pre></div>



<a name="477839280"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477839280" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477839280">(Oct 19 2024 at 21:25)</a>:</h4>
<p>Yeah, <code>e -&gt; e</code> does not narrow the type in roc.</p>



<a name="477839296"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477839296" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477839296">(Oct 19 2024 at 21:25)</a>:</h4>
<p>That would be a form of gradual typing, which roc does not have</p>



<a name="477839636"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477839636" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477839636">(Oct 19 2024 at 21:30)</a>:</h4>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">when</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="nv">is</span>
<span class="w">    </span><span class="kt">BadDayPart</span><span class="w"> </span><span class="nv">day</span><span class="w"> </span><span class="nv">part</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Exit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="s">"Invalid day and part: $(Inspect.toStr day), $(Inspect.toStr part)"</span>
<span class="w">    </span><span class="kt">BadInput</span><span class="w"> </span><span class="nv">path</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Exit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="s">"Invalid input file: $(path)"</span>
<span class="w">    </span><span class="kt">BadYear</span><span class="w"> </span><span class="nv">year</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Exit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="s">"Invalid year: $(Inspect.toStr year)"</span>
<span class="w">    </span><span class="nv">e</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">e</span>
</code></pre></div>
<p>Type of <code>err</code> is <code>[BadDayPart U8 U8, BadInput Str, BadYear U16, StdoutErr [...]]*</code></p>
<p>Type of the first three branches is <code>[Exit U8 Str]*</code><br>
Type of the final brach is the type of <code>e</code>. The type of <code>e</code> is the type of <code>err</code>. So the type of the final branch is <code>[BadDayPart U8 U8, BadInput Str, BadYear U16, StdoutErr [...]]*</code></p>
<p>unifying the branches, we get:<br>
<code>[BadDayPart U8 U8, BadInput Str, BadYear U16, Exit U8 Str, StdoutErr [...]]*</code></p>



<a name="477985761"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477985761" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477985761">(Oct 21 2024 at 07:58)</a>:</h4>
<blockquote>
<p>let me know if i should actually file a bug for this</p>
</blockquote>
<p>Yes please for 2.</p>



<a name="477986135"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/477986135" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#477986135">(Oct 21 2024 at 08:00)</a>:</h4>
<blockquote>
<ol start="3">
<li>is there a library for arbitrary sized ints in roc?</li>
</ol>
</blockquote>
<p>Not that I'm aware of, does I128 not fit your needs?</p>



<a name="478033577"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/478033577" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#478033577">(Oct 21 2024 at 11:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="361169">Anton</span> <a href="#narrow/stream/231634-beginners/topic/advent.20of.20code.20sample/near/477986135">said</a>:</p>
<blockquote>
<blockquote>
<ol start="3">
<li>is there a library for arbitrary sized ints in roc?</li>
</ol>
</blockquote>
<p>Not that I'm aware of, does I128 not fit your needs?</p>
</blockquote>
<p>I128 may work, i’m just anticipating problems in advent of code designed to push towards very large ints</p>



<a name="478087862"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/478087862" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> drew <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#478087862">(Oct 21 2024 at 15:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="361169">Anton</span> <a href="#narrow/channel/231634-beginners/topic/advent.20of.20code.20sample/near/477985761">said</a>:</p>
<blockquote>
<blockquote>
<p>let me know if i should actually file a bug for this</p>
</blockquote>
<p>Yes please for 2.</p>
</blockquote>
<p>For posterity, this is done <a href="https://github.com/roc-lang/roc/issues/7175">https://github.com/roc-lang/roc/issues/7175</a>. I see you've already labeled it <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="478129145"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20advent%20of%20code%20sample/near/478129145" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20advent.20of.20code.20sample.html#478129145">(Oct 21 2024 at 18:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="463085">drew</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>