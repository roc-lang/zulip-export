<html>
<head><meta charset="utf-8"><title>Statically linked roc? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html">Statically linked roc?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="481464198"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Statically%20linked%20roc%3F/near/481464198" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Hoff <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html#481464198">(Nov 09 2024 at 14:12)</a>:</h4>
<p>Hi! Are there any statically linked builds of roc, or plans to make that? I'm in the rare position of not wanting to install homebrew on my mac. This makes the installation step <code>brew install llvm@16</code> more challenging (this step is curiously missing from the x86_64 build for macos).</p>
<p>Of course, I have myself to thank for being unusual in this regard, but wouldn't it be helpful everyone with one less step?</p>
<p>Side note, I don't see a dynamic library reference to llvm, but I do see one to libzstd.</p>
<div class="codehilite"><pre><span></span><code>$ otool -L roc
roc:
    /usr/lib/libffi.dylib (compatibility version 1.0.0, current version 30.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1311.100.3)
    /usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.11)
    /opt/homebrew/opt/zstd/lib/libzstd.1.dylib (compatibility version 1.0.0, current version 1.5.6)
    /usr/lib/libncurses.5.4.dylib (compatibility version 5.4.0, current version 5.4.0)
    /usr/lib/libxml2.2.dylib (compatibility version 10.0.0, current version 10.9.0)
    /usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 1300.23.0)
    /System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration (compatibility version 1.0.0, current version 1163.100.19)
    /System/Library/Frameworks/Security.framework/Versions/A/Security (compatibility version 1.0.0, current version 60158.100.133)
    /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 1858.112.0)
    /usr/lib/libiconv.2.dylib (compatibility version 7.0.0, current version 7.0.0)
</code></pre></div>



<a name="481464689"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Statically%20linked%20roc%3F/near/481464689" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html#481464689">(Nov 09 2024 at 14:19)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="460512">@Johannes Hoff</span>,</p>
<blockquote>
<p>Are there any statically linked builds of roc, or plans to make that</p>
</blockquote>
<p>yes, there are plans, see <a href="https://github.com/roc-lang/roc/pull/6921">https://github.com/roc-lang/roc/pull/6921</a> and <a href="https://github.com/roc-lang/roc/issues/6083">https://github.com/roc-lang/roc/issues/6083</a></p>



<a name="481464773"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Statically%20linked%20roc%3F/near/481464773" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html#481464773">(Nov 09 2024 at 14:20)</a>:</h4>
<blockquote>
<p>Side note, I don't see a dynamic library reference to llvm, but I do see one to libzstd.</p>
</blockquote>
<p>I think <code>brew install llvm@16</code> installs several dependencies but you don't actually need most of them.</p>



<a name="481464854"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Statically%20linked%20roc%3F/near/481464854" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html#481464854">(Nov 09 2024 at 14:21)</a>:</h4>
<p>You can install libzstd through whatever means possible and move it to /opt/homebrew/opt/zstd/lib/</p>



<a name="481464958"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Statically%20linked%20roc%3F/near/481464958" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html#481464958">(Nov 09 2024 at 14:22)</a>:</h4>
<p>If you try to run roc (like <code>roc helloWorld.roc</code>) it'll tell you which specific dependencies you miss and you can install those one by one so you don't need to install llvm</p>



<a name="481465605"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Statically%20linked%20roc%3F/near/481465605" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Hoff <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html#481465605">(Nov 09 2024 at 14:31)</a>:</h4>
<p>Oh, great that you're working on it! I'll follow that issue.</p>



<a name="481465629"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Statically%20linked%20roc%3F/near/481465629" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Hoff <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html#481465629">(Nov 09 2024 at 14:31)</a>:</h4>
<p>I'll see how far I get with manual installation.</p>



<a name="481469588"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Statically%20linked%20roc%3F/near/481469588" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Hoff <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html#481469588">(Nov 09 2024 at 15:25)</a>:</h4>
<p>The only dynamic library needed was zstd, so that was pretty easy. But I seems I really should have llvm, since <code>ld </code> is failing (in surprising ways, at least to me). Other fun things is that the repl runs, but crashes on any command. So, I'm guessing even a static build will have problems for me, unless it bundles ld and doesn't invoke it as an external command.</p>
<p>Anyway, I don't expect any help or sympathy here, and fully realize that there's a simpler way.</p>
<p>For the curious, here's the output from building:</p>
<div class="codehilite"><pre><span></span><code>% DYLD_LIBRARY_PATH=/Users/j/zstd/lib ./roc examples/helloWorld.roc
ld: library not found for -lSystem
examples/helloWorld: No such file or directory
thread &#39;main&#39; panicked at crates/compiler/build/src/program.rs:1037:17:
not yet implemented: gracefully handle `ld` (or `zig` in the case of wasm with --optimize) returning exit code Some(1)
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="481471762"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Statically%20linked%20roc%3F/near/481471762" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html#481471762">(Nov 09 2024 at 15:55)</a>:</h4>
<p>Your Mac can't find the system library?</p>



<a name="481473425"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Statically%20linked%20roc%3F/near/481473425" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Hoff <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html#481473425">(Nov 09 2024 at 16:17)</a>:</h4>
<p>Looks like it <span aria-label="man shrugging" class="emoji emoji-1f937-200d-2642" role="img" title="man shrugging">:man_shrugging:</span> I have the latest xcode installed, which I assumed should be enough, so I blamed my llvm-version. Perhaps wrongly. I also have the latest macos version (15.0.1), but that might be a reason for it to fail, rather than work.</p>



<a name="481474624"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Statically%20linked%20roc%3F/near/481474624" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Statically.20linked.20roc.3F.html#481474624">(Nov 09 2024 at 16:33)</a>:</h4>
<p>Building from source will probably work (if you want to install nix). Then you can do:</p>
<div class="codehilite"><pre><span></span><code>$ cd roc
$ nix develop
$ cargo build --release --bin roc
$ ./target/release/roc ./examples/helloWorld.roc
</code></pre></div>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>