<html>
<head><meta charset="utf-8"><title>why parser/compiler implemented in Rust and stdlib in Zig? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html">why parser/compiler implemented in Rust and stdlib in Zig?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="276873779"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276873779" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Loric Brevet <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276873779">(Mar 28 2022 at 13:35)</a>:</h4>
<p>Hi, it is been a while I haven’t connected to the Zulip, but I come back with a question that popped.</p>
<p>What were the reasons that led to choosing Rust to develop the compiler, and Zig to implement stdlib?</p>
<p>Why not choose the same language for both? At the first glance, it would make sense because the entry for new Roc contributors would be cheaper.</p>
<p>And same but different question (as I am currently getting more and more interested in Zig): could Zig have been chosen for the development of the compiler? And if not, what is lacking in Zig for that purpose?</p>
<p>Trying to understand the context and the history here :-)<br>
Thanks a lot</p>



<a name="276874544"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276874544" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276874544">(Mar 28 2022 at 13:41)</a>:</h4>
<p>at the time we 1) did not really know zig well and 2) it wasn't ready. Even now, it's not actually meant to be used in production. The reason zig entered the project because it has many different backends (wasm, various assembly formats, llvm IR) and can create code with minimal dependencies</p>



<a name="276874609"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276874609" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276874609">(Mar 28 2022 at 13:41)</a>:</h4>
<p>Rust has much more overhead in terms of code size. It's objectively not a lot, but zig is more minimal</p>



<a name="276874713"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276874713" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276874713">(Mar 28 2022 at 13:42)</a>:</h4>
<p>but, we think rust is a nicer language to work in for a project of this size. It has  a type system that we're more familiar with, it has a package ecosystem, excellent tooling</p>



<a name="276875318"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276875318" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276875318">(Mar 28 2022 at 13:47)</a>:</h4>
<p>I'll add this question to the faq.</p>



<a name="276876534"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276876534" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Loric Brevet <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276876534">(Mar 28 2022 at 13:56)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="281543">@Folkert de Vries</span> for the quick answer and yes <span class="user-mention" data-user-id="361169">@Anton</span> that’s a great idea.</p>
<p>When comparing Zig and Rust, one aspect that often comes up is that Rust has safety as a first concern and this makes Rust "safer" than Zig. Do you agree with that statement?</p>
<p>And if so, was this also considered in the choice (as I guess safety matters quite a lot for a programming language such as Roc)?</p>



<a name="276876697"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276876697" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276876697">(Mar 28 2022 at 13:57)</a>:</h4>
<p>it matters for the end product, but less for a compiler. Compilers should be fast and give good error messages. If they leak some memory, that's not the end of the world really</p>



<a name="276876787"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276876787" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276876787">(Mar 28 2022 at 13:58)</a>:</h4>
<p>so, roc programs should be memory safe, but does the roc compiler have to be? maybe not if it allows us to be faster</p>



<a name="276876827"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276876827" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276876827">(Mar 28 2022 at 13:58)</a>:</h4>
<p>the next version of zig will be self-hosted, showing that you can build a compiler in zig, and a very fast one at that</p>



<a name="276876886"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276876886" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276876886">(Mar 28 2022 at 13:59)</a>:</h4>
<p>btw yes rust is safer than zig</p>



<a name="276876950"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276876950" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276876950">(Mar 28 2022 at 13:59)</a>:</h4>
<p>but also zig is safer than C, in practice</p>



<a name="276878190"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276878190" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Loric Brevet <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276878190">(Mar 28 2022 at 14:08)</a>:</h4>
<blockquote>
<p>it matters for the end product, but less for a compiler.</p>
</blockquote>
<p>This makes sense effectively.</p>
<p>Really looking forward to the self-hosted version of Zig. This seems to be a huge milestone for the project. It will be interesting to see the speed difference of the compiler after the rewrite. And having finished that will release some workforce to stabilize/improve stdlib, and maybe add some more runtime safety checks to the allocators before v1.0.0 (to try to catch up a bit with Rust in that regard)!</p>
<p>The future is promising, and this will profit downstream projects such as Roc..</p>



<a name="276878827"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276878827" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276878827">(Mar 28 2022 at 14:12)</a>:</h4>
<p>absolutely, and even if perhaps we don't use zig code as much, zig really has inspired our compiler work and goals</p>



<a name="276878922"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276878922" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276878922">(Mar 28 2022 at 14:13)</a>:</h4>
<p>e.g. data-oriented design in practice, demonstrating in-place binary patching, writing your own linker</p>



<a name="276893633"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276893633" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Gillette <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276893633">(Mar 28 2022 at 15:53)</a>:</h4>
<p>It still seems like there's still some open questions, at least that I have:</p>
<p>If runtime safety is more important than the safety of the compiler code, why then use Zig for the parts that will directly end up being used by Roc at runtime, while using Rust for the parts that won't end up being used by Roc at runtime (why not the reverse)?</p>
<p>If Zig will be getting safer, does that mean we will potentially explore using Zig in the compiler?</p>
<p>Are the benefits of using both, at the expense of more build requirements, and as <span class="user-mention" data-user-id="479004">@Loric Brevet</span> mentioned, more languages for contributors to learn, worth keeping two languages involved in the core of the implementation?</p>



<a name="276893877"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276893877" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276893877">(Mar 28 2022 at 15:55)</a>:</h4>
<p>the Roc stdlib implementation is unavoidably unsafe</p>



<a name="276893926"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276893926" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276893926">(Mar 28 2022 at 15:55)</a>:</h4>
<p>we originally started out writing it in Rust, and it needed <code>unsafe</code> all over the place</p>



<a name="276893950"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276893950" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276893950">(Mar 28 2022 at 15:55)</a>:</h4>
<p>so Rust's safety guarantees don't apply to it regardless</p>



<a name="276894018"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276894018" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276894018">(Mar 28 2022 at 15:56)</a>:</h4>
<p>basically because the way it needs to interface with the compiled Roc application is using raw pointers</p>



<a name="276894067"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276894067" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276894067">(Mar 28 2022 at 15:56)</a>:</h4>
<p>and dereferencing arbitrary pointers is innately memory-unsafe</p>



<a name="276894203"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276894203" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276894203">(Mar 28 2022 at 15:57)</a>:</h4>
<p>so when we were having a bad experience using Rust for the stdlib, the thinking was "since we're not getting any benefit out of Rust for this, maybe we should write it in C?" and then "at that point, why settle for C when we could use Zig?"</p>



<a name="276898348"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/276898348" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Gillette <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#276898348">(Mar 28 2022 at 16:27)</a>:</h4>
<p>Ah, gotcha. That makes a lot of sense, thanks!</p>



<a name="278305304"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/why%20parser/compiler%20implemented%20in%20Rust%20and%20stdlib%20in%20Zig%3F/near/278305304" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Airbus5717 <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/why.20parser.2Fcompiler.20implemented.20in.20Rust.20and.20stdlib.20in.20Zig.3F.html#278305304">(Apr 08 2022 at 13:41)</a>:</h4>
<p>Zig is actually a super nice language. I'd say its best language for the platform</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>