<html>
<head><meta charset="utf-8"><title>✔ Error in pattern matching a tuple · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html">✔ Error in pattern matching a tuple</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="431597340"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431597340" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431597340">(Apr 05 2024 at 20:14)</a>:</h4>
<p>Apologies in advance about the not very good context!</p>
<p>The following file (<code>PatternMatch.roc</code> in the second code block below) is supposed to be a minimum reproducible example (it's practically an equivalent code excerpt of what I'm currently prototyping as part of a larger use-case) of this error:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="err">──</span><span class="w"> </span><span class="kt">TYPE</span><span class="w"> </span><span class="kt">MISMATCH</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="kt">PatternMatchError</span><span class="nf">.</span><span class="nv">roc</span><span class="w"> </span><span class="err">───────────────────────────────────────</span>

<span class="kt">The</span><span class="w"> </span><span class="nv">branches</span><span class="w"> </span><span class="kr">of</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">expression</span><span class="w"> </span><span class="nv">don't</span><span class="w"> </span><span class="nv">match</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">condition</span><span class="nf">:</span>

<span class="mi">101</span><span class="err">│</span><span class="nf">&gt;</span><span class="w">      </span><span class="nv">when</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">get</span><span class="w"> </span><span class="nv">ranges</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nv">is</span>
<span class="mi">102</span><span class="err">│</span><span class="w">           </span><span class="kt">OK</span><span class="w"> </span><span class="nv">range</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="mi">103</span><span class="err">│</span><span class="w">               </span><span class="kr">if</span><span class="w"> </span><span class="nv">range</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">len</span><span class="w"> </span><span class="nv">result</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
<span class="mi">104</span><span class="err">│</span><span class="w">                   </span><span class="p">[]</span>
<span class="mi">105</span><span class="err">│</span><span class="w">               </span><span class="kr">else</span>
<span class="mi">106</span><span class="err">│</span><span class="w">                   </span><span class="nv">result</span>
<span class="mi">107</span><span class="err">│</span><span class="w">           </span><span class="kt">Err</span><span class="w"> </span><span class="kt">OutOfBounds</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="mi">108</span><span class="err">│</span><span class="w">               </span><span class="p">[]</span>

<span class="kt">The</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">condition</span><span class="w"> </span><span class="nv">is</span><span class="nf">:</span>

<span class="w">    </span><span class="kt">Result</span><span class="w"> </span><span class="kt">Range</span><span class="w"> </span><span class="p">[</span><span class="kt">OutOfBounds</span><span class="p">]</span>

<span class="kt">But</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">branch</span><span class="w"> </span><span class="nv">patterns</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="kr">type</span><span class="nf">:</span>

<span class="w">    </span><span class="p">[</span>
<span class="w">        </span><span class="kt">Err</span><span class="w"> </span><span class="p">[</span><span class="kt">OutOfBounds</span><span class="p">],</span>
<span class="w">        </span><span class="kt">OK</span><span class="w"> </span><span class="nf">*</span><span class="p">,</span>
<span class="w">    </span><span class="p">]</span>

<span class="kt">The</span><span class="w"> </span><span class="nv">branches</span><span class="w"> </span><span class="nv">must</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">cases</span><span class="w"> </span><span class="kr">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">condition's</span><span class="w"> </span><span class="kr">type</span><span class="err">!</span>

<span class="err">────────────────────────────────────────────────────────────────────────────────</span>
</code></pre></div>
<p>The attempt at reproducing the issue:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="kt">PatternMatch</span><span class="nf">.</span><span class="nv">roc</span>

<span class="nv">interface</span><span class="w"> </span><span class="kt">PatternMatch</span>
<span class="w">    </span><span class="nv">exposes</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="nv">imports</span><span class="w"> </span><span class="p">[]</span>

<span class="kt">Range</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">(</span><span class="kt">U64</span><span class="p">,</span><span class="w"> </span><span class="kt">U64</span><span class="p">)</span>

<span class="nv">getRanges</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="kt">Range</span>
<span class="nv">getRanges</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="p">{}</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)]</span>

<span class="nv">processRanges</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="kt">Range</span>
<span class="nv">processRanges</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="p">{}</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">ranges</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">getRanges</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="nv">when</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">get</span><span class="w"> </span><span class="nv">ranges</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nv">is</span>
<span class="w">        </span><span class="kt">Ok</span><span class="w"> </span><span class="nv">range</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="kr">if</span><span class="w"> </span><span class="nv">range</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">len</span><span class="w"> </span><span class="nv">ranges</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
<span class="w">                </span><span class="p">[]</span>
<span class="w">            </span><span class="kr">else</span>
<span class="w">                </span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)]</span>
<span class="w">        </span><span class="kt">Err</span><span class="w"> </span><span class="kt">OutOfBounds</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="p">[]</span>

<span class="nv">expect</span>
<span class="w">    </span><span class="nv">expected</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)]</span>
<span class="w">    </span><span class="nv">actual</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">processRanges</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="nv">actual</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="nv">expected</span>
</code></pre></div>
<p>However, the compiler is happy with the second code block, but complains in the first case.<br>
I haven't been able to come up with a minimal reproducible example (as mentioned, the one which is practically equivalent passes the test OK), and was hoping I might get some pointers, even in the absence of such an example.</p>
<p>Thank you!</p>



<a name="431597588"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431597588" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431597588">(Apr 05 2024 at 20:16)</a>:</h4>
<p>The first block has OK instead of Ok which should be the culprit</p>



<a name="431597644"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431597644" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431597644">(Apr 05 2024 at 20:16)</a>:</h4>
<p>I think there was a thread about this same thing a while back but it seems like a good case for a tailored error message</p>



<a name="431597718"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431597718" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431597718">(Apr 05 2024 at 20:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="693045">Hristo</span> has marked this topic as resolved.</p>



<a name="431597729"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431597729" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431597729">(Apr 05 2024 at 20:17)</a>:</h4>
<p>Indeed, that's the case - fixed! Thank you so much!</p>



<a name="431597994"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431597994" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431597994">(Apr 05 2024 at 20:19)</a>:</h4>
<blockquote>
<p>I think there was a thread about this same thing a while back</p>
</blockquote>
<p>Yes, I think I did run into it back when I joined Roc's ZulipChat instance, when I was exploring different streams and topics. It's embarrassing that I couldn't spot it, nor remember about the topic I'd read <span aria-label="man facepalming" class="emoji emoji-1f926-200d-2642" role="img" title="man facepalming">:man_facepalming:</span></p>
<blockquote>
<p>it seems like a good case for a tailored error message</p>
</blockquote>
<p>I'm slightly biased, as I've just fallen for this trap, but I'd say it'd be definitely worth associating a more concrete error message with this class of error cases.</p>



<a name="431611094"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431611094" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431611094">(Apr 05 2024 at 22:03)</a>:</h4>
<p>if anyone wants to try implementing that, I'd be happy to give pointers on how to do it!</p>



<a name="431653325"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431653325" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431653325">(Apr 06 2024 at 08:18)</a>:</h4>
<p>I'll be definitely happy to contribute along these lines at some point after I've produced an end-to-end first draft of my book chapter, if that's Ok (no pun intended <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>).<br>
Currently, extremely short on non-primary-job programming time, as there's been an unusual extremely busy stretch of work for about 2 months now.</p>



<a name="431655756"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431655756" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431655756">(Apr 06 2024 at 08:56)</a>:</h4>
<p>I made <a href="https://github.com/roc-lang/roc/issues/6630">#6630</a> for this.</p>



<a name="431665422"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431665422" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431665422">(Apr 06 2024 at 11:32)</a>:</h4>
<p>Would it make sense for the corresponding ticket to be a bit more general than just <code>OK</code>/<code>Ok</code>? For instance, handling also other possible capitalisation mismatches such as <code>Err</code>/<code>ERR</code>? I suppose those haven't been reported to have occurred yet, and would probably not be as common, but it might be useful to have a fuzzy similarity check along the lines of "Did you mean &lt;one or more options&gt; instead?", which already applies in some other Roc error cases.</p>



<a name="431665891"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431665891" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431665891">(Apr 06 2024 at 11:40)</a>:</h4>
<p>Good idea! I've added a checkbox to the issue to evaluate that possibility once the specific OK&lt;-&gt;Ok case is handled.</p>



<a name="431666620"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431666620" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431666620">(Apr 06 2024 at 11:53)</a>:</h4>
<p>Thank you!</p>



<a name="431667788"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431667788" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431667788">(Apr 06 2024 at 12:13)</a>:</h4>
<p>oh yeah I was thinking of it in terms of capitalization in general <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="431667866"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431667866" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431667866">(Apr 06 2024 at 12:14)</a>:</h4>
<p>and for that matter we can do edit distance to suggest tag names like we do variable names in case there's a misspelling there</p>



<a name="431674706"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Error%20in%20pattern%20matching%20a%20tuple/near/431674706" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Error.20in.20pattern.20matching.20a.20tuple.html#431674706">(Apr 06 2024 at 13:45)</a>:</h4>
<p>Yes, that's what I meant by "fuzzy similarity check", thanks <span class="user-mention" data-user-id="281383">@Richard Feldman</span>! (I hadn't checked that part of the codebase to have known how that's implemented in Roc. Perhaps "fuzzy" and "similarity" were a bit too redundant terms to have put together in this context haha <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>)</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>