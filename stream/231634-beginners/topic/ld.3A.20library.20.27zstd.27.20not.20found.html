<html>
<head><meta charset="utf-8"><title>ld: library &#x27;zstd&#x27; not found · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html">ld: library &#x27;zstd&#x27; not found</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="444154378"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/444154378" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#444154378">(Jun 12 2024 at 06:02)</a>:</h4>
<p>I recently updated my mac OS. Now when I try to run <code>cargo build</code> on roc I get an error <code>ld: library 'zstd' not found</code> and <code>ld: warning: ignoring duplicate libraries: '-lm'</code>.</p>
<p>Has anyone else come across these issues?</p>
<p>I have zstd installed I think. </p>
<div class="codehilite"><pre><span></span><code>$ which zstd
/opt/homebrew/bin/zstd
</code></pre></div>



<a name="444154491"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/444154491" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#444154491">(Jun 12 2024 at 06:03)</a>:</h4>
<p>I can build things using <code>nix develop</code> so not a total blocker.. though I use to be able to build this way also</p>



<a name="444154810"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/444154810" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#444154810">(Jun 12 2024 at 06:06)</a>:</h4>
<p>zstd is the executable I wonder if you need the shared lib separately</p>



<a name="444155116"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/444155116" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#444155116">(Jun 12 2024 at 06:08)</a>:</h4>
<p>I have the library... not sure why ld can't find it</p>
<div class="codehilite"><pre><span></span><code>$ pwd
/opt/homebrew/Cellar/zstd/1.5.6/lib
$ ls -al
total 2784
drwxr-xr-x   8 luke  admin     256 Jun  3 19:11 .
drwxr-xr-x  13 luke  admin     416 Jun  7 19:02 ..
drwxr-xr-x   3 luke  admin      96 Mar 22 09:05 cmake
-rw-r--r--   1 luke  admin  669440 Jun  3 19:11 libzstd.1.5.6.dylib
lrwxr-xr-x   1 luke  admin      19 Mar 22 09:05 libzstd.1.dylib -&gt; libzstd.1.5.6.dylib
-r--r--r--   1 luke  admin  753312 Mar 22 09:05 libzstd.a
lrwxr-xr-x   1 luke  admin      15 Mar 22 09:05 libzstd.dylib -&gt; libzstd.1.dylib
drwxr-xr-x   3 luke  admin      96 Jun  3 19:11 pkgconfig
</code></pre></div>



<a name="444155208"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/444155208" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#444155208">(Jun 12 2024 at 06:09)</a>:</h4>
<p>Maybe it's meant to be symlink'd somewhere without the version number</p>



<a name="444155236"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/444155236" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#444155236">(Jun 12 2024 at 06:09)</a>:</h4>
<p>But I would have thought homebrew would manage all that</p>



<a name="449155720"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/449155720" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#449155720">(Jul 04 2024 at 19:46)</a>:</h4>
<p>I'm seeing the same thing; any tips? Did you end up figuring it out?</p>



<a name="449156315"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/449156315" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#449156315">(Jul 04 2024 at 19:53)</a>:</h4>
<p>Ahh, found this in the CI config:</p>
<div class="codehilite"><pre><span></span><code>    env:
      LIBRARY_PATH: /opt/homebrew/Cellar/zstd/1.5.6/lib
</code></pre></div>



<a name="449156327"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/449156327" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Warner <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#449156327">(Jul 04 2024 at 19:53)</a>:</h4>
<p>Setting that env var seems to make things work for me</p>



<a name="462815824"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462815824" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462815824">(Aug 16 2024 at 16:04)</a>:</h4>
<p>why do we depend on zstd? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> </p>
<p>is it LLVM?</p>



<a name="462818842"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462818842" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462818842">(Aug 16 2024 at 16:16)</a>:</h4>
<div class="codehilite"><pre><span></span><code>│   │   │   │   ├── snafu v0.7.5
│   │   │   │   │   ├── backtrace v0.3.69
│   │   │   │   │   │   ├── addr2line v0.21.0
│   │   │   │   │   │   │   └── gimli v0.28.0
│   │   │   │   │   │   ├── cfg-if v1.0.0
│   │   │   │   │   │   ├── libc v0.2.149
│   │   │   │   │   │   ├── miniz_oxide v0.7.1
│   │   │   │   │   │   │   └── adler v1.0.2
│   │   │   │   │   │   ├── object v0.32.2
│   │   │   │   │   │   │   ├── crc32fast v1.3.2
│   │   │   │   │   │   │   │   └── cfg-if v1.0.0
│   │   │   │   │   │   │   ├── flate2 v1.0.28
│   │   │   │   │   │   │   │   ├── crc32fast v1.3.2 (*)
│   │   │   │   │   │   │   │   └── miniz_oxide v0.7.1 (*)
│   │   │   │   │   │   │   ├── hashbrown v0.14.3 (*)
│   │   │   │   │   │   │   ├── indexmap v2.1.0
│   │   │   │   │   │   │   │   ├── equivalent v1.0.1
│   │   │   │   │   │   │   │   └── hashbrown v0.14.3 (*)
│   │   │   │   │   │   │   ├── memchr v2.6.4
│   │   │   │   │   │   │   └── ruzstd v0.5.0
│   │   │   │   │   │   │       ├── byteorder v1.5.0
│   │   │   │   │   │   │       ├── derive_more v0.99.17 (proc-macro)
</code></pre></div>



<a name="462819073"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462819073" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462819073">(Aug 16 2024 at 16:17)</a>:</h4>
<p>From <code>cargo tree</code>, it seems that <code>snafu</code> has a backtrace feature that when enabled, brings in <code>backtrace</code> which uses it</p>



<a name="462819404"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462819404" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462819404">(Aug 16 2024 at 16:18)</a>:</h4>
<p><code>rg -i zstd</code> only brings up that usage and then us installing <code>zstd</code>:</p>
<div class="codehilite"><pre><span></span><code>❯ rg -i zstd
Cargo.lock
1707: &quot;ruzstd&quot;,
3360:name = &quot;ruzstd&quot;

.github/workflows/nightly_macos_apple_silicon.yml
18:      LIBRARY_PATH: /opt/homebrew/Cellar/zstd/1.5.6/lib

www/content/install/macos_x86_64.md
24:   brew install z3 zstd
</code></pre></div>



<a name="462820856"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462820856" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462820856">(Aug 16 2024 at 16:25)</a>:</h4>
<p>oh wow</p>



<a name="462820868"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462820868" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462820868">(Aug 16 2024 at 16:26)</a>:</h4>
<p>so we could get rid of snafu and get rid of that dependency?</p>



<a name="462820938"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462820938" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462820938">(Aug 16 2024 at 16:26)</a>:</h4>
<p>we barely even use snafu! <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="462820981"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462820981" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462820981">(Aug 16 2024 at 16:26)</a>:</h4>
<p>I believe so!</p>



<a name="462820996"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462820996" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462820996">(Aug 16 2024 at 16:26)</a>:</h4>
<p>I'll make a PR</p>



<a name="462821210"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462821210" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462821210">(Aug 16 2024 at 16:28)</a>:</h4>
<p>Actually, we just have to disable backtraces. Would you rather disable backtraces or remove it in favor of manually implementing std::error::Error for the...</p>



<a name="462821299"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462821299" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462821299">(Aug 16 2024 at 16:29)</a>:</h4>
<p>2 enums we have</p>



<a name="462821338"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462821338" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462821338">(Aug 16 2024 at 16:29)</a>:</h4>
<p>I'm leaning towards remove</p>



<a name="462826790"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462826790" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462826790">(Aug 16 2024 at 17:05)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/7003">https://github.com/roc-lang/roc/pull/7003</a></p>



<a name="462826979"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462826979" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462826979">(Aug 16 2024 at 17:06)</a>:</h4>
<p>Seems like we were also "using" it in the <code>object</code> crate, in that the crate has a <code>compression</code> feature that brings in zstd. By disabling the feature, we removed the dependency.</p>



<a name="462827016"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462827016" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462827016">(Aug 16 2024 at 17:06)</a>:</h4>
<p>If tests all run correctly (beyond it compiling for me locally), then we're good to go.</p>



<a name="462827113"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462827113" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462827113">(Aug 16 2024 at 17:07)</a>:</h4>
<p>There's a chance, though, that there's an OSX-only code portion that uses the compression feature, in which case this PR is moot and can be closed</p>



<a name="462831900"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462831900" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462831900">(Aug 16 2024 at 17:46)</a>:</h4>
<p>I think it's a good change regardless!</p>



<a name="462836310"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462836310" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462836310">(Aug 16 2024 at 18:21)</a>:</h4>
<p>All the tests pass, so it looks like we don't need <code>zstd</code><em>or</em> <code>z3</code></p>



<a name="462836341"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462836341" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462836341">(Aug 16 2024 at 18:21)</a>:</h4>
<p>It's on auto-merge, just needs an approval</p>



<a name="462836710"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/ld%3A%20library%20%27zstd%27%20not%20found/near/462836710" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/ld.3A.20library.20.27zstd.27.20not.20found.html#462836710">(Aug 16 2024 at 18:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/231634-beginners/topic/ld.3A.20library.20'zstd'.20not.20found/near/462815824">said</a>:</p>
<blockquote>
<p>why do we depend on zstd? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> </p>
<p>is it LLVM?</p>
</blockquote>
<p>This is why these "basic" questions are useful!</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>