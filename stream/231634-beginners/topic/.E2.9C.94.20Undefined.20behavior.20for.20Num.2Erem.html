<html>
<head><meta charset="utf-8"><title>✔ Undefined behavior for Num.rem · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html">✔ Undefined behavior for Num.rem</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="418523536"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Undefined%20behavior%20for%20Num.rem/near/418523536" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html#418523536">(Jan 28 2024 at 18:17)</a>:</h4>
<p>Modulo operation (<code>42 % 0</code>) crashes instead of panicking (divison by zero (<code>42 / 0</code>) works as expected)</p>
<p><a href="/user_uploads/22008/x8bWpacC5f4OR-0j7iJoQbSl/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/x8bWpacC5f4OR-0j7iJoQbSl/image.png" title="image.png"><img src="/user_uploads/22008/x8bWpacC5f4OR-0j7iJoQbSl/image.png"></a></div><p>Not sure if a ticket has already been created</p>



<a name="418523759"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Undefined%20behavior%20for%20Num.rem/near/418523759" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html#418523759">(Jan 28 2024 at 18:20)</a>:</h4>
<p>would mean that the wasm dev backend is missing the check if it is in the web repl. If it is in the local repl, it also affects the native dev backend</p>



<a name="418524221"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Undefined%20behavior%20for%20Num.rem/near/418524221" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html#418524221">(Jan 28 2024 at 18:27)</a>:</h4>
<p>Locally it's</p>
<div class="codehilite"><pre><span></span><code>» 42 % 0

42 : Int *
</code></pre></div>
<p>which is not expected as well I think</p>



<a name="418524293"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Undefined%20behavior%20for%20Num.rem/near/418524293" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html#418524293">(Jan 28 2024 at 18:28)</a>:</h4>
<p>I guess that if what the CPU instruction does when you pass in zero.... Lol</p>



<a name="418551274"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Undefined%20behavior%20for%20Num.rem/near/418551274" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Asher Mancinelli <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html#418551274">(Jan 29 2024 at 01:15)</a>:</h4>
<p>Is behavior always defined in roc? I would think there would be some constant folding pass that catches this before the ast leaves the frontend if so.</p>



<a name="418553388"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Undefined%20behavior%20for%20Num.rem/near/418553388" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html#418553388">(Jan 29 2024 at 01:50)</a>:</h4>
<p>this is just a bug - we didn't implement the check <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="418553409"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Undefined%20behavior%20for%20Num.rem/near/418553409" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html#418553409">(Jan 29 2024 at 01:50)</a>:</h4>
<p>the only optimizations we do are related to tail-calls, mutation, and memory management</p>



<a name="418553436"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Undefined%20behavior%20for%20Num.rem/near/418553436" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html#418553436">(Jan 29 2024 at 01:51)</a>:</h4>
<p>we don't yet do any inlining, constant folding, etc. - those are all left to LLVM for the moment</p>



<a name="418606643"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Undefined%20behavior%20for%20Num.rem/near/418606643" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html#418606643">(Jan 29 2024 at 10:31)</a>:</h4>
<p>Filed an issue. The same for <code>42 // 0</code> btw<br>
<a href="https://github.com/roc-lang/roc/issues/6459">https://github.com/roc-lang/roc/issues/6459</a></p>



<a name="418672048"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Undefined%20behavior%20for%20Num.rem/near/418672048" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html#418672048">(Jan 29 2024 at 16:15)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span>  I saw you closed the ticket, but the fix was only for <code>//</code>, not for <code>%</code>.<br>
Tho looking at the fix for <code>divTrunc</code> by Folkert, I think I can quickly replicate it for <code>rem</code></p>
<p>So if you reopen the issue, please assign it to me, I've already started! <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="418881171"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/%E2%9C%94%20Undefined%20behavior%20for%20Num.rem/near/418881171" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/.E2.9C.94.20Undefined.20behavior.20for.20Num.2Erem.html#418881171">(Jan 30 2024 at 16:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="584248">Kiryl Dziamura</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>