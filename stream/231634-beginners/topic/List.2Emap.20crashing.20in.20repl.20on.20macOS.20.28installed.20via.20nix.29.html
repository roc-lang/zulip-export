<html>
<head><meta charset="utf-8"><title>List.map crashing in repl on macOS (installed via nix) · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html">List.map crashing in repl on macOS (installed via nix)</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="469532936"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469532936" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469532936">(Sep 12 2024 at 01:42)</a>:</h4>
<p>» <a href="http://List.map">List.map</a> [0] Num.isEven</p>
<p>ld: invalid r_symbolnum=1 in '/private/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpkZEnte/app.o'<br>
/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpkZEnte/app.dylib: No such file or directory<br>
thread 'main' panicked at crates/repl_cli/src/cli_gen.rs:69:14:<br>
we produce a valid Dylib: DlOpen { desc: "dlopen(/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpkZEnte/app.dylib, 0x0005): tried: \'/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpkZEnte/app.dylib\' (no such file), \'/System/Volumes/Preboot/Cryptexes/OS/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpkZEnte/app.dylib\' (no such file), \'/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpkZEnte/app.dylib\' (no such file), \'/private/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpkZEnte/app.dylib\' (no such file), \'/System/Volumes/Preboot/Cryptexes/OS/private/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpkZEnte/app.dylib\' (no such file), \'/private/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpkZEnte/app.dylib\' (no such file)" }<br>
note: run with <code>RUST_BACKTRACE=1</code> environment variable to display a backtrace</p>



<a name="469533121"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533121" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533121">(Sep 12 2024 at 01:45)</a>:</h4>
<p>May be a temp directory permission issue?</p>



<a name="469533167"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533167" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533167">(Sep 12 2024 at 01:46)</a>:</h4>
<p>Can you run anything else in the repl?</p>



<a name="469533188"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533188" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533188">(Sep 12 2024 at 01:46)</a>:</h4>
<p>On m1 mac, I see:</p>
<div class="codehilite"><pre><span></span><code>» List.map [0] Num.isEven

[Bool.true] : List Bool
</code></pre></div>



<a name="469533351"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533351" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533351">(Sep 12 2024 at 01:48)</a>:</h4>
<p>Yep, I can run anything else (so far)</p>



<a name="469533375"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533375" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533375">(Sep 12 2024 at 01:48)</a>:</h4>
<p>I'm just going through the tutorial.<br>
The same statement compiles fine if it's in a file, it just doesn't work in <code>roc repl</code></p>



<a name="469533396"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533396" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533396">(Sep 12 2024 at 01:49)</a>:</h4>
<p>I have an M1 Mac here as well</p>



<a name="469533464"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533464" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533464">(Sep 12 2024 at 01:50)</a>:</h4>
<p>oh, I bet it is an xcode versioning issue with the new ld-prime</p>



<a name="469533472"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533472" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533472">(Sep 12 2024 at 01:50)</a>:</h4>
<p>Something related to this <a href="https://github.com/rust-lang/rustc_codegen_cranelift/issues/1456">https://github.com/rust-lang/rustc_codegen_cranelift/issues/1456</a></p>



<a name="469533602"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533602" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533602">(Sep 12 2024 at 01:52)</a>:</h4>
<p>I know we have config in roc to sometimes use <code>ld-classic</code>, but maybe are versions are off</p>



<a name="469533631"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533631" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533631">(Sep 12 2024 at 01:52)</a>:</h4>
<p>in case it helps, here's the full RUST stacktrace<br>
» <a href="http://List.map">List.map</a> [1, 2] Num.isOdd<br>
ld: invalid r_symbolnum=1 in '/private/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpi1Czdt/app.o'<br>
/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpi1Czdt/app.dylib: No such file or directory<br>
thread 'main' panicked at crates/repl_cli/src/cli_gen.rs:69:14:<br>
we produce a valid Dylib: DlOpen { desc: "dlopen(/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpi1Czdt/app.dylib, 0x0005): tried: \'/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpi1Czdt/app.dylib\' (no such file), \'/System/Volumes/Preboot/Cryptexes/OS/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpi1Czdt/app.dylib\' (no such file), \'/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpi1Czdt/app.dylib\' (no such file), \'/private/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpi1Czdt/app.dylib\' (no such file), \'/System/Volumes/Preboot/Cryptexes/OS/private/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpi1Czdt/app.dylib\' (no such file), \'/private/var/folders/98/rpg9_bzd0v750_810hh2gm0w0000gn/T/.tmpi1Czdt/app.dylib\' (no such file)" }<br>
stack backtrace:<br>
   0:        0x106b27ac4 - std::backtrace_rs::backtrace::libunwind::trace::h89330013351db63c<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/../../backtrace/src/backtrace/libunwind.rs:104:5<br>
   1:        0x106b27ac4 - std::backtrace_rs::backtrace::trace_unsynchronized::hef5ed454b5e9a42a<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5<br>
   2:        0x106b27ac4 - std::sys_common::backtrace::_print_fmt::h661fed69b93a32f7<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/sys_common/backtrace.rs:68:5<br>
   3:        0x106b27ac4 - &lt;std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display&gt;::fmt::h0aa20ca08aeb683c<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/sys_common/backtrace.rs:44:22<br>
   4:        0x106b4acc8 - core::fmt::rt::Argument::fmt::h0c1f3a7ec00b5b49<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/core/src/fmt/rt.rs:142:9<br>
   5:        0x106b4acc8 - core::fmt::write::h168dbafcf35bac68<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/core/src/fmt/mod.rs:1120:17<br>
   6:        0x106b236fc - std::io::Write::write_fmt::hdb0dd3f09dcf2281<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/io/mod.rs:1846:15<br>
   7:        0x106b278f8 - std::sys_common::backtrace::_print::h7d087ee39ce46706<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/sys_common/backtrace.rs:47:5<br>
   8:        0x106b278f8 - std::sys_common::backtrace::print::h57b289e4b951ee17<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/sys_common/backtrace.rs:34:9<br>
   9:        0x106b28e48 - std::panicking::default_hook::{{closure}}::h783b6c512154ec65<br>
  10:        0x106b28b90 - std::panicking::default_hook::hcdfa9e1e0f234a4f<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/panicking.rs:292:9<br>
  11:        0x106b29284 - std::panicking::rust_panic_with_hook::h9aea678ca49d64cf<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/panicking.rs:781:13<br>
  12:        0x106b29178 - std::panicking::begin_panic_handler::{{closure}}::ha16c3377e66deceb<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/panicking.rs:659:13<br>
  13:        0x106b27f48 - std::sys_common::backtrace::__rust_end_short_backtrace::hea8fdda1ea8a4c0e<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/sys_common/backtrace.rs:171:18<br>
  14:        0x106b28f00 - rust_begin_unwind<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/panicking.rs:647:5<br>
  15:        0x106bb4030 - core::panicking::panic_fmt::h1cb43b60f5788132<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/core/src/panicking.rs:72:14<br>
  16:        0x106bb43e4 - core::result::unwrap_failed::h71a35eff74d84b68<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/core/src/result.rs:1649:5<br>
  17:        0x104abf520 - roc_repl_cli::cli_gen::eval_llvm::hc28dd96e8dcaee1c<br>
  18:        0x104ac3ffc - roc_repl_cli::main::hb10e1401a496e987<br>
  19:        0x104a9fc38 - roc::main::hb3ee3f81639e89ec<br>
  20:        0x104a95738 - std::sys_common::backtrace::__rust_begin_short_backtrace::h3efe5bd0824ccb9f<br>
  21:        0x104a95840 - std::rt::lang_start::{{closure}}::hfc09877eff05b4cf<br>
  22:        0x106b1b500 - core::ops::function::impls::&lt;impl core::ops::function::FnOnce&lt;A&gt; for &amp;F&gt;::call_once::h4ad1988d4a160680<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/core/src/ops/function.rs:284:13<br>
  23:        0x106b1b500 - std::panicking::try::do_call::h2331bfde8ef4cc3d<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/panicking.rs:554:40<br>
  24:        0x106b1b500 - std::panicking::try::h8b8bd8b27e4c66f6<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/panicking.rs:518:19<br>
  25:        0x106b1b500 - std::panic::catch_unwind::hae6cb7ed67951dea<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/panic.rs:142:14<br>
  26:        0x106b1b500 - std::rt::lang_start_internal::{{closure}}::hd4e8129122b055e2<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/rt.rs:148:48<br>
  27:        0x106b1b500 - std::panicking::try::do_call::h6feb7fafe6c6f753<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/panicking.rs:554:40<br>
  28:        0x106b1b500 - std::panicking::try::h2fa734b49f8484d4<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/panicking.rs:518:19<br>
  29:        0x106b1b500 - std::panic::catch_unwind::h487a42f5cf6b259f<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/panic.rs:142:14<br>
  30:        0x106b1b500 - std::rt::lang_start_internal::h0e09503d2b7f298e<br>
                               at /rustc/25ef9e3d85d934b27d9dada2f9dd52b1dc63bb04/library/std/src/rt.rs:148:20<br>
  31:        0x104aa0cfc - _main</p>



<a name="469533634"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533634" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533634">(Sep 12 2024 at 01:52)</a>:</h4>
<p>can you run <code>xcodebuild -version</code></p>



<a name="469533661"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533661" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533661">(Sep 12 2024 at 01:53)</a>:</h4>
<p>bash&gt; xcodebuild -version<br>
xcode-select: error: tool 'xcodebuild' requires Xcode, but active developer directory '/Library/Developer/CommandLineTools' is a command line tools instance</p>



<a name="469533677"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533677" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533677">(Sep 12 2024 at 01:53)</a>:</h4>
<p>hmmm. i guess i need the full xcode?</p>



<a name="469533687"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533687" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533687">(Sep 12 2024 at 01:53)</a>:</h4>
<p>how does that explain the error though? the missing dylib</p>



<a name="469533944"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533944" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533944">(Sep 12 2024 at 01:57)</a>:</h4>
<p>I don't think you should need it.</p>



<a name="469533965"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469533965" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469533965">(Sep 12 2024 at 01:57)</a>:</h4>
<p>Probably means we need a different way to detect versioning for <code>ld</code>. It comes with xcode, but it also exists with m1 mac by default</p>



<a name="469534000"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469534000" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469534000">(Sep 12 2024 at 01:58)</a>:</h4>
<p>I guess our xcode version check is failing so we are not passing in <code>-ld_classic</code> which is why your link is failing. That is at least my rough guess</p>



<a name="469534044"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469534044" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469534044">(Sep 12 2024 at 01:58)</a>:</h4>
<p>I didn't think I should need it either, but if I have to install it for now, that's OK I guess</p>



<a name="469534066"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469534066" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469534066">(Sep 12 2024 at 01:58)</a>:</h4>
<p>yeah, I think it would fix things if you install it now.</p>



<a name="469534078"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469534078" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469534078">(Sep 12 2024 at 01:59)</a>:</h4>
<p>already installing. it takes a while :)</p>



<a name="469534116"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469534116" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469534116">(Sep 12 2024 at 01:59)</a>:</h4>
<p>will report back if it fixes it. can I help file a bug or something?</p>



<a name="469534331"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469534331" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469534331">(Sep 12 2024 at 02:01)</a>:</h4>
<p>I wouldn't even begin to know how to add test coverage for something like this though. How do you simulate an entire xcode full install or commandline install? lol</p>



<a name="469534451"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469534451" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469534451">(Sep 12 2024 at 02:02)</a>:</h4>
<p>I guess you could temporarily set LD_LIBRARY_PATH to some test directory and have some touched files in there in the locations you expect it to look for and then see if the detection logic works correctly</p>



<a name="469534536"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469534536" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469534536">(Sep 12 2024 at 02:03)</a>:</h4>
<p>then you'd also need a way to script things to run in the REPL and that sounds tricky</p>



<a name="469534635"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469534635" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469534635">(Sep 12 2024 at 02:04)</a>:</h4>
<p>Yeah, testing may be hard. But a bug filed would be great. We need to setup a clean macos environment and figure out the correct flags for ld.</p>



<a name="469534641"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469534641" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469534641">(Sep 12 2024 at 02:04)</a>:</h4>
<p>you could have <code>roc repl</code> take some argument with some code to try to run directly with it and then use that in the test</p>



<a name="469534833"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469534833" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469534833">(Sep 12 2024 at 02:06)</a>:</h4>
<p>actually, probably easier to just make it accept a pipe and that way you could just pipe it whatever and then check its stdout</p>



<a name="469535167"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469535167" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469535167">(Sep 12 2024 at 02:09)</a>:</h4>
<p>I do think we test this compilation pipeline on macos in our integration tests. Not 100% the same, but would run the same linking command. I think our tests just run on a mac with xcode installed. So we also need to test on a mac without xcode installed</p>



<a name="469535439"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469535439" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469535439">(Sep 12 2024 at 02:10)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="361169">@Anton</span> for awareness. We may want to expand our macos tests to also run on a system without xcode installed.</p>



<a name="469540845"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469540845" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Marreck <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469540845">(Sep 12 2024 at 03:02)</a>:</h4>
<p>Installing the full XCode caused the issue to go away!</p>



<a name="469901965"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/List.map%20crashing%20in%20repl%20on%20macOS%20%28installed%20via%20nix%29/near/469901965" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/List.2Emap.20crashing.20in.20repl.20on.20macOS.20.28installed.20via.20nix.29.html#469901965">(Sep 13 2024 at 08:57)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/7075">#7075</a></p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>