<html>
<head><meta charset="utf-8"><title>Best practices for functions that accept multiple types · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Best.20practices.20for.20functions.20that.20accept.20multiple.20types.html">Best practices for functions that accept multiple types</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="535572198"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Best%20practices%20for%20functions%20that%20accept%20multiple%20types/near/535572198" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruby <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Best.20practices.20for.20functions.20that.20accept.20multiple.20types.html#535572198">(Aug 21 2025 at 20:14)</a>:</h4>
<p>I'm trying to create a <code>concat</code> function that can accept either a string or a function as its second argument. Here's what I have:</p>
<div class="codehilite" data-code-language="roc"><pre><span></span><code>main! = |_args|
    Stdout.write!? ("hey" |&gt; concat(Fn Ansi.cr))
    Ok({})

concat = |str, str_or_thunk|
    when str_or_thunk is
        Str s -&gt; Str.concat(str, s)
        Fn f -&gt; Str.concat(str, f(""))
</code></pre></div>
<p>This works, but I have a few questions:</p>
<ol>
<li>
<p><strong>Why do I need to explicitly tag functions with <code>Fn</code>?</strong> I noticed that <code>Str</code> works as both a tag name and type, but function types like <code>(Str -&gt; Str)</code> can't be used as tag names. Is there a technical reason for this?</p>
</li>
<li>
<p><strong>Is there a cleaner/more idiomatic way to achieve this in Roc?</strong> Coming from other languages, I'm used to function overloading or polymorphic functions. What's the Roc way to handle this pattern?</p>
</li>
<li>
<p><strong>What's the general preference in the Roc community</strong> for cases where you want a function to accept different types? Should I:</p>
<ul>
<li>Use tag unions like above?</li>
<li>Create separate functions (<code>concat_str</code> and <code>concat_fn</code>)?</li>
<li>Always normalize to one type (e.g., always use functions)?</li>
<li>Something else?</li>
</ul>
</li>
</ol>
<p>My use case is building ANSI escape sequences where sometimes I want to concatenate a literal string and sometimes I want to concatenate the result of a function call (like <code>Ansi.cr</code> which returns carriage return).</p>
<p>Thanks!<br>
p.s. I used ai to help me formulate this, sorry. my brain melts a bit cause it's 10pm</p>



<a name="535572417"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Best%20practices%20for%20functions%20that%20accept%20multiple%20types/near/535572417" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruby <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Best.20practices.20for.20functions.20that.20accept.20multiple.20types.html#535572417">(Aug 21 2025 at 20:16)</a>:</h4>
<p>Oh. It seems like I need to also use Str as well.<br>
<code>Stdout.write!? ("hey" |&gt; concat(Str "you")</code></p>
<p>okay, maybe that is not that bad, it looks clear</p>



<a name="535656911"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Best%20practices%20for%20functions%20that%20accept%20multiple%20types/near/535656911" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Best.20practices.20for.20functions.20that.20accept.20multiple.20types.html#535656911">(Aug 22 2025 at 10:42)</a>:</h4>
<ol>
<li>If we allowed tag unions without tag names it would add a bunch of complexity. For example, pattern matching with tag names is very simple. Without tag names the type would have to be determined at runtime.</li>
</ol>



<a name="535669394"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/Best%20practices%20for%20functions%20that%20accept%20multiple%20types/near/535669394" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/Best.20practices.20for.20functions.20that.20accept.20multiple.20types.html#535669394">(Aug 22 2025 at 12:06)</a>:</h4>
<p>2+3. I would also use tag unions here. For function overloading we plan on adding <a href="https://docs.google.com/document/d/1OUd0f4PQjH8jb6i1vEJ5DOnfpVBJbGTjnCakpXAYeT8/edit?tab=t.0#heading=h.8z01597oqp4u">static dispatch</a>, but for this case I would probably still use tag unions.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>