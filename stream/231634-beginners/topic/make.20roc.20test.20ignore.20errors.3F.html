<html>
<head><meta charset="utf-8"><title>make roc test ignore errors? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/make.20roc.20test.20ignore.20errors.3F.html">make roc test ignore errors?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="430242542"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/make%20roc%20test%20ignore%20errors%3F/near/430242542" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pei Yang Ching <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/make.20roc.20test.20ignore.20errors.3F.html#430242542">(Mar 29 2024 at 11:31)</a>:</h4>
<p>is there a command that runs roc test, ignoring some errors, like roc run does?</p>



<a name="430303072"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/make%20roc%20test%20ignore%20errors%3F/near/430303072" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/make.20roc.20test.20ignore.20errors.3F.html#430303072">(Mar 29 2024 at 18:54)</a>:</h4>
<p>I don't think so. Though I know there was discussion about his before. I think we made a plan to add a flag, but would need to dig things up in <a class="stream" data-stream-id="304641" href="/#narrow/stream/304641-ideas">#ideas</a>, not sure if an issue got filed for it...</p>



<a name="430632889"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/make%20roc%20test%20ignore%20errors%3F/near/430632889" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pei Yang Ching <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/make.20roc.20test.20ignore.20errors.3F.html#430632889">(Apr 01 2024 at 17:23)</a>:</h4>
<p>I'd like to add this feature myself (or at least try to) can you give me any pointers on where to start?</p>



<a name="430636277"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/make%20roc%20test%20ignore%20errors%3F/near/430636277" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/make.20roc.20test.20ignore.20errors.3F.html#430636277">(Apr 01 2024 at 17:46)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="662797">@Pei Yang Ching</span>,<br>
Thanks for helping out!</p>
<blockquote>
<p>I'd like to add this feature myself (or at least try to) can you give me any pointers on where to start?</p>
</blockquote>
<p>The flag itself (e.g. <code>--ignore-errors</code>) should be added in crates/cli/src/lib.rs, I also recommend checking out how ignoring errors is handled by <code>CMD_RUN</code> in the same file. The <a href="http://cursor.sh">cursor.sh</a> editor can also assist you in finding stuff.</p>



<a name="430882631"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/make%20roc%20test%20ignore%20errors%3F/near/430882631" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pei Yang Ching <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/make.20roc.20test.20ignore.20errors.3F.html#430882631">(Apr 02 2024 at 22:06)</a>:</h4>
<p>thanks for the pointers! I created a draft PR here: <a href="https://github.com/roc-lang/roc/pull/6623">https://github.com/roc-lang/roc/pull/6623</a></p>
<p>but I couldn't build roc for some reason, neither <code>cargo build</code> nor <code>nix build</code> works, I'm using nix on MacOS (x86_64), someone knows something, <br>
logs: <a href="https://pastebin.com/KR3t3ES0">https://pastebin.com/KR3t3ES0</a></p>
<p>It seems like it couldn't link  against c++ stdlib and llvm libs for some reason?</p>



<a name="430935167"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/make%20roc%20test%20ignore%20errors%3F/near/430935167" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/make.20roc.20test.20ignore.20errors.3F.html#430935167">(Apr 03 2024 at 07:26)</a>:</h4>
<p>I usually use <code>nix develop</code> followed by <code>cargo build --release --bin roc</code>, can you try that?</p>



<a name="431407497"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/make%20roc%20test%20ignore%20errors%3F/near/431407497" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pei Yang Ching <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/make.20roc.20test.20ignore.20errors.3F.html#431407497">(Apr 04 2024 at 21:44)</a>:</h4>
<p>hey <span class="user-mention" data-user-id="361169">@Anton</span> ! After a bit of digging around, this patch seems to have fixed the issue:</p>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/crates/cli/build.rs b/crates/cli/build.rs</span>
<span class="gh">index 5d171b71c..1adcd79a4 100644</span>
<span class="gd">--- a/crates/cli/build.rs</span>
<span class="gi">+++ b/crates/cli/build.rs</span>
<span class="gu">@@ -1,6 +1,6 @@</span>
<span class="w"> </span>fn main() {
<span class="w"> </span>    // workaround for issue https://github.com/NixOS/nixpkgs/issues/166205 . This println can be removed when this issue is fixed. Upgrading to LLVM 14 could also fix this iss
ue.
<span class="w"> </span>    // also see https://github.com/NixOS/nixpkgs/pull/181485
<span class="gd">-    #[cfg(all(target_os = "macos", target_arch = "aarch64"))]</span>
<span class="gd">-    println!("cargo:rustc-link-lib=c++abi")</span>
<span class="gi">+    #[cfg(all(target_os = "macos"))]</span>
<span class="gi">+    println!("cargo:rustc-link-arg=-lc++abi")</span>
<span class="w"> </span>}
</code></pre></div>
<p>in short, it seems this build flag, which is currently used by MacOS ARM, is also needed for x86_64 MacOS. I'd make a PR, but would like to first run this through someone familiar with the MacOS+nix side, if there's anyone like that please do let me know, thanks again :)</p>



<a name="431475566"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/make%20roc%20test%20ignore%20errors%3F/near/431475566" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/make.20roc.20test.20ignore.20errors.3F.html#431475566">(Apr 05 2024 at 08:38)</a>:</h4>
<p>Looks like this has <a href="https://github.com/NixOS/nixpkgs/pull/292043">recently been fixed</a>. I'll try updating to the latest nix in the coming days to see if we can get rid of this workaround. I'll let you know when the update is merged :)</p>



<a name="432873666"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/make%20roc%20test%20ignore%20errors%3F/near/432873666" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/make.20roc.20test.20ignore.20errors.3F.html#432873666">(Apr 12 2024 at 10:17)</a>:</h4>
<p><span class="user-mention" data-user-id="662797">@Pei Yang Ching</span>, <a href="https://github.com/roc-lang/roc/pull/6631">PR#6631</a> was merged, I was able to remove the workaround in <a href="http://build.rs">build.rs</a></p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>