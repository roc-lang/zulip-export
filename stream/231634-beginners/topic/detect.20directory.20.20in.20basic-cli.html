<html>
<head><meta charset="utf-8"><title>detect directory  in basic-cli · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html">detect directory  in basic-cli</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="410167113"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410167113" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410167113">(Dec 27 2023 at 15:10)</a>:</h4>
<p>I want to detect that something  is  directory in  basic  cli I figured  out  that  I will list  it,  but  this  does not work for  empty  directories  because  usual  content  ".."  "."  is not there</p>



<a name="410169932"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410169932" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410169932">(Dec 27 2023 at 15:33)</a>:</h4>
<p>Yeah, we should create a function for this, I'll create a topic in the ideas stream for discussion.</p>



<a name="410170263"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410170263" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410170263">(Dec 27 2023 at 15:36)</a>:</h4>
<p>For now you can use  the unix command <code>test -d dirOrFilePath</code> through <code>Cmd</code></p>



<a name="410172178"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410172178" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410172178">(Dec 27 2023 at 15:53)</a>:</h4>
<p>ok  thx  for  tips</p>



<a name="410404396"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410404396" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410404396">(Dec 29 2023 at 08:22)</a>:</h4>
<p>I made <a href="https://github.com/roc-lang/basic-cli/issues/145">issue 145</a> for the new functions to be added.</p>



<a name="410475907"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410475907" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410475907">(Dec 29 2023 at 20:35)</a>:</h4>
<p>it  does not work for me it is suggested to  do this </p>
<div class="codehilite"><pre><span></span><code>test -f file; echo $?
</code></pre></div>
<p>but $? can't be understood</p>



<a name="410475972"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410475972" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410475972">(Dec 29 2023 at 20:36)</a>:</h4>
<p>in general  test  gives no visible output like  ls  and others</p>



<a name="410477993"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410477993" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karakatiza <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410477993">(Dec 29 2023 at 21:00)</a>:</h4>
<p>If I understand you correctly - <code>test</code> returns a truthy or falsy value which can be chained with &amp;&amp;, for example; and <code>$?</code> resolves to the return value of the latest executed command, in this case - <code>test</code></p>



<a name="410478111"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410478111" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410478111">(Dec 29 2023 at 21:01)</a>:</h4>
<p>yes  and I think that's the problem because I do not get typical  output to console</p>



<a name="410478547"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410478547" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karakatiza <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410478547">(Dec 29 2023 at 21:05)</a>:</h4>
<p>I just realized Cmd module does not return program result value <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="410478584"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410478584" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karakatiza <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410478584">(Dec 29 2023 at 21:06)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> regarding  <a href="https://github.com/roc-lang/basic-cli/issues/145">145</a> - would it make sense to have <code>isADir : Path -&gt; [IsDir, Other]</code> and so on, to have a version consistent with <code>type</code>?</p>



<a name="410527511"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410527511" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410527511">(Dec 30 2023 at 09:16)</a>:</h4>
<p><span class="user-mention" data-user-id="568088">@Artur Swiderski</span> for <code>test -f</code> you need to use the <a href="https://www.roc-lang.org/packages/basic-cli/0.7.1/Cmd#status"><code>Cmd.status</code> function</a>. <code>test -f fileOrDir</code> returns with exit code 0 if  <code>fileOrDir</code> is a file and with exit code 1 if it is not a file. The status function will return a success task if the exit code was 0 and an error task if not. You can use <code>Task.attempt</code> to pattern match on the <code>Result</code>.</p>



<a name="410527608"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410527608" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410527608">(Dec 30 2023 at 09:18)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="361169">Anton</span> regarding  <a href="https://github.com/roc-lang/basic-cli/issues/145">145</a> - would it make sense to have <code>isADir : Path -&gt; [IsDir, Other]</code> and so on, to have a version consistent with <code>type</code>?</p>
</blockquote>
<p>Do you mean in addition to the proposed <code>isDir</code> or instead of it?</p>



<a name="410546420"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410546420" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karakatiza <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410546420">(Dec 30 2023 at 13:43)</a>:</h4>
<p>In addition - as having just Bool functions is useful, too<br>
This way, the same function will be able to be used in different contexts, something like:<br>
<code>
logDirectory = \ elem -&gt; when elem is
   IsDir -&gt; Log.writeLine "encountered \(dirname)"
  _ -&gt; Task.ok
...
type pathA |&gt; logDirectory
isDir pathB |&gt; logDirectory
</code><br>
Don't know how common a usecase this would be.<br>
But the Bool one is more important anyway.</p>
<p>Also, then it would make sense to swap the names:<br>
isDir: Path -&gt; [IsDir, Other]<br>
isADir: Path -&gt; Bool</p>



<a name="410548680"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410548680" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410548680">(Dec 30 2023 at 14:16)</a>:</h4>
<blockquote>
<p>Don't know how common a usecase this would be.</p>
</blockquote>
<p>I think it's wise to wait until there is demand in this case.</p>



<a name="410658795"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/detect%20directory%20%20in%20basic-cli/near/410658795" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Swiderski <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/detect.20directory.20.20in.20basic-cli.html#410658795">(Dec 31 2023 at 20:39)</a>:</h4>
<p>ok below works for me</p>
<div class="codehilite"><pre><span></span><code>isDirectoryPath : Str -&gt; Task Bool  *
isDirectoryPath = \ str -&gt;
    command =
        Cmd.new &quot;test&quot;
        |&gt; Cmd.args [&quot;-d&quot;,  str]

    result &lt;- Cmd.status  command |&gt; Task.attempt
    when result is
        Ok out -&gt;
            Task.ok Bool.true
        Err _ -&gt;
            Task.ok Bool.false
</code></pre></div>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>