<html>
<head><meta charset="utf-8"><title>formal grammar / newlines in the grammar · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/formal.20grammar.20.2F.20newlines.20in.20the.20grammar.html">formal grammar / newlines in the grammar</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="392828959"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/formal%20grammar%20/%20newlines%20in%20the%20grammar/near/392828959" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Colvin <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/formal.20grammar.20.2F.20newlines.20in.20the.20grammar.html#392828959">(Sep 24 2023 at 12:57)</a>:</h4>
<p>is there a formal grammar written out for Roc? If not, can someone give me a quick overview of how newlines function in the grammar? E.g. it seems newlines are an important part of backpassing.</p>



<a name="392856115"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/formal%20grammar%20/%20newlines%20in%20the%20grammar/near/392856115" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/formal.20grammar.20.2F.20newlines.20in.20the.20grammar.html#392856115">(Sep 24 2023 at 18:13)</a>:</h4>
<p>Can you provide the specific example that's not working?</p>



<a name="392856734"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/formal%20grammar%20/%20newlines%20in%20the%20grammar/near/392856734" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Colvin <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/formal.20grammar.20.2F.20newlines.20in.20the.20grammar.html#392856734">(Sep 24 2023 at 18:23)</a>:</h4>
<p>I don't have a problem with something not working, I'm more asking from a language design point of view, I'm interested to know what role newlines play in the grammar. I guess i can just keep playing with the language and find out, but I imagine that it's been thought through and wondered if someone could share some insight or explanation. E.g. (these are me working it out otoh so forgive mistakes) for <code>D</code> you can say "newlines play no role in the grammar beyond being whitespace, with the exception of <code>// comments</code> and shebangs. For ANSI <code>C</code> you can say "after pre-processing, newlines play no role in the grammar beyond being whitespace". That sort of thing</p>



<a name="392874115"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/formal%20grammar%20/%20newlines%20in%20the%20grammar/near/392874115" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/formal.20grammar.20.2F.20newlines.20in.20the.20grammar.html#392874115">(Sep 24 2023 at 23:01)</a>:</h4>
<p>we don't have a formal grammar...off the top of my head, the places where newlines are currently significant is:</p>
<ul>
<li>a type annotation followed on the next line by a definition (that is, an assignment using <code>=</code>) at the same indentation level is applied to that def (same as in Elm and Haskell)</li>
<li>defs, type annotations, ability declarations,  <code>when</code> branches, backpassing, type alias declarations, and opaque type declarations must all begin after a newline (optionally indented)</li>
<li>any sequence of defs at the same indentation level must end with an expression at that indentation level</li>
</ul>



<a name="392874242"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/formal%20grammar%20/%20newlines%20in%20the%20grammar/near/392874242" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/formal.20grammar.20.2F.20newlines.20in.20the.20grammar.html#392874242">(Sep 24 2023 at 23:04)</a>:</h4>
<p>I think that's it, but there might be more I'm not thinking of. Also we've talked about introducing a simplifying/unifying concept of "blocks" based on indentation level, which wouldn't affect any current code I've seen written in practice, but which might simplify explaining the rules (among other potential benefits)</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>