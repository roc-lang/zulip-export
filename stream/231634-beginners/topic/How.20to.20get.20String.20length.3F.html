<html>
<head><meta charset="utf-8"><title>How to get String length? Â· beginners Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html">How to get String length?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="434949053"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434949053" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434949053">(Apr 23 2024 at 10:05)</a>:</h4>
<p>This is an extremely beginners' question, but I can't figure out how to get the length of a string in Roc. Can someone help please?</p>



<a name="434950562"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434950562" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434950562">(Apr 23 2024 at 10:14)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="709964">@Abhinav Sarkar</span>,<br>
If you only expect your Str to contain ascii characters, you can use <code>List.len (Str.toUtf8 myStr)</code>. For an in depth treatment of this suprisingly complicated problem I recommend reading the sections Unicde, Graphemes, Code Points... near the top of the <a href="https://www.roc-lang.org/builtins/Str">Str docs</a>.</p>



<a name="434950713"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434950713" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434950713">(Apr 23 2024 at 10:15)</a>:</h4>
<p>I'd like to handle Unicode too. I read the docs. It recommends using the roc-unicode package, but it does not have any releases.</p>



<a name="434950862"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434950862" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434950862">(Apr 23 2024 at 10:16)</a>:</h4>
<p>And I don't know how to use a package from Github without releases. Can't find any doc on that.</p>



<a name="434955134"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434955134" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434955134">(Apr 23 2024 at 10:42)</a>:</h4>
<p>Do we have something like <code>countGraphemes</code> in roc-unicode that works <span class="user-mention" data-user-id="515757">@Luke Boswell</span>?<br>
Can you tell us a bit more about why you need the length of a string <span class="user-mention" data-user-id="709964">@Abhinav Sarkar</span>? That may allow me to give some specific suggestions.</p>



<a name="434955442"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434955442" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434955442">(Apr 23 2024 at 10:44)</a>:</h4>
<p>I'm writing a pretty printing algorithm and it requires me to know how many columns a strings takes when printed. If I understand correctly, that's the grapheme  count of string.</p>



<a name="434956053"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434956053" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434956053">(Apr 23 2024 at 10:48)</a>:</h4>
<p>Yeah, <code>Grapheme.split</code> from <a href="https://github.com/roc-lang/unicode">roc-lang/unicode</a> can be used to do this with unicode.</p>



<a name="434956102"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434956102" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434956102">(Apr 23 2024 at 10:49)</a>:</h4>
<p>We don't have a release so you currently have to clone that repo (it's tiny) and use a local reference</p>



<a name="434956293"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434956293" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434956293">(Apr 23 2024 at 10:50)</a>:</h4>
<p>You can use a path for a package, <a href="https://github.com/lukewilliamboswell/roc-json/blob/35686acda9a4b5923535438a68dd1371c52e1167/examples/simple1.roc#L4">like we do here</a></p>



<a name="434956438"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434956438" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434956438">(Apr 23 2024 at 10:51)</a>:</h4>
<p>Thanks!</p>



<a name="434956469"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434956469" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434956469">(Apr 23 2024 at 10:51)</a>:</h4>
<p>Or if you are looking for unicode CodePoints <a href="https://github.com/roc-lang/unicode/blob/main/examples/simple.roc">https://github.com/roc-lang/unicode/blob/main/examples/simple.roc</a></p>



<a name="434956539"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434956539" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434956539">(Apr 23 2024 at 10:52)</a>:</h4>
<p>^^ this example shows how to parse utf8 and also the package from a path</p>



<a name="434959203"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434959203" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434959203">(Apr 23 2024 at 11:07)</a>:</h4>
<p>I think for a pretty printing "column" count, grapheme count makes the most sense</p>



<a name="434959550"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434959550" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434959550">(Apr 23 2024 at 11:09)</a>:</h4>
<p>if you're in a monospace font, 1 grapheme will more often correspond to 1 "character width" than anything else will (including code points), although it's still not guaranteed</p>



<a name="434959684"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434959684" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434959684">(Apr 23 2024 at 11:10)</a>:</h4>
<p>for example, some East Asian characters are defined to be half-width</p>



<a name="434959799"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434959799" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434959799">(Apr 23 2024 at 11:10)</a>:</h4>
<p>I'd like to be as accurate as possible. Any suggestion for dealing with such cases?</p>



<a name="434960117"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434960117" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434960117">(Apr 23 2024 at 11:12)</a>:</h4>
<p>I actually just tried this out (I asked chatGPT for some concrete examples of them) and they seem to all render the same width in my terminal:</p>
<ul>
<li>Half-width 'ã‚«' (U+FF76) versus full-width 'ã‚«' (U+30AB).</li>
<li>Half-width 'ã‚±' (U+FF79) versus full-width 'ã‚±' (U+30B1).</li>
</ul>



<a name="434960154"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434960154" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434960154">(Apr 23 2024 at 11:12)</a>:</h4>
<p>so maybe that's not an issue in practice</p>



<a name="434960206"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434960206" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434960206">(Apr 23 2024 at 11:12)</a>:</h4>
<p>so grapheme count should work fine?</p>



<a name="434960269"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434960269" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434960269">(Apr 23 2024 at 11:13)</a>:</h4>
<p>if you wanted to be maximally accurate, I think you'd need to get specific fonts involved and measure their glyph widths, which probably doesn't make sense for a pretty printer <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="434960297"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434960297" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434960297">(Apr 23 2024 at 11:13)</a>:</h4>
<p>personally I would use grapheme count for this, yeah</p>



<a name="434960373"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434960373" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434960373">(Apr 23 2024 at 11:13)</a>:</h4>
<p>I can't think of a measurement that's font-agnostic and would work better than grapheme count</p>



<a name="434960837"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434960837" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434960837">(Apr 23 2024 at 11:16)</a>:</h4>
<p>I rather not deal with fonts. I'll assume monospace. Let me figure out how to get grapheme count.</p>



<a name="434960952"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434960952" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434960952">(Apr 23 2024 at 11:16)</a>:</h4>
<p>Also a feedback as a noob, it seems really wrong to go through all these hoops to get a string's length.</p>



<a name="434965026"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434965026" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434965026">(Apr 23 2024 at 11:40)</a>:</h4>
<p>I could be misunderstanding but I think the "issue" here isn't a Roc-specific one. It might appear Roc is asking you to go through extra hoops, but that's probably because other languages in some cases gloss over things a bit too much, and make assumptions on behalf of the user.</p>
<p>Whether this is an indication that there could exist a tiny bit more user-friendly library in user space - probably, yes, but it'll come with caveats, as there aren't any shortcuts which could be taken without compromise in this case.</p>



<a name="434965488"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434965488" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434965488">(Apr 23 2024 at 11:43)</a>:</h4>
<p>Sure, but in my life I've never seen a single language that has a String data type and does not have a length function in it. TBH, I was very surprised with Roc's choice. Just my 2c.</p>



<a name="434966349"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434966349" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434966349">(Apr 23 2024 at 11:48)</a>:</h4>
<p>yeah this is an intentional choice</p>



<a name="434966968"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434966968" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434966968">(Apr 23 2024 at 11:52)</a>:</h4>
<p>the way it goes in most languages is: </p>
<ol>
<li>Use a builtin <code>Str.len</code> or similar </li>
<li>Emoji bugs get reported</li>
<li>Learn about the different ways string length can be represented (graphemes and such), figure out which one makes the best sense for this use case, implement a fix</li>
</ol>
<p>my hope is to replace that status quo with: </p>
<ol>
<li>Look for builtin <code>Str.len</code> or similar, discover it's not there</li>
<li>Ask in <a class="stream" data-stream-id="231634" href="/#narrow/stream/231634-beginners">#beginners</a>  how to get string length in Roc</li>
<li>Learn about the different ways string length can be represented (graphemes and such), figure out which one makes the best sense for this use case, implement it using that way the first time around instead of shipping with Unicode bugs <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></li>
</ol>



<a name="434967021"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434967021" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434967021">(Apr 23 2024 at 11:52)</a>:</h4>
<p>this flow will be smoother when we have a release of <code>roc-unicode</code>, to be fair <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="434967151"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434967151" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434967151">(Apr 23 2024 at 11:53)</a>:</h4>
<p>I've never seen a language like it either. I was surprised too. But I'm finding there are lots of little details like this where a lot of care has gone into thinking about how to set people up for success. It's why I love using roc so much.</p>
<p>I'd love to improve the unicode library. If anyone is interested in helping with that then please let me know. A second pair of eyes to help make things more sensible would be amazing.</p>



<a name="434967399"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434967399" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434967399">(Apr 23 2024 at 11:54)</a>:</h4>
<p><span class="user-mention" data-user-id="709964">@Abhinav Sarkar</span>, my understanding is that one of the philosophies behind the design of Roc is to minimise (or eliminate altogether) the number of ways a developer could shoot themselves in the foot.<br>
One of the directions for ensuring this is via not allowing use-case ambiguities and misinterpretation of semantics to be mistaken to be shortcomings of the language.<br>
The language enables the user to truly attempt to identify and understand their use-case, and act accordingly.</p>



<a name="434967821"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434967821" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hristo <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434967821">(Apr 23 2024 at 11:57)</a>:</h4>
<p>If there's is insufficient clarity or understanding in a use-case, then this signifies that the language cannot fill it in on behalf of the user, because at best that would be a guess. That's why the user is empowered to actually get to understand better the underlying problem they're trying to solve.</p>
<p>Again, user-space libraries do not have to share the same methodologies as the standard library, and many users might find functionality providing glossing-over of concepts (which in other languages may come as part of the standard library) available at that kind of level.</p>



<a name="434984203"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/434984203" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#434984203">(Apr 23 2024 at 13:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F/near/434967021">said</a>:</p>
<blockquote>
<p>this flow will be smoother when we have a release of <code>roc-unicode</code>, to be fair <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
</blockquote>
<p>When is the release expected?</p>



<a name="435071237"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435071237" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435071237">(Apr 23 2024 at 21:32)</a>:</h4>
<p>Nothing stopping use from making a release today. Though it doesn't cover much of unicode yet, and hasn't been tested in great detail, so maybe it's not a good idea?? I dont know but I guess a release would indicate a lvel of maturity, and what is there is still a WIP though usable.</p>
<p>It took me quite a while to build the text segmentation for graphemes. It would probably be much easier now.</p>
<p>I was planning to do some fuzz testing with it, but keep getting distracted on other projects and work.</p>



<a name="435087138"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435087138" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435087138">(Apr 24 2024 at 00:27)</a>:</h4>
<p>Can make it release 0.0.0-alpha or something</p>



<a name="435202708"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435202708" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435202708">(Apr 24 2024 at 14:27)</a>:</h4>
<p>The visual width in a terminal is implemented using the wcwidth function, the python package has an explanation of it here: <a href="https://pypi.org/project/wcwidth/">https://pypi.org/project/wcwidth/</a></p>
<p>I actually started working on a roc-wcwidth package a while ago for a project, but didn't finish it. I'll dig it up tomorrow and see if I can finish it.</p>



<a name="435215040"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435215040" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhinav Sarkar <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435215040">(Apr 24 2024 at 15:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="508951">Hannes</span> <a href="#narrow/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F/near/435202708">said</a>:</p>
<blockquote>
<p>The visual width in a terminal is implemented using the wcwidth function, the python package has an explanation of it here: <a href="https://pypi.org/project/wcwidth/">https://pypi.org/project/wcwidth/</a></p>
</blockquote>
<p>Will it be not same as grapheme count as discussed above?</p>



<a name="435282893"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435282893" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435282893">(Apr 24 2024 at 22:32)</a>:</h4>
<blockquote>
<p>Characters of category East Asian Wide (W) or East Asian Full-width (F) which are displayed using two terminal cells.</p>
</blockquote>
<p>Those count as 2 cells</p>



<a name="435282900"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435282900" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435282900">(Apr 24 2024 at 22:32)</a>:</h4>
<p>So it will be different</p>



<a name="435283882"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435283882" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435283882">(Apr 24 2024 at 22:43)</a>:</h4>
<p>that's a good point, this is probably a better choice than graphemes!</p>



<a name="435283971"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435283971" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435283971">(Apr 24 2024 at 22:44)</a>:</h4>
<p>you could always start with graphemes to get close and then switch to using this later, if you don't want to block on it</p>



<a name="435284168"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435284168" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435284168">(Apr 24 2024 at 22:46)</a>:</h4>
<p>Would it be something worth adding from the platform? <a href="https://github.com/unicode-rs/unicode-width">https://github.com/unicode-rs/unicode-width</a></p>



<a name="435284264"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435284264" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435284264">(Apr 24 2024 at 22:47)</a>:</h4>
<p>Given basic CLI will likely have tools built for a terminal, maybe we should expose that as a helper until we can write a pure roc implementation?</p>



<a name="435284562"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435284562" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435284562">(Apr 24 2024 at 22:50)</a>:</h4>
<p>Actually, we might have most of the things we need in our unicode package already</p>



<a name="435284754"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435284754" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435284754">(Apr 24 2024 at 22:52)</a>:</h4>
<p>yeah it's probably not very different from graphemes I'd imagine</p>



<a name="435284883"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435284883" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435284883">(Apr 24 2024 at 22:54)</a>:</h4>
<p>From what I can tell, there is just <a href="https://www.unicode.org/Public/15.1.0/ucd/EastAsianWidth.txt">the EastAsianWidth data file</a> which maps codepoints to the width property. And then everything else is (neutral) and given a width of 1, except a handful of harcoded cases like em dash.</p>



<a name="435284941"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435284941" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435284941">(Apr 24 2024 at 22:55)</a>:</h4>
<p>Actually, it's just this data file</p>



<a name="435284977"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435284977" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435284977">(Apr 24 2024 at 22:55)</a>:</h4>
<div class="codehilite"><pre><span></span><code># The format is two fields separated by a semicolon.
# Field 0: Unicode code point value or range of code point values
# Field 1: East_Asian_Width property, consisting of one of the following values:
#         &quot;A&quot;, &quot;F&quot;, &quot;H&quot;, &quot;N&quot;, &quot;Na&quot;, &quot;W&quot;
#  - All code points, assigned or unassigned, that are not listed
#      explicitly are given the value &quot;N&quot;.
</code></pre></div>



<a name="435285113"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435285113" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435285113">(Apr 24 2024 at 22:57)</a>:</h4>
<p>The Unicode Character Database [<a href="https://www.unicode.org/reports/tr41/tr41-32.html#UCD">UCD</a>] assigns to each Unicode character as its default width property one of six values:Â <em>Ambiguous, Fullwidth, Halfwidth, Narrow, Wide</em>, orÂ <em>Neutral</em>Â (<em>= Not East Asian</em>). For any given operation, these six default property values resolve into only two property values,Â <em>narrow</em>Â andÂ <em>wide,</em>Â depending on context.</p>



<a name="435285715"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435285715" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435285715">(Apr 24 2024 at 23:02)</a>:</h4>
<p><a href="/user_uploads/22008/GCjkMmFtwOgweo_fLfJcl7RH/Screenshot-2024-04-25-at-09.02.19.png">Screenshot-2024-04-25-at-09.02.19.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/GCjkMmFtwOgweo_fLfJcl7RH/Screenshot-2024-04-25-at-09.02.19.png" title="Screenshot-2024-04-25-at-09.02.19.png"><img src="/user_uploads/22008/GCjkMmFtwOgweo_fLfJcl7RH/Screenshot-2024-04-25-at-09.02.19.png"></a></div>



<a name="435286677"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435286677" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435286677">(Apr 24 2024 at 23:12)</a>:</h4>
<p>We already have a few examples that do this in our package, so this would be quite easy to implement.</p>
<p>If someone would like to have a crack at this, we just need to add that data file to <code>unicode/package/data</code>, then write a <code>InternalEAWGen.roc</code> file that is almost a copy paste of <a href="https://github.com/roc-lang/unicode/blob/main/package/InternalGBPGen.roc">InternalGBPGen.roc</a> to parse the data file and generates a Roc file that maps CodePoints <code>CP</code> to an East Asian Width property <code>EAW : [Ambiguous, Fullwidth, Halfwidth, Narrow, Neutral, Wide]</code>, and then implement a corresponding helper that uses this to walk through a <code>List U8</code> or a <code>Str</code> and sum of the width. </p>
<p>This is some of what the <code>InternalGBP.roc</code> looks like.</p>
<div class="codehilite"><pre><span></span><code>interface InternalGBP
    exposes [GBP, fromCP, isExtend, isZWJ]
    imports [InternalCP.{ CP, toU32, fromU32Unchecked }]

GBP : [CR, Control, Extend, ZWJ, RI, Prepend, SpacingMark, V, T, LF, LVT, LV, L, Other]

isCR : U32 -&gt; Bool
isCR = \u32 -&gt; (u32 == 13)

# etc
</code></pre></div>



<a name="435893083"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435893083" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> timotree <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435893083">(Apr 28 2024 at 17:26)</a>:</h4>
<p>Aren't emojis double width?</p>



<a name="435896358"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435896358" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435896358">(Apr 28 2024 at 18:09)</a>:</h4>
<p>I believe emoji are all quadruple length.</p>
<p>For example:  <code>"ðŸ™‚" |&gt; Str.toUtf8 == [240, 159, 153, 130]</code></p>



<a name="435897392"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435897392" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435897392">(Apr 28 2024 at 18:15)</a>:</h4>
<p>I think this is a question about visible width - like how it will be printed in a terminal using a monospace font</p>



<a name="435897565"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435897565" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435897565">(Apr 28 2024 at 18:16)</a>:</h4>
<p>this whole thread is reinforcing the decision to not include "string length" in the <code>Str</code> module - we've discussed like 5 different concepts of length, and all but one of them have turned out to be the wrong answer for the use case! <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="435900128"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435900128" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435900128">(Apr 28 2024 at 18:36)</a>:</h4>
<p>Clearly should have caught up on a little more context before dropping off topic responses! <span aria-label="woozy face" class="emoji emoji-1f974" role="img" title="woozy face">:woozy_face:</span></p>



<a name="435900183"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435900183" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435900183">(Apr 28 2024 at 18:37)</a>:</h4>
<p>Like just the comment before timotree! <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="435900260"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/435900260" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#435900260">(Apr 28 2024 at 18:38)</a>:</h4>
<p>no worries, the rabbit hole is very deep on this topic! <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="436006114"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20String%20length%3F/near/436006114" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20String.20length.3F.html#436006114">(Apr 29 2024 at 10:18)</a>:</h4>
<p><a href="https://github.com/roc-lang/unicode/issues/6">https://github.com/roc-lang/unicode/issues/6</a> created to track the above</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>