<html>
<head><meta charset="utf-8"><title>error messages · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html">error messages</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="249015017"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249015017" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249015017">(Aug 10 2021 at 18:10)</a>:</h4>
<p>Anyone spot my error below?</p>
<div class="codehilite"><pre><span></span><code>app &quot;Tester&quot;
    packages { base: &quot;platform&quot; }
    imports [base.Task,  Test]
    provides [ main ] to base

main : Task.Task {} []
main =
    t1 = { name : &quot;1 + 1 = 2&quot;, test: 1 + 1 == 2 }
    t2 = { name : &quot;2 + 2 = 5&quot;, test: 2 + 2 == 5 }
    #
    # The first three lines below succeed, the last one fails: emitted runtime error ...
    # Test.evalTest t1
    # Test.evalTest t2
    # Test.strListToStr [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;] &quot;,&quot;
    List.map [t1,t2] evalTest |&gt; Test.strListToStr &quot;,&quot;
       |&gt; Task.putLine
</code></pre></div>
<p>The code is in the <code>jim</code> branch: see <code>Tester.roc</code> and <code>Test.roc</code></p>



<a name="249022693"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249022693" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249022693">(Aug 10 2021 at 19:12)</a>:</h4>
<p>In the above code, fail on <code>List.map [t1,t2] evalTest |&gt; Test.strListToStr ","</code>, no useful error messages, just "error"</p>



<a name="249023147"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249023147" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249023147">(Aug 10 2021 at 19:16)</a>:</h4>
<p>did you compile the roc compiler in release or debug mode (debug is the default)?</p>



<a name="249023996"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249023996" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249023996">(Aug 10 2021 at 19:23)</a>:</h4>
<p>Probably debug: <code>target/debug/roc examples/benchmarks/Tester.roc</code>.  I don't remember how I installed it.</p>



<a name="249025167"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249025167" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249025167">(Aug 10 2021 at 19:31)</a>:</h4>
<p>Here is the full error message:</p>
<div class="codehilite"><pre><span></span><code>➜  roc git:(jim) vr test
    Finished dev [unoptimized + debuginfo] target(s) in 1.02s
     Running `target/debug/roc examples/benchmarks/Tester.roc`
emitted runtime error LookupNotInScope(|L 17-17, C 21-29| Ident(IdentStr { is_small_str: true, string: &quot;evalTest&quot;, elements: [101, 118, 97, 108, 84, 101, 115, 116] }), {&quot;U8&quot;, &quot;F64&quot;, &quot;Binary32&quot;, &quot;Integer&quot;, &quot;Nat&quot;, &quot;I128&quot;, &quot;Decimal&quot;, &quot;Dec&quot;, &quot;Signed8&quot;, &quot;Dict&quot;, &quot;Str&quot;, &quot;Binary64&quot;, &quot;Result&quot;, &quot;I64&quot;, &quot;U64&quot;, &quot;FloatingPoint&quot;, &quot;F32&quot;, &quot;Float&quot;, &quot;Unsigned8&quot;, &quot;Natural&quot;, &quot;Signed16&quot;, &quot;Signed64&quot;, &quot;main&quot;, &quot;Int&quot;, &quot;Num&quot;, &quot;U16&quot;, &quot;Set&quot;, &quot;t2&quot;, &quot;I32&quot;, &quot;t1&quot;, &quot;Unsigned32&quot;, &quot;Signed128&quot;, &quot;List&quot;, &quot;Unsigned16&quot;, &quot;Signed32&quot;, &quot;Unsigned64&quot;, &quot;Unsigned128&quot;, &quot;U32&quot;, &quot;Bool&quot;, &quot;I16&quot;, &quot;I8&quot;, &quot;U128&quot;})
thread &#39;&lt;unnamed&gt;&#39; panicked at &#39;index out of bounds: the len is 0 but the index is 0&#39;, compiler/mono/src/ir.rs:7649:35
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="249026148"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249026148" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249026148">(Aug 10 2021 at 19:38)</a>:</h4>
<p>so that says that <code>evalTest</code> is not in scope</p>



<a name="249026842"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249026842" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249026842">(Aug 10 2021 at 19:44)</a>:</h4>
<p>Good to know that I can extract info from those messages.  Thanks!</p>
<p>I put in the missing <code>Test.</code> so as to have <code>List.map [t1,t2] Test.evalTest |&gt; Test.strListToStr ","</code></p>
<p>Alas, I still get an error:</p>
<div class="codehilite"><pre><span></span><code>➜  roc git:(jim) ✗ vr test
    Finished dev [unoptimized + debuginfo] target(s) in 0.69s
     Running `target/debug/roc examples/benchmarks/Tester.roc`
error: Failed at the test script
</code></pre></div>
<p>The script is <code>cargo run examples/benchmarks/Tester.roc</code></p>



<a name="249039270"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249039270" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249039270">(Aug 10 2021 at 21:18)</a>:</h4>
<p><span class="user-mention" data-user-id="430829">@James Carlson</span> it would be awesome if you could post an issue with a <code>.roc</code> file that reproduces that <code>LookupNotInScope</code> error, so we can make sure it gives a proper compile-time error!</p>



<a name="249039549"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249039549" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249039549">(Aug 10 2021 at 21:21)</a>:</h4>
<p>Will do!</p>



<a name="249039684"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249039684" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249039684">(Aug 10 2021 at 21:22)</a>:</h4>
<p>it would give one if we didn't panic later in mono</p>



<a name="249039719"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249039719" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249039719">(Aug 10 2021 at 21:22)</a>:</h4>
<p>the real reason I think is that we don't make specializations when we know the function will blow up when we call it</p>



<a name="249039732"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249039732" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249039732">(Aug 10 2021 at 21:22)</a>:</h4>
<p>but the mono machinery assumes that function does exist</p>



<a name="249074979"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249074979" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249074979">(Aug 11 2021 at 07:08)</a>:</h4>
<p>This message illustrates the use of a small testing framework (LOL!) in interface <code>Test</code> of the <code>jim</code> branch (<code>examples/benchmarks</code>). It is for the parser project I'm working on. Here is an example (code is in <code>ParseApp</code>).</p>
<div class="codehilite"><pre><span></span><code>➜  roc git:(jim) ✗ cargo run examples/benchmarks/ParseApp.roc
    Finished dev [unoptimized + debuginfo] target(s) in 0.27s
     Running `target/debug/roc examples/benchmarks/ParseApp.roc`
Pass :: run &quot;abcd any =&gt; &quot;a&quot;
Pass :: run &quot;abcd&quot; satisfy (\u -&gt; u == 97)) =&gt; &quot;a&quot;
Pass :: Use &#39;second&#39; to recognize &quot;a&quot; then &quot;b&quot; returning &quot;b&quot;
Pass :: Use &#39;first&#39; to recognize &quot;a&quot; then &quot;b&quot; returning &quot;a&quot;
Pass :: Use map to shift output of parser: run &quot;abcd&quot; (map any (\u -&gt; u + 25)) == &quot;z&quot;
Pass :: Use andThen to recognize strings beginning with two repeated letters (succeed on input &quot;aaxyz&quot;)
runtime: 0.380ms
</code></pre></div>
<p>Of course you can also get <code>Fail ::</code></p>
<p>Tests look like this:</p>
<div class="codehilite"><pre><span></span><code>p4 = {name : &quot;Use &#39;first&#39; to recognize \&quot;a\&quot; then \&quot;b\&quot; returning \&quot;a\&quot;&quot;, test : run &quot;abcd&quot; (first  satisfyA satisfyB) == &quot;a&quot;}
</code></pre></div>
<p>A "suite" of tests is run like this:</p>
<div class="codehilite"><pre><span></span><code>[Test.eval p1, Test.eval p2, Test.eval p3, Test.eval p4, Test.eval p5, Test.eval p6]
    |&gt; Test.strListToStr &quot;\n&quot;
          |&gt; Task.putLine
</code></pre></div>
<p>For some reason, the more beautiful yet seemingly equivalent code below gives an error:</p>
<div class="codehilite"><pre><span></span><code> List.map [p1, p2, p3, p4, p5, p6] Test.eval
       |&gt; Test.strListToStr &quot;\n&quot;
       |&gt; Task.putLine
</code></pre></div>
<p>The error message is not informative:</p>
<div class="codehilite"><pre><span></span><code>➜  roc git:(jim) vr parser
    Finished dev [unoptimized + debuginfo] target(s) in 0.88s
     Running `target/debug/roc examples/benchmarks/ParseApp.roc`
error: Failed at the parser script
</code></pre></div>
<p>Here <code>vr parser == cargo run examples/benchmarks/ParseApp.roc</code></p>



<a name="249085758"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249085758" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249085758">(Aug 11 2021 at 09:27)</a>:</h4>
<p>I get a segmentation fault for the code with <code>List.map</code>, as expected there are some valgrind errors. I'll make an issue.</p>



<a name="249086786"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249086786" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249086786">(Aug 11 2021 at 09:40)</a>:</h4>
<p>#1569</p>



<a name="249088524"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249088524" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249088524">(Aug 11 2021 at 10:02)</a>:</h4>
<p>taking a look. segfaults are bad</p>



<a name="249090670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249090670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249090670">(Aug 11 2021 at 10:32)</a>:</h4>
<p>interesting, filling a list with these <code>    p1 = {name : "test1", test: 1 }</code> values is fine (the test field is an i64) but <code>    p1 = {name : "test1", test: 1 == 1 }</code> is not (test field is a bool)</p>



<a name="249090678"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249090678" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249090678">(Aug 11 2021 at 10:32)</a>:</h4>
<p>likely something bad in our stack size calculation</p>



<a name="249105679"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249105679" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249105679">(Aug 11 2021 at 13:19)</a>:</h4>
<p>What is the syntax for running <code>cargo run examples/benchmarks/ParseApp.roc</code> with  <code>RUST_BACKTRACE=1</code>?</p>



<a name="249106357"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249106357" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249106357">(Aug 11 2021 at 13:25)</a>:</h4>
<p>I usually just set that variable in my current shell</p>



<a name="249106377"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249106377" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249106377">(Aug 11 2021 at 13:25)</a>:</h4>
<p>so depends on the shell you use</p>



<a name="249108203"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249108203" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249108203">(Aug 11 2021 at 13:39)</a>:</h4>
<p>I usually do <code>RUST_BACKTRACE=1 cargo run ....</code></p>



<a name="249188820"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249188820" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249188820">(Aug 12 2021 at 01:18)</a>:</h4>
<p>Suppose that one has an interface exposing <code>foo</code> and an app importing that interface.  Suppose that the app compiles. Does that mean that <code>foo</code> was successfully compiled?  Weaker: can one assume that <code>foo</code> typechecks?</p>



<a name="249192080"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249192080" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249192080">(Aug 12 2021 at 02:35)</a>:</h4>
<p>it should mean that <code>foo</code> typechecks</p>



<a name="249192086"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249192086" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249192086">(Aug 12 2021 at 02:35)</a>:</h4>
<p>whenever you import an interface module, it gets fully type-checked just like whatever imported it!</p>



<a name="249216038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249216038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249216038">(Aug 12 2021 at 10:01)</a>:</h4>
<p>I see that the "map over list of records" bug has been fixed. (Yay!). So one can now do things like this in <code>ParserApp.roc</code> to run tests</p>
<div class="codehilite"><pre><span></span><code>    Test.run [p1, p2, p3, p4, p5, p6, p7, p8]
      |&gt; Task.putLine
</code></pre></div>
<p>For example:</p>
<div class="codehilite"><pre><span></span><code>➜  roc git:(jim) vr parser
    Finished dev [unoptimized + debuginfo] target(s) in 0.90s
     Running `target/debug/roc examples/benchmarks/ParseApp.roc`

Pass :: run &quot;abcd any =&gt; &quot;a&quot;
Pass :: run &quot;abcd&quot; satisfy (\u -&gt; u == 97)) =&gt; &quot;a&quot;
Pass :: Use &#39;second&#39; to recognize &quot;a&quot; then &quot;b&quot; returning &quot;b&quot;
Pass :: Use &#39;first&#39; to recognize &quot;a&quot; then &quot;b&quot; returning &quot;a&quot;
Pass :: Use map to shift output of parser: run &quot;abcd&quot; (map any (\u -&gt; u + 25)) == &quot;z&quot;
Pass :: Use andThen to recognize strings beginning with two repeated letters (succeed on input &quot;aaxyz&quot;)
Pass :: is successful (positive)
Pass :: is successful (negative)

runtime: 0.460ms
</code></pre></div>



<a name="249216771"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249216771" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249216771">(Aug 12 2021 at 10:10)</a>:</h4>
<p>QUESTION. would it not be better if I made sister directory of <code>benchmarks</code> for the parser etc code?  <br>
E.g., directory <code>parser</code>.</p>
<p>The number of files is growing:</p>
<div class="codehilite"><pre><span></span><code>Loop.roc
Pair.roc
ParseApp.roc
Parser.roc
Test.roc
Tester.roc
Utility.roc
</code></pre></div>
<p>If I did this, would <code>cargo run examples/parser/ParseApp.roc</code> work properly?</p>



<a name="249220373"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249220373" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249220373">(Aug 12 2021 at 11:02)</a>:</h4>
<p>The following line in <code>ParserApp.roc</code> causes a panic:</p>
<div class="codehilite"><pre><span></span><code>oneOfResult = (oneOf [satisfyA, satisfyB]) [97, 98, 99, 100]
</code></pre></div>
<p>Here is the definition of <code>oneOf</code> (in file <code>Parser.roc</code>):</p>
<div class="codehilite"><pre><span></span><code>oneOf : List (Parser a) -&gt; Parser a
oneOf = \parserList -&gt;
          \input -&gt; when List.first parserList is
              Ok p -&gt;
                output = p input
                if List.len output == 1 then output else (oneOf (List.drop parserList 1)) input
              Err _ -&gt; [ ]
</code></pre></div>
<p>The error message with <code>RUST_BACKTRACE=1</code> is rather long, but it begins like this:</p>
<div class="codehilite"><pre><span></span><code>     Running `target/debug/roc examples/benchmarks/ParseApp.roc`
thread &#39;main&#39; panicked at &#39;internal error: entered unreachable code: symbol/layout combo must be in DeclarationToIndex&#39;, compiler/mono/src/borrow.rs:223:9
stack backtrace:
   0: rust_begin_unwind
             at /rustc/a178d0322ce20e33eac124758e837cbd80a6f633/library/std/src/panicking.rs:515:5
   1: core::panicking::panic_fmt
             at /rustc/a178d0322ce20e33eac124758e837cbd80a6f633/library/core/src/panicking.rs:92:14
   2: roc_mono::borrow::DeclarationToIndex::get_param_offset
             at ./compiler/mono/src/borrow.rs:223:9
   3: roc_mono::borrow::ParamMap::get_param_offset
</code></pre></div>
<p>QUESTION:  is the cause of the panic my code or the compiler?</p>



<a name="249222625"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249222625" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249222625">(Aug 12 2021 at 11:33)</a>:</h4>
<p>should be possible to have a <code>parser</code> folder. just make sure to also copy the <code>platform</code> folder</p>



<a name="249222643"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249222643" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249222643">(Aug 12 2021 at 11:33)</a>:</h4>
<p>and that panic is probably caused by a type error earlier in the pipeline</p>



<a name="249223679"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249223679" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249223679">(Aug 12 2021 at 11:44)</a>:</h4>
<p>Thanks, I'll make that folder and investigate my types</p>



<a name="249224230"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249224230" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249224230">(Aug 12 2021 at 11:50)</a>:</h4>
<p>I've moved all my code in the <code>jim</code> branch to <code>examples/parser</code></p>



<a name="249226023"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249226023" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249226023">(Aug 12 2021 at 12:09)</a>:</h4>
<p><span class="user-mention" data-user-id="281543">@Folkert de Vries</span> , I'm trying to see where my code for the <code>oneOf</code> parser is going wrong.  I asked Richard about type-checking:</p>
<blockquote>
<p>James Carlson: Suppose that one has an interface exposing foo and an app importing that interface. Suppose that the app compiles. Does that mean that foo was successfully compiled? Weaker: can one assume that foo typechecks?</p>
</blockquote>
<blockquote>
<p>Richard Feldman: it should mean that foo typechecks</p>
</blockquote>
<blockquote>
<p>Richard Feldman: whenever you import an interface module, it gets fully type-checked just like whatever imported it!</p>
</blockquote>
<p>So on the basis of this, I would think that the code for <code>oneOf</code> in <code>examples/Parser.roc</code> is correct .... ????</p>
<p>ASSUMING that is the case, then the culprit has to be</p>
<div class="codehilite"><pre><span></span><code>oneOfResult = (oneOf [satisfyA, satisfyB]) [97, 98, 99, 100]
</code></pre></div>
<p>Here the parser <code>oneOf : List (Parser a) -&gt; Parser a</code> is applied to a list of parsers, so it returns a parser.  That parser is then applied to a list of <code>U8</code>, which is as it should be:</p>
<div class="codehilite"><pre><span></span><code>Parser a : List U8 -&gt; List ([Pair a (List U8)])
</code></pre></div>
<p>There must be an error somewhere, but I don't see it.</p>
<p>The files are <code>parser/Parser.roc</code> and <code>parser/ParserTest.roc</code> where</p>
<div class="codehilite"><pre><span></span><code>oneOf : List (Parser a) -&gt; Parser a
oneOf = \parserList -&gt;
          \input -&gt; when List.first parserList is
              Ok p -&gt;
                output = p input
                if List.len output == 1 then output else (oneOf (List.drop parserList 1)) input
              Err _ -&gt; [ ]
</code></pre></div>



<a name="249241937"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249241937" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249241937">(Aug 12 2021 at 14:29)</a>:</h4>
<p>it might be that the result not being used is a problem here</p>



<a name="249241963"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249241963" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249241963">(Aug 12 2021 at 14:29)</a>:</h4>
<p><code>oneOfResult</code> is dead code eliminated</p>



<a name="249242040"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249242040" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249242040">(Aug 12 2021 at 14:30)</a>:</h4>
<p>because I don't see a type error when  i run the code</p>



<a name="249256763"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249256763" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249256763">(Aug 12 2021 at 16:21)</a>:</h4>
<p>Hmm ... I ran <code>ParserTest.roc</code> with</p>
<div class="codehilite"><pre><span></span><code>p9 = {name: &quot;test of oneOf combinator&quot;, test: List.len oneOfResult == 1}
...
...
Test.run [p1, p2, p3, p4, p5, p6, p7, p8, p9]
      |&gt; Task.putLine
</code></pre></div>
<p>This produced a long error message.  So that argues against dead-code elimination being the problem.  How do we assure ourselves that both <code>oneOf</code> and <code>oneOfResult</code> type-check?  I think Richard's comment takes care of the first.  Is there a way of type-checking an interface or app with running the code?</p>



<a name="249257430"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249257430" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249257430">(Aug 12 2021 at 16:26)</a>:</h4>
<p>Something interesting: I moved <code>oneOfResult</code> from <code>ParserTest</code> to <code>Parser</code> on the theory that this way we could verify whether <code>oneOfResult</code> type checks. This configuration ran without error.  I'm relieved, but still puzzled.</p>



<a name="249258051"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249258051" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249258051">(Aug 12 2021 at 16:32)</a>:</h4>
<p>Hmm ... something really weird is going on.  Consider the following tests:</p>
<div class="codehilite"><pre><span></span><code>    p9 = {name: &quot;test of oneOf combinator&quot;, test: List.len oneOfResult == 1}
    p10 = {name: &quot;test (2) of oneOf combinator&quot;, test: List.len ((oneOf [satisfyA, satisfyB]) [97, 98, 99, 100]) == 1}
</code></pre></div>
<p>where</p>
<div class="codehilite"><pre><span></span><code>oneOfResult = (oneOf [satisfyA, satisfyB]) [97, 98, 99, 100]
</code></pre></div>
<p>Including <code>p10</code> in the tests causes a crash.  But this is a violation of referential transparency, since the difference between <code>p9</code> and <code>p10</code> is a substitution.  Could there be a problem with the compiler?</p>



<a name="249258112"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249258112" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249258112">(Aug 12 2021 at 16:33)</a>:</h4>
<p>took a deeper look and there is a bug somewhere, will try to track it down</p>



<a name="249258143"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249258143" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249258143">(Aug 12 2021 at 16:33)</a>:</h4>
<p>thanks for all your testing btw!</p>



<a name="249258167"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249258167" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249258167">(Aug 12 2021 at 16:33)</a>:</h4>
<p>Thanks Folkert, good luck!</p>



<a name="249258298"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249258298" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249258298">(Aug 12 2021 at 16:34)</a>:</h4>
<p>Ah ... the testing is good for me also.  Finding the boundary between my errors and the compiler bugs is the hard part.</p>



<a name="249260654"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249260654" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249260654">(Aug 12 2021 at 16:53)</a>:</h4>
<p>btw you can also write <code>oneOf</code> as </p>
<div class="codehilite"><pre><span></span><code>oneOf = \parserList -&gt;
    \input -&gt;
        List.walkUntil parserList
            (\p, accum -&gt;
                output = p input
                if List.len output == 1 then
                    Stop output

                else
                    Continue accum
            )
            []
</code></pre></div>
<p>triggers the same problem, but it's a lot more efficient because you're not dropping items from a list one-by-one</p>



<a name="249266137"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249266137" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249266137">(Aug 12 2021 at 17:30)</a>:</h4>
<p>well I made some issues <a href="https://github.com/rtfeldman/roc/issues/1576">https://github.com/rtfeldman/roc/issues/1576</a> and <a href="https://github.com/rtfeldman/roc/issues/1575">https://github.com/rtfeldman/roc/issues/1575</a> the problem seems to be that different function types (specifically different closure, so functions that capture things) in the same list causes some problems when generating code</p>



<a name="249282267"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249282267" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249282267">(Aug 12 2021 at 19:36)</a>:</h4>
<p>Mmm ... very nice!  I will use that code.  Didn't know about <code>walkUntil</code>, but can see it is really handy.  I was going to rig up something with <code>loop</code> and <code>Step</code> as in Elm, but this is much better.</p>



<a name="249282448"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249282448" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249282448">(Aug 12 2021 at 19:37)</a>:</h4>
<p>yea this will actually exit early</p>



<a name="249282839"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249282839" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249282839">(Aug 12 2021 at 19:40)</a>:</h4>
<p>I'm fairly close to being able to interesting things: <code>oneOf</code>, <code>andThen</code>, and <code>map</code> are the most important combinators.  Once I get something barebones but interesting, I will go back and add some error handling. Nonexistent at present.</p>



<a name="249298814"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249298814" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249298814">(Aug 12 2021 at 22:03)</a>:</h4>
<p>(FYI, I moved the above conversations from <a class="stream-topic" data-stream-id="231634" href="/#narrow/stream/231634-beginners/topic/strings">#beginners &gt; strings</a> and <a class="stream-topic" data-stream-id="231634" href="/#narrow/stream/231634-beginners/topic/syntax.20">#beginners &gt; syntax </a> to give error messages their own topic!)</p>



<a name="249369865"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249369865" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249369865">(Aug 13 2021 at 14:50)</a>:</h4>
<p>I have a simple testing interface that may be of some use to folks just working with roc code.  Here is an example. In file <code>examples/parser/Pair.roc</code>, I have the following:</p>
<div class="codehilite"><pre><span></span><code>## TESTS

inc = \x -&gt; x + 1
p1 = Pair 1 0

t1 = {name: &quot;mapFirst, first&quot;, test: (Pair.mapFirst p1 inc |&gt; Pair.first) == 2 }
t2 = {name: &quot;mapSecond, second&quot;, test: (Pair.mapSecond p1 inc |&gt; Pair.second) == 1 }
t3 = {name: &quot;map2, first coordinate&quot;, test: (Pair.map2 p1 inc inc|&gt; Pair.first) == 2 }
t4 = {name: &quot;map2, second coordinate&quot;, test: (Pair.map2 p1 inc inc|&gt; Pair.second) == 1 }

tests = [t1, t2, t3, t4]
</code></pre></div>
<p>Of all this, only <code>tests</code> is exposed.  Then, in <code>examples/parser/TestRunner.roc</code>, there is</p>
<div class="codehilite"><pre><span></span><code>app &quot;testRunner&quot;
     packages { base: &quot;platform&quot; }
     imports [base.Task, Test, Pair]
     provides [ main ] to base

main : Task.Task {} []
main =

    Test.run Pair.tests
    |&gt; Task.putLine
</code></pre></div>
<p>The command <code>cargo run parser/TestRunner.roc</code>, executed from <code>examples</code>, yields the following:</p>
<div class="codehilite"><pre><span></span><code>Pass :: mapFirst, first
Pass :: mapSecond, second
Pass :: map2, first coordinate
Pass :: map2, second coordinate
</code></pre></div>
<p>A feature of this approach is that (a) the tests reside in the file whose code is tested (b) the test code is very compact, as is the test runner.</p>



<a name="249370224"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249370224" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249370224">(Aug 13 2021 at 14:53)</a>:</h4>
<p>Cool stuff :)</p>



<a name="249370261"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249370261" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249370261">(Aug 13 2021 at 14:53)</a>:</h4>
<p>Thanks Anton!</p>



<a name="249370440"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249370440" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249370440">(Aug 13 2021 at 14:55)</a>:</h4>
<p>wow, very nice! I have a design in mind for a <code>roc test</code> command, but it's a ways off from being implemented, so this is great!!!</p>



<a name="249370569"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249370569" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249370569">(Aug 13 2021 at 14:56)</a>:</h4>
<p>Jim, I think you just created Roc's first-ever genuinely useful programming tool written entirely in Roc <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="249370650"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249370650" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249370650">(Aug 13 2021 at 14:56)</a>:</h4>
<p>I plan to add</p>
<div class="codehilite"><pre><span></span><code>showFailures : List Test -&gt; Str
</code></pre></div>
<p>but atm am blocked by </p>
<div class="codehilite"><pre><span></span><code>Utility.filterList : List a, (a -&gt; Bool) -&gt; List a
</code></pre></div>
<p>which creates panic.</p>



<a name="249370710"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249370710" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249370710">(Aug 13 2021 at 14:57)</a>:</h4>
<p>Haha! Thanks!! It is a stopgap pending the real thing.</p>



<a name="249370718"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249370718" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249370718">(Aug 13 2021 at 14:57)</a>:</h4>
<p>is there a bug report for that one? Folkert and I are planning to pair on bugfixes this weekend!</p>



<a name="249370802"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249370802" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249370802">(Aug 13 2021 at 14:58)</a>:</h4>
<p>I will make one.  I always struggle with the question: is it my code, or something else.</p>



<a name="249371033"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249371033" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249371033">(Aug 13 2021 at 14:59)</a>:</h4>
<p>if it's a panic or segfault, it's definitely a compiler bug <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="249371135"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249371135" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249371135">(Aug 13 2021 at 15:00)</a>:</h4>
<p>well, or a platform bug - but I assume you're not making changes to the platform haha</p>



<a name="249371199"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249371199" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249371199">(Aug 13 2021 at 15:00)</a>:</h4>
<p>the compiler should never panic or segfault, or generate application code that panics (in the Rust sense) or segfaults</p>



<a name="249371283"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249371283" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249371283">(Aug 13 2021 at 15:01)</a>:</h4>
<p>so definitely please file issues for any of those that you see! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="249376772"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249376772" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249376772">(Aug 13 2021 at 15:44)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> good news (see below in the code, filterList) — it is running fine now.  Will file issues going forward when I see them.</p>
<div class="codehilite"><pre><span></span><code># Test of examples/parser/Utility.roc

cargo run parser/TestUtility.roc

Pass :: concatStrList [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;] == &quot;abc&quot;
Pass :: concatStrListWithSeparator [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;] &quot;.&quot; == &quot;a.b.c&quot;
Pass :: isEven 4 == True
Pass :: isEven 5 == False
Pass :: filterList [1,2,3,4,5,6] isEven == [2,4,6]
Pass :: showU8 97 == &quot;a&quot;
Pass :: showU8Pair (Pair 97 [98, 99]) == &quot;(a, bc)&quot;
</code></pre></div>



<a name="249390038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249390038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249390038">(Aug 13 2021 at 17:43)</a>:</h4>
<p>Just posted an issue, #1581, <a href="https://github.com/rtfeldman/roc/issues/1581">https://github.com/rtfeldman/roc/issues/1581</a>, regarding a panic when calling function <code>Test.failures</code></p>



<a name="249393187"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249393187" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249393187">(Aug 13 2021 at 18:07)</a>:</h4>
<p>huh, that's an old one</p>



<a name="249393193"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249393193" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249393193">(Aug 13 2021 at 18:07)</a>:</h4>
<p>fix should be simple there</p>



<a name="249421295"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249421295" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249421295">(Aug 13 2021 at 22:22)</a>:</h4>
<p>What does this one mean?</p>
<div class="codehilite"><pre><span></span><code>thread &#39;main&#39; panicked at &#39;There were still outstanding Arc references to module_ids&#39;, /Users/jxxcarlson/dev/roc/roc/compiler/load/src/file.rs:1576:33
</code></pre></div>



<a name="249421754"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249421754" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249421754">(Aug 13 2021 at 22:29)</a>:</h4>
<p>does that happen consistently?</p>



<a name="249421800"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249421800" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249421800">(Aug 13 2021 at 22:30)</a>:</h4>
<p>that one is usually a race condition somewhere</p>



<a name="249422562"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249422562" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249422562">(Aug 13 2021 at 22:41)</a>:</h4>
<p>I know at least one way to produce it (have made an issue for this, #1574: <a href="https://github.com/rtfeldman/roc/issues/1574">https://github.com/rtfeldman/roc/issues/1574</a> -- I can't remember what produced the one above, but I will keep my eye out for such things and raise issues where I already have not.</p>



<a name="249422951"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249422951" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249422951">(Aug 13 2021 at 22:47)</a>:</h4>
<p>honesty the next time you see it, if you could just share what code caused it, that would help even if it doesn't reproduce consistently - that way we can run the command in a loop until it reproduces <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="249425620"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249425620" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249425620">(Aug 13 2021 at 23:29)</a>:</h4>
<p>Will do</p>



<a name="249425708"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249425708" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249425708">(Aug 13 2021 at 23:31)</a>:</h4>
<p>Just filed ##1583, <a href="https://github.com/rtfeldman/roc/issues/1583">https://github.com/rtfeldman/roc/issues/1583</a>, re panic when trying to test the <code>manyAux</code> combinator.</p>



<a name="249426564"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249426564" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249426564">(Aug 13 2021 at 23:46)</a>:</h4>
<p>Panic 1 (I'll post simple versions of these as I find them)</p>
<p>Interface (note the missing comma after baz)</p>
<div class="codehilite"><pre><span></span><code>interface Panic exposes [foo, bar, baz
  yada] imports [ ]

foo = 1
bar = 2
baz = 3
yada = 4
</code></pre></div>
<p>app:</p>
<div class="codehilite"><pre><span></span><code>app &quot;test&quot;
    packages { base: &quot;platform&quot; }
    imports [base.Task, Panic]
    provides [ main ] to base

main : Task.Task {} []
main =

    Str.fromInt Panic.foo |&gt;
       Task.putLine
</code></pre></div>



<a name="249426907"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249426907" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249426907">(Aug 13 2021 at 23:53)</a>:</h4>
<p>excellent, thanks!</p>



<a name="249502247"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249502247" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249502247">(Aug 15 2021 at 09:19)</a>:</h4>
<p>Panic2:  note the missing comma in the  definition of <code>foo</code>. Put it back in =&gt; no Panic</p>
<div class="codehilite"><pre><span></span><code>app &quot;panic&quot;
    packages { base: &quot;platform&quot; }
    imports [base.Task]
    provides [ main ] to base

main : Task.Task {} []
main =

    foo = {a: 1 b: 2}


    foo.a + foo.b |&gt;  Str.fromInt |&gt;
       Task.putLine
</code></pre></div>



<a name="249503251"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249503251" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249503251">(Aug 15 2021 at 09:41)</a>:</h4>
<p><span class="user-mention" data-user-id="430829">@James Carlson</span> I created #1589 for this, thanks for the find :)</p>



<a name="249510172"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249510172" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249510172">(Aug 15 2021 at 12:33)</a>:</h4>
<p>A new version of the <code>Test</code> interface in <code>examples/parser</code> of the <code>jim</code> branch.</p>
<p>The code</p>
<div class="codehilite"><pre><span></span><code>[t1,t2,t3] |&gt; Test.run &quot;Test of test interface&quot;  |&gt; Task.putLine
</code></pre></div>
<p>produces this:</p>
<div class="codehilite"><pre><span></span><code>Test of test interface
----------------------
Pass :: isEven
Pass :: filterList
Fail :: Bozo
</code></pre></div>
<p>where for example</p>
<div class="codehilite"><pre><span></span><code>    filteredList = Utility.filterList [1,2,3,4,5,6] Utility.isEven
    t2 = {name : &quot;filterList&quot;, test: List.len filteredList == 3}
</code></pre></div>



<a name="249510235"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249510235" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249510235">(Aug 15 2021 at 12:35)</a>:</h4>
<p>There is also a way to show failures only:</p>
<div class="codehilite"><pre><span></span><code>Test of test interface, failures only
-------------------------------------
Fail :: Bozo
</code></pre></div>
<p>using </p>
<div class="codehilite"><pre><span></span><code>t1,t2,t3] |&gt; Test.runF &quot;Test of test interface, failures only&quot;  |&gt; Task.putLine
</code></pre></div>



<a name="249511095"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249511095" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249511095">(Aug 15 2021 at 12:56)</a>:</h4>
<p>Feel free to create a PR to add this test framework to trunk! Perhaps a folder named testframework under examples?</p>



<a name="249511173"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249511173" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249511173">(Aug 15 2021 at 12:59)</a>:</h4>
<p>Will do!</p>



<a name="249511287"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249511287" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249511287">(Aug 15 2021 at 13:01)</a>:</h4>
<p>Ridiculous code below, but it does cause panic:</p>
<div class="codehilite"><pre><span></span><code>app &quot;panic&quot;
    packages { base: &quot;platform&quot; }
    imports [base.Task]
    provides [ main ] to base

main : Task.Task {} []
main =

    q1 = &quot;a&quot;
    q2 = &quot;b&quot;
    foo = [q1, q2, 3]  # &lt;== Oops, typo!

    List.len foo |&gt;  Str.fromInt |&gt;
       Task.putLine
</code></pre></div>



<a name="249511366"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249511366" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249511366">(Aug 15 2021 at 13:02)</a>:</h4>
<p>sorry what is the typo?</p>



<a name="249511378"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249511378" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249511378">(Aug 15 2021 at 13:03)</a>:</h4>
<p>"3" instead of "q3"?</p>



<a name="249511383"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249511383" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249511383">(Aug 15 2021 at 13:03)</a>:</h4>
<p>Yes</p>



<a name="249511454"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249511454" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249511454">(Aug 15 2021 at 13:05)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> , the test code depends on several functions in <code>parser/Utility.roc</code>.  For the PR, shall I incorporate those functions in the code for testing?</p>



<a name="249511546"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249511546" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249511546">(Aug 15 2021 at 13:07)</a>:</h4>
<div class="codehilite"><pre><span></span><code>Utility.concatStrListWithSeparator, Utility.strRepeat, Utility.concatStrList, Utility.filterList
</code></pre></div>



<a name="249511574"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249511574" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249511574">(Aug 15 2021 at 13:07)</a>:</h4>
<p>Yeah sure, sounds good!</p>



<a name="249512932"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249512932" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249512932">(Aug 15 2021 at 13:35)</a>:</h4>
<p>PR request #1590: <a href="https://github.com/rtfeldman/roc/pull/1590">https://github.com/rtfeldman/roc/pull/1590</a> --- adds <code>Test.roc</code> , a bare-bones testing "framework"</p>



<a name="249536521"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249536521" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249536521">(Aug 15 2021 at 23:54)</a>:</h4>
<p>Did I see a remark on being able to write code with holes -- so that the type checker can help out the poor struggling programmer?  That would be truly awesome! (or a dream!!)</p>



<a name="249536894"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249536894" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249536894">(Aug 16 2021 at 00:03)</a>:</h4>
<p>indeed! <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="249551898"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249551898" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249551898">(Aug 16 2021 at 05:56)</a>:</h4>
<p>QUESTION: I have the types</p>
<div class="codehilite"><pre><span></span><code>Step state a : [ Loop state, Done a ]
Parser a : List U8 -&gt; List [Pair a (List U8)]
</code></pre></div>
<p>Now consider  <code>Parser (Step state a)</code>. I  get the error message  below in code like this:</p>
<div class="codehilite"><pre><span></span><code>loop : (state -&gt; Parser (Step state a)), state -&gt; Parser a
loop = \nextState, s -&gt;
  \input -&gt;
      ps =  (nextState s)                 # Parser (Step state a))
      when ps is
          Parser (Loop s2) -&gt;
            ...

          Parser (Done aa) -&gt;
       ...
</code></pre></div>
<p>ERROR MESSAGE</p>
<div class="codehilite"><pre><span></span><code>The 1st pattern in this when is causing a mismatch:

85│            Parser (Loop s2) -&gt;
               ^^^^^^^^^^^^^^^

The first pattern is trying to matchParser values of type:

    [ Parser [ Loop a ]b ]c

But the expression between when and is has the type:

    List U8 -&gt; List [ Pair (Step state a) (List U8) ]
</code></pre></div>
<p>But I would argue that </p>
<div class="codehilite"><pre><span></span><code>(1)   List U8 -&gt; List [ Pair (Step state a) (List U8) ] == Parser (Step state a)
</code></pre></div>
<p>and that </p>
<div class="codehilite"><pre><span></span><code>(2) Parser (Loop s2).
</code></pre></div>
<p>is one of the two variants of type <code>Step state a</code> so that there is no type error in this code.  I must be missing something, but I don't see what it is.</p>



<a name="249565078"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249565078" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249565078">(Aug 16 2021 at 09:16)</a>:</h4>
<p>Hmm that does look like it should work</p>



<a name="249565232"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249565232" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249565232">(Aug 16 2021 at 09:18)</a>:</h4>
<p><span class="user-mention" data-user-id="430829">@James Carlson</span>  can you try simplifying the types further and check if the error still occurs?</p>



<a name="249571654"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249571654" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249571654">(Aug 16 2021 at 10:28)</a>:</h4>
<p>in your case <code>Parser</code> is just a type alias, not a tag union</p>



<a name="249571672"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249571672" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249571672">(Aug 16 2021 at 10:29)</a>:</h4>
<p>so you can remove the <code>Parser</code> in <code>Parser (Loop s2)</code></p>



<a name="249710243"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249710243" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249710243">(Aug 17 2021 at 12:24)</a>:</h4>
<p>I am trying to port Richard's console package (Elm) to roc.  But I get this:</p>
<div class="codehilite"><pre><span></span><code>3│  greenColor : Str
4│  greenColor = Str.fromUtf8 [27, 91, 51, 50, 109]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

This fromUtf8 call produces:

    Result Str [ BadUtf8 Utf8ByteProblem Nat ]b
</code></pre></div>



<a name="249711154"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249711154" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249711154">(Aug 17 2021 at 12:33)</a>:</h4>
<p>The idea is to imitate code like this:</p>
<div class="codehilite"><pre><span></span><code>green : String -&gt; String
green str =
    String.join &quot;&quot; [ &quot;\u{001B}[32m&quot;, str, &quot;\u{001B}[39m&quot; ]
</code></pre></div>
<p>where <code>greenColor</code> replaces "\u{001B}[32m" and I say</p>
<div class="codehilite"><pre><span></span><code>green : Str -&gt; Str
green = \str -&gt;
    Utility.concatStrList [ greenColor, str, clearColor ]
</code></pre></div>



<a name="249711562"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249711562" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249711562">(Aug 17 2021 at 12:36)</a>:</h4>
<p>well turning raw bytes into utf8 is an operation that can fail</p>



<a name="249711580"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249711580" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249711580">(Aug 17 2021 at 12:37)</a>:</h4>
<p>in this case you can probably do <code>|&gt; Result.withDefault ""</code></p>



<a name="249713125"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249713125" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249713125">(Aug 17 2021 at 12:50)</a>:</h4>
<p>Ah yes, thanks!</p>



<a name="249724266"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249724266" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249724266">(Aug 17 2021 at 14:11)</a>:</h4>
<p>Demo of interface <code>Console</code> in branch <code>jim</code>,  folder <code>examples/parser:</code></p>
<p><a href="/user_uploads/22008/TmT7aVENtR_LvLmX3A_V64YL/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/22008/TmT7aVENtR_LvLmX3A_V64YL/image.png" title="image.png"><img src="/user_uploads/22008/TmT7aVENtR_LvLmX3A_V64YL/image.png"></a></div><p>Run with </p>
<div class="codehilite"><pre><span></span><code>app &quot;foo&quot;
    packages { base: &quot;platform&quot; }
    imports [base.Task,  Console, StrExtra]
    provides [ main ] to base


main : Task.Task {} []
main =
  StrExtra.concat [
       Console.bgCyan (Console.black &quot;This is a test:&quot;),
       Console.green &quot; The grass is green, but &quot;,
       Console.red &quot;roses are red.&quot;
    ] |&gt; Task.putLine
</code></pre></div>



<a name="249724521"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249724521" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249724521">(Aug 17 2021 at 14:12)</a>:</h4>
<p>oh, very fancy</p>



<a name="249724673"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249724673" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249724673">(Aug 17 2021 at 14:13)</a>:</h4>
<p>Just Richard's Elm library ported to Richard's language <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="249724958"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249724958" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249724958">(Aug 17 2021 at 14:15)</a>:</h4>
<p>Followed his API word-for-word</p>



<a name="249725350"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249725350" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249725350">(Aug 17 2021 at 14:18)</a>:</h4>
<p>but we can actually print to the console <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="249737418"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249737418" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249737418">(Aug 17 2021 at 15:43)</a>:</h4>
<p>that's very cool</p>



<a name="249746207"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249746207" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249746207">(Aug 17 2021 at 16:48)</a>:</h4>
<p>that's awesome! <span aria-label="heart eyes cat" class="emoji emoji-1f63b" role="img" title="heart eyes cat">:heart_eyes_cat:</span></p>



<a name="249746224"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249746224" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249746224">(Aug 17 2021 at 16:48)</a>:</h4>
<p>incidentally, in Roc you can do <code>"\u(001B)[32m"</code> for unicode escapes (the <code>\u(...)</code> is equivalent to <code>\u{...}</code> in Elm)</p>



<a name="249796435"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249796435" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249796435">(Aug 18 2021 at 00:48)</a>:</h4>
<p>That's good to know ("\u(001B)[32m").  Meanwhile, just for fun:</p>
<p><a href="/user_uploads/22008/Go_snaIe4VEtYOi-u-bdYGDQ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/Go_snaIe4VEtYOi-u-bdYGDQ/image.png" title="image.png"><img src="/user_uploads/22008/Go_snaIe4VEtYOi-u-bdYGDQ/image.png"></a></div>



<a name="249796944"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249796944" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249796944">(Aug 18 2021 at 01:00)</a>:</h4>
<p>so cool!!!</p>



<a name="249797024"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249797024" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249797024">(Aug 18 2021 at 01:00)</a>:</h4>
<p>also that's a nice sub-millisecond runtime on that test suite <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="249921707"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249921707" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249921707">(Aug 18 2021 at 22:55)</a>:</h4>
<p>Sub-millisecond is soooo good!</p>



<a name="249987161"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249987161" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249987161">(Aug 19 2021 at 13:36)</a>:</h4>
<p>The <code>many</code> combinator,</p>
<div class="codehilite"><pre><span></span><code>many : Parser a -&gt; Parser (List a)
</code></pre></div>
<p>now type-checks, as does a test for it:</p>
<div class="codehilite"><pre><span></span><code>q3 = {name: &quot;many lowerCase&quot;, test: Parser.run [97, 99, 100, 0] (many lowerCase) == [Pair [97, 98, 99] [0]] }
</code></pre></div>
<p>I'll be able to run this test (and the one for <code>oneOf</code>) as soon as some panic issues are resolved.</p>



<a name="249989128"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249989128" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249989128">(Aug 19 2021 at 13:50)</a>:</h4>
<p>you are up to date with  latest trunk? if yes, can you get the panic down to just a single file, then put the source of that file in an issue?</p>



<a name="249992205"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249992205" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249992205">(Aug 19 2021 at 14:11)</a>:</h4>
<p>Interesting!  I had pulled trunk earlier this morning, IIRC.  But now there are changes.  I first ran the old tests:</p>
<p><a href="/user_uploads/22008/0__2Pl0nWtYwONzsxS165LBp/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/22008/0__2Pl0nWtYwONzsxS165LBp/image.png" title="image.png"><img src="/user_uploads/22008/0__2Pl0nWtYwONzsxS165LBp/image.png"></a></div><p>Looks like <code>andThen</code> (used by <code>first</code> and <code>second</code> needs some attention.  Then I ran the tests for <code>oneOf</code> and <code>many</code> individually.  They created panics.</p>
<p>The "missing-comma-in-exposes-list" error still causes a panic.</p>
<p>I will make a distilled one-file version of the 'oneOf' panic and also of the 'many' panic.</p>



<a name="249992351"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249992351" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249992351">(Aug 19 2021 at 14:12)</a>:</h4>
<p>Interesting that <code>andThen</code> now fails when it didn't before.  I'll make a one-file version of this also.</p>



<a name="249992437"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249992437" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249992437">(Aug 19 2021 at 14:13)</a>:</h4>
<p>((If I can't easily fix it))</p>



<a name="249997217"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/249997217" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#249997217">(Aug 19 2021 at 14:49)</a>:</h4>
<p>Hmmm, having  trouble  composing even the simplest file today.  The below panics, but I can't see why.</p>
<div class="codehilite"><pre><span></span><code>app &quot;oneOfPanic&quot;
     packages { base: &quot;platform&quot; }
     imports [base.Task]
     provides [ main ] to base

main : Task.Task {} []
main =
   &quot;hello&quot; |&gt; Task.putline
</code></pre></div>



<a name="250092108"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250092108" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250092108">(Aug 20 2021 at 08:45)</a>:</h4>
<p><code>putline</code> should be <code>putLine</code></p>



<a name="250094508"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250094508" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250094508">(Aug 20 2021 at 09:07)</a>:</h4>
<p>My  goodness!  I need better glasses and more sleep!!  Thanks.</p>



<a name="250134502"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250134502" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250134502">(Aug 20 2021 at 15:39)</a>:</h4>
<p>Got this error a moment ago after pulling <code>trunk</code> and merging into <code>jim</code>:</p>
<div class="codehilite"><pre><span></span><code>➜  examples git:(jim) ✗ cargo run parser/ParserTest.roc
    Finished dev [unoptimized + debuginfo] target(s) in 0.66s
     Running `/Users/jxxcarlson/dev/roc/roc/target/debug/roc parser/ParserTest.roc`
Undefined symbols for architecture x86_64:
  &quot;_roc_panic&quot;, referenced from:
      l_Num_add_3fc76dac52173e2f6971f0328553dc78618dec1a96b6375eceeb2fe9a98a3a0 in roc_app0elG65.o
ld: symbol(s) not found for architecture x86_64
</code></pre></div>



<a name="250171750"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250171750" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250171750">(Aug 20 2021 at 20:58)</a>:</h4>
<p>I fixed a common cause of the "symbol/layout {:?} {:?} combo must be in DeclarationToIndex" style error here <a href="https://github.com/rtfeldman/roc/pull/1609">https://github.com/rtfeldman/roc/pull/1609</a></p>



<a name="250176406"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250176406" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250176406">(Aug 20 2021 at 21:45)</a>:</h4>
<p><span class="user-mention" data-user-id="430829">@James Carlson</span> the <code>roc_panic</code> error is because we just added a new requirement for hosts to expose a function with that name</p>



<a name="250176927"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250176927" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250176927">(Aug 20 2021 at 21:51)</a>:</h4>
<p>if your platform is using Rust, here's what you'd need to add to its <code>lib.rs</code>:</p>
<p><a href="https://github.com/rtfeldman/roc/blob/19d56fa7d4ec256b7e8fff28f3af50f6017d62e6/examples/hello-rust/platform/src/lib.rs#L34">https://github.com/rtfeldman/roc/blob/19d56fa7d4ec256b7e8fff28f3af50f6017d62e6/examples/hello-rust/platform/src/lib.rs#L34</a></p>



<a name="250176955"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250176955" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250176955">(Aug 20 2021 at 21:51)</a>:</h4>
<div class="codehilite"><pre><span></span><code>#[no_mangle]
pub unsafe fn roc_panic(c_ptr: *mut c_void, tag_id: u32) {
    match tag_id {
        0 =&gt; {
            let slice = CStr::from_ptr(c_ptr as *const c_char);
            let string = slice.to_str().unwrap();
            eprintln!(&quot;Roc hit a panic: {}&quot;, string);
            std::process::exit(1);
        }
        _ =&gt; todo!(),
    }
}
</code></pre></div>



<a name="250177068"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250177068" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250177068">(Aug 20 2021 at 21:53)</a>:</h4>
<p>lmk if that works!</p>



<a name="250195653"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250195653" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250195653">(Aug 21 2021 at 04:09)</a>:</h4>
<p>Looks like my platform is zig-based:</p>
<div class="codehilite"><pre><span></span><code>➜  examples git:(jim) ✗ ls parser/platform
Package-Config.roc Task.roc           host.o             host.zig           zig-cache
</code></pre></div>
<p>Should I be using something different?</p>



<a name="250196509"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250196509" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250196509">(Aug 21 2021 at 04:32)</a>:</h4>
<p>I found that there is rust-based platform in <code>examples/hello-rust</code> I moved the zig-based in <code>parser</code> to another name, moved a copy of the rust-based platform in to parser, and ran <code>cargo run parser/ParserTest.roc</code>.  This resulted in the error message</p>
<div class="codehilite"><pre><span></span><code>I am looking for this file, but it&#39;s not there:

    /Users/jxxcarlson/dev/roc/roc/examples/parser/platform/Task.roc

Is the file supposed to be there? Maybe there is a typo in the file
name?%
</code></pre></div>
<p>I made a copy of the <code>Task.roc</code> file in the rust platform and moved it to the root of my platform.  More errors alas.  I'm afraid that my home-made solution will not work.  (Oh, <code>lib.rs</code> in the copied code already had the #[no_mangle] you cite above.</p>



<a name="250217873"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250217873" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250217873">(Aug 21 2021 at 13:31)</a>:</h4>
<p>ah! so for a Zig host, <a href="https://github.com/rtfeldman/roc/blob/1348ec433b56d0919fa3c25ce2fd8d879d99f681/examples/hello-zig/platform/host.zig#L38">here's</a> the equivalent code to add to <code>host.zig</code>:</p>
<div class="codehilite" data-code-language="Zig"><pre><span></span><code><span class="kr">export</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">roc_panic</span><span class="p">(</span><span class="n">c_ptr</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">c_void</span><span class="p">,</span><span class="w"> </span><span class="n">tag_id</span><span class="o">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">)</span><span class="w"> </span><span class="n">callconv</span><span class="p">(.</span><span class="n">C</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">stderr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">getStdErr</span><span class="p">().</span><span class="n">writer</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">@ptrCast</span><span class="p">([</span><span class="o">*:</span><span class="mi">0</span><span class="p">]</span><span class="kr">const</span><span class="w"> </span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="n">c_ptr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">stderr</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Application crashed with message</span><span class="se">\n\n</span><span class="s">    {s}</span><span class="se">\n\n</span><span class="s">Shutting down</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="n">msg</span><span class="p">})</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="k">unreachable</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="p">.</span><span class="n">process</span><span class="p">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="250236766"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250236766" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250236766">(Aug 21 2021 at 21:00)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="281383">@Richard Feldman</span> , I got a little further this time, getting a different error message:</p>
<div class="codehilite"><pre><span></span><code>     Running `/Users/jxxcarlson/dev/roc/roc/target/debug/roc parser/ParserTest.roc`
Undefined symbols for architecture x86_64:
  &quot;_roc_fx_putLine&quot;, referenced from:
      l_Effect_effect_closure_putLine_76152341861df334f796e7048579cd151e7d5d5ce546b36a28afd44760b25b in roc_appTryVVG.o
ld: symbol(s) not found for architecture x86_64
</code></pre></div>
<p>(I put your zig code at then end of <code>host.zig</code> and the compiler seemed to like that)</p>



<a name="250257505"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250257505" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250257505">(Aug 22 2021 at 06:05)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span>  Never mind -- all running just fine now.  Thankyou!</p>



<a name="250271123"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250271123" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250271123">(Aug 22 2021 at 12:11)</a>:</h4>
<p>sweet, glad it's working!</p>



<a name="250290216"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250290216" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250290216">(Aug 22 2021 at 19:48)</a>:</h4>
<p>Some Really Weird Stuff:</p>
<p>I've been pulling my hair out because parser code that previously passed tests no longer does.  I've tried rebuilding the parser code in interface <code>Parser2.roc</code>, adding a few lines of code and testing it as I go.  The next two images show the nature of the problem.  In the first, <code>Parser.map</code> passes its test.  In the second, I add <code>Parser.andThen</code>.  The two functions share no parser code directly or indirectly.  By adding the <code>andThen</code> test, the <code>map</code> test now fails!  This should not happen.  Alas, I have no idea of where to begin.  </p>
<p><a href="/user_uploads/22008/ChzdnDi4XiwgePd08WD2QlDu/Screen-Shot-2021-08-22-at-3.42.07-PM.png">Screen-Shot-2021-08-22-at-3.42.07-PM.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/22008/ChzdnDi4XiwgePd08WD2QlDu/Screen-Shot-2021-08-22-at-3.42.07-PM.png" title="Screen-Shot-2021-08-22-at-3.42.07-PM.png"><img src="/user_uploads/22008/ChzdnDi4XiwgePd08WD2QlDu/Screen-Shot-2021-08-22-at-3.42.07-PM.png"></a></div><p><a href="/user_uploads/22008/HqqZD5sxLdAsY56SOBaI2-uq/Screen-Shot-2021-08-22-at-3.42.28-PM.png">Screen-Shot-2021-08-22-at-3.42.28-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/HqqZD5sxLdAsY56SOBaI2-uq/Screen-Shot-2021-08-22-at-3.42.28-PM.png" title="Screen-Shot-2021-08-22-at-3.42.28-PM.png"><img src="/user_uploads/22008/HqqZD5sxLdAsY56SOBaI2-uq/Screen-Shot-2021-08-22-at-3.42.28-PM.png"></a></div>



<a name="250290304"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250290304" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250290304">(Aug 22 2021 at 19:50)</a>:</h4>
<p>Here is the code for the two functions in question:</p>
<div class="codehilite"><pre><span></span><code>## MAP

map : Parser a, (a -&gt; b) -&gt; Parser b
map =
  \p, f -&gt; \input -&gt; p input |&gt; List.map (\pair -&gt; Pair.mapFirst pair f)


## AND_THEN, FIRST, SECOND

andThen : Parser a, (a -&gt; Parser b) -&gt; Parser b
andThen = \p, q -&gt;
            \input -&gt; p input |&gt; List.map (\(Pair a input2) -&gt; (q a) input2) |&gt; List.join
</code></pre></div>



<a name="250290312"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250290312" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250290312">(Aug 22 2021 at 19:50)</a>:</h4>
<p>can you get some sort of error message out of the failing parser?</p>



<a name="250290338"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250290338" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250290338">(Aug 22 2021 at 19:51)</a>:</h4>
<p>And here is the test code:</p>
<div class="codehilite"><pre><span></span><code>mapT = {name : &quot;Use map to shift output of parser: run \&quot;abcd\&quot; (map any (\\u -&gt; u + 25)) == \&quot;z\&quot;&quot;, test : runU8 &quot;abcd&quot; (map any (\u -&gt; u + 25)) == &quot;z&quot;  }

andThenT = { name: &quot;andThen&quot;, test: runToString Utility.showU8 &quot;aaxyz&quot; (andThen any satisfyWhatCameBefore) == &quot;a&quot;}

satisfyWhatCameBefore = \u2 -&gt; satisfy (\u3 -&gt; u3 == u2)
</code></pre></div>



<a name="250290459"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250290459" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250290459">(Aug 22 2021 at 19:54)</a>:</h4>
<p>I'll see what I can do.  But I can't understand why adding one test causes the other to fail.</p>



<a name="250290464"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250290464" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250290464">(Aug 22 2021 at 19:54)</a>:</h4>
<p>no that sounds like a bug</p>



<a name="250290468"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250290468" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250290468">(Aug 22 2021 at 19:55)</a>:</h4>
<p>but knowing what the code thinks went wrong could be helpful tracking the problem down</p>



<a name="250290490"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250290490" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250290490">(Aug 22 2021 at 19:55)</a>:</h4>
<p>I'll work on it now.  I can probably get something out.</p>



<a name="250290613"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250290613" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250290613">(Aug 22 2021 at 19:58)</a>:</h4>
<p>alternatively if you can get it into one file I can take a look</p>



<a name="250291516"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250291516" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250291516">(Aug 22 2021 at 20:20)</a>:</h4>
<p>Interesting.  I had to change</p>
<div class="codehilite"><pre><span></span><code>runU8 : Str, Parser a-&gt; Str
runU8 = \input, parser -&gt; runToString Utility.showU8 input parser
</code></pre></div>
<p>to </p>
<div class="codehilite"><pre><span></span><code>runU8 : Str, Parser U8 -&gt; Str
</code></pre></div>
<p>Now <code>andThen</code> always fails in this test suite, though it succeeds in a one-file version that tests only <code>andThen</code>. We are about to leave for a dinner, so I have to stop now.  I'll work on this a bit more tomorrow, maybe in the evening, and send you something.</p>
<p>Thankyou Folkert!</p>



<a name="250291578"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250291578" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250291578">(Aug 22 2021 at 20:22)</a>:</h4>
<p>interesting. We have a couple more fixes in the works, so maybe things will also just work when those are merged</p>



<a name="250918670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/250918670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Hicks <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#250918670">(Aug 27 2021 at 11:40)</a>:</h4>
<p>(deleted)</p>



<a name="252920852"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/252920852" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#252920852">(Sep 11 2021 at 16:41)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="281543">@Folkert de Vries</span> , finally have some time to get back to roc (yay!).  Here is my current problem.  As you can see from the image below, the result of running my parser tests  depends on their order.  Since we are running pure functions, this shouldn't happen, no?  I'm baffled.</p>
<p><a href="/user_uploads/22008/oqTe0UztUuqFdTwQhPTc6GYd/Screen-Shot-2021-09-11-at-12.35.02-PM.png">Screen-Shot-2021-09-11-at-12.35.02-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/oqTe0UztUuqFdTwQhPTc6GYd/Screen-Shot-2021-09-11-at-12.35.02-PM.png" title="Screen-Shot-2021-09-11-at-12.35.02-PM.png"><img src="/user_uploads/22008/oqTe0UztUuqFdTwQhPTc6GYd/Screen-Shot-2021-09-11-at-12.35.02-PM.png"></a></div>



<a name="252920931"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/252920931" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#252920931">(Sep 11 2021 at 16:42)</a>:</h4>
<p>Test (6) passes in one test and fails in the other.</p>



<a name="252921213"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/252921213" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#252921213">(Sep 11 2021 at 16:47)</a>:</h4>
<p>Is it possible to import modules in the repl?</p>



<a name="252937599"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/252937599" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#252937599">(Sep 11 2021 at 21:45)</a>:</h4>
<p><span class="user-mention" data-user-id="430829">@James Carlson</span> welcome back, Jim! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span> </p>
<p>it's not possible to import modules in the repl yet...I looked into it, and there are a few prerequisites that will take a bit. I thought it might be a weekend project, but seems like more than that. <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="252937609"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/252937609" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#252937609">(Sep 11 2021 at 21:45)</a>:</h4>
<p>is the code to reproduce the order-dependent tests pushed somewhere we can take a look at it?</p>



<a name="253001693"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253001693" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253001693">(Sep 12 2021 at 17:56)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="281383">@Richard Feldman</span> , yes, glad to be back!  My contract with <a href="http://Brilliant.org">Brilliant.org</a> ends next Friday, so I will soon have more time for roc and other projects. (But Brilliant has been a really good experience — accomplished a lot, learned a lot, and worked with some really great people.)</p>
<p>In the <code>jim</code> branch, file <code>ParserTest.roc</code> of <code>examples/parser</code>, you will find some code re the weirdness that I mentioned.  Begin by cd'ing to <code>examples</code>, then run the below (ignoring warnings)</p>
<div class="codehilite"><pre><span></span><code>cargo run parser/ParserTest.roc
</code></pre></div>
<p>You will see three test successes.  Next, look at the end of the file, where you  will see this:</p>
<div class="codehilite"><pre><span></span><code>Test.runSuites [suite3]         # tests a, b, c,
# Test.runSuites [suite4]      # tests a, b, c, d
# Test.runSuites [suite5]      # tests a, b, c, d, e
# Test.runSuites [suite6]      # tests a, b, c, d, e, f
   |&gt; Task.putLine
</code></pre></div>
<p>Now comment out the test <code>[suite3]</code> and uncomment the test <code>[suite 4]</code>.  You will find that test (b), which formerly succeeded, now fails.  Why? No idea.  All we did was add test (d).  The saga continues.  With <code>[suite5]</code>, (d) fails and the others succeed.  With <code>[suite ]</code>, (c) and (d) fail.</p>
<p>PS.  I modified the code in <code>examples/parser/Test.roc</code> so as to be able to run "suites" of tests (just a named list of tests) and, more usefully, lists of suites.</p>
<p>Seems like a compiler bug to me, but who knows.  I have an uncanny ability to write code with all sorts of bugs.</p>



<a name="253002583"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253002583" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253002583">(Sep 12 2021 at 18:13)</a>:</h4>
<p>gotcha! Yeah this actually looks like a compiler bug <span class="user-mention" data-user-id="281543">@Folkert de Vries</span> and I were looking into this morning...if so, there's a fix in progress!</p>



<a name="253013138"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253013138" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zeljko Nesic <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253013138">(Sep 12 2021 at 21:28)</a>:</h4>
<p><span class="user-mention" data-user-id="430829">@James Carlson</span>  Brilliant is brilliant! <br>
May I ask what were you working there? :)</p>



<a name="253015149"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253015149" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253015149">(Sep 12 2021 at 22:06)</a>:</h4>
<p>I was working on their Camperdown Parser ( <a href="https://gallant-einstein-0694e1.netlify.app/">https://gallant-einstein-0694e1.netlify.app/</a> ) including open-sourcing a somewhat simplified version of it, developing a pretty-printer for Camperdown documents and various tests for them to make sure that the pretty-printer doesn't change the source text semantics.  The pretty-printer runs the parser on a document, then re-renders it in somewhat transformed form from the AST.  </p>
<p>A dialect of Camperdown is an in-house markup language they use for their courses.</p>
<p>It was really interesting work.  I loved it. (All Elm)</p>



<a name="253015247"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253015247" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253015247">(Sep 12 2021 at 22:07)</a>:</h4>
<p>I did part of one of Brilliant's courses on quantum mechanics before signing up.  It was very high quality, judging from what I remember of my physics courses.  Not the usual stuff one finds in ed-tech.</p>



<a name="253015952"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253015952" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253015952">(Sep 12 2021 at 22:21)</a>:</h4>
<p><span class="user-mention" data-user-id="341959">@Zeljko Nesic</span> what is your connection with Brilliant? Did you do any of their courses?</p>



<a name="253089342"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253089342" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zeljko Nesic <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253089342">(Sep 13 2021 at 13:30)</a>:</h4>
<p>I play with it with a 3-yo son from time to time, as a part of "better screen time" initiative that am enforcing on my self. They and Duolingo are my go-to places to have nerdy-fun with a kid :)</p>
<p>I couldn't but to feel that there is something like Camperdown behind all those interactive cources and examples. It would be pain in the neck to maintain them by JS hand.</p>



<a name="253100659"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253100659" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253100659">(Sep 13 2021 at 14:39)</a>:</h4>
<p>Good for you and your son ! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="253177980"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253177980" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253177980">(Sep 13 2021 at 23:50)</a>:</h4>
<p><span class="user-mention" data-user-id="430829">@James Carlson</span> The "order matters but it shouldn't" problem should be fixed on <code>trunk</code> now - see if you can still reproduce it!</p>



<a name="253201640"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253201640" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253201640">(Sep 14 2021 at 05:52)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span>  It is fixed!! Fantastic!</p>



<a name="253206246"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253206246" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253206246">(Sep 14 2021 at 06:57)</a>:</h4>
<p>parser code situation MUCH improved (thanks all!).  However, I'm blocked with a misbehaving<code>oneOf</code> combinator.  Please see the file attached below.  There are also directions for producing a truly wild panic!</p>
<div class="codehilite"><pre><span></span><code># FILE: OneOfTest.roc

# My latest travails with parser code (though the situation is now MUCH better.  Thanks all!)
# See the remarks just before the tests.
# This file is self-contained.

app &quot;app&quot;
     packages { base: &quot;platform&quot; }
     imports [base.Task]
     provides [ main ] to base



## PARSER

Parser a : List U8 -&gt; List [Pair a (List U8)]


## ANY

# If succcessful, the any parser consumes one character

any: Parser U8
any = \inp -&gt;
   when List.first inp is
     Ok u -&gt; [Pair u (List.drop inp 1)]
     _ -&gt; [ ]



## SATISFY

satisfy : (U8 -&gt; Bool) -&gt; Parser U8
satisfy = \predicate -&gt;
    \input -&gt; when List.first (any input) is
        Ok (Pair u rest) -&gt;  if predicate u then List.single (Pair u rest) else []
        _ -&gt; [ ]


oneOf : List (Parser a) -&gt; Parser a
oneOf = \parserList -&gt;
          \input -&gt; when List.first parserList is
              Ok p -&gt;
                output = p input
                if List.len output == 1 then output else (oneOf (List.drop parserList 1)) input
              Err _ -&gt; [ ]


satisfyA = satisfy (\u -&gt; u == 97) # recognize 97
satisfyB = satisfy (\u -&gt; u == 98) # recognize 98


# In all the below, the given parser supposedly recognize sequence beginning with 97 or 98
# The return value of a parser in this case has type &#39;List [Pair U8 (List U8)]&#39;
# Thus parse results can be empty (failure), of length 1 (succes), or of length
# greater than 1 (multi-valued, failure).  The parse result is the first element of Pair
#
# In theory, all of the below should succeed, but tests 2 and 3 fail.
# Maybe it is my code ?? Or maybe the compiler.  Dunno.  The code for the
# oneOf combinator is pretty straightforward.

# For a fascinating panic and error message, replace (for example) &#39;satisfyB&#39; by &#39;any&#39;

test1 = if List.len ((oneOf [satisfyA, satisfyB]) [97, 98, 99, 100] ) == 1  then &quot;PASS&quot; else &quot;FAIL&quot;
test2 = if List.len ((oneOf [satisfyA, satisfyB]) [98, 99, 100, 97] ) == 1  then &quot;PASS&quot; else &quot;FAIL&quot;
test3 = if List.len ((oneOf [satisfyB , satisfyA]) [98, 99, 100, 97] ) == 1  then &quot;PASS&quot; else &quot;FAIL&quot;
test4 = if List.len ((oneOf [satisfyA, satisfyB]) [99, 100, 101] ) == 0  then &quot;PASS&quot; else &quot;FAIL&quot;


main : Task.Task {} []
main =
  [test1, test2, test3, test4] |&gt; Str.joinWith &quot;, &quot;
   |&gt; Task.putLine
</code></pre></div>



<a name="253271046"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253271046" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253271046">(Sep 14 2021 at 15:28)</a>:</h4>
<p><a href="/user_uploads/22008/W3EYlLFMxaWcNoqW8vqKbP6g/Screen-Shot-2021-09-14-at-11.28.09-AM.png">Screen-Shot-2021-09-14-at-11.28.09-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/W3EYlLFMxaWcNoqW8vqKbP6g/Screen-Shot-2021-09-14-at-11.28.09-AM.png" title="Screen-Shot-2021-09-14-at-11.28.09-AM.png"><img src="/user_uploads/22008/W3EYlLFMxaWcNoqW8vqKbP6g/Screen-Shot-2021-09-14-at-11.28.09-AM.png"></a></div>



<a name="253271329"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253271329" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253271329">(Sep 14 2021 at 15:30)</a>:</h4>
<p>The above image is the panic message generated by  running the file above (<code>OneOfTest.roc</code>) with <code>any</code> in place of <code>satisfyB</code> in <code>test3</code>.  I've tested all of the functions in another file using my test framework. There is one failure (not with <code>any</code>) and there are no panics.</p>



<a name="253272193"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253272193" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253272193">(Sep 14 2021 at 15:37)</a>:</h4>
<p>this is likely the case because some fold or map function is used internally. I'll have a fix tonight</p>



<a name="253282923"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253282923" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253282923">(Sep 14 2021 at 16:46)</a>:</h4>
<p>Thanks Folkert!</p>



<a name="253332443"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253332443" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253332443">(Sep 14 2021 at 22:16)</a>:</h4>
<p>it's something different. The code mixes "normal" functions with closures, in ways what we just don't handle currently. So this'll be a very interesting test case (thanks!) but now I have to figure out how to solve this properly</p>



<a name="253361881"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253361881" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253361881">(Sep 15 2021 at 04:49)</a>:</h4>
<p>Thanks Folkert, you folks are doing an amazing job!</p>



<a name="253806803"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253806803" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253806803">(Sep 17 2021 at 21:00)</a>:</h4>
<p>this <a href="https://github.com/rtfeldman/roc/pull/1706">https://github.com/rtfeldman/roc/pull/1706</a> will make it run with <code>any</code>, but the ordering problem is still there, I'll look at that next</p>



<a name="253819619"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253819619" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253819619">(Sep 17 2021 at 23:12)</a>:</h4>
<p>the full thing should now run with that PR</p>



<a name="253836052"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253836052" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253836052">(Sep 18 2021 at 03:56)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> , <span class="user-mention" data-user-id="281543">@Folkert de Vries</span> after pulling and merging the latest changes to <code>trunk</code>, all of the tests to my various parser combinators pass. Hooray! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span>  <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span>  <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> — time now to push forward on this project.</p>



<a name="253839246"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253839246" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253839246">(Sep 18 2021 at 04:55)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> , <span class="user-mention" data-user-id="281543">@Folkert de Vries</span>,  another panic found (part of new combinator).  See attached, self-contained code (problem is with <code>manyAux</code> near very end.)</p>
<div class="codehilite"><pre><span></span><code># File: ManyTest.roc
#
# The saga continues! Try `cargo run` on `ManyTest.roc` from a place in which
# you have a suitable platform.  You will get the following panic message, where the line
# beginning with &quot;thread&quot; extends far to the right.
#
# ➜  examples git:(jim-parser) ✗ cargo run parser/ManyTest.roc
#    Finished dev [unoptimized + debuginfo] target(s) in 1.01s
#     Running `/Users/jxxcarlson/dev/roc/roc/target/debug/roc parser/ManyTest.roc`
# thread &#39;main&#39; panicked at &#39;internal error: entered unreachable code: symbol/layout `#UserApp.0` ProcLayout { arguments: [Builtin(List(Builtin(Int8))), LambdaSet(LambdaSet { set: [(`#UserApp.0`, [Union(NonRecursive([[Builtin(List(Builtin(Int8)))], [Builtin(List(Builtin(Int8)))]]))]), (`#UserApp.6`, [LambdaSet(LambdaSet { set: [(`#UserApp.3`, [LambdaSet(LambdaSet { set: [(`#UserApp.isLowerCaseAlpha`, [])], representation: Struct([]) })])], representation: Struct([LambdaSet(LambdaSet { set: [(`#UserApp.isLowerCaseAlpha`, [])], representation: Struct([]) })]) }), LambdaSet(LambdaSet { set: [(`#UserApp.10`, [Builtin(List(Builtin(Int8)))])], representation: Struct([Builtin(List(Builtin(Int8)))]) })])], representation: Union(NonRecursive([[Union(NonRecursive([[Builtin(List(Builtin(Int8)))], [Builtin(List(Builtin(Int8)))]]))], [LambdaSet(LambdaSet { set: [(`#UserApp.10`, [Builtin(List(Builtin(Int8)))])], representation: Struct([Builtin(List(Builtin(Int8)))]) }), LambdaSet(LambdaSet { set: [(`#UserApp.3`, [LambdaSet(LambdaSet { set: [(`#UserApp.isLowerCaseAlpha`, [])], representation: Struct([]) })])], representation: Struct([LambdaSet(LambdaSet { set: [(`#UserApp.isLowerCaseAlpha`, [])], representation: Struct([]) })]) })]])) })], result: Builtin(List(Struct([Union(NonRecursive([[Builtin(List(Builtin(Int8)))], [Builtin(List(Builtin(Int8)))]])), Builtin(List(Builtin(Int8)))]))) } combo must be in DeclarationToIndex&#39;, compiler/mono/src/borrow.rs:227:9
# : run with `RUST_BACKTRACE=1` environment variable to display a backtrace
#
# Sorry for the length of this file but there are quite a few prerequisites for the definition of the `manyAux` function.
# All the functions up the &quot;## MANY&quot; section have passed their tests (which now seem reliable).  Therefore the
# code causing the panic is almost certainly in function `manyAux`.
#


app &quot;app&quot;
     packages { base: &quot;platform&quot; }
     imports [base.Task]
     provides [ main ] to base



## PARSER

Parser a : List U8 -&gt; List [Pair a (List U8)]


## SUCCEED

# succeed: succeed without consuming input
succeed : a -&gt; Parser a
succeed = \v -&gt; (\inp -&gt; [Pair v inp])


## ANY

# If succcessful, the any parser consumes one character

any: Parser U8
any = \inp -&gt;
   when List.first inp is
     Ok u -&gt; [Pair u (List.drop inp 1)]
     _ -&gt; [ ]



## SATISFY

satisfy : (U8 -&gt; Bool) -&gt; Parser U8
satisfy = \predicate -&gt;
    \input -&gt; when List.first (any input) is
        Ok (Pair u rest) -&gt;  if predicate u then List.single (Pair u rest) else []
        _ -&gt; [ ]


## ONE_OF

oneOf : List (Parser a) -&gt; Parser a
oneOf = \parserList -&gt;
          \input -&gt; when List.first parserList is
              Ok p -&gt;
                output = p input
                if List.len output == 1 then output else (oneOf (List.drop parserList 1)) input
              Err _ -&gt; [ ]


## AND_THEN

andThen : Parser a, (a -&gt; Parser b) -&gt; Parser b
andThen = \p, q -&gt;
            \input -&gt; p input |&gt; List.map (\(Pair a input2) -&gt; (q a) input2) |&gt; List.join


## MANY


Step state a : [ Loop state, Done a ]


manyAux : Parser a, List a -&gt; Parser (Step (List a) (List a))
manyAux = \p, list -&gt;
    \input -&gt; (if input == []
              then
                succeed (Done (List.reverse list))
              else
                p1 = andThen p ( \a -&gt; succeed (Loop (List.prepend list a)))
                p2 = succeed (Done (List.reverse list))
                (oneOf [ p1, p2 ])) input


## TEST

isLowerCaseAlpha : U8 -&gt; Bool
isLowerCaseAlpha = \u -&gt; u &gt;= 97 &amp;&amp; u &lt;= 122
lowerCase = satisfy isLowerCaseAlpha

dummyTest = 1 + 1 == 2
manyAuxTest =  (manyAux lowerCase [ ]) [97,98,99] == [Pair (Loop [97]) [98,99]]

runTest = \t -&gt; if t then &quot;PASS&quot; else &quot;FAIL&quot;

main : Task.Task {} []
main =
  runTest manyAuxTest
   |&gt; Task.putLine
</code></pre></div>



<a name="253864420"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253864420" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253864420">(Sep 18 2021 at 12:16)</a>:</h4>
<p>Ahm, I'm getting these errors on going to the project's directory and when trying to run <code>nix-shell</code>. I tried to look into GLIBC but didn't find a way to fix it yet.</p>
<p><a href="/user_uploads/22008/074YyCkolVOAUk7z5jg6R4Cc/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/074YyCkolVOAUk7z5jg6R4Cc/image.png" title="image.png"><img src="/user_uploads/22008/074YyCkolVOAUk7z5jg6R4Cc/image.png"></a></div>



<a name="253864970"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253864970" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253864970">(Sep 18 2021 at 12:24)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="441430">@Luiz de Oliveira</span> , can you tell me what OS you are using?</p>



<a name="253865189"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253865189" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253865189">(Sep 18 2021 at 12:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="361169">Anton</span> <a href="#narrow/stream/231634-beginners/topic/error.20messages/near/253864970">said</a>:</p>
<blockquote>
<p>Hi <span class="user-mention silent" data-user-id="441430">Luiz de Oliveira</span> , can you tell me what OS you are using?</p>
</blockquote>
<p>Oh of course, I'm in popOS 20.04 (so pretty much ubuntu 20.04).</p>



<a name="253865488"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253865488" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253865488">(Sep 18 2021 at 12:34)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> thanks, can you also give me your nix version (<code>nix --version</code>)?</p>



<a name="253866384"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253866384" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253866384">(Sep 18 2021 at 12:50)</a>:</h4>
<p>nix version: 2.3.15</p>



<a name="253868135"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253868135" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253868135">(Sep 18 2021 at 13:19)</a>:</h4>
<p>I will give that a try myself and will let you know once I find a fix!</p>



<a name="253874162"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253874162" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253874162">(Sep 18 2021 at 15:02)</a>:</h4>
<p><span class="user-mention" data-user-id="441430">@Luiz de Oliveira</span>  I tried many different revisions of nixos-unstable but could not get any to work. I recommend that you install without nix as explained in <a href="https://github.com/rtfeldman/roc/blob/trunk/BUILDING_FROM_SOURCE.md">BUILDING_FROM_SOURCE</a>.</p>



<a name="253875071"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253875071" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253875071">(Sep 18 2021 at 15:19)</a>:</h4>
<p><span class="user-mention" data-user-id="400753">@Ju Liu</span> any ideas? <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="253878198"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253878198" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253878198">(Sep 18 2021 at 16:15)</a>:</h4>
<p>Oh I have it installed, but it seems I can't run the editor without nix? But I can run some examples, but not all. I have something wrong regarding zig <a href="/user_uploads/22008/dFfZ60ieFArMNAsyLLqGexb1/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/dFfZ60ieFArMNAsyLLqGexb1/image.png" title="image.png"><img src="/user_uploads/22008/dFfZ60ieFArMNAsyLLqGexb1/image.png"></a></div>



<a name="253878492"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253878492" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253878492">(Sep 18 2021 at 16:20)</a>:</h4>
<p>You should be able to run the editor without nix using <code>cargo run edit</code> from the root of the repo. For examples you should also start from the root of the repo, so then it is <code>cargo run examples/hello-zig/Hello.roc</code>.</p>



<a name="253878619"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253878619" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253878619">(Sep 18 2021 at 16:23)</a>:</h4>
<p>I'll make note to improve the <code>cannot find str.zig</code> error message.</p>



<a name="253878815"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253878815" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253878815">(Sep 18 2021 at 16:26)</a>:</h4>
<p>I get a quick black window that crashes and vanishes and this error message:</p>
<p><a href="/user_uploads/22008/hbwM0R8W_eO8QN4yappsjiNe/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/22008/hbwM0R8W_eO8QN4yappsjiNe/image.png" title="image.png"><img src="/user_uploads/22008/hbwM0R8W_eO8QN4yappsjiNe/image.png"></a></div><p>Somehow I'm breaking a lot of stuff idk.</p>



<a name="253878848"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253878848" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253878848">(Sep 18 2021 at 16:27)</a>:</h4>
<p>I thought this was due to nix, but if it should run without it then it's something else.  I can't really understand this error message =(</p>



<a name="253879619"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253879619" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253879619">(Sep 18 2021 at 16:40)</a>:</h4>
<p>Sorry about this, we'll make sure to try to improve the "building from source" experience in the future.<br>
I've never seen this error message for the editor before.. btw in its current state the editor still has very limited functionality, so for now you are better off using your regular favorite editor.</p>



<a name="253880718"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253880718" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253880718">(Sep 18 2021 at 17:01)</a>:</h4>
<p>wow, yeah that error is coming from the lower-level graphics library we're using</p>



<a name="253880799"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253880799" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253880799">(Sep 18 2021 at 17:03)</a>:</h4>
<p><a href="https://hg.mozilla.org/releases/mozilla-release/rev/73891d5902058892b221f10ea1ba7f6bbc8b2c4f#l106.32">https://hg.mozilla.org/releases/mozilla-release/rev/73891d5902058892b221f10ea1ba7f6bbc8b2c4f#l106.32</a></p>



<a name="253888104"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253888104" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253888104">(Sep 18 2021 at 19:19)</a>:</h4>
<p>This is the backtrace in case it's useful:</p>
<p><a href="/user_uploads/22008/5KDsqyCDelMQ5FC9QJoKcJGX/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/22008/5KDsqyCDelMQ5FC9QJoKcJGX/image.png" title="image.png"><img src="/user_uploads/22008/5KDsqyCDelMQ5FC9QJoKcJGX/image.png"></a></div><p>Looks like the last line of code ran before getting into the lib is this call: <a href="/user_uploads/22008/ACufKNGF17tF-wSqqrDHsoEU/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/ACufKNGF17tF-wSqqrDHsoEU/image.png" title="image.png"><img src="/user_uploads/22008/ACufKNGF17tF-wSqqrDHsoEU/image.png"></a></div>



<a name="253888488"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253888488" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253888488">(Sep 18 2021 at 19:26)</a>:</h4>
<p>I changed this line from <code>let instance = wgpu::Instance::new(wgpu::BackendBit::all());</code> to <code>let instance = wgpu::Instance::new(wgpu::BackendBit::VULKAN);</code> and it runs!<br>
<a href="/user_uploads/22008/o1w5CyFD5dmgOWcFWbrMk-c-/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/22008/o1w5CyFD5dmgOWcFWbrMk-c-/image.png" title="image.png"><img src="/user_uploads/22008/o1w5CyFD5dmgOWcFWbrMk-c-/image.png"></a></div><p><a href="/user_uploads/22008/afuBOYxmhy2N7O3wc4sJ0ri-/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/22008/afuBOYxmhy2N7O3wc4sJ0ri-/image.png" title="image.png"><img src="/user_uploads/22008/afuBOYxmhy2N7O3wc4sJ0ri-/image.png"></a></div><p>I have no clue what that means hahahaha, just found someone with the same problem here <code>https://github.com/gfx-rs/wgpu/issues/1492</code>. I wonder if I'm forcing Vulkan where it should work for other graphics libs too.</p>



<a name="253888834"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253888834" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253888834">(Sep 18 2021 at 19:33)</a>:</h4>
<p>yeah Vulkan is the one on Linux, but macOS wants to use Metal - but maybe we can give it hints about preferences, or like if <code>all</code> fails fall back on trying <code>Vulkan</code>? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="253888888"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253888888" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253888888">(Sep 18 2021 at 19:34)</a>:</h4>
<p>but congrats on getting it working, and this is a good clue towards finding a fix we could merge without breaking others - thanks so much for investigating it <span class="user-mention" data-user-id="441430">@Luiz de Oliveira</span>! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="253889445"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253889445" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253889445">(Sep 18 2021 at 19:45)</a>:</h4>
<p>Say we want to fall back to Vulkan (or maybe have a list of libs to try if <code>all</code> fails) we could use something like the <code>?</code> operator inside a closure, log the error and then try Vulkan (or the next item in a list)? Also, it seems like they have worked on it already <a href="https://github.com/gfx-rs/wgpu/pull/1656">https://github.com/gfx-rs/wgpu/pull/1656</a> but I don't know if it is released (I'm guessing it isn't) or when it will be.</p>



<a name="253890009"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253890009" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253890009">(Sep 18 2021 at 19:55)</a>:</h4>
<p>Well, I'll learn more rust hahaha idk how to do it yet.</p>



<a name="253928651"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/253928651" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#253928651">(Sep 19 2021 at 08:28)</a>:</h4>
<p>I think the fix PR is in wgpu 10, we're currently using 9. I added upgrading to my TODO list. Thanks for the investigation <span class="user-mention" data-user-id="441430">@Luiz de Oliveira</span> !</p>



<a name="254189140"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254189140" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254189140">(Sep 21 2021 at 11:09)</a>:</h4>
<p><span class="user-mention" data-user-id="441430">@Luiz de Oliveira</span> can you try running the editor on the wgpu-10 branch to check if the upgrade fixes your issue?</p>



<a name="254190924"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254190924" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254190924">(Sep 21 2021 at 11:24)</a>:</h4>
<p>I have also improved the zig str error message and added a warning to the nix section of our BUILDING_FROM_SOURCE.md</p>



<a name="254260434"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254260434" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254260434">(Sep 21 2021 at 19:04)</a>:</h4>
<p>Hmmm just got the error below ... this code has been running fine for the last week or so and has had no changes for that time period.</p>
<div class="codehilite"><pre><span></span><code>    [1]    39948 segmentation fault  cargo run parser/ParserTest.roc
</code></pre></div>



<a name="254261036"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254261036" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254261036">(Sep 21 2021 at 19:09)</a>:</h4>
<p>is it consistent?</p>



<a name="254356931"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254356931" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254356931">(Sep 22 2021 at 12:17)</a>:</h4>
<p>Not consistent in the sense that today I merged with the latest commit of <code>trunk</code> but got a different error message (panic instead of segmentation fault):</p>
<div class="codehilite"><pre><span></span><code>   Finished dev [unoptimized + debuginfo] target(s) in 26.24s
     Running `/Users/jxxcarlson/dev/roc/roc/target/debug/roc parser/ParserTest.roc`
thread &#39;main&#39; panicked at &#39;internal error: entered unreachable code: symbol/layout `fx.Effect.map` ProcLayout { arguments: [LambdaSet(LambdaSet { set: [(`fx.Effect.effect_closure_putLine`, [Builtin(Str)])], representation: Struct([Builtin(Str)]) }), LambdaSet(LambdaSet { set: [(`base.Task.6`, [])], representation: Struct([]) })], result: LambdaSet(LambdaSet { set: [(`fx.Effect.effect_map_inner`, [LambdaSet(LambdaSet { set: [(`fx.Effect.effect_closure_putLine`, [Builtin(Str)])], representation: Struct([Builtin(Str)]) }), LambdaSet(LambdaSet { set: [(`base.Task.6`, [])], representation: Struct([]) })])], representation: Struct([LambdaSet(LambdaSet { set: [(`fx.Effect.effect_closure_putLine`, [Builtin(Str)])], representation: Struct([Builtin(Str)]) }), LambdaSet(LambdaSet { set: [(`base.Task.6`, [])], representation: Struct([]) })]) }) } combo must be in DeclarationToIndex&#39;, compiler/mono/src/borrow.rs:227:9
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="254357137"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254357137" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254357137">(Sep 22 2021 at 12:19)</a>:</h4>
<p>it doesn't explain <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span> but one thing that'll need to change is not using <code>RocCallResult</code> anymore</p>



<a name="254357162"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254357162" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254357162">(Sep 22 2021 at 12:19)</a>:</h4>
<p><span class="user-mention" data-user-id="430829">@James Carlson</span> is the branch that reproduces this pushed somewhere?</p>



<a name="254357205"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254357205" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254357205">(Sep 22 2021 at 12:19)</a>:</h4>
<p>Yes, it is <code>jim-parser</code></p>



<a name="254357314"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254357314" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254357314">(Sep 22 2021 at 12:20)</a>:</h4>
<p>Just pushed the branch with the latest merge of trunk</p>



<a name="254357474"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254357474" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254357474">(Sep 22 2021 at 12:21)</a>:</h4>
<p>I am doing <code>cargo run ...</code> from <code>./examples</code></p>



<a name="254425353"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254425353" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254425353">(Sep 22 2021 at 19:34)</a>:</h4>
<p>I just updated the platform on that branch. for me the <code>ParserTest</code> file run and all tests pass</p>



<a name="254425442"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254425442" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254425442">(Sep 22 2021 at 19:35)</a>:</h4>
<p>oh btw it's best to run examples from the top level directory, so <code>cargo run examples/parser/ParserTest.roc</code></p>



<a name="254473494"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254473494" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Carlson <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254473494">(Sep 23 2021 at 03:07)</a>:</h4>
<p>Wonderful + Thanks!  I pulled <code>jim-parser</code> and <code>cargo run examples/parser/ParserTest.roc</code> ran with all tests passing.  Progress.</p>



<a name="254703305"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254703305" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254703305">(Sep 24 2021 at 13:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="361169">Anton</span> <a href="#narrow/stream/231634-beginners/topic/error.20messages/near/254189140">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="441430">Luiz de Oliveira</span> can you try running the editor on the wgpu-10 branch to check if the upgrade fixes your issue?</p>
</blockquote>
<p>Yup! It works fine <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="254704937"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254704937" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254704937">(Sep 24 2021 at 13:38)</a>:</h4>
<p>But I still can't run some examples due to the "str.zig" error. This is the error message with RUST_BACKTRACE=1 <a href="/user_uploads/22008/F_QAKrlKfgDxW1XjqfwPmrRK/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/F_QAKrlKfgDxW1XjqfwPmrRK/image.png" title="image.png"><img src="/user_uploads/22008/F_QAKrlKfgDxW1XjqfwPmrRK/image.png"></a></div>



<a name="254705014"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254705014" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254705014">(Sep 24 2021 at 13:38)</a>:</h4>
<p>I think it works if you do it from the top-level</p>



<a name="254705085"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254705085" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254705085">(Sep 24 2021 at 13:39)</a>:</h4>
<p>the path to <code>zig.str</code> is currently relative to the root of the repository</p>



<a name="254705099"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254705099" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254705099">(Sep 24 2021 at 13:39)</a>:</h4>
<p>You are correct. It works.</p>



<a name="254705145"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254705145" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254705145">(Sep 24 2021 at 13:39)</a>:</h4>
<p>nice!</p>



<a name="254708642"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/254708642" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#254708642">(Sep 24 2021 at 14:01)</a>:</h4>
<p><span class="user-mention" data-user-id="441430">@Luiz de Oliveira</span> the latest trunk has a better error message but does not use wgpu-10 yet.</p>



<a name="256104631"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256104631" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256104631">(Oct 04 2021 at 18:06)</a>:</h4>
<p>curious if anybody's seen this one:</p>
<p><code>error: failed to run custom build command for 'roc_builtins v0.1.0 (/Users/giles/code/roc/compiler/builtins)'</code></p>



<a name="256109273"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256109273" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256109273">(Oct 04 2021 at 18:33)</a>:</h4>
<p>hmm, what commit is that on?</p>



<a name="256109289"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256109289" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256109289">(Oct 04 2021 at 18:33)</a>:</h4>
<p>and what OS?</p>



<a name="256120930"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256120930" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256120930">(Oct 04 2021 at 19:49)</a>:</h4>
<p>Does that just mean zig is missing? Or one of the llvm utils, like llvm-as?</p>



<a name="256154396"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256154396" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256154396">(Oct 05 2021 at 00:13)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> fa4875da8 on macOS. I actually got it on both 10.14.6 (using Intel) and 11.6 (M1). <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> I've got zig installed, but I'll check re the llvm utils.</p>



<a name="256155304"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256155304" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256155304">(Oct 05 2021 at 00:22)</a>:</h4>
<p>facepalm.gif</p>
<p>forgot to add the llvm path to PATH</p>



<a name="256157422"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256157422" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256157422">(Oct 05 2021 at 00:44)</a>:</h4>
<p>glad it worked out! Can you open an issue about that error message? We should improve it so it's easier to troubleshoot in the future!</p>



<a name="256311844"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256311844" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256311844">(Oct 05 2021 at 20:15)</a>:</h4>
<p>done: <a href="https://github.com/rtfeldman/roc/issues/1766">https://github.com/rtfeldman/roc/issues/1766</a></p>



<a name="256312783"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256312783" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256312783">(Oct 05 2021 at 20:21)</a>:</h4>
<p>btw I installed it on Ubuntu 20 just now. smoother experience, but maybe because I'd had more practice at that point. I'm getting a bunch of "unsupported architecture" errors on my M1 MBP but I imagine that's NBD. on my Intel machine I'm seeing errors like this for the <code>cli_run</code> tests:</p>
<div class="codehilite"><pre><span></span><code>---- cli_run::nqueens stdout ----
thread &#39;cli_run::nqueens&#39; panicked at &#39;ld: warning: No version-min specified on command line
ld: warning: -macosx_version_min not specified, assuming 10.11
&#39;, cli/tests/cli_run.rs:56:13
</code></pre></div>



<a name="256313815"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256313815" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256313815">(Oct 05 2021 at 20:28)</a>:</h4>
<p>I'm probably going to have a ton of these because my non-M1 machine is a 2012 Mac Pro from eBay with a (very non-standard) modern CPU and GPU. so maybe unsupported architectures on two out of three systems</p>



<a name="256314146"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256314146" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256314146">(Oct 05 2021 at 20:30)</a>:</h4>
<p>That specifically looks to just be a warning, does the test actually run?</p>



<a name="256314284"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256314284" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256314284">(Oct 05 2021 at 20:31)</a>:</h4>
<p>nope, 21 out of 21 failed in <code>cli_run</code></p>



<a name="256314452"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256314452" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256314452">(Oct 05 2021 at 20:32)</a>:</h4>
<p>sorry, that's wrong. 2 passed, 19 failed. <code>cli_run::hello_web</code> and <code>cli_run::quicksort_app</code> were the ones that passed.</p>



<a name="256314587"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256314587" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256314587">(Oct 05 2021 at 20:33)</a>:</h4>
<p>I got similar <code>ld: warning</code> strings in a ton of <code>repl_eval</code> tests which passed, but without the "thread panicked" part</p>



<a name="256314772"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256314772" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256314772">(Oct 05 2021 at 20:35)</a>:</h4>
<p>May not be a real failure since I believe the cli run tests will fail if they see anything on std err. Can you try explicitly running the test:<br>
<code>cargo run examples/benchmarks/NQueens.roc</code>. You will have to give a number to standard in.</p>



<a name="256314845"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256314845" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256314845">(Oct 05 2021 at 20:35)</a>:</h4>
<p>I guess you could more explicitly do: <code>echo "4" | cargo run examples/benchmarks/NQueens.roc</code></p>



<a name="256315286"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256315286" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256315286">(Oct 05 2021 at 20:39)</a>:</h4>
<p>that seems to work. just responded with the number 2 and a bit of timing info.</p>
<div class="codehilite"><pre><span></span><code>❯ echo 4 | cargo run examples/benchmarks/NQueens.roc
    Finished dev [unoptimized + debuginfo] target(s) in 0.42s
     Running `target/debug/roc examples/benchmarks/NQueens.roc`
ld: warning: No version-min specified on command line
ld: warning: -macosx_version_min not specified, assuming 10.11
2
runtime: 0.093ms
</code></pre></div>



<a name="256315657"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256315657" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256315657">(Oct 05 2021 at 20:41)</a>:</h4>
<p>Cool, so it is working, just printing an extra warning that the test is flagging as a failure.</p>



<a name="256316325"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256316325" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256316325">(Oct 05 2021 at 20:46)</a>:</h4>
<p>I guess that is an arg that we should maybe be specifying on macos.</p>



<a name="256316332"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256316332" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256316332">(Oct 05 2021 at 20:46)</a>:</h4>
<p>yup, I found the "bail if stderr" line in the CLI tests, took it out, they pass. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="256316835"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256316835" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256316835">(Oct 05 2021 at 20:50)</a>:</h4>
<p>I'm new to Rust but specifying an arg like that sounds like a fun, tiny change to dig into.</p>
<p>I got a different fail in <code>test_gen</code> btw:</p>
<div class="codehilite"><pre><span></span><code>test_gen-d11c5b1776e1be63(6961,0x700010b71000) malloc: *** error for object 0x7fe11e7d3dc0: pointer being freed was not allocated
test_gen-d11c5b1776e1be63(6961,0x700010b71000) malloc: *** set a breakpoint in malloc_error_break to debug
error: test failed, to rerun pass &#39;-p test_gen --lib&#39;
</code></pre></div>



<a name="256317269"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256317269" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256317269">(Oct 05 2021 at 20:53)</a>:</h4>
<p>oh fun, that might be genuine. we don't check <code>test_gen</code> for memory safety specifically, and on CI/linux it does not segfault, but there still may be memory safety issues</p>



<a name="256317371"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256317371" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256317371">(Oct 05 2021 at 20:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="445288">Giles Bowkett</span> <a href="#narrow/stream/231634-beginners/topic/error.20messages/near/256316835">said</a>:</p>
<blockquote>
<p>I'm new to Rust but specifying an arg like that sounds like a fun, tiny change to dig into.</p>
</blockquote>
<p>Yeah, should be a super minor change to <code>link.rs</code> Though I am not sure what version we should set it to.</p>



<a name="256317780"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256317780" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256317780">(Oct 05 2021 at 20:57)</a>:</h4>
<p>for now I just did <code>#[cfg(not(target_os = "macos"))]</code> around the <code>stderr.is_empty()</code></p>



<a name="256317843"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256317843" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giles Bowkett <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256317843">(Oct 05 2021 at 20:57)</a>:</h4>
<p>I'm not sure how to figure out which test's throwing the <code>malloc</code> error</p>



<a name="256319631"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256319631" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256319631">(Oct 05 2021 at 21:11)</a>:</h4>
<p>can you run <code>cargo test -p test_gen</code></p>



<a name="256319759"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256319759" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256319759">(Oct 05 2021 at 21:12)</a>:</h4>
<p>that will crash, but should report at the very bottom the name of the actual executable it ran plus the arguments you gave it</p>



<a name="256319805"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256319805" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256319805">(Oct 05 2021 at 21:12)</a>:</h4>
<p>(there may be no arguments actually in this case)</p>



<a name="256319842"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256319842" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256319842">(Oct 05 2021 at 21:12)</a>:</h4>
<p>then, with llvm you should have <code>lldb</code> on your system now</p>



<a name="256319920"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256319920" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256319920">(Oct 05 2021 at 21:13)</a>:</h4>
<p>so then you'd run <code>lldb /path/to/the/executable -- arguments if any</code>. this will open something like a repl</p>



<a name="256319955"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256319955" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256319955">(Oct 05 2021 at 21:14)</a>:</h4>
<p>there, type <code>run</code>, this will start running the tests. after a while this will then crash</p>



<a name="256320036"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256320036" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256320036">(Oct 05 2021 at 21:14)</a>:</h4>
<p>then, type <code>bt</code> (for "backtrace")</p>



<a name="256320071"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256320071" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256320071">(Oct 05 2021 at 21:14)</a>:</h4>
<p>and that would give us the name of the test case that fails</p>



<a name="256320106"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256320106" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256320106">(Oct 05 2021 at 21:14)</a>:</h4>
<p>(yes this is rather complicated and I wish it were easier than that)</p>



<a name="256321637"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256321637" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256321637">(Oct 05 2021 at 21:25)</a>:</h4>
<p>Another option should be: <code>cargo test -p test_gen  -- --test-threads 1</code>. That will make is run one test at a time. Then the last printed test name will be the test that was running when it failed.</p>



<a name="256969853"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256969853" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256969853">(Oct 10 2021 at 17:12)</a>:</h4>
<p><span class="user-mention" data-user-id="*">@all</span> as of current <code>trunk</code>, you can now do <code>roc check Whatever.roc</code> (or <code>cargo run check Whatever.roc</code>) to run <em>just</em> parsing, naming, and type checks.</p>
<p>This should dodge most (if not all) of the panics that currently happen after type checking when there are type mismatches, so I recommend using it instead of directly running <code>Whatever.roc</code> for normal development!</p>
<p><code>check</code> also exits with 0 if there were no errors and 1 if there were errors, so you can do <code>&amp;&amp;</code> at the command line to have it run once there are no more errors</p>



<a name="256970010"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/256970010" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#256970010">(Oct 10 2021 at 17:15)</a>:</h4>
<p>thanks to <span class="user-mention" data-user-id="281543">@Folkert de Vries</span> for making that one happen! <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="258849536"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258849536" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258849536">(Oct 24 2021 at 00:09)</a>:</h4>
<p>I'm getting this message when trying to evaluate anything on the repl or running code from the editor with ctrl-R. Weird thing is "cannot find -lc" I do have libc6-dev installed (build-essentials installed). I'm trying to run things on <code>update-arch</code> branch because I'm having the <code>-arch</code> problem on trunk.</p>
<p><a href="/user_uploads/22008/l6wEFRs1IftdshhowwJQMaFF/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/l6wEFRs1IftdshhowwJQMaFF/image.png" title="image.png"><img src="/user_uploads/22008/l6wEFRs1IftdshhowwJQMaFF/image.png"></a></div>



<a name="258850465"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258850465" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258850465">(Oct 24 2021 at 00:40)</a>:</h4>
<p>Now it's worse. Send help.</p>
<p><a href="/user_uploads/22008/MSyOyBN3wP5T-TotVKAUj2Na/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/MSyOyBN3wP5T-TotVKAUj2Na/image.png" title="image.png"><img src="/user_uploads/22008/MSyOyBN3wP5T-TotVKAUj2Na/image.png"></a></div><p>Apparently I broke llvm installation somehow but now I fixed it and I'm back to the first image. I'll leave it here because I'm totally clueless...</p>



<a name="258852549"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258852549" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258852549">(Oct 24 2021 at 01:34)</a>:</h4>
<p>there may be an issue with your include path. What distro are you on?</p>



<a name="258854450"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258854450" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258854450">(Oct 24 2021 at 02:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="357305">Lucas Rosa</span> <a href="#narrow/stream/231634-beginners/topic/error.20messages/near/258852549">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="448759">Luis Gutierrez</span> there may be an issue with your include path. What distro are you on?</p>
</blockquote>
<p>I think you replied to the wrong Lui(s/z)? I'm on PopOS 20.04</p>



<a name="258856153"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258856153" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258856153">(Oct 24 2021 at 03:22)</a>:</h4>
<p>omg lol you’re right</p>



<a name="258856154"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258856154" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258856154">(Oct 24 2021 at 03:22)</a>:</h4>
<p>I’m sorry</p>



<a name="258856163"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258856163" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258856163">(Oct 24 2021 at 03:23)</a>:</h4>
<p>So on Linux I’ve had issues around symlinks in usr/lib64 and usr/lib</p>
<p>Sometimes I would even have to delete them and manually add them back</p>



<a name="258856169"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258856169" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258856169">(Oct 24 2021 at 03:23)</a>:</h4>
<p>I was on fedora though</p>



<a name="258856224"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258856224" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucas Rosa <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258856224">(Oct 24 2021 at 03:24)</a>:</h4>
<p>but from what I see in the first screenshot, the linker doesn’t know where those things are. Which means they actually aren’t on your computer or the include path is messed up somehow</p>



<a name="258856745"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258856745" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luiz de Oliveira <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258856745">(Oct 24 2021 at 03:39)</a>:</h4>
<p>Hahaha np I'll look into that then. Thanks o/</p>



<a name="258884779"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258884779" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shritesh Bhattarai <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258884779">(Oct 24 2021 at 15:55)</a>:</h4>
<p>I ran <code>cargo test</code> on a M1 and all the cli tests fail <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>because this gets printed to stderr:</p>
<div class="codehilite"><pre><span></span><code>&#39;-use-aa&#39; is not a recognized feature for this target (ignoring feature)
&#39;+zcz-fp&#39; is not a recognized feature for this target (ignoring feature)
&#39;-use-aa&#39; is not a recognized feature for this target (ignoring feature)
&#39;+zcz-fp&#39; is not a recognized feature for this target (ignoring feature)
</code></pre></div>
<p>The warning originates from inkwell / llvm at <a href="https://github.com/rtfeldman/roc/blob/8cf62464c344794da74c0f57d5a7ed223f8b5ff1/compiler/build/src/link.rs#L836-L838">https://github.com/rtfeldman/roc/blob/8cf62464c344794da74c0f57d5a7ed223f8b5ff1/compiler/build/src/link.rs#L836-L838</a>. I've tried messing with the targets / triplets / features without any luck.</p>



<a name="258885028"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258885028" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258885028">(Oct 24 2021 at 16:00)</a>:</h4>
<p>interesting! Can you run things manually? e.g. if you do <code>cargo run examples/hello-world/Hello.roc</code> does it work?</p>



<a name="258885068"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258885068" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shritesh Bhattarai <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258885068">(Oct 24 2021 at 16:01)</a>:</h4>
<p>(whoops wrong topic, still getting the hang of Zulip). Everything works as far as I've tested. It just prints those warnings every time.</p>



<a name="258885134"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/258885134" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#258885134">(Oct 24 2021 at 16:03)</a>:</h4>
<p>oh you posted in this topic originally - I just moved the other messages about the false interpeter test failure into their own topic, since that one seems like it'll take some time to resolve <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="474204230"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474204230" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chloe Bai <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474204230">(Oct 02 2024 at 06:32)</a>:</h4>
<p>hi, i'm new here, i'm trying to contribute to issue <a href="https://github.com/roc-lang/roc/issues/6812">#6812</a> (make nicer error message when todo! is hit). i keep getting this error instead of the one listed on the issue:<br>
thread 'main' panicked at crates/reporting/src/error/parse.rs:3937:14:<br>
not yet implemented: unhandled <code>exposes</code> parsing error ListStart(@7)<br>
note: run with <code>RUST_BACKTRACE=1</code> environment variable to display a backtrace<br>
does anybody know what's wrong?? for reference this is the code in my file that im running:</p>
<p>module Main</p>
<p>main =<br>
    let<br>
        a = 5000<br>
        b = 30000<br>
    in<br>
        a - b</p>



<a name="474211695"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474211695" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Kramer <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474211695">(Oct 02 2024 at 07:03)</a>:</h4>
<p>Hi Chloe,<br>
I think you've stumbled on a parser bug. That code seems to break the parser.</p>
<p>Ideally you'll need some code that reproduces the todo! case from that issue.<br>
I'm not sure I can help you there unfortunately, maybe someone else will have some ideas.</p>
<p>But to get you started, something like this will get the parsing working:</p>
<div class="codehilite"><pre><span></span><code>module [main]

main =
    a = 5000
    b = 30000
    a - b
</code></pre></div>
<p>Note that in Roc there is no <code>let/in</code> syntax, you can basically just get rid of the <code>let/in</code> and it works without it.</p>
<p>Sorry I can't be more helpful than that!</p>
<p>(also, if you want to run the code you'll need a platform. See <a href="https://www.roc-lang.org/examples/HelloWorld/README.html">https://www.roc-lang.org/examples/HelloWorld/README.html</a> if you need a reference)</p>



<a name="474214082"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474214082" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474214082">(Oct 02 2024 at 07:14)</a>:</h4>
<p>For that issue, you need to use the dev backend so try running your app with <code>--dev</code>, also the linked issue was identified on a apple silicon mac. <span class="user-mention" data-user-id="763136">@Chloe Bai</span> do you have an aaarch64 mac?</p>



<a name="474214206"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474214206" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474214206">(Oct 02 2024 at 07:15)</a>:</h4>
<p>It may be unimplemented on all of the dev backends, so the mac thing may not be relevant</p>



<a name="474214394"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474214394" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474214394">(Oct 02 2024 at 07:16)</a>:</h4>
<p>I would suggest using <code>cargo run -- --dev test-app.roc</code> so you know you are using the debug build of the compiler, and also targeting the dev backend for roc.</p>



<a name="474214471"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474214471" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474214471">(Oct 02 2024 at 07:16)</a>:</h4>
<p>Where <code>test-app.roc</code> is your example to reproduce the erro</p>



<a name="474255304"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474255304" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474255304">(Oct 02 2024 at 10:29)</a>:</h4>
<p><span class="user-mention" data-user-id="763136">@Chloe Bai</span>  I had trouble hitting a todo with <code>cargo run -- --dev test-app.roc</code>, but this code triggers one with the repl:</p>
<div class="codehilite"><pre><span></span><code>elemsApproxEq = \values, index1, index2 -&gt;
    val1 = List.get? values index1
    val2 = List.get? values index2
    Ok (Num.isApproxEq val1 val2 {})
</code></pre></div>
<p>Full process:</p>
<div class="codehilite"><pre><span></span><code>$ cargo build --release --bin roc
$ ./target/release/roc repl

  The rockin&#39; roc repl
────────────────────────

Enter an expression, or :help, or :q to quit.

» elemsApproxEq = \values, index1, index2 -&gt;
…     val1 = List.get? values index1
…     val2 = List.get? values index2
…     Ok (Num.isApproxEq val1 val2 {})
thread &#39;main&#39; panicked at crates/compiler/gen_dev/src/generic64/mod.rs:1333:18:
not yet implemented: NumAbs: layout, Builtin(Decimal)
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<a name="474385076"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474385076" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chloe Bai <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474385076">(Oct 02 2024 at 19:52)</a>:</h4>
<p><span class="user-mention" data-user-id="515757">@Luke Boswell</span> i only have a silicon mac</p>



<a name="474385371"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474385371" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chloe Bai <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474385371">(Oct 02 2024 at 19:53)</a>:</h4>
<p>i've been trying to use both of your advice, but it's not working. i think it might be something with set up on my computer or permissions, but could i potentially set up a discord call for some help sometime within the next 24 hrs please?</p>



<a name="474412281"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474412281" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474412281">(Oct 02 2024 at 22:25)</a>:</h4>
<p><span class="user-mention" data-user-id="763136">@Chloe Bai</span> would you be free at <time datetime="2024-10-02T23:30:00Z">2024-10-03T09:30:00+10:00</time> ?</p>



<a name="474466162"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474466162" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chloe Bai <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474466162">(Oct 03 2024 at 04:05)</a>:</h4>
<p><span class="user-mention" data-user-id="515757">@Luke Boswell</span>  oh shoot im sorry i didnt see this!! i had meetings during that time sorry. i will be free from 12pm-5pm Thu Oct 3rd (EST)!</p>



<a name="474466384"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474466384" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chloe Bai <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474466384">(Oct 03 2024 at 04:06)</a>:</h4>
<p>or within the next couple of hours i am also free!!</p>



<a name="474469228"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/error%20messages/near/474469228" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/error.20messages.html#474469228">(Oct 03 2024 at 04:25)</a>:</h4>
<p>Sent you a DM</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>