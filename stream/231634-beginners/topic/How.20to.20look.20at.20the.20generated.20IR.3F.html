<html>
<head><meta charset="utf-8"><title>How to look at the generated IR? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html">How to look at the generated IR?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="377553491"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377553491" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377553491">(Jul 22 2023 at 10:40)</a>:</h4>
<p>What is currently the recommended approach to look at what IR is being generated by a particular Roc program or function?</p>



<a name="377555548"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377555548" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377555548">(Jul 22 2023 at 10:49)</a>:</h4>
<p>with environment variables, like this </p>
<div class="codehilite"><pre><span></span><code>ROC_PRINT_IR_AFTER_RESET_REUSE=1 cargo test-gen-dev gen_primitives::nested_switch -- --nocapture
</code></pre></div>



<a name="377555701"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377555701" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377555701">(Jul 22 2023 at 10:49)</a>:</h4>
<p>there are a couple other stages at which we can print the IR, search for <code>ROC_PRINT_IR</code></p>



<a name="377582157"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377582157" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377582157">(Jul 22 2023 at 12:18)</a>:</h4>
<p>do you mean llvm ir? Or other?</p>



<a name="377594084"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377594084" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377594084">(Jul 22 2023 at 13:09)</a>:</h4>
<p>I was mainly asking for the Roc IR (for which Folkert's answer works nicely), but I'm definitely also interested in how to print the LLVM IR. <span aria-label="blush" class="emoji emoji-1f60a" role="img" title="blush">:blush:</span></p>



<a name="377595053"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377595053" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377595053">(Jul 22 2023 at 13:12)</a>:</h4>
<p><code>--debug</code> flag</p>



<a name="377606470"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377606470" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377606470">(Jul 22 2023 at 13:51)</a>:</h4>
<p>I'm on an M1 mac. Passing the <code>--debug</code> flag creates a nice <code>.ll</code> file with LLVM IR. But it also creates the error message</p>
<div class="codehilite"><pre><span></span><code>An internal compiler expectation was broken.
This is definitely a compiler bug.
Please file an issue here: https://github.com/roc-lang/roc/issues/new/choose
thread &#39;main&#39; panicked at &#39;I could not find the `debugir` tool on the PATH, install it from https://github.com/vaivaswatha/debugir&#39;, crates/compiler/build/src/program.rs:387:44
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>
<p>I've tried installing <code>debugir</code> but it seems we're now on a different LLVM version than <code>debugir</code> expects or something?</p>



<a name="377607032"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377607032" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377607032">(Jul 22 2023 at 13:53)</a>:</h4>
<p>hmm yeah you may need to build it from source and give it the llvm version that you want. although, if it works it works</p>



<a name="377607080"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377607080" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377607080">(Jul 22 2023 at 13:53)</a>:</h4>
<p>the error seems to be about something very different though?</p>



<a name="377617353"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377617353" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377617353">(Jul 22 2023 at 14:35)</a>:</h4>
<p>The error only appears when adding the <code>--debug</code> flag to a call to <code>roc build</code></p>



<a name="377617406"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377617406" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377617406">(Jul 22 2023 at 14:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281543">Folkert de Vries</span> <a href="#narrow/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F/near/377607032">said</a>:</p>
<blockquote>
<p>hmm yeah you may need to build it from source and give it the llvm version that you want. although, if it works it works</p>
</blockquote>
<p>Ok, I'll try to do that</p>



<a name="377620969"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377620969" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377620969">(Jul 22 2023 at 14:50)</a>:</h4>
<p>fwiw I use <code>nix develop</code> when working on Roc stuff, and it Just Works for me there</p>



<a name="377621061"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377621061" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377621061">(Jul 22 2023 at 14:51)</a>:</h4>
<p>if you use nix you can load the flake in the compiler repo which should give you the right debugir. But if you only care about the llvm or without debugir on top you can ignore the error entirely. There is nothing meaningful that happens after we attempt to run debugir that differs from a normal build</p>



<a name="377621348"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377621348" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377621348">(Jul 22 2023 at 14:52)</a>:</h4>
<p>to use ROC_PRINT_IR_* you will need to build a debug version of the compiler anyway</p>



<a name="377621419"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20look%20at%20the%20generated%20IR%3F/near/377621419" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F.html#377621419">(Jul 22 2023 at 14:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/231634-beginners/topic/How.20to.20look.20at.20the.20generated.20IR.3F/near/377620969">said</a>:</p>
<blockquote>
<p>fwiw I use <code>nix develop</code> when working on Roc stuff, and it Just Works for me there</p>
</blockquote>
<p>Aaah! Nice! Yes, that works! <span aria-label="happy" class="emoji emoji-1f600" role="img" title="happy">:happy:</span></p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>