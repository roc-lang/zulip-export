<html>
<head><meta charset="utf-8"><title>How to get the current Timezone / zulu offset in a Roc app? · beginners · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/index.html">beginners</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html">How to get the current Timezone / zulu offset in a Roc app?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="436178183"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436178183" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436178183">(Apr 30 2024 at 02:27)</a>:</h4>
<p>So I see that <code>Utc.now</code> provides time in Zulu time. Just wondering if there's a way to access the system's timezone?</p>



<a name="436178469"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436178469" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436178469">(Apr 30 2024 at 02:30)</a>:</h4>
<p>There isn't currently, but we could add it.</p>



<a name="436178486"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436178486" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436178486">(Apr 30 2024 at 02:30)</a>:</h4>
<p>How would you do this using rust?</p>



<a name="436178731"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436178731" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436178731">(Apr 30 2024 at 02:32)</a>:</h4>
<p>Looks like <code>chrono::offset::TimeZone</code></p>



<a name="436179016"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436179016" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436179016">(Apr 30 2024 at 02:34)</a>:</h4>
<p>If we are happy adding <code>chrono</code> as a dependency I can add that.</p>



<a name="436179039"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436179039" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436179039">(Apr 30 2024 at 02:34)</a>:</h4>
<p>Or happy to talk you through how to add another effect for the platform</p>



<a name="436179061"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436179061" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436179061">(Apr 30 2024 at 02:35)</a>:</h4>
<p>It's pretty straightforward</p>



<a name="436179185"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436179185" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436179185">(Apr 30 2024 at 02:36)</a>:</h4>
<p>I have never written any Rust, but been thinking its high time to learn as I participate more in the Roc community...</p>



<a name="436179397"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436179397" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436179397">(Apr 30 2024 at 02:38)</a>:</h4>
<p>On a little more digging, looks like chrono doesn't actually give anything useable? <br>
<a href="https://stackoverflow.com/questions/59603665/how-do-you-find-the-local-timezone-offset-in-rust">https://stackoverflow.com/questions/59603665/how-do-you-find-the-local-timezone-offset-in-rust</a></p>
<p>Looks like this will get the TZ offset, not sure yet if thats part of chrono or std lib, or something else.<br>
<code>Local.timestamp(0, 0).offset().fix().local_minus_utc()</code></p>



<a name="436179513"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436179513" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436179513">(Apr 30 2024 at 02:39)</a>:</h4>
<p>Anyway, I'd love to go through the process of adding a new effect for the platform.</p>



<a name="436179649"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436179649" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436179649">(Apr 30 2024 at 02:40)</a>:</h4>
<p>Can confirm Local is part of the chrono library.</p>



<a name="436179658"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436179658" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436179658">(Apr 30 2024 at 02:40)</a>:</h4>
<p>I'm not sure how we want to represent an <code>Offset</code>... so this might need tweaking...</p>
<p>Add host&lt;-&gt;platform interface in <code>platform/Effect.roc</code>, something like </p>
<div class="codehilite"><pre><span></span><code>offsetTime : Effect U128
</code></pre></div>
<p>Add platform&lt;-&gt;app interface in <code>platform/Utc.roc</code>, something like</p>
<div class="codehilite"><pre><span></span><code>## Some offset thing...
offset : Task U128 *
offset =
    Effect.offsetTime
    |&gt; Effect.map Ok
    |&gt; InternalTask.fromEffect
</code></pre></div>
<p>Add the Fx implemenation in the host <code>crates/host/src/lib.rs</code>, something like </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#[no_mangle]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="s">"C"</span><span class="w"> </span><span class="k">fn</span> <span class="nf">roc_fx_offsetTime</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">roc_std</span>::<span class="n">U128</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">offset</span>: <span class="kt">u128</span> <span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// implement using chrono::offset::TimeZone</span>

<span class="w">    </span><span class="c1">// return value to roc</span>
<span class="w">    </span><span class="n">roc_std</span>::<span class="n">U128</span>::<span class="n">from</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>



<a name="436179744"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436179744" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436179744">(Apr 30 2024 at 02:41)</a>:</h4>
<p>chrono is just giving offset in seconds from Zulu time.</p>



<a name="436179873"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436179873" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436179873">(Apr 30 2024 at 02:42)</a>:</h4>
<p>So shouldn't exceed <code>60 * 60 * 14</code> which could be as small as an <code>I16</code>.</p>



<a name="436180009"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436180009" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436180009">(Apr 30 2024 at 02:43)</a>:</h4>
<p>Offset can be +14 hours -12 hours I believe. Its either that or -14/+12.</p>



<a name="436180407"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436180407" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436180407">(Apr 30 2024 at 02:47)</a>:</h4>
<p>Thanks for the pointers on adding an effect to the platform. I'll give it a go. Gonna have to learn the basics of setting up my rust dev environment, etc, before I can actually implement it lol.</p>



<a name="436180484"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436180484" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436180484">(Apr 30 2024 at 02:48)</a>:</h4>
<p>This looks relevant <br>
<a href="https://docs.rs/chrono/latest/chrono/offset/struct.FixedOffset.html">https://docs.rs/chrono/latest/chrono/offset/struct.FixedOffset.html</a></p>



<a name="436180564"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436180564" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436180564">(Apr 30 2024 at 02:49)</a>:</h4>
<p>Yeah, I also picked up rust so I could contribute to roc <span aria-label="crab" class="emoji emoji-1f980" role="img" title="crab">:crab:</span></p>



<a name="436180711"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436180711" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436180711">(Apr 30 2024 at 02:50)</a>:</h4>
<p>I'm not familiar with chrono, but at a glance I'd recommend not using FixedOffset for any reason <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="436180791"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436180791" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436180791">(Apr 30 2024 at 02:51)</a>:</h4>
<p>one of the things I've learned the hard way is that "fixed UTC offset" is the same thing as UTC, but it has a name that incorrectly suggests it's taking time zones into account when it isn't</p>



<a name="436180919"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436180919" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436180919">(Apr 30 2024 at 02:52)</a>:</h4>
<p>for example, the information contained in "UTC time foo, with an offset of +2" is:</p>
<ul>
<li>UTC time foo</li>
<li>as an inconvenience, you must subtract 2 to use it</li>
</ul>



<a name="436180967"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436180967" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436180967">(Apr 30 2024 at 02:52)</a>:</h4>
<p>I'm seeing <code>chrono::Local</code>:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Local</span><span class="p">.</span><span class="n">timestamp</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">).</span><span class="n">offset</span><span class="p">().</span><span class="n">fix</span><span class="p">().</span><span class="n">local_minus_utc</span><span class="p">()</span>
</code></pre></div>
<p>which returns 3600 seconds for one particular poster....</p>



<a name="436181145"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436181145" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436181145">(Apr 30 2024 at 02:54)</a>:</h4>
<p>in contrast, a date plus a time zone (e.g. "time foo in the Chicago time zone") can be converted to/from an UTC time - and of course people often want to specify dates add times without the time zone, but you know what their time zone is and so can apply it to the time they specified to get UTC</p>



<a name="436181199"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436181199" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436181199">(Apr 30 2024 at 02:54)</a>:</h4>
<p>but if the user gives you a particular date and time, and all you have recorded is their "UTC offset" - that doesn't tell you their time zone</p>



<a name="436181270"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436181270" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436181270">(Apr 30 2024 at 02:55)</a>:</h4>
<p>many time zones have rules that are more complex than a fixed UTC offset that changes once or twice per year</p>



<a name="436181419"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436181419" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436181419">(Apr 30 2024 at 02:56)</a>:</h4>
<p>and even in the common case in the US (for example), if all you have is a fixed UTC offset, you don't know whether that offset was recorded during daylight savings time or not, so you don't know which direction to adjust it in if you cross a DST boundary</p>



<a name="436181670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436181670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436181670">(Apr 30 2024 at 02:59)</a>:</h4>
<p>to sum up:</p>
<ul>
<li>UTC is useful</li>
<li>Date/time + time zone can be converted to UTC (and is separately useful for other reasons) </li>
<li>UTC offset carries no more information than UTC, and is a footgun because it gives the misimpression of representing time zone information - so I think it's best not to use it for any reason!</li>
</ul>



<a name="436183582"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436183582" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436183582">(Apr 30 2024 at 03:16)</a>:</h4>
<p>Ok, this looks like the better solution then <a href="https://docs.rs/iana-time-zone/latest/iana_time_zone/fn.get_timezone.html">https://docs.rs/iana-time-zone/latest/iana_time_zone/fn.get_timezone.html</a></p>



<a name="436183749"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436183749" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436183749">(Apr 30 2024 at 03:18)</a>:</h4>
<p>That all makes a lot of sense.  Definitely don't want to do away with UTC time, but I think it would be useful to have a way to move between UTC time and Local time. </p>
<p>I can see that pure Zulu offset has some definite ambiguities, if you are trying to determine the timezone from the offset. Depending on your usecase, zulu offset may be exactly what you want. If you simply want to convert a zulu time to a local time to display to the user, offset is exactly what you're looking for. If you want to store a time longterm, and particularly if you're recording it without date info attached.</p>



<a name="436183832"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436183832" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436183832">(Apr 30 2024 at 03:19)</a>:</h4>
<p>See also <a href="https://www.iana.org/time-zones">https://www.iana.org/time-zones</a></p>



<a name="436183938"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436183938" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436183938">(Apr 30 2024 at 03:20)</a>:</h4>
<p>Seems to me that both offset and timezone are useful? If all the platform provides is timezone string, but you want to display a time in local time to the user, you still need a way to convert TZ string to an offset. Maybe that should be in a package rather than the platform, but still has its applications.</p>



<a name="436184016"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436184016" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436184016">(Apr 30 2024 at 03:21)</a>:</h4>
<p><a href="/user_uploads/22008/2yVVLsgu7glfu8QScA1C3TvA/Screenshot-2024-04-30-at-13.20.28.png">Screenshot-2024-04-30-at-13.20.28.png</a><br>
So the solution is to build a Roc package that provides the tz data</p>
<div class="message_inline_image"><a href="/user_uploads/22008/2yVVLsgu7glfu8QScA1C3TvA/Screenshot-2024-04-30-at-13.20.28.png" title="Screenshot-2024-04-30-at-13.20.28.png"><img src="/user_uploads/22008/2yVVLsgu7glfu8QScA1C3TvA/Screenshot-2024-04-30-at-13.20.28.png"></a></div>



<a name="436184128"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436184128" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436184128">(Apr 30 2024 at 03:22)</a>:</h4>
<p>The data files look like ^^ in a standardised format so they can be parsed. We could code gen the implementation similar to how we generate the mapping between codepoints and unicode properties like in the roc-land/unicode package.</p>



<a name="436184250"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436184250" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436184250">(Apr 30 2024 at 03:23)</a>:</h4>
<p>Correct me if I'm wrong, I believe what we want is:</p>
<ul>
<li>a platform effect to provide the TZ string</li>
<li>a package to convert TZ string to local offset</li>
</ul>



<a name="436184258"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436184258" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436184258">(Apr 30 2024 at 03:23)</a>:</h4>
<blockquote>
<p>The Time Zone Database (called tz, tzdb or zoneinfo) contains code and<br>
data that represent the history of local time for many representative<br>
locations around the globe.  It is updated periodically to reflect<br>
changes made by political bodies to time zone boundaries, UTC offsets,<br>
and daylight-saving rules.</p>
</blockquote>



<a name="436184417"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436184417" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436184417">(Apr 30 2024 at 03:25)</a>:</h4>
<p>Though, I'm not sure it's worth including the full history for every single time zone</p>



<a name="436184878"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436184878" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436184878">(Apr 30 2024 at 03:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F/near/436184417">said</a>:</p>
<blockquote>
<p>Though, I'm not sure it's worth including the full history for every single time zone</p>
</blockquote>
<p>Hmm... depending on how big the dataset is, could include the data as a CSV or similar and perform a query on that for historical dates, while hardcoding current info. </p>
<p>Alternatively it could be network dependent, but that seems sub optimal.</p>



<a name="436185267"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436185267" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436185267">(Apr 30 2024 at 03:33)</a>:</h4>
<p>If it's a package then application and platform authors can opt out of using it if they dont need it. Once the source is compiled it's probably not that large. Maybe there is a more compact way of representing it in source code too? like encode into a data table and include that in the source code?</p>



<a name="436185494"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436185494" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436185494">(Apr 30 2024 at 03:35)</a>:</h4>
<p>That makes sense… are you thinking like a large dict of TZ data? Or how would Roc store a data table like that?</p>



<a name="436185501"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436185501" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436185501">(Apr 30 2024 at 03:36)</a>:</h4>
<p>I'm thinking we could hash the TZ string, and use that as a Dict key</p>



<a name="436185836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436185836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436185836">(Apr 30 2024 at 03:39)</a>:</h4>
<p>Maybe for the value we have a <code>List {utcFrom: U64, offset:U16}</code> or something</p>



<a name="436186050"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436186050" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436186050">(Apr 30 2024 at 03:41)</a>:</h4>
<p>Where from is the beginning date as offset from epoch when the offset came into use?</p>



<a name="436186127"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436186127" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian McLerran <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436186127">(Apr 30 2024 at 03:42)</a>:</h4>
<p>That would still require list iteration… maybe hash the from and TZ string for O(1) lookup</p>



<a name="436186216"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436186216" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436186216">(Apr 30 2024 at 03:43)</a>:</h4>
<p>There's an implementation for the <code>Hasher</code> ability floating around somewhere. I don't think it needs to be cryptographically secure or anything.  In <code>crates/compiler/builtins/roc/Dict.roc</code> we have the <code>LowLevelHasher</code> which is an implementation of wyhash. I'm not sure if there is any different using a <code>Str</code> key or hashing it first. <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span>  would know</p>



<a name="436186333"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436186333" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436186333">(Apr 30 2024 at 03:44)</a>:</h4>
<p>Maybe there is a smarter data structure to put all this in? I'm not great with this stuff</p>



<a name="436187315"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187315" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187315">(Apr 30 2024 at 03:54)</a>:</h4>
<p>Just caught up here. How big is this database in practice and how often does it actually change. Are we talking 10s of timezones, 100s, other?</p>



<a name="436187350"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187350" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187350">(Apr 30 2024 at 03:55)</a>:</h4>
<p>Just trying to get a feel for the data before suggesting anything.</p>



<a name="436187403"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187403" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187403">(Apr 30 2024 at 03:55)</a>:</h4>
<p><del>Thousands of TimeZones</del></p>



<a name="436187432"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187432" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187432">(Apr 30 2024 at 03:55)</a>:</h4>
<p>Maybe between 5-20 rules per timezone</p>



<a name="436187449"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187449" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187449">(Apr 30 2024 at 03:56)</a>:</h4>
<p>Maybe only hundreds of TZ's</p>



<a name="436187628"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187628" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187628">(Apr 30 2024 at 03:57)</a>:</h4>
<p>Ok, so 597 timezones</p>



<a name="436187707"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187707" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187707">(Apr 30 2024 at 03:58)</a>:</h4>
<p>Ok</p>



<a name="436187723"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187723" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187723">(Apr 30 2024 at 03:58)</a>:</h4>
<p>A bunch of timezones share common rules</p>



<a name="436187800"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187800" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187800">(Apr 30 2024 at 03:59)</a>:</h4>
<p><a href="https://en.wikipedia.org/wiki/Tz_database">https://en.wikipedia.org/wiki/Tz_database</a></p>



<a name="436187812"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187812" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187812">(Apr 30 2024 at 03:59)</a>:</h4>
<p>This is the best summary I've found</p>



<a name="436187827"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187827" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187827">(Apr 30 2024 at 03:59)</a>:</h4>
<p>My gut feeling is that the best would be to write a program to read the timezones database and generate roc code for a package (can also try having the roc package directly read the time zone database, but I would guess that would be slow).</p>



<a name="436187852"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187852" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187852">(Apr 30 2024 at 03:59)</a>:</h4>
<p>I would push for using a tag instead of a string for the timezones.</p>



<a name="436187877"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436187877" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436187877">(Apr 30 2024 at 04:00)</a>:</h4>
<p>Of course with conversion</p>



<a name="436188053"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436188053" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436188053">(Apr 30 2024 at 04:01)</a>:</h4>
<p>Cause if a specific version of the time zone package doesn't know about a timezone, won't matter if it is a string or a tag. That said, I guess there could be value in making this more pluggable if the database changes often and you would rather load it at runtime.</p>



<a name="436188113"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436188113" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436188113">(Apr 30 2024 at 04:01)</a>:</h4>
<p>Anyway, this is small enough that if you use a tag, linear search (or binary for that matter) might beat a dictionary. If you use a string, probably should just make the string the key to a dictionary</p>



<a name="436188449"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436188449" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436188449">(Apr 30 2024 at 04:05)</a>:</h4>
<p>Another approach that seems common is to use the database on the users host system. For example the go std library has this </p>
<p><strong>func LoadLocation(name string) (*Location, error)</strong><br>
LoadLocation returns the Location with the given name.</p>
<p>If the name is "" or "UTC", LoadLocation returns UTC. If the name is "Local", LoadLocation returns Local.</p>
<p>Otherwise, the name is taken to be a location name corresponding to a file in the IANA Time Zone database, such as "America/New_York".</p>
<p>LoadLocation looks for the IANA Time Zone database in the following locations in order:</p>
<ol>
<li>the directory or uncompressed zip file named by the ZONEINFO environment variable</li>
<li>on a Unix system, the system standard installation location</li>
<li>$GOROOT/lib/time/zoneinfo.zip</li>
<li>the time/tzdata package, if it was imported</li>
</ol>



<a name="436188601"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436188601" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436188601">(Apr 30 2024 at 04:07)</a>:</h4>
<p>I think it would be nice to have a package that includes the database, then it would <strong>just work</strong> wherever you write Roc code.</p>



<a name="436188620"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436188620" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436188620">(Apr 30 2024 at 04:07)</a>:</h4>
<p>Yeah, I think you want both.</p>



<a name="436188639"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436188639" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436188639">(Apr 30 2024 at 04:07)</a>:</h4>
<p>One that is 100% roc with nicer types</p>



<a name="436188705"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436188705" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436188705">(Apr 30 2024 at 04:08)</a>:</h4>
<p>One for loading from the system and being able to update with a file</p>



<a name="436188746"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436188746" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436188746">(Apr 30 2024 at 04:08)</a>:</h4>
<p>This is how it's done in Elm <a href="https://github.com/justinmimbs/timezone-data/blob/10.1.1/src/TimeZone.elm">https://github.com/justinmimbs/timezone-data/blob/10.1.1/src/TimeZone.elm</a></p>



<a name="436190349"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436190349" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436190349">(Apr 30 2024 at 04:29)</a>:</h4>
<p>A platform could provide:</p>
<div class="codehilite"><pre><span></span><code>Utc := I128
TimeZone := Str
Local := I128

now : Task Utc *
name : TimeZone -&gt; Task Str [NotFound]
systemTimeZone : Task TimeZone [NotAvailable]
offset : Utc, TimeZone -&gt; Local
</code></pre></div>
<p>A package could provide:</p>
<div class="codehilite"><pre><span></span><code>Utc := I128
TimeZone := Str
Local := I128

name : TimeZone -&gt; Result Str [NotFound]
offset : Utc, TimeZone -&gt; Local
</code></pre></div>
<p>Using the platform to get the offset would use less memory as the IANA database is not included, at the expense of requiring a <code>Task</code> which would search for the database on the system - which may not be available in some environments.</p>



<a name="436193325"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436193325" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436193325">(Apr 30 2024 at 05:00)</a>:</h4>
<p>I think the database could be ingested as code which would cost binary size, but would be fast and as long as timezones don't update too much, not that bad for dependency Management</p>



<a name="436366749"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/231634-beginners/topic/How%20to%20get%20the%20current%20Timezone%20/%20zulu%20offset%20in%20a%20Roc%20app%3F/near/436366749" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RKB <a href="https://roc-lang.github.io/zulip-export/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F.html#436366749">(Apr 30 2024 at 22:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="518883">Ian McLerran</span> <a href="#narrow/stream/231634-beginners/topic/How.20to.20get.20the.20current.20Timezone.20.2F.20zulu.20offset.20in.20a.20Roc.20app.3F/near/436183749">said</a>:</p>
<blockquote>
<p>If you simply want to convert a zulu time to a local time to display to the user, offset is exactly what you're looking for.</p>
</blockquote>
<p>it's a trap!<br>
offsets are not stable over time; the offset for a time in this week may be different to the offset for a time next week.</p>
<p>to accurately convert any UTC time to a local time, you <strong>need</strong> to know the user's local Timezone Identifier (like <code>Australia/Sydney</code>)</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>