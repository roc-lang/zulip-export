<html>
<head><meta charset="utf-8"><title>Weird behaviour with dict and U128 · bugs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/index.html">bugs</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html">Weird behaviour with dict and U128</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="488152090"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488152090" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Erik Kemi Warghed <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488152090">(Dec 11 2024 at 17:37)</a>:</h4>
<p>So I am using a dictionary and using a type {U64, U8} as key, then it works, however if I just changed type to {U128,U8} I start to get some really weird issues...  It says keys exist that shouldnt exist. However if I change the code to all using U64 it runs flawlessly. Code used is here, Warning for spoiler for AoC day 11: <a href="https://gist.github.com/jonwarghed/d5606997fb705f5ce2a3c09a3ab98705">https://gist.github.com/jonwarghed/d5606997fb705f5ce2a3c09a3ab98705</a></p>



<a name="488160786"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488160786" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488160786">(Dec 11 2024 at 18:28)</a>:</h4>
<p>Thanks for reporting this <span class="user-mention" data-user-id="787168">@Jon Erik Kemi Warghed</span><br>
There is a lot of output if I execute <code>roc test</code>,  both when using <code>U128</code> and <code>U64</code>, can you narrow this down a bit?</p>



<a name="488163562"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488163562" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488163562">(Dec 11 2024 at 18:44)</a>:</h4>
<p>We may just hash u128 wrong.</p>



<a name="488164019"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488164019" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Erik Kemi Warghed <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488164019">(Dec 11 2024 at 18:47)</a>:</h4>
<p>Sure let me see if I can make it more easily reproducible as well.</p>



<a name="488165863"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488165863" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Erik Kemi Warghed <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488165863">(Dec 11 2024 at 18:57)</a>:</h4>
<p>Code is not much easier, but the output should be clearer, please let me know, I am kinda new in Roc. So not easy to force types correctly yet for a minimal example :)</p>



<a name="488165912"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488165912" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Erik Kemi Warghed <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488165912">(Dec 11 2024 at 18:58)</a>:</h4>
<p><a href="/user_uploads/22008/atX-hDOAJj9Yu7GeA0eZSDUS/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/atX-hDOAJj9Yu7GeA0eZSDUS/image.png" title="image.png"><img data-original-dimensions="1985x198" src="/user_uploads/thumbnail/22008/atX-hDOAJj9Yu7GeA0eZSDUS/image.png/840x560.webp"></a></div>



<a name="488166472"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488166472" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488166472">(Dec 11 2024 at 19:00)</a>:</h4>
<p>This is the input? <code>0 1 10 99 999</code></p>



<a name="488166630"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488166630" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488166630">(Dec 11 2024 at 19:01)</a>:</h4>
<p>also, what type of machine are you on?</p>



<a name="488166649"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488166649" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Erik Kemi Warghed <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488166649">(Dec 11 2024 at 19:01)</a>:</h4>
<p>Ah sorry example input is 125 17</p>



<a name="488166759"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488166759" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Erik Kemi Warghed <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488166759">(Dec 11 2024 at 19:02)</a>:</h4>
<p>❯ uname -a<br>
Linux jotunheim 6.6.63 <a href="https://github.com/roc-lang/roc/issues/1">#1</a>-NixOS SMP PREEMPT_DYNAMIC Fri Nov 22 14:38:37 UTC 2024 x86_64 GNU/Linux</p>



<a name="488166928"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488166928" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488166928">(Dec 11 2024 at 19:03)</a>:</h4>
<p>thanks. Seems target specific. Works on mac. So probably is alignment or some silly call conv thing.</p>



<a name="488166975"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488166975" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488166975">(Dec 11 2024 at 19:03)</a>:</h4>
<p>on m1 mac see:</p>
<div class="codehilite"><pre><span></span><code>────────────────────────────────────────────────────────────────────────────────
[/tmp/bug.roc:80] (&quot;Inserting&quot;, curr, result) = (&quot;Inserting&quot;, {pebble: 125, target: 1}, 1)
[/tmp/bug.roc:87] (&quot;Inserting&quot;, curr, r) = (&quot;Inserting&quot;, {pebble: 17, target: 1}, 2)
[/tmp/bug.roc:103] end_memory.brain = {{pebble: 125, target: 1}: 1, {pebble: 17, target: 1}: 2}
── EXPECT FAILED in /tmp/bug.roc ───────────────────────────────────────────────
</code></pre></div>



<a name="488167592"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488167592" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Erik Kemi Warghed <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488167592">(Dec 11 2024 at 19:06)</a>:</h4>
<p>possible, let me know if I should do anything else.</p>



<a name="488167667"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488167667" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488167667">(Dec 11 2024 at 19:07)</a>:</h4>
<p>I'll test on my linux box. See if I can repro</p>



<a name="488167797"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488167797" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488167797">(Dec 11 2024 at 19:07)</a>:</h4>
<p>yeah, I can repro</p>



<a name="488167893"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488167893" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Erik Kemi Warghed <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488167893">(Dec 11 2024 at 19:08)</a>:</h4>
<p>Cool, I have a devenv.lock if needed.</p>



<a name="488178982"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488178982" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488178982">(Dec 11 2024 at 20:12)</a>:</h4>
<p>Woah, this looks to be a <code>List.append</code> bug.</p>



<a name="488179035"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488179035" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488179035">(Dec 11 2024 at 20:12)</a>:</h4>
<p><del>That or an inspect printout bug</del></p>



<a name="488179370"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488179370" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488179370">(Dec 11 2024 at 20:14)</a>:</h4>
<p>This is logging from the list insertion in the dictionary:</p>
<div class="codehilite"><pre><span></span><code>[/tmp/MyDict.roc:466] data0 = [({pebble: 125, target: 1}, 1)]
[/tmp/MyDict.roc:467] (&quot;Inserting&quot;, key, value) = (&quot;Inserting&quot;, {pebble: 17, target: 1}, 2)
[/tmp/MyDict.roc:469] data1 = [({pebble: 125, target: 1}, 1), ({pebble: 322962136477993009152, target: 0}, 36893488147419103233)]
[/tmp/MyDict.roc:471] List.get data1 dataIndex = (Ok ({pebble: 322962136477993009152, target: 0}, 36893488147419103233))
</code></pre></div>



<a name="488179446"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488179446" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488179446">(Dec 11 2024 at 20:14)</a>:</h4>
<p>So somehow these types break <code>List.append</code>.</p>



<a name="488186155"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488186155" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488186155">(Dec 11 2024 at 20:52)</a>:</h4>
<p>Seems like we might be writting at the wrong offset. <code>322962136477993009152</code> constains <code>17</code> along with garbage. <code>36893488147419103233</code> contains both <code>1</code> and <code>2</code></p>



<a name="488193175"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488193175" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488193175">(Dec 11 2024 at 21:36)</a>:</h4>
<p>Minimal repro is literally just this:</p>
<div class="codehilite"><pre><span></span><code>app [main] { pf: platform &quot;https://github.com/roc-lang/basic-cli/releases/download/0.17.0/lZFLstMUCUvd5bjnnpYromZJXkQUrdhbva4xdBInicE.tar.br&quot; }

import pf.Stdout

main =
    x = []
    Stdout.line! (Inspect.toStr x)
    a = ({pebble: 125u128, target: 1u8}, 1u128)
    Stdout.line! &quot;Inserting: $(Inspect.toStr a)&quot;
    y = List.append x a
    Stdout.line! (Inspect.toStr y)
    b = ({pebble: 17, target: 1}, 2)
    Stdout.line! &quot;Inserting: $(Inspect.toStr b)&quot;
    z = List.append y b
    Stdout.line! (Inspect.toStr z)
</code></pre></div>



<a name="488198784"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488198784" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488198784">(Dec 11 2024 at 22:14)</a>:</h4>
<p>Oh, this is just llvm thinking that i128 should be aligned to 8 bytes instead of 16</p>



<a name="488198803"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488198803" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488198803">(Dec 11 2024 at 22:15)</a>:</h4>
<p>So it ends up calculating the gep instruction wrong</p>



<a name="488198872"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488198872" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488198872">(Dec 11 2024 at 22:15)</a>:</h4>
<p>If you assume alignment of 8, <code>{ { i128, i8 }, i128 }</code> has a size of <code>40</code>. If the alignment is <code>16</code>, the size is <code>48</code></p>



<a name="488199049"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488199049" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488199049">(Dec 11 2024 at 22:16)</a>:</h4>
<p>This honestly might be a pain to fix. Is a version of llvm with i128 alignment changed to 16 released yet? If so, updating to that version of llvm may be the best fix (work we already have to do anyway).</p>



<a name="488199328"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488199328" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488199328">(Dec 11 2024 at 22:18)</a>:</h4>
<p>Looks like LLVM 20 should have it?</p>



<a name="488512882"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488512882" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488512882">(Dec 11 2024 at 22:20)</a>:</h4>
<p>The v18 update has been a good amount of work, we should try to separately upgrade from LLVM 18 to 20</p>



<a name="488513291"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488513291" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488513291">(Dec 11 2024 at 22:23)</a>:</h4>
<p>Really, not until 20? The rust issue related to this thought it should get release in 18.</p>



<a name="488513649"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488513649" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488513649">(Dec 11 2024 at 22:26)</a>:</h4>
<p>Also, saw some micro benchmarks showing the alignment leading to a 12% perf gain. Clearly, these targeted alignment related issues, but just surprising a bit. Looking at rust projects updating to 1.78.0. some got perf gains of up to 20%. but most got 0% to 5% gains.</p>



<a name="488514456"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488514456" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488514456">(Dec 11 2024 at 22:32)</a>:</h4>
<p>Let me get a specific answer, this was from loose GH issue investigating</p>



<a name="488525515"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488525515" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488525515">(Dec 11 2024 at 23:56)</a>:</h4>
<p><a href="https://godbolt.org/z/c5vaPd9or">https://godbolt.org/z/c5vaPd9or</a></p>



<a name="488525519"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488525519" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488525519">(Dec 11 2024 at 23:56)</a>:</h4>
<p>It is fixed in 18</p>



<a name="488525672"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488525672" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488525672">(Dec 11 2024 at 23:58)</a>:</h4>
<blockquote>
<p>we should try to separately upgrade from LLVM 18 to 20</p>
</blockquote>
<p>Also, I think 20 is trunk. 19 is the newest release.</p>



<a name="488536997"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488536997" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488536997">(Dec 12 2024 at 02:02)</a>:</h4>
<p>Also, can confirm that this bug is fixed with <a href="https://github.com/roc-lang/roc/pull/6921">https://github.com/roc-lang/roc/pull/6921</a></p>



<a name="488761493"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Weird%20behaviour%20with%20dict%20and%20U128/near/488761493" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Weird.20behaviour.20with.20dict.20and.20U128.html#488761493">(Dec 13 2024 at 04:12)</a>:</h4>
<p>This should be fixed on main now</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>