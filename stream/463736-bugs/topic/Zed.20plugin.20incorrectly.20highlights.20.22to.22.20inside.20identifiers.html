<html>
<head><meta charset="utf-8"><title>Zed plugin incorrectly highlights &quot;to&quot; inside identifiers · bugs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/index.html">bugs</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Zed.20plugin.20incorrectly.20highlights.20.22to.22.20inside.20identifiers.html">Zed plugin incorrectly highlights &quot;to&quot; inside identifiers</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="533839589"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Zed%20plugin%20incorrectly%20highlights%20%22to%22%20inside%20identifiers/near/533839589" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruby <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Zed.20plugin.20incorrectly.20highlights.20.22to.22.20inside.20identifiers.html#533839589">(Aug 11 2025 at 17:41)</a>:</h4>
<p>I've noticed that the Zed extension for Roc incorrectly highlights "to" as a keyword even when it's part of a variable name. For example, if I have a variable called <code>todos</code>, the "to" part gets highlighted as a keyword.</p>
<p>This doesn't happen in nvim with the same tree-sitter-roc grammar, so it seems to be specific to how the Zed extension is configured.</p>
<p>Looking at the extension's <code>highlights.scm</code>, I found this:</p>
<div class="codehilite" data-code-language="Scheme"><pre><span></span><code><span class="p">[</span>
<span class="p">(</span><span class="nf">implements</span><span class="p">)</span>
<span class="p">(</span><span class="k">when</span><span class="p">)</span>
<span class="p">(</span><span class="nf">is</span><span class="p">)</span>
<span class="s">"as"</span>
<span class="p">(</span><span class="nf">to</span><span class="p">)</span>
<span class="p">]</span><span class="w"> </span><span class="nv">@keyword</span><span class="o">.</span><span class="nv">control</span><span class="o">.</span><span class="nv">roc</span>
</code></pre></div>
<p><strong>My questions:</strong></p>
<ol>
<li>
<p>Is "to" actually a keyword in Roc? I only see it used in module headers like:<br>
<code>roc
   app "test" provides [main] to "./platform"
   </code></p>
</li>
<li>
<p>Should "to" be highlighted at all? I notice nvim doesn't highlight it.</p>
</li>
<li>
<p>Is this <code>(to)</code> node type necessary, or is it a bug in the Zed extension configuration?</p>
</li>
</ol>
<p><strong>My fix:</strong> I removed the <code>(to)</code> line from the highlights.scm and now variables like <code>todos</code> display correctly. But I'm not sure if this breaks highlighting for legitimate uses of "to".</p>
<p>Would love to know if I'm understanding this correctly and whether "to" should be treated as a keyword in Roc.</p>



<a name="533840189"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Zed%20plugin%20incorrectly%20highlights%20%22to%22%20inside%20identifiers/near/533840189" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Zed.20plugin.20incorrectly.20highlights.20.22to.22.20inside.20identifiers.html#533840189">(Aug 11 2025 at 17:46)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="943729">@Ruby</span>,<br>
This header style is no longer used:</p>
<div class="codehilite"><pre><span></span><code>app &quot;test&quot; provides [main] to &quot;./platform&quot;
</code></pre></div>
<p>I did some checking and <code>to</code> is no longer a keyword and does not need to be highlighted anymore, so I think your fix is correct.</p>



<a name="533840384"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Zed%20plugin%20incorrectly%20highlights%20%22to%22%20inside%20identifiers/near/533840384" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruby <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Zed.20plugin.20incorrectly.20highlights.20.22to.22.20inside.20identifiers.html#533840384">(Aug 11 2025 at 17:47)</a>:</h4>
<p>Yes, I found that example somewhere deep in the roc codebase and wasn't completely sure about it. </p>
<p>Thanks <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span></p>



<a name="533842808"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Zed%20plugin%20incorrectly%20highlights%20%22to%22%20inside%20identifiers/near/533842808" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Zed.20plugin.20incorrectly.20highlights.20.22to.22.20inside.20identifiers.html#533842808">(Aug 11 2025 at 18:05)</a>:</h4>
<p>I did some extra digging, <code>to</code> still is a header keyword, so not considered a full keyword (past the header) and this old header style does still work with the old (rust) compiler. <code>to</code> has been completely removed from the new (zig) compiler as far as I could tell. You could say it's been informally deprecated :p Preventing <code>to</code> from being highlighted everywhere in the code is still a good fix, because it was never a full keyword to begin with.</p>



<a name="533988917"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Zed%20plugin%20incorrectly%20highlights%20%22to%22%20inside%20identifiers/near/533988917" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruby <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Zed.20plugin.20incorrectly.20highlights.20.22to.22.20inside.20identifiers.html#533988917">(Aug 12 2025 at 14:03)</a>:</h4>
<p>Thanks!</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>