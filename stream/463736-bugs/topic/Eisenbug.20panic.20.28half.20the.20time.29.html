<html>
<head><meta charset="utf-8"><title>Eisenbug panic (half the time) · bugs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/index.html">bugs</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html">Eisenbug panic (half the time)</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="562246201"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562246201" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562246201">(Dec 06 2025 at 14:47)</a>:</h4>
<p>So I’m not sure how to proceed. I’ve got a program that only panic half of the runs. It alternates between panic and fine. What should I do with this one ahah?</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>aoc-2025/roc<span class="w"> </span>on<span class="w"> </span><span class="w"> </span>main<span class="w"> </span><span class="o">[</span>?⇡<span class="o">]</span><span class="w"> </span>on<span class="w"> </span>☁
❯<span class="w"> </span>roc<span class="w"> </span>panic.roc
<span class="m">11</span>-22
thread<span class="w"> </span><span class="m">14852754</span><span class="w"> </span>panic:<span class="w"> </span>incorrect<span class="w"> </span>alignment
???:?:?:<span class="w"> </span>0x104ab76a3<span class="w"> </span><span class="k">in</span><span class="w"> </span>???<span class="w"> </span><span class="o">(</span>panic.roc<span class="o">)</span>
???:?:?:<span class="w"> </span>0x1049a3527<span class="w"> </span><span class="k">in</span><span class="w"> </span>???<span class="w"> </span><span class="o">(</span>panic.roc<span class="o">)</span>
???:?:?:<span class="w"> </span>0x10494b0db<span class="w"> </span><span class="k">in</span><span class="w"> </span>???<span class="w"> </span><span class="o">(</span>panic.roc<span class="o">)</span>
???:?:?:<span class="w"> </span>0x104921dbb<span class="w"> </span><span class="k">in</span><span class="w"> </span>???<span class="w"> </span><span class="o">(</span>panic.roc<span class="o">)</span>
???:?:?:<span class="w"> </span>0x10491f6a7<span class="w"> </span><span class="k">in</span><span class="w"> </span>???<span class="w"> </span><span class="o">(</span>panic.roc<span class="o">)</span>
???:?:?:<span class="w"> </span>0x10491f10b<span class="w"> </span><span class="k">in</span><span class="w"> </span>???<span class="w"> </span><span class="o">(</span>panic.roc<span class="o">)</span>
???:?:?:<span class="w"> </span>0x104918913<span class="w"> </span><span class="k">in</span><span class="w"> </span>???<span class="w"> </span><span class="o">(</span>panic.roc<span class="o">)</span>
???:?:?:<span class="w"> </span>0x18332ab97<span class="w"> </span><span class="k">in</span><span class="w"> </span>???<span class="w"> </span><span class="o">(</span>???<span class="o">)</span>
???:?:?:<span class="w"> </span>0x0<span class="w"> </span><span class="k">in</span><span class="w"> </span>???<span class="w"> </span><span class="o">(</span>???<span class="o">)</span>
error:<span class="w"> </span>Child<span class="w"> </span>process<span class="w"> </span>/var/folders/q3/lls0f9bd6x112cdkq8bgjldr0000gn/T/roc-28950/panic.roc<span class="w"> </span>killed<span class="w"> </span>by<span class="w"> </span>signal:<span class="w"> </span><span class="m">6</span>
error:<span class="w"> </span>Child<span class="w"> </span>process<span class="w"> </span>aborted<span class="w"> </span><span class="o">(</span>SIGABRT<span class="o">)</span>

aoc-2025/roc<span class="w"> </span>on<span class="w"> </span><span class="w"> </span>main<span class="w"> </span><span class="o">[</span>?⇡<span class="o">]</span><span class="w"> </span>on<span class="w"> </span>☁
❯<span class="w"> </span>roc<span class="w"> </span>panic.roc
<span class="m">11</span>-22
Part<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">(</span>demo<span class="o">)</span>:<span class="w"> </span><span class="m">33</span>
</code></pre></div>



<a name="562246213"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562246213" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562246213">(Dec 06 2025 at 14:47)</a>:</h4>
<p>what's the source code? I can take a look</p>



<a name="562246242"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562246242" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562246242">(Dec 06 2025 at 14:48)</a>:</h4>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="n">app</span><span class="w"> </span><span class="o">[</span><span class="n">main!</span><span class="o">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="ss">pf</span><span class="p">:</span><span class="w"> </span><span class="n">platform</span><span class="w"> </span><span class="s2">"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst"</span><span class="w"> </span><span class="p">}</span>

<span class="n">import</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Stdout</span>
<span class="n">import</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Stderr</span>

<span class="n">demo_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"11-22"</span>


<span class="nb">print</span><span class="o">!</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">Str</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{}</span>
<span class="nb">print</span><span class="o">!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">msg</span><span class="o">|</span><span class="w"> </span><span class="n">msg</span><span class="o">.</span><span class="n">split_on</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span><span class="o">.</span><span class="n">for_each!</span><span class="p">(</span><span class="no">Stdout</span><span class="o">.</span><span class="n">line!</span><span class="p">)</span>


<span class="n">parse_range</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">Str</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">((</span><span class="no">I64</span><span class="p">,</span><span class="w"> </span><span class="no">I64</span><span class="p">),</span><span class="w"> </span><span class="n">_</span><span class="p">)</span>
<span class="n">parse_range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">range_str</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">match</span><span class="w"> </span><span class="n">range_str</span><span class="o">.</span><span class="n">split_on</span><span class="p">(</span><span class="s2">"-"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">[</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="o">]</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Ok</span><span class="p">((</span><span class="no">I64</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="sc">?,</span><span class="w"> </span><span class="no">I64</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="sc">?)</span><span class="p">)</span>
<span class="w">        </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Err</span><span class="p">(</span><span class="no">InvalidRangeFormat</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>


<span class="n">is_invalid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">I64</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">Bool</span>
<span class="n">is_invalid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">x</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">.</span><span class="n">to_str</span><span class="p">()</span><span class="o">.</span><span class="n">to_utf8</span><span class="p">()</span>
<span class="w">    </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>
<span class="w">    </span><span class="n">mid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="sr">//</span><span class="w"> </span><span class="mi">2</span>

<span class="w">    </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="n">sublist</span><span class="p">({</span><span class="w"> </span><span class="ss">start</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">len</span><span class="p">:</span><span class="w"> </span><span class="n">mid</span><span class="w"> </span><span class="p">})</span>
<span class="w">    </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="n">sublist</span><span class="p">({</span><span class="w"> </span><span class="ss">start</span><span class="p">:</span><span class="w"> </span><span class="n">mid</span><span class="p">,</span><span class="w"> </span><span class="ss">len</span><span class="p">:</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">mid</span><span class="w"> </span><span class="p">})</span>

<span class="w">    </span><span class="n">left</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">right</span>
<span class="p">}</span>


<span class="n">part1!</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">Str</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">(</span><span class="no">I64</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span>
<span class="n">part1!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">input</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="vg">$sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">range_str</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">input</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span><span class="o">.</span><span class="n">split_on</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">print</span><span class="o">!</span><span class="p">(</span><span class="n">range_str</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">end</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse_range</span><span class="p">(</span><span class="n">range_str</span><span class="p">)?</span>

<span class="w">        </span><span class="n">var</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">is_invalid</span><span class="p">(</span><span class="vg">$x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="vg">$sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$sum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">$x</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="vg">$x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="no">Ok</span><span class="p">(</span><span class="vg">$sum</span><span class="p">)</span>
<span class="p">}</span>


<span class="n">repeat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">|</span><span class="w"> </span><span class="n">repeat_helper</span><span class="p">(</span><span class="o">[]</span><span class="p">,</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>

<span class="n">repeat_helper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">acc</span><span class="p">,</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">|</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">acc</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">repeat_helper</span><span class="p">(</span><span class="n">acc</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">list</span><span class="p">),</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">has_repeating_pattern</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">I64</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Bool</span>
<span class="n">has_repeating_pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">x</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">.</span><span class="n">to_str</span><span class="p">()</span><span class="o">.</span><span class="n">to_utf8</span><span class="p">()</span>
<span class="w">    </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>

<span class="w">    </span><span class="c1"># Check all divisors of n</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="vg">$d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="vg">$d</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="sr">//</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="vg">$d</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1"># Check if repeating the first d characters n/d times equals s</span>
<span class="w">            </span><span class="n">slice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="n">sublist</span><span class="p">({</span><span class="w"> </span><span class="ss">start</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">len</span><span class="p">:</span><span class="w"> </span><span class="vg">$d</span><span class="w"> </span><span class="p">})</span>
<span class="w">            </span><span class="n">repeated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">slice</span><span class="o">-&gt;</span><span class="n">repeat</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="sr">//</span><span class="w"> </span><span class="vg">$d</span><span class="p">)</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">repeated</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="no">True</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="vg">$d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$d</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="no">False</span>
<span class="p">}</span>


<span class="n">part2!</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">Str</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Try</span><span class="p">(</span><span class="no">I64</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span>
<span class="n">part2!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">input</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">var</span><span class="w"> </span><span class="vg">$sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">range_str</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">input</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span><span class="o">.</span><span class="n">split_on</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">print</span><span class="o">!</span><span class="p">(</span><span class="n">range_str</span><span class="p">)</span>
<span class="w">        </span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">end</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse_range</span><span class="p">(</span><span class="n">range_str</span><span class="p">)?</span>

<span class="w">        </span><span class="n">var</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">has_repeating_pattern</span><span class="p">(</span><span class="vg">$x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="vg">$sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$sum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="vg">$x</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="vg">$x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="vg">$x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="no">Ok</span><span class="p">(</span><span class="vg">$sum</span><span class="p">)</span>
<span class="p">}</span>


<span class="n">run!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">#print!("Part 1 (demo): ${part1!(demo_input.trim())?.to_str()}")</span>
<span class="w">    </span><span class="c1">#print!("Part 1: ${part1!(day_input.trim())?.to_str()}")</span>
<span class="w">    </span><span class="nb">print</span><span class="o">!</span><span class="p">(</span><span class="s2">"Part 2 (demo): ${part2!(demo_input.trim())?.to_str()}"</span><span class="p">)</span>
<span class="w">    </span><span class="c1">#print!("Part 2: ${part2!(day_input.trim())?.to_str()}")</span>
<span class="w">    </span><span class="no">Ok</span><span class="p">({})</span>
<span class="p">}</span>


<span class="n">main!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">_args</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">match</span><span class="w"> </span><span class="n">run!</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="no">Ok</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Ok</span><span class="p">({})</span>
<span class="w">        </span><span class="no">Err</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="no">Err</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<a name="562246410"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562246410" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562246410">(Dec 06 2025 at 14:51)</a>:</h4>
<p>on it!</p>



<a name="562247223"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562247223" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562247223">(Dec 06 2025 at 15:06)</a>:</h4>
<p>I don’t know if it’s related at all. But I got another invalid method receiver error:</p>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="n">main!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">List</span><span class="o">.</span><span class="n">len</span><span class="p">(</span><span class="o">[]</span><span class="p">)</span>
<span class="w">    </span><span class="n">_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="o">.</span><span class="n">to_str</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>



<a name="562248852"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562248852" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562248852">(Dec 06 2025 at 15:36)</a>:</h4>
<p>I managed to minimize it a little bit in case it helps, while still exhibiting this eisenbug behavior (I run it 4 times to make sure).</p>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="n">app</span><span class="w"> </span><span class="o">[</span><span class="n">main!</span><span class="o">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="ss">pf</span><span class="p">:</span><span class="w"> </span><span class="n">platform</span><span class="w"> </span><span class="s2">"https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.3/98T93wthPgoBRLYtPTT4RBBsQunrfDG94gihPf1zYYmE.tar.zst"</span><span class="w"> </span><span class="p">}</span>

<span class="n">import</span><span class="w"> </span><span class="n">pf</span><span class="o">.</span><span class="n">Stdout</span>

<span class="n">repeat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">|</span><span class="w"> </span><span class="n">repeat_helper</span><span class="p">(</span><span class="o">[]</span><span class="p">,</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>

<span class="n">repeat_helper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">acc</span><span class="p">,</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="o">|</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">acc</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">repeat_helper</span><span class="p">(</span><span class="n">acc</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">list</span><span class="p">),</span><span class="w"> </span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">main!</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">_args</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">s1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="no">U8</span><span class="p">)</span>
<span class="w">    </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>

<span class="w">    </span><span class="n">repeated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="no">U8</span><span class="p">)</span>
<span class="w">    </span><span class="n">repeated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="o">-&gt;</span><span class="n">repeat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="w">    </span><span class="n">s2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">List</span><span class="p">(</span><span class="no">U8</span><span class="p">)</span>
<span class="w">    </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="c1"># no crash if s2 = [1, 1, 1]</span>
<span class="w">    </span><span class="n">_ignore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeated</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">s2</span>
<span class="w">    </span><span class="no">Ok</span><span class="p">({})</span>
<span class="p">}</span>
</code></pre></div>



<a name="562249017"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562249017" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562249017">(Dec 06 2025 at 15:39)</a>:</h4>
<p>Oh, maybe important to mention <span class="user-mention" data-user-id="281383">@Richard Feldman</span> I’m having these panics AFTER the fix already done in <a href="https://github.com/roc-lang/roc/pull/8573">https://github.com/roc-lang/roc/pull/8573</a> which I rebased on your main after your merges today.</p>



<a name="562249098"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562249098" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562249098">(Dec 06 2025 at 15:41)</a>:</h4>
<p>So the fix for the declaration of the recursive function is already taken into account.</p>



<a name="562407810"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562407810" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562407810">(Dec 08 2025 at 08:21)</a>:</h4>
<p>Have you figured out or found a clue on both these issues <span class="user-mention" data-user-id="281383">@Richard Feldman</span> ?</p>



<a name="562416509"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562416509" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562416509">(Dec 08 2025 at 09:09)</a>:</h4>
<p>I made a PR with a fix for the InvalidMethodReceiver error raised by a bug in the return value of List.len <a href="https://github.com/roc-lang/roc/pull/8589">https://github.com/roc-lang/roc/pull/8589</a></p>



<a name="562432182"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562432182" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562432182">(Dec 08 2025 at 10:29)</a>:</h4>
<p>I haven’t found the reason for the non-deterministic alignment panic though :(</p>



<a name="562463000"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562463000" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562463000">(Dec 08 2025 at 13:11)</a>:</h4>
<p>Here is a summary of what I tried with Claude to find this.</p>
<p><a href="/user_uploads/22008/Ky_Y7TSDvRDfGDzUvkbgzXAE/ALIGNMENT_BUG_INVESTIGATION.md">ALIGNMENT_BUG_INVESTIGATION.md</a></p>



<a name="562481087"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562481087" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562481087">(Dec 08 2025 at 14:30)</a>:</h4>
<p>I'm getting closer in <a href="https://github.com/roc-lang/roc/pull/8580">https://github.com/roc-lang/roc/pull/8580</a> - there are a bunch of new debug assertions in there around alignment assumptions etc. - but haven't quite found the culprit yet</p>



<a name="562481254"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/Eisenbug%20panic%20%28half%20the%20time%29/near/562481254" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/Eisenbug.20panic.20.28half.20the.20time.29.html#562481254">(Dec 08 2025 at 14:31)</a>:</h4>
<p>Yeah same XD. I’ll leave it to you cause I’m overtime on this one without finding the bug.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>