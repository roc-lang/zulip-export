<html>
<head><meta charset="utf-8"><title>F32 -&gt; llvm i128 (Dec) inference/specialization bug · bugs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/index.html">bugs</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/F32.20-.3E.20llvm.20i128.20.28Dec.29.20inference.2Fspecialization.20bug.html">F32 -&gt; llvm i128 (Dec) inference/specialization bug</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="479062324"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/F32%20-%3E%20llvm%20i128%20%28Dec%29%20inference/specialization%20bug/near/479062324" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan G Knutson <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/F32.20-.3E.20llvm.20i128.20.28Dec.29.20inference.2Fspecialization.20bug.html#479062324">(Oct 26 2024 at 16:28)</a>:</h4>
<p>I hit what appears to be a compiler bug where inference got the wrong type for a local F32 leading to a compiler crash. Is that a known thing or should I try to make a minimal repro?</p>



<a name="479062932"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/F32%20-%3E%20llvm%20i128%20%28Dec%29%20inference/specialization%20bug/near/479062932" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/F32.20-.3E.20llvm.20i128.20.28Dec.29.20inference.2Fspecialization.20bug.html#479062932">(Oct 26 2024 at 16:37)</a>:</h4>
<p>I have never heard of that happening</p>



<a name="479062942"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/F32%20-%3E%20llvm%20i128%20%28Dec%29%20inference/specialization%20bug/near/479062942" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/F32.20-.3E.20llvm.20i128.20.28Dec.29.20inference.2Fspecialization.20bug.html#479062942">(Oct 26 2024 at 16:38)</a>:</h4>
<p>Minimal repro would be amazing</p>



<a name="479062982"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/F32%20-%3E%20llvm%20i128%20%28Dec%29%20inference/specialization%20bug/near/479062982" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/F32.20-.3E.20llvm.20i128.20.28Dec.29.20inference.2Fspecialization.20bug.html#479062982">(Oct 26 2024 at 16:38)</a>:</h4>
<p>Any sort of repro would be interesting</p>



<a name="479062990"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/F32%20-%3E%20llvm%20i128%20%28Dec%29%20inference/specialization%20bug/near/479062990" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/F32.20-.3E.20llvm.20i128.20.28Dec.29.20inference.2Fspecialization.20bug.html#479062990">(Oct 26 2024 at 16:38)</a>:</h4>
<p>Also, are you sure you had an F32 and not a Dec?</p>



<a name="479063262"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/F32%20-%3E%20llvm%20i128%20%28Dec%29%20inference/specialization%20bug/near/479063262" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan G Knutson <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/F32.20-.3E.20llvm.20i128.20.28Dec.29.20inference.2Fspecialization.20bug.html#479063262">(Oct 26 2024 at 16:42)</a>:</h4>
<p>I think I had a Dec, but expected it to be inferred F32 because I was passing it to a record that wanted an F32. It's entirely possible I'm doing something wrong.</p>



<a name="479063339"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/F32%20-%3E%20llvm%20i128%20%28Dec%29%20inference/specialization%20bug/near/479063339" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan G Knutson <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/F32.20-.3E.20llvm.20i128.20.28Dec.29.20inference.2Fspecialization.20bug.html#479063339">(Oct 26 2024 at 16:44)</a>:</h4>
<p>here's where I ran into it: <a href="https://github.com/lukewilliamboswell/roc-ray/pull/51">https://github.com/lukewilliamboswell/roc-ray/pull/51</a></p>



<a name="479064106"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/F32%20-%3E%20llvm%20i128%20%28Dec%29%20inference/specialization%20bug/near/479064106" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/F32.20-.3E.20llvm.20i128.20.28Dec.29.20inference.2Fspecialization.20bug.html#479064106">(Oct 26 2024 at 16:56)</a>:</h4>
<p>Yeah, if you can manage any sort of minimal repro, that would be great. It seems like roc failed to specialize a function correctly.  As such, it built one function with the default fractional type (Dec) and then ended up calling it with a <code>F32</code>.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>