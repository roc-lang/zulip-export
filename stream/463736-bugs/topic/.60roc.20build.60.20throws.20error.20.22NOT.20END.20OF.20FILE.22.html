<html>
<head><meta charset="utf-8"><title>`roc build` throws error &quot;NOT END OF FILE&quot; · bugs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/index.html">bugs</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html">`roc build` throws error &quot;NOT END OF FILE&quot;</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="496662824"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496662824" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Austin Davis <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496662824">(Jan 29 2025 at 23:28)</a>:</h4>
<p>The full text of the error is below:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$<span class="w"> </span>roc<span class="w"> </span>build
──<span class="w"> </span>NOT<span class="w"> </span>END<span class="w"> </span>OF<span class="w"> </span>FILE<span class="w"> </span><span class="k">in</span><span class="w"> </span>.../Hj-J_zxz7V9YurCSTFcFdu6cQJie4guzsPMUi5kBYUk/main.roc<span class="w"> </span>─

I<span class="w"> </span>expected<span class="w"> </span>to<span class="w"> </span>reach<span class="w"> </span>the<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>file,<span class="w"> </span>but<span class="w"> </span>got<span class="w"> </span>stuck<span class="w"> </span>here:

<span class="m">32</span>│<span class="w">  </span>main_for_host!<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">|</span>raw_args<span class="p">|</span>
</code></pre></div>
<p>This occurred after upgrading the compiler version and <code>basic-cli</code> platform version and then running <code>roc format --migrate</code></p>
<p>I have no idea what it means, but the language server is red-underlining a single character at a consistent arbitrary distance from the start of the file. If I delete text above the error error location, the error location remains at the same distance from the start of the file. The text it is pointing at seems to be completely irrelevant. The code will not compile at all in this state.</p>



<a name="496662911"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496662911" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496662911">(Jan 29 2025 at 23:29)</a>:</h4>
<p>This is saying your dependency is invalid</p>



<a name="496662933"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496662933" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496662933">(Jan 29 2025 at 23:29)</a>:</h4>
<p>It could definitely be more clear...</p>



<a name="496662949"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496662949" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496662949">(Jan 29 2025 at 23:29)</a>:</h4>
<p>Do you have packages in your header?</p>



<a name="496663100"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496663100" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Austin Davis <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496663100">(Jan 29 2025 at 23:30)</a>:</h4>
<p>Yes, but after removing them the same error is thrown</p>



<a name="496663755"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496663755" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Austin Davis <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496663755">(Jan 29 2025 at 23:36)</a>:</h4>
<p>I just created a new project with just a <code>main.roc</code> file with this code:</p>
<div class="codehilite"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/roc-lang/basic-cli/releases/download/0.19.0/Hj-J_zxz7V9YurCSTFcFdu6cQJie4guzsPMUi5kBYUk.tar.br&quot; }

import pf.Stdout

main! = \_args -&gt;
    Stdout.line! &quot;Hello, World!&quot;
</code></pre></div>
<p>And this throws the same error.</p>



<a name="496664208"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496664208" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Austin Davis <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496664208">(Jan 29 2025 at 23:40)</a>:</h4>
<p>I tried it again with the same (latest) compiler version and reverted the <code>basic-cli</code> package version to <code>0.18.0</code>, and builds with no issues. Seems like the issue must be with the <code>basic-cli</code> version.</p>
<p>Here is the link to the working release: <br>
<a href="https://github.com/roc-lang/basic-cli/releases/download/0.18.0/0APbwVN1_p1mJ96tXjaoiUCr8NBGamr8G8Ac_DrXR-o.tar.br">https://github.com/roc-lang/basic-cli/releases/download/0.18.0/0APbwVN1_p1mJ96tXjaoiUCr8NBGamr8G8Ac_DrXR-o.tar.br</a></p>



<a name="496664562"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496664562" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496664562">(Jan 29 2025 at 23:43)</a>:</h4>
<p><a href="https://github.com/roc-lang/basic-cli/releases/tag/0.19.0">https://github.com/roc-lang/basic-cli/releases/tag/0.19.0</a></p>



<a name="496664635"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496664635" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496664635">(Jan 29 2025 at 23:44)</a>:</h4>
<p>Try a more recent version of basic cli</p>



<a name="496664716"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496664716" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Austin Davis <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496664716">(Jan 29 2025 at 23:45)</a>:</h4>
<p>Sorry if I wasn't clear, but <code>0.19.0</code> is causing the build failure. <code>0.18.0</code> works for me.</p>



<a name="496664790"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496664790" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496664790">(Jan 29 2025 at 23:45)</a>:</h4>
<p>Which version of roc are you using? This one should be compatible with 0.19.0 <a href="https://github.com/roc-lang/roc/releases/tag/0.0.0-alpha2-rolling">https://github.com/roc-lang/roc/releases/tag/0.0.0-alpha2-rolling</a></p>



<a name="496664869"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496664869" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496664869">(Jan 29 2025 at 23:46)</a>:</h4>
<p>We are right now releasing a whole lot of changes, we'll be finished in about 24 hours</p>



<a name="496667134"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496667134" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Austin Davis <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496667134">(Jan 30 2025 at 00:03)</a>:</h4>
<p>Hmmm, it's possible I messed up when upgrading and was using the old compiler version.</p>



<a name="496966831"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%60roc%20build%60%20throws%20error%20%22NOT%20END%20OF%20FILE%22/near/496966831" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.60roc.20build.60.20throws.20error.20.22NOT.20END.20OF.20FILE.22.html#496966831">(Jan 31 2025 at 09:46)</a>:</h4>
<p>Your language server may have also been using an older version, in vscode there is a setting in the extension that points to the path of the roc_language_server binary.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>