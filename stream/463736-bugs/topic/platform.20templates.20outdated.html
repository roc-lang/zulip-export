<html>
<head><meta charset="utf-8"><title>platform templates outdated · bugs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/index.html">bugs</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html">platform templates outdated</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="480347644"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347644" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347644">(Nov 03 2024 at 23:43)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="515757">@Luke Boswell</span>, am I using your platform templates wrong, or did a Roc update in the last 6 months break them all?</p>
<div class="codehilite"><pre><span></span><code>jan@mackey roc-platform-template-rust % roc build.roc
── STATEMENT AFTER EXPRESSION in ...tFmNkvEICPErI9ptji_ySjicO6CkucY/Effect.roc ─

I just finished parsing an expression with a series of definitions,

and this line is indented as if it&#39;s intended to be part of that
expression:

 1│  hosted Effect
 2│      exposes [
 3│          Effect,
 4│          after,
 5│          args,
 6│          map,
 7│          always,
 8│          forever,
 9│          loop,
10│          dirList,
11│          dirCreate,
12│          dirCreateAll,
13│          dirDeleteEmpty,
14│          dirDeleteAll,
15│          envDict,
16│          envVar,
17│          cwd,
18│          setCwd,
19│          exePath,
20│          stdoutLine,
21│          stdoutWrite,
22│          stderrLine,
23│          stderrWrite,
24│          stdinLine,
25│          stdinBytes,
26│          ttyModeCanonical,
27│          ttyModeRaw,
28│          sendRequest,
29│          fileReadBytes,
30│          fileDelete,
31│          fileWriteUtf8,
32│          fileWriteBytes,
33│          pathType,
34│          posixTime,
35│          tcpConnect,
36│          tcpClose,
37│          tcpReadUpTo,
38│          tcpReadExactly,
39│          tcpReadUntil,
40│          tcpWrite,
41│          sleepMillis,
42│          commandStatus,
43│          commandOutput,
44│      ]
45│      imports [
46│          InternalHttp.{ Request, InternalResponse },
47│          InternalFile,
48│          InternalTcp,
49│          InternalCommand,
50│          InternalPath,
51│      ]
52│      generates Effect with [after, map, always, forever, loop]
53│
54│  stdoutLine : Str -&gt; Effect (Result {} Str)
     ^

However, I already saw the final expression in that series of
definitions.

Tip: An expression like `4`, `&quot;hello&quot;`, or `functionCall MyThing` is
like `return 4` in other programming languages. To me, it seems like
you did `return 4` followed by more code in the lines after, that code
would never be executed!

Tip: If you are working with `Task`, this error can happen if you
forgot a `!` somewhere.%
jan@mackey roc-platform-template-rust %
</code></pre></div>
<p>I get this error in all of them:<br>
<a href="https://github.com/lukewilliamboswell/roc-platform-template-c">https://github.com/lukewilliamboswell/roc-platform-template-c</a><br>
<a href="https://github.com/lukewilliamboswell/roc-platform-template-go">https://github.com/lukewilliamboswell/roc-platform-template-go</a><br>
<a href="https://github.com/lukewilliamboswell/roc-platform-template-rust">https://github.com/lukewilliamboswell/roc-platform-template-rust</a><br>
<a href="https://github.com/lukewilliamboswell/roc-platform-template-swift">https://github.com/lukewilliamboswell/roc-platform-template-swift</a><br>
<a href="https://github.com/lukewilliamboswell/roc-platform-template-zig">https://github.com/lukewilliamboswell/roc-platform-template-zig</a></p>



<a name="480347709"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347709" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347709">(Nov 03 2024 at 23:44)</a>:</h4>
<p>They're definitely outdated.</p>



<a name="480347718"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347718" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347718">(Nov 03 2024 at 23:44)</a>:</h4>
<p>I have been planning on giving them some love/uplift once purity inference lands. Though I wasn't tracking they were broken</p>



<a name="480347738"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347738" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347738">(Nov 03 2024 at 23:45)</a>:</h4>
<p>After purity inference the host API get's so much nicer</p>



<a name="480347803"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347803" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347803">(Nov 03 2024 at 23:46)</a>:</h4>
<p>I'm also thinking of killing the repo <a href="https://github.com/lukewilliamboswell/roc-glue-code-gen">https://github.com/lukewilliamboswell/roc-glue-code-gen</a> and removing all references to that. It was an idea I had but probably a bit too ambitious to try and get Glue scripts for all the different languages.</p>



<a name="480347826"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347826" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347826">(Nov 03 2024 at 23:46)</a>:</h4>
<p>My recommendation for rust platforms now is just to pin to the roc repo <code>roc_std</code> etc</p>



<a name="480347851"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347851" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347851">(Nov 03 2024 at 23:47)</a>:</h4>
<p>And for zig, that's still a bit hand rolled. You can copy-paste the builtins, but there is a lot of stuff in there that's not needed. So it's not really a std library implementation.</p>



<a name="480347924"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347924" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347924">(Nov 03 2024 at 23:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/463736-bugs/topic/platform.20templates.20outdated.3F/near/480347826">said</a>:</p>
<blockquote>
<p>My recommendation for rust platforms now is just to pin to the roc repo <code>roc_std</code> etc</p>
</blockquote>
<p>Sweet, can you link me an example of this to copy/paste?</p>



<a name="480347935"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347935" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347935">(Nov 03 2024 at 23:48)</a>:</h4>
<p>For the others, everything needs to be hand rolled. Though it's totally doable for simple types like <code>u64</code>, <code>i64</code> and structs etc</p>



<a name="480347955"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347955" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347955">(Nov 03 2024 at 23:48)</a>:</h4>
<p><a href="https://github.com/lukewilliamboswell/roc-ray/blob/main/Cargo.toml">https://github.com/lukewilliamboswell/roc-ray/blob/main/Cargo.toml</a></p>



<a name="480347961"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347961" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347961">(Nov 03 2024 at 23:48)</a>:</h4>
<p>Let me know if there's anything actionable I can help with <a href="#narrow/channel/316715-contributing/topic/Help.20upgrade.2Ftest.20purity.20inference/near/478391839">https://roc.zulipchat.com/#narrow/channel/316715-contributing/topic/Help.20upgrade.2Ftest.20purity.20inference/near/478391839</a> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="480347997"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480347997" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480347997">(Nov 03 2024 at 23:49)</a>:</h4>
<p><a href="https://github.com/lukewilliamboswell/roc-ray/blob/main/Cargo.toml">https://github.com/lukewilliamboswell/roc-ray/blob/main/Cargo.toml</a></p>
<p>I've been spending most of my time lately in roc-ray... so that's all up to date. The purity-inference branch is the bleeding edge.<br>
Sweet, can you link me an example of this to copy/paste?</p>



<a name="480348180"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480348180" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480348180">(Nov 03 2024 at 23:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="462053">JanCVanB</span> <a href="#narrow/channel/463736-bugs/topic/platform.20templates.20outdated.3F/near/480347961">said</a>:</p>
<blockquote>
<p>Let me know if there's anything actionable I can help with <a href="#narrow/channel/316715-contributing/topic/Help.20upgrade.2Ftest.20purity.20inference/near/478391839">https://roc.zulipchat.com/#narrow/channel/316715-contributing/topic/Help.20upgrade.2Ftest.20purity.20inference/near/478391839</a> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>
</blockquote>
<p>My general thoughts on this is that without early return, <code>try</code> and purity-inference in the nightlies, it's going to be a challenge to get basic-cli upgraded. The examples lean very heavily on unwrapping Results. I've done the platform and the host, so it's just the examples now that need doing. It should only be an hour or so to do once everything else is ready.</p>



<a name="480348426"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480348426" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480348426">(Nov 03 2024 at 23:57)</a>:</h4>
<p>Overwriting <code>roc-platform-template-rust/Cargo.toml</code> with <code>roc-ray/Cargo.toml</code> doesn't influence that <code>roc build.roc</code> error. Did you have a nontrivial patch in mind?<br>
<a href="/user_uploads/22008/u2W0nLUFNo7HOnNdGfCzNmsL/Screen-Shot-2024-11-03-at-4.55.20-PM.png">Screen Shot 2024-11-03 at 4.55.20 PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/u2W0nLUFNo7HOnNdGfCzNmsL/Screen-Shot-2024-11-03-at-4.55.20-PM.png" title="Screen Shot 2024-11-03 at 4.55.20 PM.png"><img data-original-dimensions="1920x1200" src="/user_uploads/thumbnail/22008/u2W0nLUFNo7HOnNdGfCzNmsL/Screen-Shot-2024-11-03-at-4.55.20-PM.png/840x560.webp"></a></div>



<a name="480349123"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480349123" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480349123">(Nov 04 2024 at 00:06)</a>:</h4>
<p>Sorry, I didn't mean copy the whole thing... I was just referring to this part</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="n">roc_std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"https://github.com/roc-lang/roc.git"</span><span class="w"> </span><span class="p">}</span>
<span class="n">roc_std_heap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"https://github.com/roc-lang/roc.git"</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>



<a name="480349184"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480349184" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480349184">(Nov 04 2024 at 00:07)</a>:</h4>
<p>Still nope <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span><br>
<a href="/user_uploads/22008/bTs57rDQMB2ZqY5JD2pSOpgN/Screen-Shot-2024-11-03-at-5.07.11-PM.png">Screen Shot 2024-11-03 at 5.07.11 PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/bTs57rDQMB2ZqY5JD2pSOpgN/Screen-Shot-2024-11-03-at-5.07.11-PM.png" title="Screen Shot 2024-11-03 at 5.07.11 PM.png"><img data-original-dimensions="1920x1200" src="/user_uploads/thumbnail/22008/bTs57rDQMB2ZqY5JD2pSOpgN/Screen-Shot-2024-11-03-at-5.07.11-PM.png/840x560.webp"></a></div>



<a name="480349186"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480349186" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480349186">(Nov 04 2024 at 00:07)</a>:</h4>
<p>Currently the crate <code>roc_host</code> get's it's <code>roc_std</code> dependency from another crate in the same workspace (in the repo) but instead I think it's better to just point at the roc repo instead of vendoring it</p>



<a name="480349233"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480349233" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480349233">(Nov 04 2024 at 00:08)</a>:</h4>
<p>Yeah, and then in the roc_host <code>Cargo.toml</code> you will need to use the workspace dependency</p>



<a name="480349250"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480349250" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480349250">(Nov 04 2024 at 00:08)</a>:</h4>
<p>Or it is probably easier just to put that dep in the <code>crates/roc_host/Cargo.toml</code></p>



<a name="480349259"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480349259" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480349259">(Nov 04 2024 at 00:08)</a>:</h4>
<p>Instead of the root workspace <code>Cargo.toml</code></p>



<a name="480349283"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480349283" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480349283">(Nov 04 2024 at 00:09)</a>:</h4>
<p>We won't need the roc_std_heap dependency for the template</p>



<a name="480349335"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480349335" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480349335">(Nov 04 2024 at 00:10)</a>:</h4>
<p>Still nope?<br>
<a href="/user_uploads/22008/coxV_QPQtwFOJRz1IBv6PRIT/Screen-Shot-2024-11-03-at-5.09.48-PM.png">Screen Shot 2024-11-03 at 5.09.48 PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/coxV_QPQtwFOJRz1IBv6PRIT/Screen-Shot-2024-11-03-at-5.09.48-PM.png" title="Screen Shot 2024-11-03 at 5.09.48 PM.png"><img data-original-dimensions="1920x1200" src="/user_uploads/thumbnail/22008/coxV_QPQtwFOJRz1IBv6PRIT/Screen-Shot-2024-11-03-at-5.09.48-PM.png/840x560.webp"></a></div>



<a name="480349936"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480349936" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480349936">(Nov 04 2024 at 00:21)</a>:</h4>
<p>Yay, the fix you just pushed yields a much later error!</p>
<div class="codehilite"><pre><span></span><code>jan@mackey roc-platform-template-rust % git pull
remote: Enumerating objects: 24, done.
remote: Counting objects: 100% (24/24), done.
remote: Compressing objects: 100% (6/6), done.
remote: Total 14 (delta 8), reused 14 (delta 8), pack-reused 0 (from 0)
Unpacking objects: 100% (14/14), 2.85 KiB | 224.00 KiB/s, done.
From https://github.com/lukewilliamboswell/roc-platform-template-rust
   9e44526..399fc2d  main       -&gt; origin/main
Updating 9e44526..399fc2d
Fast-forward
 README.md                  |  4 ----
 build.roc                  |  7 +------
 bundle.sh                  | 24 ++++++++++++++++++++++++
 crates/roc_host/Cargo.toml |  2 +-
 glue.roc                   | 27 ---------------------------
 platform/Effect.roc        | 10 +---------
 platform/Stdout.roc        |  4 +---
 platform/main.roc          |  4 ++--
 8 files changed, 30 insertions(+), 52 deletions(-)
 create mode 100644 bundle.sh
 delete mode 100644 glue.roc
jan@mackey roc-platform-template-rust % roc build.roc
Downloading https://github.com/roc-lang/basic-cli/releases/download/0.15.0/SlwdbJ-3GR7uBWQo6zlmYWNYOxnvo8r6YABXD-45UOw.tar.br
    into /Users/jan/.cache/roc/packages

[8.6 / 8.6 MB]
BUILD INFO: Geting native target...
BUILD INFO: Building cargo; mode: DEBUG for target MacosX64...
    Updating crates.io index
    Updating git repository `https://github.com/roc-lang/roc.git`
warning: skipping duplicate package `host` found at `/Users/jan/.cargo/git/checkouts/roc-f2007fde281427d6/69dd8d7/examples/glue/rust-platform`
warning: skipping duplicate package `host` found at `/Users/jan/.cargo/git/checkouts/roc-f2007fde281427d6/69dd8d7/examples/cli/false-interpreter/platform`
warning: skipping duplicate package `host` found at `/Users/jan/.cargo/git/checkouts/roc-f2007fde281427d6/69dd8d7/examples/platform-switching/rust-platform`
  Downloaded arrayvec v0.7.6
  Downloaded libc v0.2.150
  Downloaded 2 crates (750.6 KB) in 0.42s
   Compiling libc v0.2.150
   Compiling static_assertions v1.1.0
   Compiling arrayvec v0.7.6
   Compiling roc_host v0.0.1 (/Users/jan/_code/_roc/roc-platform-template-rust/crates/roc_host)
   Compiling roc_std v0.0.1 (https://github.com/roc-lang/roc.git#69dd8d77)
error[E0658]: labels on blocks are unstable
   --&gt; /Users/jan/.cargo/git/checkouts/roc-f2007fde281427d6/69dd8d7/crates/roc_std/src/roc_str.rs:630:21
    |
630 |         let start = &#39;blk: {
    |                     ^^^^
    |
    = note: see issue #48594 &lt;https://github.com/rust-lang/rust/issues/48594&gt; for more information

error[E0658]: labels on blocks are unstable
   --&gt; /Users/jan/.cargo/git/checkouts/roc-f2007fde281427d6/69dd8d7/crates/roc_std/src/roc_str.rs:642:19
    |
642 |         let end = &#39;blk: {
    |                   ^^^^
    |
    = note: see issue #48594 &lt;https://github.com/rust-lang/rust/issues/48594&gt; for more information

For more information about this error, try `rustc --explain E0658`.
error: could not compile `roc_std` due to 2 previous errors
warning: build failed, waiting for other jobs to finish...
Program exited with error:
    (ErrBuildingRustTarget (CmdError (ExitCode -99)))

Tip: If you do not want to exit on this error, use `Task.mapErr` to handle the error.
Docs for `Task.mapErr`: &lt;https://www.roc-lang.org/packages/basic-cli/0.15.0/Task#mapErr&gt;
jan@mackey roc-platform-template-rust %
</code></pre></div>



<a name="480350012"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480350012" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480350012">(Nov 04 2024 at 00:23)</a>:</h4>
<p>No urgency on this - I'll take a look at your purity-inference work in roc-ray like you suggested via DM <span aria-label="dancing" class="emoji emoji-1f57a" role="img" title="dancing">:dancing:</span></p>
<p>Update: I'll try again tomorrow to build the Roc compiler from source (on the purity-inference branch) on my other laptop running Fedora, cause this macbook is sad.</p>



<a name="480801834"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480801834" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480801834">(Nov 05 2024 at 21:20)</a>:</h4>
<p>Hey, does anyone know why might my <code>cargo build</code> be freezing at the <code>roc_host</code> build step of <code>roc-platform-template-rust</code> after trying to make some purity-inference updates? <a href="https://github.com/lukewilliamboswell/roc-platform-template-rust/pull/2/files">https://github.com/lukewilliamboswell/roc-platform-template-rust/pull/2/files</a></p>
<p>It's not just the <code>, branch = "purity-inference"</code> change in <code>Cargo.toml</code>, because the build succeeds if that's the only local change.</p>



<a name="480803206"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480803206" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480803206">(Nov 05 2024 at 21:31)</a>:</h4>
<p>What happens if you <code>cargo check</code>?</p>



<a name="480824238"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/platform%20templates%20outdated/near/480824238" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/platform.20templates.20outdated.html#480824238">(Nov 06 2024 at 01:03)</a>:</h4>
<p>The same:</p>
<div class="codehilite"><pre><span></span><code>[jan@framey roc-platform-template-rust]$ cargo check
    Checking arrayvec v0.7.6
    Checking static_assertions v1.1.0
    Checking libc v0.2.150
   Compiling roc_host v0.0.1 (/home/jan/_code/_roc/roc-platform-template-rust/crates/roc_host)
    Checking roc_std v0.0.1 (https://github.com/roc-lang/roc.git?branch=purity-inference#2b8d9aa4)
^C  Building [================&gt;           ] 7/11: roc_host(build)
[jan@framey roc-platform-template-rust]$ git switch main
Switched to branch &#39;main&#39;
[jan@framey roc-platform-template-rust]$ cargo check
    Updating git repository `https://github.com/roc-lang/roc.git`
     Locking 1 package to latest compatible version
      Adding roc_std v0.0.1 (https://github.com/roc-lang/roc.git#544a5dcf)
   Compiling roc_host v0.0.1 (/home/jan/_code/_roc/roc-platform-template-rust/crates/roc_host)
    Checking roc_std v0.0.1 (https://github.com/roc-lang/roc.git#544a5dcf)
warning: roc_host@0.0.1: SUCCESSFULLY BUILT APP STUB DYNAMIC LIBRARY &quot;/home/jan/_code/_roc/roc-platform-template-rust/platform/libapp.so&quot;
    Checking host v0.0.1 (/home/jan/_code/_roc/roc-platform-template-rust/crates/roc_host_lib)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 1.82s
[jan@framey roc-platform-template-rust]$
</code></pre></div>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>