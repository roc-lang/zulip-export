<html>
<head><meta charset="utf-8"><title>✔ Crash on trivial program · bugs · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/index.html">bugs</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.E2.9C.94.20Crash.20on.20trivial.20program.html">✔ Crash on trivial program</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="563438040"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%E2%9C%94%20Crash%20on%20trivial%20program/near/563438040" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.E2.9C.94.20Crash.20on.20trivial.20program.html#563438040">(Dec 12 2025 at 10:17)</a>:</h4>
<p>This trivial program crashes for me (latest main): </p>
<div class="codehilite"><pre><span></span><code>app [main!] { pf: platform &quot;https://github.com/lukewilliamboswell/roc-platform-template-zig/releases/download/0.6/2BfGn4M9uWJNhDVeMghGeXNVDFijMfPsmmVeo6M4QjKX.tar.zst&quot; }

main! = |_| {
    Ok({})
}
</code></pre></div>
<div class="spoiler-block"><div class="spoiler-header">
<p>crash output</p>
</div><div class="spoiler-content" aria-hidden="true">
<p>thread 93129 panic: reached unreachable code<br>
/home/vscode/.vscode-remote/data/User/globalStorage/ziglang.vscode-zig/zig/x86_64-linux-0.15.2/lib/std/debug.zig:559:14: 0x445d179 in assert (std.zig)<br>
    if (!ok) unreachable; // assertion failure<br>
             ^<br>
/workspaces/roc/src/canonicalize/NodeStore.zig:1261:21: 0x4a97e07 in getTypeHeader (mod.zig)<br>
    std.debug.assert(node.tag == .type_header);<br>
                    ^<br>
/workspaces/roc/src/check/Check.zig:5536:79: 0x4b822cf in createImportMapping (mod.zig)<br>
                                const header = builtin_env.store.getTypeHeader(decl.header);<br>
                                                                              ^<br>
/workspaces/roc/src/check/Check.zig:177:49: 0x492d393 in init (mod.zig)<br>
    var import_mapping = try createImportMapping(<br>
                                                ^<br>
/workspaces/roc/src/cli/main.zig:2208:33: 0x457a69e in compileModuleToSharedMemory (main.zig)<br>
    var checker = try Check.init(shm_allocator, &amp;env.types, &amp;env, &amp;imported_envs, &amp;check_module_envs_map, &amp;env.store.regions, builtin_ctx);<br>
                                ^<br>
/workspaces/roc/src/cli/main.zig:1699:63: 0x45931bd in setupSharedMemoryWithModuleEnv (main.zig)<br>
        const module_env_ptr = try compileModuleToSharedMemory(<br>
                                                              ^<br>
/workspaces/roc/src/cli/main.zig<span aria-label="1234" class="emoji emoji-1f522" role="img" title="1234">:1234:</span>54: 0x45aa464 in rocRun (main.zig)<br>
    const shm_result = setupSharedMemoryWithModuleEnv(allocs, args.path, args.allow_errors) catch |err| {<br>
                                                     ^<br>
/workspaces/roc/src/cli/main.zig:739:23: 0x486ebdb in mainArgs (main.zig)<br>
            try rocRun(allocs, run_args);<br>
                      ^<br>
/workspaces/roc/src/cli/main.zig:678:13: 0x4871388 in main (main.zig)<br>
    mainArgs(&amp;allocs, args) catch {<br>
            ^<br>
/home/vscode/.vscode-remote/data/User/globalStorage/ziglang.vscode-zig/zig/x86_64-linux-0.15.2/lib/std/start.zig:627:37: 0x4871941 in main (std.zig)<br>
            const result = root.main() catch |err| {<br>
                                    ^<br>
/home/vscode/.vscode-remote/data/User/globalStorage/ziglang.vscode-zig/zig/x86_64-linux-0.15.2/lib/libc/musl/src/env/__libc_start_main.c:95:7: 0x9617fd5 in libc_start_main_stage2 (/home/vscode/.vscode-remote/data/User/globalStorage/ziglang.vscode-zig/zig/x86_64-linux-0.15.2/lib/libc/musl/src/env/__libc_start_main.c)<br>
 exit(main(argc, argv, envp));<br>
      ^<br>
???:?:?: 0x9548931 in ??? (???)<br>
Unwind error at address <code>exe:0x9548931</code> (error.MissingFDE), trace may be incomplete</p>
<p>Aborted (core dumped)</p>
</div></div>



<a name="563441467"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%E2%9C%94%20Crash%20on%20trivial%20program/near/563441467" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.E2.9C.94.20Crash.20on.20trivial.20program.html#563441467">(Dec 12 2025 at 10:35)</a>:</h4>
<p>I'll take a look right now</p>



<a name="563442733"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%E2%9C%94%20Crash%20on%20trivial%20program/near/563442733" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.E2.9C.94.20Crash.20on.20trivial.20program.html#563442733">(Dec 12 2025 at 10:41)</a>:</h4>
<p>I ran into a different high priority issue, will come back to this after.</p>



<a name="563445500"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%E2%9C%94%20Crash%20on%20trivial%20program/near/563445500" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.E2.9C.94.20Crash.20on.20trivial.20program.html#563445500">(Dec 12 2025 at 10:53)</a>:</h4>
<p>clean build fixed it, seems to have been an issue with the zig cache or something.</p>



<a name="563445503"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463736-bugs/topic/%E2%9C%94%20Crash%20on%20trivial%20program/near/563445503" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/463736-bugs/topic/.E2.9C.94.20Crash.20on.20trivial.20program.html#563445503">(Dec 12 2025 at 10:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="559412">Fabian Schmalzried</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>