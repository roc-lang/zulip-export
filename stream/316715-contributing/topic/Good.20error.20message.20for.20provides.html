<html>
<head><meta charset="utf-8"><title>Good error message for provides · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html">Good error message for provides</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="370142290"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370142290" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370142290">(Jun 27 2023 at 17:06)</a>:</h4>
<p>I am looking at good first issues. I saw <a href="https://github.com/roc-lang/roc/issues/5516">this one</a>. <span class="user-mention" data-user-id="361169">@Anton</span> You raised this one. I think I have a solution but I'm not sure. Do I just submit a PR to review, or do you want to discuss here first?</p>



<a name="370143629"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370143629" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370143629">(Jun 27 2023 at 17:11)</a>:</h4>
<p>I just changed ine 3472 from <code>crates/reporting/src/error/parse.rs</code> to be <code>        EProvides::Provides(pos) | EProvides::IndentProvides(pos) =&gt; {</code>. I figured it should be the same error message</p>



<a name="370144610"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370144610" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370144610">(Jun 27 2023 at 17:14)</a>:</h4>
<p>The last line in the error message does not have a newline however, which means the next shell prompt will be on the same line as the last line in the error. This is not ideal</p>



<a name="370154079"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370154079" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370154079">(Jun 27 2023 at 17:45)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="497765">@Kilian Vounckx</span>, that approach sounds good. <span class="user-mention" data-user-id="281543">@Folkert de Vries</span> do you know how we can add a newline at the end <a href="https://github.com/roc-lang/roc/blob/7b19a1552c4579df936be4d7df9e8e3e94293716/crates/reporting/src/error/parse.rs#L3476">here</a>?</p>



<a name="370154238"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370154238" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370154238">(Jun 27 2023 at 17:45)</a>:</h4>
<p>is it this message specifically, or in general?</p>



<a name="370155375"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370155375" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370155375">(Jun 27 2023 at 17:49)</a>:</h4>
<p>This message specifically, I suppose</p>



<a name="370156133"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370156133" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370156133">(Jun 27 2023 at 17:52)</a>:</h4>
<p><code>EGeneratesWith::Identifier(pos)</code><br>
This tag has the same issue, so I think it is at least two, so I suppose in general</p>



<a name="370156179"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370156179" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370156179">(Jun 27 2023 at 17:52)</a>:</h4>
<p>but some get it right</p>



<a name="370156186"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370156186" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370156186">(Jun 27 2023 at 17:52)</a>:</h4>
<p>right?</p>



<a name="370156273"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370156273" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370156273">(Jun 27 2023 at 17:52)</a>:</h4>
<p>I don't know how to trigger all of them</p>



<a name="370156395"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370156395" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370156395">(Jun 27 2023 at 17:53)</a>:</h4>
<p>messing up header parsing is relatively easy</p>



<a name="370156438"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370156438" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370156438">(Jun 27 2023 at 17:53)</a>:</h4>
<p>make up some fancy new infix operator that does not parse, etc</p>



<a name="370156483"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370156483" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370156483">(Jun 27 2023 at 17:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="497765">Kilian Vounckx</span> <a href="#narrow/stream/316715-contributing/topic/Good.20error.20message.20for.20provides/near/370156133">said</a>:</p>
<blockquote>
<p><code>EGeneratesWith::Identifier(pos)</code><br>
This tag has the same issue, so I think it is at least two, so I suppose in general</p>
</blockquote>
<p>Oh I meant this one <code>EProvides::Identifier(pos)</code></p>



<a name="370156488"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370156488" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370156488">(Jun 27 2023 at 17:53)</a>:</h4>
<p>also we have tests for the reporting of parse errors</p>



<a name="370157528"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370157528" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370157528">(Jun 27 2023 at 17:57)</a>:</h4>
<p>This one <code>EExposes::Identifier(pos)</code> for interface <code>exposes</code> lists has the same issue again</p>



<a name="370157665"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370157665" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370157665">(Jun 27 2023 at 17:57)</a>:</h4>
<p>I'll try to find a correct one</p>



<a name="370159099"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370159099" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370159099">(Jun 27 2023 at 18:02)</a>:</h4>
<p>I did find another issue when looking:</p>
<div class="codehilite" data-code-language="roc"><pre><span></span><code>interface Foo
    exposes []
    imports [foo]
</code></pre></div>
<p>When running <code>roc check Foo.roc</code> on this file, it gives an <code>EImports::ListEnd</code> error instead of an <code>EImports::ModuleName</code> error.</p>



<a name="370159343"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370159343" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370159343">(Jun 27 2023 at 18:02)</a>:</h4>
<p>Its error message is</p>
<div class="codehilite"><pre><span></span><code>── WEIRD IMPORTS ───────────────────────────────────────────────────── Foo.roc ─

I am partway through parsing a imports list, but I got stuck here:

2│      exposes []
3│      imports [foo]
                 ^

I am expecting a comma or end of list, like
    imports [Shape, Vector]
</code></pre></div>



<a name="370159498"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370159498" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370159498">(Jun 27 2023 at 18:03)</a>:</h4>
<p>Again with no newline</p>



<a name="370161788"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370161788" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370161788">(Jun 27 2023 at 18:10)</a>:</h4>
<p>After trying between five or ten which I knew how to trigger at random, all of them did not have the newline, so I think it is a general issue</p>



<a name="370161898"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370161898" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370161898">(Jun 27 2023 at 18:11)</a>:</h4>
<p>I will finish the original issue about the specific error message, and I think the newlines is a new issue</p>



<a name="370161977"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370161977" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370161977">(Jun 27 2023 at 18:11)</a>:</h4>
<p>do e.g. type checker reports also have this problem?</p>



<a name="370162547"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370162547" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370162547">(Jun 27 2023 at 18:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="497765">Kilian Vounckx</span> <a href="#narrow/stream/316715-contributing/topic/Good.20error.20message.20for.20provides/near/370161898">said</a>:</p>
<blockquote>
<p>I will finish the original issue about the specific error message, and I think the newlines is a new issue</p>
</blockquote>
<p><span class="user-mention" data-user-id="361169">@Anton</span> <a href="https://github.com/roc-lang/roc/pull/5623">PR submitted</a></p>



<a name="370162602"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370162602" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370162602">(Jun 27 2023 at 18:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281543">Folkert de Vries</span> <a href="#narrow/stream/316715-contributing/topic/Good.20error.20message.20for.20provides/near/370161977">said</a>:</p>
<blockquote>
<p>do e.g. type checker reports also have this problem?</p>
</blockquote>
<p>I'll try to find some</p>



<a name="370163766"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370163766" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370163766">(Jun 27 2023 at 18:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281543">Folkert de Vries</span> <a href="#narrow/stream/316715-contributing/topic/Good.20error.20message.20for.20provides/near/370161977">said</a>:</p>
<blockquote>
<p>do e.g. type checker reports also have this problem?</p>
</blockquote>
<div class="codehilite"><pre><span></span><code>interface Foo
    exposes []
    imports []

foo : Str -&gt; Str
foo = \x -&gt; x + 1
</code></pre></div>
<p>The type error on this file has a newline</p>



<a name="370164075"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370164075" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370164075">(Jun 27 2023 at 18:18)</a>:</h4>
<p>ok, so there is some inconsistency between parse and type error formatting, right?</p>



<a name="370164804"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370164804" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370164804">(Jun 27 2023 at 18:21)</a>:</h4>
<p>I think so</p>



<a name="370173473"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370173473" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370173473">(Jun 27 2023 at 18:53)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> I added the test</p>



<a name="370177451"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370177451" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370177451">(Jun 27 2023 at 19:08)</a>:</h4>
<p>btw <a href="https://github.com/roc-lang/roc/pull/5607">https://github.com/roc-lang/roc/pull/5607</a> may also be relevant here</p>



<a name="370177562"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/370177562" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#370177562">(Jun 27 2023 at 19:08)</a>:</h4>
<p>that one is ready to merge, but maybe can be folded into something bigger</p>



<a name="371986136"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Good%20error%20message%20for%20provides/near/371986136" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kilian Vounckx <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Good.20error.20message.20for.20provides.html#371986136">(Jul 03 2023 at 12:27)</a>:</h4>
<p><span class="user-mention" data-user-id="281543">@Folkert de Vries</span> I was doing some unrelated stuff and found the following related issue.</p>
<p>This file is saved in <code>Foo.roc</code>:</p>
<div class="codehilite" data-code-language="roc"><pre><span></span><code>interface Foo
    exposes []
    imports []

foo : F64
foo = 42

bar : F64
bar = 31

expect
    foo != bar
</code></pre></div>
<p>When running <code>roc check Foo.roc</code>, the error message has a newline at the end. However, when running <code>roc test Foo.roc</code>, the error does not have the newline. The only difference is checking vs testing</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>