<html>
<head><meta charset="utf-8"><title>builtins · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html">builtins</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="302672335"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302672335" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prajwal S N <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302672335">(Oct 06 2022 at 14:58)</a>:</h4>
<p>I noticed that the structure of <code>crates/compiler/builtins/</code> has considerably changed since <a href="https://github.com/roc-lang/roc/pull/2386">#2386</a> and similar PRs. It looks like <code>std.rs</code> has been split up into <code>roc/*.roc</code> files. Wondering if the README should be updated with these changes so that new contributors can find their way around a little more easily :)</p>



<a name="302673081"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302673081" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302673081">(Oct 06 2022 at 15:01)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/2386">https://github.com/roc-lang/roc/pull/2386</a></p>



<a name="302673252"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302673252" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302673252">(Oct 06 2022 at 15:01)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/blob/main/crates/compiler/builtins/README.md">https://github.com/roc-lang/roc/blob/main/crates/compiler/builtins/README.md</a></p>



<a name="302673429"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302673429" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jan kili <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302673429">(Oct 06 2022 at 15:02)</a>:</h4>
<p>Yeah, if you see any out-of-date info in there, please submit a PR! :)</p>



<a name="302712893"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302712893" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prajwal S N <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302712893">(Oct 06 2022 at 18:13)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/664">https://github.com/roc-lang/roc/issues/664</a> mentions <code>withCapacity</code> under String builtins. A <code>withCapacity()</code> function is already available in <a href="https://github.com/roc-lang/roc/blob/main/crates/compiler/builtins/bitcode/src/str.zig#L96"><code>str.zig</code></a> which allocates an empty string of the specified capacity.  Is this the same feature? Or are we looking for something different?</p>



<a name="302717584"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302717584" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prajwal S N <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302717584">(Oct 06 2022 at 18:40)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/4227">https://github.com/roc-lang/roc/pull/4227</a><br>
Could someone please take a look at this</p>



<a name="302719687"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302719687" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302719687">(Oct 06 2022 at 18:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="551190">Prajwal S N</span> <a href="#narrow/stream/316715-contributing/topic/builtins/near/302712893">said</a>:</p>
<blockquote>
<p><a href="https://github.com/roc-lang/roc/issues/664">https://github.com/roc-lang/roc/issues/664</a> mentions <code>withCapacity</code> under String builtins. A <code>withCapacity()</code> function is already available in <a href="https://github.com/roc-lang/roc/blob/main/crates/compiler/builtins/bitcode/src/str.zig#L96"><code>str.zig</code></a> which allocates an empty string of the specified capacity.  Is this the same feature? Or are we looking for something different?</p>
</blockquote>
<p>Yeah, that's the feature. However it needs to be exposed to userspace; <code>Str.roc</code> does not currently expose a <code>Str.withCapacity</code> function.</p>



<a name="302742164"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302742164" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302742164">(Oct 06 2022 at 21:14)</a>:</h4>
<p>About bultins, is a <code>Dict.update</code> planed?<br>
Something like this:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">update</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Dict</span><span class="w"> </span><span class="nv">k</span><span class="w"> </span><span class="nv">v</span><span class="p">,</span><span class="w"> </span><span class="nv">k</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">Result</span><span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="p">[</span><span class="kt">KeyNotFound</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">v</span><span class="p">)</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Dict</span><span class="w"> </span><span class="nv">k</span><span class="w"> </span><span class="nv">v</span><span class="w"></span>
<span class="nv">update</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">dict</span><span class="p">,</span><span class="w"> </span><span class="nv">key</span><span class="p">,</span><span class="w"> </span><span class="nv">transform</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="kt">Dict</span><span class="nf">.</span><span class="nv">insert</span><span class="w"> </span><span class="nv">dict</span><span class="w"> </span><span class="nv">key</span><span class="w"> </span><span class="p">(</span><span class="nv">transform</span><span class="w"> </span><span class="p">(</span><span class="kt">Dict</span><span class="nf">.</span><span class="nv">get</span><span class="w"> </span><span class="nv">dict</span><span class="w"> </span><span class="nv">key</span><span class="p">))</span><span class="w"></span>
</code></pre></div>



<a name="302843983"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302843983" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prajwal S N <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302843983">(Oct 07 2022 at 12:51)</a>:</h4>
<p>Do I need to rebuild the LLVM bitcode manually after adding a builtin? When I try to invoke the function on the REPL I get an <code>unrecognised builtin function</code> error</p>



<a name="302846101"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302846101" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prajwal S N <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302846101">(Oct 07 2022 at 13:00)</a>:</h4>
<p>Fixed it, forgot to export the function <span aria-label="skull" class="emoji emoji-1f480" role="img" title="skull">:skull:</span></p>



<a name="302854883"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302854883" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302854883">(Oct 07 2022 at 13:44)</a>:</h4>
<blockquote>
<p>About bultins, is a <code>Dict.update</code> planed?</p>
</blockquote>
<p>No specific plan, but it definitely can be added. Might be called <code>replace though</code> to match <code>List.replace</code>. Also, could be more performant with the two steps merged, otherwise there are two searches of the dictionary.</p>



<a name="302868970"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302868970" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302868970">(Oct 07 2022 at 14:51)</a>:</h4>
<p><span class="user-mention" data-user-id="528453">@Ghislain</span> I assume by <code>Dict.update</code> you mean something like <a href="https://package.elm-lang.org/packages/elm/core/latest/Dict#update">Elm's</a>?</p>
<p>so something like:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="kt">Dict</span><span class="nf">.</span><span class="nv">update</span><span class="w"> </span><span class="nf">:</span><span class="w"></span>
<span class="w">    </span><span class="kt">Dict</span><span class="w"> </span><span class="nv">k</span><span class="w"> </span><span class="nv">v</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nv">k</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">([</span><span class="kt">Present</span><span class="w"> </span><span class="nv">v</span><span class="p">,</span><span class="w"> </span><span class="kt">Missing</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="kt">Present</span><span class="w"> </span><span class="nv">v</span><span class="p">,</span><span class="w"> </span><span class="kt">Missing</span><span class="p">])</span><span class="w"></span>
<span class="w">    </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Dict</span><span class="w"> </span><span class="nv">k</span><span class="w"> </span><span class="nv">v</span><span class="w"></span>
</code></pre></div>



<a name="302870439"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302870439" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302870439">(Oct 07 2022 at 14:59)</a>:</h4>
<p>I didn't think about this implementation with tags (I've no experience with Elm). Looks cool!<br>
I just thought about something like it because I wanted this use for <a class="stream" data-stream-id="347488" href="/#narrow/stream/347488-roctoberfest">#roctoberfest</a> day-5.</p>



<a name="302872610"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302872610" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302872610">(Oct 07 2022 at 15:02)</a>:</h4>
<p>yeah I think it's worth adding! Want to open an issue for it and link to this thread?</p>



<a name="302875984"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302875984" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302875984">(Oct 07 2022 at 15:19)</a>:</h4>
<p>Couldn't it simply be added to the list of builtins in <a href="https://github.com/roc-lang/roc/issues/664">https://github.com/roc-lang/roc/issues/664</a>? Or is it only to keep track of what has to be done, but an issue has to be created for each?</p>



<a name="302878093"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302878093" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302878093">(Oct 07 2022 at 15:29)</a>:</h4>
<p>ideally we have a separate issue for each; the main reason for originally creating 664 was just to get a list down somewhere as a starting point <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="302883859"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302883859" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ghislain <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302883859">(Oct 07 2022 at 15:57)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/4239">https://github.com/roc-lang/roc/issues/4239</a> Feel free to rename / modify anything</p>



<a name="302894805"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/302894805" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#302894805">(Oct 07 2022 at 16:54)</a>:</h4>
<p>excellent, thank you <span class="user-mention" data-user-id="528453">@Ghislain</span>! <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span></p>



<a name="303167702"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/builtins/near/303167702" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Duncan <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/builtins.html#303167702">(Oct 09 2022 at 19:55)</a>:</h4>
<p><span class="user-mention" data-user-id="528453">@Ghislain</span>, I've continued the conversation about <code>Dict.update</code> in <a href="#narrow/stream/316715-contributing/topic/Dict.2Eupdate">this other topic</a>.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>