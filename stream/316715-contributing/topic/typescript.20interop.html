<html>
<head><meta charset="utf-8"><title>typescript interop · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/typescript.20interop.html">typescript interop</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="342328671"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/typescript%20interop/near/342328671" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/typescript.20interop.html#342328671">(Mar 16 2023 at 14:27)</a>:</h4>
<p>I just made an example of TypeScript interop via NodeJS - can anyone with <code>npm</code> installed try this out and let me know if it works for you? <a href="https://github.com/roc-lang/roc/pull/5146">https://github.com/roc-lang/roc/pull/5146</a></p>



<a name="342440403"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/typescript%20interop/near/342440403" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Seth Workman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/typescript.20interop.html#342440403">(Mar 16 2023 at 23:18)</a>:</h4>
<p>Worked for me. I had issues with <code>npm install</code> and node-gyp , ended up just installing each package manually and it worked fine for some reason, same versions even..</p>
<blockquote>
<p>Calling Roc...<br>
Called Roc...<br>
Roc says the following: TypeScript said to Roc: Hello from TypeScript! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>
</blockquote>



<a name="342440535"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/typescript%20interop/near/342440535" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/typescript.20interop.html#342440535">(Mar 16 2023 at 23:19)</a>:</h4>
<p>hm, that's weird - I'm not sure what to make of that <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="342440549"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/typescript%20interop/near/342440549" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/typescript.20interop.html#342440549">(Mar 16 2023 at 23:19)</a>:</h4>
<p>what OS was this on?</p>



<a name="342440631"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/typescript%20interop/near/342440631" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Seth Workman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/typescript.20interop.html#342440631">(Mar 16 2023 at 23:20)</a>:</h4>
<p>Mac OS - Ventura 13.0</p>



<a name="342440825"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/typescript%20interop/near/342440825" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/typescript.20interop.html#342440825">(Mar 16 2023 at 23:22)</a>:</h4>
<p>huh! I'm also on macOS <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="342440870"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/typescript%20interop/near/342440870" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/typescript.20interop.html#342440870">(Mar 16 2023 at 23:22)</a>:</h4>
<p>what versions of node and npm?</p>



<a name="342440925"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/typescript%20interop/near/342440925" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Seth Workman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/typescript.20interop.html#342440925">(Mar 16 2023 at 23:22)</a>:</h4>
<p>Lets see..<br>
node: v18.12.1<br>
npm: 8.19.3</p>



<a name="342441391"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/typescript%20interop/near/342441391" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Seth Workman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/typescript.20interop.html#342441391">(Mar 16 2023 at 23:26)</a>:</h4>
<p>I can't seem to recreate it now. I did restart my computer somewhere in debugging the issue, we can just blame it on local env issues .. <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="343567568"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/typescript%20interop/near/343567568" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> choonkeat <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/typescript.20interop.html#343567568">(Mar 22 2023 at 03:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="465260">Seth Workman</span> <a href="#narrow/stream/316715-contributing/topic/typescript.20interop/near/342440403">said</a>:</p>
<blockquote>
<p>I had issues with <code>npm install</code> and node-gyp , ended up just installing each package manually and it worked fine for some reason</p>
</blockquote>
<p>needed <code>npm install --ignore-scripts</code> to avoid problems</p>
<div class="codehilite" data-code-language="Makefile"><pre><span></span><code><span class="nv">LIBHELLO_FILENAME</span><span class="o">=</span><span class="k">$(</span>or<span class="w"> </span><span class="k">$(</span>wildcard<span class="w"> </span>libhello.*<span class="k">)</span>,<span class="w"> </span>libhello<span class="k">)</span>

<span class="nf">run-ts</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">LIBHELLO_FILENAME</span><span class="k">)</span> <span class="n">hello</span>.<span class="n">ts</span>
<span class="w">    </span>npx<span class="w"> </span>ts-node<span class="w"> </span>hello.ts

<span class="nf">run-js</span><span class="o">:</span><span class="w"> </span><span class="n">hello</span>.<span class="n">js</span>
<span class="w">    </span>node<span class="w"> </span>hello.js

<span class="nf">hello.js</span><span class="o">:</span><span class="w"> </span><span class="k">$(</span><span class="nv">LIBHELLO_FILENAME</span><span class="k">)</span> <span class="n">hello</span>.<span class="n">ts</span>
<span class="w">    </span>npx<span class="w"> </span>tsc<span class="w"> </span>hello.ts

<span class="nf">$(LIBHELLO_FILENAME)</span><span class="o">:</span><span class="w"> </span><span class="n">build</span> <span class="n">demo</span>.<span class="n">c</span> *.<span class="n">roc</span>
<span class="w">    </span>roc<span class="w"> </span>build<span class="w"> </span>--lib
<span class="w">    </span>npx<span class="w"> </span>node-gyp<span class="w"> </span>build
<span class="w">    </span>cp<span class="w"> </span>addon.d.ts<span class="w"> </span>build/Release/

<span class="nf">build</span><span class="o">:</span><span class="w"> </span><span class="n">node_modules</span>
<span class="w">    </span>npx<span class="w"> </span>node-gyp<span class="w"> </span>configure

<span class="c"># ignore-scripts is needed otherwise error:</span>
<span class="c">#    ld: library not found for -lhello</span>
<span class="c">#    clang: error: linker command failed with exit code 1 (use -v to see invocation)</span>
<span class="nf">node_modules</span><span class="o">:</span>
<span class="w">    </span>npm<span class="w"> </span>install<span class="w"> </span>--ignore-scripts

<span class="nf">clean</span><span class="o">:</span>
<span class="w">    </span>rm<span class="w"> </span>-rf<span class="w"> </span>libhello.dylib<span class="w"> </span>build<span class="w"> </span>hello.js<span class="w"> </span>node_modules
</code></pre></div>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>