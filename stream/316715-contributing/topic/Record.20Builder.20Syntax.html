<html>
<head><meta charset="utf-8"><title>Record Builder Syntax · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html">Record Builder Syntax</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="355268307"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355268307" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355268307">(May 02 2023 at 21:24)</a>:</h4>
<p>I'm working on a few things that would benefit from <a href="https://docs.google.com/document/d/1Jo9nZCekkoF6SaDcRqPqoPcgPaAAvlNZC7v3kgVQ3Tc/edit">Proposal: Record Builder Syntax</a>. In my opinion, this would make Roc stand out from other FP languages where applicatives are often leveraged but feel somewhat clunky. </p>
<p>I already looked into how this could be added, and I would love to take a stab at implementing it. </p>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> Is this at a stage where you'd consider accepting a PR or is it too early for that?</p>



<a name="355269042"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355269042" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355269042">(May 02 2023 at 21:30)</a>:</h4>
<p>totally happy to accept a contribution for it! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="355269165"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355269165" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355269165">(May 02 2023 at 21:31)</a>:</h4>
<p>the only question mark in my mind is whether we should have it desugar to <code>apply</code> or <code>map2</code> (each can be implemented in terms of the other, but I haven't thought through the pros/cons of choosing one vs the other) but that's the very last step of the feature, so I don't think it's a blocker for getting started</p>



<a name="355271399"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355271399" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355271399">(May 02 2023 at 21:48)</a>:</h4>
<p>Interesting. If we desugared to <code>map2</code> the "sugared" source would be different, right? </p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="nf">usersAndPosts</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">collect</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">users</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/users"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="p">,</span>
<span class="w">    </span><span class="n">posts</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>In the example, <code>apply</code> is provided as <code>Task.batch</code>.</p>



<a name="355277346"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355277346" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355277346">(May 02 2023 at 22:36)</a>:</h4>
<p>hm yeah, true</p>



<a name="355277373"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355277373" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355277373">(May 02 2023 at 22:36)</a>:</h4>
<p>yeah maybe <code>map2</code> doesn't make sense <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="355277436"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355277436" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355277436">(May 02 2023 at 22:37)</a>:</h4>
<p>it just occurred to me recently that it was an option because it can be losslessly transformed to <code>apply</code>, but thinking about it some more, it doesn't really seem to have any upsides here!</p>



<a name="355277446"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355277446" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355277446">(May 02 2023 at 22:37)</a>:</h4>
<p>so let's stick with <code>apply</code></p>



<a name="355282519"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355282519" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355282519">(May 02 2023 at 23:16)</a>:</h4>
<p>Yeah, <code>apply</code> seems more straightforward for this use case.</p>



<a name="355282547"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355282547" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355282547">(May 02 2023 at 23:16)</a>:</h4>
<p>Ok, cool. I'll get started whenever I get some free time <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="355284190"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355284190" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355284190">(May 02 2023 at 23:33)</a>:</h4>
<p>awesome, feel free to post here if you have any questions!</p>



<a name="355284241"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355284241" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georges Boris <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355284241">(May 02 2023 at 23:33)</a>:</h4>
<p>I'm not sure if this is the place for it but I just read the design doc for this feature and left wondering if there isn't something even better we could figure out without the downsides listed.</p>
<p>for instance, does it make sense to use anything other than <code>Task.batch</code> for each of the items? I would think that <code>Task.await</code> would make it sequential - though it wouldn't right? since one of the design goals of this syntax is to make people understand they can't use ordering.</p>
<p>it seems like this approach might make people have a headache trying to compute values inside the same <code>collect</code> statement, even if it doesn't work it kinda looks enough like backpassing for people to think it would work...</p>
<p>with that in mind, any computed values or sequential tasks would need to happen in a follow-up step, right? wouldn't it be better to restrict it more and people could use a <code>Task.map</code> if they wanted to compute something or <code>Task.andThen</code> if they wanted to do something after all requests are done.</p>
<p>something like</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nv">users</span><span class="o">:</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="p">,</span>
<span class="w">  </span><span class="nv">posts</span><span class="o">:</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/posts"</span>
<span class="p">}</span>
</code></pre></div>
<p>the syntax sugar would be for the function <code>Task.batch</code> itself - it requires a record of tasks.</p>



<a name="355285931"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355285931" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355285931">(May 02 2023 at 23:53)</a>:</h4>
<p>IIUC, <code>Task.await</code> would fail to typecheck.</p>



<a name="355286566"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355286566" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355286566">(May 03 2023 at 00:00)</a>:</h4>
<p>Related to his above question, why do we need <code>Task.collect</code> at all. We should even be able to do:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nv">usersAndPosts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">users</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="p">,</span>
<span class="w">    </span><span class="nx">posts</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>It could desugar to:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">(</span><span class="err">\</span><span class="nx">users</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="err">\</span><span class="nx">posts</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">users</span><span class="p">,</span><span class="w"> </span><span class="nx">posts</span><span class="w"> </span><span class="p">})</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="p">)</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="p">)</span>
</code></pre></div>
<p>I am not sure what adding in an extra layer of indirection and <code>wrap</code> function does for us.</p>



<a name="355286953"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355286953" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355286953">(May 03 2023 at 00:04)</a>:</h4>
<p>Alos, <span class="user-mention" data-user-id="364014">@Georges Boris</span>, your above proposal would have no way to distinguish from a regular record without blessing <code>Task.batch</code>, it needs to at least keep something like <code>&lt;-</code> so that we know to apply syntax sugar.</p>



<a name="355287561"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355287561" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georges Boris <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355287561">(May 03 2023 at 00:11)</a>:</h4>
<p>so would this syntax work for any other record constructor? from the doc I thought it was explicitly related to parallel tasks - so this would also be useful for something like this?</p>
<div class="codehilite"><pre><span></span><code>D.succeed {
  name &lt;- D.field &quot;name&quot; D.string  |&gt; D.required,
  email &lt;- D.field &quot;email&quot; D.string |&gt; D.optional
}
</code></pre></div>
<p>(trying to mimick elm's json decode pipeline api)</p>



<a name="355288038"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355288038" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355288038">(May 03 2023 at 00:16)</a>:</h4>
<p>Interesting. I mean it would build:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">D</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">(</span><span class="err">\</span><span class="nx">name</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="err">\</span><span class="nx">email</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="p">}</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">D</span><span class="p">.</span><span class="nx">required</span><span class="w"> </span><span class="p">(</span><span class="nx">D</span><span class="p">.</span><span class="nx">field</span><span class="w"> </span><span class="s">"name"</span><span class="w"> </span><span class="nx">D</span><span class="p">.</span><span class="nx">string</span><span class="p">)</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">D</span><span class="p">.</span><span class="nx">optional</span><span class="w"> </span><span class="p">(</span><span class="nx">D</span><span class="p">.</span><span class="nx">field</span><span class="w"> </span><span class="s">"email"</span><span class="w"> </span><span class="nx">D</span><span class="p">.</span><span class="nx">string</span><span class="p">)</span>
</code></pre></div>
<p>the type of required and optional would be something like:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nv">required</span><span class="o">:</span><span class="w"> </span><span class="nx">D</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">D</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">D</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="nx">err</span>

<span class="nv">optional</span><span class="o">:</span><span class="w"> </span><span class="nx">D</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">D</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">D</span><span class="w"> </span><span class="p">(</span><span class="nx">Option</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">[]</span>
</code></pre></div>
<p>Where optional would on failure return <code>None</code> and clear out the error. While required would propagate the error.</p>
<p>I think all the types could work out at a minimum.</p>



<a name="355288114"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355288114" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355288114">(May 03 2023 at 00:17)</a>:</h4>
<p><span class="user-mention" data-user-id="364014">@Georges Boris</span>  Yes, it would work for any applicative API. For example, I want to use it to build type-safe SQL selections. You could also use it to build a CLI arguments parser.</p>



<a name="355288118"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355288118" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355288118">(May 03 2023 at 00:17)</a>:</h4>
<p>You would just need something that can actually execute <code>D</code> just like we have platforms executing <code>Task</code>. So I think yes, it would enable that.</p>



<a name="355288252"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355288252" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355288252">(May 03 2023 at 00:18)</a>:</h4>
<p><span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> Good point about not needing <code>Task.collect</code></p>



<a name="355288445"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355288445" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355288445">(May 03 2023 at 00:20)</a>:</h4>
<p>Oh, but <code>D.string</code> would not really work. But some other api should work. As in, <code>D.string</code> could work, but then <code>email</code> would not be a <code>Str</code> instead it would be a wrapped <code>[String Str]</code>. So you would then have to match on the type even though you know the only type it could be. I think instead you would need <code>D.fieldStr</code> and same for other types to make the api play nicely with types in roc.</p>



<a name="355288525"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355288525" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georges Boris <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355288525">(May 03 2023 at 00:21)</a>:</h4>
<p>it seems like a nice API that will need a veeery careful error message setup. I can totally see someone getting mixed up with types when trying to mix something like <code>Task.batch</code> and <code>Task.await</code> since the dependency is not as clear as an actual pipeline.</p>



<a name="355288583"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355288583" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georges Boris <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355288583">(May 03 2023 at 00:21)</a>:</h4>
<p>(<code>optional</code> actually takes a default value in Elm - my mistake!)</p>



<a name="355288869"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355288869" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355288869">(May 03 2023 at 00:24)</a>:</h4>
<p>Will be interesting to see how this works with <code>Decode</code> in the future. I would assume it would in the end be built on top of <code>Decode</code>, but maybe that is wrong. Not sure if you can currently decode with a default value. I think not.</p>



<a name="355289353"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355289353" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355289353">(May 03 2023 at 00:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="364014">Georges Boris</span> <a href="#narrow/stream/316715-contributing/topic/Record.20Builder.20Syntax/near/355288525">said</a>:</p>
<blockquote>
<p>it seems like a nice API that will need a veeery careful error message setup. I can totally see someone getting mixed up with types when trying to mix something like <code>Task.batch</code> and <code>Task.await</code> since the dependency is not as clear as an actual pipeline.</p>
</blockquote>
<p>That's true. On the other hand, by having a special syntax for applicatives, we can produce much more insightful error messages than the other languages.</p>



<a name="355290522"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355290522" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355290522">(May 03 2023 at 00:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/316715-contributing/topic/Record.20Builder.20Syntax/near/355286566">said</a>:</p>
<blockquote>
<p>Related to his above question, why do we need <code>Task.collect</code> at all. We should even be able to do:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nv">usersAndPosts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">users</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="p">,</span>
<span class="w">    </span><span class="nx">posts</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>It could desugar to:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">(</span><span class="err">\</span><span class="nx">users</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="err">\</span><span class="nx">posts</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">users</span><span class="p">,</span><span class="w"> </span><span class="nx">posts</span><span class="w"> </span><span class="p">})</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="p">)</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="p">)</span>
</code></pre></div>
<p>I am not sure what adding in an extra layer of indirection and <code>wrap</code> function does for us.</p>
</blockquote>
<p>This is a good point. I can't come up with anything the layer of indirection would allow us to do, that we couldn't without it.</p>



<a name="355290838"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355290838" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355290838">(May 03 2023 at 00:41)</a>:</h4>
<p>Other than having a more intentional name for it I guess.</p>



<a name="355291401"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355291401" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355291401">(May 03 2023 at 00:47)</a>:</h4>
<p>the reason for <code>Task.collect</code> is that it makes the sugar a self-contained expression</p>



<a name="355291432"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355291432" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355291432">(May 03 2023 at 00:47)</a>:</h4>
<p>in other words, with <code>Task.collect</code>, the sugar is all inside the curly braces and everything outside the curly braces is normal Roc</p>



<a name="355291535"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355291535" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355291535">(May 03 2023 at 00:48)</a>:</h4>
<p>if you want <code>Task.succeed { ... }</code> to replace <code>Task.collect { ... }</code> then you need to say that, despite all appearances, that <code>Task.succeed { ... }</code> is not a function call</p>



<a name="355291580"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355291580" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355291580">(May 03 2023 at 00:48)</a>:</h4>
<p>rather it's the beginning of some syntax sugar that you only find out is happening if you read what's inside the curly braces</p>



<a name="355291624"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355291624" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355291624">(May 03 2023 at 00:49)</a>:</h4>
<p>and every other time you see <code>Task.succeed { ... }</code> you know that it's going to evaluate to a <code>Task { ...some fields... }</code> but now it might not</p>



<a name="355291784"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355291784" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355291784">(May 03 2023 at 00:50)</a>:</h4>
<p>I think calling <code>Task.collect</code> any different/an actual function call is wrong. <code>Task.collect</code> doesn't even make sense to be called with those args. (As in either way it is not a true function call and is a rule that a roc user needs to know. If they look at the raw <code>Task.collect</code>, or the raw <code>Task.succeed</code> neither truly makes senses. I think <code>Task.succeed</code> reads closer to the expected output type.)</p>



<a name="355291854"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355291854" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355291854">(May 03 2023 at 00:51)</a>:</h4>
<blockquote>
<p>every other time you see <code>Task.succeed { ... }</code> you know that it's going to evaluate to a <code>Task { ...some fields... } </code>but now it might not</p>
</blockquote>
<p>This is still true. They syntax sugar always generates a record.</p>



<a name="355292282"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355292282" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355292282">(May 03 2023 at 00:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/316715-contributing/topic/Record.20Builder.20Syntax/near/355286566">said</a>:</p>
<blockquote>
<p>Related to his above question, why do we need <code>Task.collect</code> at all. We should even be able to do:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nv">usersAndPosts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">users</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="p">,</span>
<span class="w">    </span><span class="nx">posts</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>It could desugar to:</p>
<p><div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">(</span><span class="err">\</span><span class="nx">users</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="err">\</span><span class="nx">posts</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">users</span><span class="p">,</span><span class="w"> </span><span class="nx">posts</span><span class="w"> </span><span class="p">})</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="p">)</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="p">)</span>
</code></pre></div><br>
</p>
</blockquote>
<p>if you desugar the <code>|&gt;</code>s out, the <code>Task.batch</code> calls are the outermost calls.</p>
<p>in other words, in this example we started with <code>Task.succeed { ... }</code> and ended up with (after desugaring) <code>Task.batch (Task.batch (Task.succeed ...)))</code></p>



<a name="355292362"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355292362" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355292362">(May 03 2023 at 00:55)</a>:</h4>
<p>I personally like the parallel between:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">user</span><span class="o">:</span><span class="w"> </span><span class="nx">getUser</span><span class="w"> </span><span class="nx">someData</span>
<span class="w">    </span><span class="nv">email</span><span class="o">:</span><span class="w"> </span><span class="nx">loadEmail</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="nx">c</span>
<span class="p">}</span>
</code></pre></div>
<p>and:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">users</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="p">,</span>
<span class="w">    </span><span class="nx">posts</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>Both give you the same output <code>Task {user: Str, email: Str} err</code>, but one is in parallel and using sub tasks.</p>



<a name="355292460"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355292460" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355292460">(May 03 2023 at 00:56)</a>:</h4>
<p>that's a compelling point!</p>



<a name="355292510"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355292510" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355292510">(May 03 2023 at 00:56)</a>:</h4>
<p><span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span>  I guess <code>|&gt;</code> itself is actually precedent for adding wrapping calls to an expression after the fact</p>



<a name="355292561"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355292561" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355292561">(May 03 2023 at 00:57)</a>:</h4>
<p>Of course, I think it will confuse users that some reason they have to transform to this syntax if there are dependencies:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">users</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">await</span>
<span class="nx">posts</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">Http</span><span class="p">.</span><span class="nx">getPosts</span><span class="w"> </span><span class="nx">users</span><span class="w"> </span><span class="s">"/posts"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">await</span>

<span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">{</span><span class="nx">users</span><span class="p">,</span><span class="w"> </span><span class="nx">posts</span><span class="p">}</span>
</code></pre></div>



<a name="355292563"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355292563" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355292563">(May 03 2023 at 00:57)</a>:</h4>
<p>so it's already not necessarily the case that if you see <code>Task.succeed { ... }</code> you know that a <code>Task.succeed</code> will be the first call there; you already have to keep reading to see if there's a <code>|&gt;</code> coming in order to know what will be evaluated first</p>



<a name="355292579"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355292579" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355292579">(May 03 2023 at 00:57)</a>:</h4>
<p>and actually I guess that's true of binary operators in general, not just <code>|&gt;</code> <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="355293151"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293151" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293151">(May 03 2023 at 01:04)</a>:</h4>
<p>Oh, another expansion to the syntax, could it also support this:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">users</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">getUsers</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">await</span>

<span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">users</span><span class="p">,</span>
<span class="w">    </span><span class="nx">emails</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">getEmails</span><span class="w"> </span><span class="nx">users</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="p">,</span>
<span class="w">    </span><span class="nx">posts</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">getPosts</span><span class="w"> </span><span class="nx">users</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>



<a name="355293214"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293214" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293214">(May 03 2023 at 01:05)</a>:</h4>
<p>Yes! That was going to be my next question.</p>



<a name="355293411"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293411" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293411">(May 03 2023 at 01:07)</a>:</h4>
<p>I suppose, although at least one of them needs to be <code>&lt;-</code> <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="355293440"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293440" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293440">(May 03 2023 at 01:07)</a>:</h4>
<p>wait, actually I don't think that works</p>



<a name="355293451"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293451" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293451">(May 03 2023 at 01:07)</a>:</h4>
<p>because it's not a <code>|&gt; Task.batch</code></p>



<a name="355293463"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293463" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293463">(May 03 2023 at 01:07)</a>:</h4>
<p>I definitely do not think we should allow mixing and matching <code>await</code> and <code>batch</code></p>



<a name="355293533"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293533" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293533">(May 03 2023 at 01:08)</a>:</h4>
<p>It should work, <code>users</code> in that scope is already the final value, not the <code>Task</code></p>



<a name="355293537"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293537" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293537">(May 03 2023 at 01:08)</a>:</h4>
<p>oh wait nm I misunderstood</p>



<a name="355293564"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293564" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293564">(May 03 2023 at 01:08)</a>:</h4>
<p>so <code>users</code> is sugar for <code>users: users</code> as usual, not <code>users &lt;- users</code> <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="355293568"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293568" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293568">(May 03 2023 at 01:08)</a>:</h4>
<p>yeah that makes sense!</p>



<a name="355293589"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293589" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293589">(May 03 2023 at 01:08)</a>:</h4>
<p>in that case we should allow <code>users: blah</code> as well (I forget if the doc mentioned that)</p>



<a name="355293638"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293638" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293638">(May 03 2023 at 01:09)</a>:</h4>
<p>cool, I'm on board with both of those changes <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="355293678"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293678" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293678">(May 03 2023 at 01:09)</a>:</h4>
<p>For sure! When I was looking into how I would implement this earlier, I thought we can split the fields set with <code>:</code> (or <code>LabelOnly</code>) from those using <code>&lt;-</code>.</p>



<a name="355293797"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355293797" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355293797">(May 03 2023 at 01:10)</a>:</h4>
<p>The former are kept the same, and the latter get desugared into the pipeline thing.</p>



<a name="355294200"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355294200" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355294200">(May 03 2023 at 01:14)</a>:</h4>
<p>Yes, exactly what I was thinking</p>



<a name="355294440"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355294440" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georges Boris <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355294440">(May 03 2023 at 01:17)</a>:</h4>
<p>could be useful to have a default type alias for applicatives so it is easier to spot which functions are compatible with this feature than looking for the usually confusing type signature... type alias is definitely not the way to go but would be great to spot compatibility easily.</p>



<a name="355295615"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355295615" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355295615">(May 03 2023 at 01:29)</a>:</h4>
<p>the pattern is:<code>Task a err -&gt; Task (a -&gt; b) err -&gt; Task somethingWithB err</code></p>
<p>So could be:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">ApplicativeTask</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Task</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="nx">err</span>

<span class="nv">batch</span><span class="o">:</span><span class="w"> </span><span class="nx">ApplicativeTask</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nx">Task</span><span class="w"> </span><span class="nx">somethingWithB</span><span class="w"> </span><span class="nx">err</span>
</code></pre></div>



<a name="355295627"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355295627" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355295627">(May 03 2023 at 01:29)</a>:</h4>
<p>Not sure if it helps, but maybe...idk</p>



<a name="355297908"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355297908" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355297908">(May 03 2023 at 01:52)</a>:</h4>
<p>I think we overlooked something:</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="kt">Task</span><span class="o">.</span><span class="n">succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">users</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/users"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="p">,</span>
<span class="w">    </span><span class="n">posts</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>could not desugar to:</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="kt">Task</span><span class="o">.</span><span class="n">succeed</span><span class="w"> </span><span class="p">(</span><span class="nf">\</span><span class="n">users</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="nf">\</span><span class="n">posts</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="n">posts</span><span class="w"> </span><span class="p">})</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="w"> </span><span class="p">(</span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/users"</span><span class="p">)</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="w"> </span><span class="p">(</span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="p">)</span>
</code></pre></div>
<p>because we would be applying <code>Task.batch</code> with 2 arguments: <code>Task.succeed (\users -&gt; \posts -&gt; { users, posts })</code> and <code>(Http.get "/users")</code></p>



<a name="355298106"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355298106" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355298106">(May 03 2023 at 01:54)</a>:</h4>
<p>It would work in Elm because <code>Task.batch</code> would be partially applied with <code>Http.get ..</code> and then the pipe would apply <code>Task.succeed (..)</code></p>



<a name="355298348"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355298348" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355298348">(May 03 2023 at 01:57)</a>:</h4>
<p>Since batch is <code>Task a err -&gt; Task (a -&gt; b) err -&gt; Task b err</code>, it is manually curried.</p>
<p>I think you just need extra parens:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">(</span><span class="err">\</span><span class="nx">users</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="err">\</span><span class="nx">posts</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">users</span><span class="p">,</span><span class="w"> </span><span class="nx">posts</span><span class="w"> </span><span class="p">})</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="p">))</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="p">))</span>
</code></pre></div>



<a name="355298464"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355298464" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355298464">(May 03 2023 at 01:59)</a>:</h4>
<p>Oh, parens do that? Let me check</p>



<a name="355298607"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355298607" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355298607">(May 03 2023 at 02:00)</a>:</h4>
<p><a href="/user_uploads/22008/QN_85UZh6NNP20dEab_2Zog8/CleanShot-2023-05-02-at-22.59.482x.png">CleanShot-2023-05-02-at-22.59.482x.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/QN_85UZh6NNP20dEab_2Zog8/CleanShot-2023-05-02-at-22.59.482x.png" title="CleanShot-2023-05-02-at-22.59.482x.png"><img src="/user_uploads/22008/QN_85UZh6NNP20dEab_2Zog8/CleanShot-2023-05-02-at-22.59.482x.png"></a></div>



<a name="355298669"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355298669" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355298669">(May 03 2023 at 02:01)</a>:</h4>
<p>I think <code>|&gt;</code> may not work correctly, but something like this should definitely type check:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nv">batch1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="p">)</span>
<span class="nv">batch2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="p">)</span>

<span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">(</span><span class="err">\</span><span class="nx">users</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="err">\</span><span class="nx">posts</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">users</span><span class="p">,</span><span class="w"> </span><span class="nx">posts</span><span class="w"> </span><span class="p">})</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">batch1</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">batch2</span>
</code></pre></div>



<a name="355298713"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355298713" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355298713">(May 03 2023 at 02:01)</a>:</h4>
<p>Yeah, somehow we need to force application. Not sure if we have a way to do that in roc. Interesting issue.</p>



<a name="355298889"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355298889" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355298889">(May 03 2023 at 02:03)</a>:</h4>
<p>Right. We could desugar to:</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="p">(</span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="w"> </span><span class="p">(</span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="p">))</span>
<span class="w">    </span><span class="p">(</span>
<span class="w">        </span><span class="p">(</span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="w"> </span><span class="p">(</span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/users"</span><span class="p">))</span>
<span class="w">            </span><span class="p">(</span><span class="kt">Task</span><span class="o">.</span><span class="n">succeed</span><span class="w"> </span><span class="p">(</span><span class="nf">\</span><span class="n">users</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="nf">\</span><span class="n">posts</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="n">posts</span><span class="w"> </span><span class="p">}))</span>
<span class="w">    </span><span class="p">)</span>
</code></pre></div>



<a name="355298956"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355298956" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355298956">(May 03 2023 at 02:04)</a>:</h4>
<p>I think this may be a bug in <code>|&gt;</code>, but I could see an argument for either. Personally, I think the parens should cause execution even in a pipeline cause that is what happens when desugared like above.</p>



<a name="355298973"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355298973" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355298973">(May 03 2023 at 02:04)</a>:</h4>
<p>Cause the <code>|&gt;</code> should desugar to what you wrote above.</p>



<a name="355299510"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355299510" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355299510">(May 03 2023 at 02:10)</a>:</h4>
<p>Yeah, interesting. I guess it could do that, I'm not sure if I'd expect it to, the way I would in Elm with partial application.</p>



<a name="355299886"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355299886" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355299886">(May 03 2023 at 02:15)</a>:</h4>
<p>Yeah, I'm not sure either, but then it leaves an open question, how do I apply a manually curried function in a pipeline? Feels weird to say it is impossible</p>



<a name="355299919"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355299919" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355299919">(May 03 2023 at 02:15)</a>:</h4>
<p>I mean I guess you could wrap it <code>|&gt; \x -&gt; (manuallyCurried someParam) x</code></p>



<a name="355632326"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355632326" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355632326">(May 04 2023 at 00:49)</a>:</h4>
<p>I still have like 10 TODOs but this thing is working! <br>
<a href="/user_uploads/22008/SD2fPoFFs4_Op-vGS5hipGQ_/CleanShot-2023-05-03-at-21.48.502x.png">CleanShot-2023-05-03-at-21.48.502x.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/SD2fPoFFs4_Op-vGS5hipGQ_/CleanShot-2023-05-03-at-21.48.502x.png" title="CleanShot-2023-05-03-at-21.48.502x.png"><img src="/user_uploads/22008/SD2fPoFFs4_Op-vGS5hipGQ_/CleanShot-2023-05-03-at-21.48.502x.png"></a></div>



<a name="355632692"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355632692" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355632692">(May 04 2023 at 00:53)</a>:</h4>
<p>Also formatting:<br>
<a href="/user_uploads/22008/mYD18As6t1k8NFThnQS9hWca/CleanShot-2023-05-03-at-21.52.33.gif">CleanShot-2023-05-03-at-21.52.33.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/mYD18As6t1k8NFThnQS9hWca/CleanShot-2023-05-03-at-21.52.33.gif" title="CleanShot-2023-05-03-at-21.52.33.gif"><img src="/user_uploads/22008/mYD18As6t1k8NFThnQS9hWca/CleanShot-2023-05-03-at-21.52.33.gif"></a></div>



<a name="355632712"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355632712" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355632712">(May 04 2023 at 00:53)</a>:</h4>
<p>wowwwwwww, this is amazing!</p>



<a name="355635953"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355635953" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355635953">(May 04 2023 at 01:26)</a>:</h4>
<p>Oh wow...fast</p>



<a name="355646670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355646670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georges Boris <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355646670">(May 04 2023 at 03:20)</a>:</h4>
<p>would it be too crazy if the formatter transformed the non-sugared versions into this syntax for consistency? it would also prevent the errors this syntax is trying to help with <span aria-label="nerd" class="emoji emoji-1f913" role="img" title="nerd">:nerd:</span></p>



<a name="355771580"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355771580" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355771580">(May 04 2023 at 13:18)</a>:</h4>
<p>Hm, interesting. I think it'd be hard to detect in a way that wouldn't trigger for other constructs that might look the same (AST wise) but are not applicatives at all.</p>



<a name="355772108"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355772108" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355772108">(May 04 2023 at 13:20)</a>:</h4>
<p>Also, IMHO that'd just be too surprising</p>



<a name="355773446"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/355773446" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#355773446">(May 04 2023 at 13:25)</a>:</h4>
<p>To me, that'd be similar to having the formatter rewrite <code>a (b c))</code> to <code>c |&gt; b |&gt; a</code>. I wouldn't want it to do that.</p>



<a name="356068840"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356068840" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356068840">(May 05 2023 at 14:02)</a>:</h4>
<p>I’m pretty busy after work this week, so I’m unlikely to continue coding this until next week. However, I’d like to determine all the cases where we want to allow record builders in.</p>
<p>This is what I have so far:</p>
<h2>Allowed</h2>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="c1"># 1. Applied to a function identifier</span>
<span class="nx">succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">a</span><span class="o">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span>
<span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getB</span><span class="p">,</span>
<span class="w">    </span><span class="nx">c</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getC</span><span class="p">,</span>
<span class="w">    </span><span class="nx">d</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># 2. Applied to tag</span>
<span class="nx">Succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">a</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getA</span><span class="p">,</span>
<span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getB</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># 3. Applied to opaque wrapper</span>
<span class="nx">@Opaque</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">a</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getA</span><span class="p">,</span>
<span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getB</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># 4. Piped</span>
<span class="p">{</span>
<span class="w">    </span><span class="nx">a</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getA</span><span class="p">,</span>
<span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getB</span><span class="p">,</span>
<span class="p">}</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">succeed</span>

<span class="c1"># 5. Applied next to other arguments</span>
<span class="nx">succeed</span><span class="w"> </span><span class="mi">456</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">a</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getA</span><span class="p">,</span>
<span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getB</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># 6. Applied to an expression that returns a function</span>
<span class="p">(</span><span class="nx">getSucceed</span><span class="w"> </span><span class="nx">somehow</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">a</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getA</span><span class="p">,</span>
<span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getB</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<h2>Maybe allowed?</h2>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="c1"># 7. Record update</span>
<span class="nx">succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">recordToUpdate</span><span class="w"> </span><span class="o">&amp;</span>
<span class="w">        </span><span class="nx">a</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getA</span><span class="p">,</span>
<span class="w">        </span><span class="nx">b</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getB</span><span class="p">,</span>
<span class="w">        </span><span class="nv">c</span><span class="o">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span>
<span class="w">        </span><span class="nx">d</span>
<span class="p">}</span>
</code></pre></div>
<h2>Compile error</h2>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="c1"># 8. Record builder in a def</span>
<span class="nv">builder</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">a</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getA</span><span class="p">,</span>
<span class="w">        </span><span class="nx">b</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getB</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>

<span class="nx">succeed</span><span class="w"> </span><span class="nx">builder</span>

<span class="c1"># 9. Mulitple record builders applied to the same function</span>
<span class="nx">succeed</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">a</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getA</span><span class="p">,</span>
<span class="w">        </span><span class="nx">b</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getB</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nx">z</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="nx">getZ</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>Please let me know what you think. Let’s use the numbers to talk about each case.</p>



<a name="356070560"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356070560" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356070560">(May 05 2023 at 14:06)</a>:</h4>
<p>My gut feeling is 1,2,3 and nothing else. It should only apply to functions directly.</p>
<p>4 is not direct.<br>
5... I am really not sure would need to think about use cases<br>
6 Probably not. We already pointed out that <code>(func arg)</code> does not necessarily apply a function in roc. I think it just also would stick out weirdly and be uncommon.<br>
7 Shouldn't be supported<br>
8 Shouldn't be supported<br>
9 Shouldn't be supported</p>



<a name="356098029"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356098029" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356098029">(May 05 2023 at 15:36)</a>:</h4>
<p>very cool! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span> </p>
<p>I hadn't even thought about making this work for all the things that would be valid in front of a normal record literal (e.g. 2, 3, 4, 5) but I like that if someone tries to do that, it can Just Work the same way as any other expression would <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="356098140"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356098140" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356098140">(May 05 2023 at 15:36)</a>:</h4>
<p>I think we definitely should not support record updates (7) at least at first; if there's demand for it in practice, we can have a separate discussion about it and decide later whether to add it</p>



<a name="356098316"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356098316" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356098316">(May 05 2023 at 15:37)</a>:</h4>
<p>also there have been discussions in the past about potential changes to record update syntax, so committing to it would potentially complicate those discussions unnecessarily</p>



<a name="356098696"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356098696" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356098696">(May 05 2023 at 15:38)</a>:</h4>
<p>I like 8 being a compiler error; I could see an argument for it returning a partially-applied function, but I suspect that would be more surprising/confusing than useful.</p>



<a name="356098777"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356098777" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356098777">(May 05 2023 at 15:38)</a>:</h4>
<p>I'm not even sure if there's a design where 9 could work, so <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> to compile error there too <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="356103206"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356103206" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356103206">(May 05 2023 at 15:55)</a>:</h4>
<p>I think if 8 doesn't work, 4 shouldn't work. They are the same code, but one is explicit with the name and the other implicit</p>



<a name="356104015"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356104015" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356104015">(May 05 2023 at 15:59)</a>:</h4>
<p>hm, my main concern with 8 is that you can pass <code>builder</code> around, put it into the repl (what would its type be?), etc.</p>



<a name="356104072"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356104072" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356104072">(May 05 2023 at 15:59)</a>:</h4>
<p>and those don't really make sense unless you define it to be a partial application or something</p>



<a name="356104426"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356104426" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356104426">(May 05 2023 at 16:00)</a>:</h4>
<p>hm, actually maybe that idea is worth exploring <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="356104748"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356104748" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356104748">(May 05 2023 at 16:01)</a>:</h4>
<p>eh nm, that doesn't make sense to me</p>



<a name="356104963"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356104963" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356104963">(May 05 2023 at 16:02)</a>:</h4>
<p>I'm also ok with 4 being disallowed for now, and then we can revisit later</p>



<a name="356110205"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356110205" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356110205">(May 05 2023 at 16:23)</a>:</h4>
<p>Also, should <code>(someFunc someArg)</code> apply a function in Roc? Currently that isn't consistent due to pipelining which ignores parens.</p>



<a name="356110256"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356110256" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356110256">(May 05 2023 at 16:23)</a>:</h4>
<p>Cause that is what makes me unsure about 6</p>



<a name="356110396"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356110396" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356110396">(May 05 2023 at 16:24)</a>:</h4>
<p>hm, what's an example of pipelining ignoring parens in that context?</p>



<a name="356111264"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356111264" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356111264">(May 05 2023 at 16:27)</a>:</h4>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">x</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="nx">someFunc</span><span class="w"> </span><span class="nx">y</span>

<span class="c1"># becomes</span>
<span class="nx">someFunc</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="nx">y</span>

<span class="c1"># and this</span>
<span class="nx">x</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">someFunc</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span>

<span class="c1"># becomes</span>
<span class="p">(</span><span class="nx">someFunc</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span>

<span class="c1"># So you have to write</span>
<span class="nx">x</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="err">\</span><span class="nx">n</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">someFunc</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="nx">n</span>

<span class="c1"># to get something that simplifies to</span>
<span class="p">(</span><span class="nx">someFunc</span><span class="w"> </span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="nx">x</span>
</code></pre></div>



<a name="356111901"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356111901" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356111901">(May 05 2023 at 16:30)</a>:</h4>
<p>oh interesting! I actually think <code>x |&gt; (someFunc y)</code> should be a type mismatch</p>



<a name="356111938"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356111938" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356111938">(May 05 2023 at 16:30)</a>:</h4>
<p>(I never really thought about it before)</p>



<a name="356112018"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356112018" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356112018">(May 05 2023 at 16:30)</a>:</h4>
<p>but if I write <code>(foo bar)</code> that should just call <code>foo</code> applying <code>bar</code> regardless of what else is going on around it</p>



<a name="356112037"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356112037" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356112037">(May 05 2023 at 16:30)</a>:</h4>
<p>expressions in parens should be self-contained</p>



<a name="356112210"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356112210" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356112210">(May 05 2023 at 16:31)</a>:</h4>
<p>so I think the only way <code>x |&gt; (someFunc y)</code> would work is if I'd defined <code>someFunc = \arg1 -&gt; \arg2 -&gt;</code></p>



<a name="356112238"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356112238" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356112238">(May 05 2023 at 16:31)</a>:</h4>
<p>that is, I'd manually curried it</p>



<a name="356112305"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356112305" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356112305">(May 05 2023 at 16:31)</a>:</h4>
<p>Yeah, I think that's what <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> is talking about</p>



<a name="356112360"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356112360" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356112360">(May 05 2023 at 16:32)</a>:</h4>
<p>See: <a href="#narrow/stream/316715-contributing/topic/Record.20Builder.20Syntax/near/355297908">https://roc.zulipchat.com/#narrow/stream/316715-contributing/topic/Record.20Builder.20Syntax/near/355297908</a></p>



<a name="356112699"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356112699" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356112699">(May 05 2023 at 16:33)</a>:</h4>
<p>We're talking about different things here, though. <a href="https://github.com/roc-lang/roc/issues/6">#6</a> can work fine because <code>(manullyCurriedFn 31) 11</code> already works.</p>



<a name="356113662"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356113662" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356113662">(May 05 2023 at 16:37)</a>:</h4>
<p>The downside of not supporting <code>x |&gt; (someFunc y)</code> is that someone cannot just use the <code>apply</code> functions that they'd use in a Record Builder to construct an applicative manually</p>



<a name="356113850"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356113850" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356113850">(May 05 2023 at 16:38)</a>:</h4>
<p>hm, not supporting it in what sense?</p>



<a name="356113947"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356113947" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356113947">(May 05 2023 at 16:38)</a>:</h4>
<p>what I was suggesting earlier is that <code>x |&gt; (twoArgFunction y)</code> would not work</p>



<a name="356114040"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356114040" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356114040">(May 05 2023 at 16:39)</a>:</h4>
<p>because <code>(twoArgFunction y)</code> would call the 2-arg function immediately, and that would be a type mismatch because it's only getting one argument</p>



<a name="356114082"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356114082" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356114082">(May 05 2023 at 16:39)</a>:</h4>
<p>whereas <code>x |&gt; twoArgFunction y</code> would of course continue to work</p>



<a name="356114574"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356114574" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356114574">(May 05 2023 at 16:41)</a>:</h4>
<p>Right. However, the desugared examples in your proposal make it look like you could either use Record Builder or pipe these curried functions. That's not currently possible. It'd be possible the way Elm does pipelines, but not in Roc.</p>



<a name="356115146"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356115146" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356115146">(May 05 2023 at 16:43)</a>:</h4>
<p>In my current implementation, I'm not using pipes. I'm just desugaring to <code>Expr::Apply</code> like <a href="#narrow/stream/316715-contributing/topic/Record.20Builder.20Syntax/near/355298889">this</a></p>



<a name="356116429"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356116429" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356116429">(May 05 2023 at 16:48)</a>:</h4>
<p>ah, right - because the original proposal used <code>collect</code> rather than <code>succeed</code></p>



<a name="356116711"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356116711" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356116711">(May 05 2023 at 16:49)</a>:</h4>
<p>I might be missing something, but I don't think <code>Task.collect</code> would've changed that. This is about <code>Task.batch</code> being curried.</p>



<a name="356117076"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356117076" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356117076">(May 05 2023 at 16:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="489294">Agus Zubiaga</span> <a href="#narrow/stream/316715-contributing/topic/Record.20Builder.20Syntax/near/355297908">said</a>:</p>
<blockquote>
<p>I think we overlooked something:</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="kt">Task</span><span class="o">.</span><span class="n">succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">users</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/users"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="p">,</span>
<span class="w">    </span><span class="n">posts</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>could not desugar to:</p>
<div class="codehilite" data-code-language="Haskell"><pre><span></span><code><span class="kt">Task</span><span class="o">.</span><span class="n">succeed</span><span class="w"> </span><span class="p">(</span><span class="nf">\</span><span class="n">users</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="nf">\</span><span class="n">posts</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="n">posts</span><span class="w"> </span><span class="p">})</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="w"> </span><span class="p">(</span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/users"</span><span class="p">)</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="o">.</span><span class="n">batch</span><span class="w"> </span><span class="p">(</span><span class="kt">Http</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="p">)</span>
</code></pre></div>
<p>because we would be applying <code>Task.batch</code> with 2 arguments: <code>Task.succeed (\users -&gt; \posts -&gt; { users, posts })</code> and <code>(Http.get "/users")</code></p>
</blockquote>



<a name="356117311"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356117311" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356117311">(May 05 2023 at 16:52)</a>:</h4>
<p>In the <code>Task.collect</code> case, <code>Task.batch</code> would still be applied with the same 2 arguments.</p>



<a name="356118077"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356118077" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356118077">(May 05 2023 at 16:55)</a>:</h4>
<p>ohh gotcha</p>



<a name="356118099"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356118099" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356118099">(May 05 2023 at 16:56)</a>:</h4>
<p>yep, I missed that!</p>



<a name="356118284"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356118284" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356118284">(May 05 2023 at 16:56)</a>:</h4>
<p>That's why <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span>  suggested that <code>x |&gt; (manuallyCurried y)</code> could desugar to <code>(manuallyCurried y) x</code> instead of <code>(manuallyCurried x y)</code> which is a "too many args" error.</p>



<a name="356118439"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356118439" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356118439">(May 05 2023 at 16:57)</a>:</h4>
<p>That would allow you to write:</p>
<div class="codehilite" data-code-language="CoffeeScript"><pre><span></span><code><span class="nx">Task</span><span class="p">.</span><span class="nx">succeed</span><span class="w"> </span><span class="p">(</span><span class="err">\</span><span class="nx">users</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="err">\</span><span class="nx">posts</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">users</span><span class="p">,</span><span class="w"> </span><span class="nx">posts</span><span class="w"> </span><span class="p">})</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/users"</span><span class="p">))</span>
<span class="o">|&gt;</span><span class="w"> </span><span class="p">(</span><span class="nx">Task</span><span class="p">.</span><span class="nx">batch</span><span class="w"> </span><span class="p">(</span><span class="nx">Http</span><span class="p">.</span><span class="nx">get</span><span class="w"> </span><span class="s">"/posts"</span><span class="p">))</span>
</code></pre></div>



<a name="356118967"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356118967" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356118967">(May 05 2023 at 16:59)</a>:</h4>
<p>oh, I think we're saying the same thing then?</p>



<a name="356119128"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356119128" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356119128">(May 05 2023 at 17:00)</a>:</h4>
<p>so if I have a function like <code>curriedDivide = \numerator -&gt; \denominator -&gt; numerator / denominator</code></p>



<a name="356119164"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356119164" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356119164">(May 05 2023 at 17:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/stream/316715-contributing/topic/Record.20Builder.20Syntax/near/356112210">said</a>:</p>
<blockquote>
<p>so I think the only way <code>x |&gt; (someFunc y)</code> would work is if I'd defined <code>someFunc = \arg1 -&gt; \arg2 -&gt;</code></p>
</blockquote>
<p>If you mean this, then yes.</p>



<a name="356119189"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356119189" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356119189">(May 05 2023 at 17:00)</a>:</h4>
<p>yeah</p>



<a name="356119257"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356119257" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356119257">(May 05 2023 at 17:00)</a>:</h4>
<p>I can write e.g. <code>answer = (curriedDivide 6) 2</code> and end up with <code>answer = 3</code></p>



<a name="356119259"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356119259" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356119259">(May 05 2023 at 17:00)</a>:</h4>
<p>Cool, them <code>|&gt;</code> currently has a bug cause it doesn't work that way.</p>



<a name="356119289"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356119289" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356119289">(May 05 2023 at 17:00)</a>:</h4>
<p>yeah I think it has a bug <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="356119653"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356119653" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356119653">(May 05 2023 at 17:02)</a>:</h4>
<p>Ok, great. I think that makes sense intuitively. When I write <code>x |&gt; (someFunc y)</code>, <code>|&gt;</code> should not be concerned with was is inside the parens.</p>



<a name="356120262"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356120262" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356120262">(May 05 2023 at 17:04)</a>:</h4>
<p>Fixing that would allow libraries to expose a single <code>Task.batch</code>-like function that could be used with Record Builders or that can be piped to manually construct something else.</p>



<a name="356120747"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356120747" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356120747">(May 05 2023 at 17:06)</a>:</h4>
<p>yeah I think it's fine to have that function be curried manually, because it unavoidably has a highly unusual type signature no matter what</p>



<a name="356120899"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356120899" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356120899">(May 05 2023 at 17:07)</a>:</h4>
<p>it's not like the first one of these is normal-looking <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span> </p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">batch</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Task</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">err</span><span class="p">,</span><span class="w"> </span><span class="kt">Task</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nv">err</span>
</code></pre></div>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">batch</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Task</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nv">err</span>
</code></pre></div>



<a name="356121124"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356121124" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356121124">(May 05 2023 at 17:08)</a>:</h4>
<p><span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> given how uncommon this is, I wonder if we should format it as:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">batch</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Task</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="p">(</span><span class="kt">Task</span><span class="w"> </span><span class="p">(</span><span class="nv">a</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span><span class="w"> </span><span class="nv">err</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nv">err</span><span class="p">)</span>
</code></pre></div>



<a name="356121180"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356121180" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356121180">(May 05 2023 at 17:08)</a>:</h4>
<p>just to make it extra clear that it's a 1-arg function which returns a function</p>



<a name="356121275"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356121275" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356121275">(May 05 2023 at 17:09)</a>:</h4>
<p>in a curried language you'd know that because you encounter it very early on in your learning, but in Roc this would be so rare it might be confusing to beginners what two <code>-&gt;</code>s in the same type signature means</p>



<a name="356121879"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356121879" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356121879">(May 05 2023 at 17:11)</a>:</h4>
<p>That might already be the case. IIRC the current parser requires the parens actually.</p>



<a name="356122226"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356122226" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356122226">(May 05 2023 at 17:13)</a>:</h4>
<p>Yup:</p>
<div class="codehilite"><pre><span></span><code>── NOT END OF FILE ───────────────────────────────────────── src/Pg/Result.roc ─

I expected to reach the end of the file, but got stuck here:

135│  apply : Decode a err -&gt; Decode (a -&gt; b) err -&gt; Decode b err
                                                  ^
</code></pre></div>



<a name="356122276"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356122276" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356122276">(May 05 2023 at 17:13)</a>:</h4>
<p>The error could probably be improved though</p>



<a name="356122290"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356122290" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356122290">(May 05 2023 at 17:13)</a>:</h4>
<p>nice - what does the formatter do?</p>



<a name="356122330"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356122330" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356122330">(May 05 2023 at 17:13)</a>:</h4>
<p>(hopefully it doesn't remove the parens!)</p>



<a name="356122469"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356122469" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356122469">(May 05 2023 at 17:14)</a>:</h4>
<p>Crashes without the parens, and doesn't remove them when they are present</p>



<a name="356122587"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356122587" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356122587">(May 05 2023 at 17:14)</a>:</h4>
<p>cool!</p>



<a name="356123241"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356123241" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356123241">(May 05 2023 at 17:18)</a>:</h4>
<p>Made an issue: <a href="https://github.com/roc-lang/roc/issues/5379">https://github.com/roc-lang/roc/issues/5379</a></p>



<a name="356131265"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356131265" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Lövgren <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356131265">(May 05 2023 at 17:54)</a>:</h4>
<p>What I remember from Haskell is that the function arrow is right-associative because of automatic currying. So it makes sense to me that the parentheses are necessary in Roc since it doesn’t automatically curry</p>



<a name="356841717"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356841717" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356841717">(May 09 2023 at 00:56)</a>:</h4>
<p>I'm still thinking about ways to improve errors and such, but it's now in a pretty good state and I opened a draft PR: <a href="https://github.com/roc-lang/roc/pull/5389">https://github.com/roc-lang/roc/pull/5389</a></p>



<a name="356842044"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356842044" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356842044">(May 09 2023 at 00:59)</a>:</h4>
<p>I'm pretty new to Rust and the compiler source, so please let me know if I did anything horrible <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="356843870"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/356843870" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#356843870">(May 09 2023 at 01:13)</a>:</h4>
<p>I'll explore adding a new <a href="https://github.com/roc-lang/roc/blob/7d67ec3f148b9b8545dd5aabfbc08972fed1ac3d/crates/compiler/module/src/called_via.rs#L78"><code>CalledVia</code></a> tomorrow. I think it could help me give better hints for type-errors.</p>



<a name="357136207"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357136207" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357136207">(May 10 2023 at 01:53)</a>:</h4>
<p>Without adding any special code for Record Builders, mismatched record types produce pretty good errors already!<br>
<a href="/user_uploads/22008/mcCbTvZvlCng46ZIzokTwsgU/CleanShot-2023-05-09-at-22.52.372x.png">CleanShot-2023-05-09-at-22.52.372x.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/mcCbTvZvlCng46ZIzokTwsgU/CleanShot-2023-05-09-at-22.52.372x.png" title="CleanShot-2023-05-09-at-22.52.372x.png"><img src="/user_uploads/22008/mcCbTvZvlCng46ZIzokTwsgU/CleanShot-2023-05-09-at-22.52.372x.png"></a></div>



<a name="357136374"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357136374" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357136374">(May 10 2023 at 01:54)</a>:</h4>
<p>These are actually coming from the generated closure, but I don't think they need any special handling</p>



<a name="357136559"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357136559" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357136559">(May 10 2023 at 01:56)</a>:</h4>
<p>The following is one we could improve I think:<br>
<a href="/user_uploads/22008/Gk0kKyc6fCqkLxlPri8Zf6GQ/CleanShot-2023-05-09-at-23.03.102x.png">CleanShot-2023-05-09-at-23.03.102x.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/Gk0kKyc6fCqkLxlPri8Zf6GQ/CleanShot-2023-05-09-at-23.03.102x.png" title="CleanShot-2023-05-09-at-23.03.102x.png"><img src="/user_uploads/22008/Gk0kKyc6fCqkLxlPri8Zf6GQ/CleanShot-2023-05-09-at-23.03.102x.png"></a></div>



<a name="357136595"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357136595" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357136595">(May 10 2023 at 01:57)</a>:</h4>
<p>In that case, I forgot the <code>|&gt; apply</code> at the end</p>



<a name="357136735"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357136735" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357136735">(May 10 2023 at 01:58)</a>:</h4>
<p>Also, this:<br>
<a href="/user_uploads/22008/oGSOHHD_OpBK58BsLfdU7z2K/CleanShot-2023-05-09-at-22.58.232x.png">CleanShot-2023-05-09-at-22.58.232x.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/oGSOHHD_OpBK58BsLfdU7z2K/CleanShot-2023-05-09-at-22.58.232x.png" title="CleanShot-2023-05-09-at-22.58.232x.png"><img src="/user_uploads/22008/oGSOHHD_OpBK58BsLfdU7z2K/CleanShot-2023-05-09-at-22.58.232x.png"></a></div>



<a name="357136753"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357136753" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357136753">(May 10 2023 at 01:59)</a>:</h4>
<p>It'd be great to suggest replacing the <code>&lt;-</code> with a <code>:</code> in that case.</p>



<a name="357137011"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357137011" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357137011">(May 10 2023 at 02:01)</a>:</h4>
<p>I'm going to start with that last one</p>



<a name="357138956"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357138956" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357138956">(May 10 2023 at 02:18)</a>:</h4>
<p><a href="/user_uploads/22008/PHJgQOkPk6-uYpodDlWV7ntg/CleanShot-2023-05-09-at-23.18.332x.png">CleanShot-2023-05-09-at-23.18.332x.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/PHJgQOkPk6-uYpodDlWV7ntg/CleanShot-2023-05-09-at-23.18.332x.png" title="CleanShot-2023-05-09-at-23.18.332x.png"><img src="/user_uploads/22008/PHJgQOkPk6-uYpodDlWV7ntg/CleanShot-2023-05-09-at-23.18.332x.png"></a></div>



<a name="357139304"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357139304" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357139304">(May 10 2023 at 02:21)</a>:</h4>
<p>Wording might have to improve, but I think that's helpful</p>



<a name="357142814"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357142814" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357142814">(May 10 2023 at 02:47)</a>:</h4>
<p>This is very cool <span aria-label="sunglasses" class="emoji emoji-1f60e" role="img" title="sunglasses">:sunglasses:</span></p>



<a name="357148291"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357148291" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357148291">(May 10 2023 at 03:37)</a>:</h4>
<p>In the following code the <code>title</code> field is missing a call to <code>apply</code>:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="w">    </span><span class="nv">succeed</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nv">id</span><span class="w"> </span><span class="nf">&lt;-</span><span class="w"> </span><span class="kt">Pg</span><span class="nf">.</span><span class="kt">Result</span><span class="nf">.</span><span class="nv">i32</span><span class="w"> </span><span class="s">"film_id"</span><span class="w"> </span><span class="nf">|&gt;</span><span class="w"> </span><span class="nv">apply</span><span class="p">,</span>
<span class="w">        </span><span class="nv">title</span><span class="w"> </span><span class="nf">&lt;-</span><span class="w"> </span><span class="kt">Pg</span><span class="nf">.</span><span class="kt">Result</span><span class="nf">.</span><span class="nv">i32</span><span class="w"> </span><span class="s">"title"</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>



<a name="357148336"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357148336" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357148336">(May 10 2023 at 03:37)</a>:</h4>
<p>This is how the error looks without any special logic for record builders:</p>
<p><a href="/user_uploads/22008/y6jldlhaM2fdnZSAKI0KHHe0/CleanShot-2023-05-09-at-23.03.102x.png">CleanShot-2023-05-09-at-23.03.102x.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/y6jldlhaM2fdnZSAKI0KHHe0/CleanShot-2023-05-09-at-23.03.102x.png" title="CleanShot-2023-05-09-at-23.03.102x.png"><img src="/user_uploads/22008/y6jldlhaM2fdnZSAKI0KHHe0/CleanShot-2023-05-09-at-23.03.102x.png"></a></div>



<a name="357148455"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357148455" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357148455">(May 10 2023 at 03:39)</a>:</h4>
<p>and this is what I have so far:<br>
<a href="/user_uploads/22008/rlwT1qbH2qWs8om1kmlajPeM/CleanShot-2023-05-10-at-00.39.062x.png">CleanShot-2023-05-10-at-00.39.062x.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/rlwT1qbH2qWs8om1kmlajPeM/CleanShot-2023-05-10-at-00.39.062x.png" title="CleanShot-2023-05-10-at-00.39.062x.png"><img src="/user_uploads/22008/rlwT1qbH2qWs8om1kmlajPeM/CleanShot-2023-05-10-at-00.39.062x.png"></a></div>



<a name="357148484"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357148484" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357148484">(May 10 2023 at 03:39)</a>:</h4>
<p>which I think it's an improvement, but I'm not convinced</p>



<a name="357148519"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357148519" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357148519">(May 10 2023 at 03:40)</a>:</h4>
<p>It's tricky because we don't know which function they might need to call</p>



<a name="357148704"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357148704" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357148704">(May 10 2023 at 03:41)</a>:</h4>
<p>Also the wording seems awkward</p>



<a name="357148784"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357148784" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357148784">(May 10 2023 at 03:41)</a>:</h4>
<p>I'm gonna go sleep on it!</p>



<a name="357150079"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/357150079" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#357150079">(May 10 2023 at 03:52)</a>:</h4>
<p>Yeah, definitely a weird error message both ways, but I don't have an immediate idea how to make it better.</p>



<a name="358180672"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/358180672" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#358180672">(May 14 2023 at 00:17)</a>:</h4>
<p>This week has been super busy for me, but I finally got some time today to rewrite the parser and improve the errors. I think I'm ready to submit this for review!</p>



<a name="358183176"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/358183176" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#358183176">(May 14 2023 at 00:37)</a>:</h4>
<p><a href="#narrow/stream/316715-contributing/topic/Pull.20Request.20for.20Review/near/358182443">https://roc.zulipchat.com/#narrow/stream/316715-contributing/topic/Pull.20Request.20for.20Review/near/358182443</a></p>



<a name="462274993"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/462274993" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#462274993">(Aug 14 2024 at 06:46)</a>:</h4>
<p>I've been looking at <a href="https://github.com/roc-lang/roc/pull/6995">https://github.com/roc-lang/roc/pull/6995</a> which adds a tutorial section on the new Record Builders, thank you <span class="user-mention" data-user-id="461444">@Sam Mohr</span> </p>
<p>I'm thinking as this is in Advanced Concept section and it should provide only a minimal syntax sugar. Enough that someone who already familiar with the advanced concepts but not necessarily roc syntax would be ok with. We can generally wave our hands about what it is but no try to explain it; instead we can point the reader to a more detailed guide which walks it through from start to finish and builds up to the full feature.</p>
<p>I'm finding I have to really think about things like what it is, how it works, why I would use it, etc. I think a well designed API using record builders will be intuitive for people to use, at least the Sqlite one is very easy to work with as long as I can see a worked example. So I think a very surface level knowledge, essentially "what is this syntax called, this is where I can find more information, and don't sweat the details it's an advanced concept", is ok for a tutorial.</p>



<a name="462275110"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/462275110" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#462275110">(Aug 14 2024 at 06:47)</a>:</h4>
<p>I'm interested to know what others think. It's not easy to write good content and I appreciate the effort that Sam has put into the PR.</p>



<a name="462275321"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/462275321" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#462275321">(Aug 14 2024 at 06:49)</a>:</h4>
<p>To clarify -- I'm wanting to clarify the intent for the tutorial section.</p>



<a name="462275863"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Record%20Builder%20Syntax/near/462275863" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Record.20Builder.20Syntax.html#462275863">(Aug 14 2024 at 06:52)</a>:</h4>
<p>So I guess I'm thinking; I should have a go at writing a guide for Record Builders to explore this further.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>