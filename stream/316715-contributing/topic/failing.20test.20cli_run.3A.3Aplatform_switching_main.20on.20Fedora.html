<html>
<head><meta charset="utf-8"><title>failing test cli_run::platform_switching_main on Fedora Â· contributing Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html">failing test cli_run::platform_switching_main on Fedora</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="406188282"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406188282" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Gravgaard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406188282">(Dec 06 2023 at 00:59)</a>:</h4>
<p>when I run <code>cargo test</code> it says <code>test cli_run::platform_switching_main ... FAILED</code>. Is this expected? Can I help figure out what's wrong?</p>



<a name="406189520"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406189520" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406189520">(Dec 06 2023 at 01:06)</a>:</h4>
<p>not expected, but it may be some sort of os config</p>



<a name="406189569"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406189569" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406189569">(Dec 06 2023 at 01:07)</a>:</h4>
<p>I would start by trying to run that file directly</p>



<a name="406189614"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406189614" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406189614">(Dec 06 2023 at 01:07)</a>:</h4>
<p>something like <code>cargo run examples/platform-switching/main.roc</code></p>



<a name="406189621"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406189621" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406189621">(Dec 06 2023 at 01:07)</a>:</h4>
<p>see what it tells you</p>



<a name="406190247"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406190247" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Gravgaard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406190247">(Dec 06 2023 at 01:12)</a>:</h4>
<p>thanks, that says:<br>
<code>Inconsistency detected by ld.so: dl-runtime.c: 63: _dl_fixup: Assertion `ELFW(R_TYPE)(reloc-&gt;r_info) == ELF_MACHINE_JMP_SLOT' failed!</code></p>



<a name="406193585"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406193585" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406193585">(Dec 06 2023 at 01:38)</a>:</h4>
<p>Interesting. Can you try with <code>--linker=legacy</code></p>



<a name="406264043"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406264043" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Gravgaard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406264043">(Dec 06 2023 at 09:16)</a>:</h4>
<p>Thanks Brendan. That doesn't crash but it also doesn't output anything:</p>
<div class="codehilite"><pre><span></span><code>$ cargo run examples/platform-switching/main.roc --linker=legacy
    Finished dev [unoptimized + debuginfo] target(s) in 0.18s
     Running `target/debug/roc examples/platform-switching/main.roc --linker=legacy`
ðŸ”¨ Rebuilding platform...
Which platform am I running on now?

$
</code></pre></div>



<a name="406272616"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406272616" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406272616">(Dec 06 2023 at 10:06)</a>:</h4>
<p>It worked as expected there, "Which platform am I running on now?" is the output.</p>



<a name="406273443"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406273443" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406273443">(Dec 06 2023 at 10:12)</a>:</h4>
<p>Can you share what OS you are using <span class="user-mention" data-user-id="499661">@Nick Gravgaard</span>?</p>



<a name="406299875"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406299875" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Gravgaard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406299875">(Dec 06 2023 at 13:01)</a>:</h4>
<p>Sure, Fedora 39 on x86_64 (AMD)</p>



<a name="406300996"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/failing%20test%20cli_run%3A%3Aplatform_switching_main%20on%20Fedora/near/406300996" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/failing.20test.20cli_run.3A.3Aplatform_switching_main.20on.20Fedora.html#406300996">(Dec 06 2023 at 13:07)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="499661">@Nick Gravgaard</span>, this is being tracked in <a href="https://github.com/roc-lang/roc/issues/5943">#5943</a></p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>