<html>
<head><meta charset="utf-8"><title>Num.pow can return NaN · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Num.2Epow.20can.20return.20NaN.html">Num.pow can return NaN</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="279045712"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Num.pow%20can%20return%20NaN/near/279045712" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Gillette <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Num.2Epow.20can.20return.20NaN.html#279045712">(Apr 15 2022 at 03:11)</a>:</h4>
<p><code>Num.sqrt</code> is planned to panic on negative values, yet <code>Num.pow n 0.5</code> is equivalently a square root operation and returns NaN on negative values.</p>
<div class="codehilite"><pre><span></span><code>» Num.pow -1 0.5

NaN : Float *
</code></pre></div>
<p>Should we plan to make <code>pow</code> panic on roots of negative values, and add a corresponding <code>Num.powChecked</code>?</p>



<a name="279086006"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Num.pow%20can%20return%20NaN/near/279086006" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Num.2Epow.20can.20return.20NaN.html#279086006">(Apr 15 2022 at 14:40)</a>:</h4>
<p>great catch!</p>



<a name="279086092"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Num.pow%20can%20return%20NaN/near/279086092" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Num.2Epow.20can.20return.20NaN.html#279086092">(Apr 15 2022 at 14:41)</a>:</h4>
<p>I actually think we should leave this alone for now - once abilities have fully landed, and in particular once we disallow equality for floats (based on previous discussions) we'll presumably want to end up with both <code>pow</code> and <code>sqrt</code> being allowed to return <code>NaN</code></p>



<a name="279086103"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Num.pow%20can%20return%20NaN/near/279086103" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Num.2Epow.20can.20return.20NaN.html#279086103">(Apr 15 2022 at 14:41)</a>:</h4>
<p>I think it's okay if they're inconsistent in the meantime <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="279140350"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Num.pow%20can%20return%20NaN/near/279140350" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Gillette <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Num.2Epow.20can.20return.20NaN.html#279140350">(Apr 16 2022 at 01:39)</a>:</h4>
<p>What is the general intent? Are abilities providing a great way to express checked vs panicking vs nan'ing variants of an operation, or are abilities just changing enough lines of code everywhere that we don't want the abilities work to deal with too many merge conflicts?</p>



<a name="279147525"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Num.pow%20can%20return%20NaN/near/279147525" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Num.2Epow.20can.20return.20NaN.html#279147525">(Apr 16 2022 at 04:42)</a>:</h4>
<p>More of the former, abilities will just allow us to express in Roc code things we can't readily do today</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>