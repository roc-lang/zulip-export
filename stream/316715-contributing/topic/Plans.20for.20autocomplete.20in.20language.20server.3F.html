<html>
<head><meta charset="utf-8"><title>Plans for autocomplete in language server? · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html">Plans for autocomplete in language server?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="404887506"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/404887506" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#404887506">(Nov 29 2023 at 15:04)</a>:</h4>
<p>I'm wondering if there is any plan for adding autocomplete to the language server? I believe I've seen it mentioned that autocomplete isn't possible right now because the compiler doesn't support it. If that's likely to be a long way off how interested would folks here be in using tree-sitter to provide autocomplete? <br>
It would be basic, no docs (at least from imports, you could provide docs from the local file) and limited ability to tell the type's of imports and fields of records(may be possible), but tree-sitter has enough info to at least provide autocomplete that only includes functions/variables actually available within the scope you are in. This wouldn't be too hard to implement in a very basic way to tide people over.<br>
Just gauging interest :)</p>



<a name="404888685"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/404888685" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#404888685">(Nov 29 2023 at 15:09)</a>:</h4>
<p>In principle the language server should be able to support auto-complete without any considerable effort, someone just needs to implement it</p>



<a name="404888771"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/404888771" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#404888771">(Nov 29 2023 at 15:10)</a>:</h4>
<p>But if the tree-sitter autocomplete is also trivial to set up, I think it would definitely be useful</p>



<a name="404984352"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/404984352" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#404984352">(Nov 30 2023 at 01:34)</a>:</h4>
<p>Oh okay, well maybe I'll look into setting up a proper implementation. While we are on the topic, why is the language server not written in roc?<br>
Seems like it would be a good project to show off some quality roc code, language Servers tend to include most common coding patterns, error handling, io, IPC, event driven architecture, testing, etc.</p>



<a name="404984756"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/404984756" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#404984756">(Nov 30 2023 at 01:38)</a>:</h4>
<p>Just because the compiler is also written in Rust, so it enables a lot of code reuse. Writing a language server in Roc would be great. But it would require a lot of effort (parsing, type checking) that I didn't want to put in. If someone wants to try to write a Roc-based LSP, it could be a great project. You could even use the Roc compiler as a platform and have the LSP-specific logic in Roc to begin with</p>



<a name="404986324"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/404986324" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#404986324">(Nov 30 2023 at 01:52)</a>:</h4>
<p>Oh yeah, that makes sense, I assumed that it might be for tighter integration with the compiler. I was thinking you'd have to expose the compiler services to roc via some json-rpc type interface and call into it, but making it a platform does seem like a solution. Shows that I'm clearly not thinking about things the roc way yet <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="404986785"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/404986785" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#404986785">(Nov 30 2023 at 01:54)</a>:</h4>
<p>The nice thing is there are multiple ways for sure :)</p>



<a name="404986927"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/404986927" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#404986927">(Nov 30 2023 at 01:55)</a>:</h4>
<p>long-term I actually would like to eliminate the JSON-RPC overhead of LSP in most editor extensions, by having the compiler expose a <code>libroc</code> C library that extensions can call directly in the same way! <span aria-label="rocket" class="emoji emoji-1f680" role="img" title="rocket">:rocket:</span></p>



<a name="404987139"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/404987139" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#404987139">(Nov 30 2023 at 01:56)</a>:</h4>
<p>but LSP is definitely a huge step forward for Roc tooling, and is also worth having indefinitely regardless because there will always be new editors that will support LSP but won't have a dedicated Roc extension etc.</p>



<a name="404987532"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/404987532" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#404987532">(Nov 30 2023 at 01:58)</a>:</h4>
<p>Well that would be interesting... Though, how much overhead do you think jsonrpc actually adds? I couldn't say accurately, but I've worked on 3 language Servers and I would guess that the time spent in the compiler doing stuff like type checking completely dwarfs it.</p>



<a name="405274086"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/405274086" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#405274086">(Dec 01 2023 at 04:34)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span>  I felt like my statement there wasn't very well substantiated,  so i did some testing to back it up. <br>
I made a jsonrpc connection between two  ocaml programs( the language I've most recently been doing some lsp stuff in) and then sequentially sent 1000 requests that had 1000 lines of json as the response.<br>
No work was done on either end except deserializing the request and serializing the response.<br>
The time per request on my laptop was 0.2ms. <br>
I would consider this completely meaningless overhead.</p>



<a name="405389688"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/405389688" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#405389688">(Dec 01 2023 at 15:45)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/6134">https://github.com/roc-lang/roc/pull/6134</a><br>
Okay that's an initial draft for the completion, it's all a bit of a mess but I thought I'd better at least let people know I'm working on it :)</p>



<a name="405488743"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/405488743" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#405488743">(Dec 02 2023 at 04:11)</a>:</h4>
<p>If anyone wants to use this for AOC or the like it's currently working well, supporting local variables,function args, pattern matching, destructing etc. no types, tags, or imports though. And I couldn't figure out how to get the data from a backpassing expression so that one might be a little while. Should add more in the coming days</p>



<a name="405882783"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/405882783" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Domurad <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#405882783">(Dec 04 2023 at 17:53)</a>:</h4>
<p>roc_ls is really helpful - just discovered that it exist :D</p>
<p>Are there any plans to add <code>roc_ls</code> to the nightly builds? <br>
I'm coding roc mainly on a laptop on which I can't use tools like nix to build it from source :(</p>



<a name="405884938"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/405884938" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#405884938">(Dec 04 2023 at 18:06)</a>:</h4>
<p>We've talked about that before but we did not want it bundled with the nightly forever and thus did not want people to rely on it being there. We failed to come up with a good compromise. I can't seem to find that dicussion...</p>



<a name="405885328"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/405885328" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#405885328">(Dec 04 2023 at 18:09)</a>:</h4>
<p>I thought the most recent dicussion on this was that we should probably directly add it to the <code>roc</code> executable as a sub command.</p>



<a name="405885542"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/405885542" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#405885542">(Dec 04 2023 at 18:10)</a>:</h4>
<p>Though maybe I just mixed up messages...</p>



<a name="405893643"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/405893643" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#405893643">(Dec 04 2023 at 19:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="634290">Artur Domurad</span> <a href="#narrow/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F/near/405882783">said</a>:</p>
<blockquote>
<p>roc_ls is really helpful - just discovered that it exist :D</p>
<p>Are there any plans to add <code>roc_ls</code> to the nightly builds? <br>
I'm coding roc mainly on a laptop on which I can't use tools like nix to build it from source :(</p>
</blockquote>
<p>Fwiw I was able to build roc_ls without needing nix. I do think I installed llvm on brew though.</p>



<a name="405897117"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/405897117" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Artur Domurad <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#405897117">(Dec 04 2023 at 19:24)</a>:</h4>
<p>It worked :O <br>
<code>git clone ...</code> and <code>cargo build -p roc_lang_srv --release</code> - without nix.</p>
<p>Thanks,  advent of code tomorrow will be a much nicer experience &lt;3</p>



<a name="405973635"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/405973635" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pearce Keesling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#405973635">(Dec 05 2023 at 04:53)</a>:</h4>
<p>I think it all ends up playing nicer since language server doesn't need to do any codegen</p>



<a name="405990578"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/405990578" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#405990578">(Dec 05 2023 at 07:10)</a>:</h4>
<p>I added support for record fields today as well.</p>
<p>Unfortunately I think that's the last one I'm going to be able to easily implement, it seems like the current way the the document is loaded doesn't expose imports and type definitions. I have been digging around the the compiler a bit but I think someone with some more experience would be better off taking a look at how to surface that info. <br>
I can clean this up and see about closing the PR with the current parts working.</p>
<p>I am also taking a look at fixing the nasty delay in completion and hover. Currently we tie the completion and hover to the document having been typechecked. My proposed solution is that we store:<br>
The latest typechecked document,<br>
The last typecheck that didn't completely fail, (this I've already done)<br>
Ideally you could get symbols almost immediately for any changed versions of the document(I assume the parsing step is very quick), and use the typecheck results from the previous version. If splitting that out of the loading process is difficult we can just immediately provide the lineinfo for the new document which is enough for completions, and we could change how hover works to use that too. </p>
<p>I am in the process of implementing the second solution, but rust is hard and it's been ages, so I'm lost in a hell of lifetimes and borrow checking right now. <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="406237952"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/406237952" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Lindskogen <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#406237952">(Dec 06 2023 at 06:39)</a>:</h4>
<p><span class="user-mention" data-user-id="651372">@Eli Dowling</span>  Not sure if this is the right place to ask, but I tried running <code>roc_ls</code> with the <a href="https://marketplace.visualstudio.com/items?itemName=IvanDemchenko.roc-lang-unofficial">vscode extension</a> from your fork, and it keeps crashing with this message:</p>
<div class="codehilite"><pre><span></span><code>got document
starting to get completion items for prefix:
decl:&quot;simple&quot;
check if prefix &quot;p&quot; matches &quot;simple&quot;
decl:&quot;main&quot;
check if prefix &quot;p&quot; matches &quot;main&quot;
decl:&quot;run&quot;
check if prefix &quot;p&quot; matches &quot;run&quot;
check if prefix &quot;p&quot; matches &quot;part2&quot;
check if prefix &quot;p&quot; matches &quot;part1&quot;
check if prefix &quot;p&quot; matches &quot;countWays&quot;
check if prefix &quot;p&quot; matches &quot;parse2&quot;
check if prefix &quot;p&quot; matches &quot;parse&quot;
check if prefix &quot;p&quot; matches &quot;input&quot;
completion begin
check if prefix &quot;p&quot; matches &quot;parseNums&quot;
got completions:
[Error - 07:37:46] Request completionItem/resolve failed.
  Message: Method not found
  Code: -32601
</code></pre></div>
<p>Do you want a repro? Or am I just holding it wrong? <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="406239732"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/406239732" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#406239732">(Dec 06 2023 at 06:49)</a>:</h4>
<p><span class="user-mention" data-user-id="668691">@Johan Lindskogen</span>  No no, please do send a sample over, and I'll take a look.</p>



<a name="406240440"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/406240440" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Lindskogen <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#406240440">(Dec 06 2023 at 06:53)</a>:</h4>
<p>I have a short repro here:</p>
<div class="codehilite"><pre><span></span><code>app &quot;hello&quot;
    packages { pf: &quot;https://github.com/roc-lang/basic-cli/releases/download/0.7.0/bkGby8jb0tmZYsy2hg1E_B2QrCgcSTxdUlHtETwm5m4.tar.br&quot; }
    imports [pf.Stdout]
    provides [main] to pf

simple1 = 100

main =

    Stdout.line
        &quot;done&quot;
</code></pre></div>
<p>Just type <code>simple</code> in the main function and it "crashes" for every keystroke</p>



<a name="406240950"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/406240950" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Lindskogen <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#406240950">(Dec 06 2023 at 06:55)</a>:</h4>
<p>I just realised the error might be that I am running your branch against the nightly build of roc. Is it <strong>really important</strong> that I keep <code>roc_ls</code> in sync with the <code>roc</code> binary?</p>



<a name="406326752"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/406326752" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#406326752">(Dec 06 2023 at 15:14)</a>:</h4>
<p>It shouldn't be. I'll check out your example soonish, I'm currently still rewriting a bunch of stuff to remove all the delays in completion, so it might take me a little while.</p>



<a name="406989914"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/406989914" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#406989914">(Dec 10 2023 at 00:55)</a>:</h4>
<p><span class="user-mention" data-user-id="668691">@Johan Lindskogen</span> Sorry for the wait. I just tested this with the latest version and it all seems good :)</p>



<a name="407215312"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Plans%20for%20autocomplete%20in%20language%20server%3F/near/407215312" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Lindskogen <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Plans.20for.20autocomplete.20in.20language.20server.3F.html#407215312">(Dec 11 2023 at 10:55)</a>:</h4>
<p>Thank you! It seems to get further, but now I get this:</p>
<div class="codehilite"><pre><span></span><code>thread &#39;main&#39; panicked at &#39;Cannot block the current thread from within a runtime. This happens because a function attempted to block the current thread while the thread is being used to drive asynchronous tasks.&#39;, crates/lang_srv/src/registry.rs:140:14
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre></div>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>