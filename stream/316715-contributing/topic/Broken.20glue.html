<html>
<head><meta charset="utf-8"><title>Broken glue · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html">Broken glue</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="339224666"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339224666" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339224666">(Mar 02 2023 at 23:28)</a>:</h4>
<p>I started debugging glue on basic-cli. When I run it on <code>main.roc</code>, it's falling into <a href="https://github.com/roc-lang/roc/blob/266e592ae2596a93d13058f19fec123a72858751/crates/glue/src/types.rs#L982">this <code>unreachable!</code></a> because it finds a <code>Result</code> but type is <code>Layout::Struct</code>.</p>
<p>I believe it should be <code>Layout::Union</code> so that it matches <a href="https://github.com/roc-lang/roc/blob/266e592ae2596a93d13058f19fec123a72858751/crates/glue/src/types.rs#L899">this case</a>.</p>



<a name="339225190"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339225190" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339225190">(Mar 02 2023 at 23:34)</a>:</h4>
<p>I'm trying to figure out how to get the position in the source code</p>



<a name="339225285"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339225285" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339225285">(Mar 02 2023 at 23:34)</a>:</h4>
<p><code>Layout::Struct</code> is generated for <code>Result</code>s if either the ok or error type is void, for example <code>Result Foo []</code> can only ever be <code>Ok Foo</code>, so we compile it to just the layout of <code>Foo</code></p>



<a name="339225330"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339225330" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339225330">(Mar 02 2023 at 23:35)</a>:</h4>
<p>Unfortunately there is presently not enough debug information to trace you back to the source code position</p>



<a name="339225429"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339225429" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339225429">(Mar 02 2023 at 23:36)</a>:</h4>
<p>however, if you print out the types reached to that position (<code>dbg!(subs.dbg(var))</code>) it might give you enough hints to contextualize where the type was defined</p>



<a name="339226217"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339226217" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339226217">(Mar 02 2023 at 23:45)</a>:</h4>
<p>Oh, I see. So we should be handling this case then.</p>



<a name="339226300"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339226300" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339226300">(Mar 02 2023 at 23:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="454654">Ayaz Hafiz</span> <a href="#narrow/stream/316715-contributing/topic/Broken.20glue/near/339225429">said</a>:</p>
<blockquote>
<p>however, if you print out the types reached to that position (<code>dbg!(subs.dbg(var))</code>) it might give you enough hints to contextualize where the type was defined</p>
</blockquote>
<p>Ok, it's a <code>Result {} []</code> somewhere</p>



<a name="339226520"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339226520" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339226520">(Mar 02 2023 at 23:48)</a>:</h4>
<p>Weirdly I can't seem to find one like that in <code>basic-cli</code>. There are a few <code>Result {} {}</code> but I believe that would be <code>Layout::Union</code> following your logic.</p>



<a name="339229007"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339229007" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339229007">(Mar 03 2023 at 00:10)</a>:</h4>
<p>Ah, <code>Task</code> holds a <code>Result</code> and <code>main.roc</code> has a <code>Task {} []</code></p>



<a name="339229424"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339229424" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339229424">(Mar 03 2023 at 00:14)</a>:</h4>
<p>Ok, all is clear then. This is a real case and we have to handle <code>Layout::Struct</code> <code>Result</code>.</p>



<a name="339322385"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339322385" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339322385">(Mar 03 2023 at 11:50)</a>:</h4>
<p>I added that case and now it doesn't crash, but it also doesn't generate anything</p>



<a name="339323044"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339323044" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339323044">(Mar 03 2023 at 11:53)</a>:</h4>
<p>It's finding only what's under <a href="https://github.com/roc-lang/basic-cli/blob/main/src/main.roc">main.roc</a> and not all the other modules such as <code>Effect</code> and its dependencies.</p>



<a name="339323401"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339323401" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339323401">(Mar 03 2023 at 11:54)</a>:</h4>
<p>it crawls from the type of <code>mainForHost</code> (or should, anyway)</p>



<a name="339323573"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339323573" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339323573">(Mar 03 2023 at 11:55)</a>:</h4>
<p>Right, I think it is. However, <code>mainForHost</code> references <code>Task</code> which references <code>InternalTask</code> which references  <code>Effect</code> and it doesn't seem to find any of those.</p>



<a name="339324548"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339324548" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339324548">(Mar 03 2023 at 12:00)</a>:</h4>
<p>more specifically, no rust code is generated for those types?</p>



<a name="339324833"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339324833" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339324833">(Mar 03 2023 at 12:01)</a>:</h4>
<p>Correct. This is all it generates:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">// ⚠️ GENERATED CODE ⚠️ - this entire file was generated by the `roc glue` CLI command</span>

<span class="cp">#![allow(unused_unsafe)]</span>
<span class="cp">#![allow(dead_code)]</span>
<span class="cp">#![allow(unused_mut)]</span>
<span class="cp">#![allow(non_snake_case)]</span>
<span class="cp">#![allow(non_camel_case_types)]</span>
<span class="cp">#![allow(non_upper_case_globals)]</span>
<span class="cp">#![allow(clippy::undocumented_unsafe_blocks)]</span>
<span class="cp">#![allow(clippy::redundant_static_lifetimes)]</span>
<span class="cp">#![allow(clippy::unused_unit)]</span>
<span class="cp">#![allow(clippy::missing_safety_doc)]</span>
<span class="cp">#![allow(clippy::let_and_return)]</span>
<span class="cp">#![allow(clippy::missing_safety_doc)]</span>
<span class="cp">#![allow(clippy::redundant_static_lifetimes)]</span>
<span class="cp">#![allow(clippy::needless_borrow)]</span>
<span class="cp">#![allow(clippy::clone_on_copy)]</span>
</code></pre></div>



<a name="339325089"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339325089" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339325089">(Mar 03 2023 at 12:02)</a>:</h4>
<p>Which makes sense because these are all the types it finds:</p>
<div class="codehilite"><pre><span></span><code>    types: [
        Unit,
        EmptyTagUnion,
        RocResult(
            TypeId(
                0,
            ),
            TypeId(
                1,
            ),
        ),
        Function {
            name: &quot;TODO_roc_function_71&quot;,
            args: [
                TypeId(
                    0,
                ),
            ],
            ret: TypeId(
                2,
            ),
        },
    ],
</code></pre></div>



<a name="339325310"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339325310" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339325310">(Mar 03 2023 at 12:03)</a>:</h4>
<p>Just the stuff on <a href="https://github.com/roc-lang/basic-cli/blob/main/src/main.roc">main.roc</a> if I'm reading correctly</p>



<a name="339325543"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339325543" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339325543">(Mar 03 2023 at 12:04)</a>:</h4>
<p>and all of those are skipped here: <a href="https://github.com/roc-lang/roc/blob/3b5f6ef8285fb4177f24c7094c807ca9fb6485ec/crates/glue/src/rust_glue.rs#L282-L299">https://github.com/roc-lang/roc/blob/3b5f6ef8285fb4177f24c7094c807ca9fb6485ec/crates/glue/src/rust_glue.rs#L282-L299</a></p>



<a name="339326020"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339326020" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339326020">(Mar 03 2023 at 12:06)</a>:</h4>
<p><code>mainForHost</code> returns a <code>Task</code> though, I think the debug output above says it returns a <code>Result</code>. I guess that's getting optimized away?</p>



<a name="339326251"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339326251" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339326251">(Mar 03 2023 at 12:07)</a>:</h4>
<p>I see, I think this makes sense.</p>



<a name="339326599"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339326599" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339326599">(Mar 03 2023 at 12:08)</a>:</h4>
<p>an effect is internally generated as a thunk (<code>Effect a := {} -&gt; a</code>). I'm assuming you're looking at our <code>main</code> branch, and there we don't generate anything for functions yet</p>



<a name="339326690"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339326690" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339326690">(Mar 03 2023 at 12:08)</a>:</h4>
<p>we have an experimental branch that does handle functions</p>



<a name="339326727"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339326727" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339326727">(Mar 03 2023 at 12:09)</a>:</h4>
<p>but some other stuff is still broken on that branch</p>



<a name="339327143"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339327143" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339327143">(Mar 03 2023 at 12:10)</a>:</h4>
<p>Oh. Yes, I'm on <code>main</code>. Do you mean <code>glue</code> can generate functions in that experimental branch?</p>



<a name="339327230"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339327230" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339327230">(Mar 03 2023 at 12:10)</a>:</h4>
<p>it can generate glue for function types, yes</p>



<a name="339327285"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339327285" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339327285">(Mar 03 2023 at 12:11)</a>:</h4>
<p>our actual compilation scheme for functions is a bit involved</p>



<a name="339327473"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339327473" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339327473">(Mar 03 2023 at 12:11)</a>:</h4>
<p>I see. I wonder if the existing <a href="https://github.com/roc-lang/basic-cli/blob/main/src/src/glue.rs">glue code in basic-cli</a> was generated using glue on that branch.</p>



<a name="339327592"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339327592" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339327592">(Mar 03 2023 at 12:12)</a>:</h4>
<p>Maybe that's all I need to do</p>



<a name="339327758"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339327758" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339327758">(Mar 03 2023 at 12:13)</a>:</h4>
<p>(the branch with functions is <code>glue-getters-rtfeldman</code>, but it's in an unfinished state)</p>



<a name="339327812"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339327812" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339327812">(Mar 03 2023 at 12:13)</a>:</h4>
<p>well that glue file does not contain anything for <code>Task</code> or <code>Effect</code></p>



<a name="339328173"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339328173" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339328173">(Mar 03 2023 at 12:15)</a>:</h4>
<p>Yeah, so that might not be the issue then. What I wanted to generate was error types like these: <a href="https://github.com/roc-lang/basic-cli/blob/main/src/InternalFile.roc">https://github.com/roc-lang/basic-cli/blob/main/src/InternalFile.roc</a></p>



<a name="339328289"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339328289" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339328289">(Mar 03 2023 at 12:15)</a>:</h4>
<p>Which were somehow generated here: <a href="https://github.com/roc-lang/basic-cli/blob/main/src/src/file_glue.rs">https://github.com/roc-lang/basic-cli/blob/main/src/src/file_glue.rs</a></p>



<a name="339328414"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339328414" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339328414">(Mar 03 2023 at 12:16)</a>:</h4>
<p>right, but from what I know that type needs to be reachable from the type of <code>mainForHost</code> and it isn't because glue stops when it hits a function type and it always does for basic-cli</p>



<a name="339328438"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339328438" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339328438">(Mar 03 2023 at 12:16)</a>:</h4>
<p>so I'm not sure how that glue was generated</p>



<a name="339328749"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339328749" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339328749">(Mar 03 2023 at 12:18)</a>:</h4>
<p>Right, that's what I understood from you. Maybe at some point there was a version of glue that generated all the types that <code>Task</code>and <code>Effect</code> reference but nothing for themselves?</p>



<a name="339328891"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339328891" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339328891">(Mar 03 2023 at 12:19)</a>:</h4>
<p>Sorry if I'm saying something stupid, this is my first endeavor into the compiler :D</p>



<a name="339329186"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339329186" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339329186">(Mar 03 2023 at 12:20)</a>:</h4>
<p>yeah no clearly at some point this glue was generated.</p>



<a name="339329238"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339329238" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339329238">(Mar 03 2023 at 12:20)</a>:</h4>
<p>Richard will know all of the details</p>



<a name="339330987"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339330987" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339330987">(Mar 03 2023 at 12:28)</a>:</h4>
<p>Tried running it on that branch and it hit the same <code>unreachable!()</code> for the <code>Layout::Struct</code> <code>Result</code>. I added that case and it generated some code for function as you said it would but still nothing for the types.</p>



<a name="339331029"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339331029" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339331029">(Mar 03 2023 at 12:28)</a>:</h4>
<p>I'll wait for Richard to give me some more context</p>



<a name="339333378"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339333378" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339333378">(Mar 03 2023 at 12:40)</a>:</h4>
<p>In case it helps, my workaround for the fact that glue doesn't handle functions, is to just define a constant of each type you care about! This works as long as the types don't have lambdas inside them!</p>



<a name="339333525"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339333525" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339333525">(Mar 03 2023 at 12:41)</a>:</h4>
<p>At least that used to work a few months ago</p>



<a name="339334201"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339334201" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339334201">(Mar 03 2023 at 12:44)</a>:</h4>
<p>in the <code>main.roc</code> you mean?</p>



<a name="339334403"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339334403" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339334403">(Mar 03 2023 at 12:45)</a>:</h4>
<p>yeah</p>



<a name="339334579"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339334579" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339334579">(Mar 03 2023 at 12:46)</a>:</h4>
<p>whatever Roc file you pass to the glue generator</p>



<a name="339336394"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339336394" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339336394">(Mar 03 2023 at 12:54)</a>:</h4>
<p>Just tried that but it failed because of the unused constant:</p>
<div class="codehilite"><pre><span></span><code>thread &#39;main&#39; panicked at &#39;not yet implemented: Gracefully report compilation problems during glue generation:

[UnusedDef(`16.IdentId(2)`, @233-240)], []&#39;, crates/glue/src/load.rs:125:9
</code></pre></div>



<a name="339337329"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339337329" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339337329">(Mar 03 2023 at 12:59)</a>:</h4>
<p>you might be able to get away with adding</p>
<div class="codehilite"><pre><span></span><code>main = 
    when someConstant is
        _ -&gt; rest of main
</code></pre></div>



<a name="339338315"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339338315" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339338315">(Mar 03 2023 at 13:03)</a>:</h4>
<p>Ooh, that did work! Thanks</p>



<a name="339338500"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339338500" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339338500">(Mar 03 2023 at 13:04)</a>:</h4>
<p>It still doesn't work as it is on <code>main</code> because of the unreachable crash for <code>Result</code>, but it does if handle that case</p>



<a name="339339068"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339339068" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339339068">(Mar 03 2023 at 13:06)</a>:</h4>
<p>you can make a PR for handling that result case</p>



<a name="339339108"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339339108" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339339108">(Mar 03 2023 at 13:06)</a>:</h4>
<p>then we'll merge it in everywhere</p>



<a name="339339382"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339339382" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339339382">(Mar 03 2023 at 13:07)</a>:</h4>
<p>Yeah but I think that Roc programs would still crash becase the memory layout won't line up for things returning <code>Result _ []</code></p>



<a name="339339662"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339339662" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339339662">(Mar 03 2023 at 13:08)</a>:</h4>
<p>I think <code>roc_std</code> is always using the union layout for <code>Result</code></p>



<a name="339339742"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339339742" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339339742">(Mar 03 2023 at 13:08)</a>:</h4>
<p>ah, yes that is correct</p>



<a name="339339803"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339339803" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339339803">(Mar 03 2023 at 13:08)</a>:</h4>
<p>so that needs some special handling</p>



<a name="339339862"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339339862" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339339862">(Mar 03 2023 at 13:08)</a>:</h4>
<p>which is maybe why the file example is marked as "broken" in <code>basic-cli</code></p>



<a name="339339976"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339339976" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339339976">(Mar 03 2023 at 13:09)</a>:</h4>
<p>right</p>



<a name="339340750"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339340750" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339340750">(Mar 03 2023 at 13:12)</a>:</h4>
<p>Should <code>roc_std</code> expose a <code>NoErrorResult</code> or something like that?</p>



<a name="339341303"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339341303" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339341303">(Mar 03 2023 at 13:14)</a>:</h4>
<p>hmm I'm not sure</p>



<a name="339341335"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339341335" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339341335">(Mar 03 2023 at 13:14)</a>:</h4>
<p>You could mess up and use it when you're supposed to use the normal <code>Result</code>. However, you can also mess up by returning any other invalid type.</p>



<a name="339341666"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339341666" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339341666">(Mar 03 2023 at 13:15)</a>:</h4>
<p>Will glue eventually expose a trait for the implementation of the <code>roc_fx_</code> functions so that you get type errors in the platform?</p>



<a name="339342596"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339342596" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Folkert de Vries <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339342596">(Mar 03 2023 at 13:19)</a>:</h4>
<p>well the alternative is to generate "hidden" glue for the "noerrorresult" (which is just another roc value) and then expose it after wrapping in a normal <code>RocResult</code></p>



<a name="339344090"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339344090" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339344090">(Mar 03 2023 at 13:25)</a>:</h4>
<p>Not sure I follow how that would work in practice. Would you generate a type per Effect function?</p>



<a name="339383229"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339383229" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339383229">(Mar 03 2023 at 15:58)</a>:</h4>
<p><code>roc_fx_</code> functions should be going away when glue gets more powerful</p>



<a name="339383334"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339383334" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339383334">(Mar 03 2023 at 15:59)</a>:</h4>
<p>They will be replaced with tag union, state machine based effects</p>



<a name="339383414"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339383414" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339383414">(Mar 03 2023 at 15:59)</a>:</h4>
<p>Richard has talked about the new approach in some previous meetups.</p>



<a name="339383670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339383670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339383670">(Mar 03 2023 at 16:00)</a>:</h4>
<p>Maybe <code>roc_fx_</code> functions were not directly mentioned, but they should become redundant like the hosted module and I believe <code>Effect</code> in general</p>



<a name="339383878"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339383878" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339383878">(Mar 03 2023 at 16:01)</a>:</h4>
<p>Also, for the glue gen you want, can you make a dummy main file that just has a return type of the types you want generated. No tasks at all?</p>



<a name="339403241"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339403241" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339403241">(Mar 03 2023 at 17:24)</a>:</h4>
<p>Yeah, that’ll probably work as I’m not returning any <code>Result _ []</code>. Will give it a try tonight!</p>



<a name="339403254"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/339403254" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#339403254">(Mar 03 2023 at 17:24)</a>:</h4>
<p>Thanks</p>



<a name="410577723"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/410577723" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Lindskogen <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#410577723">(Dec 30 2023 at 22:35)</a>:</h4>
<p>Working on <a href="https://github.com/roc-lang/basic-cli/issues/145">https://github.com/roc-lang/basic-cli/issues/145</a> I think I ran into a similar issue, basically; how do I regenerate the glue for basic-cli? </p>
<p><code>roc glue ../roc/crates/glue/src/RustGlue.roc platform/src/ platform/main.roc</code> outputs an entirely different file structure than the existing one with <code>file_glue.rs, dir_glue.rs, command_glue.rs</code></p>
<ul>
<li>instead I get <code>mod.rs, aarch64.rs, wasm32.rs</code> - and the files are not updated.  </li>
</ul>
<p>(<span class="user-mention" data-user-id="515757">@Luke Boswell</span> refers to converting it to use <code>RustGlue</code> here: <a href="#narrow/stream/316715-contributing/topic/basic-cli.20glue/near/397443629">https://roc.zulipchat.com/#narrow/stream/316715-contributing/topic/basic-cli.20glue/near/397443629</a>)</p>



<a name="410580968"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/410580968" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#410580968">(Dec 30 2023 at 23:36)</a>:</h4>
<p>Glue for basic-cli has basically been manually put together rn. I have a WIP PR to make it so we can regenerate using a script, but I cant remember where I got to with that.</p>



<a name="410580997"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/410580997" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#410580997">(Dec 30 2023 at 23:37)</a>:</h4>
<p>Are you trying to add new features? If so you can make a fake platform and then just include the types you want and glue can generate for those types you need.</p>



<a name="410581155"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/410581155" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#410581155">(Dec 30 2023 at 23:40)</a>:</h4>
<p>This is the PR I'm refrring to <a href="https://github.com/roc-lang/basic-cli/pull/135">https://github.com/roc-lang/basic-cli/pull/135</a></p>



<a name="410809131"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/410809131" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Lindskogen <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#410809131">(Jan 02 2024 at 08:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/316715-contributing/topic/Broken.20glue/near/410580997">said</a>:</p>
<blockquote>
<p>Are you trying to add new features? If so you can make a fake platform and then just include the types you want and glue can generate for those types you need.</p>
</blockquote>
<p>Yes, I am adding <code>Path.x</code> methods in this issue <a href="https://github.com/roc-lang/basic-cli/issues/145">https://github.com/roc-lang/basic-cli/issues/145</a></p>



<a name="410821346"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/410821346" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#410821346">(Jan 02 2024 at 09:57)</a>:</h4>
<p>I've been updating that PR, it looks like it should be all OK to me, but for some reason it is getting stuck in CI creating a directory. </p>
<p>I did update <code>examples/dir.roc</code> to make it clearer, but I don't see how this change is affecting tests in CI.</p>



<a name="410825259"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/410825259" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#410825259">(Jan 02 2024 at 10:27)</a>:</h4>
<p>I'll check it out</p>



<a name="410909325"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/410909325" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Lindskogen <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#410909325">(Jan 02 2024 at 21:38)</a>:</h4>
<p>I submitted a PR if any of you would like to dissect further: <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span>  <a href="https://github.com/roc-lang/basic-cli/pull/150">https://github.com/roc-lang/basic-cli/pull/150</a></p>



<a name="410976446"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Broken%20glue/near/410976446" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Broken.20glue.html#410976446">(Jan 03 2024 at 08:41)</a>:</h4>
<p>This is caused by <a href="https://github.com/roc-lang/roc/issues/5924">#5924</a>, everybody seems to be hitting it now, I'm working on it today.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>