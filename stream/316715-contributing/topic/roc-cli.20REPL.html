<html>
<head><meta charset="utf-8"><title>roc-cli REPL · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html">roc-cli REPL</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="535896571"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/535896571" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#535896571">(Aug 24 2025 at 11:27)</a>:</h4>
<p><span class="user-mention" data-user-id="950624">@EnDeRBeaT</span> I spent some time thinking about the repl with Claude and looking at our existing design. </p>
<p>Here's a rough design doc <a href="https://gist.github.com/lukewilliamboswell/ffe31020bda636d879180ac3b0bd1608">https://gist.github.com/lukewilliamboswell/ffe31020bda636d879180ac3b0bd1608</a></p>
<p>Does something like this help you? I could also spend some time with you throwing ideas around or talking about the codebase if you'd like.</p>



<a name="535899380"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/535899380" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> EnDeRBeaT <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#535899380">(Aug 24 2025 at 12:28)</a>:</h4>
<p>Nice! I will start in the evening or on tomorrow's evening and come back with questions if I need to</p>



<a name="536100475"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536100475" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> EnDeRBeaT <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536100475">(Aug 25 2025 at 20:14)</a>:</h4>
<p>Hi, from <code>build.zig</code>, I can't see where to add a dependency module from vaxis lib, can you point it out?</p>



<a name="536130212"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536130212" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536130212">(Aug 26 2025 at 00:18)</a>:</h4>
<p>Normally deps are added in the build.zig.zon. Then referenced in build.zig.</p>



<a name="536130282"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536130282" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536130282">(Aug 26 2025 at 00:19)</a>:</h4>
<p>You can look at bytebox or zstd as examples</p>



<a name="536132628"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536132628" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536132628">(Aug 26 2025 at 00:47)</a>:</h4>
<p><span class="user-mention" data-user-id="950624">@EnDeRBeaT</span> our build system can be a little confusing as there's a lot going on. I made a start and wired everything up for you in this branch <a href="https://github.com/lukewilliamboswell/roc/tree/cli-repl">https://github.com/lukewilliamboswell/roc/tree/cli-repl</a></p>



<a name="536132675"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536132675" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536132675">(Aug 26 2025 at 00:47)</a>:</h4>
<p>It's wired into <code>zig build roc</code> and <code>zig build test</code> so you can focus on the functionality and leave wrestling with the build system for later <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="536475088"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536475088" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> EnDeRBeaT <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536475088">(Aug 27 2025 at 18:18)</a>:</h4>
<p>I was wondering on why we are using vaxis for this? What is the goal look for the cli? I have only seen repls like pyhton's, which can be implemented with basic console i/o.</p>



<a name="536478832"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536478832" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> EnDeRBeaT <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536478832">(Aug 27 2025 at 18:44)</a>:</h4>
<p>okay nevermind, i am stupid</p>



<a name="536505438"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536505438" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536505438">(Aug 27 2025 at 22:50)</a>:</h4>
<p>Not stupid, I had the same thought process I think. </p>
<p>I actually implemented the cli Repl as a proof of concept a while back but found myself hand rolling all these tui like things for handling input reliably etc.  I raised the idea of using a more mature and well tested library and that seemed to be a better direction to try.</p>
<p>We may find vaxis is too much. Loris mentioned there is a lower level API within vaxis that we might consider using, if we don't want/need the higher level abstraction.</p>
<p>Thank you for exploring this, I think the repl will be really useful and being built into the cli will make it easy to use.</p>



<a name="536511283"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536511283" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536511283">(Aug 28 2025 at 00:04)</a>:</h4>
<p>i thought we wanted to keep the compiler dependency-free?</p>



<a name="536552730"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536552730" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536552730">(Aug 28 2025 at 08:13)</a>:</h4>
<p>I couldn't resist a diagram... <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span> </p>
<p><a href="/user_uploads/22008/aTQq6bTfY7PlbLtcUVoX8RMq/Screenshot-2025-08-28-at-18.11.20.png">Screenshot 2025-08-28 at 18.11.20.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/aTQq6bTfY7PlbLtcUVoX8RMq/Screenshot-2025-08-28-at-18.11.20.png" title="Screenshot 2025-08-28 at 18.11.20.png"><img data-original-content-type="image/png" data-original-dimensions="1518x846" src="/user_uploads/thumbnail/22008/aTQq6bTfY7PlbLtcUVoX8RMq/Screenshot-2025-08-28-at-18.11.20.png/840x560.webp"></a></div><p>I think we should aim for no dependencies in the compiler stages (unless absolutely necessary for some reason). But the tools, like cli or playground VM could use some.</p>



<a name="536671617"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536671617" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> EnDeRBeaT <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536671617">(Aug 28 2025 at 19:29)</a>:</h4>
<p>It feels like making a python-like with Vaxis is kinda cumbersome: you can't really have just a shell with repl like input without handrolling everything except the input.</p>
<p>However, it is pretty easy to recreate the same design as in roc playground repl. However, it is an unorthodox design. What do you guys thing?</p>



<a name="536700774"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536700774" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536700774">(Aug 29 2025 at 00:34)</a>:</h4>
<p>We're all about taking the not so easy path here in roc land -- if it means delivering a nice experience for our users. <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span> </p>
<p>I'm not really sure what you are specifically talking about though... could you give me an example maybe?</p>



<a name="536720357"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc-cli%20REPL/near/536720357" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> EnDeRBeaT <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc-cli.20REPL.html#536720357">(Aug 29 2025 at 05:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/316715-contributing/topic/roc-cli.20REPL/near/536700774">said</a>:</p>
<blockquote>
<p>could you give me an example maybe?</p>
</blockquote>
<p>Sure, the basic REPL has the same UX as a CLI, you have the same bindings, the same history mechanism, you enter commands, you get output (which you can cancel with ^C). In libvaxis it is quite difficult to replicate such workflow: there are separate widgets for scrolling text and input, but composing them together looks like a challenge (however, might not be as difficult as i thought)</p>
<p>The design of playground repl is a scroll window + text input, which is also easy to replicate in libvaxis</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>