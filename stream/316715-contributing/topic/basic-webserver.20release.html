<html>
<head><meta charset="utf-8"><title>basic-webserver release · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html">basic-webserver release</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="403010815"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403010815" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403010815">(Nov 19 2023 at 13:37)</a>:</h4>
<p>When trying to build the basic-webserver platform I'm hitting <code>Undefined Symbol in relocation</code> like in <a href="https://github.com/roc-lang/roc/issues/3609">#3609</a> when on linux x86-64. I can build with the legacy linker and builds for all other OS' and architectures passed. Should we still do a release of basic-webserver if it does not work on linux x86-64 with the surgical linker <span class="user-mention" data-user-id="281383">@Richard Feldman</span>?</p>



<a name="403011238"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403011238" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403011238">(Nov 19 2023 at 13:43)</a>:</h4>
<p>I'd say yes <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="403011477"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403011477" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403011477">(Nov 19 2023 at 13:44)</a>:</h4>
<p>it's worth it to get something all the new beginners will be able to try with a URL tomorrow</p>



<a name="403011478"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403011478" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403011478">(Nov 19 2023 at 13:44)</a>:</h4>
<p>we can tell people to work around it with <code>--linker=legacy</code> for now</p>



<a name="403029991"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403029991" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403029991">(Nov 19 2023 at 16:46)</a>:</h4>
<p>Assuming my code works correctly, roc should automatically use the legacy linker when it realizes there is no surgical linker file</p>



<a name="403031082"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403031082" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403031082">(Nov 19 2023 at 16:58)</a>:</h4>
<p>Awesome, I'll try that out</p>



<a name="403031375"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403031375" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403031375">(Nov 19 2023 at 17:01)</a>:</h4>
<p>Also, I think this may be a bug caused by rust dead code elimination, I'll take a look. Oh, maybe I can also make rust glue for functions generate the special code to avoid garbage collection of our effect functions....</p>



<a name="403032401"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403032401" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403032401">(Nov 19 2023 at 17:11)</a>:</h4>
<p>Is this on main?</p>



<a name="403032878"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403032878" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403032878">(Nov 19 2023 at 17:17)</a>:</h4>
<p>I got the <code>undefined symbol in relocation</code> while using the more-features of basic-webserver, I was also using <code>export CARGO_BUILD_TARGET=x86_64-unknown-linux-musl</code></p>



<a name="403033039"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403033039" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403033039">(Nov 19 2023 at 17:18)</a>:</h4>
<blockquote>
<p>roc should automatically use the legacy linker when it realizes there is no surgical linker file</p>
</blockquote>
<p>That worked, I did end up getting a segfault when running the example on NixOS, going to try out macos aarch64 now.</p>



<a name="403036910"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403036910" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403036910">(Nov 19 2023 at 18:00)</a>:</h4>
<p>macos aarch64 test succeeded</p>



<a name="403036948"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403036948" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403036948">(Nov 19 2023 at 18:00)</a>:</h4>
<p>going to try out ubuntu now</p>



<a name="403038897"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403038897" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403038897">(Nov 19 2023 at 18:19)</a>:</h4>
<p>segfault on Ubuntu too when running the todos example.<br>
To prevent setting a large share of users up for disappointment I think we should not make an official release of the basic-webserver platform right now. What do you think <span class="user-mention" data-user-id="281383">@Richard Feldman</span>?</p>
<p>It's still an amazing feat we got the webserver this far though <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="403039821"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403039821" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403039821">(Nov 19 2023 at 18:28)</a>:</h4>
<p>Interesting. I wonder why it segfaults for you. gotta love works on my machine.</p>



<a name="403039845"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403039845" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403039845">(Nov 19 2023 at 18:28)</a>:</h4>
<p>I'll do more testing later</p>



<a name="403040005"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403040005" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403040005">(Nov 19 2023 at 18:30)</a>:</h4>
<p>Is it just todos that is segfaulting?</p>



<a name="403040432"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403040432" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403040432">(Nov 19 2023 at 18:33)</a>:</h4>
<p>I wonder if the sqlite db I created on arm64 isn't ok when used on linux-x64, I assumed it would be identical because it's the sqlite format but maybe not. I did a quick search and that was inconclusive</p>



<a name="403040848"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403040848" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403040848">(Nov 19 2023 at 18:37)</a>:</h4>
<p>Oh, are you testing using current main or that PR branch? Current main will be broken on all other systems except macos arm64 because glue generates invalid rust code and you have to fix manually. On the PR branch I went through and fixed for all architectures so that should be ok.</p>



<a name="403042671"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403042671" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403042671">(Nov 19 2023 at 18:56)</a>:</h4>
<p>I should be using the more-features branch everywhere. The Linux .o is also built for musl, so the segfault may only replicate with that target. I ran without DB_PATH on Linux so it should not be the sqlite3 file that causes the segfault. I did not test the other examples but the todos is the most important one.</p>



<a name="403043061"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403043061" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403043061">(Nov 19 2023 at 19:00)</a>:</h4>
<p>This is the pre-release url btw:<br>
<a href="https://github.com/roc-lang/basic-webserver/releases/download/temp-test-0-1/znf7xalzBi9Wn8vSrgw1YIEd2XcqAvgg8EDZiH4lPGs.tar.gz">https://github.com/roc-lang/basic-webserver/releases/download/temp-test-0-1/znf7xalzBi9Wn8vSrgw1YIEd2XcqAvgg8EDZiH4lPGs.tar.gz</a></p>



<a name="403046525"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403046525" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403046525">(Nov 19 2023 at 19:36)</a>:</h4>
<p>I can reproduce the segfaults on my linux machine <span aria-label="cry" class="emoji emoji-1f622" role="img" title="cry">:cry:</span></p>



<a name="403047416"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403047416" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403047416">(Nov 19 2023 at 19:51)</a>:</h4>
<p><span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> I am highly suspicious of the glue issues (<a href="https://github.com/roc-lang/roc/issues/6012">https://github.com/roc-lang/roc/issues/6012</a>) though I don't think this is likely the cause of this issue. </p>
<p>I don't think we ever tested previous versions on linux so it could be a more fundamental issue with the implementation of the server. </p>
<p>I don't think it is hyper as it boots up the server and binds to localhost, and looks like it accepts a connection. Maybe it fails as soon as it calls into Roc (the force_thunk method on RocFunction_86 closure related or something)?</p>



<a name="403047680"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403047680" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403047680">(Nov 19 2023 at 19:55)</a>:</h4>
<p>so it segfaults even when using the legacy linker?</p>



<a name="403048280"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403048280" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403048280">(Nov 19 2023 at 20:03)</a>:</h4>
<p>to answer the question directly: if we can't get it working, I actually still think we should release 0.1 (with a prominent note that Linux isn't supported yet) just so <em>some</em> beginners can try it easily.</p>
<p>Regardless of whether there's a release, Linux users won't be able to use it at all. At least if there's a release, people on other operating systems can try it without needing Rust installed etc.</p>



<a name="403048401"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403048401" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403048401">(Nov 19 2023 at 20:04)</a>:</h4>
<p>in fact I'd be fine with saying just go ahead and release 0.1 right now, add prominent notes that it won't work on Linux, and then we can plan to do an 0.1.1 release that fixes Linux as soon as we can figure out a fix! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="403048802"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403048802" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403048802">(Nov 19 2023 at 20:10)</a>:</h4>
<p><span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> you mentioned it works on your machine - is that an x64 Linux machine?</p>



<a name="403049555"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403049555" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403049555">(Nov 19 2023 at 20:21)</a>:</h4>
<p>Ok yeah, I see the segfault. Probably tested something local before</p>



<a name="403051241"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403051241" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403051241">(Nov 19 2023 at 20:48)</a>:</h4>
<p>Not yet sure what is going on, but it seems that the string being passed to stdout.line does not make sense (maybe it is a seemless slice or small string being handled incorrectly). Commenting out the logging in the todo.roc fixes the issue.</p>
<p>So maybe a bug in <code>RocStr</code>, maybe a bug in roc code gen.</p>



<a name="403051835"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403051835" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403051835">(Nov 19 2023 at 21:00)</a>:</h4>
<p>hmm, may also be some sort of pointer passing related change. I think some reason roc stdoutline expects a return value now? <span class="user-mention" data-user-id="281543">@Folkert de Vries</span> maybe a bug in your resent changes around cabi always using pointers?</p>



<a name="403051972"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403051972" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403051972">(Nov 19 2023 at 21:01)</a>:</h4>
<p>oh wait, actually, it is supposed to return a result with error.</p>



<a name="403052844"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403052844" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403052844">(Nov 19 2023 at 21:14)</a>:</h4>
<p>Oh, so this is just a simply function glue mismatch. I think <code>roc_fn</code> needs to be regenerated</p>



<a name="403052995"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403052995" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403052995">(Nov 19 2023 at 21:16)</a>:</h4>
<p>Claims to return nothing:<br>
<a href="https://github.com/roc-lang/basic-webserver/blob/a9b32ff9425095d51d08928c433bf064176cbd11/platform/src/roc_fn/src/lib.rs#L63-L66">https://github.com/roc-lang/basic-webserver/blob/a9b32ff9425095d51d08928c433bf064176cbd11/platform/src/roc_fn/src/lib.rs#L63-L66</a></p>
<p>Claims to return an error:<br>
<a href="https://github.com/roc-lang/basic-webserver/blob/a9b32ff9425095d51d08928c433bf064176cbd11/platform/Effect.roc#L47">https://github.com/roc-lang/basic-webserver/blob/a9b32ff9425095d51d08928c433bf064176cbd11/platform/Effect.roc#L47</a></p>



<a name="403053027"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403053027" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403053027">(Nov 19 2023 at 21:17)</a>:</h4>
<p>so we should just need to make those match. Either drop the return type from the roc side or regenerate the function glue and change the rust type to return an error.</p>



<a name="403053095"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403053095" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403053095">(Nov 19 2023 at 21:18)</a>:</h4>
<p>oh I definitely think those shouldn't return an error</p>



<a name="403053104"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403053104" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403053104">(Nov 19 2023 at 21:18)</a>:</h4>
<p>This probably also effects flush</p>



<a name="403053115"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403053115" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403053115">(Nov 19 2023 at 21:19)</a>:</h4>
<p>(we can have a more advanced version that returns an error, but the 99% use case is to assume writing to stdout will succeed)</p>



<a name="403053120"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403053120" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403053120">(Nov 19 2023 at 21:19)</a>:</h4>
<p>Yeah, in that case, we should just need to update the roc side to fix the segfault</p>



<a name="403053130"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403053130" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403053130">(Nov 19 2023 at 21:19)</a>:</h4>
<p>nice! Can you make a PR for that?</p>



<a name="403053238"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403053238" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403053238">(Nov 19 2023 at 21:20)</a>:</h4>
<p>Should flush return an error? I assume not as well?</p>



<a name="403053270"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403053270" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403053270">(Nov 19 2023 at 21:21)</a>:</h4>
<p>let's have it not for now, can revisit in the future if necessary</p>



<a name="403053795"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403053795" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403053795">(Nov 19 2023 at 21:29)</a>:</h4>
<p><a href="https://github.com/roc-lang/basic-webserver/pull/10">https://github.com/roc-lang/basic-webserver/pull/10</a></p>



<a name="403054414"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403054414" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403054414">(Nov 19 2023 at 21:38)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> I assume you're done for the day, but if you can verify that it works on x64 Linux for you and cut a release tomorrow, that would be fantastic! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="403054442"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403054442" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403054442">(Nov 19 2023 at 21:39)</a>:</h4>
<p>given time zones, I think the math works out that we could have that on the site in time for the release <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="403054665"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403054665" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403054665">(Nov 19 2023 at 21:42)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> so glad you found that!! Sorry for breaking it <span aria-label="smiling face with tear" class="emoji emoji-1f972" role="img" title="smiling face with tear">:smiling_face_with_tear:</span> . I was part way through changing them all over to return errors, and then aborted the change and didnt undo it properly as it had the flush addition.</p>



<a name="403133328"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403133328" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403133328">(Nov 20 2023 at 09:57)</a>:</h4>
<p>Awesome work <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span>! A new release is building</p>



<a name="403145218"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403145218" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403145218">(Nov 20 2023 at 11:01)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> release is <a href="https://github.com/roc-lang/basic-webserver/releases/tag/0.1">up</a></p>



<a name="403164396"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20release/near/403164396" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Agus Zubiaga <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20release.html#403164396">(Nov 20 2023 at 12:58)</a>:</h4>
<p>Release is working well! I already used it in the new roc-pg example: <a href="https://github.com/agu-z/roc-pg/tree/main/examples/store">https://github.com/agu-z/roc-pg/tree/main/examples/store</a></p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>