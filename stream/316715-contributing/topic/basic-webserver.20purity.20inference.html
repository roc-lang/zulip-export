<html>
<head><meta charset="utf-8"><title>basic-webserver purity inference · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html">basic-webserver purity inference</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="488030355"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488030355" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488030355">(Dec 11 2024 at 07:18)</a>:</h4>
<p>Ok, so we've landed basic-cli ... next step is our webserver. </p>
<p>I made a bit of a start yesterday, but haven't pushed anything yet. I'm WFH for the rest of the week so should have time to smash through it. I'd love to have something ready for a new release on Friday, but there's a lot to do.</p>



<a name="488031579"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488031579" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488031579">(Dec 11 2024 at 07:26)</a>:</h4>
<p>What platforms otherwise should get upgraded for Purity Inference?</p>



<a name="488031589"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488031589" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488031589">(Dec 11 2024 at 07:26)</a>:</h4>
<p>any of the templates?</p>



<a name="488032027"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488032027" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488032027">(Dec 11 2024 at 07:30)</a>:</h4>
<p>All the platforms in the roc repo still need to updated along with docs.</p>



<a name="488032067"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488032067" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488032067">(Dec 11 2024 at 07:30)</a>:</h4>
<p>I think we could update templates, but may be best to do them at the very end after all the docs and such are updated</p>



<a name="488965701"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488965701" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488965701">(Dec 14 2024 at 05:58)</a>:</h4>
<p>Question, can the host import packages? If so, can we package all the roc files used to build the host API somehow?</p>



<a name="488965715"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488965715" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488965715">(Dec 14 2024 at 05:59)</a>:</h4>
<p>I don't quite follow</p>



<a name="488965727"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488965727" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488965727">(Dec 14 2024 at 05:59)</a>:</h4>
<p>The host is rust, so we can refactor out into crates and re-use those</p>



<a name="488965733"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488965733" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488965733">(Dec 14 2024 at 05:59)</a>:</h4>
<p>For the roc files, we can make a cross platform package like roc-lang/path</p>



<a name="488965747"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488965747" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488965747">(Dec 14 2024 at 05:59)</a>:</h4>
<p>But path hasn't matured enough to use it yet... though this is starting to lay the foundation for that, so it's easier to upgrade in future</p>



<a name="488966049"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966049" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966049">(Dec 14 2024 at 06:03)</a>:</h4>
<p>So, I mean for all of the platform <code>.roc</code> files outside of <code>Host.roc</code> that have the exact same api (ex. File.roc, Stdin.roc, Stdout.roc, etc)</p>



<a name="488966055"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966055" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966055">(Dec 14 2024 at 06:03)</a>:</h4>
<p>Can we share those files between basic webserver and basic cli</p>



<a name="488966115"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966115" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966115">(Dec 14 2024 at 06:04)</a>:</h4>
<p>Aside from a cross-platform package... not really</p>



<a name="488966130"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966130" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966130">(Dec 14 2024 at 06:04)</a>:</h4>
<p>I'm hoping to get the API's identical so that we can have basic-webserver just copy from basic-cli</p>



<a name="488966186"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966186" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966186">(Dec 14 2024 at 06:05)</a>:</h4>
<p>There's only a few things that wouldn't be shared like, MultiPartFormData, or SqLite... though we could potentially get them in both too... <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="488966249"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966249" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966249">(Dec 14 2024 at 06:06)</a>:</h4>
<p>In this pass I'm just trying to get the current features like Cmd, File, Dir, Env etc common</p>



<a name="488966270"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966270" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966270">(Dec 14 2024 at 06:07)</a>:</h4>
<p>It's probably a lot to chew, but the type safety gives me some confidence I can untangle it all</p>



<a name="488966386"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966386" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966386">(Dec 14 2024 at 06:09)</a>:</h4>
<p>Long term, we definitely should look into allow platforms to directly share things like <code>Stdout.roc</code> if they have the same primitives (or though module parana)</p>



<a name="488966455"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966455" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966455">(Dec 14 2024 at 06:10)</a>:</h4>
<p>13 messages were moved here from <a class="stream-topic" data-stream-id="316715" href="/#narrow/channel/316715-contributing/topic/Pull.20Request.20for.20Review">#contributing &gt; Pull Request for Review</a> by <span class="user-mention silent" data-user-id="515757">Luke Boswell</span>.</p>



<a name="488966488"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966488" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966488">(Dec 14 2024 at 06:10)</a>:</h4>
<p>Is there any reason the Tcp API should be different between cli and webserver?</p>



<a name="488966498"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966498" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966498">(Dec 14 2024 at 06:11)</a>:</h4>
<p>For sending requests</p>



<a name="488966518"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966518" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966518">(Dec 14 2024 at 06:11)</a>:</h4>
<p>I think the best would be to try to develop some common set of only a couple generic functions that each platform would need to support, and then a module params-based package would handle giving a useful, platform agnostic interface</p>



<a name="488966525"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966525" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966525">(Dec 14 2024 at 06:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/316715-contributing/topic/basic-webserver.20purity.20inference/near/488966488">said</a>:</p>
<blockquote>
<p>Is there any reason the Tcp API should be different between cli and webserver?</p>
</blockquote>
<p>I'd say no</p>



<a name="488966585"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966585" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966585">(Dec 14 2024 at 06:12)</a>:</h4>
<p>Unless one of them prepackages SSL certs or something?</p>



<a name="488966596"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966596" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966596">(Dec 14 2024 at 06:12)</a>:</h4>
<p>Which even then I wouldn't expect should be handled by the platform automatically</p>



<a name="488966708"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488966708" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488966708">(Dec 14 2024 at 06:14)</a>:</h4>
<p>Alg, I tend to agree. <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="488967603"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488967603" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488967603">(Dec 14 2024 at 06:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461444">Sam Mohr</span> <a href="#narrow/stream/316715-contributing/topic/basic-webserver.20purity.20inference/near/488966518">said</a>:</p>
<blockquote>
<p>I think the best would be to try to develop some common set of only a couple generic functions that each platform would need to support, and then a module params-based package would handle giving a useful, platform agnostic interface</p>
</blockquote>
<p>For sure, would be nice if the platform could re expose and import</p>
<p>Basically import from a package passing in effects from the platform. Then re-expose that packages api</p>



<a name="488968139"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488968139" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488968139">(Dec 14 2024 at 06:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/316715-contributing/topic/basic-webserver.20purity.20inference/near/488967603">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="461444">Sam Mohr</span> <a href="#narrow/stream/316715-contributing/topic/basic-webserver.20purity.20inference/near/488966518">said</a>:</p>
<blockquote>
<p>I think the best would be to try to develop some common set of only a couple generic functions that each platform would need to support, and then a module params-based package would handle giving a useful, platform agnostic interface</p>
</blockquote>
<p>For sure, would be nice if the platform could re expose and import</p>
<p>Basically import from a package passing in effects from the platform. Then re-expose that packages api</p>
</blockquote>
<p>Thinking about it, I think static dispatch should make this easier? If the platform just exports structural aliases to custom types, the "methods" of the custom types should get exposed as if they were written inline. Not sure if that would work</p>



<a name="488968169"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488968169" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488968169">(Dec 14 2024 at 06:41)</a>:</h4>
<p>I think it's not ideal if we have to manually copy over the docs and all functions (even codegen would be suboptimal)</p>



<a name="488968679"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488968679" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488968679">(Dec 14 2024 at 06:51)</a>:</h4>
<p>Ok, finally made a draft PR for this <a href="https://github.com/roc-lang/basic-webserver/pull/84">https://github.com/roc-lang/basic-webserver/pull/84</a></p>



<a name="488968865"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488968865" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488968865">(Dec 14 2024 at 06:54)</a>:</h4>
<p>Anyone will welcome to help continue with the upgrade <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> </p>
<p>Next up will be going through all the <code>Host.roc</code> exposed functions one by one and implementing them in the host. Should be mostly just updating the function signature and then calling the impl in the crate from basic-cli. </p>
<p>Then it's on to upgrading the examples and verifying everything is wired up correctly and working.</p>
<p>I've disabled <code>HTTP.send!</code> for now... we need to dig into that a little an find an API that works for both cli and webserver. They're currently different.</p>



<a name="488969763"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488969763" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488969763">(Dec 14 2024 at 07:11)</a>:</h4>
<p>update the false interpreter to purity inference and get it running as a test again: <a href="https://github.com/roc-lang/roc/pull/7369">https://github.com/roc-lang/roc/pull/7369</a></p>



<a name="488969944"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/488969944" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#488969944">(Dec 14 2024 at 07:14)</a>:</h4>
<p>limit morphic to trivial solving only to avoid the inplace mutation correctness bugs: <a href="https://github.com/roc-lang/roc/pull/7370">https://github.com/roc-lang/roc/pull/7370</a></p>
<p>Surprisingly, this seems to increase performance in a number of cases by a few percent. My only guess is that the accidental mutation is leading to extra looping that shouldn't be happening. All changes to perf are within 5% and most are slightly positive.</p>



<a name="489624843"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489624843" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489624843">(Dec 18 2024 at 05:54)</a>:</h4>
<p>Made significant progress with <a href="https://github.com/roc-lang/basic-webserver/pull/84">https://github.com/roc-lang/basic-webserver/pull/84</a></p>
<p>I've hit another segfault... this time I think it's on the other side, roc passing the response back to the host. </p>
<p>I'm pretty tired from all the changes I've made today, so I'll maybe come back to this tomorrow. If anyone has time to look at it, the easiest repro is just building the host <code>roc build.roc</code>, then running the echo example <code>roc examples/echo.roc</code>.</p>



<a name="489757471"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489757471" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489757471">(Dec 18 2024 at 13:26)</a>:</h4>
<p>Valgrind output:</p>
<div class="codehilite"><pre><span></span><code>❯ valgrind ./examples/echo
==37674== Memcheck, a memory error detector
==37674== Copyright (C) 2002-2024, and GNU GPL&#39;d, by Julian Seward et al.
==37674== Using Valgrind-3.23.0 and LibVEX; rerun with -h for copyright info
==37674== Command: ./examples/echo
==37674==
Listening on &lt;http://127.0.0.1:8000&gt;
==37674== Thread 34 tokio-runtime-w:
==37674== Conditional jump or move depends on uninitialised value(s)
==37674==    at 0x12BECA: ??? (roc_app:0)
==37674==    by 0x124F65: Box_unbox_3d7aff37b23cd9f9e6beb177d8bf818babb9d186ea278cc981a34be43b8cf34 (roc_app:0)
==37674==    by 0x1299D4: _respond_for_host!_bad96aa871ccf5b068b2a1da7544fd3d07a932588efb92244e692b8beda99ce (roc_app:0)
==37674==    by 0x129D1C: roc__respond_for_host_1_exposed_generic (roc_app:0)
==37674==    by 0x196D2B: tokio::runtime::task::raw::poll (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E8C6D: std::sys_common::backtrace::__rust_begin_short_backtrace (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E8910: core::ops::function::FnOnce::call_once{{vtable.shim}} (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E4A5A: call_once&lt;(), dyn core::ops::function::FnOnce&lt;(), Output=()&gt;, alloc::alloc::Global&gt; (boxed.rs:2022)
==37674==    by 0x1E4A5A: call_once&lt;(), alloc::boxed::Box&lt;dyn core::ops::function::FnOnce&lt;(), Output=()&gt;, alloc::alloc::Global&gt;, alloc::alloc::Global&gt; (boxed.rs:2022)
==37674==    by 0x1E4A5A: std::sys::pal::unix::thread::Thread::new::thread_start (thread.rs:108)
==37674==    by 0x48ECA41: start_thread (in /nix/store/0wydilnf1c9vznywsvxqnaing4wraaxp-glibc-2.39-52/lib/libc.so.6)
==37674==    by 0x496BE43: clone (in /nix/store/0wydilnf1c9vznywsvxqnaing4wraaxp-glibc-2.39-52/lib/libc.so.6)
==37674==
==37674== Conditional jump or move depends on uninitialised value(s)
==37674==    at 0x12B3B9: decrement_refcounted_ptr_8 (roc_app:0)
==37674==    by 0x12BED7: ??? (roc_app:0)
==37674==    by 0x124F65: Box_unbox_3d7aff37b23cd9f9e6beb177d8bf818babb9d186ea278cc981a34be43b8cf34 (roc_app:0)
==37674==    by 0x1299D4: _respond_for_host!_bad96aa871ccf5b068b2a1da7544fd3d07a932588efb92244e692b8beda99ce (roc_app:0)
==37674==    by 0x129D1C: roc__respond_for_host_1_exposed_generic (roc_app:0)
==37674==    by 0x196D2B: tokio::runtime::task::raw::poll (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E8C6D: std::sys_common::backtrace::__rust_begin_short_backtrace (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E8910: core::ops::function::FnOnce::call_once{{vtable.shim}} (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E4A5A: call_once&lt;(), dyn core::ops::function::FnOnce&lt;(), Output=()&gt;, alloc::alloc::Global&gt; (boxed.rs:2022)
==37674==    by 0x1E4A5A: call_once&lt;(), alloc::boxed::Box&lt;dyn core::ops::function::FnOnce&lt;(), Output=()&gt;, alloc::alloc::Global&gt;, alloc::alloc::Global&gt; (boxed.rs:2022)
==37674==    by 0x1E4A5A: std::sys::pal::unix::thread::Thread::new::thread_start (thread.rs:108)
==37674==    by 0x48ECA41: start_thread (in /nix/store/0wydilnf1c9vznywsvxqnaing4wraaxp-glibc-2.39-52/lib/libc.so.6)
==37674==    by 0x496BE43: clone (in /nix/store/0wydilnf1c9vznywsvxqnaing4wraaxp-glibc-2.39-52/lib/libc.so.6)
==37674==
2024-12-18T13:26:11Z Get /
==37674== Invalid read of size 8
==37674==    at 0x12C0B3: ??? (roc_app:0)
==37674==    by 0x128322: #UserApp_respond!_1e4d2f1e6b4984301a1489b71481ade3a818d1fae80b8f87ea525c7bff923 (roc_app:0)
==37674==    by 0x1299E6: _respond_for_host!_bad96aa871ccf5b068b2a1da7544fd3d07a932588efb92244e692b8beda99ce (roc_app:0)
==37674==    by 0x129D1C: roc__respond_for_host_1_exposed_generic (roc_app:0)
==37674==    by 0x196D2B: tokio::runtime::task::raw::poll (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E8C6D: std::sys_common::backtrace::__rust_begin_short_backtrace (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E8910: core::ops::function::FnOnce::call_once{{vtable.shim}} (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E4A5A: call_once&lt;(), dyn core::ops::function::FnOnce&lt;(), Output=()&gt;, alloc::alloc::Global&gt; (boxed.rs:2022)
==37674==    by 0x1E4A5A: call_once&lt;(), alloc::boxed::Box&lt;dyn core::ops::function::FnOnce&lt;(), Output=()&gt;, alloc::alloc::Global&gt;, alloc::alloc::Global&gt; (boxed.rs:2022)
==37674==    by 0x1E4A5A: std::sys::pal::unix::thread::Thread::new::thread_start (thread.rs:108)
==37674==    by 0x48ECA41: start_thread (in /nix/store/0wydilnf1c9vznywsvxqnaing4wraaxp-glibc-2.39-52/lib/libc.so.6)
==37674==    by 0x496BE43: clone (in /nix/store/0wydilnf1c9vznywsvxqnaing4wraaxp-glibc-2.39-52/lib/libc.so.6)
==37674==  Address 0xfffffffffffffff8 is not stack&#39;d, malloc&#39;d or (recently) free&#39;d
==37674==
==37674==
==37674== Process terminating with default action of signal 11 (SIGSEGV)
==37674==  Access not within mapped region at address 0xFFFFFFFFFFFFFFF8
==37674==    at 0x12C0B3: ??? (roc_app:0)
==37674==    by 0x128322: #UserApp_respond!_1e4d2f1e6b4984301a1489b71481ade3a818d1fae80b8f87ea525c7bff923 (roc_app:0)
==37674==    by 0x1299E6: _respond_for_host!_bad96aa871ccf5b068b2a1da7544fd3d07a932588efb92244e692b8beda99ce (roc_app:0)
==37674==    by 0x129D1C: roc__respond_for_host_1_exposed_generic (roc_app:0)
==37674==    by 0x196D2B: tokio::runtime::task::raw::poll (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E8C6D: std::sys_common::backtrace::__rust_begin_short_backtrace (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E8910: core::ops::function::FnOnce::call_once{{vtable.shim}} (in /home/username/gitrepos/basic-webserver/examples/echo)
==37674==    by 0x1E4A5A: call_once&lt;(), dyn core::ops::function::FnOnce&lt;(), Output=()&gt;, alloc::alloc::Global&gt; (boxed.rs:2022)
==37674==    by 0x1E4A5A: call_once&lt;(), alloc::boxed::Box&lt;dyn core::ops::function::FnOnce&lt;(), Output=()&gt;, alloc::alloc::Global&gt;, alloc::alloc::Global&gt; (boxed.rs:2022)
==37674==    by 0x1E4A5A: std::sys::pal::unix::thread::Thread::new::thread_start (thread.rs:108)
==37674==    by 0x48ECA41: start_thread (in /nix/store/0wydilnf1c9vznywsvxqnaing4wraaxp-glibc-2.39-52/lib/libc.so.6)
==37674==    by 0x496BE43: clone (in /nix/store/0wydilnf1c9vznywsvxqnaing4wraaxp-glibc-2.39-52/lib/libc.so.6)
==37674==  If you believe this happened as a result of a stack
==37674==  overflow in your program&#39;s main thread (unlikely but
==37674==  possible), you can try to increase the size of the
==37674==  main thread stack using the --main-stacksize= flag.
==37674==  The main thread stack size used in this run was 8388608.
==37674==
==37674== HEAP SUMMARY:
==37674==     in use at exit: 149,092 bytes in 497 blocks
==37674==   total heap usage: 2,438 allocs, 1,941 frees, 384,367 bytes allocated
==37674==
==37674== LEAK SUMMARY:
==37674==    definitely lost: 8 bytes in 1 blocks
==37674==    indirectly lost: 0 bytes in 0 blocks
==37674==      possibly lost: 12,414 bytes in 38 blocks
==37674==    still reachable: 136,670 bytes in 458 blocks
==37674==         suppressed: 0 bytes in 0 blocks
==37674== Rerun with --leak-check=full to see details of leaked memory
==37674==
==37674== Use --track-origins=yes to see where uninitialised values come from
==37674== For lists of detected and suppressed errors, rerun with: -s
==37674== ERROR SUMMARY: 3 errors from 3 contexts (suppressed: 0 from 0)
Segmentation fault (core dumped)
</code></pre></div>



<a name="489781873"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489781873" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489781873">(Dec 18 2024 at 15:25)</a>:</h4>
<p>Anton is truly our resident Valgrinder, I salute you for helping those of us with Macs <span aria-label="salute" class="emoji emoji-1fae1" role="img" title="salute">:salute:</span></p>



<a name="489797203"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489797203" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489797203">(Dec 18 2024 at 16:32)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/5772">#5772</a> has very similar valgrind output, it was fixed by <a href="https://github.com/roc-lang/roc/pull/5892">PR#5892</a></p>



<a name="489808218"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489808218" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489808218">(Dec 18 2024 at 17:30)</a>:</h4>
<p>Probably an issue with the model in this case</p>



<a name="489808261"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489808261" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489808261">(Dec 18 2024 at 17:30)</a>:</h4>
<p>Probably can take a look in a bit</p>



<a name="489817242"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489817242" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489817242">(Dec 18 2024 at 18:24)</a>:</h4>
<p>Taking a look now, on mac, looks to still be input side.</p>



<a name="489817271"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489817271" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489817271">(Dec 18 2024 at 18:24)</a>:</h4>
<p>Crashes the first time it tries to load from the request to print it</p>



<a name="489818008"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489818008" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489818008">(Dec 18 2024 at 18:29)</a>:</h4>
<p>segfaults when loading the body in roc on mac</p>



<a name="489818131"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489818131" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489818131">(Dec 18 2024 at 18:29)</a>:</h4>
<p>oh... <code>RocList::from_raw_parts</code> would do that....</p>



<a name="489818258"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489818258" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489818258">(Dec 18 2024 at 18:30)</a>:</h4>
<p>we can make a seemless slice here, but this is not what is being done</p>



<a name="489820276"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489820276" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489820276">(Dec 18 2024 at 18:42)</a>:</h4>
<p>ooops, forgot I did that. Was trying to be efficient and forgot about it. Does making an actual owned RocStr help?</p>



<a name="489820523"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489820523" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489820523">(Dec 18 2024 at 18:44)</a>:</h4>
<p>I just made it a proper seamless slice and pushed that</p>



<a name="489820676"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489820676" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489820676">(Dec 18 2024 at 18:45)</a>:</h4>
<p>could also do that with the headers if wanted</p>



<a name="489820851"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489820851" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489820851">(Dec 18 2024 at 18:46)</a>:</h4>
<p>let me push that as well, should be easy at this point and avoid copies</p>



<a name="489821995"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489821995" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489821995">(Dec 18 2024 at 18:54)</a>:</h4>
<p>Oh nice. I managed to fix it with <code>let body = RocList::from_slice(body.to_vec().as_slice());</code> but I imagine your impl is more efficient</p>



<a name="489822139"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489822139" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489822139">(Dec 18 2024 at 18:55)</a>:</h4>
<p>yeah, will push shortly</p>



<a name="489822376"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489822376" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489822376">(Dec 18 2024 at 18:56)</a>:</h4>
<p>some voodoo magic in here... <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span> </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">const_refcount_allocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">REFCOUNT_CONSTANT</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="kt">u64</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">size_of_val</span><span class="p">(</span><span class="o">&amp;</span><span class="n">REFCOUNT_CONSTANT</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">const_seamless_slice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">const_refcount_allocation</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SEAMLESS_SLICE_BIT</span><span class="p">;</span>
</code></pre></div>



<a name="489822677"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489822677" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489822677">(Dec 18 2024 at 18:58)</a>:</h4>
<p>Just pushed another change</p>



<a name="489822685"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489822685" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489822685">(Dec 18 2024 at 18:58)</a>:</h4>
<p>with more magic</p>



<a name="489822707"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489822707" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489822707">(Dec 18 2024 at 18:58)</a>:</h4>
<p>but it is hidden behind a function now</p>



<a name="489823370"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489823370" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489823370">(Dec 18 2024 at 19:02)</a>:</h4>
<p>We've still got an issue somewhere, see <code>roc examples/init-basic.roc</code></p>



<a name="489823577"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489823577" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489823577">(Dec 18 2024 at 19:03)</a>:</h4>
<p>hmm, maybe just a standalone bug somewhere.</p>



<a name="489823674"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489823674" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489823674">(Dec 18 2024 at 19:04)</a>:</h4>
<p>I haven't got any of the expect scripts passing. I'll need to dig into each now and figure out what I've changed</p>



<a name="489823882"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489823882" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489823882">(Dec 18 2024 at 19:05)</a>:</h4>
<p>ooh, <code>GET</code> -&gt; <code>Get</code>... simple enough change, I think I switched to using <code>Inspect.toStr</code> because we didn't need <code>method_to_str</code>, turns out we do if we want these tags to print all uppercase</p>



<a name="489824149"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489824149" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489824149">(Dec 18 2024 at 19:06)</a>:</h4>
<p>Or do people think this looks fine for a log?</p>
<div class="codehilite"><pre><span></span><code>2024-12-18T19:05:04Z Get /
</code></pre></div>



<a name="489824268"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489824268" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489824268">(Dec 18 2024 at 19:07)</a>:</h4>
<p>I'd prefer all caps</p>



<a name="489824279"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489824279" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489824279">(Dec 18 2024 at 19:07)</a>:</h4>
<p>I prefer caps for methods</p>



<a name="489824439"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489824439" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489824439">(Dec 18 2024 at 19:08)</a>:</h4>
<p>Can the tag simply be all uppercase?</p>



<a name="489825008"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489825008" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489825008">(Dec 18 2024 at 19:11)</a>:</h4>
<p>It's not an acronym, so it might be a little strange.</p>



<a name="489825024"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489825024" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489825024">(Dec 18 2024 at 19:11)</a>:</h4>
<p>We could do that...</p>



<a name="489825184"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489825184" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489825184">(Dec 18 2024 at 19:12)</a>:</h4>
<p>Yeah, might not be worth, I just like being able to print things in the expect form via the default print and debug mechanism.</p>



<a name="489825356"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489825356" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489825356">(Dec 18 2024 at 19:13)</a>:</h4>
<p>it's not an acronym but they're always spelled in all caps. I think it's fine if it doesn't fit the usual identifier convention but does fit the way it's usually spelled</p>



<a name="489825752"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489825752" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489825752">(Dec 18 2024 at 19:16)</a>:</h4>
<p>Ok, changing to all caps for Http Method</p>



<a name="489826240"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489826240" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489826240">(Dec 18 2024 at 19:19)</a>:</h4>
<p>Ok, so we've restored most of our CI tests now</p>



<a name="489826298"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489826298" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489826298">(Dec 18 2024 at 19:20)</a>:</h4>
<p>Only a few are failing</p>



<a name="489826649"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489826649" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489826649">(Dec 18 2024 at 19:22)</a>:</h4>
<p>Something is really broken in <code>examples/init-basic.roc</code>, it's a super simple app but the server just hangs</p>



<a name="489829706"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489829706" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489829706">(Dec 18 2024 at 19:44)</a>:</h4>
<p>I'll take a look now</p>



<a name="489830340"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489830340" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489830340">(Dec 18 2024 at 19:49)</a>:</h4>
<p>It gets stuck during init or respond?</p>



<a name="489830613"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489830613" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489830613">(Dec 18 2024 at 19:50)</a>:</h4>
<p>fails to load the model during respond I think</p>



<a name="489830698"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489830698" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489830698">(Dec 18 2024 at 19:51)</a>:</h4>
<p><code>init gave me ðŸŽ</code></p>



<a name="489830708"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489830708" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489830708">(Dec 18 2024 at 19:51)</a>:</h4>
<p>so beautiful.....</p>



<a name="489831228"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489831228" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489831228">(Dec 18 2024 at 19:54)</a>:</h4>
<p>looks like roc does expect the box as a <code>boxed_model: RocBox&lt;()&gt;,</code> and not by pointer</p>



<a name="489831248"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489831248" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489831248">(Dec 18 2024 at 19:55)</a>:</h4>
<p>Not sure why the data is wrong though</p>



<a name="489831545"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489831545" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489831545">(Dec 18 2024 at 19:57)</a>:</h4>
<p>yeah, I think changing the model works, then rendering unicode seems to be failing</p>



<a name="489832222"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489832222" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489832222">(Dec 18 2024 at 20:01)</a>:</h4>
<p>Also, refcounted things in a model for basic webserver technically have a race condition. Cause the outer box is set to a constant refcount, but none of the inner data is. As such when loading inner data, each thread will locally be incrementing and decrementing refcounts.</p>



<a name="489832507"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489832507" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489832507">(Dec 18 2024 at 20:03)</a>:</h4>
<p>And I think that <code>ðŸŽ</code> is the present, just rendering as ascii and not unicode.</p>



<a name="489832636"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489832636" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489832636">(Dec 18 2024 at 20:04)</a>:</h4>
<p>So everything "working" with the box change</p>



<a name="489832799"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489832799" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489832799">(Dec 18 2024 at 20:05)</a>:</h4>
<p>just pushed it</p>



<a name="489833451"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489833451" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489833451">(Dec 18 2024 at 20:09)</a>:</h4>
<p>and "working" means that I think it should be doing the same as the old basic-webserver including bugs</p>



<a name="489843716"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489843716" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489843716">(Dec 18 2024 at 21:26)</a>:</h4>
<p>We're on the home stretch.... <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span> </p>
<p><a href="/user_uploads/22008/aVc6wEPsdlfnqFX-nWSTnj5X/Screenshot-2024-12-19-at-08.25.09.png">Screenshot 2024-12-19 at 08.25.09.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/aVc6wEPsdlfnqFX-nWSTnj5X/Screenshot-2024-12-19-at-08.25.09.png" title="Screenshot 2024-12-19 at 08.25.09.png"><img data-original-dimensions="1716x630" src="/user_uploads/thumbnail/22008/aVc6wEPsdlfnqFX-nWSTnj5X/Screenshot-2024-12-19-at-08.25.09.png/840x560.webp"></a></div><p>I've ignored two failing tests, because I wanted to see how far we got through CI. </p>
<p>So just a couple things now to dig into, and we should be good to go.</p>



<a name="489848290"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489848290" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489848290">(Dec 18 2024 at 22:02)</a>:</h4>
<p>Famous last words Luke…. <span aria-label="stuck out tongue closed eyes" class="emoji emoji-1f61d" role="img" title="stuck out tongue closed eyes">:stuck_out_tongue_closed_eyes:</span></p>



<a name="489848444"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489848444" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489848444">(Dec 18 2024 at 22:03)</a>:</h4>
<p>1 down... 1 to go :chef's kiss:</p>



<a name="489849526"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489849526" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489849526">(Dec 18 2024 at 22:11)</a>:</h4>
<p><span aria-label="folded hands" class="emoji emoji-1f64f" role="img" title="folded hands">:folded_hands:</span></p>



<a name="489889740"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489889740" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489889740">(Dec 19 2024 at 05:32)</a>:</h4>
<p>And we did it! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <span aria-label="space invader" class="emoji emoji-1f47e" role="img" title="space invader">:space_invader:</span></p>
<p><a href="/user_uploads/22008/00jVPvNR55nSZssxWUCUlFj-/Screenshot-2024-12-19-at-16.30.45.png">Screenshot 2024-12-19 at 16.30.45.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/00jVPvNR55nSZssxWUCUlFj-/Screenshot-2024-12-19-at-16.30.45.png" title="Screenshot 2024-12-19 at 16.30.45.png"><img data-original-dimensions="1346x430" src="/user_uploads/thumbnail/22008/00jVPvNR55nSZssxWUCUlFj-/Screenshot-2024-12-19-at-16.30.45.png/840x560.webp"></a></div><p>A big thank you to <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> (for saving us 10x over) and <span class="user-mention" data-user-id="461444">@Sam Mohr</span> for helping with this upgrade. It was much smoother this time round after landing basic-cli, and re-using crates from there. </p>
<p>I'm looking forward to testing it out and upgrading my demo web apps etc, and see what issues we can flush out.</p>



<a name="489928404"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489928404" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489928404">(Dec 19 2024 at 10:18)</a>:</h4>
<p>Congrats Luke on landing this!  Having the two big platforms moved over will help a lot</p>



<a name="489928433"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/basic-webserver%20purity%20inference/near/489928433" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/basic-webserver.20purity.20inference.html#489928433">(Dec 19 2024 at 10:19)</a>:</h4>
<p>Congrats Luke on landing this!  Having the two big platforms moved over will help a lot</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>