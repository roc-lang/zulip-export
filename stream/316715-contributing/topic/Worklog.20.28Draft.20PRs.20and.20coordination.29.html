<html>
<head><meta charset="utf-8"><title>Worklog (Draft PRs and coordination) · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html">Worklog (Draft PRs and coordination)</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="526280766"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526280766" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526280766">(Jun 29 2025 at 16:39)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/7897">7897</a>: Handle parsing ambiguous nodes</p>



<a name="526292519"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526292519" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526292519">(Jun 29 2025 at 20:16)</a>:</h4>
<p>Starting work on updating if-else:</p>
<ul>
<li>Canonicalization: Don't use <code>predictNodeIndex</code></li>
<li>Type Checking: Stop cascading failures, better error messages</li>
</ul>



<a name="526296196"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526296196" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526296196">(Jun 29 2025 at 21:26)</a>:</h4>
<p>Just a note on the above, I'll be touching huge swaths of check/parse/AST.zig, a good bit of check/parse/NodeStore.zig, and a bit of check/parse/Parser.zig.  If you could check in with me about changes there that will be coming in within the next week, it would be helpful to avoid a very painful merge conflict.</p>
<p>I do aim to merge the most impactful stuff to AST and NodeStore as soon as I have tests passing</p>



<a name="526297099"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526297099" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526297099">(Jun 29 2025 at 21:50)</a>:</h4>
<p>I'm getting rid of other uses of <code>predictNodeIndex</code></p>



<a name="526298030"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526298030" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526298030">(Jun 29 2025 at 22:10)</a>:</h4>
<p><span class="user-mention" data-user-id="781658">@Anthony Bullard</span> would you mind looking at <a href="https://github.com/roc-lang/roc/pull/7898">https://github.com/roc-lang/roc/pull/7898</a> does that impact on your parser work?</p>



<a name="526298390"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526298390" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526298390">(Jun 29 2025 at 22:17)</a>:</h4>
<p>I'm wanting to finish my crusade to add a single unit test per Can NodeStore add/get variant to verify they roundtrip correctly.</p>



<a name="526363265"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526363265" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526363265">(Jun 30 2025 at 09:58)</a>:</h4>
<p>I'm working on <code>SingleQuote</code> tokenization and possibly parsing <span class="user-mention" data-user-id="781658">@Anthony Bullard</span> it will likely interfere with you changes. although the conflicts shouldn't be very big</p>



<a name="526363513"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526363513" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526363513">(Jun 30 2025 at 09:59)</a>:</h4>
<p>Also, I plan to make <code>tokenizer.zig</code> use <code>Region</code>s in relevant places in a separate pr</p>



<a name="526380928"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526380928" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526380928">(Jun 30 2025 at 11:43)</a>:</h4>
<p><span class="user-mention" data-user-id="584248">@Kiryl Dziamura</span> I don't think there is work to do here...Maybe I'm wrong.  But the main thing that needs to be done is adding a node for it in the Parser and actually parsing it.</p>



<a name="526381042"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526381042" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526381042">(Jun 30 2025 at 11:44)</a>:</h4>
<p>The tokenization is happening here: <a href="https://github.com/roc-lang/roc/blob/259b290c2a39e45f683d329d16ba2963cec13c68/src/check/parse/tokenize.zig#L980">https://github.com/roc-lang/roc/blob/259b290c2a39e45f683d329d16ba2963cec13c68/src/check/parse/tokenize.zig#L980</a></p>



<a name="526381116"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526381116" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526381116">(Jun 30 2025 at 11:44)</a>:</h4>
<p>and it lacks return after this line:<br>
<a href="https://github.com/roc-lang/roc/blob/259b290c2a39e45f683d329d16ba2963cec13c68/src/check/parse/tokenize.zig#L999">https://github.com/roc-lang/roc/blob/259b290c2a39e45f683d329d16ba2963cec13c68/src/check/parse/tokenize.zig#L999</a></p>



<a name="526381449"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526381449" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526381449">(Jun 30 2025 at 11:46)</a>:</h4>
<p>Oh, I didn't even see that!  Great catch!</p>



<a name="526495290"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526495290" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526495290">(Jun 30 2025 at 22:29)</a>:</h4>
<p>Planning on starting type checking on match statements once Luke's draft PR lands</p>



<a name="526496285"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526496285" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526496285">(Jun 30 2025 at 22:38)</a>:</h4>
<p>I may get the Can for match (at least with current supported syntax) done by your time tomorrow. Somewhat tempted to take a detour and cleanup the snapshot mess I'm feeling like I've contributed to</p>



<a name="526574565"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526574565" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526574565">(Jul 01 2025 at 10:20)</a>:</h4>
<p>started working on <code>tokenize.zig</code> cleanup related to offsets (the goal is to use regions if they don't introduce any penalty):<br>
<a href="https://github.com/roc-lang/roc/pull/7917">https://github.com/roc-lang/roc/pull/7917</a></p>



<a name="526632212"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526632212" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526632212">(Jul 01 2025 at 15:17)</a>:</h4>
<p>Generally question about the above PR. Why are we starting lengths in the tokenizer at all?</p>



<a name="526632302"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526632302" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526632302">(Jul 01 2025 at 15:18)</a>:</h4>
<p>Retpkenizing should be essentially free.</p>



<a name="526632569"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526632569" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526632569">(Jul 01 2025 at 15:19)</a>:</h4>
<p>So why not only store the offset and leave regions to later parts of the stack. Even later parts of the stack likely could just reference two token indices and then just request the start and end from the two tokens.</p>



<a name="526632836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526632836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526632836">(Jul 01 2025 at 15:20)</a>:</h4>
<p>Not saying that is the best setup, but curious our strategy here</p>



<a name="526635165"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526635165" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526635165">(Jul 01 2025 at 15:30)</a>:</h4>
<p>I guess <code>interned</code> is the reason? maybe it's redundant tho</p>



<a name="526645085"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526645085" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526645085">(Jul 01 2025 at 16:27)</a>:</h4>
<p>Also, whitespaces are skipped, I think without end offset we'd have to collect all gaps as tokens</p>



<a name="526678489"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526678489" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526678489">(Jul 01 2025 at 20:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="341568">Jared Ramirez</span> <a href="#narrow/channel/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/526495290">said</a>:</p>
<blockquote>
<p>Planning on starting type checking on match statements once Luke's draft PR lands</p>
</blockquote>
<p>Working on canonicalization + type checking for <code>match</code></p>



<a name="526683346"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526683346" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526683346">(Jul 01 2025 at 21:09)</a>:</h4>
<p><span class="user-mention" data-user-id="341568">@Jared Ramirez</span> are you building on top of my branch? Does it look ok to merge as is?</p>



<a name="526683980"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526683980" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526683980">(Jul 01 2025 at 21:15)</a>:</h4>
<p>Yeah, it looks good to me!</p>



<a name="526684163"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526684163" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526684163">(Jul 01 2025 at 21:16)</a>:</h4>
<p>I've been mostly reading about exhaustiveness checking so far, haven't written any code yet. But was planning on starting with error messages until your branch is merged!</p>



<a name="526692024"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526692024" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526692024">(Jul 01 2025 at 22:33)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/7919">#7919</a> -- I've started adding a roc package. I'm thinking about and exploring how we will do multi file snapshots. Also wanting more realistic examples to test our parser/can implementation against to understand what areas need work still. </p>
<p>My current line of thinking is we make a directory that represents the root, with the <code>.roc</code> files in it exactly as they would be.</p>
<p>Until we get multiple module things up and running, I might have the snapshot tool just pickup these <code>.roc</code> files and treat them as independent <code>file</code> type snapshots and generate a <code>.md</code> for each...</p>



<a name="526700255"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526700255" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526700255">(Jul 02 2025 at 00:21)</a>:</h4>
<p>I'm going to start investigating support for Nominal Tag Unions.</p>
<p>PR <a href="https://github.com/roc-lang/roc/pull/7922">https://github.com/roc-lang/roc/pull/7922</a></p>



<a name="526709585"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526709585" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526709585">(Jul 02 2025 at 02:29)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/7923">#7923</a> - draft of making effectful functions work (and not use a type variable anymore!) along with some type inference fixes and other miscellaneous improvements</p>



<a name="526787590"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526787590" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526787590">(Jul 02 2025 at 12:15)</a>:</h4>
<p>I've started refactoring CIR a little... <a href="https://github.com/roc-lang/roc/pull/7925">https://github.com/roc-lang/roc/pull/7925</a>. Basically pulling the obvious parts into separate files (Expressions, Statements, Patterns, TypeAnnotations etc), adding doc comments and examples. etc.</p>
<p>I've been researching how to implement new features like nominal types, and figure I may as well clean up and document everything as I learn more. It's easier for me to understand how things are wired together when it's organised, and hopefully helps the next guy that comes along too.</p>
<p>I can keep this in Draft and rebase it until <span class="user-mention" data-user-id="281383">@Richard Feldman</span> and <span class="user-mention" data-user-id="341568">@Jared Ramirez</span> land those two PRs sometime tomorrow (my time) I assume, I'm not tracking anyone else working in CIR right now.</p>



<a name="526893632"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/526893632" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#526893632">(Jul 02 2025 at 23:30)</a>:</h4>
<p>I've rebased this CIR refactor on main. I'll continue poking at it for a few hours. Please avoid making PR's that touch CIR unless your basing off this branch.</p>



<a name="527029670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527029670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527029670">(Jul 03 2025 at 15:52)</a>:</h4>
<p>I'm taking a look at type checking binops. Are all of the following, minus <code>and</code>, <code>or</code>, <code>pipe_forward</code> and <code>null_coalesce</code> going use static dispatch?</p>
<div class="codehilite" data-code-language="Zig"><pre><span></span><code><span class="c1">/// Binary operators available in Roc.</span>
<span class="kr">pub</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="n">Op</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="c1">// +</span>
<span class="w">    </span><span class="n">sub</span><span class="p">,</span><span class="w"> </span><span class="c1">// -</span>
<span class="w">    </span><span class="n">mul</span><span class="p">,</span><span class="w"> </span><span class="c1">// *</span>
<span class="w">    </span><span class="n">div</span><span class="p">,</span><span class="w"> </span><span class="c1">// /</span>
<span class="w">    </span><span class="n">rem</span><span class="p">,</span><span class="w"> </span><span class="c1">// %</span>
<span class="w">    </span><span class="n">lt</span><span class="p">,</span><span class="w"> </span><span class="c1">// &lt;</span>
<span class="w">    </span><span class="n">gt</span><span class="p">,</span><span class="w"> </span><span class="c1">// &gt;</span>
<span class="w">    </span><span class="n">le</span><span class="p">,</span><span class="w"> </span><span class="c1">// &lt;=</span>
<span class="w">    </span><span class="n">ge</span><span class="p">,</span><span class="w"> </span><span class="c1">// &gt;=</span>
<span class="w">    </span><span class="n">eq</span><span class="p">,</span><span class="w"> </span><span class="c1">// ==</span>
<span class="w">    </span><span class="n">ne</span><span class="p">,</span><span class="w"> </span><span class="c1">// !=</span>
<span class="w">    </span><span class="n">pow</span><span class="p">,</span><span class="w"> </span><span class="c1">// ^</span>
<span class="w">    </span><span class="n">div_trunc</span><span class="p">,</span><span class="w"> </span><span class="c1">// //</span>
<span class="w">    </span><span class="err">@</span><span class="s">"and"</span><span class="p">,</span><span class="w"> </span><span class="c1">// and</span>
<span class="w">    </span><span class="err">@</span><span class="s">"or"</span><span class="p">,</span><span class="w"> </span><span class="c1">// or</span>
<span class="w">    </span><span class="n">pipe_forward</span><span class="p">,</span><span class="w"> </span><span class="c1">// |&gt;</span>
<span class="w">    </span><span class="n">null_coalesce</span><span class="p">,</span><span class="w"> </span><span class="c1">// ?</span>
<span class="p">};</span>
</code></pre></div>



<a name="527032371"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527032371" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527032371">(Jul 03 2025 at 16:07)</a>:</h4>
<p><code>pipe_forward</code> should be <code>-&gt;</code> instead of <code>|&gt;</code> (and prob could use a different name)</p>



<a name="527032378"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527032378" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527032378">(Jul 03 2025 at 16:07)</a>:</h4>
<p>it doesn't use static dispatch</p>



<a name="527032408"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527032408" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527032408">(Jul 03 2025 at 16:07)</a>:</h4>
<p>it's just sugar for a normal function call</p>



<a name="527032422"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527032422" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527032422">(Jul 03 2025 at 16:07)</a>:</h4>
<p>(maybe <code>arrow_call</code> might be a better name?)</p>



<a name="527032543"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527032543" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527032543">(Jul 03 2025 at 16:08)</a>:</h4>
<p>e.g. <code>arg1-&gt;my_fn(arg2, arg3)</code> does the same thing as <code>my_fn(arg1, arg2, arg3)</code></p>



<a name="527032659"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527032659" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527032659">(Jul 03 2025 at 16:08)</a>:</h4>
<p><code>null_coalesce</code> also doesn't use static dispatch, and should be renamed to something like <code>return_err</code></p>



<a name="527032783"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527032783" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527032783">(Jul 03 2025 at 16:09)</a>:</h4>
<p>it works like this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">answer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_result</span><span class="o">?</span>
</code></pre></div>
<p>...is equivalent to:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">answer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">my_result</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">val</span>
<span class="w">    </span><span class="nb">Err</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>



<a name="527032910"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527032910" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527032910">(Jul 03 2025 at 16:10)</a>:</h4>
<p>or maybe <code>postfix_question_mark</code> if we want to name it based on how it looks <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="527033117"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527033117" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527033117">(Jul 03 2025 at 16:11)</a>:</h4>
<p>btw I definitely want to make it so that if we get type mismatches with these, we report them using the binop names (since that's what was in the source code) rather than the functions they effectively desugar to!</p>



<a name="527033216"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527033216" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527033216">(Jul 03 2025 at 16:11)</a>:</h4>
<p>like if I write <code>+</code> or <code>?</code> in my code, I should see <code>+</code> or <code>?</code> in the error message (and not just in the source code snippet, but in the words too!)</p>



<a name="527035607"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527035607" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527035607">(Jul 03 2025 at 16:26)</a>:</h4>
<p>okay cool, since no desugaring has happened by type checking, nice error messages should be straightforward here</p>



<a name="527035823"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527035823" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527035823">(Jul 03 2025 at 16:28)</a>:</h4>
<p><del>then <code>?</code> shouldn't actually be a binop, since it's really just a suffix? Maybe I should remove it?</del></p>



<a name="527035890"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527035890" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527035890">(Jul 03 2025 at 16:28)</a>:</h4>
<p>true</p>



<a name="527035898"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527035898" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527035898">(Jul 03 2025 at 16:28)</a>:</h4>
<p>Maybe this <code>null_coalesce</code> was ported from the older <code>??</code> or optional record fields?</p>



<a name="527035922"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527035922" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527035922">(Jul 03 2025 at 16:28)</a>:</h4>
<p>ohh</p>



<a name="527035935"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527035935" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527035935">(Jul 03 2025 at 16:28)</a>:</h4>
<p>yeah <code>??</code> is totally a binop</p>



<a name="527035984"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527035984" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527035984">(Jul 03 2025 at 16:29)</a>:</h4>
<p>that's like <code>Result.withDefault</code> right?</p>



<a name="527036109"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527036109" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527036109">(Jul 03 2025 at 16:29)</a>:</h4>
<p>kinda - it's also not static dispatch, but rather a <code>match</code> sugar:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">answer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_result</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="mi">5</span>
</code></pre></div>
<p>...is equivalent to:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">answer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">my_result</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">val</span>
<span class="w">    </span><span class="nb">Err</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">5</span>
<span class="p">}</span>
</code></pre></div>



<a name="527036176"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527036176" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527036176">(Jul 03 2025 at 16:30)</a>:</h4>
<p>the distinction matters if you want to use it with things that affect control flow, like <code>?? return 5</code> or <code>?? crash "blah"</code></p>



<a name="527036238"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527036238" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527036238">(Jul 03 2025 at 16:30)</a>:</h4>
<p>whereas if it just desugared to actual <code>.with_default</code>, those use cases wouldn't work</p>



<a name="527091769"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527091769" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527091769">(Jul 04 2025 at 00:57)</a>:</h4>
<p>I'd like to re-attack Nominal Types. </p>
<p>Before I can do that we need to support parsing multiple <code>UpperIdent</code> separated by <code>Comma</code> tokens, and also a package prefix, e.g. <code>json.Core.Utf8.Encoder</code> might be an example of the <code>Encoder</code> type declaration (presumably nominal but could be an alias) in the <code>Core/Utf8.roc</code> module inside the <code>json</code> package.</p>



<a name="527120202"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527120202" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527120202">(Jul 04 2025 at 07:12)</a>:</h4>
<p>I've pushed my WIP to <a href="https://github.com/roc-lang/roc/pull/7931">https://github.com/roc-lang/roc/pull/7931</a></p>
<p>I think it's looking ok, but I'm still working through the diffs in the snapshots and picking up minor bugs that I'm fixing.  I've ran out of time today to finish this... I should be able to pick it up again Sat evening.</p>



<a name="527120352"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527120352" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527120352">(Jul 04 2025 at 07:14)</a>:</h4>
<p><span class="user-mention" data-user-id="781658">@Anthony Bullard</span> there are changes in here in the Parser and AST/NodeStore to support parsing of qualified types and values in packages/module chains.</p>



<a name="527141624"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527141624" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527141624">(Jul 04 2025 at 09:25)</a>:</h4>
<p>Hey! I continue reading the codebase. Now I have some questions regarding parsing. can you please take a look <a href="https://github.com/roc-lang/roc/pull/7936/files">https://github.com/roc-lang/roc/pull/7936/files</a> ?</p>



<a name="527237072"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527237072" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527237072">(Jul 04 2025 at 22:52)</a>:</h4>
<p>I was looking at switching our build script back to a proper <code>check</code> step. On top of that, making <code>check</code> cover all executables and tests, but then having smaller steps for faster checking. The most relevant probably being <code>check-test</code> which would likely be a solid default for most work. One thing that still annoys me with how zig/zls currently do checking is that if you have multiple check targets that include the same source, you get a ton of repeated error mesages. So for every executable, we get another copy of each error message. Theoretically the fix for this is to use more modules. That way the executables just import our "main" module and the "main" module runs check once on all the files it contains. I haven't tried factoring this way yet, but I want to make some of this nicer overall (though it would require a refactoring of imports).</p>
<p>Have a draft PR for at least some starter work as I think of better factoring: <a href="https://github.com/roc-lang/roc/pull/7942">https://github.com/roc-lang/roc/pull/7942</a></p>



<a name="527237406"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527237406" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527237406">(Jul 04 2025 at 22:59)</a>:</h4>
<p>Not actually sure this is the right way to go, just tinkering and trying to match what zls suggests.</p>



<a name="527264387"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527264387" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527264387">(Jul 05 2025 at 08:30)</a>:</h4>
<p>I feel like adding support for qualified Idents, and Nominal Types (including recursive) has been a mighty big yak.</p>



<a name="527264444"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527264444" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527264444">(Jul 05 2025 at 08:31)</a>:</h4>
<p>I've gotten to the home stretch a few times now, and then noticed a bug which has taken me down another rabbit hole.</p>



<a name="527277878"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527277878" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527277878">(Jul 05 2025 at 12:53)</a>:</h4>
<p>I got type instantiation landed, but it needs a refactor. gonna do that next.</p>



<a name="527290703"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527290703" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527290703">(Jul 05 2025 at 16:12)</a>:</h4>
<p>Gonna work on checking nominal types next.</p>
<p>Thinking a next mini-milestone for me might be: after nominal type checking work, I might create a pared-down version of the bool.roc built-in file. Then canonicalize and type check that, and pass those types into the actual user roc file to to use the built-in Bool nominal type in type checking in things like if conditions.</p>



<a name="527296200"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527296200" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527296200">(Jul 05 2025 at 18:06)</a>:</h4>
<p>that sounds sweet!</p>



<a name="527296230"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527296230" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527296230">(Jul 05 2025 at 18:07)</a>:</h4>
<p>if you wanted to get advanced, you could do the same with <code>List.roc</code> and implement it as a Cons list (just for now, of course)</p>



<a name="527296384"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527296384" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527296384">(Jul 05 2025 at 18:10)</a>:</h4>
<p><span aria-label="alert" class="emoji emoji-1f6a8" role="img" title="alert">:alert:</span> PSA! <span aria-label="alert" class="emoji emoji-1f6a8" role="img" title="alert">:alert:</span> as of <a href="https://github.com/roc-lang/roc/pull/7949">https://github.com/roc-lang/roc/pull/7949</a> we now have a new <code>EXPECTED</code> section of snapshots, which lists the <code>PROBLEMS</code> we expect to see in the rest of the snapshot (just the ALL CAPS name of the problem and the source region, not the entire error message)</p>
<p>the goal here is just that if we  accidentally cause regressions in our snapshots, this will let us know! (If we actually make fixes and reduce the reported <code>PROBLEMS</code>, then we can update the snapshot with a revised <code>EXPECTED</code> section.) And since it doesn't verify the <em>entire</em> contents of the snapshot, just the errors reported, it shouldn't give us false positives for things like refactors that change ident numbers etc.</p>



<a name="527296465"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527296465" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527296465">(Jul 05 2025 at 18:12)</a>:</h4>
<p>Wow, that PR hits more files than I expected...we have way more snapshots than I realized.</p>



<a name="527296468"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527296468" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527296468">(Jul 05 2025 at 18:12)</a>:</h4>
<p>in the future we could maybe also do something with like verifying expected types of things</p>



<a name="527296478"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527296478" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527296478">(Jul 05 2025 at 18:12)</a>:</h4>
<p>yeah we've accumulated a lot of them already <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="527296490"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527296490" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527296490">(Jul 05 2025 at 18:12)</a>:</h4>
<p>many of them have problems though</p>



<a name="527296512"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527296512" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527296512">(Jul 05 2025 at 18:13)</a>:</h4>
<p>(as in, unintentional ones, e.g. because we haven't implemented things yet, or in some cases because they're using old syntax)</p>



<a name="527330377"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527330377" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527330377">(Jul 06 2025 at 07:52)</a>:</h4>
<p>I've been talking with <span class="user-mention" data-user-id="453336">@Joshua Warner</span> about the snapshots. I've started reviewing all of the old-syntax ones and I'm going through and deleting any that I think are not helpful, and updating the ones I think are useful. </p>
<p>I still plan on implementing Can for <code>where</code>, but just taking a quick detour to clean up that snapshots a little. I got a bit carried away just converting them all using a script, and didn't take the time to properly review them.</p>



<a name="527347493"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527347493" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527347493">(Jul 06 2025 at 13:35)</a>:</h4>
<p>I appreciate that! now that we have <code>EXPECTED</code> in there, would also be great to review those</p>



<a name="527347513"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527347513" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527347513">(Jul 06 2025 at 13:35)</a>:</h4>
<p>right now I set it so that all the <code>EXPECTED</code> fields just line up with the current <code>PROBLEMS</code></p>



<a name="527347517"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527347517" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527347517">(Jul 06 2025 at 13:35)</a>:</h4>
<p>but we should review whether they're actually correct</p>



<a name="527347654"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527347654" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527347654">(Jul 06 2025 at 13:38)</a>:</h4>
<p>e.g. I've already seen quite a few where the snapshot seems to be trying to verify one thing, but actually it gets derailed by a syntax error (which is reported in <code>PROBLEMS</code>, at least!) which causes it to not actually be type-checked (or whatever thing it's actually trying to test)</p>



<a name="527387971"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527387971" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527387971">(Jul 07 2025 at 01:54)</a>:</h4>
<p>I'm gonna start working on canonicalizing and type-checking other modules (e.g. imports, exposing, etc.)</p>



<a name="527387998"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527387998" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527387998">(Jul 07 2025 at 01:54)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="341568">@Jared Ramirez</span> since I saw you had a commit involving <code>canonicalizeHeaderExposes</code> yesterday! <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="527402778"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527402778" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527402778">(Jul 07 2025 at 05:37)</a>:</h4>
<p>Tomrrow will work can/type checking for type arguments in nominal tags</p>



<a name="527574482"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527574482" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527574482">(Jul 07 2025 at 22:24)</a>:</h4>
<p>If we're happy with <code>where</code> clause for now. I'm thinking of digging into the issues from our realistic example <code>src/snapshots/plume_package/Color.md</code>. It looks like we need to investigate;</p>
<ul>
<li>single quotes in patterns, </li>
<li>nominal tags with payloads, </li>
<li>interpolated strings in tag payloads, </li>
<li>and top-level expect</li>
</ul>



<a name="527576726"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527576726" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527576726">(Jul 07 2025 at 22:37)</a>:</h4>
<p>I’m currently working on nominal tag payloads!</p>



<a name="527587055"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527587055" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527587055">(Jul 08 2025 at 00:45)</a>:</h4>
<p>I'd like to change canonicalize/NodeStore.addExpr to return an error...</p>
<div class="codehilite" data-code-language="Zig"><pre><span></span><code><span class="c1">// FROM</span>
<span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">addExpr</span><span class="p">(</span><span class="n">store</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">NodeStore</span><span class="p">,</span><span class="w"> </span><span class="n">expr</span><span class="o">:</span><span class="w"> </span><span class="n">CIR</span><span class="p">.</span><span class="n">Expr</span><span class="p">)</span><span class="w"> </span><span class="n">CIR</span><span class="p">.</span><span class="n">Expr</span><span class="p">.</span><span class="n">Idx</span>
<span class="c1">// TO</span>
<span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">addExpr</span><span class="p">(</span><span class="n">store</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">NodeStore</span><span class="p">,</span><span class="w"> </span><span class="n">expr</span><span class="o">:</span><span class="w"> </span><span class="n">CIR</span><span class="p">.</span><span class="n">Expr</span><span class="p">)</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="n">mem</span><span class="p">.</span><span class="n">Allocator</span><span class="p">.</span><span class="n">Error</span><span class="o">!</span><span class="n">CIR</span><span class="p">.</span><span class="n">Expr</span><span class="p">.</span><span class="n">Idx</span>
</code></pre></div>
<p>But I'd like to merge all these PR's that touch Can first to avoid a conflict</p>



<a name="527594825"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527594825" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527594825">(Jul 08 2025 at 02:38)</a>:</h4>
<p>Why? I thought OOMs were deemed unrecoverable errors. Mostly curious cause if we want this, we probably should be consistent across the compiler.</p>



<a name="527594905"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527594905" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527594905">(Jul 08 2025 at 02:39)</a>:</h4>
<p>Richard has said he would like to use this pattern more.</p>



<a name="527594937"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527594937" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527594937">(Jul 08 2025 at 02:40)</a>:</h4>
<p>I'm not sure where. But <span class="user-mention" data-user-id="341568">@Jared Ramirez</span> and I have been slowly converting to use the zig errors like this.</p>



<a name="527595013"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527595013" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527595013">(Jul 08 2025 at 02:41)</a>:</h4>
<p>I guess it's more explicit at the callsite that the function is allocating</p>



<a name="527595153"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527595153" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527595153">(Jul 08 2025 at 02:44)</a>:</h4>
<p>yeah, that plus also I think there may be an increasing number of cases where we're only using allocation for <code>Problems</code></p>



<a name="527595200"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527595200" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527595200">(Jul 08 2025 at 02:45)</a>:</h4>
<p>and in those cases I think it would be interesting to have <code>Problems</code> record an "OOM Problem" and stop recording further problems</p>



<a name="527595288"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527595288" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527595288">(Jul 08 2025 at 02:46)</a>:</h4>
<p>which would mean that pushing to <code>Problems</code> could stop having allocation errors, and then it would be more useful to see which things are allocating and which ones aren't</p>



<a name="527595384"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527595384" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527595384">(Jul 08 2025 at 02:48)</a>:</h4>
<p>separately, I also like the idea of actually knowing what will happen in resource-constrained environments, e.g. we could offer a CLI flag for constraining how much memory the interpreter can use when evaluating compile-time constants, we could have a better UX in wasm (e.g. in the playground) if we want to limit total memory usage in the browser and be able to more gracefully handle OOMs etc.</p>



<a name="527606876"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527606876" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527606876">(Jul 08 2025 at 05:32)</a>:</h4>
<p>I thought to myself ... it should be nice and easy to implement Can for these guys;</p>
<div class="codehilite"><pre><span></span><code>dbg x
crash &quot;msg&quot;
expect 1 == 1
return x
</code></pre></div>
<p>Turns into another massive Yak <span aria-label="melt" class="emoji emoji-1fae0" role="img" title="melt">:melt:</span></p>



<a name="527654497"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527654497" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527654497">(Jul 08 2025 at 10:39)</a>:</h4>
<p>Starting looking at de-structuring record sub-patterns, going on another tangent with record update syntax, <code>as</code> patterns, and pattern alternatives. <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="527800203"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527800203" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527800203">(Jul 09 2025 at 03:01)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/7979">#7979</a> -- WIP implement module caching. </p>
<p>Currently we have a unit test that round-trips a whole module, and we added a verification test for every snapshot that serialises and deserialises from memory and compares the SExpr matches.</p>
<p>Next steps are to cleanup some of the serialisation logic (type.Store looks particularly hairy), and wire up hashes and filesystem parts into <code>roc check</code>.</p>



<a name="527803458"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527803458" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527803458">(Jul 09 2025 at 04:00)</a>:</h4>
<p>Lmk how I can help with types store! I'm also working on some changes in there related to aliases and nominal types, should hopefully MR tomorrow or thursday</p>



<a name="527803587"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527803587" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527803587">(Jul 09 2025 at 04:01)</a>:</h4>
<p>I also would like to reduce the number of backing arrays in <code>types.Store</code> too, which may be relevant</p>



<a name="527804085"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527804085" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527804085">(Jul 09 2025 at 04:07)</a>:</h4>
<p>I'll see if I can fix the valgrind issue and maybe we merge as is, and fixup the types.Store backing/serialization in a follow up</p>



<a name="527806653"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527806653" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527806653">(Jul 09 2025 at 04:49)</a>:</h4>
<p>It's taking a little while, I can't run valgrind on my mac so doing what I can and then throwing at CI to test.</p>



<a name="527806875"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527806875" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527806875">(Jul 09 2025 at 04:53)</a>:</h4>
<p>Turns out the cleanup I had in mind is just the remedy I think for our valgrind issues <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="527818820"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527818820" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527818820">(Jul 09 2025 at 06:53)</a>:</h4>
<p>Today I have been down the alignment rabbit hole -- I do not yet know if I will emerge victorious</p>



<a name="527987784"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/527987784" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#527987784">(Jul 10 2025 at 01:23)</a>:</h4>
<p>I'm poking at the module caching again, there are some obvious improvements we should make. I just hacked something together to get it working yesterday, but would like to clean it up and simplify it a little today.</p>



<a name="528200823"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528200823" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528200823">(Jul 11 2025 at 05:48)</a>:</h4>
<p>I've started working on unit tests to round-trip the AST <a href="https://github.com/roc-lang/roc/pull/8002">https://github.com/roc-lang/roc/pull/8002</a></p>
<p>I've experimented with using RNG to provide integers (deterministically) which I think significantly reduces boilerplate. </p>
<div class="codehilite" data-code-language="Zig"><pre><span></span><code><span class="c1">// example using random helpers to reduce visual noise in the tests</span>
<span class="k">try</span><span class="w"> </span><span class="n">headers</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">AST</span><span class="p">.</span><span class="n">Header</span><span class="p">{</span>
<span class="w">    </span><span class="p">.</span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.{</span>
<span class="w">        </span><span class="p">.</span><span class="n">packages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rand_idx</span><span class="p">(</span><span class="n">AST</span><span class="p">.</span><span class="n">Collection</span><span class="p">.</span><span class="n">Idx</span><span class="p">),</span>
<span class="w">        </span><span class="p">.</span><span class="n">platform_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rand_idx</span><span class="p">(</span><span class="n">AST</span><span class="p">.</span><span class="n">RecordField</span><span class="p">.</span><span class="n">Idx</span><span class="p">),</span>
<span class="w">        </span><span class="p">.</span><span class="n">provides</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rand_idx</span><span class="p">(</span><span class="n">AST</span><span class="p">.</span><span class="n">Collection</span><span class="p">.</span><span class="n">Idx</span><span class="p">),</span>
<span class="w">        </span><span class="p">.</span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rand_region</span><span class="p">(),</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">});</span>
</code></pre></div>
<p>I'm reasonably confident this will help with the Parser NodeStore refactor, as we're not touching the internal Node representation, just using the AST representation.</p>



<a name="528359751"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528359751" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528359751">(Jul 11 2025 at 15:11)</a>:</h4>
<p>Up next on my immediate todo list is:</p>
<ul>
<li>Address <a href="https://github.com/roc-lang/roc/pull/7997">PR</a> feedback from Richard </li>
<li>Update types store to: use <code>Span</code> instead of <code>Range</code>, and flatten backing arrays (eg <code>tag_args</code>, <code>tuple_elems</code>, etc into a single array</li>
<li>Look at canonicalize type annotations – we have both <code>canonicalizeTypeAnno</code> and <code>canonicalizeTypeAnnoToTypeVar</code>, but I suspect if we generate type vars correctly in <code>canonicalizeTypeAnno</code> we don't need this extra var conversion func, which would remove a step and I think dedup logic</li>
<li>Update parse AST <code>tag</code> patterns to contain in qualifiers (to deal with pattern matching on nominal tag unions)</li>
</ul>



<a name="528417693"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528417693" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528417693">(Jul 11 2025 at 23:37)</a>:</h4>
<p>^ FYI taking a detour to refactor Can to ensure that CIR nodes&lt;-&gt; type vars always match 1 to 1</p>



<a name="528521917"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528521917" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528521917">(Jul 13 2025 at 10:59)</a>:</h4>
<p>I'm probably going on a crusade tomorrow to eradicate <code>exitOnOom</code>, and anything else that is OS specific deeper in our compiler than the cli.</p>
<p>This is in preparation for WASM -- so we can avoid a more painful extraction later.</p>



<a name="528522365"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528522365" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JRI98 <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528522365">(Jul 13 2025 at 11:06)</a>:</h4>
<p>Hey everyone. From my side, I started chipping away at the parse fuzz crashes that show up in <a href="https://roc-lang.github.io/roc-compiler-fuzz">https://roc-lang.github.io/roc-compiler-fuzz</a>. The codebase is a treat to work with <span aria-label="100" class="emoji emoji-1f4af" role="img" title="100">:100:</span><br>
I am also planning on configuring a machine to run the fuzzing myself.</p>



<a name="528527837"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528527837" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528527837">(Jul 13 2025 at 12:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/528521917">said</a>:</p>
<blockquote>
<p>I'm probably going on a crusade tomorrow to eradicate <code>exitOnOom</code>, and anything else that is OS specific deeper in our compiler than the cli.</p>
<p>This is in preparation for WASM -- so we can avoid a more painful extraction later.</p>
</blockquote>
<p>Exiting is os specific?</p>



<a name="528527942"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528527942" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528527942">(Jul 13 2025 at 12:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="639239">JRI98</span> <a href="#narrow/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/528522365">said</a>:</p>
<blockquote>
<p>I am also planning on configuring a machine to run the fuzzing myself.</p>
</blockquote>
<p>Awesome. Just make sure you are actually getting fuzzer coverage info when you do so. I know that afl++ and zig is a bit finicky.</p>



<a name="528562976"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528562976" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528562976">(Jul 13 2025 at 22:45)</a>:</h4>
<p><span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span> yeah currently our impl prints to stdout</p>
<div class="codehilite" data-code-language="Zig"><pre><span></span><code><span class="n">std</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">getStdErr</span><span class="p">().</span><span class="n">writer</span><span class="p">().</span><span class="n">print</span><span class="p">(</span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="k">unreachable</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tracy</span><span class="p">.</span><span class="n">enable</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">tracy</span><span class="p">.</span><span class="n">waitForShutdown</span><span class="p">()</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="k">unreachable</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">std</span><span class="p">.</span><span class="n">process</span><span class="p">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</code></pre></div>



<a name="528566292"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528566292" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528566292">(Jul 13 2025 at 23:48)</a>:</h4>
<p>Ah... Duh</p>



<a name="528573139"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528573139" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528573139">(Jul 14 2025 at 01:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/528521917">said</a>:</p>
<blockquote>
<p>I'm probably going on a crusade tomorrow to eradicate <code>exitOnOom</code>, and anything else that is OS specific deeper in our compiler than the cli.</p>
<p>This is in preparation for WASM -- so we can avoid a more painful extraction later.</p>
</blockquote>
<p>exitOnOom is invasive... this is going to be a mammoth PR that basically touches everything.</p>



<a name="528573221"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528573221" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528573221">(Jul 14 2025 at 01:48)</a>:</h4>
<p>I tried to do a little bit or think about gradual migration... I'm currently going with the rip-the-bandaid off approach.</p>



<a name="528573299"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528573299" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528573299">(Jul 14 2025 at 01:49)</a>:</h4>
<p>In a way it's easier this way, because I can quickly scan through code and see what needs to be updated. Anything that allocates should return <code>std.mem.Allocator.Error!...</code> etc</p>



<a name="528573840"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528573840" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528573840">(Jul 14 2025 at 01:59)</a>:</h4>
<p>Thanks, I need morale support... this is a very mechanical change. Thank the Zig gods for making a fast compiler <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span></p>



<a name="528576699"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528576699" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528576699">(Jul 14 2025 at 02:44)</a>:</h4>
<p>Might be a good job for claude or similar</p>



<a name="528576706"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528576706" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528576706">(Jul 14 2025 at 02:44)</a>:</h4>
<p>If you aren't already done that is.</p>



<a name="528576885"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528576885" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528576885">(Jul 14 2025 at 02:47)</a>:</h4>
<p>I think I'm probably way faster than Claude at this. It's pretty mechanical.</p>



<a name="528577210"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528577210" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528577210">(Jul 14 2025 at 02:54)</a>:</h4>
<p>Also -- I wouldn't trust an LLM with this kind of refactor, how would you ever review the changes with any confidence... there is just waaay too many.</p>



<a name="528578144"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528578144" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528578144">(Jul 14 2025 at 03:12)</a>:</h4>
<p>hmm. I haven't tested claude on this type of refactor, but it tends to do a great job with mechanical simple error driven things. Especially once you set up a base example.</p>
<blockquote>
<p>how would you ever review the changes with any confidence</p>
</blockquote>
<p>The same way I would review your code once you make the PR?</p>



<a name="528618855"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528618855" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528618855">(Jul 14 2025 at 09:20)</a>:</h4>
<p>going to work on parsing utf8 escape seq in strings and single quote (<code>\u(...)</code>)</p>



<a name="528635861"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528635861" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528635861">(Jul 14 2025 at 11:01)</a>:</h4>
<p>nice! I think we ended up using curly braces instead of parens for those in the old compiler (we should keep whatever syntax it uses)</p>



<a name="528856112"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528856112" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528856112">(Jul 15 2025 at 13:03)</a>:</h4>
<p>I can't help myself it seems... still tweaking CSS for the playground.</p>



<a name="528856197"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528856197" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528856197">(Jul 15 2025 at 13:04)</a>:</h4>
<p>This is why people shouldn't let me touch any CSS -- I have the same problems with PPT slides in case anyone was wondering.</p>



<a name="528859333"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528859333" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528859333">(Jul 15 2025 at 13:18)</a>:</h4>
<p>I used to love hacking css so much that my over-engineered nonsense would end up on codepen's front page. but then I looked over the fence and found a healthy lifestyle without alcohol. now I can’t look at any css snippet without feeling pain. I even started thinking html tables were enough. just give me a11y. I don’t care about all your fancy dynamic layouts, animations, or endlessly improvable design systems. argh.</p>



<a name="528973163"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/528973163" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#528973163">(Jul 16 2025 at 03:18)</a>:</h4>
<p>Working on refactoring types store and type snapshots store to do less allocations</p>



<a name="529106166"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529106166" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529106166">(Jul 16 2025 at 17:26)</a>:</h4>
<p>Working on consolidating <code>canonicalizeTypeAnno</code> and <code>canonicalizeTypeAnnoToTypeVar</code> in Can</p>



<a name="529264158"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529264158" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529264158">(Jul 17 2025 at 12:05)</a>:</h4>
<p>Moving single quote contents validation from can to tokenize: <a href="https://github.com/roc-lang/roc/pull/8064/files">https://github.com/roc-lang/roc/pull/8064/files</a><br>
<span class="user-mention" data-user-id="281383">@Richard Feldman</span> you mentioned you wanted to parse actual values values during tokenization, could you please clarify how you thought it to be implemented? create a new collection in module and put parsed numbers there in a similar to interned logic way?</p>



<a name="529281761"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529281761" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529281761">(Jul 17 2025 at 13:39)</a>:</h4>
<p><span class="user-mention" data-user-id="584248">@Kiryl Dziamura</span> yeah like how we do it in canonicalization currently</p>



<a name="529281794"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529281794" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529281794">(Jul 17 2025 at 13:39)</a>:</h4>
<p>basically put it in <code>extra</code> like we do with interned strings</p>



<a name="529281914"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529281914" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529281914">(Jul 17 2025 at 13:40)</a>:</h4>
<p>(as in, add new entries to the <code>extra</code> union for in-memory numbers like <code>u8</code>, <code>i8</code>, etc.)</p>



<a name="529282238"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529282238" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529282238">(Jul 17 2025 at 13:41)</a>:</h4>
<p><code>extra</code> takes 64 bits now, but we would need 128 for numbers?</p>



<a name="529282312"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529282312" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529282312">(Jul 17 2025 at 13:42)</a>:</h4>
<p>for bigger ones we can put them on the heap, like we do with interned strings</p>



<a name="529282342"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529282342" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529282342">(Jul 17 2025 at 13:42)</a>:</h4>
<p>but almost all number literals should fit in 64 bits</p>



<a name="529282465"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529282465" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529282465">(Jul 17 2025 at 13:42)</a>:</h4>
<p>yeah, I don't expect i128 be written as a literal (I hope it won't)</p>



<a name="529282472"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529282472" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529282472">(Jul 17 2025 at 13:42)</a>:</h4>
<p>we have <code>dec_small</code> for fitting float literals in less space</p>



<a name="529282651"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529282651" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529282651">(Jul 17 2025 at 13:43)</a>:</h4>
<p>yeah I could actually see an argument for just storing 64-bit and smaller inline, and then if it's bigger than 64 bits, just store the full string</p>



<a name="529282682"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529282682" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529282682">(Jul 17 2025 at 13:43)</a>:</h4>
<p>(which we'll need for arbitrary-sized int literals)</p>



<a name="529283114"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529283114" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529283114">(Jul 17 2025 at 13:45)</a>:</h4>
<p>actually, do we really need to parse them straight away exactly for that reason? we don't know if the number is custom ahead of time. when we got there, we'd need to have normalized num literals rather than parsed numbers</p>



<a name="529284095"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529284095" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529284095">(Jul 17 2025 at 13:50)</a>:</h4>
<p>I mean, we likely need to parse them during tokenization as a normalized num literal (<code>NaN | +-Infinity | { value: +-digits, exponent: +-digits }</code>)</p>



<a name="529284351"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529284351" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529284351">(Jul 17 2025 at 13:52)</a>:</h4>
<p>we don't have it right now, but I think it means we need to convert the digits to actual number at canonicalization anyway, right?</p>



<a name="529307748"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529307748" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529307748">(Jul 17 2025 at 15:42)</a>:</h4>
<p>the plan is to never support infinity/-infinity/Nan literals; they are special constants exposed by the relevant modules</p>



<a name="529307991"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529307991" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529307991">(Jul 17 2025 at 15:44)</a>:</h4>
<p>fair point about not knowing if the number is custom ahead of time, but 99.99% of the time they will be not custom and will fit in 64 bits, so I think we should optimize for that case and convert back if it turns out we were wrong <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="529309678"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529309678" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kiryl Dziamura <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529309678">(Jul 17 2025 at 15:52)</a>:</h4>
<p>ok, so we want to get as much as we can from module file contents while it's in cache because later we want to touch heap anyway and it's better if this heap is optimized for the future cache rather than having random access to the module file contents via regions?</p>
<p>I'm asking because I'm learning along the way. I'm not experienced in system level development so my questions may be... simple <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="529371456"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529371456" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529371456">(Jul 17 2025 at 23:54)</a>:</h4>
<p>I'm looking at the build system with the goal to re-use modules for our different targets and also to help our generated docs be useful.</p>



<a name="529385966"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529385966" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529385966">(Jul 18 2025 at 03:48)</a>:</h4>
<p>Refactoring to use modules and then setting up the tests to run on those modules has uncovered a heap of lurking bugs <span aria-label="bug" class="emoji emoji-1f41b" role="img" title="bug">:bug:</span></p>



<a name="529511664"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529511664" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529511664">(Jul 18 2025 at 18:52)</a>:</h4>
<p>I've been working on the WASM playground again <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="529651757"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529651757" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529651757">(Jul 20 2025 at 08:03)</a>:</h4>
<p>I'm working on Eval for Lambdas</p>



<a name="529652003"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529652003" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529652003">(Jul 20 2025 at 08:04)</a>:</h4>
<p>I have the simplest of expressions working so far <code>(|x| x + 1)(5)</code> <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span>  -- but working on padding that out into something more complete</p>



<a name="529679009"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529679009" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529679009">(Jul 20 2025 at 10:40)</a>:</h4>
<p>Taking a slight detour implementing unary_minus <code>-x</code> ... this Yak was just asking for a shave</p>



<a name="529680372"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/529680372" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#529680372">(Jul 20 2025 at 11:07)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/8085">https://github.com/roc-lang/roc/pull/8085</a></p>



<a name="530231138"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/530231138" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#530231138">(Jul 22 2025 at 22:06)</a>:</h4>
<p>I'm still working on interpreter Eval... I'm learning as I go and also getting distracted building debug tooling. <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="530284492"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/530284492" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#530284492">(Jul 23 2025 at 08:10)</a>:</h4>
<p>You can never have too much debug tooling :p</p>



<a name="530348331"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/530348331" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#530348331">(Jul 23 2025 at 13:45)</a>:</h4>
<p>Goal: more lines of code in debug tools than in the compiler</p>



<a name="530348433"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/530348433" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#530348433">(Jul 23 2025 at 13:46)</a>:</h4>
<p>That honestly would probably actually be a good thing if the debug tooling was good</p>



<a name="530559865"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/530559865" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#530559865">(Jul 24 2025 at 13:08)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/8104">#8104</a> DRAFT PR implements closure captures for the interpreter. </p>
<p>Tests are passing but I think there's some hacks in there we need to clean up. </p>
<p>I'll definitely go through it myself again a few times. But if anyone else has time I would appreciate any thoughts.</p>



<a name="530712448"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/530712448" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#530712448">(Jul 25 2025 at 07:40)</a>:</h4>
<p>I've made some progress on the interpreter (I think) ... haven't got all my tests passing yet. </p>
<p>I also need to do a rebase on main now Richard's mammoth PR removing CIR landed.</p>
<p>I'd love to have something working to share in the online meetup <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="530842025"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/530842025" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#530842025">(Jul 25 2025 at 20:13)</a>:</h4>
<p>Ok, I've merged main into <a href="https://github.com/roc-lang/roc/pull/8104">https://github.com/roc-lang/roc/pull/8104</a> so CI should pass now</p>



<a name="531240600"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531240600" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531240600">(Jul 28 2025 at 00:21)</a>:</h4>
<p>I'm planning on continuing with my refactors to use proper Zig modules. Next I'm looking at Can and CheckTypes I think. It's not necessarily untangling the web of dependencies yet, but makes it much easier to refactor in future and also speed up compilation I think.</p>
<p>I'm aware that the playground is a little broken in release builds -- I have plans to refactor it and remove the custom build pipeline and instead have the playground, snapshots, roc check etc all using the same <code>coordinate_simple</code> pipeline. I think this will be much more DRY and maintainable.</p>
<p>Along with the playground changes I'd like to setup an e2e harness to run in CI and exercise our playground  interface. Now the actual web app itself is in a separate repository it will be good to avoid regressions across that boundary.</p>



<a name="531241251"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531241251" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531241251">(Jul 28 2025 at 00:25)</a>:</h4>
<p>After all this, I'd love to get the REPL online... upgrade our CLI to use <a href="https://github.com/rockorager/libvaxis">https://github.com/rockorager/libvaxis</a> and plug the REPL in etc with our reporting system to render reports etc. </p>
<p>The key thing I've been thinking about here is making a nice abstraction for that that support both the playground REPL, and the cli REPL frontends. </p>
<p>If anyone is interested in working on this let me know.</p>



<a name="531261449"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531261449" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531261449">(Jul 28 2025 at 02:48)</a>:</h4>
<p>When are you planning starting on this refactor? I have some stuff in progress in can/type checking that I should wrap up this week</p>



<a name="531263193"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531263193" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531263193">(Jul 28 2025 at 03:04)</a>:</h4>
<p>I've almost finished the "check" module just now... about to make a PR for it. I can leave it in draft for you to look at</p>



<a name="531263792"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531263792" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531263792">(Jul 28 2025 at 03:09)</a>:</h4>
<p>Here's the DRAFT <a href="https://github.com/roc-lang/roc/pull/8124">https://github.com/roc-lang/roc/pull/8124</a></p>



<a name="531264045"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531264045" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531264045">(Jul 28 2025 at 03:11)</a>:</h4>
<p>When I've done these migrations I've found things that were slipping through and not running with <code>zig build test</code>. For example this PR currently fails with this issue... which I was just looking into. </p>
<div class="codehilite"><pre><span></span><code>$ zig build test
test
└─ run test
   └─ zig test Debug native 3 errors
src/collections/safe_list.zig:587:17: error: Cannot serialize non-POD type problem.Problem
                @compileError(&quot;Cannot serialize non-POD type &quot; ++ @typeName(T));
                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/collections/safe_list.zig:649:62: error: enum &#39;meta.FieldEnum(multi_array_list.MultiArrayList(problem.Problem).Elem__struct_41809)&#39; has no tag with value &#39;2&#39;
                    const field_ptr = slice.items(@as(Field, @enumFromInt(i))).ptr;
                                                             ^~~~~~~~~~~~~~~
/Users/luke/zig-macos-aarch64-0.14.0/lib/std/meta.zig:544:12: note: enum declared here
    return @Type(.{
           ^~~~~
src/check/snapshot.zig:391:36: error: expected type &#39;[]const snapshot.SnapshotTag&#39;, found &#39;multi_array_list.MultiArrayList(snapshot.SnapshotTag).Slice&#39;
        return self.tags.sliceRange(range);
               ~~~~~~~~~~~~~~~~~~~~^~~~~~~
/Users/luke/zig-macos-aarch64-0.14.0/lib/std/multi_array_list.zig:70:27: note: struct declared here
        pub const Slice = struct {
                          ^~~~~~
src/check/snapshot.zig:390:78: note: function return type declared here
    pub fn getTagsSlice(self: *const Self, range: SnapshotTagSafeList.Range) []const SnapshotTag {
                                                                             ^~~~~~~~~~~~~~~~~~~
error: the following command failed with 3 compilation errors:
</code></pre></div>
<p>I can hold off on this refactor if you would like.</p>



<a name="531271528"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531271528" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531271528">(Jul 28 2025 at 04:28)</a>:</h4>
<p>Nice, no go ahead and I'll rebase based from your changes when they land. I don't wanna hold you up!</p>



<a name="531367614"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531367614" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531367614">(Jul 28 2025 at 13:15)</a>:</h4>
<blockquote>
<p>upgrade our CLI to use <a href="https://github.com/rockorager/libvaxis">https://github.com/rockorager/libvaxis</a> and plug the REPL in etc with our reporting system to render reports etc.</p>
</blockquote>
<p>Do we want to pay the price of adding this as a dependency? I'm not necessarily opposed to doing so, but it's worth considering</p>



<a name="531374762"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531374762" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531374762">(Jul 28 2025 at 13:45)</a>:</h4>
<p>Yeah, we discussed it during the meetup, we think it's too tedious to build that all ourselves. Maybe we could vendor it and cut it down a bit, I don't think we need zigimg for example.</p>



<a name="531388669"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531388669" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531388669">(Jul 28 2025 at 14:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/531240600">said</a>:</p>
<blockquote>
<p>I'm planning on continuing with my refactors to use proper Zig modules. Next I'm looking at Can and CheckTypes I think. It's not necessarily untangling the web of dependencies yet, but makes it much easier to refactor in future and also speed up compilation I think.</p>
</blockquote>
<p>I'm obviously out of the loop for roc currently, but just curious around the why of this? Like what is the advantage of making build.zig a lot more complicated and tracking all the dependencies inside of it instead of leaving the compiler as a single module. Or like a few executables and then a single library module.</p>
<p>Given zig does tree shaking, I'm not sure I understand the value of doing this.</p>



<a name="531389139"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531389139" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531389139">(Jul 28 2025 at 14:45)</a>:</h4>
<p>Also, I don't think modules would change compilation speed at all. At least not based on my understanding of how zig does compilation. (Zig always puts everything in a single compilation unit)</p>



<a name="531472156"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531472156" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531472156">(Jul 28 2025 at 22:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/channel/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/527237072">said</a>:</p>
<blockquote>
<p>hat way the executables just import our "main" module and the "main" module runs check once on all the files it contains. I haven't tried factoring this way yet, but I want to make some of this nicer overall (though it would require a refactoring of imports).</p>
</blockquote>
<p>I probably misunderstood your message here, but this is why I started refactoring to use modules.</p>



<a name="531487936"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531487936" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531487936">(Jul 29 2025 at 00:46)</a>:</h4>
<p>I only quickly skimmed your PR earlier, but it look like you were introducing a bunch of modules.</p>
<p>I would not add a check and base and collections and etc module. I would make 1 singular lib module.</p>



<a name="531487970"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531487970" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531487970">(Jul 29 2025 at 00:46)</a>:</h4>
<p>Then 1 module for every executable (which we already have I believe)</p>



<a name="531489081"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531489081" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531489081">(Jul 29 2025 at 00:58)</a>:</h4>
<p>I'll look into it</p>



<a name="531718539"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531718539" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531718539">(Jul 29 2025 at 23:52)</a>:</h4>
<p><span class="user-mention" data-user-id="341568">@Jared Ramirez</span> <span class="user-mention" data-user-id="639239">@JRI98</span> -- I'm tracking your PR's but planning on merging the cleanup in <a href="https://github.com/roc-lang/roc/pull/8124">https://github.com/roc-lang/roc/pull/8124</a> first. That restores a significant number of our unit tests. </p>
<p>Just need to find some time to dig into the CI failures... it looks like some memory leaks need to be addressed.</p>



<a name="531821857"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531821857" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531821857">(Jul 30 2025 at 11:49)</a>:</h4>
<p>I've been back working on the WASM Playground again... I've built a test harness using a VM built in zig. <a href="https://github.com/roc-lang/roc/pull/8134">https://github.com/roc-lang/roc/pull/8134</a></p>
<p>I've been iterating on that, polishing and refactoring along with the playground as I go. </p>
<p>I hoped I would have a PR ready by now, but I've discovered that our current approach to generating HTML from the AST and CIR involves a lot of recursion and easily stack overflows on a WASM VM. </p>
<p>So taking a slight tangent exploring a alternate approach instead. The general idea is we could stream the IR by writing to our buffer as we go and reduce recursion by using a stack.</p>



<a name="531822405"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531822405" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531822405">(Jul 30 2025 at 11:52)</a>:</h4>
<p>I added a new CI workflow for this, if you wanted to see what the output looks like it just ran and failed with the issue I'm currently digging into Re HTML</p>
<p><a href="https://github.com/roc-lang/roc/actions/runs/16621547420/job/47027019738?pr=8134">https://github.com/roc-lang/roc/actions/runs/16621547420/job/47027019738?pr=8134</a></p>



<a name="531832087"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531832087" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531832087">(Jul 30 2025 at 12:38)</a>:</h4>
<p>Gemini basically one-shotted the stack based HTML generator... I had to fixup some compile errors (converting a bunch of AST helpers to take a <code>*const</code> where they don't need to mutate). </p>
<p>Happy to report it works nicely within our WASM VM and doesn't stack overflow... no idea if the HTML looks any good yet. But that's a start. <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="531958288"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531958288" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531958288">(Jul 31 2025 at 00:57)</a>:</h4>
<p>Our CI uncovered a bug in a transitive dependency specific to ARM... so seeing if I can patch that. I'll make a PR to upstream if it passes everything.</p>



<a name="531959169"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531959169" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531959169">(Jul 31 2025 at 01:07)</a>:</h4>
<p>Here's the patch in case anyone is interested <a href="https://github.com/rdunnington/zig-stable-array/pull/13">https://github.com/rdunnington/zig-stable-array/pull/13</a></p>



<a name="531959697"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/531959697" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#531959697">(Jul 31 2025 at 01:14)</a>:</h4>
<p>So now the upgraded playground &amp; e2e test harness look to be passing our CI. </p>
<p>I'll update the actual TypeScript web app and confirm it's all working correctly before changing that Ready For Review.</p>



<a name="532000067"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532000067" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532000067">(Jul 31 2025 at 07:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/531959169">said</a>:</p>
<blockquote>
<p>Here's the patch in case anyone is interested <a href="https://github.com/rdunnington/zig-stable-array/pull/13">https://github.com/rdunnington/zig-stable-array/pull/13</a></p>
</blockquote>
<p><a href="https://github.com/rdunnington/bytebox/pull/82">Upstreamed already</a> we're giving back to the zig community <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="532203331"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532203331" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532203331">(Aug 01 2025 at 01:51)</a>:</h4>
<p>Internal debate I'm having with myself... implement more of the interpreter, or wire the REPL into the playground <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="532207534"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532207534" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532207534">(Aug 01 2025 at 02:29)</a>:</h4>
<p>I’m continuing to work on type checking odds and ends, particularly around annotations and rigid vars!</p>



<a name="532207734"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532207734" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532207734">(Aug 01 2025 at 02:31)</a>:</h4>
<p>I'm working on getting a dev build of an interpreter working on an actual host (single-module only for now, but gotta start somewhere!)</p>



<a name="532208261"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532208261" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532208261">(Aug 01 2025 at 02:36)</a>:</h4>
<p>Ok, you convinced me... I'm going to flesh out support for the interpreter, we'll need that so the dev builds are useful <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="532208303"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532208303" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532208303">(Aug 01 2025 at 02:36)</a>:</h4>
<p>First up, numbers <span aria-label="octopus" class="emoji emoji-1f419" role="img" title="octopus">:octopus:</span> </p>
<div class="codehilite"><pre><span></span><code>(1u8, 2i8, 3u16, 4i16, 5u32, 6i32, 7u64, 8i64, 9u128, 10i128, 11.0f32, 12.0f64, 13.0dec)
</code></pre></div>



<a name="532210887"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532210887" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532210887">(Aug 01 2025 at 03:02)</a>:</h4>
<p>Ok, new stretch goal </p>
<div class="codehilite"><pre><span></span><code>(1u8, 2i8, 3u16, 4i16, 5u32, 6i32, 7u64, 8i64, 9u128, 10i128, 11.0f32, 12.0f64, 13.0dec, 0xE, 0xf, 0x20, 0b10001, 0b1_0010, 19, 20.0, 21_000, 22_000_000, 0.0, -0.1, 2e4, 3E2, -0.2e-2)
</code></pre></div>



<a name="532244051"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532244051" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532244051">(Aug 01 2025 at 07:28)</a>:</h4>
<p>Also taking another tangent with these</p>
<div class="codehilite"><pre><span></span><code>(True, False, Bool.True, Bool.False, !True, !False, True and False, !True or !True)
</code></pre></div>



<a name="532549666"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532549666" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532549666">(Aug 03 2025 at 12:02)</a>:</h4>
<p>Good progress on evaluating strings. Initial implementation seems to be working ok. </p>
<p><a href="https://github.com/roc-lang/roc/pull/8151">https://github.com/roc-lang/roc/pull/8151</a></p>
<p>Tomorrow I plan on testing it more thoroughly and ensuring it handles errors properly. </p>
<p>I'd like to add a new test expectation that asserts we evaluate to the correct RocStr value.</p>
<p>I'm not 100% sure this is the correct approach or anything... in hindsight I feel like I should have started with RocList. I'm trying to understand how to properly manage heap allocated things in the interpreter.</p>



<a name="532550558"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532550558" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532550558">(Aug 03 2025 at 12:12)</a>:</h4>
<p>I think string was a better choice; <code>List</code> needs the interpreter to be able to do polymorphism, which is a rabbit hole <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="532628074"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532628074" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532628074">(Aug 04 2025 at 02:20)</a>:</h4>
<p>just landed: our interpreter running in a real host! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span>  <a href="https://github.com/roc-lang/roc/pull/8155">https://github.com/roc-lang/roc/pull/8155</a></p>
<p><a href="/user_uploads/22008/4UE68SXhpskcnd2aEYtXIzr0/interpreter.mov">interpreter.mov</a></p>



<a name="532628112"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532628112" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532628112">(Aug 04 2025 at 02:20)</a>:</h4>
<p>I could really use some help getting tests for that running on CI in Windows etc. with our actual LLD <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="532632022"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532632022" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532632022">(Aug 04 2025 at 02:58)</a>:</h4>
<p>oh yeah, quick benchmarks on the file in that demo vs python: (release build of <code>roc</code>)</p>
<div class="codehilite"><pre><span></span><code>Benchmark 1: ./zig-out/bin/roc test_direct.roc
  Time (mean ± σ):      26.9 ms ±   6.9 ms    [User: 5.0 ms, System: 10.1 ms]
  Range (min … max):    24.2 ms …  59.2 ms    47 runs

Benchmark 2: python3 test_direct.py
  Time (mean ± σ):      21.3 ms ±   1.5 ms    [User: 14.6 ms, System: 4.3 ms]
  Range (min … max):    19.2 ms …  27.8 ms    95 runs
</code></pre></div>



<a name="532632051"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532632051" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532632051">(Aug 04 2025 at 02:59)</a>:</h4>
<p>I have some ideas on how we can get that to be faster than Python...we're almost there already! <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="532684804"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532684804" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532684804">(Aug 04 2025 at 09:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/channel/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/532628112">said</a>:</p>
<blockquote>
<p>I could really use some help getting tests for that running on CI in Windows etc. with our actual LLD <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
</blockquote>
<p>I can look at that in the coming weeks, do I just need to fix these?</p>
<div class="codehilite"><pre><span></span><code>if (builtin.os.tag == .windows) {
        return;
}
</code></pre></div>



<a name="532692614"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532692614" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532692614">(Aug 04 2025 at 10:00)</a>:</h4>
<p>I plan on looking at it also. I've been up to my eyeballs in this part of the codebase today. I think I've got two test platforms setup with CI, and linking using our LLD implementation.</p>



<a name="532692687"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532692687" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532692687">(Aug 04 2025 at 10:01)</a>:</h4>
<p>Just been going back and forth with CI trying to resolve some issues</p>



<a name="532702223"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532702223" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532702223">(Aug 04 2025 at 10:57)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> all but Windows now looks to be passing on my PR <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="532703330"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532703330" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532703330">(Aug 04 2025 at 11:04)</a>:</h4>
<p>I'm going to disable them. Tomorrow I can boot up my Windows machine and give it some love</p>



<a name="532705303"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532705303" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532705303">(Aug 04 2025 at 11:16)</a>:</h4>
<p>Ok, CI is passing now <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="532719312"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532719312" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532719312">(Aug 04 2025 at 12:39)</a>:</h4>
<p>I've merged my PR... if anyone wants to try it out I left a README explaining how to run the two test platforms/examples</p>
<p><a href="https://github.com/roc-lang/roc/tree/main/test/platform">https://github.com/roc-lang/roc/tree/main/test/platform</a></p>



<a name="532790572"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532790572" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532790572">(Aug 04 2025 at 20:14)</a>:</h4>
<p>I'm so excited for some of the direct integration we get with the zig version of the compiler</p>



<a name="532805648"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/532805648" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#532805648">(Aug 04 2025 at 22:21)</a>:</h4>
<p>I'm going to setup my Windows machine and finish the dev interpreter implementation.</p>



<a name="533508654"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533508654" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533508654">(Aug 08 2025 at 18:20)</a>:</h4>
<p>working on can/type checking for statements (statement annotations, inheriting <code>forall</code> type vars from parent annotation, etc)</p>



<a name="533538465"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533538465" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533538465">(Aug 08 2025 at 23:11)</a>:</h4>
<p>I'm working on the REPL and aim to wire it into the playground.</p>



<a name="533548900"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533548900" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533548900">(Aug 09 2025 at 02:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/533538465">said</a>:</p>
<blockquote>
<p>I'm working on the REPL and aim to wire it into the playground.</p>
</blockquote>
<p>that's funny. i was actually playing with the repl this morning and got some stuff working</p>



<a name="533548916"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533548916" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533548916">(Aug 09 2025 at 02:46)</a>:</h4>
<p>Not serious about it though, was just seeing how far i could get</p>



<a name="533548940"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533548940" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533548940">(Aug 09 2025 at 02:46)</a>:</h4>
<p>Definitely implemented the loop but I sure do get a lot of crashes from eval <span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span></p>



<a name="533559013"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533559013" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533559013">(Aug 09 2025 at 06:34)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/8175">https://github.com/roc-lang/roc/pull/8175</a><br>
I got the reassigment of defs thing working. I  don't think this is a long term design, maybe more of a hack. I just wanted something working to play with the interpreter. </p>
<p>My approach is keeping track of definitions in a hashmap, then when you evaluation something concatenate all the defs and the expression together into a block expression and evaluate that.</p>



<a name="533559072"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533559072" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533559072">(Aug 09 2025 at 06:36)</a>:</h4>
<p>I haven't been touching the roc cli or anything.</p>



<a name="533566095"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533566095" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533566095">(Aug 09 2025 at 09:07)</a>:</h4>
<p>(deleted)</p>



<a name="533569214"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533569214" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533569214">(Aug 09 2025 at 10:08)</a>:</h4>
<p>I think I've got the new REPL wired through everything... we have REPL snapshots that support redefinitions (the intermediate steps in the snapshot are linked), the e2e WASM test harness also includes a number of roundtrip tests for the REPL features in the playground (sending JSON messages etc).</p>
<p>Tomorrow I'll try and upgrade the Playground web app to include a switch to try the experimental REPL mode. </p>
<p>It'll be rough for a while probably as the actual interpreter itself is fairly primitive. But at least we know it definitely will work in WASM once we finish implementing it</p>



<a name="533571773"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533571773" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533571773">(Aug 09 2025 at 11:04)</a>:</h4>
<p>sweet</p>



<a name="533571833"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533571833" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533571833">(Aug 09 2025 at 11:05)</a>:</h4>
<p>I've been adding it to the CLI. Mainly to explore the capabilities of the interpreter such as they are</p>



<a name="533574955"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533574955" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533574955">(Aug 09 2025 at 12:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/channel/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/533559013">said</a>:</p>
<blockquote>
<p><a href="https://github.com/roc-lang/roc/pull/8175">https://github.com/roc-lang/roc/pull/8175</a><br>
I got the reassigment of defs thing working. I  don't think this is a long term design, maybe more of a hack. I just wanted something working to play with the interpreter. </p>
<p>My approach is keeping track of definitions in a hashmap, then when you evaluation something concatenate all the defs and the expression together into a block expression and evaluate that.</p>
</blockquote>
<p>Left a few comments</p>



<a name="533877985"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533877985" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533877985">(Aug 11 2025 at 22:31)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="781658">@Anthony Bullard</span>  -- I've had to take a major detour and refactor some things to sort out our modules. I'll come back to this once that work is completed.</p>



<a name="533962167"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533962167" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533962167">(Aug 12 2025 at 11:40)</a>:</h4>
<p>FYI all, we just merged a big PR that reorganised things. It was such a big job there are some test files with slabs of code commented out, but we have all of our e2e tests operational and happy. </p>
<p>If you have any questions or need help merging WIP changes please let me know. Mostly just shuffling things into a module structure without any cyclic dependencies, so hopefully shouldnt be really big conflicts.</p>



<a name="533985890"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/533985890" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#533985890">(Aug 12 2025 at 13:48)</a>:</h4>
<p><span aria-label="face with peeking eye" class="emoji emoji-1fae3" role="img" title="face with peeking eye">:face_with_peeking_eye:</span></p>



<a name="534342365"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/534342365" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#534342365">(Aug 14 2025 at 05:04)</a>:</h4>
<p>Calling any Web dev people -- I could really use some help with CSS on the Playground REPL <a href="https://github.com/roc-lang/roc-playground/pull/6">https://github.com/roc-lang/roc-playground/pull/6</a></p>
<p>I've got the basics wired up in this PR, but feel like a gorilla working with this CSS, just wondering if anyone is interested in helping? </p>
<p><a href="/user_uploads/22008/IuVmbCsiQxDSbPwIyojq1bki/playground-demo-4.gif">playground-demo-4.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/IuVmbCsiQxDSbPwIyojq1bki/playground-demo-4.gif" title="playground-demo-4.gif"><img data-animated="true" data-original-content-type="image/gif" data-original-dimensions="892x560" src="/user_uploads/thumbnail/22008/IuVmbCsiQxDSbPwIyojq1bki/playground-demo-4.gif/840x560-anim.webp"></a></div>



<a name="534624667"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/534624667" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#534624667">(Aug 15 2025 at 09:29)</a>:</h4>
<p>I can take a look later :)</p>



<a name="534690482"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/534690482" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#534690482">(Aug 15 2025 at 17:53)</a>:</h4>
<p>I'm still working on <a href="https://github.com/roc-lang/unicode/issues/28">https://github.com/roc-lang/unicode/issues/28</a> <br>
I'll try to check out the css tomorrow</p>



<a name="534777600"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/534777600" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#534777600">(Aug 16 2025 at 18:17)</a>:</h4>
<p>I tried a lot of different angles with <a href="https://github.com/roc-lang/unicode/issues/28">https://github.com/roc-lang/unicode/issues/28</a> but ended up with a nice and simple fix: <a href="https://github.com/roc-lang/roc/pull/8204">https://github.com/roc-lang/roc/pull/8204</a></p>



<a name="534777628"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/534777628" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#534777628">(Aug 16 2025 at 18:18)</a>:</h4>
<p>Turns out tokio uses a smaller stack size than the OS default for the threads it creates.</p>



<a name="534777668"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/534777668" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#534777668">(Aug 16 2025 at 18:19)</a>:</h4>
<p>Going to make the CSS a priority on Monday.</p>



<a name="535528801"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/535528801" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#535528801">(Aug 21 2025 at 15:27)</a>:</h4>
<p>I was wondering why <code>a = 1 == "a"</code> did typecheck, so I investigated. Here is a draft PR with the fix, but I have no idea if this is remotely correct: <a href="https://github.com/roc-lang/roc/issues/8213">#8213</a></p>



<a name="535539104"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/535539104" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#535539104">(Aug 21 2025 at 16:23)</a>:</h4>
<p>the short answer to why this typechecks is just that we don't have the real implementation yet, which will be <code>1 == "a"</code> desugars to <code>1.equals("a")</code> which will look up <code>equals</code> in the relevant number module, which in turn will expect another number of the same type rather than a <code>Str</code>, and will give a type mismatch</p>
<p>but we don't have the desugar-into-static-dispatch stuff in place yet in the new compiler <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="535554296"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/535554296" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#535554296">(Aug 21 2025 at 18:05)</a>:</h4>
<p>That makes sense, thank you.</p>



<a name="535876636"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/535876636" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#535876636">(Aug 24 2025 at 03:00)</a>:</h4>
<p>I'm looking at upgrading to zig 0.15.1, so far I've upgraded bytebox (used for the playground) and one of its dependencies <br>
<a href="https://github.com/rdunnington/bytebox/pull/85">https://github.com/rdunnington/bytebox/pull/85</a><br>
<a href="https://github.com/rdunnington/zig-stable-array/pull/14">https://github.com/rdunnington/zig-stable-array/pull/14</a></p>



<a name="535884527"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/535884527" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#535884527">(Aug 24 2025 at 06:26)</a>:</h4>
<p>Hey awesome <span class="user-mention" data-user-id="611722">@Isaac Van Doren</span></p>



<a name="535884809"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/535884809" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> EnDeRBeaT <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#535884809">(Aug 24 2025 at 06:34)</a>:</h4>
<p>hi, i would like to aid in making new cli roc repl work, can you guys give me some directions?</p>



<a name="536254775"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/536254775" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#536254775">(Aug 26 2025 at 14:48)</a>:</h4>
<p>Would it make sense to add the formatter to the playground wasm? Like a <code>QUERY_FORMATTED</code> command?</p>



<a name="536254916"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/536254916" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#536254916">(Aug 26 2025 at 14:48)</a>:</h4>
<p>Yeah, totally :)</p>



<a name="536319490"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/536319490" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#536319490">(Aug 26 2025 at 22:14)</a>:</h4>
<p>5 messages were moved from this topic to <a class="stream-topic" data-stream-id="316715" href="/#narrow/channel/316715-contributing/topic/playground.20-.20roc.20format/with/536319489">#contributing &gt; playground - roc format</a> by <span class="user-mention silent" data-user-id="515757">Luke Boswell</span>.</p>



<a name="537025935"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/537025935" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#537025935">(Sep 01 2025 at 02:59)</a>:</h4>
<p>Going to try out generating type variables in <code>Check</code> (in addition to <code>Can</code>, for now) like I mentioned yesterday. Gonna be in the same branch as my statement annotation work. Going to be some decent size changes to both can + check, so lmk if anyone else is planning on touching that significantly so we can coordinate!</p>



<a name="537026002"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/537026002" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#537026002">(Sep 01 2025 at 03:00)</a>:</h4>
<p>I think it's just you and Richard touching Can at the moment</p>



<a name="537866142"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/537866142" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#537866142">(Sep 05 2025 at 13:04)</a>:</h4>
<p>For viz: ^ This is turning into a pretty large rework of type checking. All good changes, feels like a simplification and it's been easier to reason about. Hoping to get a good chunk of work in this weekend and have something ready for review next week!</p>



<a name="539878595"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/539878595" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#539878595">(Sep 16 2025 at 19:22)</a>:</h4>
<p>I have a <a href="https://github.com/roc-lang/roc/pull/8238">draft PR</a> up for upgrading to Zig 0.15.1 with a good chunk of changes. My wife and I just bought a house so I have lots of painting/repairs/moving etc to do so I probably won't have much time to look at this for a while. If anyone is eager to get to Zig 0.15.1 and would like to take over the PR, feel free to! Otherwise I will come back to it once I have time.</p>



<a name="539940535"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/539940535" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#539940535">(Sep 17 2025 at 06:55)</a>:</h4>
<p>I can probably look at it this week, thanks for getting started on it  :)</p>



<a name="540097240"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/540097240" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#540097240">(Sep 17 2025 at 20:25)</a>:</h4>
<p>Of note, I am about to update roc-bootstrap (which really just gets us llvm and related libs) to zig 0.15.1 and the newest llvm version.</p>
<p>Since we don't really use llvm yet, it isn't really a big deal. Also, even once we do use llvm, it is pretty decoupled do to the fact that we will generate bitcode directly.</p>



<a name="540482612"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/540482612" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#540482612">(Sep 19 2025 at 15:28)</a>:</h4>
<p>Ready here: <a href="https://github.com/roc-lang/roc-bootstrap/releases/tag/zig-0.15.1">https://github.com/roc-lang/roc-bootstrap/releases/tag/zig-0.15.1</a> would be good to pull into <a href="https://github.com/roc-lang/roc/issues/8238">#8238</a> when that is getting updated for merge</p>



<a name="540841266"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/540841266" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#540841266">(Sep 22 2025 at 15:46)</a>:</h4>
<p>Does zig-afl-kit need to be updated as well <span class="user-mention" data-user-id="343810">@Brendan Hansknecht</span>?</p>



<a name="540842600"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/540842600" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#540842600">(Sep 22 2025 at 15:50)</a>:</h4>
<p>Oh, yeah, would need to add well</p>



<a name="542851756"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/542851756" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#542851756">(Oct 03 2025 at 00:42)</a>:</h4>
<p>i'm getting an error in CI only on macos 13: <a href="https://github.com/roc-lang/roc/actions/runs/18208999424/job/51845902296?pr=8239">https://github.com/roc-lang/roc/actions/runs/18208999424/job/51845902296?pr=8239</a></p>
<p>anyone have any ideas?</p>



<a name="542855050"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/542855050" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#542855050">(Oct 03 2025 at 01:34)</a>:</h4>
<p>^ rerunning fixed, seems like a flakey test</p>



<a name="542901210"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/542901210" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#542901210">(Oct 03 2025 at 09:09)</a>:</h4>
<p>I've seen it on windows 11 arm too, I will wrap it with automatic retry and make an issue.</p>



<a name="542949787"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/542949787" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#542949787">(Oct 03 2025 at 13:44)</a>:</h4>
<p>Heads up that <a href="https://github.com/roc-lang/roc/issues/8239">#8239</a> just landed, which added tons of new type checking features, including proper handling &amp; generalization of polymorphic types! You can look at <a href="https://github.com/roc-lang/roc/blob/main/src/check/test/type_checking_integration.zig">this test file</a> to see pretty much everything implemented so far! Not everything is there yet, but this is a big step forward – we're getting closer!</p>
<p>Also included in that is some tweaks to <code>build.zig</code> to run tests for individual zig module, so beyond <code>zig build test</code>, we now have <code>zig build test-can</code>, <code>zig build test-check</code>, <code>zig build test-eval</code> and so on.  These all should work with the <code>--test-filter</code> that Anton added recently too.</p>



<a name="542950437"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/542950437" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#542950437">(Oct 03 2025 at 13:47)</a>:</h4>
<p>some other things on my list to do are:</p>
<ul>
<li>Round out type checking for block statements (not 100% complete yet)</li>
<li>Remove all reference to types from <code>Can</code>, since <code>Check</code> handles the whole thing now</li>
<li>Add some addition tests related to above types</li>
<li>Possibly keep hacking type checking fuzzer </li>
</ul>
<p>if anyone is interested in helping with any of these things, lmk and i can share context!</p>



<a name="543626819"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/543626819" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#543626819">(Oct 07 2025 at 21:46)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/8273">#8273</a>: Add back full unit test suite for type unification &amp; type instantiation, and fixes some type number bugs</p>



<a name="543841892"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/543841892" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#543841892">(Oct 08 2025 at 22:08)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/issues/8275">#8275</a>: Small MR modifying some types in <code>types.zig</code> to prepare for static dispatch type checking implementation</p>



<a name="545795480"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/545795480" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#545795480">(Oct 19 2025 at 02:07)</a>:</h4>
<p>FYI, we now have compile-time evaluation of top-level constants! <a href="https://github.com/roc-lang/roc/pull/8300">https://github.com/roc-lang/roc/pull/8300</a></p>
<p>still todo in future PRs:</p>
<ul>
<li>updating CIR with the evaluated values (right now we just eval them and report crashes/dbgs/expects, but we don't yet do anything with the final eval'd value - that's next!)</li>
<li>partial evaluation within functions, so it's not just top-level things being evaluated, but also "effectively top-level" things (e.g. they don't depend on function arguments, even indirectly)</li>
<li>include stack traces in <code>crash</code> reports (interpreter doesn't know how to do these in general yet)</li>
</ul>



<a name="546322414"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546322414" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546322414">(Oct 21 2025 at 20:31)</a>:</h4>
<p>4 messages were moved from this topic to <a class="stream-topic" data-stream-id="395097" href="/#narrow/channel/395097-compiler-development/topic/compile-time.20evaluation/with/546322413">#compiler development &gt; compile-time evaluation</a> by <span class="user-mention silent" data-user-id="281383">Richard Feldman</span>.</p>



<a name="546357632"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546357632" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546357632">(Oct 22 2025 at 03:07)</a>:</h4>
<p>What do we need to remove the platform hardcoding?</p>
<p><a href="https://github.com/roc-lang/roc/blob/a16d26b5c0d59429f9dd266cf2adb802a5e0d52c/src/cli/main.zig#L2142-L2169">https://github.com/roc-lang/roc/blob/a16d26b5c0d59429f9dd266cf2adb802a5e0d52c/src/cli/main.zig#L2142-L2169</a></p>
<p>I want to make a basic integer only platform for testing, but currently we only allow the test int platform and nothing else. This is based on that so should work as well.</p>



<a name="546357665"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546357665" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546357665">(Oct 22 2025 at 03:07)</a>:</h4>
<p>Can I just remove this check? Do we first need header info to get the correct platform dir? Other?</p>



<a name="546357755"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546357755" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546357755">(Oct 22 2025 at 03:08)</a>:</h4>
<p>yeah I think that's obsolete but <span class="user-mention" data-user-id="515757">@Luke Boswell</span> would probably know better!</p>



<a name="546357919"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546357919" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546357919">(Oct 22 2025 at 03:11)</a>:</h4>
<p>I guess as I scan this all the entrypoints are hard coded. So probably just need to read the actual app, use that to read the platform main and use that for all the pieces here.</p>



<a name="546358694"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546358694" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546358694">(Oct 22 2025 at 03:25)</a>:</h4>
<p>And it looks like we already do this for <code>rocRun</code>. So I guess just need to port that over. Cool.</p>



<a name="546358786"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546358786" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546358786">(Oct 22 2025 at 03:26)</a>:</h4>
<p>For cross-compilation we compile the int test app using zig bitcode to simulate the roc compiler</p>



<a name="546358880"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546358880" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546358880">(Oct 22 2025 at 03:27)</a>:</h4>
<p>Ah. Thus only roc run for general platforms right now</p>



<a name="546358918"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546358918" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546358918">(Oct 22 2025 at 03:28)</a>:</h4>
<p>But we theoretically could roc build, but that requires compiling the interpreter into the final app.</p>



<a name="546358921"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546358921" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546358921">(Oct 22 2025 at 03:28)</a>:</h4>
<p>So more complexity</p>



<a name="546360540"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546360540" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546360540">(Oct 22 2025 at 03:55)</a>:</h4>
<p>Yeah we can build the ModuleEnv's and embed them as a blob into another interpreter shim and link that .. so we could have <code>roc build</code> using the interpreter now. I looked at it briefly, but haven't tried properly. You could probably do that much better than I; I think it's fully unblocked.</p>



<a name="546364746"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546364746" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546364746">(Oct 22 2025 at 04:44)</a>:</h4>
<p>I might look into eventually. First messing around with <code>rocRun</code> for my random chip platform thing.</p>



<a name="546364779"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546364779" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546364779">(Oct 22 2025 at 04:45)</a>:</h4>
<p>What to get that working. First platform running outside of the roc repo for the new compiler. Though it still is basically just the int test platform</p>



<a name="546364859"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546364859" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546364859">(Oct 22 2025 at 04:46)</a>:</h4>
<p>I've waiting for the multi-module/builtin/interpreter/type checking work to settle a little and mature. This maybe has the potential to conflict a little with that and Jared and Richard are making awesome progress -- my desire for building standalone executables can wait a few more weeks <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="546364942"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546364942" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546364942">(Oct 22 2025 at 04:48)</a>:</h4>
<p>I assume I'll eventually hit things not yet function in the interpreter and then have to add features. That said, right now, hitting:</p>
<div class="codehilite"><pre><span></span><code>debug: Spawning child process: /Users/bren077s/Library/Caches/roc/94915fa5e90b0dafb36fcd8becc1e3b8/temp/roc-tmp-SbmW7bKkQbKfY4QVPWMlg9d1yNK5poKG/roc_run_1408828109
debug: Child process working directory: /Users/bren077s/Projects/chip8
debug: Child process spawned successfully (PID: 91570)
Starting Host
Launching Roc
thread 3451892 panic: reached unreachable code
Unable to dump stack trace: debug info stripped
error: Child process /Users/bren077s/Library/Caches/roc/94915fa5e90b0dafb36fcd8becc1e3b8/temp/roc-tmp-SbmW7bKkQbKfY4QVPWMlg9d1yNK5poKG/roc_run_1408828109 killed by signal: 6
error: Child process aborted (SIGABRT)
error: Failed to run with POSIX fd inheritance: error.ProcessKilledBySignal
</code></pre></div>
<p>Which is not particularly useful for debugging...</p>



<a name="546367046"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546367046" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546367046">(Oct 22 2025 at 05:15)</a>:</h4>
<p>A bit closer:</p>
<div class="codehilite"><pre><span></span><code>thread 3473998 panic: reached unreachable code
???:?:?: 0x10009379b in ??? (roc_run_1408828109)
???:?:?: 0x10008f907 in ??? (roc_run_1408828109)
???:?:?: 0x1000f853f in ??? (roc_run_1408828109)
???:?:?: 0x1000c0303 in ??? (roc_run_1408828109)
???:?:?: 0x1000aff4b in ??? (roc_run_1408828109)
???:?:?: 0x10008fc5b in ??? (roc_run_1408828109)
???:?:?: 0x10008e983 in ??? (roc_run_1408828109)
???:?:?: 0x10008e45b in ??? (roc_run_1408828109)
???:?:?: 0x100000abb in ??? (roc_run_1408828109)
???:?:?: 0x100001657 in ??? (roc_run_1408828109)
???:?:?: 0x1924a9d53 in ??? (???)
???:?:?: 0x0 in ??? (???)
</code></pre></div>
<p>There was an attempt at a stack trace</p>



<a name="546369862"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546369862" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546369862">(Oct 22 2025 at 05:53)</a>:</h4>
<p>I wonder what's panicking... I had a similar issue when the parent wasn't serialising the ModuleEnv correctly I think</p>



<a name="546369944"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546369944" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546369944">(Oct 22 2025 at 05:54)</a>:</h4>
<p>Do we really have anyway of knowing the module env bytes that we very unsafe just rehydrate the pointers from is correct?</p>



<a name="546370018"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546370018" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546370018">(Oct 22 2025 at 05:55)</a>:</h4>
<p>Yeah. Seems like we may need to figure out a better way to validate rehydration. Based on some debug prints, this is panicking in the interpreter somewhere, but not sure why</p>



<a name="546370129"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546370129" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546370129">(Oct 22 2025 at 05:57)</a>:</h4>
<p>I guess in this case, it may not be rehydration then.</p>



<a name="546370158"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546370158" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546370158">(Oct 22 2025 at 05:57)</a>:</h4>
<p>Just something not supported by the interpreter and a pain debugging due to no good backtrace for some reason.</p>



<a name="546372423"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546372423" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546372423">(Oct 22 2025 at 06:18)</a>:</h4>
<p>Claude after much debug printing to find the error location:</p>
<blockquote>
<p>The debug trace shows:</p>
<p>- The crash occurs when evaluating a closure that needs to resolve a capture from<br>
  top-level defs</p>
<p>- It calls getDef(def_idx = @enumFromInt(1)) and crashes before returning<br>
  - Most likely culprit: corrupted data in shared memory or an unreachable in data<br>
  decoding</p>
</blockquote>



<a name="546693608"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546693608" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546693608">(Oct 23 2025 at 14:19)</a>:</h4>
<p>In zig 0.15 the std.array_list.Managed is deprecated. I think many uses can be replaced with the new unmanaged std.ArrayList using a bit of regex or script. I will try what is possible without spending to much time on it.</p>



<a name="546799911"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/546799911" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#546799911">(Oct 24 2025 at 02:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/channel/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/546367046">said</a>:</p>
<blockquote>
<p><div class="codehilite"><pre><span></span><code>thread 3473998 panic: reached unreachable code
???:?:?: 0x10009379b in ??? (roc_run_1408828109)
???:?:?: 0x10008f907 in ??? (roc_run_1408828109)
???:?:?: 0x1000f853f in ??? (roc_run_1408828109)
???:?:?: 0x1000c0303 in ??? (roc_run_1408828109)
???:?:?: 0x1000aff4b in ??? (roc_run_1408828109)
???:?:?: 0x10008fc5b in ??? (roc_run_1408828109)
???:?:?: 0x10008e983 in ??? (roc_run_1408828109)
???:?:?: 0x10008e45b in ??? (roc_run_1408828109)
???:?:?: 0x100000abb in ??? (roc_run_1408828109)
???:?:?: 0x100001657 in ??? (roc_run_1408828109)
???:?:?: 0x1924a9d53 in ??? (???)
???:?:?: 0x0 in ??? (???)
</code></pre></div><br>
</p>
</blockquote>
<p>I'm gonna try to figure out getting an actual stack trace here. I feel like for future debugging it will be useful. Then we won't need a mile of defensive logging to root cause things like this.</p>



<a name="547144712"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547144712" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547144712">(Oct 26 2025 at 16:57)</a>:</h4>
<p>Sadly, I have not had luck here so far.</p>



<a name="547152080"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547152080" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547152080">(Oct 26 2025 at 18:52)</a>:</h4>
<p>4 messages were moved from this topic to <a class="stream-topic" data-stream-id="395097" href="/#narrow/channel/395097-compiler-development/topic/roc.20build/with/547152079">#compiler development &gt; roc build</a> by <span class="user-mention silent" data-user-id="281383">Richard Feldman</span>.</p>



<a name="547203281"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547203281" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547203281">(Oct 27 2025 at 07:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/channel/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29/near/547144712">said</a>:</p>
<blockquote>
<p>Sadly, I have not had luck here so far.</p>
</blockquote>
<p>Thanks for trying anyway <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="547527051"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547527051" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547527051">(Oct 28 2025 at 15:38)</a>:</h4>
<p>Working on some let-polymorphism bugs I discovered</p>



<a name="547527092"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547527092" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jared Ramirez <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547527092">(Oct 28 2025 at 15:38)</a>:</h4>
<p>Just for viz in case anyone is touching type checker</p>



<a name="547535359"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547535359" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547535359">(Oct 28 2025 at 16:08)</a>:</h4>
<p>Look like my PR <a href="https://github.com/roc-lang/roc/issues/8342">#8342</a> revealed a problem with basically every roc check. They all have <code>FileNotFound</code>. I did some debugging and it looks like it is looking for a Str.roc file.</p>



<a name="547535544"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547535544" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547535544">(Oct 28 2025 at 16:09)</a>:</h4>
<div class="codehilite"><pre><span></span><code>        const src = std.fs.cwd().readFileAlloc(self.gpa, st.path, std.math.maxInt(usize)) catch |read_err| {
            // Note: Let the FileNotFound error propagate naturally
            // The existing error handling will report it appropriately
            return read_err;
        };
</code></pre></div>
<p>And I don't think that comment is correct (in compile_package.zig)</p>



<a name="547535991"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547535991" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547535991">(Oct 28 2025 at 16:11)</a>:</h4>
<p><span class="user-mention" data-user-id="281383">@Richard Feldman</span> recently added  the Str.roc builtin</p>



<a name="547542917"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547542917" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547542917">(Oct 28 2025 at 16:39)</a>:</h4>
<p>I have a PR that will get rid of Str.roc (consolidating all the builtins into Builtin.roc) but I'm dealing with a sick kid, so will take a bit to land <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="547543392"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547543392" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547543392">(Oct 28 2025 at 16:41)</a>:</h4>
<p>Then it's probably better to wait to merge my PR.</p>



<a name="547543572"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547543572" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547543572">(Oct 28 2025 at 16:42)</a>:</h4>
<blockquote>
<p>but I'm dealing with a sick kid</p>
</blockquote>
<p>Wish him well from the Roc community :)</p>



<a name="547557185"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547557185" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547557185">(Oct 28 2025 at 17:52)</a>:</h4>
<p>nah it's fine, go ahead and merge it <span class="user-mention" data-user-id="559412">@Fabian Schmalzried</span>  - I'll work around it!</p>



<a name="547557383"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Worklog%20%28Draft%20PRs%20and%20coordination%29/near/547557383" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schmalzried <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Worklog.20.28Draft.20PRs.20and.20coordination.29.html#547557383">(Oct 28 2025 at 17:53)</a>:</h4>
<p>Well CI fails with the PR.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>