<html>
<head><meta charset="utf-8"><title>arch nightly package · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/arch.20nightly.20package.html">arch nightly package</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="488034551"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/arch%20nightly%20package/near/488034551" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/arch.20nightly.20package.html#488034551">(Dec 11 2024 at 07:46)</a>:</h4>
<p>So from watching the roc aoc stream from <span class="user-mention" data-user-id="772522">@Scally</span>  recently, arch package versioning come up as a bit of a problem when it came to updating <a href="https://aur.archlinux.org/packages/roc-nightly-bin">the aur package for nightlies</a>. They said that the aur package often requires removal and reinstall to actually update roc.</p>
<p>I think since roc reports a version now, we should be able to do something better. If I understand aur packaging correctly, I think we should be able to:</p>
<ol>
<li>use <a href="https://wiki.archlinux.org/title/Creating_packages#prepare()">prepare</a> to download the lasest nightly</li>
<li>use <a href="https://wiki.archlinux.org/title/Creating_packages#pkgver()">pkgver</a> run <code>roc version</code> to get a version for arch to compare to.</li>
<li>use package just to copy over the source.</li>
</ol>
<p>I think that should make it correctly check for new updates. That said, I don't really know aur packaging that well and have not run arch in a while (so couldn't test rn). But sounds like there might be some room for improved experience here.</p>
<p>All this said, it looks like it currently uses the date for the package version, so feels like it should update without needing reinstall.... hmm... Maybe something has to be fired off by the roc nightly job to tell it to update. The current package version claims to be <code>20240215-6</code>, which is quite old. Either way, would be great to update with the changes listed above to give it proper versioning.</p>
<p>CC aur package maintainer <span class="user-mention" data-user-id="674610">@Alexander Pyattaev</span></p>



<a name="488048296"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/arch%20nightly%20package/near/488048296" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scally <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/arch.20nightly.20package.html#488048296">(Dec 11 2024 at 09:06)</a>:</h4>
<p>Maybe as a relevant note, when having no version installed and installing the AUR package it does download and install the latest version from git, the issue is just that when there is already a version installs it doesn't update saying the current version was already up to date / newer than the <code>20240215</code> version.<br>
Probably all that would be needed is something bumping the package version on AUR whenever a new nightly build is available.</p>
<p>While I don't have any experience with packaging myself, I'd gladly help with testing, feel free to ping me for that.</p>



<a name="491104223"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/arch%20nightly%20package/near/491104223" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Pyattaev <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/arch.20nightly.20package.html#491104223">(Dec 28 2024 at 16:36)</a>:</h4>
<p>Yeah packaging roc is not fun because the aur system is set up with the<br>
expectation that a package would have a version. Nightlies are not really<br>
well-supported by AUR build scripts.The best thing to do would be to make<br>
"nightly releases" with date as version number, and have ~7 of them just<br>
hanging out on github or something like that. Then one would indeed need to<br>
auto-bump the AUR package every day. I can give the access to the AUR<br>
package repo if someone wants to give it a try.</p>



<a name="491104742"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/arch%20nightly%20package/near/491104742" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/arch.20nightly.20package.html#491104742">(Dec 28 2024 at 16:45)</a>:</h4>
<p>We plan to make weekly roc releases in the near future, we should come back to this after that's done</p>



<a name="491110747"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/arch%20nightly%20package/near/491110747" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Pyattaev <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/arch.20nightly.20package.html#491110747">(Dec 28 2024 at 18:27)</a>:</h4>
<p>Yes, that would massively simplify packaging. I can also make a package for gentoo easily enough.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>