<html>
<head><meta charset="utf-8"><title>repl displays wrong type info · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html">repl displays wrong type info</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="279031353"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279031353" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279031353">(Apr 14 2022 at 22:56)</a>:</h4>
<p><span class="user-mention" data-user-id="454654">@Ayaz Hafiz</span> question about the issue 2846 (<a href="https://github.com/rtfeldman/roc/issues/2846">https://github.com/rtfeldman/roc/issues/2846</a>)</p>
<p>When the repl evals <code>3.1 + 2.0</code> what should the Symbol be for the result? Atm it says it’s <code>Num.Num</code>. But the expression <code>3.1</code> is <code>Num.Float</code>. Is this related to the issue?</p>



<a name="279034725"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279034725" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279034725">(Apr 14 2022 at 23:38)</a>:</h4>
<p>Really? I see F64 when I use it.</p>



<a name="279035248"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279035248" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279035248">(Apr 14 2022 at 23:47)</a>:</h4>
<p>I see F64 as well (web and local repl)</p>



<a name="279036722"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279036722" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279036722">(Apr 15 2022 at 00:11)</a>:</h4>
<p>Sorry I don’t mean the string output in the repl. You’re both correct that it shows F64.</p>



<a name="279036739"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279036739" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279036739">(Apr 15 2022 at 00:12)</a>:</h4>
<p>I mean the symbol value in the Alias data type</p>



<a name="279036789"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279036789" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279036789">(Apr 15 2022 at 00:12)</a>:</h4>
<p>I’ll post a link to the exact spot, one second</p>



<a name="279036844"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279036844" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279036844">(Apr 15 2022 at 00:13)</a>:</h4>
<p>This line here: <a href="https://github.com/rtfeldman/roc/blob/d23d5f249fb2fb1d6a3c5cc96b4fae9e1131eb9c/compiler/types/src/pretty_print.rs#L371">https://github.com/rtfeldman/roc/blob/d23d5f249fb2fb1d6a3c5cc96b4fae9e1131eb9c/compiler/types/src/pretty_print.rs#L371</a></p>



<a name="279036967"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279036967" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279036967">(Apr 15 2022 at 00:16)</a>:</h4>
<p>If I use a <code>println!("symbol: {:?}", *symbol);</code></p>



<a name="279037036"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279037036" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279037036">(Apr 15 2022 at 00:16)</a>:</h4>
<p>Inside that block of code I linked, I can see that the expressions have the symbols I mentioned earlier</p>



<a name="279037142"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279037142" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279037142">(Apr 15 2022 at 00:19)</a>:</h4>
<p>Let me know if that makes sense please, I was poking around and thought maybe something with the repl expressions could be evaluating incorrectly. Thoughts?</p>



<a name="279037178"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279037178" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279037178">(Apr 15 2022 at 00:19)</a>:</h4>
<p>I’m on London time, so I’ll be heading to bed now, but I’ll be back online soon. Thanks for your time</p>



<a name="279038156"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279038156" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279038156">(Apr 15 2022 at 00:36)</a>:</h4>
<p>Oh yes. That is expected.</p>



<a name="279038427"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279038427" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279038427">(Apr 15 2022 at 00:41)</a>:</h4>
<p>An F64 has Alias type should be “Num (FloatingPoint Binary64)”, F32 is “Num (FloatingPoint Binary32)”</p>



<a name="279038481"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279038481" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279038481">(Apr 15 2022 at 00:42)</a>:</h4>
<p>This is not actually strictly true all the time, but should be enough for this issue.</p>



<a name="279038482"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279038482" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279038482">(Apr 15 2022 at 00:42)</a>:</h4>
<p>Thanks for looking into this!</p>



<a name="279056898"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279056898" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279056898">(Apr 15 2022 at 07:32)</a>:</h4>
<p>Can you explain a little more about the difference between these two expressions:<br>
<code>3.1</code><br>
<code>3.1 + 2.1</code></p>
<p>I feel like I may be misunderstanding the theory here. Like what’s the difference between something being Num_Float vs Num_FloatingPoint? Is one considered to be  a Double or something?</p>



<a name="279075015"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279075015" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279075015">(Apr 15 2022 at 12:15)</a>:</h4>
<p>Okay I think I've been able to learn some stuff by reading through the docs here:<br>
<a href="https://github.com/rtfeldman/roc/blob/trunk/compiler/builtins/docs/Num.roc">https://github.com/rtfeldman/roc/blob/trunk/compiler/builtins/docs/Num.roc</a></p>
<p>What I learned:</p>
<ul>
<li><code>Float a</code> is an alias for <code>Num FloatingPoint a</code>.</li>
</ul>
<p>What I found:</p>
<ul>
<li>Some prior work on renaming repl output from <code>Float</code> to <code>F64</code> and then to <code>Float *</code><ul>
<li><a href="https://github.com/rtfeldman/roc/pull/736">https://github.com/rtfeldman/roc/pull/736</a> (rename Float to F64)</li>
<li><a href="https://github.com/rtfeldman/roc/pull/848">https://github.com/rtfeldman/roc/pull/848</a> (rename F64 to Float *)</li>
</ul>
</li>
</ul>
<p>Seems like the pretty printer was mostly updated around then, but there was a code path that was not updated. Specifically the <code>Num FloatingPoint a</code> was still being mapped to <code>F64</code>, while <code>Float a</code> is being mapped to <code>Float *</code>. Now that I understand that one is an alias for the other, I think we just need to update the other code path.</p>
<p>I have branch on the way, just need to setup my commit signing stuff first.</p>



<a name="279076292"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279076292" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279076292">(Apr 15 2022 at 12:38)</a>:</h4>
<p>That sounds right! Thanks Sean.</p>



<a name="279077136"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279077136" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279077136">(Apr 15 2022 at 12:52)</a>:</h4>
<p>Okay just pushed a pull request here: <a href="https://github.com/rtfeldman/roc/pull/2867">https://github.com/rtfeldman/roc/pull/2867</a><br>
Thank you!</p>



<a name="279077185"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279077185" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279077185">(Apr 15 2022 at 12:52)</a>:</h4>
<p>thank you!!</p>



<a name="279094780"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/repl%20displays%20wrong%20type%20info/near/279094780" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Hagstrom <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/repl.20displays.20wrong.20type.20info.html#279094780">(Apr 15 2022 at 16:09)</a>:</h4>
<p>Okay the pull request finally passed all the checks <span aria-label="raised hands" class="emoji emoji-1f64c" role="img" title="raised hands">:raised_hands:</span></p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>