<html>
<head><meta charset="utf-8"><title>Underscores in variable names · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html">Underscores in variable names</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="360107597"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360107597" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ajai Nelson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360107597">(May 21 2023 at 18:55)</a>:</h4>
<p>I was starting to try to improve some error messages involving ignored arguments and underscores in variable names (including <a href="https://github.com/roc-lang/roc/issues/3987">#3987</a>). But then I found <a href="https://github.com/roc-lang/roc/issues/3026">#3026</a>: "Allow underscores in field names and variable names." Is it still the plan to start allowing underscores?</p>



<a name="360130923"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360130923" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360130923">(May 21 2023 at 23:10)</a>:</h4>
<p>yep!</p>



<a name="360138343"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360138343" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ajai Nelson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360138343">(May 22 2023 at 01:01)</a>:</h4>
<p>If underscores are allowed in regular variable names, how will we handle unused variables?</p>
<p>Is this the idea?</p>
<ul>
<li>
<p>As before, all unused variables should start with an underscore.<br>
  So <code>f = \x -&gt; 3</code> still produces a warning, and you can still suppress it by adding an underscore: <code>f = \_x -&gt; 3</code>.</p>
</li>
<li>
<p>But not all variables starting with an underscore have to be unused.<br>
  So <code>f = \_x -&gt; _x</code> is allowed and doesn't produce a warning.</p>
</li>
</ul>



<a name="360138776"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360138776" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360138776">(May 22 2023 at 01:07)</a>:</h4>
<p>maybe leading underscores are unused variables? though your suggestion also makes sense to me</p>



<a name="360140773"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360140773" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360140773">(May 22 2023 at 01:34)</a>:</h4>
<p>yeah I like your suggestion</p>



<a name="360140792"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360140792" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360140792">(May 22 2023 at 01:34)</a>:</h4>
<p>part of the motivation here is just knowing that people will commonly serialize things that have underscores in them, and not wanting to create unnecessary friction there</p>



<a name="360140809"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360140809" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360140809">(May 22 2023 at 01:35)</a>:</h4>
<p>and it's also plausible that people will serialize things with underscores at the start</p>



<a name="360140830"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360140830" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360140830">(May 22 2023 at 01:35)</a>:</h4>
<p>I believe what you suggested is Rust's policy, and it seems to have worked out fine in practice</p>



<a name="360141415"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360141415" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360141415">(May 22 2023 at 01:42)</a>:</h4>
<p>Wouldn't it make more sense to find a way to map names when encoding/decoding? Isn't it just as plausible that a json field name will start with a capital letter, which roc wouldn't allow?</p>



<a name="360224862"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360224862" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360224862">(May 22 2023 at 10:28)</a>:</h4>
<p>What some languages do is to give you a similar warning when you end up using a variable that starts with an underscore as you get when you do not use a variable that doesn't start with an underscore. (A 'should not have been used' warning).</p>



<a name="360227329"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360227329" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Qqwy / Marten <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360227329">(May 22 2023 at 10:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="343810">Brendan Hansknecht</span> <a href="#narrow/stream/316715-contributing/topic/Underscores.20in.20variable.20names/near/360141415">said</a>:</p>
<blockquote>
<p>Wouldn't it make more sense to find a way to map names when encoding/decoding? Isn't it just as plausible that a json field name will start with a capital letter, which roc wouldn't allow?</p>
</blockquote>
<p>Languages that use <code>UpperCamelCase</code> for field names are rarer than languages that use <code>snake_case</code> or <code>dromedarisCase</code>. (To my knowledge only C# and C#-adjacent languages follow this convention). There should be a way to map between them, but the question is what to support as part of the language itself and what to delegate to a separate library.</p>



<a name="360233469"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360233469" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360233469">(May 22 2023 at 11:06)</a>:</h4>
<blockquote>
<p>Wouldn't it make more sense to find a way to map names when encoding/decoding? Isn't it just as plausible that a json field name will start with a capital letter, which roc wouldn't allow?</p>
</blockquote>
<p>oh yeah, that reminds me that <span class="user-mention" data-user-id="515757">@Luke Boswell</span>'s JSON implementation already supports converting to camelCase (possibly already from snake_case?)</p>



<a name="360233535"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360233535" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360233535">(May 22 2023 at 11:06)</a>:</h4>
<p><span class="user-mention" data-user-id="511136">@Ajai Nelson</span> let's actually hold off on <a href="https://github.com/roc-lang/roc/issues/3026">https://github.com/roc-lang/roc/issues/3026</a> for now</p>



<a name="360233629"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360233629" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360233629">(May 22 2023 at 11:07)</a>:</h4>
<p>but definitely still want <a href="https://github.com/roc-lang/roc/issues/3987">https://github.com/roc-lang/roc/issues/3987</a> !</p>



<a name="360268257"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360268257" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360268257">(May 22 2023 at 13:24)</a>:</h4>
<p>Is the name conversion done via a dict, or is it first class like when the name actually matches the record field?</p>



<a name="360276224"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360276224" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360276224">(May 22 2023 at 13:48)</a>:</h4>
<p>Oh, just looked at the source, no intermediate dictionary needed. It looks like we load the full name, convert it as specified (all names must use the same conversion, but you can write your own custom function), and then converts the full string name into a record field update (not exactly sure how, I assume we generate thst function automatically and it is just a <code>when</code> on the sting name that converts to the field updater).</p>



<a name="360279369"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360279369" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360279369">(May 22 2023 at 13:57)</a>:</h4>
<p>So definitely a step forward, but still missing some pieces. At least from my quick reading:</p>
<ul>
<li>can't change field name type on a fine granularity </li>
<li>will always parse the full field name (so easy to DDoS with a large field name with many words that would take a lot of work to convert between cases). Also, just means we don't generate a more optimal parser that skips things sooner.</li>
<li>the record update lookup has to use the roc field name. Preferably, we would change the lookup to use the field name with the new case instead of updating the field name of inputs from json. Would fix the DDoS mentioned above.</li>
</ul>
<p>I think we likely have to look into a way to parametrize this more directly such that the names directly affect decodeRecord no matter the decoder. Also, would be great to expose the names in a way that more optimized lookup could be generated. I get that we don't want macros, so we can't just generate something super optimal at compile time due to knowing all the details, but I think there is still definitely a gap here that will be very measurable.</p>



<a name="360347156"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360347156" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360347156">(May 22 2023 at 18:24)</a>:</h4>
<p>this is really tricky with structural types though</p>



<a name="360347252"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360347252" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360347252">(May 22 2023 at 18:25)</a>:</h4>
<p>like if you have a nominal record type like Rust does, there's a clear place to put per-field information on how you want it to be serialized</p>



<a name="360348034"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360348034" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360348034">(May 22 2023 at 18:29)</a>:</h4>
<p>I do think a possible answer here (which is seeming more and more likely to be the way to go the more we talk about this) is:</p>
<ul>
<li>if you want maximum performance, don't use <code>Encode</code> and <code>Decode</code> at all; rather, do something like protobuf which explicitly uses its own schema and generates code to serialize individual types directly, while also accounting for backwards compatibility</li>
<li>if you want more convenience at the expense of performance, use <code>Encode</code> and <code>Decode</code>, possibly in conjunction with a converter that changes camelCase into snake_case</li>
<li>if you want something in between (e.g. because you're dealing with a weird JSON schema that you don't control, which - for example - mixes camelCase and snake_case in field names), there are various levers you can pull to do this, such as making part of the type you're decoding into opaque, and giving it a custom <code>Decode</code> implementation, etc.</li>
</ul>



<a name="360348286"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360348286" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360348286">(May 22 2023 at 18:30)</a>:</h4>
<p>Specifically for field names: Isn't it just mostly a matter of allowing a custom definition of the <code>Str</code> mapping in <code>stepField</code>? Instead of  matching<code>"fieldName" -&gt; decode...</code> I want <code>"field-name" -&gt; decode...</code>.</p>



<a name="360348491"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360348491" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360348491">(May 22 2023 at 18:31)</a>:</h4>
<p>oh you mean when writing a <code>Decode</code> implementation by hand?</p>



<a name="360348547"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360348547" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360348547">(May 22 2023 at 18:32)</a>:</h4>
<p>I'm really just thinking of the automatic one that comes with every record</p>



<a name="360349232"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360349232" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360349232">(May 22 2023 at 18:35)</a>:</h4>
<p>I am thinking about in <code>Json.roc</code> when specificying you want <code>kebab-case</code> for example. To avoid the very easy DDoS attack of sending a json with a really long kebab case name. Then json decoding will waste a lot of CPU converting it to <code>camelCase</code>.</p>



<a name="360349554"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360349554" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360349554">(May 22 2023 at 18:37)</a>:</h4>
<p>Would rather convert <code>nameIControl</code> (this is the field name in the Roc record) to <code>name-i-control</code> and then use that for comparison than convert <code>some-name-i-dont-control-that-is-very-long-a-a-a-a-a-a-a-a-a-a-a-a-a-a-a-a-a-a-a-a-a-a-a-a-a-...</code> to <code>SomeNameIDontControlThatIsVeryLongAAAAAAAAAAAAAAAAAAAAAAAAA...</code> and use that for comparison.</p>



<a name="360352217"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360352217" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360352217">(May 22 2023 at 18:52)</a>:</h4>
<p>oh I see</p>



<a name="360352380"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360352380" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360352380">(May 22 2023 at 18:52)</a>:</h4>
<p>so basically a way to tell <code>decode</code> "hey right before you're about to compare my field names, first run this conversion on them"</p>



<a name="360352398"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360352398" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360352398">(May 22 2023 at 18:52)</a>:</h4>
<p>something like that?</p>



<a name="360365742"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360365742" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360365742">(May 22 2023 at 20:09)</a>:</h4>
<p>I might have a look at changing that, good idea Brendan.</p>



<a name="360375856"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360375856" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ajai Nelson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360375856">(May 22 2023 at 21:10)</a>:</h4>
<p>In R, if you put backticks around a variable name, you can include any character you want as part of the variable name, including dashes and spaces. So <code> `myVar` </code> is the same thing as just <code> myVar </code>, but you can also have a variable called <code> `my var` </code> or <code> `my-var` </code>. This is actually very useful in the context of R, since, for example, it's common to read CSV files where the column names have spaces in them. </p>
<p>I doubt it's the right solution for Roc, but maybe it’s something to keep in mind if people really want something more flexible than the current solution.</p>



<a name="360379849"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Underscores%20in%20variable%20names/near/360379849" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Underscores.20in.20variable.20names.html#360379849">(May 22 2023 at 21:32)</a>:</h4>
<p>Yeah, exactly, give decode a mapping for field names rather than trying to map all json strings to rocs naming format.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>