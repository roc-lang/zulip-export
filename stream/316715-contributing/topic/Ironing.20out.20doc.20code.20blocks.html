<html>
<head><meta charset="utf-8"><title>Ironing out doc code blocks · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html">Ironing out doc code blocks</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="490992355"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/490992355" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#490992355">(Dec 27 2024 at 13:30)</a>:</h4>
<p>We don't currently have an issue on GitHub owning doc comment code blocks, e.g.</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="err">##</span><span class="w"> </span><span class="kt">Repeat</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="nv">times</span><span class="nf">.</span>
<span class="err">##</span>
<span class="err">##</span><span class="w"> </span><span class="nf">```</span>
<span class="err">##</span><span class="w"> </span><span class="nv">echoed_words</span><span class="w"> </span><span class="nf">=</span>
<span class="err">##</span><span class="w">     </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">repeat</span><span class="p">(</span><span class="s">"hello"</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="err">##</span>
<span class="err">##</span><span class="w"> </span><span class="nv">expect</span><span class="w"> </span><span class="nv">echoed_words</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="s">"hellohellohello"</span>
<span class="err">##</span><span class="w"> </span><span class="nf">```</span>
</code></pre></div>
<p>There are a few things we should iron out before we make this available for implementing by contributors.</p>
<p>First, we want to be able to validate that they compile at all. I think we should parse the contents of doc comments as top-level code that can't be exposed or used by the rest of the module, and report warnings/errors just like the rest of the module. The only difference is that docs sometimes have top-level expressions, which aren't currently syntactically legal outside of docs. Should we allow this just in docs, or should we force users to put those values in defs? I vote the latter because it probably only increases readability.</p>
<p>We also want to make sure that doc code blocks with top-level <code>expect</code>s have those tests run. I think these tests should always be run with <code>roc test</code>. We could optionally have a <code>--ignore-docs</code> flag for <code>roc test</code> if we want to allow only running non-doc tests, but I think we <em>shouldn't</em> do this unless there is a lot of demand.</p>
<p>Rust has the ability to <a href="https://doc.rust-lang.org/rustdoc/write-documentation/documentation-tests.html#hiding-portions-of-the-example">hide lines of docs</a> by putting a second set of doc comment prefixes, e.g.</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="err">##</span><span class="w"> </span><span class="nf">```</span>
<span class="err">##</span><span class="w"> </span><span class="err">##</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="kt">Hidden</span>
<span class="err">##</span><span class="w"> </span><span class="kt">Hidden</span><span class="nf">.</span><span class="nv">run_func</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="s">"abc"</span><span class="p">)</span>
<span class="err">##</span><span class="w"> </span><span class="nf">```</span>
</code></pre></div>
<p>We should allow hiding doc lines in the generated code, but they should be otherwise treated exactly the same as normal doc code block lines.</p>
<p>Lastly, if a doc should not be treated normally, we should allow using <a href="https://doc.rust-lang.org/rustdoc/write-documentation/documentation-tests.html#attributes">annotations like in Rust</a> to explicitly handle these cases in a trustworthy way. Syntactically, we would put a word right after the starting triple-backtick of the code block as one would notate the language in the block. All of these should be accompanied by a hint in the generated docs. I think the following annotations would be good:</p>
<ul>
<li><code>has_warnings</code> asserts that there is at least one parse/type/etc. warning in the code. If not, <code>roc check</code> fails.</li>
<li><code>has_errors</code> asserts that there is at least one parse/type/etc. error in the code, warnings are allowed but there can be zero or a hundred and it doesn't matter. If not, <code>roc check</code> fails.</li>
<li><code>should_crash</code> still ensures that there are no parse/type/etc. errors in the code block, but ensures that when run, the block <em>must</em> <code>crash</code>. If it doesn't, <code>roc test</code> fails. (Maybe <code>roc check</code> could catch this with constant folding, meaning we would just need <code>has_errors</code>.)</li>
</ul>
<p>There are some other annotations that Rust allows, but I think we shouldn't allow them:</p>
<ul>
<li><code>compile_fail</code> is a more general version of <code>has_warnings</code>/<code>has_errors</code>, I think we can be more specific on this.</li>
<li><code>ignore</code> is a very general "don't worry about it" annotation that allows bucket ignoring, we should force more specific annotations.</li>
<li><code>no_run</code> makes sense for effectful code, but we can't run effectful code unless it's using <code>Store.get!</code> and <code>Store.set!</code> in test environments.</li>
<li><code>edition20XX</code> sets the Rust version that runs, but we can just use the proposed version of Roc at the top of the package.</li>
</ul>
<p>If the above plan is accepted, I'll some GitHub issues. First a parent issue for organizing these features into a single place, and then the following children:</p>
<ul>
<li>"Compile doc code blocks and emit warnings/errors"</li>
<li>"Run <code>expect</code>s in doc code blocks with <code>roc test</code>"</li>
<li>"Hide lines in doc code blocks that start with <code>## ##</code>"</li>
<li>"Add support for annotations on doc code blocks"</li>
</ul>



<a name="490995968"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/490995968" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jasper Woudenberg <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#490995968">(Dec 27 2024 at 14:12)</a>:</h4>
<p>I like the idea of making sure documentation examples compile and run as they should!</p>
<p>I'm not sure how I feel about the annotations, I've not used those before. Do you have an example of some Rust documentation you like that uses these annotations to good effect?</p>



<a name="491003128"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491003128" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491003128">(Dec 27 2024 at 15:32)</a>:</h4>
<p>GitHub search didn't help that much. I'm trying to remember the examples I've seen. The main one is <code>should_panic</code> but I'm not remembering where I saw it. I'll work on it</p>



<a name="491008373"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491008373" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491008373">(Dec 27 2024 at 16:32)</a>:</h4>
<p><a href="https://doc.rust-lang.org/rustdoc/write-documentation/documentation-tests.html#attributes">https://doc.rust-lang.org/rustdoc/write-documentation/documentation-tests.html#attributes</a></p>



<a name="491008422"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491008422" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491008422">(Dec 27 2024 at 16:33)</a>:</h4>
<p>This is the docs on how to use attributes, but not an example that shows they should exist</p>



<a name="491008751"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491008751" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491008751">(Dec 27 2024 at 16:37)</a>:</h4>
<p>here’s one example: <a href="https://github.com/ayazhafiz/xorf/blob/108d67903f2df6db6dcd1c05c571594c529413d6/src/hash_proxy.rs#L65">https://github.com/ayazhafiz/xorf/blob/108d67903f2df6db6dcd1c05c571594c529413d6/src/hash_proxy.rs#L65</a>. it’s kind of useful for checking you’re actually in the bounds of the language. not sure it’s super useful.</p>



<a name="491009304"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491009304" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491009304">(Dec 27 2024 at 16:43)</a>:</h4>
<p>I have mixed feelings about this in general. I would definitely stay away from attributes for now until there is a clear need. With regard to checking that programs are well-formed, I am biased towards it being opt-in. There are two reasons for this.</p>
<ol>
<li>Unit tests may be a better and free source of documentation in this regard</li>
<li>In general APIs that are not trivial require some setup, and so then you end up with code blocks with a bunch of decoration to comment “irrelevant” bits out, eg <a href="https://github.com/ayazhafiz/xorf/blob/108d67903f2df6db6dcd1c05c571594c529413d6/src/hash_proxy.rs#L46">https://github.com/ayazhafiz/xorf/blob/108d67903f2df6db6dcd1c05c571594c529413d6/src/hash_proxy.rs#L46</a>. But the commented lines are needed if you want to copy-paste the code. I think for anything very involved, you are better off in general writing free-form documentation and checking with yourself/your users after the fact that it makes sense and they can reconstruct a program from it. If there is a mode for checking a program is well-formed, it probably should disallow hiding lines from the end docs (because then the program in the docs themselves aren’t well formed)</li>
</ol>



<a name="491009904"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491009904" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491009904">(Dec 27 2024 at 16:50)</a>:</h4>
<p>yeah I think this is a topic with nonobvious tradeoffs</p>



<a name="491009923"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491009923" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491009923">(Dec 27 2024 at 16:50)</a>:</h4>
<p>the number one goal of docs is teaching</p>



<a name="491009959"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491009959" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491009959">(Dec 27 2024 at 16:51)</a>:</h4>
<ol start="0">
<li>I'm okay with staying away from attributes, though I still think we can make a GitHub issue that says "This is the recipe for adding doc code block attributes to Roc once we think they should be added."</li>
<li>I, and I assume most people, will opt for reading the docs before reading the source code. Hovering over a function will show the doc code block, not other unit tests. I don't even think there's a consistent way to find such tests as some Roc devs write them next to the code, and some devs put them at the bottom of the module.</li>
<li>I would be okay with starting with only allowing hiding imports, for example. I think code blocks more serve the purpose of giving the "feel" of usage of an API. Hiding arbitrary lines gets tricky, but I'd rather a code block teach concisely than be copy-pastable.</li>
</ol>



<a name="491009979"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491009979" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491009979">(Dec 27 2024 at 16:51)</a>:</h4>
<p>and sometimes the best way to teach is to give examples that don't fully work - e.g. you have a chunk missing and put in a comment like <code># this is where you put the thing</code></p>



<a name="491009989"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491009989" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491009989">(Dec 27 2024 at 16:51)</a>:</h4>
<p>that can be optimal for teaching even though it doesn't compile</p>



<a name="491010069"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010069" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010069">(Dec 27 2024 at 16:52)</a>:</h4>
<p>separately, a thing I don't love about docs having tests get run in them automatically is that it means they now have a split focus. You're no longer trying to optimize only for teaching, but also for your test suite</p>



<a name="491010073"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010073" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010073">(Dec 27 2024 at 16:52)</a>:</h4>
<p>Though we generally can do well with putting a valid but obviously placeholding value, e.g.</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="kt">Str</span><span class="nf">.</span><span class="nv">repeat</span><span class="p">(</span><span class="s">"YOUR VAL HERE"</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">)</span>
</code></pre></div>



<a name="491010101"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010101" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010101">(Dec 27 2024 at 16:52)</a>:</h4>
<p>sometimes those happen to be 1-to-1 but sometimes making the test better makes it a worse example</p>



<a name="491010130"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010130" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010130">(Dec 27 2024 at 16:53)</a>:</h4>
<p>which creates an unhealthy tension when tests and docs have been coupled</p>



<a name="491010234"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010234" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010234">(Dec 27 2024 at 16:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281383">Richard Feldman</span> <a href="#narrow/channel/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks/near/491010069">said</a>:</p>
<blockquote>
<p>separately, a thing I don't love about docs having tests get run in them automatically is that it means they now have a split focus. You're no longer trying to optimize only for teaching, but also for your test suite</p>
</blockquote>
<p>I think we can still set the standard of "doc code blocks are valid Roc, even if some lines are hidden". You don't have to put any <code>expect</code>s. If we don't even ensure that doc blocks are syntactically correct, then readers have much lower confidence that they can apply what they see.</p>



<a name="491010435"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010435" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010435">(Dec 27 2024 at 16:57)</a>:</h4>
<p>I hear you and I agree, though I wonder if this is a non problem. I’ve very very rarely run into issues like this (only two in my head) and in both cases you can ask the author what’s wrong. I think if someone is already taking the time to write documentation, and moreover include code, they’re going to do so correctly</p>



<a name="491010451"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010451" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010451">(Dec 27 2024 at 16:57)</a>:</h4>
<p>sorry by correct i mean syntactically valid</p>



<a name="491010462"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010462" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010462">(Dec 27 2024 at 16:57)</a>:</h4>
<p>I don't agree</p>



<a name="491010548"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010548" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010548">(Dec 27 2024 at 16:58)</a>:</h4>
<p>I just got a compiler panic when updating Weaver because I forgot to update a function name buried in a 100-line module header that didn't get changed from camelCase to snake_case</p>



<a name="491010585"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010585" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010585">(Dec 27 2024 at 16:59)</a>:</h4>
<p>I have come to strongly appreciate tools that take away mental load</p>



<a name="491010607"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010607" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010607">(Dec 27 2024 at 16:59)</a>:</h4>
<p>And having doc code blocks tell me "If it compiles, it's valid Roc" means I just don't have to worry about it</p>



<a name="491010707"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010707" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010707">(Dec 27 2024 at 17:00)</a>:</h4>
<p>I think every developer has felt the pain of documentation always going out of date, which is why "self-documenting code" is so touted in our industry</p>



<a name="491010728"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010728" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010728">(Dec 27 2024 at 17:00)</a>:</h4>
<p>I think you're right that the first time you write the docs, they'll probably be correct</p>



<a name="491010764"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010764" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010764">(Dec 27 2024 at 17:01)</a>:</h4>
<p>But lots of PRs in our Roc compiler repo just move old docs around</p>



<a name="491010781"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010781" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010781">(Dec 27 2024 at 17:01)</a>:</h4>
<p>I also put a lot of value in the guaranteed correctness of doc code blocks.</p>



<a name="491010858"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010858" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010858">(Dec 27 2024 at 17:02)</a>:</h4>
<p>And I don't push on people to update them every time because a) it happens so often, and b) I'm jaded because I tend to devalue docs since I know they're somewhat likely to be wrong</p>



<a name="491010930"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010930" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010930">(Dec 27 2024 at 17:03)</a>:</h4>
<blockquote>
<p>I also put a lot of value in the guaranteed correctness of doc code blocks.</p>
</blockquote>
<p>It feels like a boost for the entire Roc ecosystem</p>



<a name="491010933"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491010933" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491010933">(Dec 27 2024 at 17:03)</a>:</h4>
<p>Also</p>
<blockquote>
<p>I’ve very very rarely run into issues like this (only two in my head) and in both cases you can ask the author what’s wrong.</p>
</blockquote>
<p>Most code I work on and don't own is libraries owned by people I've never talked to before. I don't think it's feasible to expect users to reach out to code owners</p>



<a name="491014022"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014022" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014022">(Dec 27 2024 at 17:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="461444">Sam Mohr</span> <a href="#narrow/channel/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks/near/491010548">said</a>:</p>
<blockquote>
<p>I just got a compiler panic when updating Weaver because I forgot to update a function name buried in a 100-line module header that didn't get changed from camelCase to snake_case</p>
</blockquote>
<p>Can you elaborate on this? I don't follow the connection to docs</p>



<a name="491014136"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014136" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014136">(Dec 27 2024 at 17:36)</a>:</h4>
<p>When I say "module header", I mean:</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="err">##</span><span class="w"> </span><span class="kt">Welcome</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="kt">Weaver</span><span class="err">!</span>
<span class="err">##</span>
<span class="err">##</span><span class="w"> </span><span class="kt">Use</span><span class="w"> </span><span class="p">[</span><span class="nv">oldFuncName</span><span class="p">]</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">thing</span><span class="nf">.</span>

<span class="kn">module</span><span class="w"> </span><span class="err">[</span><span class="nc">weave</span><span class="p">,</span><span class="w"> </span><span class="nv">combine</span><span class="p">,</span><span class="w"> </span><span class="nf">...</span><span class="p">]</span>
</code></pre></div>



<a name="491014201"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014201" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014201">(Dec 27 2024 at 17:37)</a>:</h4>
<p>got it</p>



<a name="491014249"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014249" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014249">(Dec 27 2024 at 17:38)</a>:</h4>
<p>okay definitely +1 to the case of you have hyperlinks and making sure they actually link</p>



<a name="491014250"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014250" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014250">(Dec 27 2024 at 17:38)</a>:</h4>
<p>I also have a lot of docs that I almost broke. Weaver has 39 (13 num types times 3) basically copy-pasted functions that parse numbers as args. All of them need to be manually updated</p>



<a name="491014310"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014310" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014310">(Dec 27 2024 at 17:38)</a>:</h4>
<p>can those be unit tests?</p>



<a name="491014330"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014330" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014330">(Dec 27 2024 at 17:38)</a>:</h4>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="err">##</span><span class="w"> </span><span class="kt">Add</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">takes</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nf">`</span><span class="kt">I128</span><span class="nf">`</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">given</span><span class="w"> </span><span class="nv">multiple</span><span class="w"> </span><span class="nv">times</span>
<span class="err">##</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="kt">CLI</span><span class="w"> </span><span class="nv">builder</span><span class="nf">.</span>
<span class="err">##</span>
<span class="err">##</span><span class="w"> </span><span class="kt">Parsing</span><span class="w"> </span><span class="nv">arguments</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">fail</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">calls</span><span class="w"> </span><span class="kr">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">don't</span><span class="w"> </span><span class="nv">provide</span>
<span class="err">##</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">value</span><span class="p">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">numbers</span><span class="nf">.</span>
<span class="err">##</span>
<span class="err">##</span><span class="w"> </span><span class="nf">```</span>
<span class="err">##</span><span class="w"> </span><span class="nv">expect</span>
<span class="err">##</span><span class="w">     </span><span class="p">{</span><span class="w"> </span><span class="nv">parser</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="nf">=</span>
<span class="err">##</span><span class="w">         </span><span class="kt">Opt</span><span class="nf">.</span><span class="nv">i128List</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">long</span><span class="nf">:</span><span class="w"> </span><span class="s">"answer"</span><span class="w"> </span><span class="p">},</span>
<span class="err">##</span><span class="w">         </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Cli</span><span class="nf">.</span><span class="nv">finish</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="nf">:</span><span class="w"> </span><span class="s">"example"</span><span class="w"> </span><span class="p">}</span>
<span class="err">##</span><span class="w">         </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Cli</span><span class="nf">.</span><span class="nv">assertValid</span>
<span class="err">##</span>
<span class="err">##</span><span class="w">     </span><span class="nv">parser</span><span class="w"> </span><span class="p">[</span><span class="s">"example"</span><span class="p">,</span><span class="w"> </span><span class="s">"-a"</span><span class="p">,</span><span class="w"> </span><span class="s">"1"</span><span class="p">,</span><span class="w"> </span><span class="s">"--answer=2"</span><span class="p">,</span><span class="w"> </span><span class="s">"--answer"</span><span class="p">,</span><span class="w"> </span><span class="s">"3"</span><span class="p">]</span>
<span class="err">##</span><span class="w">     </span><span class="nf">==</span><span class="w"> </span><span class="kt">SuccessfullyParsed</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span>
<span class="err">##</span><span class="w"> </span><span class="nf">```</span>
</code></pre></div>



<a name="491014365"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014365" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014365">(Dec 27 2024 at 17:39)</a>:</h4>
<p>It's a type of denormalization</p>



<a name="491014418"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014418" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014418">(Dec 27 2024 at 17:39)</a>:</h4>
<p>I think that localizing all code examples to a common set of tests makes my code cleaner, but it adds layers of indirection to someone using Weaver</p>



<a name="491014496"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014496" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014496">(Dec 27 2024 at 17:40)</a>:</h4>
<p>So it's better for me to copy the same example to every function in the module so that it's immediately obvious when you hover the function how to use it</p>



<a name="491014541"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014541" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014541">(Dec 27 2024 at 17:40)</a>:</h4>
<p>Meaning I have dozens of code examples that can easily go out-of-date</p>



<a name="491014584"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014584" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014584">(Dec 27 2024 at 17:41)</a>:</h4>
<p>I think this is something that normalization could solve very well and probably be better than requiring you to copy the examples everywhere</p>



<a name="491014610"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014610" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014610">(Dec 27 2024 at 17:41)</a>:</h4>
<p>Having docs generation lift up expect tests to the docs</p>



<a name="491014625"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014625" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014625">(Dec 27 2024 at 17:41)</a>:</h4>
<p>Maybe some annotation to highlight the test in the docs or something</p>



<a name="491014712"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014712" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014712">(Dec 27 2024 at 17:42)</a>:</h4>
<p>Not saying that's the answer but it feels like a better direction than copy/pasting the same docs and checking they're up-to-date - you only have one site to update</p>



<a name="491014754"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014754" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014754">(Dec 27 2024 at 17:42)</a>:</h4>
<p>I agree that it <em>feels</em> like there's a better solution, but I can't think of one that isn't really fancy or makes the API worse to use</p>



<a name="491014769"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014769" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014769">(Dec 27 2024 at 17:43)</a>:</h4>
<p>But I'd love to do that</p>



<a name="491014786"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014786" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014786">(Dec 27 2024 at 17:43)</a>:</h4>
<p>Let's ignore this being a test for a minute</p>



<a name="491014814"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014814" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014814">(Dec 27 2024 at 17:43)</a>:</h4>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="err">##</span><span class="w"> </span><span class="kt">Add</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">takes</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nf">`</span><span class="kt">I128</span><span class="nf">`</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">given</span><span class="w"> </span><span class="nv">multiple</span><span class="w"> </span><span class="nv">times</span>
<span class="err">##</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="kt">CLI</span><span class="w"> </span><span class="nv">builder</span><span class="nf">.</span>
<span class="err">##</span>
<span class="err">##</span><span class="w"> </span><span class="kt">Parsing</span><span class="w"> </span><span class="nv">arguments</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">fail</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">calls</span><span class="w"> </span><span class="kr">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">option</span><span class="w"> </span><span class="nv">don't</span><span class="w"> </span><span class="nv">provide</span>
<span class="err">##</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">value</span><span class="p">,</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">numbers</span><span class="nf">.</span>
<span class="err">##</span>
<span class="err">##</span><span class="w"> </span><span class="nf">```</span><span class="nv">roc</span>
<span class="err">##</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">parser</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="nf">=</span>
<span class="err">##</span><span class="w">     </span><span class="kt">Opt</span><span class="nf">.</span><span class="nv">i128_list</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">long</span><span class="nf">:</span><span class="w"> </span><span class="s">"answer"</span><span class="w"> </span><span class="p">},</span>
<span class="err">##</span><span class="w">     </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Cli</span><span class="nf">.</span><span class="nv">finish</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">name</span><span class="nf">:</span><span class="w"> </span><span class="s">"example"</span><span class="w"> </span><span class="p">}</span>
<span class="err">##</span><span class="w">     </span><span class="nf">|&gt;</span><span class="w"> </span><span class="kt">Cli</span><span class="nf">.</span><span class="nv">assert_valid</span>
<span class="err">##</span>
<span class="err">##</span><span class="w"> </span><span class="nv">parser</span><span class="w"> </span><span class="p">[</span><span class="s">"example"</span><span class="p">,</span><span class="w"> </span><span class="s">"-a"</span><span class="p">,</span><span class="w"> </span><span class="s">"1"</span><span class="p">,</span><span class="w"> </span><span class="s">"--answer=2"</span><span class="p">,</span><span class="w"> </span><span class="s">"--answer"</span><span class="p">,</span><span class="w"> </span><span class="s">"3"</span><span class="p">]</span>
<span class="err">##</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="kt">SuccessfullyParsed</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span>
<span class="err">##</span><span class="w"> </span><span class="nf">```</span>
</code></pre></div>



<a name="491014826"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014826" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014826">(Dec 27 2024 at 17:43)</a>:</h4>
<p>Let's say this is the code example.</p>



<a name="491014899"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014899" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014899">(Dec 27 2024 at 17:44)</a>:</h4>
<p>I'd really like if code examples get type checked and all.</p>



<a name="491014904"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014904" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014904">(Dec 27 2024 at 17:44)</a>:</h4>
<p>Just a quick note, not interrupting you:</p>
<p>I still think long-form docs with a bunch of examples are more of an education tool as Richard mentioned and I think some opt-in checking is useful but I don't think it should be the default.</p>
<p>I would also suggest maybe punting this until there are many more packages in the ecosystem and seeing what the common patterns across the ecosystem look like</p>



<a name="491014905"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014905" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014905">(Dec 27 2024 at 17:44)</a>:</h4>
<p>Would you be opposed?</p>



<a name="491014918"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014918" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014918">(Dec 27 2024 at 17:44)</a>:</h4>
<p>Okay, we can punt</p>



<a name="491014933"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014933" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014933">(Dec 27 2024 at 17:44)</a>:</h4>
<p>I think you could do it with just two block tags “hide_header” and “hidden_module &lt;modulename&gt;”</p>



<a name="491014950"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491014950" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491014950">(Dec 27 2024 at 17:44)</a>:</h4>
<p>I think it's fine but (1) I think that example should be an expect and (2) it should be opt-in if you have an example you want to type-check</p>



<a name="491015028"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491015028" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491015028">(Dec 27 2024 at 17:45)</a>:</h4>
<p>I'll have to go look for some doc-based code examples that I feel would be better off not being type-checked</p>



<a name="491015047"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491015047" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491015047">(Dec 27 2024 at 17:45)</a>:</h4>
<p>So using triple backticks, roc as the language, and then one of those. The first would hide the header of whatever file it it’s, and the second would not show the block at all but add the module as one that could be used by other blocks in the same document</p>



<a name="491015104"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491015104" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anthony Bullard <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491015104">(Dec 27 2024 at 17:46)</a>:</h4>
<p>Hard to show here</p>



<a name="491015157"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491015157" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491015157">(Dec 27 2024 at 17:46)</a>:</h4>
<p>Because Richard's example of <code>xyz = # your answer</code> can usually be done with either of these</p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">xyz</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="s">"your answer"</span>

<span class="c1">-- or</span>
<span class="err">#</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">answer</span><span class="w"> </span><span class="nv">below</span>
<span class="nv">xyz</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">null</span>
</code></pre></div>



<a name="491015190"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491015190" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491015190">(Dec 27 2024 at 17:47)</a>:</h4>
<p>And then we get that mental burden lowering of "code examples all type check unless they say they don't"</p>



<a name="491015681"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491015681" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491015681">(Dec 27 2024 at 17:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="781658">Anthony Bullard</span> <a href="#narrow/channel/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks/near/491015047">said</a>:</p>
<blockquote>
<p>So using triple backticks, roc as the language, and then one of those. The first would hide the header of whatever file it it’s, and the second would not show the block at all but add the module as one that could be used by other blocks in the same document</p>
</blockquote>
<p>This has the disadvantage of making the docs less markdown-like, since you can no longer read them contiguously, but I'd personally be okay with this.</p>



<a name="491016170"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491016170" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491016170">(Dec 27 2024 at 17:58)</a>:</h4>
<p><span class="user-mention" data-user-id="454654">@Ayaz Hafiz</span> I'm much less experienced in the guiding of a language's development, so I'm curious about a metaprocess you seem to have running here. You suggest we should punt this until we have more ecosystem code to base our decision on, which mirrors what Richard has said for some of the other stuff I've suggested recently. I generally am trying to get ahead of problems I see in other languages with all aspects for Roc, but between:</p>
<ul>
<li>compiler-verified doc code blocks</li>
<li>inline type annotations</li>
<li>raising errors on top-level unannotated code</li>
</ul>
<p>I've gotten pushback on that approach. Do you think you know of a conscious heuristic (even a rough one) I can apply to figure out when we need to wait to solve a problem in Roc's design? I don't like the idea of making everyone update their code until after a problem is confirmed to exist, instead of just preempting it.</p>



<a name="491024527"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491024527" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491024527">(Dec 27 2024 at 19:34)</a>:</h4>
<p>First off, I apologize if I made it seem that this is not worth discussing. That's not my intention. I think everything is worth thought and I don't think anyone has say what's worth discussing vs not</p>



<a name="491024556"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491024556" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491024556">(Dec 27 2024 at 19:34)</a>:</h4>
<p>Not interpreted that way. You've been extremely courteous the whole time I've been working on Roc!</p>



<a name="491025075"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025075" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025075">(Dec 27 2024 at 19:40)</a>:</h4>
<p>I see this now mostly as an optimization problem to get the language to a position of stability from where it can grow. Rewinding a few years, we added a lot of features in a short time. For a while I thought (esp. with Richard and Folkert) we could continue developing and fixing bugs at a consistent rate. Unfortunately, I think what has happened is that we sprayed too wide, too fast, and our time availability went down significantly. The outcome of this has been a lot of bugs and few solid foundations to stand on. Things have gotten much better since e.g. 2021/2022, but as you know, there is still a lot to do to get the foundational core of Roc to work correctly. I'm happy to share particular instances of this in my mind if it's helpful. Regardless, my opinion is that the optimization problem should be to develop a good, stable, working foundational core first, and then branch off from that.</p>



<a name="491025177"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025177" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025177">(Dec 27 2024 at 19:41)</a>:</h4>
<p>I understand the problem you're talking about with stability, no need for examples, I see it when I work on the compiler</p>



<a name="491025188"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025188" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025188">(Dec 27 2024 at 19:41)</a>:</h4>
<p>And when I did AoC last year</p>



<a name="491025307"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025307" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025307">(Dec 27 2024 at 19:43)</a>:</h4>
<p>There are a few advantages of doing one thing right before branching off. The first is that you build a foundation people can build really sophisticated things on top of (like you have with Weaver) and then figure out how to support the emergent use cases better. In my experience trying to find the emergent use cases ahead of time is really hard, and you often have a few false starts. The second is that you give people a foundation that they can work with productively. People use the software and have a good time, and the discussion switches from "when will this stop crashing" to "how do I make this use case better". Roc is more in the latter direction now which is good, but the former still occurs way too much for what should be simple tasks, IMO.</p>



<a name="491025319"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025319" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025319">(Dec 27 2024 at 19:43)</a>:</h4>
<p>Okay, fair. Between the monomorphization rewrite, lambda set rewrite, canonicalization rewrite, and ROAR, we're doing a lot of work to get a very robust core!</p>



<a name="491025419"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025419" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025419">(Dec 27 2024 at 19:44)</a>:</h4>
<p>Okay, that's a great explanation!</p>



<a name="491025456"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025456" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025456">(Dec 27 2024 at 19:44)</a>:</h4>
<p>We're trying to avoid buying a new car while we're still behind on our credit card payments</p>



<a name="491025494"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025494" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025494">(Dec 27 2024 at 19:45)</a>:</h4>
<p>We've paid off most of our bills, but we still have a credit score of 500</p>



<a name="491025506"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025506" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025506">(Dec 27 2024 at 19:45)</a>:</h4>
<p>Thanks for taking the time to explain</p>



<a name="491025543"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025543" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025543">(Dec 27 2024 at 19:46)</a>:</h4>
<p>The third, and what I think is most important, is that keeping the surface area small and getting it right the first time gives a better basis for where to branch off. If you need to backtrack you only need to throw off a leaf rather than rebuild everything (or rearrange the leaves when you realize the core is bad). Also, when you have a core that isn't going to change much and can see what sophisticated things people are building on top of it, it gives you better ideas for what actually matters. A good example of this the new effects/for loop/imperative stuff. I think it's very hard to have seen that if you didn't have a lot of Roc code to look at and reflect on what was difficult about it for people</p>



<a name="491025586"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025586" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025586">(Dec 27 2024 at 19:46)</a>:</h4>
<p>Yeah the car analogy is good</p>



<a name="491025819"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025819" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025819">(Dec 27 2024 at 19:48)</a>:</h4>
<p>Fair.</p>



<a name="491025848"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491025848" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491025848">(Dec 27 2024 at 19:48)</a>:</h4>
<p>Also just as a personal reflection/quirk/whatever, for me it's very difficult to understand the consequences of features without people using them. For me it's much easier to talk to someone and figure out what their pain is and solve that than to try to predict the pain. I'm probably just not smart enough to see the pain ahead of time, but sometimes the pain is invisible. And to predict an invisible pain I think is really difficult</p>



<a name="491026024"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491026024" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491026024">(Dec 27 2024 at 19:49)</a>:</h4>
<p>Maybe I've been using too much Arrakian spice</p>



<a name="491026089"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491026089" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491026089">(Dec 27 2024 at 19:50)</a>:</h4>
<p>I try to apply YAGNI (You Ain't Gonna Need It) when doing application dev</p>



<a name="491026108"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491026108" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491026108">(Dec 27 2024 at 19:50)</a>:</h4>
<p>But I guess that instinct doesn't kick in as much with language dev because I assume that we're trying to handle future problems</p>



<a name="491026126"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491026126" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491026126">(Dec 27 2024 at 19:51)</a>:</h4>
<p>But I guess Roc has found success in reacting more than proacting</p>



<a name="491026137"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491026137" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491026137">(Dec 27 2024 at 19:51)</a>:</h4>
<p>yeah, i mean it's also fun right</p>



<a name="491026141"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491026141" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491026141">(Dec 27 2024 at 19:51)</a>:</h4>
<p>So I'll try to lean more towards it</p>



<a name="491026169"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491026169" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491026169">(Dec 27 2024 at 19:51)</a>:</h4>
<p>for me it's more fun to think of what could be than to reflect on what's not going well</p>



<a name="491026215"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491026215" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491026215">(Dec 27 2024 at 19:52)</a>:</h4>
<p>eh, definitely not saying you should lean more towards it</p>



<a name="491026247"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491026247" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491026247">(Dec 27 2024 at 19:52)</a>:</h4>
<p>but hopefully explains my perspective</p>



<a name="491026271"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491026271" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491026271">(Dec 27 2024 at 19:52)</a>:</h4>
<p>It does explain your perspective</p>



<a name="491026678"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491026678" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491026678">(Dec 27 2024 at 19:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="454654">Ayaz Hafiz</span> <a href="#narrow/channel/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks/near/491026215">said</a>:</p>
<blockquote>
<p>eh, definitely not saying you should lean more towards it</p>
</blockquote>
<p>I find success in life applying virtue ethics: the philosophy is to align yourself and your decisions on good principles until they become second nature. I find it leads to less need to resolve conflict between what I do and what I should do.</p>
<p>As a result, I tend to naturally make decisions I'm happy with, but have less practice holding competing ideas in my head and letting them "weigh on the scale".</p>
<p>So I prefer to align on principles, but it's good practice to hear your opinion, disagree, and figure out how to manage that.</p>



<a name="491111132"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491111132" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491111132">(Dec 28 2024 at 18:33)</a>:</h4>
<p>What's our conclusion here? I definitely want at least a minimal version of this that we can use to test the snippets in the tutorial in CI. It looks terrible for Roc if we have code that doesn't work in the tutorial.</p>



<a name="491112219"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112219" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112219">(Dec 28 2024 at 18:52)</a>:</h4>
<p>To be fair, that's a different part of Roc, right? That means we should add a GH issue that's called "Allow testing code blocks in roc markdown snippets"</p>



<a name="491112472"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112472" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112472">(Dec 28 2024 at 18:57)</a>:</h4>
<blockquote>
<p>"Allow testing code blocks in roc markdown snippets"</p>
</blockquote>
<p>That's already implemented :) I need the ability to hide imports etc.</p>
<blockquote>
<p>that's a different part of Roc, right?</p>
</blockquote>
<p>Not really, there is a lot of shared functionality</p>



<a name="491112577"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112577" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112577">(Dec 28 2024 at 18:59)</a>:</h4>
<p>For the features outlined in this thread, I would vote that we at least add some opt-in behavior to start the implementation with. I think that 90% of the work is parsing and typechecking doc comments, I <em>presume</em> we only highlight syntactically based on my memory.</p>



<a name="491112620"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112620" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112620">(Dec 28 2024 at 18:59)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> Roc code blocks can't hide lines with the same syntax, since <code>## ##</code> is just for doc comments</p>



<a name="491112706"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112706" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112706">(Dec 28 2024 at 19:00)</a>:</h4>
<p>Not sure what the right syntax would be</p>



<a name="491112707"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112707" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112707">(Dec 28 2024 at 19:00)</a>:</h4>
<p>what if we just try out whatever seems best for the tutorial, but don't enable it in the compiler in general?</p>



<a name="491112708"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112708" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112708">(Dec 28 2024 at 19:00)</a>:</h4>
<p>Oh, I know</p>



<a name="491112735"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112735" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112735">(Dec 28 2024 at 19:01)</a>:</h4>
<p>like focus on the use case of the tutorial, defer the question of what should be in the language proper</p>



<a name="491112742"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112742" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112742">(Dec 28 2024 at 19:01)</a>:</h4>
<p>I'm okay with that goal</p>



<a name="491112752"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112752" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112752">(Dec 28 2024 at 19:01)</a>:</h4>
<p><span class="user-mention" data-user-id="361169">@Anton</span> do we need to hide imports for the tutorial?</p>



<a name="491112813"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112813" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112813">(Dec 28 2024 at 19:02)</a>:</h4>
<p>I'd like them to be viewable with a toggle</p>



<a name="491112838"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112838" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112838">(Dec 28 2024 at 19:02)</a>:</h4>
<p>We could just allow something like</p>
<div class="codehilite" data-code-language="Markdown"><pre><span></span><code>Some tutorial stuff

```roc,hide_imports
import Hidden

Hidden.call_func(123)
</code></pre></div>



<a name="491112858"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112858" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112858">(Dec 28 2024 at 19:03)</a>:</h4>
<p>Should be simple enough to implement</p>



<a name="491112879"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491112879" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491112879">(Dec 28 2024 at 19:03)</a>:</h4>
<p>Then it just affects the generated HTML but not the Roc code, so we can still typecheck and all normally</p>



<a name="491113200"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491113200" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491113200">(Dec 28 2024 at 19:09)</a>:</h4>
<p>I do think we'd want specific control over what lines to hide, like we want to able to hide the definition of <code>something</code> for this snippet that's currently in the tutorial:</p>
<div class="codehilite"><pre><span></span><code>stoplightColor =
    if something &gt; 0 then
        Red
    else if something == 0 then
        Yellow
    else
        Green
</code></pre></div>



<a name="491113625"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491113625" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491113625">(Dec 28 2024 at 19:16)</a>:</h4>
<p>We could do a Jupyter Notebook thing: all markdown blocks in a single file are part of the same module</p>



<a name="491113654"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491113654" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491113654">(Dec 28 2024 at 19:16)</a>:</h4>
<p>And then we have a <code>toggleable</code> (name is flexible) annotation that makes entire blocks toggleable</p>



<a name="491113677"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491113677" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491113677">(Dec 28 2024 at 19:17)</a>:</h4>
<p>That gives us control per block without needing a special new Roc directive just for markdown</p>



<a name="491114019"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491114019" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491114019">(Dec 28 2024 at 19:22)</a>:</h4>
<p>something I like to do decently often is to have like a <code>...</code> in examples to omit things - could support that with a find/replace of <code>…</code> (the actual Unicode character) with <code>(crash "")</code> before compiling, so those always type-check</p>



<a name="491114043"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491114043" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491114043">(Dec 28 2024 at 19:23)</a>:</h4>
<p>although that could result in compiler warnings of unreachable code <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="491115987"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491115987" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491115987">(Dec 28 2024 at 19:54)</a>:</h4>
<p>Hmm, that's an interesting idea!</p>



<a name="491116816"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491116816" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491116816">(Dec 28 2024 at 20:08)</a>:</h4>
<p>Do we have a precedent for any compiler warnings/errors that are there for dev but not production?</p>



<a name="491116870"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491116870" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491116870">(Dec 28 2024 at 20:09)</a>:</h4>
<p>Wait, what am I saying</p>



<a name="491116937"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491116937" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491116937">(Dec 28 2024 at 20:10)</a>:</h4>
<p>I think having <code>...</code> be the Python equivalent where it means "this is a stub of some body" would be a great feature to have</p>



<a name="491117011"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491117011" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491117011">(Dec 28 2024 at 20:12)</a>:</h4>
<p>That would let people do </p>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="nv">xyz</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">...</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">val</span><span class="w"> </span><span class="nv">here</span>

<span class="c1">-- Or just this by convention</span>
<span class="nv">abc</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="kt">True</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="nf">...</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="mi">123</span>
</code></pre></div>



<a name="491117073"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491117073" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491117073">(Dec 28 2024 at 20:12)</a>:</h4>
<p>And then we have a syntactically valid way to have your incomplete code blocks that still typecheck</p>



<a name="491117078"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491117078" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491117078">(Dec 28 2024 at 20:13)</a>:</h4>
<p>Making it easier for us to typecheck and test doc code blocks if we go that road in the future</p>



<a name="491117119"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491117119" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491117119">(Dec 28 2024 at 20:13)</a>:</h4>
<p><a href="https://python.land/python-ellipsis">https://python.land/python-ellipsis</a></p>



<a name="491117192"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491117192" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491117192">(Dec 28 2024 at 20:14)</a>:</h4>
<p>In maybe 45 minutes, I'll make a thread for this. It could work with inline annotations for host functions</p>



<a name="491145451"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491145451" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491145451">(Dec 29 2024 at 04:34)</a>:</h4>
<p>Just for my curiosity, I'm wondering if people have preferences on formatting hidden code lines. Rust doesn't have <em>real</em> problems besides looking silly with hidden code lines because whitespace isn't significant there.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="sd">/// Split a string.</span>
<span class="sd">///</span>
<span class="sd">/// ```</span>
<span class="sd">/// /// fn test_splitting() {</span>
<span class="sd">/// let x = "a b c";</span>
<span class="sd">/// /// let delimiter = " ";</span>
<span class="sd">/// let split = x.split(delimiter);</span>
<span class="sd">///</span>
<span class="sd">/// assert_eq!(&amp;split[..], &amp;["a", "b", "c"]);</span>
<span class="sd">/// /// }</span>
</code></pre></div>
<p>In Roc, whitespace is important, and parsing fails with incorrect indentation. The current suggestion is one of these two options:</p>
<h3>Force common indentation if any hidden lines are showing</h3>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="err">##</span><span class="w"> </span><span class="nf">```</span>
<span class="err">##</span><span class="w">    </span><span class="nv">my_func</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">|</span><span class="nv">str</span><span class="nf">|</span>
<span class="err">##</span><span class="w"> </span><span class="err">##</span><span class="w">     </span><span class="kr">import</span><span class="w"> </span><span class="kt">Helpers</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">str</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">H</span>
<span class="err">##</span><span class="w">        </span><span class="nv">x</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">H</span><span class="nf">.</span><span class="nv">build</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="err">##</span>
<span class="err">##</span><span class="w">        </span><span class="nv">str</span><span class="nf">.</span><span class="nv">repeat</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span>
<span class="err">##</span><span class="w"> </span><span class="nf">```</span>
</code></pre></div>
<h3>Use normal indentation, ignoring the second doc comment prefix's width</h3>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="err">##</span><span class="w"> </span><span class="nf">```</span>
<span class="err">##</span><span class="w"> </span><span class="nv">my_func</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">|</span><span class="nv">str</span><span class="nf">|</span>
<span class="err">##</span><span class="w"> </span><span class="err">##</span><span class="w">        </span><span class="kr">import</span><span class="w"> </span><span class="kt">Helpers</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">str</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">H</span>
<span class="err">##</span><span class="w">     </span><span class="nv">x</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">H</span><span class="nf">.</span><span class="nv">build</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="err">##</span>
<span class="err">##</span><span class="w">     </span><span class="nv">str</span><span class="nf">.</span><span class="nv">repeat</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span>
<span class="err">##</span><span class="w"> </span><span class="nf">```</span>
</code></pre></div>
<p>I'm not super happy with either, but the first is more readable IMO for the source markdown, though both would generate the same HTML docs. Is there a third option, or do we have to pick from the lesser of two evils. If so, which evil?</p>



<a name="491145508"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491145508" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491145508">(Dec 29 2024 at 04:35)</a>:</h4>
<p>We don't need to decide until this discussion is picked back up</p>



<a name="491146224"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146224" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146224">(Dec 29 2024 at 04:48)</a>:</h4>
<p>right-hand hide?</p>
<div class="codehilite"><pre><span></span><code>## ```
## my_func = |str|
##     import Helpers { str } as H # @@hide (or whatever name)
##     x = H.build(123)
##
##     str.repeat(x)
## ```
`
```
</code></pre></div>



<a name="491146332"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146332" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146332">(Dec 29 2024 at 04:50)</a>:</h4>
<p>That's a solution if we are okay opening the door to add directives to comments.</p>



<a name="491146354"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146354" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146354">(Dec 29 2024 at 04:51)</a>:</h4>
<p>Actually, I think putting doc comments after the line could work</p>



<a name="491146365"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146365" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146365">(Dec 29 2024 at 04:51)</a>:</h4>
<div class="codehilite" data-code-language="Elm"><pre><span></span><code><span class="err">##</span><span class="w"> </span><span class="nf">```</span>
<span class="err">##</span><span class="w"> </span><span class="nv">my_func</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">|</span><span class="nv">str</span><span class="nf">|</span>
<span class="err">##</span><span class="w">     </span><span class="kr">import</span><span class="w"> </span><span class="kt">Helpers</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">str</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">H</span><span class="w"> </span><span class="err">##</span>
<span class="err">##</span><span class="w">     </span><span class="nv">x</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">H</span><span class="nf">.</span><span class="nv">build</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="err">##</span>
<span class="err">##</span><span class="w">     </span><span class="nv">str</span><span class="nf">.</span><span class="nv">repeat</span><span class="p">(</span><span class="nv">x</span><span class="p">)</span>
<span class="err">##</span><span class="w"> </span><span class="nf">```</span>
</code></pre></div>



<a name="491146371"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146371" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146371">(Dec 29 2024 at 04:51)</a>:</h4>
<p>this is docs specific right? <code>##</code> on the left is as much a directive</p>



<a name="491146380"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146380" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146380">(Dec 29 2024 at 04:51)</a>:</h4>
<p>It's pretty subtle</p>



<a name="491146384"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146384" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146384">(Dec 29 2024 at 04:51)</a>:</h4>
<p>Yeah, I agree</p>



<a name="491146449"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146449" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146449">(Dec 29 2024 at 04:52)</a>:</h4>
<p>Just because something is visually indistinct from other Roc tools, it doesn't mean it's not totally different under the hood</p>



<a name="491146465"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146465" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146465">(Dec 29 2024 at 04:52)</a>:</h4>
<p>But it would be nice to not invent a totally new feature for this</p>



<a name="491146559"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146559" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146559">(Dec 29 2024 at 04:54)</a>:</h4>
<p>another hot take but i wonder if supporting hiding is a good idea. I think it makes sense if you have multiple code blocks that flow naturally from one to the other but are distinct for some reason. But for that maybe it's better to squash them altogether and run check over that. The downside of hiding is you can't copy-paste and have the code run correctly. If the code block is so complicated that it needs hidden pieces, maybe it's a bad API.</p>



<a name="491146606"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146606" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146606">(Dec 29 2024 at 04:55)</a>:</h4>
<p>Probably true. The only case I care about is hiding imports, but we could just always have imports collapsed by default and toggleable, and imports would be included if you copied the block</p>



<a name="491146616"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146616" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146616">(Dec 29 2024 at 04:55)</a>:</h4>
<p>I think we should start without code hiding for the reasons you point out</p>



<a name="491146696"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146696" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayaz Hafiz <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146696">(Dec 29 2024 at 04:57)</a>:</h4>
<p>im curious of an example of a code block that has a lot of imports, if you have one in mind</p>



<a name="491146996"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491146996" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491146996">(Dec 29 2024 at 05:00)</a>:</h4>
<p>I'm looking <a href="https://github.com/search?q=%22%2F%2F%2F+%23%22+path%3A*.rs&amp;type=code">across GitHub</a> and I'm only seeing a few imports per example, so you probably have a point. They just don't have teaching value IMO, they only make copy-paste-ability better</p>



<a name="491147032"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491147032" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491147032">(Dec 29 2024 at 05:01)</a>:</h4>
<p>So hiding them cleans up the code, but it's not necessary</p>



<a name="491147148"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491147148" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491147148">(Dec 29 2024 at 05:01)</a>:</h4>
<p>Or should I say, it makes examples more concise</p>



<a name="491268890"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Ironing%20out%20doc%20code%20blocks/near/491268890" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Ironing.20out.20doc.20code.20blocks.html#491268890">(Dec 30 2024 at 11:07)</a>:</h4>
<p>We can't squash all the code blocks together in the tutorial, we'd have duplicate name errors.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>