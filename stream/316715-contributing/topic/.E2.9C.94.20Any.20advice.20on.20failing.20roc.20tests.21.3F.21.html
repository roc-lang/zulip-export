<html>
<head><meta charset="utf-8"><title>✔ Any advice on failing roc tests!?! · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html">✔ Any advice on failing roc tests!?!</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="474092403"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474092403" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sajjad Naveed <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474092403">(Oct 01 2024 at 17:42)</a>:</h4>
<p>Hey, I am trying to contribute to Roc and going through the Roc internals to get more familiar with it. </p>
<p>Currently, just running <code>cargo test --release</code> on the main branch fails</p>
<blockquote>
<p>test result: FAILED. 133 passed; 10 failed; 2 ignored; 0 measured; 0 filtered out; finished in 50.56s</p>
</blockquote>
<div class="codehilite"><pre><span></span><code>failures:
    tests::interpolation_with_nested_strings
    tests::list_contains
    tests::list_drop_at_negative_index
    tests::list_first
    tests::list_get_negative_index
    tests::list_last
    tests::list_sum_empty
    tests::list_sum_frac
    tests::list_sum_num
    tests::opaque_wrap_function
</code></pre></div>
<p>Can please some one give an advice on what I am doing wrong here? Are we not supposed to work with the main branch for contributions?</p>
<p>Happy to provide more details here if needed.</p>
<p>Thanks!</p>



<a name="474093601"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474093601" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474093601">(Oct 01 2024 at 17:49)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="629236">@Sajjad Naveed</span>,<br>
Yeah, the main branch is the right place.<br>
Perhaps there is something wrong with your dependencies, are you using <code>nix develop</code>?</p>



<a name="474093839"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474093839" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474093839">(Oct 01 2024 at 17:50)</a>:</h4>
<p>If you share an error message of any of those failures I will probably know what's wrong</p>



<a name="474093990"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474093990" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sajjad Naveed <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474093990">(Oct 01 2024 at 17:51)</a>:</h4>
<p>Yeah I am. The only difference is that I am using Determinate Systems nix installer rather than the official one but it hasn't caused any issues before.</p>



<a name="474094330"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474094330" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474094330">(Oct 01 2024 at 17:53)</a>:</h4>
<p>If you scroll up a bit you will probably have a full error/failure message for each test</p>



<a name="474094371"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474094371" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sajjad Naveed <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474094371">(Oct 01 2024 at 17:53)</a>:</h4>
<p>Here's one of the failure messages. </p>
<div class="codehilite"><pre><span></span><code>test tests::list_sum_frac ... FAILED
ld: invalid r_symbolnum=1 in &#39;/private/tmp/nix-shell.YiDFvR/.tmpI1Go9y/app.o&#39;
/tmp/nix-shell.YiDFvR/.tmpI1Go9y/app.dylib: No such file or directory
thread &#39;main&#39; panicked at crates/repl_cli/src/cli_gen.rs:69:14:
we produce a valid Dylib: DlOpen { desc: &quot;dlopen(/tmp/nix-shell.YiDFvR/.tmpI1Go9y/app.dylib, 0x0005): tried: \&#39;/tmp/nix-shell.YiDFvR/.tmpI1Go9y/app.dylib\&#39; (no such file), \&#39;/System/Volumes/Preboot/Cryptexes/OS/tmp/nix-shell.YiDFvR/.tmpI1Go9y/app.dylib\&#39; (no such file), \&#39;/tmp/nix-shell.YiDFvR/.tmpI1Go9y/app.dylib\&#39; (no such file), \&#39;/private/tmp/nix-shell.YiDFvR/.tmpI1Go9y/app.dylib\&#39; (no such file), \&#39;/System/Volumes/Preboot/Cryptexes/OS/private/tmp/nix-shell.YiDFvR/.tmpI1Go9y/app.dylib\&#39; (no such file), \&#39;/private/tmp/nix-shell.YiDFvR/.tmpI1Go9y/app.dylib\&#39; (no such file)&quot; }
</code></pre></div>
<p>I hope this helps!?!</p>



<a name="474094761"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474094761" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474094761">(Oct 01 2024 at 17:55)</a>:</h4>
<p>Hmm some settings in the Determinate Systems nix installer could be the problem here. What operating system and architecture(x64, apple silicon...) is your machine?</p>



<a name="474094956"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474094956" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sajjad Naveed <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474094956">(Oct 01 2024 at 17:56)</a>:</h4>
<p>Macbook Pro (M1 Max)</p>
<p>MacOS 15.0 (24A335)</p>



<a name="474095166"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474095166" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474095166">(Oct 01 2024 at 17:57)</a>:</h4>
<p>Yeah, we don't test with macos 15 yet, that could also be the problem</p>



<a name="474095387"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474095387" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sajjad Naveed <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474095387">(Oct 01 2024 at 17:58)</a>:</h4>
<p>Hmm, do you think it's worth trying the official installer?</p>



<a name="474096021"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474096021" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474096021">(Oct 01 2024 at 18:01)</a>:</h4>
<p>Actually, I now think xcode problems could be more likely, can you try <a href="https://github.com/roc-lang/roc/issues/5797#issuecomment-1786105269">this</a>?</p>



<a name="474096413"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474096413" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474096413">(Oct 01 2024 at 18:02)</a>:</h4>
<p>I have to go now, but I'll be back tomorrow if you need more help :)</p>



<a name="474096517"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474096517" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sajjad Naveed <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474096517">(Oct 01 2024 at 18:03)</a>:</h4>
<p>Trying. I will let you know how it goes.</p>
<p>Yeah I understand. Take Care. It's 4:03 am here as well. I am also gonna crash after this.</p>



<a name="474101243"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474101243" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sajjad Naveed <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474101243">(Oct 01 2024 at 18:30)</a>:</h4>
<p>It worked <span aria-label="dancing" class="emoji emoji-1f57a" role="img" title="dancing">:dancing:</span> </p>
<p>Thanks for helping <span class="user-mention" data-user-id="361169">@Anton</span> </p>
<p>This should be pinned in contributions somehow, as there is a reasonable chance other people might face this too.</p>
<p>But thank you so much again <span aria-label="praise" class="emoji emoji-1f64c" role="img" title="praise">:praise:</span></p>



<a name="474103866"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474103866" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474103866">(Oct 01 2024 at 18:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="629236">Sajjad Naveed</span> has marked this topic as resolved.</p>



<a name="474245795"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474245795" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474245795">(Oct 02 2024 at 09:35)</a>:</h4>
<blockquote>
<p>This should be pinned in contributions somehow, as there is a reasonable chance other people might face this too.</p>
</blockquote>
<p>I'll modify the error message, that way it's right there :)</p>



<a name="474246513"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/474246513" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#474246513">(Oct 02 2024 at 09:39)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/7137">https://github.com/roc-lang/roc/pull/7137</a></p>



<a name="481425361"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/481425361" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#481425361">(Nov 09 2024 at 04:07)</a>:</h4>
<p>I'm also running into some failing tests on main running locally on my mac (with nix). Any suggestions about fixing these?</p>
<div class="codehilite"><pre><span></span><code>failures:

---- tests::identity_lambda stdout ----
thread &#39;tests::identity_lambda&#39; panicked at crates/repl_test/src/cli.rs:96:13:
repl exited unexpectedly before finishing evaluation. Exit status was ExitStatus(unix_wait_status(25856)) and stderr was &quot;&quot;
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- tests::issue_2300 stdout ----
thread &#39;tests::issue_2300&#39; panicked at crates/repl_test/src/cli.rs:96:13:
repl exited unexpectedly before finishing evaluation. Exit status was ExitStatus(unix_wait_status(25856)) and stderr was &quot;&quot;

---- tests::issue_2582_specialize_result_value stdout ----
thread &#39;tests::issue_2582_specialize_result_value&#39; panicked at crates/repl_test/src/cli.rs:96:13:
repl exited unexpectedly before finishing evaluation. Exit status was ExitStatus(unix_wait_status(25856)) and stderr was &quot;&quot;

---- tests::sum_lambda stdout ----
thread &#39;tests::sum_lambda&#39; panicked at crates/repl_test/src/cli.rs:96:13:
repl exited unexpectedly before finishing evaluation. Exit status was ExitStatus(unix_wait_status(25856)) and stderr was &quot;&quot;


failures:
    tests::identity_lambda
    tests::issue_2300
    tests::issue_2582_specialize_result_value
    tests::sum_lambda
</code></pre></div>



<a name="481426326"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/481426326" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#481426326">(Nov 09 2024 at 04:25)</a>:</h4>
<p>I’m also using the determinate systems nix installer. I ran into the issue above and was able to fix it with the given solution. So maybe this is related to that also?</p>



<a name="481426392"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/481426392" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#481426392">(Nov 09 2024 at 04:26)</a>:</h4>
<p><span class="user-mention" data-user-id="611722">@Isaac Van Doren</span> these are known failures on debug build, they work on <code>--release</code></p>



<a name="481426404"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/481426404" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#481426404">(Nov 09 2024 at 04:26)</a>:</h4>
<p>So I'd recommend <code>cargo test --release</code> for now</p>



<a name="481426431"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/481426431" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Van Doren <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#481426431">(Nov 09 2024 at 04:27)</a>:</h4>
<p>Perfect, thanks!</p>



<a name="481434278"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/481434278" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#481434278">(Nov 09 2024 at 06:37)</a>:</h4>
<p>Maybe we should ignore those in debug builds so people don't hit this?</p>



<a name="481458109"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/%E2%9C%94%20Any%20advice%20on%20failing%20roc%20tests%21%3F%21/near/481458109" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/.E2.9C.94.20Any.20advice.20on.20failing.20roc.20tests.21.3F.21.html#481458109">(Nov 09 2024 at 12:52)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/pull/7210">https://github.com/roc-lang/roc/pull/7210</a></p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>