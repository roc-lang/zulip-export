<html>
<head><meta charset="utf-8"><title>tree-sitter grammar · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html">tree-sitter grammar</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="402309889"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402309889" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402309889">(Nov 15 2023 at 19:07)</a>:</h4>
<p>I would like to contribute to roc in some way, i love what you guys are doing and I think the language holds a lot of promise. My main experience that's relevant to roc is with editor tooling. However I understand from reading about the current langserver that  the roc compiler isn't at a point where implementing proper completion is possible. <br>
One thing i can help with is making a tree-sitter grammar though, this allows for better support for neovim, helix and any other editors that make heavy use of tree-sitter. A TS grammar may also be useful when developing a structured editor which as i understand it is an eventual goal for roc. See <a href="https://www.masteringemacs.org/article/combobulate-structured-movement-editing-treesitter">https://www.masteringemacs.org/article/combobulate-structured-movement-editing-treesitter</a>.<br>
Basically i just want to make sure someone else isn't already doing this, and if not, I'll get started :)</p>



<a name="402315461"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402315461" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402315461">(Nov 15 2023 at 19:45)</a>:</h4>
<p>very cool! As far as I know, nobody else is working on this right now</p>



<a name="402315603"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402315603" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402315603">(Nov 15 2023 at 19:46)</a>:</h4>
<p>Great, I'll get on it then!</p>



<a name="402317682"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402317682" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402317682">(Nov 15 2023 at 19:59)</a>:</h4>
<p>I would 100% use it. I have debated trying to make one a few times, but never dove into it.</p>



<a name="402318722"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402318722" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402318722">(Nov 15 2023 at 20:04)</a>:</h4>
<p>I'm probably going to have a few questions as I go, the first one, is there anywhere I could find a spec for things like what chars can exist in an identifier? Var name, func name etc</p>



<a name="402319982"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402319982" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402319982">(Nov 15 2023 at 20:14)</a>:</h4>
<p>I think the parser has tests for things like that</p>



<a name="402320443"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402320443" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402320443">(Nov 15 2023 at 20:18)</a>:</h4>
<p><a href="https://github.com/roc-lang/roc/tree/main/crates%2Fcompiler%2Ftest_syntax%2Ftests">https://github.com/roc-lang/roc/tree/main/crates%2Fcompiler%2Ftest_syntax%2Ftests</a></p>



<a name="402320589"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402320589" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402320589">(Nov 15 2023 at 20:19)</a>:</h4>
<p>Oh, thanks that will be super helpful :)</p>



<a name="402357777"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402357777" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402357777">(Nov 16 2023 at 01:10)</a>:</h4>
<p>Well it's far too early in the morning, but here we are, the basics are all working, just need to start implementing the esoteric stuff now :)<br>
<a href="/user_uploads/22008/zGYKkeGP7ymw02jo3YC3OSNS/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/zGYKkeGP7ymw02jo3YC3OSNS/image.png" title="image.png"><img src="/user_uploads/22008/zGYKkeGP7ymw02jo3YC3OSNS/image.png"></a></div>



<a name="402366644"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402366644" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402366644">(Nov 16 2023 at 02:28)</a>:</h4>
<p>wow, impressive speed.</p>



<a name="402661200"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402661200" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402661200">(Nov 17 2023 at 10:07)</a>:</h4>
<p>Amazing <span class="user-mention" data-user-id="651372">@Eli Dowling</span>!<br>
Nice colors too :)</p>



<a name="402778241"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402778241" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402778241">(Nov 17 2023 at 20:54)</a>:</h4>
<p>Wonderful! I have <a href="https://gitlab.com/tad-lispy/nixos-configuration/-/blob/main/doom-emacs/modules/lang/roc/config.el">a rudimentary integration of the language server with my Emacs</a> and would love the syntax highlighting too. Where can I find your code <span class="user-mention" data-user-id="651372">@Eli Dowling</span>?</p>



<a name="402778786"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402778786" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402778786">(Nov 17 2023 at 20:59)</a>:</h4>
<p>Found it <a href="https://github.com/faldor20/tree-sitter-roc">https://github.com/faldor20/tree-sitter-roc</a> :D</p>



<a name="402784282"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402784282" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402784282">(Nov 17 2023 at 21:42)</a>:</h4>
<p>Oh don't look, it's far to ugly for the world to see.</p>



<a name="402784307"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402784307" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402784307">(Nov 17 2023 at 21:42)</a>:</h4>
<p>It's all a mess right now, for my eyes only <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>.<br>
Gimme a few days</p>



<a name="402784697"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402784697" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402784697">(Nov 17 2023 at 21:46)</a>:</h4>
<p>Too late <span aria-label="eyes" class="emoji emoji-1f440" role="img" title="eyes">:eyes:</span></p>



<a name="402784783"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402784783" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402784783">(Nov 17 2023 at 21:47)</a>:</h4>
<p>Honestly, it's very impressive what you got so far. I'm trying to figure out how to build it though. I guess with cargo?</p>



<a name="402784970"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402784970" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402784970">(Nov 17 2023 at 21:49)</a>:</h4>
<p>I know nothing about Tree Sitter, but maybe I can help by improving the flake.nix and providing a makefile?</p>



<a name="402785583"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402785583" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402785583">(Nov 17 2023 at 21:54)</a>:</h4>
<p>I am so excited of all of this. Can't want for nice colors in helix!!!</p>



<a name="402787169"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402787169" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402787169">(Nov 17 2023 at 22:07)</a>:</h4>
<p>Oh yeah, it's a bit awkward to build tree-sitter definitions using nix. <br>
Well it's a god awful mess because it's based of the elm parser. I decided to start there and slowly replace it with the differences. Unfortunately elm makes  some fundimental assumptions about the structure of their code that are incompatible with roc so there were some issues I just couldn't fix. As far as I can tell, because they enforce purity they never have two independent expressions within the same scope.<br>
So I've restarted based off fsharp instead. Things are coming along nicely, and it's almost back to how it was with elm.</p>



<a name="402787764"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402787764" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402787764">(Nov 17 2023 at 22:12)</a>:</h4>
<p>If you want to test it you can just run 'tree-sitter test'<br>
On nixos I can't get helix to build my tree-sitter definitions, they use a special nix flake for building in the normal nix install for helix so you'd have to make an override for helix and add it that way.<br>
My nasty way is right now if I want to test on helix is: reference the Grammer in neovim, run tsupdate which builds it properly then if I want to test it in helix I <a href="http://roc.so">roc.so</a> from the neovim tree-sitter parsers directory into the helix grammars directory. </p>
<p>But I wouldn't recommend that... Because it's stupid <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="402789085"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402789085" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402789085">(Nov 17 2023 at 22:23)</a>:</h4>
<p>Looks like a lot of people here are very excited about your effort. Please take it easy. I'm sure it's nobody's intention to push you.</p>



<a name="402818364"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402818364" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402818364">(Nov 18 2023 at 02:21)</a>:</h4>
<p>Appreciate the concern :) <br>
Well tonight's work has us a working grammar, highlighting and a Todo list with the things I'll work on in the upcoming days. The foundation should be all setup now and everything just needs dialing in. Edge cases,and missing language features, neatening up names etc but the basic structural bits are all represented and parse correctly.</p>



<a name="402833917"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402833917" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402833917">(Nov 18 2023 at 05:12)</a>:</h4>
<p><del>I know it's possible to integrate a tree-sitter grammar into a VSCode extension, might be something for <span class="user-mention" data-user-id="625544">@Ivan Demchenko</span> to look into. I think tree-sitter sits somewhere between the basic textmate grammar highlighting that VSCode uses and the full blown LSP integration which is still in the early stages.</del></p>



<a name="402857746"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402857746" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402857746">(Nov 18 2023 at 09:59)</a>:</h4>
<p><span class="user-mention" data-user-id="508951">@Hannes</span>, my understanding is that it's not very normal and support is pretty poor. <br>
There is this  <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.anycode">https://marketplace.visualstudio.com/items?itemName=ms-vscode.anycode</a><br>
But I believe the way it currently works in most cases is that you basically fake the semantic tokens response using the data from tree-sitter. That's how this works at least <a href="https://github.com/EvgeniyPeshkov/syntax-highlighter">https://github.com/EvgeniyPeshkov/syntax-highlighter</a><br>
Are you aware of any other methods?</p>



<a name="402860659"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402860659" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hannes <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402860659">(Nov 18 2023 at 10:30)</a>:</h4>
<p>Haha, to be honest I i just remember seeing a heading called "integrating tree-sitter" in the VSCode extension documentation, i didn't actually read it <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> I'll defer to someone with actual knowledge on the topic</p>



<a name="402986153"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402986153" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402986153">(Nov 19 2023 at 08:58)</a>:</h4>
<p>Little update on tree-sitter status, I've been going through all the example code in the roc repo, and the examples pages on the Wip website, and making sure everything works. I've added many many little features and I'm getting to the point where most stuff I paste in mostly just works. Still lots of edge cases to be found though. <br>
If anyone could point me to some good examples that use a lot of language features that'd be great.<br>
The only other really large scale change the needs making is going through and ensure names of everything are good and the structure of the tokens is nice coming out. But I'm mostly just gonna let it be a mess till I have every language feature working. <br>
Currently you should be able to use the highlights.scm and parser in master in the  helix editor, I'm not sure if the highlights work in neovim as I don't test there while I'm working. <br>
I'll write a readme with some explanation of development and building soon</p>



<a name="402986224"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402986224" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402986224">(Nov 19 2023 at 08:59)</a>:</h4>
<p>Also I'd like to see if I can improve error recovery, currently an error at the top just tends to kind of break everything below, I believe the python tree-sitter does some error recovery stuff so I'll try to investigate how that works</p>



<a name="402986266"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402986266" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402986266">(Nov 19 2023 at 08:59)</a>:</h4>
<p>I suspect it's a problem of not escaping the current scope because of the whole indentation situation.</p>



<a name="402989603"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402989603" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402989603">(Nov 19 2023 at 09:28)</a>:</h4>
<p><a href="https://github.com/lukewilliamboswell/roc-json/blob/main/package/Core.roc">https://github.com/lukewilliamboswell/roc-json/blob/main/package/Core.roc</a> might be a good test case</p>



<a name="402989678"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402989678" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402989678">(Nov 19 2023 at 09:29)</a>:</h4>
<p>Pretty sure most of the languages features are in there</p>



<a name="402989742"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402989742" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402989742">(Nov 19 2023 at 09:29)</a>:</h4>
<p>Also give <a href="https://github.com/roc-lang/examples/blob/main/examples/RecordBuilder/IDCounter.roc">https://github.com/roc-lang/examples/blob/main/examples/RecordBuilder/IDCounter.roc</a> a go too, that has record builder in it which is a bit special</p>



<a name="402994267"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/402994267" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#402994267">(Nov 19 2023 at 10:12)</a>:</h4>
<p>Thanks a lot <span class="user-mention" data-user-id="515757">@Luke Boswell</span>, I had seen the record builder syntax and filed that away as probably the scariest bit of syntax left, and something that I'd need to collect some more examples of <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>.</p>



<a name="403004680"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403004680" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403004680">(Nov 19 2023 at 12:07)</a>:</h4>
<p>Fantastic <span class="user-mention" data-user-id="651372">@Eli Dowling</span> ! I got some success integrating your grammar with Emacs. It's still WIP, but very exciting. <br>
<a href="/user_uploads/22008/17qFdT0Yk7dOEZ3lZUm45iGS/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/17qFdT0Yk7dOEZ3lZUm45iGS/image.png" title="image.png"><img src="/user_uploads/22008/17qFdT0Yk7dOEZ3lZUm45iGS/image.png"></a></div>



<a name="403005701"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403005701" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403005701">(Nov 19 2023 at 12:22)</a>:</h4>
<p>Hey nice! Well done :)</p>



<a name="403007353"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403007353" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403007353">(Nov 19 2023 at 12:45)</a>:</h4>
<p>The work-in-progress code for the major mode is here: <a href="https://gitlab.com/tad-lispy/nixos-configuration/-/blob/main/doom-emacs/modules/lang/roc/config.el">https://gitlab.com/tad-lispy/nixos-configuration/-/blob/main/doom-emacs/modules/lang/roc/config.el</a></p>



<a name="403007876"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403007876" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403007876">(Nov 19 2023 at 12:54)</a>:</h4>
<p>I wonder about the granularity of the AST. Mind you I never used Tree Sitter before, so maybe I just don't know what is what. Anyway, it seems to me that there is no way to query for keyword "app", or "pacakges" or "imports", without code that "belongs to it". So I made the whole <code>app_header</code>highlighted as a keyword, and then I target individual parts inside. It seems off. Maybe those words inside the header should be their own nodes? What do you think <span class="user-mention" data-user-id="651372">@Eli Dowling</span>?</p>



<a name="403007910"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403007910" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403007910">(Nov 19 2023 at 12:54)</a>:</h4>
<p>It's similar with <code>if</code>, <code>then</code> and <code>else</code>.</p>



<a name="403008551"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403008551" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403008551">(Nov 19 2023 at 13:04)</a>:</h4>
<p>Take a look at the highlights.scm file in the repo. The way most tree-sitter grammars I've seen do keyword queries is:<br>
[<br>
"app"<br>
"If"<br>
;;Etc<br>
]@keyword<br>
The grammar doesn't define a special toke for each keyword. I can't say why that is that way, maybe it's more efficient maybe it's just annoying to make a saved named token for every keyword <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="403008788"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403008788" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403008788">(Nov 19 2023 at 13:07)</a>:</h4>
<p>I see. Thanks. I'll have to learn more about the query system.</p>



<a name="403008977"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403008977" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403008977">(Nov 19 2023 at 13:10)</a>:</h4>
<p>But I'm not at all happy with the current state of the output tree. The names and shape of it is pretty ugly. But as I mentioned, for now I'm focusing on getting everything working well.<br>
The two big things that need to change are  being much more specific about what expressions can go where, and rethinking the current very flat structure. I haven't really decided, but technically roc should have a lot more nesting with backpassing. Currently we actually allow a list of side by side expressions which I've realised isn't really how roc works. Each value should be better though of containing nested expressions, value definitions and backpassing just happen to not increase indentation.</p>



<a name="403018351"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403018351" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403018351">(Nov 19 2023 at 15:01)</a>:</h4>
<p>Yes! Backpassing is really interesting syntactically, because it encompasses everything below it, I guess up to the drop in indentation.</p>



<a name="403018449"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403018449" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403018449">(Nov 19 2023 at 15:02)</a>:</h4>
<p>I think we have a very good starting point and we can go incrementally from here.</p>



<a name="403035613"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403035613" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403035613">(Nov 19 2023 at 17:44)</a>:</h4>
<p>An <code>else_expression</code> is a sibling of an <code>if_expression</code>. Is that right?</p>
<div class="codehilite" data-code-language="EmacsLisp"><pre><span></span><code><span class="w">  </span><span class="p">(</span><span class="nv">if_expression</span><span class="w"> </span><span class="k">if</span>
<span class="w">   </span><span class="nv">guard:</span>
<span class="w">    </span><span class="p">(</span><span class="nv">infix_expression</span>
<span class="w">     </span><span class="p">(</span><span class="nv">long_identifier_or_op</span>
<span class="w">      </span><span class="p">(</span><span class="nv">long_identifier</span><span class="w"> </span><span class="p">(</span><span class="nv">identifier</span><span class="p">)))</span>
<span class="w">     </span><span class="p">(</span><span class="nv">infix_op</span><span class="w"> </span><span class="nv">==</span><span class="p">)</span>
<span class="w">     </span><span class="p">(</span><span class="nv">long_identifier_or_op</span>
<span class="w">      </span><span class="p">(</span><span class="nv">long_identifier</span><span class="w"> </span><span class="p">(</span><span class="nv">identifier</span><span class="p">))))</span>
<span class="w">   </span><span class="nv">then</span>
<span class="w">   </span><span class="nv">then:</span>
<span class="w">    </span><span class="p">(</span><span class="nv">application_expression</span>
<span class="w">     </span><span class="nv">caller:</span>
<span class="w">      </span><span class="p">(</span><span class="nv">long_identifier_or_op</span>
<span class="w">       </span><span class="p">(</span><span class="nv">long_identifier</span><span class="w"> </span><span class="p">(</span><span class="nv">module</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">identifier</span><span class="p">)))</span>
<span class="w">     </span><span class="p">(</span><span class="nv">args</span>
<span class="w">      </span><span class="p">(</span><span class="nv">const</span>
<span class="w">       </span><span class="p">(</span><span class="nf">string</span><span class="w"> </span><span class="s">" "</span><span class="p">)))))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">else_expression</span><span class="w"> </span><span class="nv">else</span>
<span class="w">   </span><span class="p">(</span><span class="nv">application_expression</span>
<span class="w">    </span><span class="nv">caller:</span>
<span class="w">     </span><span class="p">(</span><span class="nv">long_identifier_or_op</span>
<span class="w">      </span><span class="p">(</span><span class="nv">long_identifier</span><span class="w"> </span><span class="p">(</span><span class="nv">module</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">identifier</span><span class="p">)))</span>
<span class="w">    </span><span class="p">(</span><span class="nv">args</span>
<span class="w">     </span><span class="p">(</span><span class="nv">const</span>
<span class="w">      </span><span class="p">(</span><span class="nf">string</span><span class="w"> </span><span class="s">" "</span><span class="p">))))))</span>
</code></pre></div>



<a name="403035701"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403035701" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403035701">(Nov 19 2023 at 17:45)</a>:</h4>
<p>That sounds correct, though an <code>else</code> can only exist within an <code>if</code>, so it could be seen as a sibling of <code>then</code> technically.</p>



<a name="403035813"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403035813" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403035813">(Nov 19 2023 at 17:46)</a>:</h4>
<p>Cause the full syntax is something like <code>if expression then block else block</code> That is the syntax for an if statement.</p>



<a name="403035857"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403035857" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403035857">(Nov 19 2023 at 17:47)</a>:</h4>
<p>Hmm, so yeah, I would say sibling to <code>then</code>, <code>else</code> is definitely not it's own expression.</p>



<a name="403036282"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403036282" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403036282">(Nov 19 2023 at 17:52)</a>:</h4>
<p>I actually just fixed that exact issue. Else is a child of if along with then</p>



<a name="403036319"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403036319" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403036319">(Nov 19 2023 at 17:52)</a>:</h4>
<p>Maybe it should be <code>(if_expression "if" (condition_block ...) "then" (then_block ...) "else" (else_block ...))</code>. The things in quotes are keywords that need to match literally, as discussed earlier in this stream.</p>



<a name="403036536"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403036536" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403036536">(Nov 19 2023 at 17:55)</a>:</h4>
<p>I hope you don't mind me dropping those questions / suggestions. I'm slowly writing syntax highlighting code. In the process I'm learning a lot about Emacs, Tree Sitter and adjacent stuff.</p>



<a name="403036616"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403036616" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403036616">(Nov 19 2023 at 17:56)</a>:</h4>
<p>I would be hesitant to recommend that. I'm super happy to help, but if you base it off how the tokens are now, you will be very disappointed when I rename them all</p>



<a name="403036682"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403036682" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403036682">(Nov 19 2023 at 17:57)</a>:</h4>
<p>Go ahead ofcourse, just when I have all the syntax working correctly there will be a big pass renaming piles of tokens and adding field names and such</p>



<a name="403036687"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403036687" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403036687">(Nov 19 2023 at 17:57)</a>:</h4>
<p>No, I wont be. I expect it to change and will be happy to rework my stuff. Most of the effort goes into my learning, so it's not wasted.</p>



<a name="403036743"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403036743" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403036743">(Nov 19 2023 at 17:58)</a>:</h4>
<p>Excellent :)</p>



<a name="403036745"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403036745" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403036745">(Nov 19 2023 at 17:58)</a>:</h4>
<p>Hopefully I can provide some feedback too. But if you don't want it, say so and I'll be quiet.</p>



<a name="403036787"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403036787" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403036787">(Nov 19 2023 at 17:58)</a>:</h4>
<p>No, for sure, provide away, I'm super happy for input.</p>



<a name="403042389"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403042389" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403042389">(Nov 19 2023 at 18:53)</a>:</h4>
<p>You probably know, but <code>tree-sitter test</code> gives </p>
<div class="codehilite"><pre><span></span><code>Error in query file &quot;highlights.scm&quot;

Caused by:
    Query error at 125:4. Invalid node type
</code></pre></div>



<a name="403046899"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403046899" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403046899">(Nov 19 2023 at 19:42)</a>:</h4>
<p>There is <code>ident</code> (I see it in <code>app_header</code> -&gt; <code>provides</code>) and <code>identifier</code> (everywhere else). Are they suppose to be two different node types?</p>



<a name="403047187"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403047187" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403047187">(Nov 19 2023 at 19:47)</a>:</h4>
<p>yeah, the hightlights keep going out of sync because i change the names occasionally</p>



<a name="403047351"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403047351" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403047351">(Nov 19 2023 at 19:50)</a>:</h4>
<p>Seems like type annotations are broken now. This:</p>
<div class="codehilite" data-code-language="roc"><pre><span></span><code>    actual : F64
    actual = 2.0 + 3.0
</code></pre></div>
<p>Gives this syntax tree:</p>
<div class="codehilite" data-code-language="EmacsLisp"><pre><span></span><code><span class="w">  </span><span class="p">(</span><span class="nv">value_declaration</span>
<span class="w">   </span><span class="p">(</span><span class="nv">value_declaration_left</span>
<span class="w">    </span><span class="p">(</span><span class="nv">identifier_pattern</span>
<span class="w">     </span><span class="p">(</span><span class="nv">long_identifier</span><span class="w"> </span><span class="p">(</span><span class="nv">identifier</span><span class="p">))))</span>
<span class="w">   </span><span class="p">(</span><span class="nv">ERROR</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nv">ERROR</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">ERROR</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nv">ERROR</span><span class="p">)</span><span class="w"> </span><span class="nv">l</span><span class="p">)</span>
</code></pre></div>



<a name="403047427"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403047427" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403047427">(Nov 19 2023 at 19:51)</a>:</h4>
<p>I think I'm done for today. Once again thanks for your effort. I hope my feedback is helpful. Please don't feel any pressure because of it. Good night!</p>



<a name="403050933"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403050933" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403050933">(Nov 19 2023 at 20:42)</a>:</h4>
<p>I'll take a look tomorrow :)</p>



<a name="403474684"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403474684" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403474684">(Nov 21 2023 at 22:44)</a>:</h4>
<p>Okay another update. <br>
The grammar is in a good enough state I'd say. I'm sure there is stuff missing and i can guarantee there are bugs with indentation, but it's working on most of the test files I've used. </p>
<p>This has been a very interesting learning experience. Mostly I've learned a ton of things not to do <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>. <br>
The grammar does need one more big overhaul to remove all the indentation tokens. The reasons are somewhat complex to explain but basically indentation tokens can match anywhere and so when you have two different sections of code that will diverge and resolve if you have an indentation token in the description of one variant that variant will always match so you need indentation tokens all over the place. <br>
The elm and fsharp grammar both get away with using almost none at all. So i think a migration to an indentation-less grammar would help fix most of  the edge cases and make it look way less messy.</p>
<p>However i fly to Indonesia tomorrow so this I won't be adding to this for a few weeks. But I'll check github in case anyone does a PR</p>
<p>Hope you all have fun with this :)<br>
oh and here is the link to the repo:<a href="https://github.com/faldor20/tree-sitter-roc">https://github.com/faldor20/tree-sitter-roc</a></p>



<a name="403477030"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/403477030" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Feldman <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#403477030">(Nov 21 2023 at 23:05)</a>:</h4>
<p>super awesome, hope you enjoy Indonesia! <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="404458245"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/404458245" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#404458245">(Nov 27 2023 at 17:28)</a>:</h4>
<p>I had a little time on planes and boats and such, so I added a readme for how to setup the grammar in helix and neovim. <br>
I also knocked out a few more edge cases and rewrote a bunch of the ugly bits of the grammar. <br>
Maybe <span class="user-mention" data-user-id="663757">@Tad Lispy</span> you could PR in some Emacs instructions? I'm not very Emacs familiar.</p>



<a name="404462420"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/404462420" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#404462420">(Nov 27 2023 at 17:53)</a>:</h4>
<blockquote>
<p>I added a readme for how to setup the grammar in helix</p>
</blockquote>
<p>Looks like I have something awesome to setup later today. Thanks for all your work!</p>



<a name="406143670"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/406143670" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#406143670">(Dec 05 2023 at 19:18)</a>:</h4>
<p>Hey! Great job! Sorry for late response. I've been distracted past days. I'll try to contribute, but Emacs Lisp is also a learning experience for me. I guess first thing I need to do is publish a package for with a major mode for Roc. As soon as I get it, I'll provide the instructions.</p>



<a name="406157453"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/406157453" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> LoipesMas <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#406157453">(Dec 05 2023 at 20:56)</a>:</h4>
<p>I've been using it for the past few days (in Neovim) and it's working great! Thanks for your work! I've made a PR that fixes some issues that I found</p>



<a name="406380276"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/406380276" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tad Lispy <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#406380276">(Dec 06 2023 at 20:23)</a>:</h4>
<p>I've made a package for Emacs and linked to it from your readme. Here is the PR: <a href="https://github.com/faldor20/tree-sitter-roc/pull/2">https://github.com/faldor20/tree-sitter-roc/pull/2</a></p>



<a name="430401585"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430401585" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nat-418 <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430401585">(Mar 30 2024 at 16:11)</a>:</h4>
<p>I have opened a pull request to integrate this tree-sitter support into Neovim: <a href="https://github.com/nvim-treesitter/nvim-treesitter/pull/6381">https://github.com/nvim-treesitter/nvim-treesitter/pull/6381</a></p>



<a name="430576265"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430576265" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nat-418 <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430576265">(Apr 01 2024 at 10:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="705306">nat-418</span> <a href="#narrow/stream/316715-contributing/topic/tree-sitter.20grammar/near/430401585">said</a>:</p>
<blockquote>
<p>I have opened a pull request to integrate this tree-sitter support into Neovim: <a href="https://github.com/nvim-treesitter/nvim-treesitter/pull/6381">https://github.com/nvim-treesitter/nvim-treesitter/pull/6381</a></p>
</blockquote>
<p>This has been accepted. If anyone notices problems please report them to the issue tracker in this repository: <a href="https://github.com/nat-418/tree-sitter-roc">https://github.com/nat-418/tree-sitter-roc</a> .</p>



<a name="430666013"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430666013" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430666013">(Apr 01 2024 at 21:23)</a>:</h4>
<p>I started messing with the tree-sitter grammar because I was trying to figure out why thing weren't highlighting. One thing led to another and I spent a good chunk of yesterday changing things and I now have seven reasonably sized commits. I'd like to know if you'd like them in one large PR or a set of smaller ones.</p>
<p>A lot of things are uncontroversial (e.g. tagging doc comments, tagging builtins) but some are more questionable like tagging match captures as parameters so that tree-sitters local analysis highlights typos.</p>
<p>Here's a before and after using my theme:</p>
<p><a href="/user_uploads/22008/yQXOn-8uEKwa1yJkfkd1Mvqx/Screenshot-2024-04-01-at-5.06.49-PM.png">Screenshot-2024-04-01-at-5.06.49-PM.png</a><br>
<a href="/user_uploads/22008/40pNEM0n3jevBRIfRBJx24sW/Screenshot-2024-04-01-at-5.08.03-PM.png">Screenshot-2024-04-01-at-5.08.03-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/yQXOn-8uEKwa1yJkfkd1Mvqx/Screenshot-2024-04-01-at-5.06.49-PM.png" title="Screenshot-2024-04-01-at-5.06.49-PM.png"><img src="/user_uploads/22008/yQXOn-8uEKwa1yJkfkd1Mvqx/Screenshot-2024-04-01-at-5.06.49-PM.png"></a></div><div class="message_inline_image"><a href="/user_uploads/22008/40pNEM0n3jevBRIfRBJx24sW/Screenshot-2024-04-01-at-5.08.03-PM.png" title="Screenshot-2024-04-01-at-5.08.03-PM.png"><img src="/user_uploads/22008/40pNEM0n3jevBRIfRBJx24sW/Screenshot-2024-04-01-at-5.08.03-PM.png"></a></div><p>Some things come from extending the highlight match tags (e.g. separate colorspace for typedefs, highlighting fn defs) so other themes would need to be tweaked for full support.</p>



<a name="430675281"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430675281" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430675281">(Apr 01 2024 at 22:35)</a>:</h4>
<p>Sure make some PRs and we can discuss anything questionable :)</p>



<a name="430737936"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430737936" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430737936">(Apr 02 2024 at 08:27)</a>:</h4>
<p>Yeah, smaller ones are usually nicer</p>



<a name="430738150"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430738150" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430738150">(Apr 02 2024 at 08:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="361169">Anton</span> <a href="#narrow/stream/316715-contributing/topic/tree-sitter.20grammar/near/430737936">said</a>:</p>
<blockquote>
<p>Yeah, smaller ones are usually nicer</p>
</blockquote>
<p>Hahah I hear you <span class="user-mention" data-user-id="361169">@Anton</span>  ;) I swear I do try to make them small <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="430738791"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430738791" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anton <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430738791">(Apr 02 2024 at 08:32)</a>:</h4>
<p>Hehe <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span> I get it though, if we focus too much on keeping them small there are various improvements that don't happen because you'd need to do a separate PR.</p>



<a name="430739141"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430739141" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430739141">(Apr 02 2024 at 08:34)</a>:</h4>
<p>To be clear, I'm completely okay with having the PR rejected and split into smaller parts. I didn't really have a plan so branch naming isn't great and the patches being coherent are mostly a matter of massaging git history</p>



<a name="430739633"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430739633" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430739633">(Apr 02 2024 at 08:37)</a>:</h4>
<p>I was hoping to get to it today actually, I just need to download your version, test it out and ensure that the highlights are as standard as they can be. Like obviously helix defines some standard highlighting types and not all themes implement them fully. My memory is that highlights are namespaced so that if a theme doesn't implement the most specific version it will be highlighted as the less specific version eg <code>@function.recursive</code> or some such</p>
<p>It does look good though :)</p>



<a name="430740085"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430740085" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430740085">(Apr 02 2024 at 08:40)</a>:</h4>
<p>Yes, that's how the selectors work.</p>



<a name="430740865"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430740865" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430740865">(Apr 02 2024 at 08:44)</a>:</h4>
<p>Also, if you're checking with <code>:tree-sitter-highlight-name</code> in helix you'll only get the correct name if you have it defined in the theme. Otherwise you'll get the more general rule or none at all if it's not within a major match group.</p>



<a name="430741941"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/430741941" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#430741941">(Apr 02 2024 at 08:51)</a>:</h4>
<p>cool, thanks for the tip</p>



<a name="431573359"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/431573359" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nat-418 <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#431573359">(Apr 05 2024 at 17:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="705306">nat-418</span> <a href="#narrow/stream/316715-contributing/topic/tree-sitter.20grammar/near/430576265">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="705306">nat-418</span> <a href="#narrow/stream/316715-contributing/topic/tree-sitter.20grammar/near/430401585">said</a>:</p>
<blockquote>
<p>I have opened a pull request to integrate this tree-sitter support into Neovim: <a href="https://github.com/nvim-treesitter/nvim-treesitter/pull/6381">https://github.com/nvim-treesitter/nvim-treesitter/pull/6381</a></p>
</blockquote>
<p>This has been accepted. If anyone notices problems please report them to the issue tracker in this repository: <a href="https://github.com/nat-418/tree-sitter-roc">https://github.com/nat-418/tree-sitter-roc</a> .</p>
</blockquote>
<p>This is slightly off-topic but it is related and I'd rather not make a whole new thread to mention it:  I have a PR open in Vim to add a Roc filetype plugin. This will allow better integration with tree-sitter and generally set the stage for further Roc developer experience improvements in Vim and Neovim.</p>



<a name="432532926"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/432532926" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nat-418 <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#432532926">(Apr 10 2024 at 15:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="705306">nat-418</span> <a href="#narrow/stream/316715-contributing/topic/tree-sitter.20grammar/near/431573359">said</a>:</p>
<blockquote>
<p>This is slightly off-topic but it is related and I'd rather not make a whole new thread to mention it:  I have a PR open in Vim to add a Roc filetype plugin. This will allow better integration with tree-sitter and generally set the stage for further Roc developer experience improvements in Vim and Neovim.</p>
</blockquote>
<p>This has been merged. Future releases of Vim and Neovim will now know what a Roc file is.</p>



<a name="434654908"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/434654908" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jiří Lužný <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#434654908">(Apr 22 2024 at 05:34)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="705306">@nat-418</span> for pushing Roc into neovim ecosystem. After the merges I could clean up my local nvim config :)</p>
<p>Here is the full configuration of Roc in <a href="https://www.lazyvim.org/">LazyVim</a> distro (should be easy to tailor for other distros/plain nvim): <a href="https://github.com/jluzny/nvim/blob/main/lua/plugins/roc.lua">https://github.com/jluzny/nvim/blob/main/lua/plugins/roc.lua</a></p>
<p>After my <a href="https://github.com/JoosepAlviste/nvim-ts-context-commentstring/pull/105">PR</a> to nvim-ts-context-commentstring gets merged, I will submit this config to LazyVim for its next release.</p>



<a name="434737352"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/434737352" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nat-418 <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#434737352">(Apr 22 2024 at 12:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="707718">Jiří Lužný</span> <a href="#narrow/stream/316715-contributing/topic/tree-sitter.20grammar/near/434654908">said</a>:</p>
<blockquote>
<p>Thanks <span class="user-mention silent" data-user-id="705306">nat-418</span> for pushing Roc into neovim ecosystem. After the merges I could clean up my local nvim config :)</p>
<p>Here is the full configuration of Roc in <a href="https://www.lazyvim.org/">LazyVim</a> distro (should be easy to tailor for other distros/plain nvim): <a href="https://github.com/jluzny/nvim/blob/main/lua/plugins/roc.lua">https://github.com/jluzny/nvim/blob/main/lua/plugins/roc.lua</a></p>
<p>After my <a href="https://github.com/JoosepAlviste/nvim-ts-context-commentstring/pull/105">PR</a> to nvim-ts-context-commentstring gets merged, I will submit this config to LazyVim for its next release.</p>
</blockquote>
<p>we still need to get more filetype defaults for the roc plugin. I am thinking basic indent rules, regex, etc. so the out-of-the-box vim/neovim experience is decent</p>



<a name="445977709"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/445977709" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#445977709">(Jun 21 2024 at 00:33)</a>:</h4>
<p>Hey all, I just updated this to support the new bang syntax, if you were having issues, please grab the new parser and queries :)</p>



<a name="446022798"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/446022798" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alf Richter <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#446022798">(Jun 21 2024 at 07:31)</a>:</h4>
<p><span class="user-mention" data-user-id="651372">@Eli Dowling</span> very cool, I'll update the zed extension.</p>



<a name="446026783"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/446026783" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alf Richter <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#446026783">(Jun 21 2024 at 07:58)</a>:</h4>
<p>Here the PR in the zed extension repo, the CI build checks are all green :)</p>



<a name="446026797"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/446026797" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alf Richter <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#446026797">(Jun 21 2024 at 07:58)</a>:</h4>
<p><a href="https://github.com/zed-industries/extensions/pull/925">https://github.com/zed-industries/extensions/pull/925</a></p>



<a name="446088661"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/446088661" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alf Richter <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#446088661">(Jun 21 2024 at 13:56)</a>:</h4>
<p>Update PR is merged into zed extensions repo now. :)</p>



<a name="446088836"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/446088836" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alf Richter <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#446088836">(Jun 21 2024 at 13:57)</a>:</h4>
<p><a href="/user_uploads/22008/Lh_O1fjMWiSaMapnXlWkCYik/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/Lh_O1fjMWiSaMapnXlWkCYik/image.png" title="image.png"><img src="/user_uploads/22008/Lh_O1fjMWiSaMapnXlWkCYik/image.png"></a></div>



<a name="447625922"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/447625922" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#447625922">(Jun 28 2024 at 01:27)</a>:</h4>
<p>Is it ok if I report random bugs in here? These aren't urgent or anything, but I figure it would be helpfull to collect them as I see them. </p>
<p>I've been using zed and occasionally notice things and could take a screenshot and include here, or maybe log an issue somewhere. </p>
<p>Like this - the platform <code>Str</code> isn't highlighted. </p>
<p><a href="/user_uploads/22008/LV8mjE9E-HFbnO57KEwKNTwj/Screenshot-2024-06-28-at-11.27.42.png">Screenshot-2024-06-28-at-11.27.42.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/LV8mjE9E-HFbnO57KEwKNTwj/Screenshot-2024-06-28-at-11.27.42.png" title="Screenshot-2024-06-28-at-11.27.42.png"><img src="/user_uploads/22008/LV8mjE9E-HFbnO57KEwKNTwj/Screenshot-2024-06-28-at-11.27.42.png"></a></div>



<a name="447628863"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/447628863" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#447628863">(Jun 28 2024 at 01:57)</a>:</h4>
<p>Yeah, no worries this is actually an issue with the queries in zeed and not the tree sitter grammar itself. I fixed it for neovim  and helix but the zed queries need updating <span class="user-mention" data-user-id="485505">@Alf Richter</span> could you take a look at this? Just see the last commit on the tree sitter repo.</p>



<a name="447629579"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/447629579" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#447629579">(Jun 28 2024 at 02:03)</a>:</h4>
<p>Sweet, well I'll just drop a msg in here when I notice something.</p>



<a name="448273552"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/448273552" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alf Richter <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#448273552">(Jul 01 2024 at 09:25)</a>:</h4>
<p>New PR for zed extensions repo update is created:<br>
<a href="https://github.com/zed-industries/extensions/pull/981">https://github.com/zed-industries/extensions/pull/981</a></p>



<a name="448355293"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/448355293" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alf Richter <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#448355293">(Jul 01 2024 at 14:54)</a>:</h4>
<p>It’s merged in Zed now.</p>



<a name="448739743"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/448739743" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#448739743">(Jul 03 2024 at 02:40)</a>:</h4>
<p>Sometimes the Tags aren't highlighted correctly. See <a href="https://github.com/roc-lang/basic-cli/blob/d2a434df5082d975e6494137dda99f9bd1c47f1d/build.roc">this build script</a> for an example. <code>ErrBuildingAppStub</code> is highlighted in blue correctly, while <code>ErrGeneratingGlue</code> is not.</p>
<p><a href="/user_uploads/22008/DP5X5M99Ng-0Jnd1lSe56nzP/Screenshot-2024-07-03-at-12.38.42.png">Screenshot-2024-07-03-at-12.38.42.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/DP5X5M99Ng-0Jnd1lSe56nzP/Screenshot-2024-07-03-at-12.38.42.png" title="Screenshot-2024-07-03-at-12.38.42.png"><img src="/user_uploads/22008/DP5X5M99Ng-0Jnd1lSe56nzP/Screenshot-2024-07-03-at-12.38.42.png"></a></div>



<a name="451335211"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/451335211" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#451335211">(Jul 14 2024 at 08:47)</a>:</h4>
<p>Tree-sitter doesn't love the new syntax for Record Builders <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span> </p>
<p><a href="/user_uploads/22008/Fik2FSqdG7vevyH-1UHEoUvp/Screenshot-2024-07-14-at-18.46.48.png">Screenshot-2024-07-14-at-18.46.48.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/Fik2FSqdG7vevyH-1UHEoUvp/Screenshot-2024-07-14-at-18.46.48.png" title="Screenshot-2024-07-14-at-18.46.48.png"><img src="/user_uploads/22008/Fik2FSqdG7vevyH-1UHEoUvp/Screenshot-2024-07-14-at-18.46.48.png"></a></div><p>To be fair, it's a really new change. Just thought I'd mention it.</p>



<a name="451336870"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/451336870" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#451336870">(Jul 14 2024 at 09:08)</a>:</h4>
<p>Also, I've noticed it doesn't like the "platform" in the <code>pf: platform "https://github</code> part of the header.</p>
<p><a href="/user_uploads/22008/9KJ674OA3dKWiySvow4sfKLM/Screenshot-2024-07-14-at-19.07.27.png">Screenshot-2024-07-14-at-19.07.27.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/9KJ674OA3dKWiySvow4sfKLM/Screenshot-2024-07-14-at-19.07.27.png" title="Screenshot-2024-07-14-at-19.07.27.png"><img src="/user_uploads/22008/9KJ674OA3dKWiySvow4sfKLM/Screenshot-2024-07-14-at-19.07.27.png"></a></div>



<a name="451338753"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/451338753" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ajai Nelson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#451338753">(Jul 14 2024 at 09:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/316715-contributing/topic/tree-sitter.20grammar/near/451336870">said</a>:</p>
<blockquote>
<p>Also, I've noticed it doesn't like the "platform" in the <code>pf: platform "https://github</code> part of the header.</p>
</blockquote>
<p>That seems to work fine in Emacs, so I suspect it's just a missing query in Zed, not a tree-sitter grammar issue</p>



<a name="451341025"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/451341025" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#451341025">(Jul 14 2024 at 10:07)</a>:</h4>
<p><span class="user-mention" data-user-id="515757">@Luke Boswell</span> <a href="https://github.com/faldor20/tree-sitter-roc/pull/21">https://github.com/faldor20/tree-sitter-roc/pull/21</a></p>



<a name="451341048"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/451341048" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#451341048">(Jul 14 2024 at 10:07)</a>:</h4>
<p>I have a PR to fix tree-sitter-roc for the new builder syntax</p>



<a name="451341213"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/451341213" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#451341213">(Jul 14 2024 at 10:08)</a>:</h4>
<p>Hey, <span class="user-mention" data-user-id="461444">@Sam Mohr</span> I saw your forked and assumed that was your plan. Let me know if you need any help, or a hand.</p>



<a name="451341230"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/451341230" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#451341230">(Jul 14 2024 at 10:09)</a>:</h4>
<p>The PR is already set for merging IMO</p>



<a name="451341233"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/451341233" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Mohr <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#451341233">(Jul 14 2024 at 10:09)</a>:</h4>
<p>I guess I'll ping you on Zulip next time</p>



<a name="451341239"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/451341239" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#451341239">(Jul 14 2024 at 10:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="511136">Ajai Nelson</span> <a href="#narrow/stream/316715-contributing/topic/tree-sitter.20grammar/near/451338753">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="515757">Luke Boswell</span> <a href="#narrow/stream/316715-contributing/topic/tree-sitter.20grammar/near/451336870">said</a>:</p>
<blockquote>
<p>Also, I've noticed it doesn't like the "platform" in the <code>pf: platform "https://github</code> part of the header.</p>
</blockquote>
<p>That seems to work fine in Emacs, so I suspect it's just a missing query in Zed, not a tree-sitter grammar issue</p>
</blockquote>
<p>I agree with this, I have tested that in helix and neovim.</p>



<a name="451341331"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/451341331" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#451341331">(Jul 14 2024 at 10:10)</a>:</h4>
<p>Oh haha, I just got home after a few days away. I'll check it out now :)</p>



<a name="452273964"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/452273964" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#452273964">(Jul 18 2024 at 07:54)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="515757">@Luke Boswell</span>  I've had a look at the changes needed to the grammar to fix the tags issue.<br>
Basically with the introduction of the ! operator the structure of roc code can now be very different and I'd have to re think a lot of the assumptions, the current grammar makes</p>



<a name="452275628"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/452275628" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luke Boswell <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#452275628">(Jul 18 2024 at 07:59)</a>:</h4>
<p>Thank you. Look forward to hearing how you go <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="470779489"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/tree-sitter%20grammar/near/470779489" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eli Dowling <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/tree-sitter.20grammar.html#470779489">(Sep 17 2024 at 00:13)</a>:</h4>
<p>Hey folks, quick status update on this. I'm seeing a lot of new syntax coming down the pipe for roc. That's awesome, but also means potentially a lot for tree sitter churn. </p>
<p>I've pretty much decided to not update this grammar, more than the bare minimum to keep it mostly working, until the syntax settles a bit again. </p>
<p>I'm definitely happy to add little patches that make new syntax not to totally bork the whole document, but for the full overhaul it needs to fix all the new edge cases I'll hold off on for a while.</p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>