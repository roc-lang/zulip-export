<html>
<head><meta charset="utf-8"><title>roc format --stdin --stdout traverses CWD · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc.20format.20--stdin.20--stdout.20traverses.20CWD.html">roc format --stdin --stdout traverses CWD</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="417311997"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc%20format%20--stdin%20--stdout%20traverses%20CWD/near/417311997" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Pfeifer <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc.20format.20--stdin.20--stdout.20traverses.20CWD.html#417311997">(Jan 22 2024 at 20:43)</a>:</h4>
<p>It looks like <code>roc format --stdin --stdout</code> recursively traverses the current working directory.</p>
<p>If I understand <a href="https://github.com/roc-lang/roc/blob/e2dac4f022275a6d4645477f7c321bf1ad3dfce7/crates/cli/src/main.rs#L284-L302">processing of command line options</a> correctly, then the file or directory to be processed by the formatter defaults to the current working directory. Does this really make sense if both <code>--stdin</code> and <code>--stdout</code> are present? </p>
<p>I understand that this little problem does not have the highest priority. But it is annoying to me because it prevents me from running the formatter from within an Emacs buffer.  I can try to work on a solution (if we agree there is a problem).</p>



<a name="417319074"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc%20format%20--stdin%20--stdout%20traverses%20CWD/near/417319074" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc.20format.20--stdin.20--stdout.20traverses.20CWD.html#417319074">(Jan 22 2024 at 21:31)</a>:</h4>
<p>Definitely sounds like a bug to me</p>



<a name="417319243"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc%20format%20--stdin%20--stdout%20traverses%20CWD/near/417319243" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc.20format.20--stdin.20--stdout.20traverses.20CWD.html#417319243">(Jan 22 2024 at 21:32)</a>:</h4>
<p>I think a PR would be quite welcome</p>



<a name="417319284"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc%20format%20--stdin%20--stdout%20traverses%20CWD/near/417319284" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc.20format.20--stdin.20--stdout.20traverses.20CWD.html#417319284">(Jan 22 2024 at 21:33)</a>:</h4>
<p>Probably the recursive behavior was added and this case was missed.</p>



<a name="417520579"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/roc%20format%20--stdin%20--stdout%20traverses%20CWD/near/417520579" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Pfeifer <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/roc.20format.20--stdin.20--stdout.20traverses.20CWD.html#417520579">(Jan 23 2024 at 20:11)</a>:</h4>
<p>I created issue <a href="https://github.com/roc-lang/roc/issues/6419">#6419</a>. I'm going to work on a solution.</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>