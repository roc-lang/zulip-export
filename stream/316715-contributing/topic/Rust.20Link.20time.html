<html>
<head><meta charset="utf-8"><title>Rust Link time · contributing · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/index.html">contributing</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html">Rust Link time</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="274310262"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310262" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310262">(Mar 06 2022 at 15:01)</a>:</h4>
<p>Does the rust linker take a long time for anyone else?<br>
If I make a small change, recompiling takes a couple of seconds until it hits linking, then it takes well over a minute; probably significantly longer, I haven't actually timed it</p>



<a name="274310360"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310360" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310360">(Mar 06 2022 at 15:03)</a>:</h4>
<p>What OS and CPU architecture are you on?</p>



<a name="274310494"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310494" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310494">(Mar 06 2022 at 15:06)</a>:</h4>
<p>I haven't had it that slow no. I think there's a way to swap the linker using a cargo config file.</p>



<a name="274310516"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310516" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310516">(Mar 06 2022 at 15:06)</a>:</h4>
<p><code>~/.cargo/config.toml</code></p>



<a name="274310519"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310519" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310519">(Mar 06 2022 at 15:06)</a>:</h4>
<p><code>rustflags = ["-C", "link-arg=-fuse-ld=lld", "-C", "target-cpu=native"]</code></p>



<a name="274310529"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310529" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310529">(Mar 06 2022 at 15:07)</a>:</h4>
<p>are you doing that already?</p>



<a name="274310614"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310614" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310614">(Mar 06 2022 at 15:08)</a>:</h4>
<p>I'm using WSL</p>



<a name="274310628"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310628" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310628">(Mar 06 2022 at 15:09)</a>:</h4>
<p>I found a comment on a rust blog that using LLVM's linker is faster</p>



<a name="274310646"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310646" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310646">(Mar 06 2022 at 15:09)</a>:</h4>
<p><a href="/user_uploads/22008/gzf8JF8Q4ByZnAf4LRvx8N-I/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/gzf8JF8Q4ByZnAf4LRvx8N-I/image.png" title="image.png"><img src="/user_uploads/22008/gzf8JF8Q4ByZnAf4LRvx8N-I/image.png"></a></div>



<a name="274310691"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310691" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310691">(Mar 06 2022 at 15:10)</a>:</h4>
<p>yes that's what the config I posted does</p>



<a name="274310694"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310694" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310694">(Mar 06 2022 at 15:10)</a>:</h4>
<p>lld is llvm's linker</p>



<a name="274310702"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310702" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310702">(Mar 06 2022 at 15:10)</a>:</h4>
<p>on WSL you need to have all your files in the Linux filesystem rather than Windows or things will be crazy slow. I had that problem when I was first setting up on this project.</p>



<a name="274310716"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310716" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310716">(Mar 06 2022 at 15:11)</a>:</h4>
<p>There are some tips on this in the building_from_source.md or whatever it's called</p>



<a name="274310728"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310728" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310728">(Mar 06 2022 at 15:11)</a>:</h4>
<p>Would it make sense to set lld as the linker in the Cargo files?</p>



<a name="274310737"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310737" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310737">(Mar 06 2022 at 15:12)</a>:</h4>
<p>As far as I know everything is in the Linux filesystem</p>



<a name="274310739"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310739" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310739">(Mar 06 2022 at 15:12)</a>:</h4>
<p>It breaks Wasm</p>



<a name="274310778"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310778" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310778">(Mar 06 2022 at 15:12)</a>:</h4>
<p>wasm uses wasm-ld</p>



<a name="274310782"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310782" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310782">(Mar 06 2022 at 15:12)</a>:</h4>
<p>I don't know if there are other reasons not to use lld</p>



<a name="274310787"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310787" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310787">(Mar 06 2022 at 15:12)</a>:</h4>
<p>That makes sense</p>



<a name="274310798"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310798" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310798">(Mar 06 2022 at 15:12)</a>:</h4>
<p>So I don't actually use that config I just posted because I mainly work on wasm</p>



<a name="274310806"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310806" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Carroll <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310806">(Mar 06 2022 at 15:13)</a>:</h4>
<p>but that's what someone recommended to me so it might help you!</p>



<a name="274310879"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310879" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310879">(Mar 06 2022 at 15:14)</a>:</h4>
<p>I'll give it a try</p>



<a name="274310940"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/316715-contributing/topic/Rust%20Link%20time/near/274310940" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Gustafson <a href="https://roc-lang.github.io/zulip-export/stream/316715-contributing/topic/Rust.20Link.20time.html#274310940">(Mar 06 2022 at 15:15)</a>:</h4>
<p>And looking at the WSL comments in BUILDING_FROM_SOURCE, I'm more sure that that isn't my issue. I cloned the repo from within Linux</p>



<hr><p>Last updated: Nov 01 2025 at 12:13 UTC</p>
</html>