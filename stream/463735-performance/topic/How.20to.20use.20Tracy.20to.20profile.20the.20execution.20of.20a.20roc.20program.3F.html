<html>
<head><meta charset="utf-8"><title>How to use Tracy to profile the execution of a roc program? · performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/index.html">performance</a></h2>
<h3>Topic: <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html">How to use Tracy to profile the execution of a roc program?</a></h3>

<hr>

<base href="https://roc.zulipchat.com">

<head><link href="https://roc-lang.github.io/zulip-export/style.css" rel="stylesheet"></head>

<a name="563881323"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563881323" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563881323">(Dec 15 2025 at 17:20)</a>:</h4>
<p>I’ve managed to install tracy, build it from source, and have the tracy GUI up.<br>
Then I’m compiling the roc binary with:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>zig<span class="w"> </span>build<span class="w"> </span>roc<span class="w"> </span>-Dtracy<span class="o">=</span>/Users/piz/git/wolfpld/tracy<span class="w"> </span>-Dtracy-callstack<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<p>And then when I’m running the roc program, it seems to connect to the tracy server. And then I have the following catpure.</p>
<p><a href="/user_uploads/22008/ZWmYWIGqjo2O1YtF2BMOVA-n/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/ZWmYWIGqjo2O1YtF2BMOVA-n/image.png" title="image.png"><img data-original-content-type="image/png" data-original-dimensions="1129x1159" src="/user_uploads/thumbnail/22008/ZWmYWIGqjo2O1YtF2BMOVA-n/image.png/840x560.webp"></a></div><p>It basically says that all the time is spent inside <code>rocRun</code>. If I want to get more fine-grained insight, what should I do?</p>



<a name="563882303"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563882303" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563882303">(Dec 15 2025 at 17:24)</a>:</h4>
<p>Weird. I wonder why it didn't expand all the zones for you. (zooming out may fix?)</p>



<a name="563882386"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563882386" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563882386">(Dec 15 2025 at 17:25)</a>:</h4>
<p>Do you have any ability to drag down and expand the main thread zone to see more?</p>



<a name="563882740"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563882740" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563882740">(Dec 15 2025 at 17:26)</a>:</h4>
<p>Also, if you sort by self time in that zone info panel, you probably still would get a solid sense of where is best to look at. Though it is possible that we don't yet have tracing for whichever functions are slow in this case.</p>
<p>Generally, I use roc build and then run the app separately so that compilation time and run time are separate traces</p>



<a name="563883224"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563883224" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563883224">(Dec 15 2025 at 17:28)</a>:</h4>
<p>I don’t think I have access to any more details. Though when I added manually the two lines at the top of rocRun to the top of runWithPosixFdInheritance, I see it in the details. <br>
<a href="/user_uploads/22008/9oi7l1-QFRufGe80zSKb1UnJ/image.png">image.png</a><br>
But you are probably right, I might need to split into build an executable then run that</p>
<div class="message_inline_image"><a href="/user_uploads/22008/9oi7l1-QFRufGe80zSKb1UnJ/image.png" title="image.png"><img data-original-content-type="image/png" data-original-dimensions="743x1156" src="/user_uploads/thumbnail/22008/9oi7l1-QFRufGe80zSKb1UnJ/image.png/840x560.webp"></a></div>



<a name="563883747"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563883747" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563883747">(Dec 15 2025 at 17:31)</a>:</h4>
<p>What really odd is that clearly it is recording more data</p>



<a name="563883771"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563883771" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563883771">(Dec 15 2025 at 17:31)</a>:</h4>
<p>Otherwise it wouldn't know all of those sell times below</p>



<a name="563883852"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563883852" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563883852">(Dec 15 2025 at 17:31)</a>:</h4>
<p>I'm guess we don't have coverage for whatever is eating all the time</p>



<a name="563883984"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563883984" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Hansknecht <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563883984">(Dec 15 2025 at 17:32)</a>:</h4>
<p>Is this from your append benchmark?</p>



<a name="563883990"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563883990" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563883990">(Dec 15 2025 at 17:32)</a>:</h4>
<p>Got more by running the binary directly :) <br>
<a href="/user_uploads/22008/yRtxzwZGCi4xZ03BCiF_0NZ8/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/22008/yRtxzwZGCi4xZ03BCiF_0NZ8/image.png" title="image.png"><img data-original-content-type="image/png" data-original-dimensions="880x1245" src="/user_uploads/thumbnail/22008/yRtxzwZGCi4xZ03BCiF_0NZ8/image.png/840x560.webp"></a></div>



<a name="563884184"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563884184" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563884184">(Dec 15 2025 at 17:33)</a>:</h4>
<p>Thx</p>



<a name="563909367"></a>
<h4><a href="https://roc.zulipchat.com#narrow/stream/463735-performance/topic/How%20to%20use%20Tracy%20to%20profile%20the%20execution%20of%20a%20roc%20program%3F/near/563909367" class="zl"><img src="https://roc-lang.github.io/zulip-export/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthieu Pizenberg <a href="https://roc-lang.github.io/zulip-export/stream/463735-performance/topic/How.20to.20use.20Tracy.20to.20profile.20the.20execution.20of.20a.20roc.20program.3F.html#563909367">(Dec 15 2025 at 19:38)</a>:</h4>
<p>I wrote a bit about what I tried here. Might continue on it in the coming days, but feel free to steal anything interesting in there to incorporate in other perf PRs.<br>
<a href="https://github.com/roc-lang/roc/pull/8687">https://github.com/roc-lang/roc/pull/8687</a></p>



<hr><p>Last updated: Mar 01 2026 at 12:20 UTC</p>
</html>